{"file_name": "/home/qj213/afp-2021-10-22/thys/Timed_Automata/Regions.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Timed_Automata", "problem_names": ["lemma valid_intv_distinct:\n  \"valid_intv c I \\<Longrightarrow> valid_intv c I' \\<Longrightarrow> intv_elem x u I \\<Longrightarrow> intv_elem x u I' \\<Longrightarrow> I = I'\"", "lemma valid_regions_distinct:\n  \"valid_region X k I r \\<Longrightarrow> valid_region X k I' r' \\<Longrightarrow> v \\<in> region X I r \\<Longrightarrow> v \\<in> region X I' r'\n  \\<Longrightarrow> region X I r = region X I' r'\"", "lemma \\<R>_regions_distinct:\n  \"\\<lbrakk>\\<R> = {region X I r | I r. valid_region X k I r}; R \\<in> \\<R>; v \\<in> R; R' \\<in> \\<R>; R \\<noteq> R'\\<rbrakk> \\<Longrightarrow> v \\<notin> R'\"", "lemma region_cover:\n  \"\\<forall> x \\<in> X. u x \\<ge> 0 \\<Longrightarrow> \\<exists> R. R \\<in> {region X I r | I r. valid_region X k I r} \\<and> u \\<in> R\"", "lemma intv_not_empty:\n  obtains d where \"intv_elem x (v(x := d)) (I x)\"", "lemma region_not_empty_aux:\n  assumes \"0 < f\" \"f < 1\" \"0 < g\" \"g < 1\"\n  shows \"frac (get_intv_val (Intv d) f) \\<le> frac (get_intv_val (Intv d') g) \\<longleftrightarrow> f \\<le> g\"", "lemma region_not_empty:\n  assumes \"finite X\" \"valid_region X k I r\"\n  shows \"\\<exists> u. u \\<in> region X I r\"", "lemma regions_partition:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> \\<forall>x \\<in> X. 0 \\<le> u x \\<Longrightarrow> \\<exists>! R \\<in> \\<R>. u \\<in> R\"", "lemma region_unique:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> u \\<in> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> [u]\\<^sub>\\<R> = R\"", "lemma regions_partition':\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow> \\<forall>x\\<in>X. 0 \\<le> v' x \\<Longrightarrow> v' \\<in> [v]\\<^sub>\\<R>\n  \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>\"", "lemma regions_closed:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>\"", "lemma regions_closed':\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> (v \\<oplus> t) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\"", "lemma valid_regions_I_cong:\n  \"valid_region X k I r \\<Longrightarrow> \\<forall> x \\<in> X. I x = I' x \\<Longrightarrow> region X I r = region X I' r \\<and> valid_region X k I' r\"", "lemma finite_\\<R>:\n  notes [[simproc add: finite_Collect]] finite_subset[intro]\n  fixes X k\n  defines \"\\<R> \\<equiv> {region X I r | I r. valid_region X k I r}\"\n  assumes \"finite X\"\n  shows \"finite \\<R>\"", "lemma SuccI2:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> v \\<in> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> R' = [v \\<oplus> t]\\<^sub>\\<R>\n  \\<Longrightarrow> R' \\<in> Succ \\<R> R\"", "lemma Succ_refl:\n  \"\\<R> = {region X I r |I r. valid_region X k I r} \\<Longrightarrow> finite X \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> R \\<in> Succ \\<R> R\"", "lemma Succ_refl':\n  \"\\<R> = {region X I r |I r. valid_region X k I r} \\<Longrightarrow> finite X \\<Longrightarrow> \\<forall> x \\<in> X. \\<exists> c. I x = Greater c\n  \\<Longrightarrow> region X I r \\<in> \\<R> \\<Longrightarrow> Succ \\<R> (region X I r) = {region X I r}\"", "lemma closest_prestable_1:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  defines \"Z \\<equiv> {x \\<in> X . \\<exists> c. I x = Const c}\"\n  assumes \"Z \\<noteq> {}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> Z then I x else if intv_const (I x) = k x then Greater (k x) else Intv (intv_const (I x))\"\n  defines \"r' \\<equiv> r \\<union> {(x,y) . x \\<in> Z \\<and> y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  shows   \"\\<forall> v \\<in> R. \\<forall> t>0. \\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> t' \\<ge> 0\"\n  and     \"\\<forall> v \\<in> region X I' r'. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> R\"\n  and     \"\\<forall> x \\<in> X. \\<not> isConst (I' x)\"\n  and     \"\\<forall> v \\<in> R. \\<forall> t < 1. \\<forall> t' \\<ge> 0. (v \\<oplus> t') \\<in> region X I' r'\n           \\<longrightarrow> {x. x \\<in> X \\<and> (\\<exists> c. I x = Intv c \\<and> v x + t \\<ge> c + 1)}\n                = {x. x \\<in> X \\<and> (\\<exists> c. I' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> c + 1)}\"", "lemma closest_valid_1:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  defines \"Z \\<equiv> {x \\<in> X . \\<exists> c. I x = Const c}\"\n  assumes \"Z \\<noteq> {}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> Z then I x else if intv_const (I x) = k x then Greater (k x) else Intv (intv_const (I x))\"\n  defines \"r' \\<equiv> r \\<union> {(x,y) . x \\<in> Z \\<and> y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  shows \"valid_region X k I' r'\"", "lemma closest_prestable_2:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  assumes \"\\<forall> x \\<in> X. \\<not> isConst (I x)\"\n  defines \"X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\"\n  defines \"M \\<equiv> {x \\<in> X\\<^sub>0. \\<forall> y \\<in> X\\<^sub>0. (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> M then I x else Const (intv_const (I x) + 1)\"\n  defines \"r' \\<equiv> {(x,y) \\<in> r. x \\<notin> M \\<and> y \\<notin> M}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  assumes \"M \\<noteq> {}\"\n  shows   \"\\<forall> v \\<in> R. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> R \\<longrightarrow> (\\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> t' \\<ge> 0)\"\n  and     \"\\<forall> v \\<in> region X I' r'. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> R\"\n  and     \"\\<forall> v \\<in> R. \\<forall> t'. {x. x \\<in> X \\<and> (\\<exists> c. I' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> real (c + 1))}\n                  = {x. x \\<in> X \\<and> (\\<exists> c. I x  = Intv c \\<and> v x + t \\<ge> real (c + 1))} - M\"\n  and     \"\\<exists> x \\<in> X. isConst (I' x)\"", "lemma closest_valid_2:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  assumes \"\\<forall> x \\<in> X. \\<not> isConst (I x)\"\n  defines \"X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\"\n  defines \"M \\<equiv> {x \\<in> X\\<^sub>0. \\<forall> y \\<in> X\\<^sub>0. (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> M then I x else Const (intv_const (I x) + 1)\"\n  defines \"r' \\<equiv> {(x,y) \\<in> r. x \\<notin> M \\<and> y \\<notin> M}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  assumes \"M \\<noteq> {}\"\n  shows \"valid_region X k I' r'\"", "lemma total_finite_trans_max:\n  \"X \\<noteq> {} \\<Longrightarrow> finite X \\<Longrightarrow> total_on X r \\<Longrightarrow> trans r \\<Longrightarrow> \\<exists> x \\<in> X. \\<forall> y \\<in> X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\"", "lemma card_mono_strict_subset:\n  \"finite A \\<Longrightarrow> finite B \\<Longrightarrow> finite C \\<Longrightarrow> A \\<inter> B \\<noteq> {} \\<Longrightarrow> C = A - B \\<Longrightarrow> card C < card A\"", "lemma int_shift_equiv:\n  fixes X k fixes t :: int\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"v \\<in> R\" \"v' \\<in> R\" \"R \\<in> \\<R>\" \"t \\<ge> 0\"\n  shows \"(v' \\<oplus> t) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\"", "lemma set_of_regions_lt_1:\n  fixes X k I r t v\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"C \\<equiv> {x. x \\<in> X \\<and> (\\<exists> c. I x = Intv c \\<and> v x + t \\<ge> c + 1)}\"\n  assumes \"valid_region X k I r\" \"v \\<in> region X I r\" \"v' \\<in> region X I r\" \"finite X\" \"0 \\<le> t\" \"t < 1\"\n  shows \"\\<exists> t'\\<ge>0. (v' \\<oplus> t') \\<in> [v \\<oplus> t]\\<^sub>\\<R>\"", "lemma set_of_regions:\n  fixes X k\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"R \\<in> \\<R>\" \"v \\<in> R\" \"R' \\<in> Succ \\<R> R\" \"finite X\"\n  shows \"\\<exists> t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'\"", "lemma ccompatible1:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (EQ x c)\"", "lemma ccompatible2:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (LT x c)\"", "lemma ccompatible3:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (LE x c)\"", "lemma ccompatible4:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (GT x c)\"", "lemma ccompatible5:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (GE x c)\"", "lemma ccompatible:\n  fixes X k fixes c :: nat\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"\\<forall>(x,m) \\<in> collect_clock_pairs cc. m \\<le> k x \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n  shows \"ccompatible \\<R> cc\"", "lemma region_set_id:\n  fixes X k\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"R \\<in> \\<R>\" \"v \\<in> R\" \"finite X\" \"0 \\<le> c\" \"c \\<le> k x\" \"x \\<in> X\"\n  shows \"[v(x := c)]\\<^sub>\\<R> = region_set R x c\" \"[v(x := c)]\\<^sub>\\<R> \\<in> \\<R>\" \"v(x := c) \\<in> [v(x := c)]\\<^sub>\\<R>\"", "lemma region_set'_id:\n  fixes X k and c :: nat\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"R \\<in> \\<R>\" \"v \\<in> R\" \"finite X\" \"0 \\<le> c\" \"\\<forall> x \\<in> set r. c \\<le> k x\" \"set r \\<subseteq> X\"\n  shows \"[[r \\<rightarrow> c]v]\\<^sub>\\<R> = region_set' R r c \\<and> [[r \\<rightarrow> c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and> [r \\<rightarrow> c]v \\<in> [[r \\<rightarrow> c]v]\\<^sub>\\<R>\"", "lemma region_cover':\n  assumes \"\\<R> = {region X I r |I r. valid_region X k I r}\" and \"\\<forall>x\\<in>X. 0 \\<le> v x\"\n  shows \"v \\<in> [v]\\<^sub>\\<R>\" \"[v]\\<^sub>\\<R> \\<in> \\<R>\"", "lemma step_r_complete_aux:\n  fixes R r A l' g\n  defines \"R' \\<equiv> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\"\n  assumes \"\\<R> = {region X I r |I r. valid_region X k I r}\"\n    and \"valid_abstraction A X k\"\n    and \"u \\<in> R\"\n    and \"R \\<in> \\<R>\"\n    and \"A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\"\n    and \"u \\<turnstile> g\"\n    and \"[r\\<rightarrow>0]u \\<turnstile> inv_of A l'\"\n  shows \"R = R \\<inter> {u. u \\<turnstile> g} \\<and> R' = region_set' R r 0 \\<and> R' \\<in> \\<R>\"", "lemma step_r_complete:\n  \"\\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>; \\<R> = {region X I r |I r. valid_region X k I r}; valid_abstraction A X k;\n    \\<forall> x \\<in> X. u x \\<ge> 0\\<rbrakk> \\<Longrightarrow> \\<exists> R'. A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle> \\<and> u' \\<in> R' \\<and> R' \\<in> \\<R>\"", "lemma step_r_sound:\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle> \\<Longrightarrow> \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<Longrightarrow> R' \\<noteq> {} \\<Longrightarrow> (\\<forall> u \\<in> R. \\<exists> u' \\<in> R'. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>)\"", "lemma steps_alt:\n  \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'',u''\\<rangle>\"", "lemma emptiness_preservance: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle> \\<Longrightarrow> R = {} \\<Longrightarrow> R' = {}\"", "lemma emptiness_preservance_steps: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l',R'\\<rangle> \\<Longrightarrow> R = {} \\<Longrightarrow> R' = {}\"", "lemma steps_r_sound:\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle> \\<Longrightarrow> \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<Longrightarrow> R' \\<noteq> {} \\<Longrightarrow> u \\<in> R \\<Longrightarrow> \\<exists> u' \\<in> R'. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\"", "lemma steps_r_sound':\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle> \\<Longrightarrow> \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<Longrightarrow> R' \\<noteq> {} \\<Longrightarrow> (\\<exists> u' \\<in> R'. \\<exists> u \\<in> R.  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>)\"", "lemma single_step_r:\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\"", "lemma steps_r_alt:\n  \"A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\"", "lemma single_step:\n  \"x1 \\<turnstile> \\<langle>x2, x3\\<rangle> \\<rightarrow> \\<langle>x4,x5\\<rangle> \\<Longrightarrow> x1 \\<turnstile> \\<langle>x2, x3\\<rangle> \\<rightarrow>* \\<langle>x4,x5\\<rangle>\"", "lemma steps_r_complete:\n  \"\\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>; \\<R> = {region X I r |I r. valid_region X k I r}; valid_abstraction A X k;\n    \\<forall> x \\<in> X. u x \\<ge> 0\\<rbrakk> \\<Longrightarrow> \\<exists> R'. A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto>* \\<langle>l',R'\\<rangle> \\<and> u' \\<in> R'\""], "translations": [["", "lemma valid_intv_distinct:\n  \"valid_intv c I \\<Longrightarrow> valid_intv c I' \\<Longrightarrow> intv_elem x u I \\<Longrightarrow> intv_elem x u I' \\<Longrightarrow> I = I'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_intv c I; valid_intv c I'; intv_elem x u I;\n     intv_elem x u I'\\<rbrakk>\n    \\<Longrightarrow> I = I'", "by (cases I; cases I'; auto)"], ["", "text \\<open>From this we show that all valid regions are distinct.\\<close>"], ["", "lemma valid_regions_distinct:\n  \"valid_region X k I r \\<Longrightarrow> valid_region X k I' r' \\<Longrightarrow> v \\<in> region X I r \\<Longrightarrow> v \\<in> region X I' r'\n  \\<Longrightarrow> region X I r = region X I' r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "case A: 1"], ["proof (state)\nthis:\n  valid_region X k I r\n  valid_region X k I' r'\n  v \\<in> region X I r\n  v \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "{"], ["proof (state)\nthis:\n  valid_region X k I r\n  valid_region X k I' r'\n  v \\<in> region X I r\n  v \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "assume x: \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "with A(1)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X", "have \"valid_intv (k x) (I x)\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (I x)", "by auto"], ["proof (state)\nthis:\n  valid_intv (k x) (I x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "moreover"], ["proof (state)\nthis:\n  valid_intv (k x) (I x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "from A(2) x"], ["proof (chain)\npicking this:\n  valid_region X k I' r'\n  x \\<in> X", "have \"valid_intv (k x) (I' x)\""], ["proof (prove)\nusing this:\n  valid_region X k I' r'\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (I' x)", "by auto"], ["proof (state)\nthis:\n  valid_intv (k x) (I' x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "moreover"], ["proof (state)\nthis:\n  valid_intv (k x) (I' x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "from A(3) x"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> X", "have \"intv_elem x v (I x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x v (I x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "moreover"], ["proof (state)\nthis:\n  intv_elem x v (I x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "from A(4) x"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  x \\<in> X", "have \"intv_elem x v (I' x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x v (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x v (I' x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "ultimately"], ["proof (chain)\npicking this:\n  valid_intv (k x) (I x)\n  valid_intv (k x) (I' x)\n  intv_elem x v (I x)\n  intv_elem x v (I' x)", "have \"I x = I' x\""], ["proof (prove)\nusing this:\n  valid_intv (k x) (I x)\n  valid_intv (k x) (I' x)\n  intv_elem x v (I x)\n  intv_elem x v (I' x)\n\ngoal (1 subgoal):\n 1. I x = I' x", "using valid_intv_distinct"], ["proof (prove)\nusing this:\n  valid_intv (k x) (I x)\n  valid_intv (k x) (I' x)\n  intv_elem x v (I x)\n  intv_elem x v (I' x)\n  \\<lbrakk>valid_intv ?c ?I; valid_intv ?c ?I'; intv_elem ?x ?u ?I;\n   intv_elem ?x ?u ?I'\\<rbrakk>\n  \\<Longrightarrow> ?I = ?I'\n\ngoal (1 subgoal):\n 1. I x = I' x", "by fastforce"], ["proof (state)\nthis:\n  I x = I' x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "note * = this"], ["proof (state)\nthis:\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n     v \\<in> region X I r; v \\<in> region X I' r'\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r'", "from A"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  valid_region X k I' r'\n  v \\<in> region X I r\n  v \\<in> region X I' r'", "show ?thesis"], ["proof (prove)\nusing this:\n  valid_region X k I r\n  valid_region X k I' r'\n  v \\<in> region X I r\n  v \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. region X I r = region X I' r'", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "case A: (1 u)"], ["proof (state)\nthis:\n  valid_region X k I r\n  valid_region X k I' r'\n  v \\<in> region X I r\n  v \\<in> region X I' r'\n  u \\<in> region X I r\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "have \"intv_elem x u (I' x)\" if \"x \\<in> X\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x u (I' x)", "using A(5) * that"], ["proof (prove)\nusing this:\n  u \\<in> region X I r\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x u (I' x)", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x u (I' ?x)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x u (I' ?x)", "have B: \"\\<forall> x \\<in> X. intv_elem x u (I' x)\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x u (I' ?x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x u (I' x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x u (I' x)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists> d. I' x = Intv d}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "assume x: \"x \\<in> ?X\\<^sub>0\" and y: \"y \\<in> ?X\\<^sub>0\""], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "have \"(x, y) \\<in> r' \\<longleftrightarrow> frac (u x) \\<le> frac (u y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r') = (frac (u x) \\<le> frac (u y))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r'", "assume \"frac (u x) \\<le> frac (u y)\""], ["proof (state)\nthis:\n  frac (u x) \\<le> frac (u y)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r'", "with A(5) x y *"], ["proof (chain)\npicking this:\n  u \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (u x) \\<le> frac (u y)", "have \"(x,y) \\<in> r\""], ["proof (prove)\nusing this:\n  u \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (u x) \\<le> frac (u y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r'", "with A(3) x y *"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r", "have \"frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r'", "with A(4) x y"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  frac (v x) \\<le> frac (v y)", "show \"(x,y) \\<in> r'\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "assume \"(x,y) \\<in> r'\""], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "with A(4) x y"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  (x, y) \\<in> r'", "have \"frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "with A(3) x y *"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (v x) \\<le> frac (v y)", "have \"(x,y) \\<in> r\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "with A(5) x y *"], ["proof (chain)\npicking this:\n  u \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r", "show \"frac (u x) \\<le> frac (u y)\""], ["proof (prove)\nusing this:\n  u \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (u x) \\<le> frac (u y)", "by auto"], ["proof (state)\nthis:\n  frac (u x) \\<le> frac (u y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((x, y) \\<in> r') = (frac (u x) \\<le> frac (u y))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> ((?x2, ?y2) \\<in> r') =\n                    (frac (u ?x2) \\<le> frac (u ?y2))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> ((?x2, ?y2) \\<in> r') =\n                    (frac (u ?x2) \\<le> frac (u ?y2))", "have *: \"\\<forall> x \\<in> ?X\\<^sub>0. \\<forall> y \\<in> ?X\\<^sub>0. (x, y) \\<in> r' \\<longleftrightarrow> frac (u x) \\<le> frac (u y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> ((?x2, ?y2) \\<in> r') =\n                    (frac (u ?x2) \\<le> frac (u ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') = (frac (u x) \\<le> frac (u y))", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n        ((x, y) \\<in> r') = (frac (u x) \\<le> frac (u y))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "from A(5)"], ["proof (chain)\npicking this:\n  u \\<in> region X I r", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r'\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "from region.intros[OF this B _ *]"], ["proof (chain)\npicking this:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d} \\<Longrightarrow>\n  u \\<in> region X I' r'", "show ?case"], ["proof (prove)\nusing this:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d} \\<Longrightarrow>\n  u \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. u \\<in> region X I' r'", "by auto"], ["proof (state)\nthis:\n  u \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "case A: (2 u)"], ["proof (state)\nthis:\n  valid_region X k I r\n  valid_region X k I' r'\n  v \\<in> region X I r\n  v \\<in> region X I' r'\n  u \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "have \"intv_elem x u (I x)\" if \"x \\<in> X\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x u (I x)", "using * A(5) that"], ["proof (prove)\nusing this:\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  u \\<in> region X I' r'\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x u (I x)", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x u (I ?x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x u (I ?x)", "have B: \"\\<forall> x \\<in> X. intv_elem x u (I x)\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x u (I ?x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x u (I x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x u (I x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists> d. I x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "assume x: \"x \\<in> ?X\\<^sub>0\" and y: \"y \\<in> ?X\\<^sub>0\""], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "have \"(x, y) \\<in> r \\<longleftrightarrow> frac (u x) \\<le> frac (u y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r) = (frac (u x) \\<le> frac (u y))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r", "assume \"frac (u x) \\<le> frac (u y)\""], ["proof (state)\nthis:\n  frac (u x) \\<le> frac (u y)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r", "with A(5) x y *"], ["proof (chain)\npicking this:\n  u \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (u x) \\<le> frac (u y)", "have \"(x,y) \\<in> r'\""], ["proof (prove)\nusing this:\n  u \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (u x) \\<le> frac (u y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r", "with A(4) x y *"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r'", "have \"frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)\n 2. frac (u x) \\<le> frac (u y) \\<Longrightarrow> (x, y) \\<in> r", "with A(3) x y"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  frac (v x) \\<le> frac (v y)", "show \"(x,y) \\<in> r\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "assume \"(x,y) \\<in> r\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "with A(3) x y"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  (x, y) \\<in> r", "have \"frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "with A(4) x y *"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (v x) \\<le> frac (v y)", "have \"(x,y) \\<in> r'\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<Longrightarrow> frac (u x) \\<le> frac (u y)", "with A(5) x y *"], ["proof (chain)\npicking this:\n  u \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r'", "show \"frac (u x) \\<le> frac (u y)\""], ["proof (prove)\nusing this:\n  u \\<in> region X I' r'\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  ?x2 \\<in> X \\<Longrightarrow> I ?x2 = I' ?x2\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. frac (u x) \\<le> frac (u y)", "by auto"], ["proof (state)\nthis:\n  frac (u x) \\<le> frac (u y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((x, y) \\<in> r) = (frac (u x) \\<le> frac (u y))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> ((?x2, ?y2) \\<in> r) = (frac (u ?x2) \\<le> frac (u ?y2))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> ((?x2, ?y2) \\<in> r) = (frac (u ?x2) \\<le> frac (u ?y2))", "have *:\"\\<forall> x \\<in> ?X\\<^sub>0. \\<forall> y \\<in> ?X\\<^sub>0. (x, y) \\<in> r \\<longleftrightarrow> frac (u x) \\<le> frac (u y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> ((?x2, ?y2) \\<in> r) = (frac (u ?x2) \\<le> frac (u ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) = (frac (u x) \\<le> frac (u y))", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        ((x, y) \\<in> r) = (frac (u x) \\<le> frac (u y))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "from A(5)"], ["proof (chain)\npicking this:\n  u \\<in> region X I' r'", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; valid_region X k I' r';\n        v \\<in> region X I r; v \\<in> region X I' r';\n        x \\<in> region X I' r'\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r", "from region.intros[OF this B _ *]"], ["proof (chain)\npicking this:\n  {x \\<in> X. \\<exists>d. I x = Intv d} =\n  {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n  u \\<in> region X I r", "show ?case"], ["proof (prove)\nusing this:\n  {x \\<in> X. \\<exists>d. I x = Intv d} =\n  {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. u \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  u \\<in> region X I r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  region X I r = region X I' r'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<R>_regions_distinct:\n  \"\\<lbrakk>\\<R> = {region X I r | I r. valid_region X k I r}; R \\<in> \\<R>; v \\<in> R; R' \\<in> \\<R>; R \\<noteq> R'\\<rbrakk> \\<Longrightarrow> v \\<notin> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; R' \\<in> \\<R>; R \\<noteq> R'\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> R'", "using valid_regions_distinct"], ["proof (prove)\nusing this:\n  \\<lbrakk>valid_region ?X ?k ?I ?r; valid_region ?X ?k ?I' ?r';\n   ?v \\<in> region ?X ?I ?r; ?v \\<in> region ?X ?I' ?r'\\<rbrakk>\n  \\<Longrightarrow> region ?X ?I ?r = region ?X ?I' ?r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; R' \\<in> \\<R>; R \\<noteq> R'\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> R'", "by blast"], ["", "text \\<open>\n  Secondly, we also need to show that every valuations belongs to a region which is part of\n  the partition.\n\\<close>"], ["", "definition intv_of :: \"nat \\<Rightarrow> t \\<Rightarrow> intv\" where\n  \"intv_of k c \\<equiv>\n    if (c > k) then Greater k\n    else if (\\<exists> x :: nat. x = c) then (Const (nat (floor c)))\n    else (Intv (nat (floor c)))\""], ["", "lemma region_cover:\n  \"\\<forall> x \\<in> X. u x \\<ge> 0 \\<Longrightarrow> \\<exists> R. R \\<in> {region X I r | I r. valid_region X k I r} \\<and> u \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    \\<exists>R.\n       R \\<in> {region X I r |I r. valid_region X k I r} \\<and> u \\<in> R", "proof (standard, standard)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    ?R \\<in> {region X I r |I r. valid_region X k I r}\n 2. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow> u \\<in> ?R", "assume assm: \"\\<forall> x \\<in> X. 0 \\<le> u x\""], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (2 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    ?R \\<in> {region X I r |I r. valid_region X k I r}\n 2. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow> u \\<in> ?R", "let ?I = \"\\<lambda> x. intv_of (k x) (u x)\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    ?R \\<in> {region X I r |I r. valid_region X k I r}\n 2. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow> u \\<in> ?R", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists> d. ?I x = Intv d}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    ?R \\<in> {region X I r |I r. valid_region X k I r}\n 2. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow> u \\<in> ?R", "let ?r = \"{(x,y). x \\<in> ?X\\<^sub>0 \\<and> y \\<in> ?X\\<^sub>0 \\<and> frac (u x) \\<le> frac (u y)}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    ?R \\<in> {region X I r |I r. valid_region X k I r}\n 2. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow> u \\<in> ?R", "show \"u \\<in> region X ?I ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<in> region X (\\<lambda>x. intv_of (k x) (u x))\n             {(x, y).\n              x \\<in> {x \\<in> X.\n                       \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n              y \\<in> {x \\<in> X.\n                       \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n              frac (u x) \\<le> frac (u y)}", "proof (standard, auto simp: assm, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x u (intv_of (k x) (u x))", "case (1 x)"], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x u (intv_of (k x) (u x))", "thus ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x u (intv_of (k x) (u x))", "unfolding intv_of_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x u\n     (if real (k x) < u x then Greater (k x)\n      else if \\<exists>xa. real xa = u x\n           then Const (nat \\<lfloor>u x\\<rfloor>)\n           else Intv (nat \\<lfloor>u x\\<rfloor>))", "proof (auto, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<in> X; real xa = u x; \\<not> real (k x) < u x\\<rbrakk>\n       \\<Longrightarrow> intv_elem x u (Const (nat \\<lfloor>u x\\<rfloor>))\n 2. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "case A: (1 a)"], ["proof (state)\nthis:\n  x \\<in> X\n  real a = u x\n  \\<not> real (k x) < u x\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<in> X; real xa = u x; \\<not> real (k x) < u x\\<rbrakk>\n       \\<Longrightarrow> intv_elem x u (Const (nat \\<lfloor>u x\\<rfloor>))\n 2. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "from A(2)"], ["proof (chain)\npicking this:\n  real a = u x", "have \"\\<lfloor>u x\\<rfloor> = u x\""], ["proof (prove)\nusing this:\n  real a = u x\n\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>u x\\<rfloor> = u x", "by (metis of_int_floor_cancel of_int_of_nat_eq)"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>u x\\<rfloor> = u x\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<in> X; real xa = u x; \\<not> real (k x) < u x\\<rbrakk>\n       \\<Longrightarrow> intv_elem x u (Const (nat \\<lfloor>u x\\<rfloor>))\n 2. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "with assm A(1)"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  x \\<in> X\n  real_of_int \\<lfloor>u x\\<rfloor> = u x", "have \"u x = real (nat \\<lfloor>u x\\<rfloor>)\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  x \\<in> X\n  real_of_int \\<lfloor>u x\\<rfloor> = u x\n\ngoal (1 subgoal):\n 1. u x = real (nat \\<lfloor>u x\\<rfloor>)", "by auto"], ["proof (state)\nthis:\n  u x = real (nat \\<lfloor>u x\\<rfloor>)\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<in> X; real xa = u x; \\<not> real (k x) < u x\\<rbrakk>\n       \\<Longrightarrow> intv_elem x u (Const (nat \\<lfloor>u x\\<rfloor>))\n 2. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "then"], ["proof (chain)\npicking this:\n  u x = real (nat \\<lfloor>u x\\<rfloor>)", "show ?case"], ["proof (prove)\nusing this:\n  u x = real (nat \\<lfloor>u x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. intv_elem x u (Const (nat \\<lfloor>u x\\<rfloor>))", "by auto"], ["proof (state)\nthis:\n  intv_elem x u (Const (nat \\<lfloor>u x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "case A: 2"], ["proof (state)\nthis:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x\n  \\<not> real (k x) < u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "from A(1,2)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x", "have \"real (nat \\<lfloor>u x\\<rfloor>) < u x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x\n\ngoal (1 subgoal):\n 1. real (nat \\<lfloor>u x\\<rfloor>) < u x", "by (metis assm floor_less_iff int_nat_eq less_eq_real_def less_irrefl not_less\n                of_int_of_nat_eq of_nat_0)"], ["proof (state)\nthis:\n  real (nat \\<lfloor>u x\\<rfloor>) < u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "moreover"], ["proof (state)\nthis:\n  real (nat \\<lfloor>u x\\<rfloor>) < u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "from assm"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. 0 \\<le> u x", "have \"u x < real (nat (\\<lfloor>u x\\<rfloor>) + 1)\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. u x < real (nat \\<lfloor>u x\\<rfloor> + 1)", "by linarith"], ["proof (state)\nthis:\n  u x < real (nat \\<lfloor>u x\\<rfloor> + 1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "ultimately"], ["proof (chain)\npicking this:\n  real (nat \\<lfloor>u x\\<rfloor>) < u x\n  u x < real (nat \\<lfloor>u x\\<rfloor> + 1)", "show ?case"], ["proof (prove)\nusing this:\n  real (nat \\<lfloor>u x\\<rfloor>) < u x\n  u x < real (nat \\<lfloor>u x\\<rfloor> + 1)\n\ngoal (1 subgoal):\n 1. intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))", "by auto"], ["proof (state)\nthis:\n  intv_elem x u (Intv (nat \\<lfloor>u x\\<rfloor>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem x u (intv_of (k x) (u x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<in> region X (\\<lambda>x. intv_of (k x) (u x))\n           {(x, y).\n            x \\<in> {x \\<in> X.\n                     \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n            y \\<in> {x \\<in> X.\n                     \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n            frac (u x) \\<le> frac (u y)}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    region X (\\<lambda>x. intv_of (k x) (u x))\n     {(x, y).\n      x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      frac (u x) \\<le> frac (u y)}\n    \\<in> {region X I r |I r. valid_region X k I r}", "have \"valid_intv (k x) (intv_of (k x) (u x))\" if \"x \\<in> X\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. valid_intv (k x) (intv_of (k x) (u x))", "using that"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (intv_of (k x) (u x))", "proof (auto simp: intv_of_def, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<in> X; real xa = u x; \\<not> real (k x) < u x\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x)\n                          (Const (nat \\<lfloor>u x\\<rfloor>))\n 2. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "case 1"], ["proof (state)\nthis:\n  x \\<in> X\n  real x_ = u x\n  \\<not> real (k x) < u x\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<in> X; real xa = u x; \\<not> real (k x) < u x\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x)\n                          (Const (nat \\<lfloor>u x\\<rfloor>))\n 2. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  real x_ = u x\n  \\<not> real (k x) < u x", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  real x_ = u x\n  \\<not> real (k x) < u x\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (Const (nat \\<lfloor>u x\\<rfloor>))", "by (intro valid_intv.intros(1)) (auto, linarith)"], ["proof (state)\nthis:\n  valid_intv (k x) (Const (nat \\<lfloor>u x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "case 2"], ["proof (state)\nthis:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x\n  \\<not> real (k x) < u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X; \\<forall>xa. real xa \\<noteq> u x;\n     \\<not> real (k x) < u x\\<rbrakk>\n    \\<Longrightarrow> valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x\n  \\<not> real (k x) < u x", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x\n  \\<not> real (k x) < u x\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "using assm floor_less_iff nat_less_iff"], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<forall>xa. real xa \\<noteq> u x\n  \\<not> real (k x) < u x\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  (\\<lfloor>?x\\<rfloor> < ?z) = (?x < of_int ?z)\n  0 \\<le> ?w \\<Longrightarrow> (nat ?w < ?m) = (?w < int ?m)\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))", "by (intro valid_intv.intros(2)) fastforce+"], ["proof (state)\nthis:\n  valid_intv (k x) (Intv (nat \\<lfloor>u x\\<rfloor>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (intv_of (k ?x) (u ?x))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    region X (\\<lambda>x. intv_of (k x) (u x))\n     {(x, y).\n      x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      frac (u x) \\<le> frac (u y)}\n    \\<in> {region X I r |I r. valid_region X k I r}", "then"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (intv_of (k ?x) (u ?x))", "have \"valid_region X k ?I ?r\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (intv_of (k ?x) (u ?x))\n\ngoal (1 subgoal):\n 1. valid_region X k (\\<lambda>x. intv_of (k x) (u x))\n     {(x, y).\n      x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      frac (u x) \\<le> frac (u y)}", "by (intro valid_region.intros) (auto simp: refl_on_def trans_def total_on_def)"], ["proof (state)\nthis:\n  valid_region X k (\\<lambda>x. intv_of (k x) (u x))\n   {(x, y).\n    x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    frac (u x) \\<le> frac (u y)}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x \\<Longrightarrow>\n    region X (\\<lambda>x. intv_of (k x) (u x))\n     {(x, y).\n      x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      frac (u x) \\<le> frac (u y)}\n    \\<in> {region X I r |I r. valid_region X k I r}", "then"], ["proof (chain)\npicking this:\n  valid_region X k (\\<lambda>x. intv_of (k x) (u x))\n   {(x, y).\n    x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    frac (u x) \\<le> frac (u y)}", "show \"region X ?I ?r \\<in> {region X I r | I r. valid_region X k I r}\""], ["proof (prove)\nusing this:\n  valid_region X k (\\<lambda>x. intv_of (k x) (u x))\n   {(x, y).\n    x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    frac (u x) \\<le> frac (u y)}\n\ngoal (1 subgoal):\n 1. region X (\\<lambda>x. intv_of (k x) (u x))\n     {(x, y).\n      x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n      frac (u x) \\<le> frac (u y)}\n    \\<in> {region X I r |I r. valid_region X k I r}", "by auto"], ["proof (state)\nthis:\n  region X (\\<lambda>x. intv_of (k x) (u x))\n   {(x, y).\n    x \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    y \\<in> {x \\<in> X. \\<exists>d. intv_of (k x) (u x) = Intv d} \\<and>\n    frac (u x) \\<le> frac (u y)}\n  \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma intv_not_empty:\n  obtains d where \"intv_elem x (v(x := d)) (I x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>d.\n        intv_elem x (v(x := d)) (I x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof (cases \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "case (1 d)"], ["proof (state)\nthis:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Const d\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Const d", "have \"intv_elem x (v(x := d)) (I x)\""], ["proof (prove)\nusing this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Const d\n\ngoal (1 subgoal):\n 1. intv_elem x (v(x := real d)) (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v(x := real d)) (I x)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "with 1"], ["proof (chain)\npicking this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Const d\n  intv_elem x (v(x := real d)) (I x)", "show ?case"], ["proof (prove)\nusing this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Const d\n  intv_elem x (v(x := real d)) (I x)\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "case (2 d)"], ["proof (state)\nthis:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Intv d\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Intv d", "have \"intv_elem x (v(x := d + 0.5)) (I x)\""], ["proof (prove)\nusing this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Intv d\n\ngoal (1 subgoal):\n 1. intv_elem x (v(x := real d + 5 / 10)) (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v(x := real d + 5 / 10)) (I x)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "with 2"], ["proof (chain)\npicking this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Intv d\n  intv_elem x (v(x := real d + 5 / 10)) (I x)", "show ?case"], ["proof (prove)\nusing this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Intv d\n  intv_elem x (v(x := real d + 5 / 10)) (I x)\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "case (3 d)"], ["proof (state)\nthis:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Greater d\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Greater d", "have \"intv_elem x (v(x := d + 0.5)) (I x)\""], ["proof (prove)\nusing this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Greater d\n\ngoal (1 subgoal):\n 1. intv_elem x (v(x := real d + 5 / 10)) (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v(x := real d + 5 / 10)) (I x)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>\\<And>d.\n                   intv_elem x (v(x := d)) (I x) \\<Longrightarrow> thesis;\n        I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> thesis", "with 3"], ["proof (chain)\npicking this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Greater d\n  intv_elem x (v(x := real d + 5 / 10)) (I x)", "show ?case"], ["proof (prove)\nusing this:\n  intv_elem x (v(x := ?d)) (I x) \\<Longrightarrow> thesis\n  I x = Greater d\n  intv_elem x (v(x := real d + 5 / 10)) (I x)\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "fun get_intv_val :: \"intv \\<Rightarrow> real \\<Rightarrow> real\"\nwhere\n  \"get_intv_val (Const d)   _ = d\" |\n  \"get_intv_val (Intv d)    f = d + f\"  |\n  \"get_intv_val (Greater d) _ = d + 1\""], ["", "lemma region_not_empty_aux:\n  assumes \"0 < f\" \"f < 1\" \"0 < g\" \"g < 1\"\n  shows \"frac (get_intv_val (Intv d) f) \\<le> frac (get_intv_val (Intv d') g) \\<longleftrightarrow> f \\<le> g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (get_intv_val (Intv d) f) \\<le> frac (get_intv_val (Intv d') g)) =\n    (f \\<le> g)", "using assms"], ["proof (prove)\nusing this:\n  0 < f\n  f < 1\n  0 < g\n  g < 1\n\ngoal (1 subgoal):\n 1. (frac (get_intv_val (Intv d) f) \\<le> frac (get_intv_val (Intv d') g)) =\n    (f \\<le> g)", "by (simp, metis frac_eq frac_nat_add_id less_eq_real_def)"], ["", "lemma region_not_empty:\n  assumes \"finite X\" \"valid_region X k I r\"\n  shows \"\\<exists> u. u \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "obtain f :: \"'a \\<Rightarrow> nat\" where f:\n    \"\\<forall>x\\<in>?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. f x \\<le> f y \\<longleftrightarrow> (x, y) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (rule finite_total_preorder_enumeration)"], ["proof (prove)\ngoal (5 subgoals):\n 1. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    finite ?X2\n 2. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    total_on ?X2 ?r2\n 3. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    refl_on ?X2 ?r2\n 4. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    trans ?r2\n 5. \\<And>f.\n       \\<lbrakk>\\<And>f.\n                   \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                      \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                         (f x \\<le> f y) =\n                         ((x, y) \\<in> r) \\<Longrightarrow>\n                   thesis;\n        \\<forall>x\\<in>?X2.\n           \\<forall>y\\<in>?X2. (f x \\<le> f y) = ((x, y) \\<in> ?r2)\\<rbrakk>\n       \\<Longrightarrow> thesis", "apply (subgoal_tac \"finite ?X\\<^sub>0\")"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                   \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                      (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n                thesis;\n     finite {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n    \\<Longrightarrow> finite ?X2\n 2. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    finite {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    total_on ?X2 ?r2\n 4. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    refl_on ?X2 ?r2\n 5. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    trans ?r2\n 6. \\<And>f.\n       \\<lbrakk>\\<And>f.\n                   \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                      \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                         (f x \\<le> f y) =\n                         ((x, y) \\<in> r) \\<Longrightarrow>\n                   thesis;\n        \\<forall>x\\<in>?X2.\n           \\<forall>y\\<in>?X2. (f x \\<le> f y) = ((x, y) \\<in> ?r2)\\<rbrakk>\n       \\<Longrightarrow> thesis", "apply assumption"], ["proof (prove)\ngoal (5 subgoals):\n 1. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    finite {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    total_on {x \\<in> X. \\<exists>d. I x = Intv d} ?r2\n 3. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    refl_on {x \\<in> X. \\<exists>d. I x = Intv d} ?r2\n 4. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    trans ?r2\n 5. \\<And>f.\n       \\<lbrakk>\\<And>f.\n                   \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                      \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                         (f x \\<le> f y) =\n                         ((x, y) \\<in> r) \\<Longrightarrow>\n                   thesis;\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> ?r2)\\<rbrakk>\n       \\<Longrightarrow> thesis", "using assms"], ["proof (prove)\nusing this:\n  finite X\n  valid_region X k I r\n\ngoal (5 subgoals):\n 1. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    finite {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    total_on {x \\<in> X. \\<exists>d. I x = Intv d} ?r2\n 3. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    refl_on {x \\<in> X. \\<exists>d. I x = Intv d} ?r2\n 4. (\\<And>f.\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> r) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    trans ?r2\n 5. \\<And>f.\n       \\<lbrakk>\\<And>f.\n                   \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                      \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n                         (f x \\<le> f y) =\n                         ((x, y) \\<in> r) \\<Longrightarrow>\n                   thesis;\n        \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n           \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n              (f x \\<le> f y) = ((x, y) \\<in> ?r2)\\<rbrakk>\n       \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (f x \\<le> f y) = ((x, y) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "let ?M = \"if ?X\\<^sub>0 \\<noteq> {} then Max {f x | x. x \\<in> ?X\\<^sub>0} else 1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "let ?f = \"\\<lambda> x. (f x + 1) / (?M + 2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "let ?v = \"\\<lambda> x. get_intv_val (I x) (if x \\<in> ?X\\<^sub>0 then ?f x else 1)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "have frac_intv: \"\\<forall>x\\<in>?X\\<^sub>0. 0 < ?f x \\<and> ?f x < 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       0 < real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2) \\<and>\n       real (f x + 1) /\n       real\n        ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n          then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n          else 1) +\n         2)\n       < 1", "proof (standard, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n       0 < real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2) \\<and>\n       real (f x + 1) /\n       real\n        ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n          then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n          else 1) +\n         2)\n       < 1", "case (1 x)"], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n       0 < real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2) \\<and>\n       real (f x + 1) /\n       real\n        ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n          then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n          else 1) +\n         2)\n       < 1", "then"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "have *: \"?X\\<^sub>0 \\<noteq> {}\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n       0 < real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2) \\<and>\n       real (f x + 1) /\n       real\n        ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n          then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n          else 1) +\n         2)\n       < 1", "have \"f x \\<le> Max {f x | x. x \\<in> ?X\\<^sub>0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x \\<le> Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}", "apply (rule Max_ge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n 2. f x \\<in> {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}", "using \\<open>finite X\\<close> 1"], ["proof (prove)\nusing this:\n  finite X\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (2 subgoals):\n 1. finite {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n 2. f x \\<in> {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}", "by auto"], ["proof (state)\nthis:\n  f x \\<le> Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n       0 < real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2) \\<and>\n       real (f x + 1) /\n       real\n        ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n          then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n          else 1) +\n         2)\n       < 1", "with 1"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  f x \\<le> Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  f x \\<le> Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n\ngoal (1 subgoal):\n 1. 0 < real (f x + 1) /\n        real\n         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n           then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n           else 1) +\n          2) \\<and>\n    real (f x + 1) /\n    real\n     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n       then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n       else 1) +\n      2)\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < real (f x + 1) /\n      real\n       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n         then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n         else 1) +\n        2) \\<and>\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n  < 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     0 < real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2) \\<and>\n     real (f x + 1) /\n     real\n      ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n        then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n        else 1) +\n       2)\n     < 1\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "with region_not_empty_aux"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < ?f; ?f < 1; 0 < ?g; ?g < 1\\<rbrakk>\n  \\<Longrightarrow> (frac (get_intv_val (Intv ?d) ?f)\n                     \\<le> frac (get_intv_val (Intv ?d') ?g)) =\n                    (?f \\<le> ?g)\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     0 < real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2) \\<and>\n     real (f x + 1) /\n     real\n      ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n        then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n        else 1) +\n       2)\n     < 1", "have *:\n    \"\\<forall>x\\<in>?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. frac (?v x) \\<le> frac (?v y) \\<longleftrightarrow> ?f x \\<le> ?f y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?f; ?f < 1; 0 < ?g; ?g < 1\\<rbrakk>\n  \\<Longrightarrow> (frac (get_intv_val (Intv ?d) ?f)\n                     \\<le> frac (get_intv_val (Intv ?d') ?g)) =\n                    (?f \\<le> ?g)\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     0 < real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2) \\<and>\n     real (f x + 1) /\n     real\n      ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n        then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n        else 1) +\n       2)\n     < 1\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1))) =\n          (real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n           \\<le> real (f y + 1) /\n                 real\n                  ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                    then Max {f x |x.\n                              x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                    else 1) +\n                   2))", "by force"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1))) =\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2))\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "have \"\\<forall>x\\<in>?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. ?f x \\<le> ?f y \\<longleftrightarrow> f x \\<le> f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          (real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n           \\<le> real (f y + 1) /\n                 real\n                  ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                    then Max {f x |x.\n                              x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                    else 1) +\n                   2)) =\n          (f x \\<le> f y)", "by (simp add: divide_le_cancel)+"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)) =\n        (f x \\<le> f y)\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "with f"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (f x \\<le> f y) = ((x, y) \\<in> r)\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)) =\n        (f x \\<le> f y)", "have \"\\<forall>x\\<in>?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. ?f x \\<le> ?f y \\<longleftrightarrow> (x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (f x \\<le> f y) = ((x, y) \\<in> r)\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)) =\n        (f x \\<le> f y)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          (real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n           \\<le> real (f y + 1) /\n                 real\n                  ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                    then Max {f x |x.\n                              x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                    else 1) +\n                   2)) =\n          ((x, y) \\<in> r)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)) =\n        ((x, y) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "with *"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1))) =\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2))\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)) =\n        ((x, y) \\<in> r)", "have frac_order: \"\\<forall>x\\<in>?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. frac (?v x) \\<le> frac (?v y) \\<longleftrightarrow> (x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1))) =\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2))\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n         \\<le> real (f y + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)) =\n        ((x, y) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1))) =\n          ((x, y) \\<in> r)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1))) =\n        ((x, y) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "have \"?v \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        get_intv_val (I x)\n         (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n          then real (f x + 1) /\n               real\n                ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                  then Max {f x |x.\n                            x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                  else 1) +\n                 2)\n          else 1))\n    \\<in> region X I r", "proof standard"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X.\n       0 \\<le> get_intv_val (I x)\n                (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                 then real (f x + 1) /\n                      real\n                       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                            {}\n                         then Max {f x |x.\n                                   x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}}\n                         else 1) +\n                        2)\n                 else 1)\n 2. \\<forall>x\\<in>X.\n       intv_elem x\n        (\\<lambda>x.\n            get_intv_val (I x)\n             (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n              then real (f x + 1) /\n                   real\n                    ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                      then Max {f x |x.\n                                x \\<in> {x \\<in> X.\n   \\<exists>d. I x = Intv d}}\n                      else 1) +\n                     2)\n              else 1))\n        (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "show \"\\<forall>x\\<in>X. intv_elem x ?v (I x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X.\n       intv_elem x\n        (\\<lambda>x.\n            get_intv_val (I x)\n             (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n              then real (f x + 1) /\n                   real\n                    ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                      then Max {f x |x.\n                                x \\<in> {x \\<in> X.\n   \\<exists>d. I x = Intv d}}\n                      else 1) +\n                     2)\n              else 1))\n        (I x)", "proof (standard, case_tac \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "case (2 x d)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv d\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv d", "have *: \"x \\<in> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv d\n\ngoal (1 subgoal):\n 1. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "with frac_intv"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     0 < real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2) \\<and>\n     real (f x + 1) /\n     real\n      ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n        then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n        else 1) +\n       2)\n     < 1\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"0 < ?f x\" \"?f x < 1\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     0 < real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2) \\<and>\n     real (f x + 1) /\n     real\n      ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n        then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n        else 1) +\n       2)\n     < 1\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. 0 < real (f x + 1) /\n        real\n         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n           then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n           else 1) +\n          2) &&&\n    real (f x + 1) /\n    real\n     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n       then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n       else 1) +\n      2)\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < real (f x + 1) /\n      real\n       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n         then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n         else 1) +\n        2)\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n  < 1\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "moreover"], ["proof (state)\nthis:\n  0 < real (f x + 1) /\n      real\n       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n         then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n         else 1) +\n        2)\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n  < 1\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "from 2"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv d", "have \"?v x = d + ?f x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv d\n\ngoal (1 subgoal):\n 1. get_intv_val (I x)\n     (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n      then real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n      else 1) =\n    real d +\n    real (f x + 1) /\n    real\n     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n       then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n       else 1) +\n      2)", "by auto"], ["proof (state)\nthis:\n  get_intv_val (I x)\n   (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n    then real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n    else 1) =\n  real d +\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "ultimately"], ["proof (chain)\npicking this:\n  0 < real (f x + 1) /\n      real\n       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n         then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n         else 1) +\n        2)\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n  < 1\n  get_intv_val (I x)\n   (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n    then real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n    else 1) =\n  real d +\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)", "have \"?v x < d + 1 \\<and> d < ?v x\""], ["proof (prove)\nusing this:\n  0 < real (f x + 1) /\n      real\n       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n         then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n         else 1) +\n        2)\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n  < 1\n  get_intv_val (I x)\n   (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n    then real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n    else 1) =\n  real d +\n  real (f x + 1) /\n  real\n   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n     then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n     else 1) +\n    2)\n\ngoal (1 subgoal):\n 1. get_intv_val (I x)\n     (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n      then real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n      else 1)\n    < real (d + 1) \\<and>\n    real d\n    < get_intv_val (I x)\n       (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n        then real (f x + 1) /\n             real\n              ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                then Max {f x |x.\n                          x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                else 1) +\n               2)\n        else 1)", "by linarith"], ["proof (state)\nthis:\n  get_intv_val (I x)\n   (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n    then real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n    else 1)\n  < real (d + 1) \\<and>\n  real d\n  < get_intv_val (I x)\n     (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n      then real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n      else 1)\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "then"], ["proof (chain)\npicking this:\n  get_intv_val (I x)\n   (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n    then real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n    else 1)\n  < real (d + 1) \\<and>\n  real d\n  < get_intv_val (I x)\n     (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n      then real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n      else 1)", "show \"intv_elem x ?v (I x)\""], ["proof (prove)\nusing this:\n  get_intv_val (I x)\n   (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n    then real (f x + 1) /\n         real\n          ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n            then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n            else 1) +\n           2)\n    else 1)\n  < real (d + 1) \\<and>\n  real d\n  < get_intv_val (I x)\n     (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n      then real (f x + 1) /\n           real\n            ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n              then Max {f x |x.\n                        x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n              else 1) +\n             2)\n      else 1)\n\ngoal (1 subgoal):\n 1. intv_elem x\n     (\\<lambda>x.\n         get_intv_val (I x)\n          (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n           then real (f x + 1) /\n                real\n                 ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                   then Max {f x |x.\n                             x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                   else 1) +\n                  2)\n           else 1))\n     (I x)", "by (subst 2(2)) (intro intv_elem.intros(2), auto)"], ["proof (state)\nthis:\n  intv_elem x\n   (\\<lambda>x.\n       get_intv_val (I x)\n        (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n         then real (f x + 1) /\n              real\n               ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                 then Max {f x |x.\n                           x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                 else 1) +\n                2)\n         else 1))\n   (I x)\n\ngoal (2 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x\n                          (\\<lambda>x.\n                              get_intv_val (I x)\n                               (if x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}\n                                then real (f x + 1) /\n                                     real\n((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n  then Max {f x |x. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}} else 1) +\n 2)\n                                else 1))\n                          (I x)", "qed auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X.\n     intv_elem x\n      (\\<lambda>x.\n          get_intv_val (I x)\n           (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n            then real (f x + 1) /\n                 real\n                  ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                    then Max {f x |x.\n                              x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                    else 1) +\n                   2)\n            else 1))\n      (I x)\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X.\n       0 \\<le> get_intv_val (I x)\n                (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                 then real (f x + 1) /\n                      real\n                       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                            {}\n                         then Max {f x |x.\n                                   x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}}\n                         else 1) +\n                        2)\n                 else 1)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X.\n       0 \\<le> get_intv_val (I x)\n                (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                 then real (f x + 1) /\n                      real\n                       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                            {}\n                         then Max {f x |x.\n                                   x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}}\n                         else 1) +\n                        2)\n                 else 1)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "show \"\\<forall>x\\<in>X. 0 \\<le> get_intv_val (I x) (if x \\<in> ?X\\<^sub>0 then ?f x else 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X.\n       0 \\<le> get_intv_val (I x)\n                (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                 then real (f x + 1) /\n                      real\n                       ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                            {}\n                         then Max {f x |x.\n                                   x \\<in> {x \\<in> X.\n      \\<exists>d. I x = Intv d}}\n                         else 1) +\n                        2)\n                 else 1)", "by (standard, case_tac \"I x\") auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X.\n     0 \\<le> get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "show \"{x \\<in> X. \\<exists>d. I x = Intv d} = {x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I x = Intv d} =\n  {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "from frac_order"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1))) =\n        ((x, y) \\<in> r)", "show \"\\<forall>x\\<in>?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. ((x, y) \\<in> r) = (frac (?v x) \\<le> frac (?v y))\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1))) =\n        ((x, y) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac\n            (get_intv_val (I x)\n              (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n               then real (f x + 1) /\n                    real\n                     ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                       then Max {f x |x.\n                                 x \\<in> {x \\<in> X.\n    \\<exists>d. I x = Intv d}}\n                       else 1) +\n                      2)\n               else 1))\n           \\<le> frac\n                  (get_intv_val (I y)\n                    (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                     then real (f y + 1) /\n                          real\n                           ((if {x \\<in> X.\n                                 \\<exists>d. I x = Intv d} \\<noteq>\n                                {}\n                             then Max {f x |x.\n x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                             else 1) +\n                            2)\n                     else 1)))", "by blast"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        ((x, y) \\<in> r) =\n        (frac\n          (get_intv_val (I x)\n            (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n             then real (f x + 1) /\n                  real\n                   ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                     then Max {f x |x.\n                               x \\<in> {x \\<in> X.\n  \\<exists>d. I x = Intv d}}\n                     else 1) +\n                    2)\n             else 1))\n         \\<le> frac\n                (get_intv_val (I y)\n                  (if y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n                   then real (f y + 1) /\n                        real\n                         ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq>\n                              {}\n                           then Max {f x |x.\n                                     x \\<in> {x \\<in> X.\n        \\<exists>d. I x = Intv d}}\n                           else 1) +\n                          2)\n                   else 1)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      get_intv_val (I x)\n       (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n        then real (f x + 1) /\n             real\n              ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                then Max {f x |x.\n                          x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                else 1) +\n               2)\n        else 1))\n  \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      get_intv_val (I x)\n       (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n        then real (f x + 1) /\n             real\n              ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                then Max {f x |x.\n                          x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                else 1) +\n               2)\n        else 1))\n  \\<in> region X I r", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      get_intv_val (I x)\n       (if x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n        then real (f x + 1) /\n             real\n              ((if {x \\<in> X. \\<exists>d. I x = Intv d} \\<noteq> {}\n                then Max {f x |x.\n                          x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}}\n                else 1) +\n               2)\n        else 1))\n  \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<exists>u. u \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  \\<exists>u. u \\<in> region X I r\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Now we can show that there is always exactly one region a valid valuation belongs to.\n\\<close>"], ["", "lemma regions_partition:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> \\<forall>x \\<in> X. 0 \\<le> u x \\<Longrightarrow> \\<exists>! R \\<in> \\<R>. u \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "proof (goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "case 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "note A = this"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "with region_cover[OF A(2)]"], ["proof (chain)\npicking this:\n  \\<exists>R.\n     R \\<in> {region X I r |I r. valid_region X ?k I r} \\<and> u \\<in> R\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> u x", "obtain R where R: \"R \\<in> \\<R> \\<and> u \\<in> R\""], ["proof (prove)\nusing this:\n  \\<exists>R.\n     R \\<in> {region X I r |I r. valid_region X ?k I r} \\<and> u \\<in> R\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        R \\<in> \\<R> \\<and> u \\<in> R \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  R \\<in> \\<R> \\<and> u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "moreover"], ["proof (state)\nthis:\n  R \\<in> \\<R> \\<and> u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "have \"R' = R\" if \"R' \\<in> \\<R> \\<and> u \\<in> R'\" for R'"], ["proof (prove)\ngoal (1 subgoal):\n 1. R' = R", "using that R valid_regions_distinct"], ["proof (prove)\nusing this:\n  R' \\<in> \\<R> \\<and> u \\<in> R'\n  R \\<in> \\<R> \\<and> u \\<in> R\n  \\<lbrakk>valid_region ?X ?k ?I ?r; valid_region ?X ?k ?I' ?r';\n   ?v \\<in> region ?X ?I ?r; ?v \\<in> region ?X ?I' ?r'\\<rbrakk>\n  \\<Longrightarrow> region ?X ?I ?r = region ?X ?I' ?r'\n\ngoal (1 subgoal):\n 1. R' = R", "unfolding A(1)"], ["proof (prove)\nusing this:\n  R' \\<in> {region X I r |I r. valid_region X k I r} \\<and> u \\<in> R'\n  R \\<in> {region X I r |I r. valid_region X k I r} \\<and> u \\<in> R\n  \\<lbrakk>valid_region ?X ?k ?I ?r; valid_region ?X ?k ?I' ?r';\n   ?v \\<in> region ?X ?I ?r; ?v \\<in> region ?X ?I' ?r'\\<rbrakk>\n  \\<Longrightarrow> region ?X ?I ?r = region ?X ?I' ?r'\n\ngoal (1 subgoal):\n 1. R' = R", "by blast"], ["proof (state)\nthis:\n  ?R' \\<in> \\<R> \\<and> u \\<in> ?R' \\<Longrightarrow> ?R' = R\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "ultimately"], ["proof (chain)\npicking this:\n  R \\<in> \\<R> \\<and> u \\<in> R\n  ?R' \\<in> \\<R> \\<and> u \\<in> ?R' \\<Longrightarrow> ?R' = R", "show ?thesis"], ["proof (prove)\nusing this:\n  R \\<in> \\<R> \\<and> u \\<in> R\n  ?R' \\<in> \\<R> \\<and> u \\<in> ?R' \\<Longrightarrow> ?R' = R\n\ngoal (1 subgoal):\n 1. \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R", "by auto"], ["proof (state)\nthis:\n  \\<exists>!R. R \\<in> \\<R> \\<and> u \\<in> R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma region_unique:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> u \\<in> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> [u]\\<^sub>\\<R> = R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "proof (goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "case 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  u \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "note A = this"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  u \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "from A"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  u \\<in> R\n  R \\<in> \\<R>", "obtain I r where *: \"valid_region X k I r\" \"R = region X I r\" \"u \\<in> region X I r\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  u \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>valid_region X k I r; R = region X I r;\n         u \\<in> region X I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  valid_region X k I r\n  R = region X I r\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "from this(3)"], ["proof (chain)\npicking this:\n  u \\<in> region X I r", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "from theI'[OF regions_partition[OF A(1) this]] A(1)"], ["proof (chain)\npicking this:\n  (THE x. x \\<in> \\<R> \\<and> u \\<in> x) \\<in> \\<R> \\<and>\n  u \\<in> (THE x. x \\<in> \\<R> \\<and> u \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}", "obtain I' r' where\n    v: \"valid_region X k I' r'\" \"[u]\\<^sub>\\<R> = region X I' r'\" \"u \\<in> region X I' r'\""], ["proof (prove)\nusing this:\n  (THE x. x \\<in> \\<R> \\<and> u \\<in> x) \\<in> \\<R> \\<and>\n  u \\<in> (THE x. x \\<in> \\<R> \\<and> u \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>valid_region X k I' r'; [u]\\<^sub>\\<R> = region X I' r';\n         u \\<in> region X I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding part_def"], ["proof (prove)\nusing this:\n  (THE x. x \\<in> \\<R> \\<and> u \\<in> x) \\<in> \\<R> \\<and>\n  u \\<in> (THE x. x \\<in> \\<R> \\<and> u \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>valid_region X k I' r';\n         (THE R. R \\<in> \\<R> \\<and> u \\<in> R) = region X I' r';\n         u \\<in> region X I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  valid_region X k I' r'\n  [u]\\<^sub>\\<R> = region X I' r'\n  u \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; u \\<in> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> [u]\\<^sub>\\<R> = R", "from valid_regions_distinct[OF *(1) v(1) *(3) v(3)] v(2) *(2)"], ["proof (chain)\npicking this:\n  region X I r = region X I' r'\n  [u]\\<^sub>\\<R> = region X I' r'\n  R = region X I r", "show ?case"], ["proof (prove)\nusing this:\n  region X I r = region X I' r'\n  [u]\\<^sub>\\<R> = region X I' r'\n  R = region X I r\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> = R", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> = R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma regions_partition':\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow> \\<forall>x\\<in>X. 0 \\<le> v' x \\<Longrightarrow> v' \\<in> [v]\\<^sub>\\<R>\n  \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> v x; \\<forall>x\\<in>X. 0 \\<le> v' x;\n     v' \\<in> [v]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "proof (goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> v x; \\<forall>x\\<in>X. 0 \\<le> v' x;\n     v' \\<in> [v]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "case 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> v x\n  \\<forall>x\\<in>X. 0 \\<le> v' x\n  v' \\<in> [v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> v x; \\<forall>x\\<in>X. 0 \\<le> v' x;\n     v' \\<in> [v]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "note A = this"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> v x\n  \\<forall>x\\<in>X. 0 \\<le> v' x\n  v' \\<in> [v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> v x; \\<forall>x\\<in>X. 0 \\<le> v' x;\n     v' \\<in> [v]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "from theI'[OF regions_partition[OF A(1,2)]] A(1,4)"], ["proof (chain)\npicking this:\n  (THE x. x \\<in> \\<R> \\<and> v \\<in> x) \\<in> \\<R> \\<and>\n  v \\<in> (THE x. x \\<in> \\<R> \\<and> v \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  v' \\<in> [v]\\<^sub>\\<R>", "obtain I r where\n    v: \"valid_region X k I r\" \"[v]\\<^sub>\\<R> = region X I r\" \"v' \\<in> region X I r\""], ["proof (prove)\nusing this:\n  (THE x. x \\<in> \\<R> \\<and> v \\<in> x) \\<in> \\<R> \\<and>\n  v \\<in> (THE x. x \\<in> \\<R> \\<and> v \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  v' \\<in> [v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>valid_region X k I r; [v]\\<^sub>\\<R> = region X I r;\n         v' \\<in> region X I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding part_def"], ["proof (prove)\nusing this:\n  (THE x. x \\<in> \\<R> \\<and> v \\<in> x) \\<in> \\<R> \\<and>\n  v \\<in> (THE x. x \\<in> \\<R> \\<and> v \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  v' \\<in> (THE R. R \\<in> \\<R> \\<and> v \\<in> R)\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>valid_region X k I r;\n         (THE R. R \\<in> \\<R> \\<and> v \\<in> R) = region X I r;\n         v' \\<in> region X I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  valid_region X k I r\n  [v]\\<^sub>\\<R> = region X I r\n  v' \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> v x; \\<forall>x\\<in>X. 0 \\<le> v' x;\n     v' \\<in> [v]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "from theI'[OF regions_partition[OF A(1,3)]] A(1)"], ["proof (chain)\npicking this:\n  (THE x. x \\<in> \\<R> \\<and> v' \\<in> x) \\<in> \\<R> \\<and>\n  v' \\<in> (THE x. x \\<in> \\<R> \\<and> v' \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}", "obtain I' r' where\n    v': \"valid_region X k I' r'\" \"[v']\\<^sub>\\<R> = region X I' r'\" \"v' \\<in> region X I' r'\""], ["proof (prove)\nusing this:\n  (THE x. x \\<in> \\<R> \\<and> v' \\<in> x) \\<in> \\<R> \\<and>\n  v' \\<in> (THE x. x \\<in> \\<R> \\<and> v' \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>valid_region X k I' r'; [v']\\<^sub>\\<R> = region X I' r';\n         v' \\<in> region X I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding part_def"], ["proof (prove)\nusing this:\n  (THE x. x \\<in> \\<R> \\<and> v' \\<in> x) \\<in> \\<R> \\<and>\n  v' \\<in> (THE x. x \\<in> \\<R> \\<and> v' \\<in> x)\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>valid_region X k I' r';\n         (THE R. R \\<in> \\<R> \\<and> v' \\<in> R) = region X I' r';\n         v' \\<in> region X I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  valid_region X k I' r'\n  [v']\\<^sub>\\<R> = region X I' r'\n  v' \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n     \\<forall>x\\<in>X. 0 \\<le> v x; \\<forall>x\\<in>X. 0 \\<le> v' x;\n     v' \\<in> [v]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "from valid_regions_distinct[OF v'(1) v(1) v'(3) v(3)] v(2) v'(2)"], ["proof (chain)\npicking this:\n  region X I' r' = region X I r\n  [v]\\<^sub>\\<R> = region X I r\n  [v']\\<^sub>\\<R> = region X I' r'", "show ?case"], ["proof (prove)\nusing this:\n  region X I' r' = region X I r\n  [v]\\<^sub>\\<R> = region X I r\n  [v']\\<^sub>\\<R> = region X I' r'\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>", "by simp"], ["proof (state)\nthis:\n  [v']\\<^sub>\\<R> = [v]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma regions_closed:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "case A: 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "then"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  0 \\<le> t", "obtain I r where \"v \\<in> region X I r\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        v \\<in> region X I r \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "from this(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r", "have \"\\<forall> x \\<in> X. v x \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "with A(4)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x", "have \"\\<forall> x \\<in> X. (v \\<oplus> t) x \\<ge> 0\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x + t", "by simp"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "from regions_partition[OF A(1) this]"], ["proof (chain)\npicking this:\n  \\<exists>!R. R \\<in> \\<R> \\<and> v \\<oplus> t \\<in> R", "obtain R' where \"R' \\<in> \\<R>\" \"(v \\<oplus> t) \\<in> R'\""], ["proof (prove)\nusing this:\n  \\<exists>!R. R \\<in> \\<R> \\<and> v \\<oplus> t \\<in> R\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<oplus> t \\<in> R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "with region_unique[OF A(1) this(2,1)]"], ["proof (chain)\npicking this:\n  [v \\<oplus> t]\\<^sub>\\<R> = R'\n  R' \\<in> \\<R>\n  v \\<oplus> t \\<in> R'", "show ?case"], ["proof (prove)\nusing this:\n  [v \\<oplus> t]\\<^sub>\\<R> = R'\n  R' \\<in> \\<R>\n  v \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma regions_closed':\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> (v \\<oplus> t) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case A: 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  0 \\<le> t", "obtain I r where \"v \\<in> region X I r\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        v \\<in> region X I r \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from this(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r", "have \"\\<forall> x \\<in> X. v x \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with A(4)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x", "have \"\\<forall> x \\<in> X. (v \\<oplus> t) x \\<ge> 0\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x + t", "by simp"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from regions_partition[OF A(1) this]"], ["proof (chain)\npicking this:\n  \\<exists>!R. R \\<in> \\<R> \\<and> v \\<oplus> t \\<in> R", "obtain R' where \"R' \\<in> \\<R>\" \"(v \\<oplus> t) \\<in> R'\""], ["proof (prove)\nusing this:\n  \\<exists>!R. R \\<in> \\<R> \\<and> v \\<oplus> t \\<in> R\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<oplus> t \\<in> R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with region_unique[OF A(1) this(2,1)]"], ["proof (chain)\npicking this:\n  [v \\<oplus> t]\\<^sub>\\<R> = R'\n  R' \\<in> \\<R>\n  v \\<oplus> t \\<in> R'", "show ?case"], ["proof (prove)\nusing this:\n  [v \\<oplus> t]\\<^sub>\\<R> = R'\n  R' \\<in> \\<R>\n  v \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma valid_regions_I_cong:\n  \"valid_region X k I r \\<Longrightarrow> \\<forall> x \\<in> X. I x = I' x \\<Longrightarrow> region X I r = region X I' r \\<and> valid_region X k I' r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> region X I r = region X I' r \\<and>\n                      valid_region X k I' r", "proof (safe, goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 3. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "case (1 v)"], ["proof (state)\nthis:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I r\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 3. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "note A = this"], ["proof (state)\nthis:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I r\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 3. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "then"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I r", "have [simp]:\"\\<And> x. x \\<in> X \\<Longrightarrow> I' x = I x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> I' x = I x", "by metis"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> I' ?x = I ?x\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I' r\n 2. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 3. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> region X I' r", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x\n 2. \\<forall>x\\<in>X. intv_elem x v (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x\n 2. \\<forall>x\\<in>X. intv_elem x v (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "from A(3)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x v (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x v (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x v (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "from A(3)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x v (I' x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x v (I' x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 3"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "show \"{x \\<in> X. \\<exists>d. I x = Intv d} = {x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 4"], ["proof (state)\nthis:\n  \n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "from A(3)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r", "show \"\\<forall> x \\<in> ?X\\<^sub>0. \\<forall> y \\<in> ?X\\<^sub>0. ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<in> region X I' r\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 2. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 2. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "case (2 v)"], ["proof (state)\nthis:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I' r\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 2. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "note A = this"], ["proof (state)\nthis:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I' r\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 2. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "then"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I' r", "have [simp]:\"\\<And> x. x \\<in> X \\<Longrightarrow> I' x = I x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n  v \\<in> region X I' r\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> I' x = I x", "by metis"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> I' ?x = I ?x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x;\n        x \\<in> region X I' r\\<rbrakk>\n       \\<Longrightarrow> x \\<in> region X I r\n 2. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> region X I r", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x\n 2. \\<forall>x\\<in>X. intv_elem x v (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x\n 2. \\<forall>x\\<in>X. intv_elem x v (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "from A(3)"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I' r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x v (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x v (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x v (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "from A(3)"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I' r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x v (I x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x v (I x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 3"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "show \"{x \\<in> X. \\<exists>d. I' x = Intv d} = {x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "case 4"], ["proof (state)\nthis:\n  \n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "from A(3)"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r", "show \"\\<forall> x \\<in> ?X\\<^sub>0. \\<forall> y \\<in> ?X\\<^sub>0. ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n        ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "case 3"], ["proof (state)\nthis:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "note A = this"], ["proof (state)\nthis:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "then"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x", "have [simp]:\"\\<And> x. x \\<in> X \\<Longrightarrow> I' x = I x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> I' x = I x", "by metis"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> I' ?x = I ?x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_region X k I r; \\<forall>x\\<in>X. I x = I' x\\<rbrakk>\n    \\<Longrightarrow> valid_region X k I' r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. valid_region X k I' r", "apply rule"], ["proof (prove)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r\n 3. trans r\n 4. total_on ?X\\<^sub>0 r\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "apply (subgoal_tac \"{x \\<in> X. \\<exists>d. I x = Intv d} = {x \\<in> X. \\<exists>d. I' x = Intv d}\")"], ["proof (prove)\ngoal (6 subgoals):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d} \\<Longrightarrow>\n    ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. refl_on ?X\\<^sub>0 r\n 4. trans r\n 5. total_on ?X\\<^sub>0 r\n 6. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "apply assumption"], ["proof (prove)\ngoal (5 subgoals):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n 3. trans r\n 4. total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "using A"], ["proof (prove)\nusing this:\n  valid_region X k I r\n  \\<forall>x\\<in>X. I x = I' x\n\ngoal (5 subgoals):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n 3. trans r\n 4. total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "by auto"], ["proof (state)\nthis:\n  valid_region X k I' r\n\ngoal:\nNo subgoals!", "qed"], ["", "fun intv_const :: \"intv \\<Rightarrow> nat\"\nwhere\n  \"intv_const (Const d) = d\" |\n  \"intv_const (Intv d) = d\"  |\n  \"intv_const (Greater d) = d\""], ["", "lemma finite_\\<R>:\n  notes [[simproc add: finite_Collect]] finite_subset[intro]\n  fixes X k\n  defines \"\\<R> \\<equiv> {region X I r | I r. valid_region X k I r}\"\n  assumes \"finite X\"\n  shows \"finite \\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite \\<R>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "fix I r"], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "assume A: \"valid_region X k I r\""], ["proof (state)\nthis:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. finite \\<R>", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "from A"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have \"refl_on ?X\\<^sub>0 r\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "by auto"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. finite \\<R>", "then"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "have \"r \\<subseteq> X \\<times> X\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. r \\<subseteq> X \\<times> X", "by (auto simp: refl_on_def)"], ["proof (state)\nthis:\n  r \\<subseteq> X \\<times> X\n\ngoal (1 subgoal):\n 1. finite \\<R>", "then"], ["proof (chain)\npicking this:\n  r \\<subseteq> X \\<times> X", "have \"r \\<in> Pow (X \\<times> X)\""], ["proof (prove)\nusing this:\n  r \\<subseteq> X \\<times> X\n\ngoal (1 subgoal):\n 1. r \\<in> Pow (X \\<times> X)", "by auto"], ["proof (state)\nthis:\n  r \\<in> Pow (X \\<times> X)\n\ngoal (1 subgoal):\n 1. finite \\<R>", "}"], ["proof (state)\nthis:\n  valid_region X k ?I2 ?r2 \\<Longrightarrow> ?r2 \\<in> Pow (X \\<times> X)\n\ngoal (1 subgoal):\n 1. finite \\<R>", "then"], ["proof (chain)\npicking this:\n  valid_region X k ?I2 ?r2 \\<Longrightarrow> ?r2 \\<in> Pow (X \\<times> X)", "have \"{r. \\<exists>I. valid_region X k I r} \\<subseteq> Pow (X \\<times> X)\""], ["proof (prove)\nusing this:\n  valid_region X k ?I2 ?r2 \\<Longrightarrow> ?r2 \\<in> Pow (X \\<times> X)\n\ngoal (1 subgoal):\n 1. {r. \\<exists>I. valid_region X k I r} \\<subseteq> Pow (X \\<times> X)", "by auto"], ["proof (state)\nthis:\n  {r. \\<exists>I. valid_region X k I r} \\<subseteq> Pow (X \\<times> X)\n\ngoal (1 subgoal):\n 1. finite \\<R>", "with \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite X\n  {r. \\<exists>I. valid_region X k I r} \\<subseteq> Pow (X \\<times> X)", "have fin: \"finite {r. \\<exists>I. valid_region X k I r}\""], ["proof (prove)\nusing this:\n  finite X\n  {r. \\<exists>I. valid_region X k I r} \\<subseteq> Pow (X \\<times> X)\n\ngoal (1 subgoal):\n 1. finite {r. \\<exists>I. valid_region X k I r}", "by auto"], ["proof (state)\nthis:\n  finite {r. \\<exists>I. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "let ?m = \"Max {k x | x. x \\<in> X}\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "let ?I = \"{intv. intv_const intv \\<le> ?m}\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "let ?fin_map = \"\\<lambda> I. \\<forall>x. (x \\<in> X \\<longrightarrow> I x \\<in> ?I) \\<and> (x \\<notin> X \\<longrightarrow> I x = Const 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "let ?\\<R> = \"{region X I r | I r. valid_region X k I r \\<and> ?fin_map I}\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite \\<R>", "have \"?I = (Const ` {d. d \\<le> ?m}) \\<union> (Intv ` {d. d \\<le> ?m}) \\<union> (Greater ` {d. d \\<le> ?m})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}} =\n    Const ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n    Intv ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n    Greater ` {d. d \\<le> Max {k x |x. x \\<in> X}}", "by auto (case_tac x, auto)"], ["proof (state)\nthis:\n  {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}} =\n  Const ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n  Intv ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n  Greater ` {d. d \\<le> Max {k x |x. x \\<in> X}}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "then"], ["proof (chain)\npicking this:\n  {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}} =\n  Const ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n  Intv ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n  Greater ` {d. d \\<le> Max {k x |x. x \\<in> X}}", "have \"finite ?I\""], ["proof (prove)\nusing this:\n  {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}} =\n  Const ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n  Intv ` {d. d \\<le> Max {k x |x. x \\<in> X}} \\<union>\n  Greater ` {d. d \\<le> Max {k x |x. x \\<in> X}}\n\ngoal (1 subgoal):\n 1. finite {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}", "by auto"], ["proof (state)\nthis:\n  finite {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "from finite_set_of_finite_funs[OF \\<open>finite X\\<close> this]"], ["proof (chain)\npicking this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           f x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> f x = ?d)}", "have \"finite {I. ?fin_map I}\""], ["proof (prove)\nusing this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           f x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> f x = ?d)}\n\ngoal (1 subgoal):\n 1. finite\n     {I. \\<forall>x.\n            (x \\<in> X \\<longrightarrow>\n             I x\n             \\<in> {intv.\n                    intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n            (x \\<notin> X \\<longrightarrow> I x = Const 0)}", "."], ["proof (state)\nthis:\n  finite\n   {I. \\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           I x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> I x = Const 0)}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "with fin"], ["proof (chain)\npicking this:\n  finite {r. \\<exists>I. valid_region X k I r}\n  finite\n   {I. \\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           I x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> I x = Const 0)}", "have \"finite {(I, r). valid_region X k I r \\<and> ?fin_map I}\""], ["proof (prove)\nusing this:\n  finite {r. \\<exists>I. valid_region X k I r}\n  finite\n   {I. \\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           I x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> I x = Const 0)}\n\ngoal (1 subgoal):\n 1. finite\n     {(I, r).\n      valid_region X k I r \\<and>\n      (\\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           I x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "by (fastforce intro: pairwise_finiteI finite_ex_and1 frac_add_le_preservation del: finite_subset)"], ["proof (state)\nthis:\n  finite\n   {(I, r).\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "then"], ["proof (chain)\npicking this:\n  finite\n   {(I, r).\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "have \"finite ?\\<R>\""], ["proof (prove)\nusing this:\n  finite\n   {(I, r).\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal (1 subgoal):\n 1. finite\n     {region X I r |I r.\n      valid_region X k I r \\<and>\n      (\\<forall>x.\n          (x \\<in> X \\<longrightarrow>\n           I x\n           \\<in> {intv.\n                  intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n          (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "by fastforce"], ["proof (state)\nthis:\n  finite\n   {region X I r |I r.\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "moreover"], ["proof (state)\nthis:\n  finite\n   {region X I r |I r.\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "have \"\\<R> \\<subseteq> ?\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\n    \\<subseteq> {region X I r |I r.\n                 valid_region X k I r \\<and>\n                 (\\<forall>x.\n                     (x \\<in> X \\<longrightarrow>\n                      I x\n                      \\<in> {intv.\n                             intv_const intv\n                             \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                     (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "fix R"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "assume R: \"R \\<in> \\<R>\""], ["proof (state)\nthis:\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "then"], ["proof (chain)\npicking this:\n  R \\<in> \\<R>", "obtain I r where I: \"R = region X I r\" \"valid_region X k I r\""], ["proof (prove)\nusing this:\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>R = region X I r; valid_region X k I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<R>_def"], ["proof (prove)\nusing this:\n  R \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>R = region X I r; valid_region X k I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R = region X I r\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "let ?I = \"\\<lambda> x. if x \\<in> X then I x else Const 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "let ?R = \"region X ?I r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "from valid_regions_I_cong[OF I(2)] I"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. I x = ?I' x \\<Longrightarrow>\n  region X I r = region X ?I' r \\<and> valid_region X k ?I' r\n  R = region X I r\n  valid_region X k I r", "have \"R = ?R\" \"valid_region X k ?I r\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. I x = ?I' x \\<Longrightarrow>\n  region X I r = region X ?I' r \\<and> valid_region X k ?I' r\n  R = region X I r\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. R = region X (\\<lambda>x. if x \\<in> X then I x else Const 0) r &&&\n    valid_region X k (\\<lambda>x. if x \\<in> X then I x else Const 0) r", "by auto"], ["proof (state)\nthis:\n  R = region X (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n  valid_region X k (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "moreover"], ["proof (state)\nthis:\n  R = region X (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n  valid_region X k (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "have \"\\<forall>x. x \\<notin> X \\<longrightarrow> ?I x = Const 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> X \\<longrightarrow>\n       (if x \\<in> X then I x else Const 0) = Const 0", "by auto"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<notin> X \\<longrightarrow>\n     (if x \\<in> X then I x else Const 0) = Const 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "moreover"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<notin> X \\<longrightarrow>\n     (if x \\<in> X then I x else Const 0) = Const 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "have \"\\<forall>x. x \\<in> X \\<longrightarrow> intv_const (I x) \\<le> ?m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> X \\<longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "proof auto"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "assume x: \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "with I(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X", "have \"valid_intv (k x) (I x)\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (I x)", "by auto"], ["proof (state)\nthis:\n  valid_intv (k x) (I x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "moreover"], ["proof (state)\nthis:\n  valid_intv (k x) (I x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "from \\<open>finite X\\<close> x"], ["proof (chain)\npicking this:\n  finite X\n  x \\<in> X", "have \"k x \\<le> ?m\""], ["proof (prove)\nusing this:\n  finite X\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. k x \\<le> Max {k x |x. x \\<in> X}", "by (auto intro: Max_ge)"], ["proof (state)\nthis:\n  k x \\<le> Max {k x |x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "ultimately"], ["proof (chain)\npicking this:\n  valid_intv (k x) (I x)\n  k x \\<le> Max {k x |x. x \\<in> X}", "show \"intv_const (I x) \\<le> Max {k x |x. x \\<in> X}\""], ["proof (prove)\nusing this:\n  valid_intv (k x) (I x)\n  k x \\<le> Max {k x |x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "by (cases \"I x\") auto"], ["proof (state)\nthis:\n  intv_const (I x) \\<le> Max {k x |x. x \\<in> X}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> X \\<longrightarrow>\n     intv_const (I x) \\<le> Max {k x |x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> \\<R> \\<Longrightarrow>\n       x \\<in> {region X I r |I r.\n                valid_region X k I r \\<and>\n                (\\<forall>x.\n                    (x \\<in> X \\<longrightarrow>\n                     I x\n                     \\<in> {intv.\n                            intv_const intv\n                            \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                    (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "ultimately"], ["proof (chain)\npicking this:\n  R = region X (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n  valid_region X k (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n  \\<forall>x.\n     x \\<notin> X \\<longrightarrow>\n     (if x \\<in> X then I x else Const 0) = Const 0\n  \\<forall>x.\n     x \\<in> X \\<longrightarrow>\n     intv_const (I x) \\<le> Max {k x |x. x \\<in> X}", "show \"R \\<in> ?\\<R>\""], ["proof (prove)\nusing this:\n  R = region X (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n  valid_region X k (\\<lambda>x. if x \\<in> X then I x else Const 0) r\n  \\<forall>x.\n     x \\<notin> X \\<longrightarrow>\n     (if x \\<in> X then I x else Const 0) = Const 0\n  \\<forall>x.\n     x \\<in> X \\<longrightarrow>\n     intv_const (I x) \\<le> Max {k x |x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. R \\<in> {region X I r |I r.\n             valid_region X k I r \\<and>\n             (\\<forall>x.\n                 (x \\<in> X \\<longrightarrow>\n                  I x\n                  \\<in> {intv.\n                         intv_const intv\n                         \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                 (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "by force"], ["proof (state)\nthis:\n  R \\<in> {region X I r |I r.\n           valid_region X k I r \\<and>\n           (\\<forall>x.\n               (x \\<in> X \\<longrightarrow>\n                I x\n                \\<in> {intv.\n                       intv_const intv\n                       \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n               (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<R>\n  \\<subseteq> {region X I r |I r.\n               valid_region X k I r \\<and>\n               (\\<forall>x.\n                   (x \\<in> X \\<longrightarrow>\n                    I x\n                    \\<in> {intv.\n                           intv_const intv\n                           \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                   (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "ultimately"], ["proof (chain)\npicking this:\n  finite\n   {region X I r |I r.\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n  \\<R>\n  \\<subseteq> {region X I r |I r.\n               valid_region X k I r \\<and>\n               (\\<forall>x.\n                   (x \\<in> X \\<longrightarrow>\n                    I x\n                    \\<in> {intv.\n                           intv_const intv\n                           \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                   (x \\<notin> X \\<longrightarrow> I x = Const 0))}", "show \"finite \\<R>\""], ["proof (prove)\nusing this:\n  finite\n   {region X I r |I r.\n    valid_region X k I r \\<and>\n    (\\<forall>x.\n        (x \\<in> X \\<longrightarrow>\n         I x\n         \\<in> {intv. intv_const intv \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n        (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n  \\<R>\n  \\<subseteq> {region X I r |I r.\n               valid_region X k I r \\<and>\n               (\\<forall>x.\n                   (x \\<in> X \\<longrightarrow>\n                    I x\n                    \\<in> {intv.\n                           intv_const intv\n                           \\<le> Max {k x |x. x \\<in> X}}) \\<and>\n                   (x \\<notin> X \\<longrightarrow> I x = Const 0))}\n\ngoal (1 subgoal):\n 1. finite \\<R>", "by blast"], ["proof (state)\nthis:\n  finite \\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SuccI2:\n  \"\\<R> = {region X I r | I r. valid_region X k I r} \\<Longrightarrow> v \\<in> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> R' = [v \\<oplus> t]\\<^sub>\\<R>\n  \\<Longrightarrow> R' \\<in> Succ \\<R> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; v \\<in> R;\n     R \\<in> \\<R>; 0 \\<le> t; R' = [v \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> R' \\<in> Succ \\<R> R", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; v \\<in> R;\n     R \\<in> \\<R>; 0 \\<le> t; R' = [v \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> R' \\<in> Succ \\<R> R", "case A: 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  v \\<in> R\n  R \\<in> \\<R>\n  0 \\<le> t\n  R' = [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; v \\<in> R;\n     R \\<in> \\<R>; 0 \\<le> t; R' = [v \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n    \\<Longrightarrow> R' \\<in> Succ \\<R> R", "from Succ.intros[OF A(2) A(3) regions_closed[OF A(1,3,2,4)] A(4)] A(5)"], ["proof (chain)\npicking this:\n  [v \\<oplus> t]\\<^sub>\\<R> = [v \\<oplus> t]\\<^sub>\\<R> \\<Longrightarrow>\n  [v \\<oplus> t]\\<^sub>\\<R> \\<in> Succ \\<R> R\n  R' = [v \\<oplus> t]\\<^sub>\\<R>", "show ?case"], ["proof (prove)\nusing this:\n  [v \\<oplus> t]\\<^sub>\\<R> = [v \\<oplus> t]\\<^sub>\\<R> \\<Longrightarrow>\n  [v \\<oplus> t]\\<^sub>\\<R> \\<in> Succ \\<R> R\n  R' = [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. R' \\<in> Succ \\<R> R", "by auto"], ["proof (state)\nthis:\n  R' \\<in> Succ \\<R> R\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Set of Regions\\<close>"], ["", "text \\<open>\n  The first property Bouyer shows is that these regions form a 'set of regions'.\n\\<close>"], ["", "text \\<open>\n  For the unbounded region in the upper right corner, the set of successors only\n  contains itself.\n\\<close>"], ["", "lemma Succ_refl:\n  \"\\<R> = {region X I r |I r. valid_region X k I r} \\<Longrightarrow> finite X \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> R \\<in> Succ \\<R> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "case A: 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "then"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  R \\<in> \\<R>", "obtain I r where R: \"valid_region X k I r\" \"R = region X I r\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>valid_region X k I r; R = region X I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  valid_region X k I r\n  R = region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "with A region_not_empty"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  R \\<in> \\<R>\n  \\<lbrakk>finite ?X; valid_region ?X ?k ?I ?r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u. u \\<in> region ?X ?I ?r\n  valid_region X k I r\n  R = region X I r", "obtain v where v: \"v \\<in> region X I r\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  R \\<in> \\<R>\n  \\<lbrakk>finite ?X; valid_region ?X ?k ?I ?r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u. u \\<in> region ?X ?I ?r\n  valid_region X k I r\n  R = region X I r\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        v \\<in> region X I r \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "with R"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  R = region X I r\n  v \\<in> region X I r", "have *: \"(v \\<oplus> 0) \\<in> R\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  R = region X I r\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v \\<oplus> 0 \\<in> R", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  valid_region X k I r\n  R = region X I r\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. v x + 0) \\<in> R", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> 0 \\<in> R\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "from regions_closed'[OF A(1,3-)] v R"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> R; 0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> ?v \\<oplus> ?t \\<in> [?v \\<oplus> ?t]\\<^sub>\\<R>\n  v \\<in> region X I r\n  valid_region X k I r\n  R = region X I r", "have \"(v \\<oplus> 0) \\<in> [v \\<oplus> 0]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> R; 0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> ?v \\<oplus> ?t \\<in> [?v \\<oplus> ?t]\\<^sub>\\<R>\n  v \\<in> region X I r\n  valid_region X k I r\n  R = region X I r\n\ngoal (1 subgoal):\n 1. v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> Succ \\<R> R", "from region_unique[OF A(1) * A(3)] A(3) v[unfolded R(2)[symmetric]]"], ["proof (chain)\npicking this:\n  [v \\<oplus> 0]\\<^sub>\\<R> = R\n  R \\<in> \\<R>\n  v \\<in> R", "show ?case"], ["proof (prove)\nusing this:\n  [v \\<oplus> 0]\\<^sub>\\<R> = R\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. R \\<in> Succ \\<R> R", "by auto"], ["proof (state)\nthis:\n  R \\<in> Succ \\<R> R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Succ_refl':\n  \"\\<R> = {region X I r |I r. valid_region X k I r} \\<Longrightarrow> finite X \\<Longrightarrow> \\<forall> x \\<in> X. \\<exists> c. I x = Greater c\n  \\<Longrightarrow> region X I r \\<in> \\<R> \\<Longrightarrow> Succ \\<R> (region X I r) = {region X I r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     \\<forall>x\\<in>X. \\<exists>c. I x = Greater c;\n     region X I r \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Succ \\<R> (region X I r) = {region X I r}", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     \\<forall>x\\<in>X. \\<exists>c. I x = Greater c;\n     region X I r \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Succ \\<R> (region X I r) = {region X I r}", "case A: 1"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     \\<forall>x\\<in>X. \\<exists>c. I x = Greater c;\n     region X I r \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Succ \\<R> (region X I r) = {region X I r}", "have *: \"(v \\<oplus> t) \\<in> region X I r\" if v: \"v \\<in> region X I r\" and t: \"t \\<ge> 0\" for v and t :: t"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r", "proof ((rule region.intros), auto, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> 0 \\<le> (v \\<oplus> t) x\n 2. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 4. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "case 1"], ["proof (state)\nthis:\n  x_ \\<in> X\n\ngoal (4 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> 0 \\<le> (v \\<oplus> t) x\n 2. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 4. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with v t"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  0 \\<le> t\n  x_ \\<in> X", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  0 \\<le> t\n  x_ \\<in> X\n\ngoal (1 subgoal):\n 1. 0 \\<le> (v \\<oplus> t) x_", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  0 \\<le> t\n  x_ \\<in> X\n\ngoal (1 subgoal):\n 1. 0 \\<le> v x_ + t", "by auto"], ["proof (state)\nthis:\n  0 \\<le> (v \\<oplus> t) x_\n\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "case (2 x)"], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with A"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>\n  x \\<in> X", "obtain c where c: \"I x = Greater c\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. (\\<And>c. I x = Greater c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I x = Greater c\n\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with v 2"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Greater c", "have \"v x > c\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. real c < v x", "by fastforce"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with t"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  real c < v x", "have \"v x + t > c\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  real c < v x\n\ngoal (1 subgoal):\n 1. real c < v x + t", "by auto"], ["proof (state)\nthis:\n  real c < v x + t\n\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "then"], ["proof (chain)\npicking this:\n  real c < v x + t", "have \"(v \\<oplus> t) x > c\""], ["proof (prove)\nusing this:\n  real c < v x + t\n\ngoal (1 subgoal):\n 1. real c < (v \\<oplus> t) x", "by (simp add: cval_add_def)"], ["proof (state)\nthis:\n  real c < (v \\<oplus> t) x\n\ngoal (3 subgoals):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 3. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "from intv_elem.intros(3)[of c \"v \\<oplus> t\", OF this] c"], ["proof (chain)\npicking this:\n  intv_elem x (v \\<oplus> t) (Greater c)\n  I x = Greater c", "show ?case"], ["proof (prove)\nusing this:\n  intv_elem x (v \\<oplus> t) (Greater c)\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I x)\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "case (3 x)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv d_\n  y_ \\<in> X\n  I y_ = Intv da_\n  (x, y_) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "from this(1) A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>", "obtain c where \"I x = Greater c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>c. I x = Greater c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I x = Greater c\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with 3(2)"], ["proof (chain)\npicking this:\n  I x = Intv d_\n  I x = Greater c", "show ?case"], ["proof (prove)\nusing this:\n  I x = Intv d_\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)", "by auto"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "case (4 x)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv d_\n  y_ \\<in> X\n  I y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "from this(1) A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>", "obtain c where \"I x = Greater c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  finite X\n  \\<forall>x\\<in>X. \\<exists>c. I x = Greater c\n  region X I r \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>c. I x = Greater c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I x = Intv d; y \\<in> X; I y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with 4(2)"], ["proof (chain)\npicking this:\n  I x = Intv d_\n  I x = Greater c", "show ?case"], ["proof (prove)\nusing this:\n  I x = Intv d_\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. (x, y_) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y_) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?v \\<in> region X I r; 0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> ?v \\<oplus> ?t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; finite X;\n     \\<forall>x\\<in>X. \\<exists>c. I x = Greater c;\n     region X I r \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Succ \\<R> (region X I r) = {region X I r}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Succ \\<R> (region X I r) = {region X I r}", "proof (standard, standard)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Succ \\<R> (region X I r) \\<Longrightarrow>\n       x \\<in> {region X I r}\n 2. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "fix R"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Succ \\<R> (region X I r) \\<Longrightarrow>\n       x \\<in> {region X I r}\n 2. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "assume R: \"R \\<in> Succ \\<R> (region X I r)\""], ["proof (state)\nthis:\n  R \\<in> Succ \\<R> (region X I r)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Succ \\<R> (region X I r) \\<Longrightarrow>\n       x \\<in> {region X I r}\n 2. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "then"], ["proof (chain)\npicking this:\n  R \\<in> Succ \\<R> (region X I r)", "obtain v t where v:\n      \"v \\<in> region X I r\" \"R = [v \\<oplus> t]\\<^sub>\\<R>\" \"R \\<in> \\<R>\" \"t \\<ge> 0\""], ["proof (prove)\nusing this:\n  R \\<in> Succ \\<R> (region X I r)\n\ngoal (1 subgoal):\n 1. (\\<And>v t.\n        \\<lbrakk>v \\<in> region X I r; R = [v \\<oplus> t]\\<^sub>\\<R>;\n         R \\<in> \\<R>; 0 \\<le> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases rule: Succ.cases) auto"], ["proof (state)\nthis:\n  v \\<in> region X I r\n  R = [v \\<oplus> t]\\<^sub>\\<R>\n  R \\<in> \\<R>\n  0 \\<le> t\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Succ \\<R> (region X I r) \\<Longrightarrow>\n       x \\<in> {region X I r}\n 2. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "from v(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r", "have **: \"\\<forall>x \\<in> X. 0 \\<le> v x\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Succ \\<R> (region X I r) \\<Longrightarrow>\n       x \\<in> {region X I r}\n 2. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "with v(4)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x", "have \"\\<forall>x \\<in> X. 0 \\<le> (v \\<oplus> t) x\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x + t", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Succ \\<R> (region X I r) \\<Longrightarrow>\n       x \\<in> {region X I r}\n 2. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "from *[OF v(1,4)] regions_partition'[OF A(1) ** this] region_unique[OF A(1) v(1) A(4)] v(2)"], ["proof (chain)\npicking this:\n  v \\<oplus> t \\<in> region X I r\n  v \\<oplus> t \\<in> [v]\\<^sub>\\<R> \\<Longrightarrow>\n  [v \\<oplus> t]\\<^sub>\\<R> = [v]\\<^sub>\\<R>\n  [v]\\<^sub>\\<R> = region X I r\n  R = [v \\<oplus> t]\\<^sub>\\<R>", "show \"R \\<in> {region X I r}\""], ["proof (prove)\nusing this:\n  v \\<oplus> t \\<in> region X I r\n  v \\<oplus> t \\<in> [v]\\<^sub>\\<R> \\<Longrightarrow>\n  [v \\<oplus> t]\\<^sub>\\<R> = [v]\\<^sub>\\<R>\n  [v]\\<^sub>\\<R> = region X I r\n  R = [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. R \\<in> {region X I r}", "by auto"], ["proof (state)\nthis:\n  R \\<in> {region X I r}\n\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "from A(4)"], ["proof (chain)\npicking this:\n  region X I r \\<in> \\<R>", "obtain I' r' where R': \"region X I r = region X I' r'\" \"valid_region X k I' r'\""], ["proof (prove)\nusing this:\n  region X I r \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>region X I r = region X I' r';\n         valid_region X k I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding A(1)"], ["proof (prove)\nusing this:\n  region X I r \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>region X I r = region X I' r';\n         valid_region X k I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  region X I r = region X I' r'\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "with region_not_empty[OF A(2) this(2)]"], ["proof (chain)\npicking this:\n  \\<exists>u. u \\<in> region X I' r'\n  region X I r = region X I' r'\n  valid_region X k I' r'", "obtain v where v: \"v \\<in> region X I r\""], ["proof (prove)\nusing this:\n  \\<exists>u. u \\<in> region X I' r'\n  region X I r = region X I' r'\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        v \\<in> region X I r \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "from region_unique[OF A(1) this A(4)]"], ["proof (chain)\npicking this:\n  [v]\\<^sub>\\<R> = region X I r", "have *: \"[v \\<oplus> 0]\\<^sub>\\<R> = region X I r\""], ["proof (prove)\nusing this:\n  [v]\\<^sub>\\<R> = region X I r\n\ngoal (1 subgoal):\n 1. [v \\<oplus> 0]\\<^sub>\\<R> = region X I r", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  [v]\\<^sub>\\<R> = region X I r\n\ngoal (1 subgoal):\n 1. [(\\<lambda>x. v x + 0)]\\<^sub>\\<R> = region X I r", "by auto"], ["proof (state)\nthis:\n  [v \\<oplus> 0]\\<^sub>\\<R> = region X I r\n\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "with v A(4)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  region X I r \\<in> \\<R>\n  [v \\<oplus> 0]\\<^sub>\\<R> = region X I r", "have \"[v \\<oplus> 0]\\<^sub>\\<R> \\<in> Succ \\<R> (region X I r)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  region X I r \\<in> \\<R>\n  [v \\<oplus> 0]\\<^sub>\\<R> = region X I r\n\ngoal (1 subgoal):\n 1. [v \\<oplus> 0]\\<^sub>\\<R> \\<in> Succ \\<R> (region X I r)", "by (intro Succ.intros; auto)"], ["proof (state)\nthis:\n  [v \\<oplus> 0]\\<^sub>\\<R> \\<in> Succ \\<R> (region X I r)\n\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "with *"], ["proof (chain)\npicking this:\n  [v \\<oplus> 0]\\<^sub>\\<R> = region X I r\n  [v \\<oplus> 0]\\<^sub>\\<R> \\<in> Succ \\<R> (region X I r)", "show \"{region X I r} \\<subseteq> Succ \\<R> (region X I r)\""], ["proof (prove)\nusing this:\n  [v \\<oplus> 0]\\<^sub>\\<R> = region X I r\n  [v \\<oplus> 0]\\<^sub>\\<R> \\<in> Succ \\<R> (region X I r)\n\ngoal (1 subgoal):\n 1. {region X I r} \\<subseteq> Succ \\<R> (region X I r)", "by auto"], ["proof (state)\nthis:\n  {region X I r} \\<subseteq> Succ \\<R> (region X I r)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Succ \\<R> (region X I r) = {region X I r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Defining the closest successor of a region. Only exists if at least one interval is upper-bounded.\n\\<close>"], ["", "definition\n  \"succ \\<R> R =\n  (SOME R'. R' \\<in> Succ \\<R> R \\<and> (\\<forall> u \\<in> R. \\<forall> t \\<ge> 0. (u \\<oplus> t) \\<notin> R \\<longrightarrow> (\\<exists> t' \\<le> t. (u \\<oplus> t') \\<in> R' \\<and> 0 \\<le> t')))\""], ["", "inductive isConst :: \"intv \\<Rightarrow> bool\"\nwhere\n  \"isConst (Const _)\""], ["", "inductive isIntv :: \"intv \\<Rightarrow> bool\"\nwhere\n  \"isIntv (Intv _)\""], ["", "inductive isGreater :: \"intv \\<Rightarrow> bool\"\nwhere\n  \"isGreater (Greater _)\""], ["", "declare isIntv.intros[intro!] isConst.intros[intro!] isGreater.intros[intro!]"], ["", "declare isIntv.cases[elim!] isConst.cases[elim!] isGreater.cases[elim!]"], ["", "text \\<open>\n  What Bouyer states at the end. However, we have to be a bit more precise than in her statement.\n\\<close>"], ["", "lemma closest_prestable_1:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  defines \"Z \\<equiv> {x \\<in> X . \\<exists> c. I x = Const c}\"\n  assumes \"Z \\<noteq> {}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> Z then I x else if intv_const (I x) = k x then Greater (k x) else Intv (intv_const (I x))\"\n  defines \"r' \\<equiv> r \\<union> {(x,y) . x \\<in> Z \\<and> y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  shows   \"\\<forall> v \\<in> R. \\<forall> t>0. \\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> t' \\<ge> 0\"\n  and     \"\\<forall> v \\<in> region X I' r'. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> R\"\n  and     \"\\<forall> x \\<in> X. \\<not> isConst (I' x)\"\n  and     \"\\<forall> v \\<in> R. \\<forall> t < 1. \\<forall> t' \\<ge> 0. (v \\<oplus> t') \\<in> region X I' r'\n           \\<longrightarrow> {x. x \\<in> X \\<and> (\\<exists> c. I x = Intv c \\<and> v x + t \\<ge> c + 1)}\n                = {x. x \\<in> X \\<and> (\\<exists> c. I' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> c + 1)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>v\\<in>R.\n        \\<forall>t>0.\n           \\<exists>t'\\<le>t.\n              v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t' &&&\n     \\<forall>v\\<in>region X I' r'.\n        \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> R) &&&\n    \\<forall>x\\<in>X. \\<not> isConst (I' x) &&&\n    \\<forall>v\\<in>R.\n       \\<forall>t<1.\n          \\<forall>t'\\<ge>0.\n             v \\<oplus> t' \\<in> region X I' r' \\<longrightarrow>\n             {x \\<in> X.\n              \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n             {x \\<in> X.\n              \\<exists>c.\n                 I' x = Intv c \\<and>\n                 real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}", "proof (safe, goal_cases)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "fix v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume v: \"v \\<in> R\""], ["proof (state)\nthis:\n  v \\<in> R\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "fix t :: t"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume t: \"0 < t\""], ["proof (state)\nthis:\n  0 < t\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "have elem: \"intv_elem x v (I x)\" if x: \"x \\<in> X\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "using v x"], ["proof (prove)\nusing this:\n  v \\<in> R\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "unfolding R_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "have *: \"(v \\<oplus> t) \\<in> region X I' r'\" if A: \"\\<forall> x \\<in> X. \\<not> isIntv (I x)\" and t: \"t > 0\" \"t < 1\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I' r'", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "from v"], ["proof (chain)\npicking this:\n  v \\<in> R", "have \"\\<forall> x \\<in> X. v x \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "unfolding R_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "with t"], ["proof (chain)\npicking this:\n  0 < t\n  t < 1\n  \\<forall>x\\<in>X. 0 \\<le> v x", "show ?case"], ["proof (prove)\nusing this:\n  0 < t\n  t < 1\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 < t\n  t < 1\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x + t", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)", "proof (standard, case_tac \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "case (1 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with elem[OF \\<open>x \\<in> X\\<close>]"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  x \\<in> X\n  I x = Const c", "have \"v x = c\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  x \\<in> X\n  I x = Const c\n\ngoal (1 subgoal):\n 1. v x = real c", "by auto"], ["proof (state)\nthis:\n  v x = real c\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I' x)", "proof (cases \"intv_const (I x) = k x\", auto simp: 1 I'_def Z_def, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. c = k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Greater (k x))\n 2. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "case 1"], ["proof (state)\nthis:\n  c = k x\n\ngoal (2 subgoals):\n 1. c = k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Greater (k x))\n 2. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "with \\<open>v x = c\\<close>"], ["proof (chain)\npicking this:\n  v x = real c\n  c = k x", "have \"v x = k x\""], ["proof (prove)\nusing this:\n  v x = real c\n  c = k x\n\ngoal (1 subgoal):\n 1. v x = real (k x)", "by auto"], ["proof (state)\nthis:\n  v x = real (k x)\n\ngoal (2 subgoals):\n 1. c = k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Greater (k x))\n 2. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "with t"], ["proof (chain)\npicking this:\n  0 < t\n  t < 1\n  v x = real (k x)", "show ?case"], ["proof (prove)\nusing this:\n  0 < t\n  t < 1\n  v x = real (k x)\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (Greater (k x))", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (Greater (k x))\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "case 2"], ["proof (state)\nthis:\n  c \\<noteq> k x\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "from assms(8) 1"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X\n  I x = Const c", "have \"c \\<le> k x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n  I x = Const c\n\ngoal (1 subgoal):\n 1. c \\<le> k x", "by (cases rule: valid_region.cases) auto"], ["proof (state)\nthis:\n  c \\<le> k x\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "with 2"], ["proof (chain)\npicking this:\n  c \\<noteq> k x\n  c \\<le> k x", "have \"c < k x\""], ["proof (prove)\nusing this:\n  c \\<noteq> k x\n  c \\<le> k x\n\ngoal (1 subgoal):\n 1. c < k x", "by linarith"], ["proof (state)\nthis:\n  c < k x\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "from t \\<open>v x = c\\<close>"], ["proof (chain)\npicking this:\n  0 < t\n  t < 1\n  v x = real c", "show ?case"], ["proof (prove)\nusing this:\n  0 < t\n  t < 1\n  v x = real c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (Intv c)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (Intv c)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I' x)\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "case (2 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with A"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. \\<not> isIntv (I x)\n  x \\<in> X\n  I x = Intv c", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isIntv (I x)\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I' x)\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "case (3 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Greater c", "have \"I' x = Greater c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. I' x = Greater c", "unfolding I'_def Z_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n     else if intv_const (I x) = k x then Greater (k x)\n          else Intv (intv_const (I x))) =\n    Greater c", "by auto"], ["proof (state)\nthis:\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with t 3 elem[OF \\<open>x \\<in> X\\<close>]"], ["proof (chain)\npicking this:\n  0 < t\n  t < 1\n  x \\<in> X\n  I x = Greater c\n  intv_elem x v (I x)\n  I' x = Greater c", "show ?case"], ["proof (prove)\nusing this:\n  0 < t\n  t < 1\n  x \\<in> X\n  I x = Greater c\n  intv_elem x v (I x)\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I' x)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 3"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"{x \\<in> X. \\<exists>d. I' x = Intv d} = {x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 4"], ["proof (state)\nthis:\n  \n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "let ?X\\<^sub>0' = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"\\<forall>x\\<in>?X\\<^sub>0'. \\<forall>y\\<in>?X\\<^sub>0'. ((x, y) \\<in> r') = (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "case (1 x y d d')"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "note B = this"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "have \"x \\<in> Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Z", "apply (rule ccontr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> False", "using A B"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isIntv (I x)\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> False", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with elem[OF B(1)]"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  x \\<in> Z", "have \"frac (v x) = 0 \""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. frac (v x) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  x \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. frac (v x) = 0", "by auto"], ["proof (state)\nthis:\n  frac (v x) = 0\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with frac_distr[of t \"v x\"] t"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < t; t < 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (v x + t)\n  \\<lbrakk>0 < t; t < 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> frac (v x) + t = frac (v x + t)\n  0 < t\n  t < 1\n  frac (v x) = 0", "have *: \"frac (v x + t) = t\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < t; t < 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (v x + t)\n  \\<lbrakk>0 < t; t < 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> frac (v x) + t = frac (v x + t)\n  0 < t\n  t < 1\n  frac (v x) = 0\n\ngoal (1 subgoal):\n 1. frac (v x + t) = t", "by auto"], ["proof (state)\nthis:\n  frac (v x + t) = t\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "have \"y \\<in> Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> Z", "apply (rule ccontr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<notin> Z \\<Longrightarrow> False", "using A B"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isIntv (I x)\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. y \\<notin> Z \\<Longrightarrow> False", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  y \\<in> Z\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with elem[OF B(3)]"], ["proof (chain)\npicking this:\n  intv_elem y v (I y)\n  y \\<in> Z", "have \"frac (v y) = 0 \""], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "by auto"], ["proof (state)\nthis:\n  frac (v y) = 0\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with frac_distr[of t \"v y\"] t"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < t; t < 1 - frac (v y)\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (v y + t)\n  \\<lbrakk>0 < t; t < 1 - frac (v y)\\<rbrakk>\n  \\<Longrightarrow> frac (v y) + t = frac (v y + t)\n  0 < t\n  t < 1\n  frac (v y) = 0", "have \"frac (v y + t) = t\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < t; t < 1 - frac (v y)\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (v y + t)\n  \\<lbrakk>0 < t; t < 1 - frac (v y)\\<rbrakk>\n  \\<Longrightarrow> frac (v y) + t = frac (v y + t)\n  0 < t\n  t < 1\n  frac (v y) = 0\n\ngoal (1 subgoal):\n 1. frac (v y + t) = t", "by auto"], ["proof (state)\nthis:\n  frac (v y + t) = t\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with *"], ["proof (chain)\npicking this:\n  frac (v x + t) = t\n  frac (v y + t) = t", "show ?case"], ["proof (prove)\nusing this:\n  frac (v x + t) = t\n  frac (v y + t) = t\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  frac (v x + t) = t\n  frac (v y + t) = t\n\ngoal (1 subgoal):\n 1. frac (v x + t) \\<le> frac (v y + t)", "by auto"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "case B: (2 x)"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "have \"x \\<in> Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Z", "apply (rule ccontr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> False", "using A B"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isIntv (I x)\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> False", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with B"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n  x \\<in> Z", "have \"intv_const (I x) \\<noteq> k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d_\n  y_ \\<in> X\n  (if y_ \\<notin> Z then I y_\n   else if intv_const (I y_) = k y_ then Greater (k y_)\n        else Intv (intv_const (I y_))) =\n  Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "by auto"], ["proof (state)\nthis:\n  intv_const (I x) \\<noteq> k x\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with B(1) assms(8)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  valid_region X k I r\n  intv_const (I x) \\<noteq> k x", "have \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  valid_region X k I r\n  intv_const (I x) \\<noteq> k x\n\ngoal (1 subgoal):\n 1. intv_const (I x) < k x", "by (fastforce elim!: valid_intv.cases)"], ["proof (state)\nthis:\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with B \\<open>x \\<in> Z\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n  x \\<in> Z\n  intv_const (I x) < k x", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n  x \\<in> Z\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y_) \\<in> r'", "unfolding r'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d_\n  y_ \\<in> X\n  I' y_ = Intv da_\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y_)\n  x \\<in> Z\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y_)\n    \\<in> r \\<union>\n          {(x, y).\n           x \\<in> Z \\<and>\n           y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}", "by auto"], ["proof (state)\nthis:\n  (x, y_) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n        ((x, y) \\<in> r') =\n        (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isIntv (I x); 0 < ?t; ?t < 1\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> region X I' r'\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "let ?S = \"{1 - frac (v x) | x. x \\<in> X \\<and> isIntv (I x)}\""], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "let ?t = \"Min ?S\""], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "{"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume A: \"\\<exists> x \\<in> X. isIntv (I x)\""], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isIntv (I x)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite X", "have \"finite ?S\""], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. finite {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  finite {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from A"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>X. isIntv (I x)", "have \"?S \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>X. isIntv (I x)\n\ngoal (1 subgoal):\n 1. {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} \\<noteq> {}\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from Min_in[OF \\<open>finite ?S\\<close> this]"], ["proof (chain)\npicking this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  \\<in> {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}", "obtain x where\n      x: \"x \\<in> X\" \"isIntv (I x)\" \"?t = 1 - frac (v x)\""], ["proof (prove)\nusing this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  \\<in> {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> X; isIntv (I x);\n         Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} =\n         1 - frac (v x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  x \\<in> X\n  isIntv (I x)\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} = 1 - frac (v x)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "have \"frac (v x) < 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac (v x) < 1", "by (simp add: frac_lt_1)"], ["proof (state)\nthis:\n  frac (v x) < 1\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "then"], ["proof (chain)\npicking this:\n  frac (v x) < 1", "have \"?t > 0\""], ["proof (prove)\nusing this:\n  frac (v x) < 1\n\ngoal (1 subgoal):\n 1. 0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}", "by (simp add: x(3))"], ["proof (state)\nthis:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "then"], ["proof (chain)\npicking this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}", "have \"?t / 2 > 0\""], ["proof (prove)\nusing this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n\ngoal (1 subgoal):\n 1. 0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "by auto"], ["proof (state)\nthis:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from x(2)"], ["proof (chain)\npicking this:\n  isIntv (I x)", "obtain c where \"I x = Intv c\""], ["proof (prove)\nusing this:\n  isIntv (I x)\n\ngoal (1 subgoal):\n 1. (\\<And>c. I x = Intv c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto)"], ["proof (state)\nthis:\n  I x = Intv c\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with elem[OF x(1)]"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  I x = Intv c", "have v_x: \"c < v x\" \"v x < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x &&& v x < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from nat_intv_frac_gt0[OF this]"], ["proof (chain)\npicking this:\n  0 < frac (v x)", "have \"frac (v x) > 0\""], ["proof (prove)\nusing this:\n  0 < frac (v x)\n\ngoal (1 subgoal):\n 1. 0 < frac (v x)", "."], ["proof (state)\nthis:\n  0 < frac (v x)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with x(3)"], ["proof (chain)\npicking this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} = 1 - frac (v x)\n  0 < frac (v x)", "have \"?t < 1\""], ["proof (prove)\nusing this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} = 1 - frac (v x)\n  0 < frac (v x)\n\ngoal (1 subgoal):\n 1. Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1", "by auto"], ["proof (state)\nthis:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "{"], ["proof (state)\nthis:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "fix t :: t"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume t: \"0 < t\" \"t \\<le> ?t / 2\""], ["proof (state)\nthis:\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "{"], ["proof (state)\nthis:\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "fix y"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume \"y \\<in> X\" \"isIntv (I y)\""], ["proof (state)\nthis:\n  y \\<in> X\n  isIntv (I y)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "then"], ["proof (chain)\npicking this:\n  y \\<in> X\n  isIntv (I y)", "have \"1 - frac (v y) \\<in> ?S\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  isIntv (I y)\n\ngoal (1 subgoal):\n 1. 1 - frac (v y) \\<in> {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  1 - frac (v y) \\<in> {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from Min_le[OF \\<open>finite ?S\\<close> this] \\<open>?t > 0\\<close> t"], ["proof (chain)\npicking this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  \\<le> 1 - frac (v y)\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "have \"t  < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  \\<le> 1 - frac (v y)\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v y)", "by linarith"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "note frac_bound = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "have \"(v \\<oplus> t) \\<in> region X I' r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I' r'", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "from v"], ["proof (chain)\npicking this:\n  v \\<in> R", "have \"\\<forall> x \\<in> X. v x \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "unfolding R_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "with \\<open>?t > 0\\<close> t"], ["proof (chain)\npicking this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<forall>x\\<in>X. 0 \\<le> v x", "show ?case"], ["proof (prove)\nusing this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x + t", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)", "proof (standard, case_tac \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "case A: (1 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with elem[OF \\<open>x \\<in> X\\<close>]"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  x \\<in> X\n  I x = Const c", "have \"v x = c\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  x \\<in> X\n  I x = Const c\n\ngoal (1 subgoal):\n 1. v x = real c", "by auto"], ["proof (state)\nthis:\n  v x = real c\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I' x)", "proof (cases \"intv_const (I x) = k x\", auto simp: A I'_def Z_def, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. c = k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Greater (k x))\n 2. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "case 1"], ["proof (state)\nthis:\n  c = k x\n\ngoal (2 subgoals):\n 1. c = k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Greater (k x))\n 2. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "with \\<open>v x = c\\<close>"], ["proof (chain)\npicking this:\n  v x = real c\n  c = k x", "have \"v x = k x\""], ["proof (prove)\nusing this:\n  v x = real c\n  c = k x\n\ngoal (1 subgoal):\n 1. v x = real (k x)", "by auto"], ["proof (state)\nthis:\n  v x = real (k x)\n\ngoal (2 subgoals):\n 1. c = k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Greater (k x))\n 2. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "with \\<open>?t > 0\\<close> t"], ["proof (chain)\npicking this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  v x = real (k x)", "show ?case"], ["proof (prove)\nusing this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  v x = real (k x)\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (Greater (k x))", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (Greater (k x))\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "case 2"], ["proof (state)\nthis:\n  c \\<noteq> k x\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "from assms(8) A"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X\n  I x = Const c", "have \"c \\<le> k x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n  I x = Const c\n\ngoal (1 subgoal):\n 1. c \\<le> k x", "by (cases rule: valid_region.cases) auto"], ["proof (state)\nthis:\n  c \\<le> k x\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "with 2"], ["proof (chain)\npicking this:\n  c \\<noteq> k x\n  c \\<le> k x", "have \"c < k x\""], ["proof (prove)\nusing this:\n  c \\<noteq> k x\n  c \\<le> k x\n\ngoal (1 subgoal):\n 1. c < k x", "by linarith"], ["proof (state)\nthis:\n  c < k x\n\ngoal (1 subgoal):\n 1. c \\<noteq> k x \\<Longrightarrow> intv_elem x (v \\<oplus> t) (Intv c)", "from \\<open>v x = c\\<close> \\<open>?t < 1\\<close> t"], ["proof (chain)\npicking this:\n  v x = real c\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "show ?case"], ["proof (prove)\nusing this:\n  v x = real c\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (Intv c)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (Intv c)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I' x)\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "case (2 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with elem[OF \\<open>x \\<in> X\\<close>]"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  x \\<in> X\n  I x = Intv c", "have v: \"c < v x\" \"v x < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x &&& v x < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with \\<open>?t > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  real c < v x\n  v x < real (c + 1)", "have \"c < v x + (?t / 2)\""], ["proof (prove)\nusing this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)}\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. real c\n    < v x + Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "by auto"], ["proof (state)\nthis:\n  real c < v x + Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "from 2"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c", "have \"I' x = I x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. I' x = I x", "unfolding I'_def Z_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n     else if intv_const (I x) = k x then Greater (k x)\n          else Intv (intv_const (I x))) =\n    I x", "by auto"], ["proof (state)\nthis:\n  I' x = I x\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "from frac_bound[OF 2(1)] 2(2)"], ["proof (chain)\npicking this:\n  isIntv (I x) \\<Longrightarrow> t < 1 - frac (v x)\n  I x = Intv c", "have \"t  < 1 - frac (v x)\""], ["proof (prove)\nusing this:\n  isIntv (I x) \\<Longrightarrow> t < 1 - frac (v x)\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "from frac_add_le_preservation[OF v(2) this] t v(1) 2"], ["proof (chain)\npicking this:\n  v x + t < real (c + 1)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  real c < v x\n  x \\<in> X\n  I x = Intv c", "show ?case"], ["proof (prove)\nusing this:\n  v x + t < real (c + 1)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  real c < v x\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I' x)", "unfolding cval_add_def \\<open>I' x = I x\\<close>"], ["proof (prove)\nusing this:\n  v x + t < real (c + 1)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  real c < v x\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. intv_elem x (\\<lambda>x. v x + t) (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I' x)\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "case (3 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Greater c", "have \"I' x = Greater c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. I' x = Greater c", "unfolding I'_def Z_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n     else if intv_const (I x) = k x then Greater (k x)\n          else Intv (intv_const (I x))) =\n    Greater c", "by auto"], ["proof (state)\nthis:\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I' x)", "with 3 elem[OF \\<open>x \\<in> X\\<close>] t"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Greater c\n  intv_elem x v (I x)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  I' x = Greater c", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Greater c\n  intv_elem x v (I x)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I' x)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I' x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 3"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"{x \\<in> X. \\<exists>d. I' x = Intv d} = {x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 4"], ["proof (state)\nthis:\n  \n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "let ?X\\<^sub>0  = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "let ?X\\<^sub>0' = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"\\<forall>x\\<in>?X\\<^sub>0'. \\<forall>y\\<in>?X\\<^sub>0'. ((x, y) \\<in> r') = (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "case (1 x y d d')"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "note B = this"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n\ngoal (2 subgoals):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        (x, y) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "proof (cases \"x \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. x \\<notin> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "case False"], ["proof (state)\nthis:\n  x \\<notin> Z\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. x \\<notin> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "note F = this"], ["proof (state)\nthis:\n  x \\<notin> Z\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. x \\<notin> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "proof (cases \"y \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. y \\<notin> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "case False"], ["proof (state)\nthis:\n  y \\<notin> Z\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. y \\<notin> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with F B"], ["proof (chain)\npicking this:\n  x \\<notin> Z\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n  y \\<notin> Z", "have *: \"x \\<in> ?X\\<^sub>0\" \"y \\<in> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  x \\<notin> Z\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  (x, y) \\<in> r'\n  y \\<notin> Z\n\ngoal (1 subgoal):\n 1. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} &&&\n    y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<notin> Z\n  x \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d\n  y \\<in> X\n  (if y \\<notin> Z then I y\n   else if intv_const (I y) = k y then Greater (k y)\n        else Intv (intv_const (I y))) =\n  Intv d'\n  (x, y) \\<in> r'\n  y \\<notin> Z\n\ngoal (1 subgoal):\n 1. x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} &&&\n    y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. y \\<notin> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "from B(5)"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r'", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding r'_def"], ["proof (prove)\nusing this:\n  (x, y)\n  \\<in> r \\<union>\n        {(x, y).\n         x \\<in> Z \\<and>\n         y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "case 1"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "with v *"], ["proof (chain)\npicking this:\n  v \\<in> R\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  (x, y) \\<in> r", "have le: \"frac (v x) <= frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "unfolding R_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "from frac_bound *"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"t < 1 - frac (v x)\" \"t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x) &&& t < 1 - frac (v y)", "by fastforce+"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "with frac_distr t"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < ?d; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (?a + ?d)\n  \\<lbrakk>0 < ?d; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> frac ?a + ?d = frac (?a + ?d)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)", "have\n                  \"frac (v x) + t = frac (v x + t)\" \"frac (v y) + t = frac (v y + t)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?d; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (?a + ?d)\n  \\<lbrakk>0 < ?d; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> frac ?a + ?d = frac (?a + ?d)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. frac (v x) + t = frac (v x + t) &&& frac (v y) + t = frac (v y + t)", "by simp+"], ["proof (state)\nthis:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "with le"], ["proof (chain)\npicking this:\n  frac (v x) \\<le> frac (v y)\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)", "show ?case"], ["proof (prove)\nusing this:\n  frac (v x) \\<le> frac (v y)\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  frac (v x) \\<le> frac (v y)\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. frac (v x + t) \\<le> frac (v y + t)", "by fastforce"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "case 2"], ["proof (state)\nthis:\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "from this(1) elem"], ["proof (chain)\npicking this:\n  x \\<in> Z\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)", "have **: \"frac (v x) = 0\""], ["proof (prove)\nusing this:\n  x \\<in> Z\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n\ngoal (1 subgoal):\n 1. frac (v x) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n\ngoal (1 subgoal):\n 1. frac (v x) = 0", "by force"], ["proof (state)\nthis:\n  frac (v x) = 0\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "from 2(4)"], ["proof (chain)\npicking this:\n  I' y = Intv uu_", "obtain c where \"I' y = Intv c\""], ["proof (prove)\nusing this:\n  I' y = Intv uu_\n\ngoal (1 subgoal):\n 1. (\\<And>c. I' y = Intv c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto )"], ["proof (state)\nthis:\n  I' y = Intv c\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "then"], ["proof (chain)\npicking this:\n  I' y = Intv c", "have \"y \\<in> Z \\<or> I y = Intv c\""], ["proof (prove)\nusing this:\n  I' y = Intv c\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<or> I y = Intv c", "unfolding I'_def"], ["proof (prove)\nusing this:\n  (if y \\<notin> Z then I y\n   else if intv_const (I y) = k y then Greater (k y)\n        else Intv (intv_const (I y))) =\n  Intv c\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<or> I y = Intv c", "by presburger"], ["proof (state)\nthis:\n  y \\<in> Z \\<or> I y = Intv c\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "then"], ["proof (chain)\npicking this:\n  y \\<in> Z \\<or> I y = Intv c", "show ?case"], ["proof (prove)\nusing this:\n  y \\<in> Z \\<or> I y = Intv c\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "assume \"y \\<in> Z\""], ["proof (state)\nthis:\n  y \\<in> Z\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with elem[OF 2(2)]"], ["proof (chain)\npicking this:\n  intv_elem y v (I y)\n  y \\<in> Z", "have ***: \"frac (v y) = 0\""], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "by force"], ["proof (state)\nthis:\n  frac (v y) = 0\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "by (simp add: ** *** frac_add cval_add_def)"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "assume A: \"I y = Intv c\""], ["proof (state)\nthis:\n  I y = Intv c\n\ngoal (1 subgoal):\n 1. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "have le: \"frac (v x) <= frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by (simp add: **)"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "from frac_bound *"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"t < 1 - frac (v x)\" \"t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x) &&& t < 1 - frac (v y)", "by fastforce+"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with 2 t"], ["proof (chain)\npicking this:\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)", "have \n                    \"frac (v x) + t = frac (v x + t)\" \"frac (v y) + t = frac (v y + t)\""], ["proof (prove)\nusing this:\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. frac (v x) + t = frac (v x + t) &&& frac (v y) + t = frac (v y + t)", "using F"], ["proof (prove)\nusing this:\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. frac (v x) + t = frac (v x + t) &&& frac (v y) + t = frac (v y + t)", "by blast+"], ["proof (state)\nthis:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. I y = Intv c \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with le"], ["proof (chain)\npicking this:\n  frac (v x) \\<le> frac (v y)\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)", "show ?case"], ["proof (prove)\nusing this:\n  frac (v x) \\<le> frac (v y)\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  frac (v x) \\<le> frac (v y)\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. frac (v x + t) \\<le> frac (v y + t)", "by fastforce"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "case True"], ["proof (state)\nthis:\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "then"], ["proof (chain)\npicking this:\n  y \\<in> Z", "obtain d' where d': \"I y = Const d'\""], ["proof (prove)\nusing this:\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. (\\<And>d'. I y = Const d' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Z_def"], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. (\\<And>d'. I y = Const d' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I y = Const d'\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "from B(5)"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r'", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding r'_def"], ["proof (prove)\nusing this:\n  (x, y)\n  \\<in> r \\<union>\n        {(x, y).\n         x \\<in> Z \\<and>\n         y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "case 1"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "from d'"], ["proof (chain)\npicking this:\n  I y = Const d'", "have \"y \\<notin> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  I y = Const d'\n\ngoal (1 subgoal):\n 1. y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "moreover"], ["proof (state)\nthis:\n  y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "from assms(8)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have \"refl_on ?X\\<^sub>0 r\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "by auto"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "ultimately"], ["proof (chain)\npicking this:\n  y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "show ?case"], ["proof (prove)\nusing this:\n  y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}. (x, x) \\<in> r)\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "using 1"], ["proof (prove)\nusing this:\n  y \\<notin> {x \\<in> X. \\<exists>d. I x = Intv d}\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}. (x, x) \\<in> r)\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "by auto"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "case 2"], ["proof (state)\nthis:\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_\n\ngoal (1 subgoal):\n 1. \\<And>uu_.\n       \\<lbrakk>x \\<in> Z; y \\<in> X; intv_const (I x) < k x;\n        I' y = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) x)\n                         \\<le> frac ((v \\<oplus> t) y)", "with F"], ["proof (chain)\npicking this:\n  x \\<notin> Z\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_", "show ?case"], ["proof (prove)\nusing this:\n  x \\<notin> Z\n  x \\<in> Z\n  y \\<in> X\n  intv_const (I x) < k x\n  I' y = Intv uu_\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "by simp"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "case True"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with elem"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  x \\<in> Z", "have **: \"frac (v x) = 0\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. frac (v x) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  x \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. frac (v x) = 0", "by force"], ["proof (state)\nthis:\n  frac (v x) = 0\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "from B(4)"], ["proof (chain)\npicking this:\n  I' y = Intv d'", "have \"y \\<in> Z \\<or> I y = Intv d'\""], ["proof (prove)\nusing this:\n  I' y = Intv d'\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<or> I y = Intv d'", "unfolding I'_def"], ["proof (prove)\nusing this:\n  (if y \\<notin> Z then I y\n   else if intv_const (I y) = k y then Greater (k y)\n        else Intv (intv_const (I y))) =\n  Intv d'\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<or> I y = Intv d'", "by presburger"], ["proof (state)\nthis:\n  y \\<in> Z \\<or> I y = Intv d'\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "then"], ["proof (chain)\npicking this:\n  y \\<in> Z \\<or> I y = Intv d'", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<in> Z \\<or> I y = Intv d'\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "assume \"y \\<in> Z\""], ["proof (state)\nthis:\n  y \\<in> Z\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with elem[OF B(3)]"], ["proof (chain)\npicking this:\n  intv_elem y v (I y)\n  y \\<in> Z", "have ***: \"frac (v y) = 0\""], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "by force"], ["proof (state)\nthis:\n  frac (v y) = 0\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n 2. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "by (simp add: ** *** frac_add cval_add_def)"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "assume A: \"I y = Intv d'\""], ["proof (state)\nthis:\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with B(3)"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I y = Intv d'", "have \"y \\<in> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "with frac_bound"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v y)", "by fastforce+"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "moreover"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "from ** \\<open>?t < 1\\<close>"], ["proof (chain)\npicking this:\n  frac (v x) = 0\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1", "have \"?t / 2 < 1 - frac (v x)\""], ["proof (prove)\nusing this:\n  frac (v x) = 0\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n\ngoal (1 subgoal):\n 1. Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n    < 1 - frac (v x)", "by linarith"], ["proof (state)\nthis:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "ultimately"], ["proof (chain)\npicking this:\n  t < 1 - frac (v y)\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  < 1 - frac (v x)", "have\n                \"frac (v x) + t = frac (v x + t)\" \"frac (v y) + t = frac (v y + t)\""], ["proof (prove)\nusing this:\n  t < 1 - frac (v y)\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. frac (v x) + t = frac (v x + t) &&& frac (v y) + t = frac (v y + t)", "using frac_distr t"], ["proof (prove)\nusing this:\n  t < 1 - frac (v y)\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  < 1 - frac (v x)\n  \\<lbrakk>0 < ?d; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> 0 < frac (?a + ?d)\n  \\<lbrakk>0 < ?d; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> frac ?a + ?d = frac (?a + ?d)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. frac (v x) + t = frac (v x + t) &&& frac (v y) + t = frac (v y + t)", "by simp+"], ["proof (state)\nthis:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "moreover"], ["proof (state)\nthis:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "have \"frac (v x) <= frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by (simp add: **)"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. I y = Intv d' \\<Longrightarrow>\n    frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "ultimately"], ["proof (chain)\npicking this:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n  frac (v x) \\<le> frac (v y)", "show ?thesis"], ["proof (prove)\nusing this:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  frac (v x) + t = frac (v x + t)\n  frac (v y) + t = frac (v y + t)\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. frac (v x + t) \\<le> frac (v y + t)", "by fastforce"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "case B: (2 x y d d')"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "proof (cases \"x \\<in> Z\", goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "case True"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with B(1,2)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<in> Z", "have \"intv_const (I x) \\<noteq> k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "by auto"], ["proof (state)\nthis:\n  intv_const (I x) \\<noteq> k x\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with B(1) assms(8)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  valid_region X k I r\n  intv_const (I x) \\<noteq> k x", "have \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  valid_region X k I r\n  intv_const (I x) \\<noteq> k x\n\ngoal (1 subgoal):\n 1. intv_const (I x) < k x", "by (fastforce elim!: valid_intv.cases)"], ["proof (state)\nthis:\n  intv_const (I x) < k x\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with B True"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n  x \\<in> Z\n  intv_const (I x) < k x", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n  x \\<in> Z\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "unfolding r'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n  x \\<in> Z\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y)\n    \\<in> r \\<union>\n          {(x, y).\n           x \\<in> Z \\<and>\n           y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "case (False)"], ["proof (state)\nthis:\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with B(1,2)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<notin> Z", "have x_intv: \"isIntv (I x)\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. isIntv (I x)", "unfolding Z_def I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d\n  x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. isIntv (I x)", "by auto"], ["proof (state)\nthis:\n  isIntv (I x)\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "proof (cases \"y \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "case False"], ["proof (state)\nthis:\n  y \\<notin> Z\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with B(3,4)"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I' y = Intv d'\n  y \\<notin> Z", "have y_intv: \"isIntv (I y)\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I' y = Intv d'\n  y \\<notin> Z\n\ngoal (1 subgoal):\n 1. isIntv (I y)", "unfolding Z_def I'_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I y\n   else if intv_const (I y) = k y then Greater (k y)\n        else Intv (intv_const (I y))) =\n  Intv d'\n  y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n\ngoal (1 subgoal):\n 1. isIntv (I y)", "by auto"], ["proof (state)\nthis:\n  isIntv (I y)\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with frac_bound x_intv B(1,3)"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  isIntv (I x)\n  x \\<in> X\n  y \\<in> X\n  isIntv (I y)", "have \"t < 1 - frac (v x)\" \"t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  isIntv (I x)\n  x \\<in> X\n  y \\<in> X\n  isIntv (I y)\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x) &&& t < 1 - frac (v y)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n  t < 1 - frac (v y)\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "from frac_add_leD[OF _ this] B(5) t"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < t; frac (v x + t) \\<le> frac (v y + t)\\<rbrakk>\n  \\<Longrightarrow> frac (v x) \\<le> frac (v y)\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "have\n                \"frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < t; frac (v x + t) \\<le> frac (v y + t)\\<rbrakk>\n  \\<Longrightarrow> frac (v x) \\<le> frac (v y)\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "with v assms(2) B(1,3) x_intv y_intv"], ["proof (chain)\npicking this:\n  v \\<in> R\n  R \\<equiv> region X I r\n  x \\<in> X\n  y \\<in> X\n  isIntv (I x)\n  isIntv (I y)\n  frac (v x) \\<le> frac (v y)", "have \"(x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  R \\<equiv> region X I r\n  x \\<in> X\n  y \\<in> X\n  isIntv (I x)\n  isIntv (I y)\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by (auto )"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "by (simp add: r'_def)"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "case True"], ["proof (state)\nthis:\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "from frac_bound x_intv B(1)"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  isIntv (I x)\n  x \\<in> X", "have b: \"t < 1 - frac (v x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> X; isIntv (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> t < 1 - frac (v ?y2)\n  isIntv (I x)\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "from x_intv"], ["proof (chain)\npicking this:\n  isIntv (I x)", "obtain c where \"I x = Intv c\""], ["proof (prove)\nusing this:\n  isIntv (I x)\n\ngoal (1 subgoal):\n 1. (\\<And>c. I x = Intv c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "with elem[OF \\<open>x \\<in> X\\<close>]"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  I x = Intv c", "have v: \"c < v x\" \"v x < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x &&& v x < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "from True elem[OF \\<open>y \\<in> X\\<close>]"], ["proof (chain)\npicking this:\n  y \\<in> Z\n  intv_elem y v (I y)", "have *: \"frac (v y) = 0\""], ["proof (prove)\nusing this:\n  y \\<in> Z\n  intv_elem y v (I y)\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "unfolding Z_def"], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Const c}\n  intv_elem y v (I y)\n\ngoal (1 subgoal):\n 1. frac (v y) = 0", "by auto"], ["proof (state)\nthis:\n  frac (v y) = 0\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "with t \\<open>?t < 1\\<close> floor_frac_add_preservation'[of t \"v y\"]"], ["proof (chain)\npicking this:\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n  \\<lbrakk>0 \\<le> t; t < 1 - frac (v y)\\<rbrakk>\n  \\<Longrightarrow> \\<lfloor>v y\\<rfloor> = \\<lfloor>v y + t\\<rfloor>\n  frac (v y) = 0", "have\n                \"floor (v y + t) = floor (v y)\""], ["proof (prove)\nusing this:\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} < 1\n  \\<lbrakk>0 \\<le> t; t < 1 - frac (v y)\\<rbrakk>\n  \\<Longrightarrow> \\<lfloor>v y\\<rfloor> = \\<lfloor>v y + t\\<rfloor>\n  frac (v y) = 0\n\ngoal (1 subgoal):\n 1. \\<lfloor>v y + t\\<rfloor> = \\<lfloor>v y\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<lfloor>v y + t\\<rfloor> = \\<lfloor>v y\\<rfloor>\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  \\<lfloor>v y + t\\<rfloor> = \\<lfloor>v y\\<rfloor>", "have \"frac (v y + t) = t\""], ["proof (prove)\nusing this:\n  \\<lfloor>v y + t\\<rfloor> = \\<lfloor>v y\\<rfloor>\n\ngoal (1 subgoal):\n 1. frac (v y + t) = t", "by (metis * add_diff_cancel_left' diff_add_cancel diff_self frac_def)"], ["proof (state)\nthis:\n  frac (v y + t) = t\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "moreover"], ["proof (state)\nthis:\n  frac (v y + t) = t\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "from nat_intv_frac_gt0[OF v]"], ["proof (chain)\npicking this:\n  0 < frac (v x)", "have \"0 < frac (v x)\""], ["proof (prove)\nusing this:\n  0 < frac (v x)\n\ngoal (1 subgoal):\n 1. 0 < frac (v x)", "."], ["proof (state)\nthis:\n  0 < frac (v x)\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "moreover"], ["proof (state)\nthis:\n  0 < frac (v x)\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "from frac_distr[OF _ b] t"], ["proof (chain)\npicking this:\n  0 < t \\<Longrightarrow> 0 < frac (v x + t)\n  0 < t \\<Longrightarrow> frac (v x) + t = frac (v x + t)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "have \"frac (v x + t) = frac (v x) + t\""], ["proof (prove)\nusing this:\n  0 < t \\<Longrightarrow> 0 < frac (v x + t)\n  0 < t \\<Longrightarrow> frac (v x) + t = frac (v x + t)\n  0 < t\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. frac (v x + t) = frac (v x) + t", "by auto"], ["proof (state)\nthis:\n  frac (v x + t) = frac (v x) + t\n\ngoal (1 subgoal):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r'", "ultimately"], ["proof (chain)\npicking this:\n  frac (v y + t) = t\n  0 < frac (v x)\n  frac (v x + t) = frac (v x) + t", "show ?thesis"], ["proof (prove)\nusing this:\n  frac (v y + t) = t\n  0 < frac (v x)\n  frac (v x + t) = frac (v x) + t\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "using B(5)"], ["proof (prove)\nusing this:\n  frac (v y + t) = t\n  0 < frac (v x)\n  frac (v x + t) = frac (v x) + t\n  frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  frac (v y + t) = t\n  0 < frac (v x)\n  frac (v x + t) = frac (v x) + t\n  frac (v x + t) \\<le> frac (v y + t)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n        ((x, y) \\<in> r') =\n        (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> region X I' r'\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "}"], ["proof (state)\nthis:\n  \\<lbrakk>0 < ?ta2;\n   ?ta2\n   \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?ta2 \\<in> region X I' r'\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with \\<open>?t/2 > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<lbrakk>0 < ?ta2;\n   ?ta2\n   \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?ta2 \\<in> region X I' r'", "have \"0 < ?t/2 \\<and> (\\<forall> t. 0 < t \\<and> t \\<le> ?t/2 \\<longrightarrow> (v \\<oplus> t) \\<in> region X I' r')\""], ["proof (prove)\nusing this:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<lbrakk>0 < ?ta2;\n   ?ta2\n   \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?ta2 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. 0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n    (\\<forall>t.\n        0 < t \\<and>\n        t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                2 \\<longrightarrow>\n        v \\<oplus> t \\<in> region X I' r')", "by auto"], ["proof (state)\nthis:\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "}"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "note ** = this"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 < t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "show \"\\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> 0 \\<le> t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "proof (cases \"\\<exists> x \\<in> X. isIntv (I x)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "case True"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isIntv (I x)\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "note T = this"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isIntv (I x)\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "proof (cases \"t \\<le> ?t/2\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n            2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "case True"], ["proof (state)\nthis:\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (2 subgoals):\n 1. t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n            2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "with T t **"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>X. isIntv (I x)\n  0 < t\n  \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>X. isIntv (I x)\n  0 < t\n  \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')\n  t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "by auto"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal (1 subgoal):\n 1. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "case False"], ["proof (state)\nthis:\n  \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "then"], ["proof (chain)\npicking this:\n  \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "have \"?t/2 \\<le> t\""], ["proof (prove)\nusing this:\n  \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<le> t", "by auto"], ["proof (state)\nthis:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "moreover"], ["proof (state)\nthis:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "from T **"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>X. isIntv (I x)\n  \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')", "have \"(v \\<oplus> ?t/2) \\<in> region X I' r'\" \"?t/2 > 0\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>X. isIntv (I x)\n  \\<exists>x\\<in>X. isIntv (I x) \\<Longrightarrow>\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<and>\n  (\\<forall>t.\n      0 < t \\<and>\n      t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n              2 \\<longrightarrow>\n      v \\<oplus> t \\<in> region X I' r')\n\ngoal (1 subgoal):\n 1. v \\<oplus> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n    \\<in> region X I' r' &&&\n    0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<in> region X I' r'\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. \\<not> t \\<le> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} /\n                   2 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "ultimately"], ["proof (chain)\npicking this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<le> t\n  v \\<oplus> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<in> region X I' r'\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2", "show ?thesis"], ["proof (prove)\nusing this:\n  Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2 \\<le> t\n  v \\<oplus> Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n  \\<in> region X I' r'\n  0 < Min {1 - frac (v x) |x. x \\<in> X \\<and> isIntv (I x)} / 2\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "by (fastforce del: region.cases)"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>x\\<in>X. isIntv (I x))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "note F = this"], ["proof (state)\nthis:\n  \\<not> (\\<exists>x\\<in>X. isIntv (I x))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>x\\<in>X. isIntv (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "proof (cases \"t < 1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "case True"], ["proof (state)\nthis:\n  t < 1\n\ngoal (2 subgoals):\n 1. t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n 2. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "with F t *"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>x\\<in>X. isIntv (I x))\n  0 < t\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isIntv (I x); 0 < ?t; ?t < 1\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> region X I' r'\n  t < 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>x\\<in>X. isIntv (I x))\n  0 < t\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isIntv (I x); 0 < ?t; ?t < 1\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> region X I' r'\n  t < 1\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "by auto"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal (1 subgoal):\n 1. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "case False"], ["proof (state)\nthis:\n  \\<not> t < 1\n\ngoal (1 subgoal):\n 1. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "then"], ["proof (chain)\npicking this:\n  \\<not> t < 1", "have \"0.5 \\<le> t\""], ["proof (prove)\nusing this:\n  \\<not> t < 1\n\ngoal (1 subgoal):\n 1. 5 / 10 \\<le> t", "by auto"], ["proof (state)\nthis:\n  5 / 10 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "moreover"], ["proof (state)\nthis:\n  5 / 10 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "from F *"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>x\\<in>X. isIntv (I x))\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isIntv (I x); 0 < ?t; ?t < 1\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> region X I' r'", "have \"(v \\<oplus> 0.5) \\<in> region X I' r'\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>x\\<in>X. isIntv (I x))\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isIntv (I x); 0 < ?t; ?t < 1\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. v \\<oplus> 5 / 10 \\<in> region X I' r'", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> 5 / 10 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<not> t < 1 \\<Longrightarrow>\n    \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "ultimately"], ["proof (chain)\npicking this:\n  5 / 10 \\<le> t\n  v \\<oplus> 5 / 10 \\<in> region X I' r'", "show ?thesis"], ["proof (prove)\nusing this:\n  5 / 10 \\<le> t\n  v \\<oplus> 5 / 10 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "by (fastforce del: region.cases)"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "fix v t"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume A: \"v \\<in> region X I' r'\" \"0 \\<le> t\" \"(v \\<oplus> t) \\<in> R\""], ["proof (state)\nthis:\n  v \\<in> region X I' r'\n  0 \\<le> t\n  v \\<oplus> t \\<in> R\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from assms(3,4)"], ["proof (chain)\npicking this:\n  Z \\<equiv> {x \\<in> X. \\<exists>c. I x = Const c}\n  Z \\<noteq> {}", "obtain x c where x: \"I x = Const c\" \"x \\<in> Z\" \"x \\<in> X\""], ["proof (prove)\nusing this:\n  Z \\<equiv> {x \\<in> X. \\<exists>c. I x = Const c}\n  Z \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<lbrakk>I x = Const c; x \\<in> Z; x \\<in> X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I x = Const c\n  x \\<in> Z\n  x \\<in> X\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with A(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  I x = Const c\n  x \\<in> Z\n  x \\<in> X", "have \"intv_elem x v (I' x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  I x = Const c\n  x \\<in> Z\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x v (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x v (I' x)\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with x"], ["proof (chain)\npicking this:\n  I x = Const c\n  x \\<in> Z\n  x \\<in> X\n  intv_elem x v (I' x)", "have \"v x > c\""], ["proof (prove)\nusing this:\n  I x = Const c\n  x \\<in> Z\n  x \\<in> X\n  intv_elem x v (I' x)\n\ngoal (1 subgoal):\n 1. real c < v x", "unfolding I'_def"], ["proof (prove)\nusing this:\n  I x = Const c\n  x \\<in> Z\n  x \\<in> X\n  intv_elem x v\n   (if x \\<notin> Z then I x\n    else if intv_const (I x) = k x then Greater (k x)\n         else Intv (intv_const (I x)))\n\ngoal (1 subgoal):\n 1. real c < v x", "apply (auto elim: intv_elem.cases)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I x = Const c; x \\<in> Z; x \\<in> X;\n     intv_elem x v\n      (if c = k x then Greater (k x) else Intv (intv_const (I x)))\\<rbrakk>\n    \\<Longrightarrow> real c < v x", "apply (cases \"c = k x\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>I x = Const c; x \\<in> Z; x \\<in> X;\n     intv_elem x v\n      (if c = k x then Greater (k x) else Intv (intv_const (I x)));\n     c = k x\\<rbrakk>\n    \\<Longrightarrow> real c < v x\n 2. \\<lbrakk>I x = Const c; x \\<in> Z; x \\<in> X;\n     intv_elem x v\n      (if c = k x then Greater (k x) else Intv (intv_const (I x)));\n     c \\<noteq> k x\\<rbrakk>\n    \\<Longrightarrow> real c < v x", "by auto"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "moreover"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from A(3) x(1,3)"], ["proof (chain)\npicking this:\n  v \\<oplus> t \\<in> R\n  I x = Const c\n  x \\<in> X", "have \"v x + t = c\""], ["proof (prove)\nusing this:\n  v \\<oplus> t \\<in> R\n  I x = Const c\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. v x + t = real c", "by (fastforce elim!: intv_elem.cases simp: cval_add_def R_def)"], ["proof (state)\nthis:\n  v x + t = real c\n\ngoal (4 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "ultimately"], ["proof (chain)\npicking this:\n  real c < v x\n  v x + t = real c", "show False"], ["proof (prove)\nusing this:\n  real c < v x\n  v x + t = real c\n\ngoal (1 subgoal):\n 1. False", "using A(2)"], ["proof (prove)\nusing this:\n  real c < v x\n  v x + t = real c\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (3 subgoals):\n 1. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "fix x c"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "assume \"x \\<in> X\" \"I' x = Const c\""], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x uu_.\n       \\<lbrakk>x \\<in> X; I' x = Const uu_\\<rbrakk> \\<Longrightarrow> False\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Const c", "show False"], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Const c\n\ngoal (1 subgoal):\n 1. False", "apply (auto simp: I'_def Z_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> X;\n     (if \\<forall>c. I x \\<noteq> Const c then I x\n      else if intv_const (I x) = k x then Greater (k x)\n           else Intv (intv_const (I x))) =\n     Const c\\<rbrakk>\n    \\<Longrightarrow> False", "apply (cases \"\\<forall>c. I x \\<noteq> Const c\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<in> X;\n     (if \\<forall>c. I x \\<noteq> Const c then I x\n      else if intv_const (I x) = k x then Greater (k x)\n           else Intv (intv_const (I x))) =\n     Const c;\n     \\<forall>c. I x \\<noteq> Const c\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>x \\<in> X;\n     (if \\<forall>c. I x \\<noteq> Const c then I x\n      else if intv_const (I x) = k x then Greater (k x)\n           else Intv (intv_const (I x))) =\n     Const c;\n     \\<not> (\\<forall>c. I x \\<noteq> Const c)\\<rbrakk>\n    \\<Longrightarrow> False", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ca.\n       \\<lbrakk>x \\<in> X;\n        (if ca = k x then Greater (k x) else Intv (intv_const (I x))) =\n        Const c;\n        I x = Const ca\\<rbrakk>\n       \\<Longrightarrow> False", "apply (rename_tac c')"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>c'.\n       \\<lbrakk>x \\<in> X;\n        (if c' = k x then Greater (k x) else Intv (intv_const (I x))) =\n        Const c;\n        I x = Const c'\\<rbrakk>\n       \\<Longrightarrow> False", "apply (case_tac \"c' = k x\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>c'.\n       \\<lbrakk>x \\<in> X;\n        (if c' = k x then Greater (k x) else Intv (intv_const (I x))) =\n        Const c;\n        I x = Const c'; c' = k x\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>c'.\n       \\<lbrakk>x \\<in> X;\n        (if c' = k x then Greater (k x) else Intv (intv_const (I x))) =\n        Const c;\n        I x = Const c'; c' \\<noteq> k x\\<rbrakk>\n       \\<Longrightarrow> False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "case (4 v t t' x c)"], ["proof (state)\nthis:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "note A = this"], ["proof (state)\nthis:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "then"], ["proof (chain)\npicking this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have \"I' x = Intv c\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. I' x = Intv c", "unfolding I'_def Z_def"], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t'\n  \\<in> region X\n         (\\<lambda>x.\n             if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n             else if intv_const (I x) = k x then Greater (k x)\n                  else Intv (intv_const (I x)))\n         r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n     else if intv_const (I x) = k x then Greater (k x)\n          else Intv (intv_const (I x))) =\n    Intv c", "by auto"], ["proof (state)\nthis:\n  I' x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "moreover"], ["proof (state)\nthis:\n  I' x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "from A"], ["proof (chain)\npicking this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have \"real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  (\\<lambda>x. v x + t') \\<in> region X I' r'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. real (c + 1) \\<le> v x + t' + (t - t')", "by auto"], ["proof (state)\nthis:\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (2 subgoals):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "ultimately"], ["proof (chain)\npicking this:\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')", "show ?case"], ["proof (prove)\nusing this:\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (1 subgoal):\n 1. \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')", "by blast"], ["proof (state)\nthis:\n  \\<exists>c.\n     I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (1 subgoal):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "case A: (5 v t t' x c)"], ["proof (state)\nthis:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (1 subgoal):\n 1. \\<And>v t t' x c.\n       \\<lbrakk>v \\<in> R; t < 1; 0 \\<le> t';\n        v \\<oplus> t' \\<in> region X I' r'; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "proof (cases \"x \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. x \\<notin> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "case False"], ["proof (state)\nthis:\n  x \\<notin> Z\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. x \\<notin> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with A"], ["proof (chain)\npicking this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  x \\<notin> Z", "have \"I x = Intv c\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. I x = Intv c", "unfolding I'_def"], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t'\n  \\<in> region X\n         (\\<lambda>x.\n             if x \\<notin> Z then I x\n             else if intv_const (I x) = k x then Greater (k x)\n                  else Intv (intv_const (I x)))\n         r'\n  x \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. I x = Intv c", "by auto"], ["proof (state)\nthis:\n  I x = Intv c\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. x \\<notin> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with A"], ["proof (chain)\npicking this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  I x = Intv c", "show ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  v \\<oplus> t' \\<in> region X I' r'\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  v \\<in> R\n  t < 1\n  0 \\<le> t'\n  (\\<lambda>x. v x + t') \\<in> region X I' r'\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> v x + t' + (t - t')\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "by auto"], ["proof (state)\nthis:\n  \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "case True"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with A(6)"], ["proof (chain)\npicking this:\n  I' x = Intv c\n  x \\<in> Z", "have \"I x = Const c\""], ["proof (prove)\nusing this:\n  I' x = Intv c\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. I x = Const c", "apply (auto simp: I'_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(if intv_const (I x) = k x then Greater (k x)\n              else Intv (intv_const (I x))) =\n             Intv c;\n     x \\<in> Z\\<rbrakk>\n    \\<Longrightarrow> I x = Const c", "apply (cases \"intv_const (I x) = k x\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>(if intv_const (I x) = k x then Greater (k x)\n              else Intv (intv_const (I x))) =\n             Intv c;\n     x \\<in> Z; intv_const (I x) = k x\\<rbrakk>\n    \\<Longrightarrow> I x = Const c\n 2. \\<lbrakk>(if intv_const (I x) = k x then Greater (k x)\n              else Intv (intv_const (I x))) =\n             Intv c;\n     x \\<in> Z; intv_const (I x) \\<noteq> k x\\<rbrakk>\n    \\<Longrightarrow> I x = Const c", "by (auto simp: Z_def)"], ["proof (state)\nthis:\n  I x = Const c\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with A(1,5) R_def"], ["proof (chain)\npicking this:\n  v \\<in> R\n  x \\<in> X\n  R \\<equiv> region X I r\n  I x = Const c", "have \"v x = c\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  x \\<in> X\n  R \\<equiv> region X I r\n  I x = Const c\n\ngoal (1 subgoal):\n 1. v x = real c", "by fastforce"], ["proof (state)\nthis:\n  v x = real c\n\ngoal (1 subgoal):\n 1. x \\<in> Z \\<Longrightarrow>\n    \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "with A(2,7)"], ["proof (chain)\npicking this:\n  t < 1\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  v x = real c", "show ?thesis"], ["proof (prove)\nusing this:\n  t < 1\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  v x = real c\n\ngoal (1 subgoal):\n 1. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closest_valid_1:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  defines \"Z \\<equiv> {x \\<in> X . \\<exists> c. I x = Const c}\"\n  assumes \"Z \\<noteq> {}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> Z then I x else if intv_const (I x) = k x then Greater (k x) else Intv (intv_const (I x))\"\n  defines \"r' \\<equiv> r \\<union> {(x,y) . x \\<in> Z \\<and> y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  shows \"valid_region X k I' r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. valid_region X k I' r'", "proof"], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "let ?X\\<^sub>0' = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "let ?S = \"{(x, y). x \\<in> Z \\<and> y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\""], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"?X\\<^sub>0' = ?X\\<^sub>0'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "from assms(8)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have refl: \"refl_on ?X\\<^sub>0 r\" and total: \"total_on ?X\\<^sub>0 r\" and trans: \"trans r\"\n    and valid: \"\\<And> x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x)\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. (refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r &&&\n     total_on {x \\<in> X. \\<exists>d. I x = Intv d} r) &&&\n    trans r &&&\n    (\\<And>x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x))", "by auto"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  trans r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "then"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  trans r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)", "have \"r \\<subseteq> ?X\\<^sub>0 \\<times> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  trans r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                  {x \\<in> X. \\<exists>d. I x = Intv d}", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}. (x, x) \\<in> r)\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  trans r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                  {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "then"], ["proof (chain)\npicking this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"r \\<subseteq> ?X\\<^sub>0' \\<times> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                  {x \\<in> X. \\<exists>d. I' x = Intv d}", "unfolding I'_def Z_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {x \\<in> X.\n                   \\<exists>d.\n                      (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                       then I x\n                       else if intv_const (I x) = k x then Greater (k x)\n                            else Intv (intv_const (I x))) =\n                      Intv d} \\<times>\n                  {x \\<in> X.\n                   \\<exists>d.\n                      (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                       then I x\n                       else if intv_const (I x) = k x then Greater (k x)\n                            else Intv (intv_const (I x))) =\n                      Intv d}", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "moreover"], ["proof (state)\nthis:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "have \"?S \\<subseteq> ?X\\<^sub>0' \\<times> ?X\\<^sub>0'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(x, y).\n     x \\<in> Z \\<and>\n     y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n    \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}", "apply (auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a b uu_.\n       \\<lbrakk>a \\<in> Z; b \\<in> X; intv_const (I a) < k a;\n        I' b = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> a \\<in> X\n 2. \\<And>a b uu_.\n       \\<lbrakk>a \\<in> Z; b \\<in> X; intv_const (I a) < k a;\n        I' b = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> \\<exists>d. I' a = Intv d", "apply (auto simp: Z_def)[]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b uu_.\n       \\<lbrakk>a \\<in> Z; b \\<in> X; intv_const (I a) < k a;\n        I' b = Intv uu_\\<rbrakk>\n       \\<Longrightarrow> \\<exists>d. I' a = Intv d", "apply (auto simp: I'_def)[]"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  {(x, y).\n   x \\<in> Z \\<and>\n   y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n  \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n              {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "ultimately"], ["proof (chain)\npicking this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}\n  {(x, y).\n   x \\<in> Z \\<and>\n   y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n  \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n              {x \\<in> X. \\<exists>d. I' x = Intv d}", "have \"r'\\<subseteq> ?X\\<^sub>0' \\<times> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}\n  {(x, y).\n   x \\<in> Z \\<and>\n   y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n  \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n              {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                   {x \\<in> X. \\<exists>d. I' x = Intv d}", "unfolding r'_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}\n  {(x, y).\n   x \\<in> Z \\<and>\n   y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n  \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n              {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. r \\<union>\n    {(x, y).\n     x \\<in> Z \\<and>\n     y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n    \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I' x = Intv d}", "by auto"], ["proof (state)\nthis:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "then"], ["proof (chain)\npicking this:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}", "show \"refl_on ?X\\<^sub>0' r'\""], ["proof (prove)\nusing this:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                   {x \\<in> X. \\<exists>d. I' x = Intv d} \\<and>\n    (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}. (x, x) \\<in> r')", "proof auto"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "fix x d"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "assume A: \"x \\<in> X\" \"I' x = Intv d\""], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "show \"(x, x) \\<in> r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, x) \\<in> r'", "proof (cases \"x \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "case True"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<in> Z", "have \"intv_const (I x) \\<noteq> k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "by auto"], ["proof (state)\nthis:\n  intv_const (I x) \\<noteq> k x\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "with assms(8) A(1)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x", "have \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x\n\ngoal (1 subgoal):\n 1. intv_const (I x) < k x", "by (fastforce elim!: valid_intv.cases)"], ["proof (state)\nthis:\n  intv_const (I x) < k x\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "with True A"], ["proof (chain)\npicking this:\n  x \\<in> Z\n  x \\<in> X\n  I' x = Intv d\n  intv_const (I x) < k x", "show \"(x,x) \\<in> r'\""], ["proof (prove)\nusing this:\n  x \\<in> Z\n  x \\<in> X\n  I' x = Intv d\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> r'", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  (x, x) \\<in> r'\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "case False"], ["proof (state)\nthis:\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, x) \\<in> r'", "with A refl"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  x \\<notin> Z", "show \"(x,x) \\<in> r'\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> r'", "by (auto simp: I'_def refl_on_def r'_def)"], ["proof (state)\nthis:\n  (x, x) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, x) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n\ngoal (3 subgoals):\n 1. trans r'\n 2. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 3. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"total_on ?X\\<^sub>0' r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'", "unfolding total_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          x \\<noteq> y \\<longrightarrow>\n          (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "proof (standard, standard, standard)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "assume \"x \\<in> ?X\\<^sub>0'\" \"y \\<in> ?X\\<^sub>0'\" \"x \\<noteq> y\""], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  x \\<noteq> y", "obtain d d' where A: \"x\\<in>X\"\"y\\<in>X\"\"I' x = (Intv d)\" \"I' y = (Intv d')\" \"x \\<noteq> y\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. (\\<And>d d'.\n        \\<lbrakk>x \\<in> X; y \\<in> X; I' x = Intv d; I' y = Intv d';\n         x \\<noteq> y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "let ?thesis = \"(x, y) \\<in> r' \\<or> (y, x) \\<in> r'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "proof (cases \"x \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "case True"], ["proof (state)\nthis:\n  x \\<in> Z\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  x \\<in> Z", "have \"intv_const (I x) \\<noteq> k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d\n  (if y \\<notin> Z then I y\n   else if intv_const (I y) = k y then Greater (k y)\n        else Intv (intv_const (I y))) =\n  Intv d'\n  x \\<noteq> y\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) \\<noteq> k x", "by auto"], ["proof (state)\nthis:\n  intv_const (I x) \\<noteq> k x\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with assms(8) A(1)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x", "have \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x\n\ngoal (1 subgoal):\n 1. intv_const (I x) < k x", "by (fastforce elim!: valid_intv.cases)"], ["proof (state)\nthis:\n  intv_const (I x) < k x\n\ngoal (2 subgoals):\n 1. x \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with True A"], ["proof (chain)\npicking this:\n  x \\<in> Z\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  intv_const (I x) < k x", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> Z\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "case F: False"], ["proof (state)\nthis:\n  x \\<notin> Z\n\ngoal (1 subgoal):\n 1. x \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "proof (cases \"y \\<in> Z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "case True"], ["proof (state)\nthis:\n  y \\<in> Z\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  y \\<in> Z", "have \"intv_const (I y) \\<noteq> k y\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I y) \\<noteq> k y", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  (if x \\<notin> Z then I x\n   else if intv_const (I x) = k x then Greater (k x)\n        else Intv (intv_const (I x))) =\n  Intv d\n  (if y \\<notin> Z then I y\n   else if intv_const (I y) = k y then Greater (k y)\n        else Intv (intv_const (I y))) =\n  Intv d'\n  x \\<noteq> y\n  y \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I y) \\<noteq> k y", "by auto"], ["proof (state)\nthis:\n  intv_const (I y) \\<noteq> k y\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with assms(8) A(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  y \\<in> X\n  intv_const (I y) \\<noteq> k y", "have \"intv_const (I y) < k y\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  y \\<in> X\n  intv_const (I y) \\<noteq> k y\n\ngoal (1 subgoal):\n 1. intv_const (I y) < k y", "by (fastforce elim!: valid_intv.cases)"], ["proof (state)\nthis:\n  intv_const (I y) < k y\n\ngoal (2 subgoals):\n 1. y \\<in> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n 2. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with True A"], ["proof (chain)\npicking this:\n  y \\<in> Z\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  intv_const (I y) < k y", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<in> Z\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  intv_const (I y) < k y\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n\ngoal (1 subgoal):\n 1. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "case False"], ["proof (state)\nthis:\n  y \\<notin> Z\n\ngoal (1 subgoal):\n 1. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with A F"], ["proof (chain)\npicking this:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  x \\<notin> Z\n  y \\<notin> Z", "have \"I x = Intv d\" \"I y = Intv d'\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  I' x = Intv d\n  I' y = Intv d'\n  x \\<noteq> y\n  x \\<notin> Z\n  y \\<notin> Z\n\ngoal (1 subgoal):\n 1. I x = Intv d &&& I y = Intv d'", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  I x = Intv d\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. y \\<notin> Z \\<Longrightarrow> (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "with A(1,2,5) total"], ["proof (chain)\npicking this:\n  x \\<in> X\n  y \\<in> X\n  x \\<noteq> y\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  I x = Intv d\n  I y = Intv d'", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  x \\<noteq> y\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  I x = Intv d\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "unfolding total_on_def r'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  x \\<noteq> y\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  I x = Intv d\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. (x, y)\n    \\<in> r \\<union>\n          {(x, y).\n           x \\<in> Z \\<and>\n           y \\<in> X \\<and>\n           intv_const (I x) < k x \\<and> isIntv (I' y)} \\<or>\n    (y, x)\n    \\<in> r \\<union>\n          {(x, y).\n           x \\<in> Z \\<and>\n           y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r' \\<or> (y, x) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n\ngoal (2 subgoals):\n 1. trans r'\n 2. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"trans r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans r'", "unfolding trans_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> r' \\<longrightarrow>\n       (y, z) \\<in> r' \\<longrightarrow> (x, z) \\<in> r'", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "assume A: \"(x, y) \\<in> r'\" \"(y, z) \\<in> r'\""], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n  (y, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "show \"(x, z) \\<in> r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, z) \\<in> r'", "proof (cases \"(x,y) \\<in> r\")"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r'\n 2. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "case True"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r'\n 2. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r", "have \"y \\<notin> Z\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. y \\<notin> Z", "using refl"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. y \\<notin> Z", "unfolding Z_def refl_on_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}. (x, x) \\<in> r)\n\ngoal (1 subgoal):\n 1. y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}", "by auto"], ["proof (state)\nthis:\n  y \\<notin> Z\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r'\n 2. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  y \\<notin> Z", "have \"(y, z) \\<in> r\""], ["proof (prove)\nusing this:\n  y \\<notin> Z\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r", "using A"], ["proof (prove)\nusing this:\n  y \\<notin> Z\n  (x, y) \\<in> r'\n  (y, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r", "unfolding r'_def"], ["proof (prove)\nusing this:\n  y \\<notin> Z\n  (x, y)\n  \\<in> r \\<union>\n        {(x, y).\n         x \\<in> Z \\<and>\n         y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n  (y, z)\n  \\<in> r \\<union>\n        {(x, y).\n         x \\<in> Z \\<and>\n         y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r'\n 2. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "with trans True"], ["proof (chain)\npicking this:\n  trans r\n  (x, y) \\<in> r\n  (y, z) \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  trans r\n  (x, y) \\<in> r\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r'", "unfolding trans_def r'_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n  (x, y) \\<in> r\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, z)\n    \\<in> r \\<union>\n          {(x, y).\n           x \\<in> Z \\<and>\n           y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}", "by blast"], ["proof (state)\nthis:\n  (x, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "case False"], ["proof (state)\nthis:\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "with A(1)"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r'\n  (x, y) \\<notin> r", "have F: \"x \\<in> Z\" \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r'\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. x \\<in> Z &&& intv_const (I x) < k x", "unfolding r'_def"], ["proof (prove)\nusing this:\n  (x, y)\n  \\<in> r \\<union>\n        {(x, y).\n         x \\<in> Z \\<and>\n         y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. x \\<in> Z &&& intv_const (I x) < k x", "by auto"], ["proof (state)\nthis:\n  x \\<in> Z\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "moreover"], ["proof (state)\nthis:\n  x \\<in> Z\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "from A(2) refl"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r'\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "have \"z \\<in> X\" \"isIntv (I' z)\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r'\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. z \\<in> X &&& isIntv (I' z)", "by (auto simp: r'_def refl_on_def) (auto simp: I'_def Z_def)"], ["proof (state)\nthis:\n  z \\<in> X\n  isIntv (I' z)\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> (x, z) \\<in> r'", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> Z\n  intv_const (I x) < k x\n  z \\<in> X\n  isIntv (I' z)", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> Z\n  intv_const (I x) < k x\n  z \\<in> X\n  isIntv (I' z)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r'", "unfolding r'_def"], ["proof (prove)\nusing this:\n  x \\<in> Z\n  intv_const (I x) < k x\n  z \\<in> X\n  isIntv (I' z)\n\ngoal (1 subgoal):\n 1. (x, z)\n    \\<in> r \\<union>\n          {(x, y).\n           x \\<in> Z \\<and>\n           y \\<in> X \\<and> intv_const (I x) < k x \\<and> isIntv (I' y)}", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, z) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trans r'\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"\\<forall>x\\<in>X. valid_intv (k x) (I' x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "proof (auto simp: I'_def intro: valid, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> X; intv_const (I x) \\<noteq> k x; x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x) (Intv (intv_const (I x)))", "case (1 x)"], ["proof (state)\nthis:\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> X; intv_const (I x) \\<noteq> k x; x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x) (Intv (intv_const (I x)))", "with assms(8)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x\n  x \\<in> Z", "have \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  x \\<in> X\n  intv_const (I x) \\<noteq> k x\n  x \\<in> Z\n\ngoal (1 subgoal):\n 1. intv_const (I x) < k x", "by (fastforce elim!: valid_intv.cases)"], ["proof (state)\nthis:\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> X; intv_const (I x) \\<noteq> k x; x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x) (Intv (intv_const (I x)))", "then"], ["proof (chain)\npicking this:\n  intv_const (I x) < k x", "show ?case"], ["proof (prove)\nusing this:\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (Intv (intv_const (I x)))", "by auto"], ["proof (state)\nthis:\n  valid_intv (k x) (Intv (intv_const (I x)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. valid_intv (k x) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closest_prestable_2:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  assumes \"\\<forall> x \\<in> X. \\<not> isConst (I x)\"\n  defines \"X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\"\n  defines \"M \\<equiv> {x \\<in> X\\<^sub>0. \\<forall> y \\<in> X\\<^sub>0. (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> M then I x else Const (intv_const (I x) + 1)\"\n  defines \"r' \\<equiv> {(x,y) \\<in> r. x \\<notin> M \\<and> y \\<notin> M}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  assumes \"M \\<noteq> {}\"\n  shows   \"\\<forall> v \\<in> R. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> R \\<longrightarrow> (\\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> t' \\<ge> 0)\"\n  and     \"\\<forall> v \\<in> region X I' r'. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> R\"\n  and     \"\\<forall> v \\<in> R. \\<forall> t'. {x. x \\<in> X \\<and> (\\<exists> c. I' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> real (c + 1))}\n                  = {x. x \\<in> X \\<and> (\\<exists> c. I x  = Intv c \\<and> v x + t \\<ge> real (c + 1))} - M\"\n  and     \"\\<exists> x \\<in> X. isConst (I' x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>v\\<in>R.\n        \\<forall>t\\<ge>0.\n           v \\<oplus> t \\<notin> R \\<longrightarrow>\n           (\\<exists>t'\\<le>t.\n               v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t') &&&\n     \\<forall>v\\<in>region X I' r'.\n        \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> R) &&&\n    \\<forall>v\\<in>R.\n       \\<forall>t'.\n          {x \\<in> X.\n           \\<exists>c.\n              I' x = Intv c \\<and>\n              real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n          {x \\<in> X.\n           \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n          M &&&\n    \\<exists>x\\<in>X. isConst (I' x)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix v"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume v: \"v \\<in> R\""], ["proof (state)\nthis:\n  v \\<in> R\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix t :: t"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume t: \"t \\<ge> 0\" \"(v \\<oplus> t) \\<notin> R\""], ["proof (state)\nthis:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "note M = assms(10)"], ["proof (state)\nthis:\n  M \\<noteq> {}\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  M \\<noteq> {}", "obtain x c where x: \"x \\<in> M\" \"I x = Intv c\" \"x \\<in> X\" \"x \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<lbrakk>x \\<in> M; I x = Intv c; x \\<in> X;\n         x \\<in> X\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding M_def X\\<^sub>0_def"], ["proof (prove)\nusing this:\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<lbrakk>x \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                          \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                             (x, y) \\<in> r \\<longrightarrow>\n                             (y, x) \\<in> r};\n         I x = Intv c; x \\<in> X; x \\<in> {x \\<in> X. isIntv (I x)}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "let ?t = \"1 - frac (v x)\""], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "let ?v = \"v \\<oplus> ?t\""], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have elem: \"intv_elem x v (I x)\" if \"x \\<in> X\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "using that v"], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "unfolding R_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. intv_elem x v (I x)", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "from assms(9)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have *: \"trans r\" \"total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. trans r &&& total_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "by auto"], ["proof (state)\nthis:\n  trans r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  trans r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "have trans[intro]: \"\\<And>x y z. (x, y) \\<in> r \\<Longrightarrow> (y, z) \\<in> r \\<Longrightarrow> (x, z) \\<in> r\""], ["proof (prove)\nusing this:\n  trans r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r", "unfolding trans_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?y) \\<in> r; (?y, ?z) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> (?x, ?z) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have \"{x \\<in> X. \\<exists>d. I x = Intv d} = X\\<^sub>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} = X\\<^sub>0", "unfolding X\\<^sub>0_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} = {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I x = Intv d} = X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with *(2)"], ["proof (chain)\npicking this:\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  {x \\<in> X. \\<exists>d. I x = Intv d} = X\\<^sub>0", "have total: \"total_on X\\<^sub>0 r\""], ["proof (prove)\nusing this:\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  {x \\<in> X. \\<exists>d. I x = Intv d} = X\\<^sub>0\n\ngoal (1 subgoal):\n 1. total_on X\\<^sub>0 r", "by auto"], ["proof (state)\nthis:\n  total_on X\\<^sub>0 r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "{"], ["proof (state)\nthis:\n  total_on X\\<^sub>0 r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix y"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume y: \"y \\<notin> M\" \"y \\<in> X\\<^sub>0\""], ["proof (state)\nthis:\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have \"\\<not> (x, y) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r", "using x y"], ["proof (prove)\nusing this:\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r", "unfolding M_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X\\<^sub>0.\n           \\<forall>y\\<in>X\\<^sub>0.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<notin> {x \\<in> X\\<^sub>0.\n              \\<forall>y\\<in>X\\<^sub>0.\n                 (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<notin> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "moreover"], ["proof (state)\nthis:\n  (x, y) \\<notin> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with total x y"], ["proof (chain)\npicking this:\n  total_on X\\<^sub>0 r\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n  (x, y) \\<notin> r", "have \"(y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  total_on X\\<^sub>0 r\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X\\<^sub>0.\n     \\<forall>y\\<in>X\\<^sub>0.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "ultimately"], ["proof (chain)\npicking this:\n  (x, y) \\<notin> r\n  (y, x) \\<in> r", "have \"\\<not> (x, y) \\<in> r \\<and> (y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, y) \\<notin> r\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<and> (y, x) \\<in> r", ".."], ["proof (state)\nthis:\n  (x, y) \\<notin> r \\<and> (y, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "note M_max = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix y"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume T1: \"y \\<in> M\" \"x \\<noteq> y\""], ["proof (state)\nthis:\n  y \\<in> M\n  x \\<noteq> y\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  y \\<in> M\n  x \\<noteq> y", "have T2: \"y \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> M\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0", "unfolding M_def"], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X\\<^sub>0.\n           \\<forall>y\\<in>X\\<^sub>0.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with total x T1"], ["proof (chain)\npicking this:\n  total_on X\\<^sub>0 r\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<in> M\n  x \\<noteq> y\n  y \\<in> X\\<^sub>0", "have \"(x, y) \\<in> r \\<or> (y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  total_on X\\<^sub>0 r\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  y \\<in> M\n  x \\<noteq> y\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<or> (y, x) \\<in> r", "by (auto simp: total_on_def)"], ["proof (state)\nthis:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with T1(1) x(1)"], ["proof (chain)\npicking this:\n  y \\<in> M\n  x \\<in> M\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r", "have \"(x, y) \\<in> r\" \"(y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  y \\<in> M\n  x \\<in> M\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r &&& (y, x) \\<in> r", "unfolding M_def"], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X\\<^sub>0.\n           \\<forall>y\\<in>X\\<^sub>0.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  x \\<in> {x \\<in> X\\<^sub>0.\n           \\<forall>y\\<in>X\\<^sub>0.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r &&& (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n  (y, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "note M_eq = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix y"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume y: \"y \\<notin> M\" \"y \\<in> X\\<^sub>0\""], ["proof (state)\nthis:\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with M_max"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n  y \\<notin> M\n  y \\<in> X\\<^sub>0", "have \"\\<not> (x, y) \\<in> r\" \"(y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n  y \\<notin> M\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r &&& (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<notin> r\n  (y, x) \\<in> r\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with v[unfolded R_def] X\\<^sub>0_def x(4) y(2)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (x, y) \\<notin> r\n  (y, x) \\<in> r", "have \"frac (v y) < frac (v x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (x, y) \\<notin> r\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y) < frac (v x)", "by auto"], ["proof (state)\nthis:\n  frac (v y) < frac (v x)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  frac (v y) < frac (v x)", "have \"?t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  frac (v y) < frac (v x)\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) < 1 - frac (v y)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) < 1 - frac (v y)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "note t_bound' = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix y"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume y: \"y \\<in> X\\<^sub>0\""], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have \"?t \\<le> 1 - frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - frac (v x) \\<le> 1 - frac (v y)", "proof (cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)\n 2. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)\n 2. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = y\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) \\<le> 1 - frac (v y)", "by simp"], ["proof (state)\nthis:\n  1 - frac (v x) \\<le> 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "have \"(y, x) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "proof (cases \"y \\<in> M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow> (y, x) \\<in> r\n 2. y \\<notin> M \\<Longrightarrow> (y, x) \\<in> r", "case False"], ["proof (state)\nthis:\n  y \\<notin> M\n\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow> (y, x) \\<in> r\n 2. y \\<notin> M \\<Longrightarrow> (y, x) \\<in> r", "with M_max y"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n  y \\<in> X\\<^sub>0\n  y \\<notin> M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<notin> r \\<and> (?y2, x) \\<in> r\n  y \\<in> X\\<^sub>0\n  y \\<notin> M\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> (y, x) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> (y, x) \\<in> r", "case True"], ["proof (state)\nthis:\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> (y, x) \\<in> r", "with False M_eq y"], ["proof (chain)\npicking this:\n  x \\<noteq> y\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n  y \\<in> X\\<^sub>0\n  y \\<in> M", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<noteq> y\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n  y \\<in> X\\<^sub>0\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "with v[unfolded R_def] X\\<^sub>0_def x(4) y"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (y, x) \\<in> r", "have \"frac (v y) \\<le> frac (v x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac (v x)", "by auto"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac (v x)\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> 1 - frac (v x) \\<le> 1 - frac (v y)", "then"], ["proof (chain)\npicking this:\n  frac (v y) \\<le> frac (v x)", "show \"?t \\<le> 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  frac (v y) \\<le> frac (v x)\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) \\<le> 1 - frac (v y)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) \\<le> 1 - frac (v y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 - frac (v x) \\<le> 1 - frac (v y)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "}"], ["proof (state)\nthis:\n  ?y2 \\<in> X\\<^sub>0 \\<Longrightarrow>\n  1 - frac (v x) \\<le> 1 - frac (v ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "note t_bound''' = this"], ["proof (state)\nthis:\n  ?y2 \\<in> X\\<^sub>0 \\<Longrightarrow>\n  1 - frac (v x) \\<le> 1 - frac (v ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have \"frac (v x) < 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac (v x) < 1", "by (simp add: frac_lt_1)"], ["proof (state)\nthis:\n  frac (v x) < 1\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  frac (v x) < 1", "have \"?t > 0\""], ["proof (prove)\nusing this:\n  frac (v x) < 1\n\ngoal (1 subgoal):\n 1. 0 < 1 - frac (v x)", "by (simp add: x(3))"], ["proof (state)\nthis:\n  0 < 1 - frac (v x)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "{"], ["proof (state)\nthis:\n  0 < 1 - frac (v x)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix c y"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "fix t :: t"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "assume y: \"y \\<notin> M\" \"I y = Intv c\" \"y \\<in> X\" and t: \"t \\<ge> 0\" \"t \\<le> ?t\""], ["proof (state)\nthis:\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)", "have \"y \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0", "unfolding X\\<^sub>0_def"], ["proof (prove)\nusing this:\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. y \\<in> {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with t_bound' y"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n  y \\<in> X\\<^sub>0", "have \"?t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) < 1 - frac (v y)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) < 1 - frac (v y)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with t"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n  1 - frac (v x) < 1 - frac (v y)", "have \"t < 1 - frac (v y)\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n  1 - frac (v x) < 1 - frac (v y)\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v y)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "moreover"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "from elem[OF \\<open>y \\<in> X\\<close>] y"], ["proof (chain)\npicking this:\n  intv_elem y v (I y)\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X", "have \"c < v y\" \"v y < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  y \\<notin> M\n  I y = Intv c\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. real c < v y &&& v y < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v y\n  v y < real (c + 1)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "ultimately"], ["proof (chain)\npicking this:\n  t < 1 - frac (v y)\n  real c < v y\n  v y < real (c + 1)", "have \"(v y + t) < c + 1\""], ["proof (prove)\nusing this:\n  t < 1 - frac (v y)\n  real c < v y\n  v y < real (c + 1)\n\ngoal (1 subgoal):\n 1. v y + t < real (c + 1)", "using frac_add_le_preservation"], ["proof (prove)\nusing this:\n  t < 1 - frac (v y)\n  real c < v y\n  v y < real (c + 1)\n  \\<lbrakk>?a < real ?b; ?d < 1 - frac ?a\\<rbrakk>\n  \\<Longrightarrow> ?a + ?d < real ?b\n\ngoal (1 subgoal):\n 1. v y + t < real (c + 1)", "by blast"], ["proof (state)\nthis:\n  v y + t < real (c + 1)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with \\<open>c < v y\\<close> t"], ["proof (chain)\npicking this:\n  real c < v y\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n  v y + t < real (c + 1)", "have \"intv_elem y (v \\<oplus> t) (I y)\""], ["proof (prove)\nusing this:\n  real c < v y\n  0 \\<le> t\n  t \\<le> 1 - frac (v x)\n  v y + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "by (auto simp: cval_add_def y)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; I ?y2 = Intv ?ca2; ?y2 \\<in> X; 0 \\<le> ?tb2;\n   ?tb2 \\<le> 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> intv_elem ?y2 (v \\<oplus> ?tb2) (I ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "note t_bound = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<notin> M; I ?y2 = Intv ?ca2; ?y2 \\<in> X; 0 \\<le> ?tb2;\n   ?tb2 \\<le> 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> intv_elem ?y2 (v \\<oplus> ?tb2) (I ?y2)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "from elem[OF x(3)] x(2)"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  I x = Intv c", "have v_x: \"c < v x\" \"v x < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x &&& v x < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  real c < v x\n  v x < real (c + 1)", "have \"floor (v x) = c\""], ["proof (prove)\nusing this:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<lfloor>v x\\<rfloor> = int c", "by linarith"], ["proof (state)\nthis:\n  \\<lfloor>v x\\<rfloor> = int c\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  \\<lfloor>v x\\<rfloor> = int c", "have shift: \"v x + ?t = c + 1\""], ["proof (prove)\nusing this:\n  \\<lfloor>v x\\<rfloor> = int c\n\ngoal (1 subgoal):\n 1. v x + (1 - frac (v x)) = real (c + 1)", "unfolding frac_def"], ["proof (prove)\nusing this:\n  \\<lfloor>v x\\<rfloor> = int c\n\ngoal (1 subgoal):\n 1. v x + (1 - (v x - real_of_int \\<lfloor>v x\\<rfloor>)) = real (c + 1)", "by auto"], ["proof (state)\nthis:\n  v x + (1 - frac (v x)) = real (c + 1)\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have \"v x + t \\<ge> c + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (c + 1) \\<le> v x + t", "proof (rule ccontr, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> real (c + 1) \\<le> v x + t \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  \\<not> real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. \\<not> real (c + 1) \\<le> v x + t \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> real (c + 1) \\<le> v x + t", "have AA: \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  \\<not> real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 1)", "by simp"], ["proof (state)\nthis:\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<not> real (c + 1) \\<le> v x + t \\<Longrightarrow> False", "with shift"], ["proof (chain)\npicking this:\n  v x + (1 - frac (v x)) = real (c + 1)\n  v x + t < real (c + 1)", "have lt: \"t < ?t\""], ["proof (prove)\nusing this:\n  v x + (1 - frac (v x)) = real (c + 1)\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. \\<not> real (c + 1) \\<le> v x + t \\<Longrightarrow> False", "let ?v = \"v \\<oplus> t\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> real (c + 1) \\<le> v x + t \\<Longrightarrow> False", "have \"?v \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "from v"], ["proof (chain)\npicking this:\n  v \\<in> R", "have \"\\<forall> x \\<in> X. v x \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "unfolding R_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "with t"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  \\<forall>x\\<in>X. 0 \\<le> v x", "show ?case"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  (\\<lambda>x. v x + t) \\<notin> R\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x + t", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "case (1 y)"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "note A = this"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "with elem"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X", "have e: \"intv_elem y v (I y)\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem y v (I y)", "by auto"], ["proof (state)\nthis:\n  intv_elem y v (I y)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "proof (cases \"y \\<in> M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. y \\<notin> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case False"], ["proof (state)\nthis:\n  y \\<notin> M\n\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. y \\<notin> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "then"], ["proof (chain)\npicking this:\n  y \\<notin> M", "have [simp]: \"I' y = I y\""], ["proof (prove)\nusing this:\n  y \\<notin> M\n\ngoal (1 subgoal):\n 1. I' y = I y", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  I' y = I y\n\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. y \\<notin> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "proof (cases \"I y\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case 1"], ["proof (state)\nthis:\n  I y = Const x1_\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with assms(3) A"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n  y \\<in> X\n  I y = Const x1_", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n  y \\<in> X\n  I y = Const x1_\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "by auto"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case (2 c)"], ["proof (state)\nthis:\n  I y = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "from t_bound[OF False this A t(1)] lt"], ["proof (chain)\npicking this:\n  t \\<le> 1 - frac (v x) \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n  t < 1 - frac (v x)", "show ?case"], ["proof (prove)\nusing this:\n  t \\<le> 1 - frac (v x) \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n  t < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "by (auto simp: cval_add_def 2)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case (3 c)"], ["proof (state)\nthis:\n  I y = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with e"], ["proof (chain)\npicking this:\n  intv_elem y v (I y)\n  I y = Greater c", "have \"v y > c\""], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  I y = Greater c\n\ngoal (1 subgoal):\n 1. real c < v y", "by auto"], ["proof (state)\nthis:\n  real c < v y\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with 3 t(1)"], ["proof (chain)\npicking this:\n  I y = Greater c\n  0 \\<le> t\n  real c < v y", "show ?case"], ["proof (prove)\nusing this:\n  I y = Greater c\n  0 \\<le> t\n  real c < v y\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case True"], ["proof (state)\nthis:\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "then"], ["proof (chain)\npicking this:\n  y \\<in> M", "have \"y \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0", "by (auto simp: M_def)"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "note T = this True"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "proof (cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with M_eq T"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n  y \\<in> X\\<^sub>0\n  y \\<in> M\n  x \\<noteq> y", "have \"(x, y) \\<in> r\" \"(y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n  y \\<in> X\\<^sub>0\n  y \\<in> M\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r &&& (y, x) \\<in> r", "by presburger+"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n  (y, x) \\<in> r\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with v[unfolded R_def] X\\<^sub>0_def x(4) T(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (x, y) \\<in> r\n  (y, x) \\<in> r", "have *: \"frac (v y) = frac (v x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (x, y) \\<in> r\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y) = frac (v x)", "by auto"], ["proof (state)\nthis:\n  frac (v y) = frac (v x)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "from T(1)"], ["proof (chain)\npicking this:\n  y \\<in> X\\<^sub>0", "obtain c where c: \"I y = Intv c\""], ["proof (prove)\nusing this:\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. (\\<And>c. I y = Intv c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: X\\<^sub>0_def)"], ["proof (state)\nthis:\n  I y = Intv c\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with elem T(1)"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X\\<^sub>0\n  I y = Intv c", "have \"c < v y\" \"v y < c + 1\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X\\<^sub>0\n  I y = Intv c\n\ngoal (1 subgoal):\n 1. real c < v y &&& v y < real (c + 1)", "by (fastforce simp: X\\<^sub>0_def)+"], ["proof (state)\nthis:\n  real c < v y\n  v y < real (c + 1)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "then"], ["proof (chain)\npicking this:\n  real c < v y\n  v y < real (c + 1)", "have \"floor (v y) = c\""], ["proof (prove)\nusing this:\n  real c < v y\n  v y < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<lfloor>v y\\<rfloor> = int c", "by linarith"], ["proof (state)\nthis:\n  \\<lfloor>v y\\<rfloor> = int c\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with * lt"], ["proof (chain)\npicking this:\n  frac (v y) = frac (v x)\n  t < 1 - frac (v x)\n  \\<lfloor>v y\\<rfloor> = int c", "have \"(v y + t) < c + 1\""], ["proof (prove)\nusing this:\n  frac (v y) = frac (v x)\n  t < 1 - frac (v x)\n  \\<lfloor>v y\\<rfloor> = int c\n\ngoal (1 subgoal):\n 1. v y + t < real (c + 1)", "unfolding frac_def"], ["proof (prove)\nusing this:\n  v y - real_of_int \\<lfloor>v y\\<rfloor> =\n  v x - real_of_int \\<lfloor>v x\\<rfloor>\n  t < 1 - (v x - real_of_int \\<lfloor>v x\\<rfloor>)\n  \\<lfloor>v y\\<rfloor> = int c\n\ngoal (1 subgoal):\n 1. v y + t < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  v y + t < real (c + 1)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)\n 2. x \\<noteq> y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with \\<open>c < v y\\<close> t"], ["proof (chain)\npicking this:\n  real c < v y\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  v y + t < real (c + 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  real c < v y\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  v y + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "by (auto simp: c cval_add_def)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> t) (I y)", "with \\<open>c < v x\\<close> t AA x"], ["proof (chain)\npicking this:\n  real c < v x\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  v x + t < real (c + 1)\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  x = y", "show ?thesis"], ["proof (prove)\nusing this:\n  real c < v x\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  v x + t < real (c + 1)\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  x = y\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> t) (I y)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> t) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}", "by (auto simp add: X\\<^sub>0_def)"], ["proof (state)\nthis:\n  X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X\\<^sub>0.\n       \\<forall>y\\<in>X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X\\<^sub>0.\n       \\<forall>y\\<in>X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "have \"t > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < t", "proof (rule ccontr, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> 0 < t \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  \\<not> 0 < t\n\ngoal (1 subgoal):\n 1. \\<not> 0 < t \\<Longrightarrow> False", "with t v"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  v \\<in> R\n  \\<not> 0 < t", "show False"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  v \\<in> R\n  \\<not> 0 < t\n\ngoal (1 subgoal):\n 1. False", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  (\\<lambda>x. v x + t) \\<notin> R\n  v \\<in> R\n  \\<not> 0 < t\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < t\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X\\<^sub>0.\n       \\<forall>y\\<in>X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"\\<forall>y\\<in>X\\<^sub>0. \\<forall>z\\<in>X\\<^sub>0. ((y, z) \\<in> r) = (frac ((v \\<oplus> t)y) \\<le> frac ((v \\<oplus> t) z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>X\\<^sub>0.\n       \\<forall>z\\<in>X\\<^sub>0.\n          ((y, z) \\<in> r) =\n          (frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z))", "proof (auto simp: X\\<^sub>0_def, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "case (1 y z d d')"], ["proof (state)\nthis:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "note A = this"], ["proof (state)\nthis:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "from A"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r", "have [simp]: \"y \\<in> X\\<^sub>0\" \"z \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0 &&& z \\<in> X\\<^sub>0", "unfolding X\\<^sub>0_def I'_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. y \\<in> {x \\<in> X. isIntv (I x)} &&& z \\<in> {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n  z \\<in> X\\<^sub>0\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "from A v[unfolded R_def]"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r\n  v \\<in> region X I r", "have le: \"frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  (y, z) \\<in> r\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac (v z)", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac (v z)\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "from t_bound'''"], ["proof (chain)\npicking this:\n  ?y2 \\<in> X\\<^sub>0 \\<Longrightarrow>\n  1 - frac (v x) \\<le> 1 - frac (v ?y2)", "have \"?t \\<le> 1 - frac (v y)\" \"?t \\<le> 1 - frac (v z)\""], ["proof (prove)\nusing this:\n  ?y2 \\<in> X\\<^sub>0 \\<Longrightarrow>\n  1 - frac (v x) \\<le> 1 - frac (v ?y2)\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) \\<le> 1 - frac (v y) &&&\n    1 - frac (v x) \\<le> 1 - frac (v z)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) \\<le> 1 - frac (v y)\n  1 - frac (v x) \\<le> 1 - frac (v z)\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "with lt"], ["proof (chain)\npicking this:\n  t < 1 - frac (v x)\n  1 - frac (v x) \\<le> 1 - frac (v y)\n  1 - frac (v x) \\<le> 1 - frac (v z)", "have \"t < 1 - frac (v y)\" \"t < 1 - frac (v z)\""], ["proof (prove)\nusing this:\n  t < 1 - frac (v x)\n  1 - frac (v x) \\<le> 1 - frac (v y)\n  1 - frac (v x) \\<le> 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v y) &&& t < 1 - frac (v z)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n  t < 1 - frac (v z)\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "with frac_distr[OF \\<open>t > 0\\<close>]"], ["proof (chain)\npicking this:\n  t < 1 - frac ?a \\<Longrightarrow> 0 < frac (?a + t)\n  t < 1 - frac ?a \\<Longrightarrow> frac ?a + t = frac (?a + t)\n  t < 1 - frac (v y)\n  t < 1 - frac (v z)", "have\n          \"frac (v y) + t = frac (v y + t)\" \"frac (v z) + t = frac (v z + t)\""], ["proof (prove)\nusing this:\n  t < 1 - frac ?a \\<Longrightarrow> 0 < frac (?a + t)\n  t < 1 - frac ?a \\<Longrightarrow> frac ?a + t = frac (?a + t)\n  t < 1 - frac (v y)\n  t < 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. frac (v y) + t = frac (v y + t) &&& frac (v z) + t = frac (v z + t)", "by auto"], ["proof (state)\nthis:\n  frac (v y) + t = frac (v y + t)\n  frac (v z) + t = frac (v z + t)\n\ngoal (2 subgoals):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> t) y)\n                         \\<le> frac ((v \\<oplus> t) z)\n 2. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "with le"], ["proof (chain)\npicking this:\n  frac (v y) \\<le> frac (v z)\n  frac (v y) + t = frac (v y + t)\n  frac (v z) + t = frac (v z + t)", "show ?case"], ["proof (prove)\nusing this:\n  frac (v y) \\<le> frac (v z)\n  frac (v y) + t = frac (v y + t)\n  frac (v z) + t = frac (v z + t)\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "case (2 y z d d')"], ["proof (state)\nthis:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "note A = this"], ["proof (state)\nthis:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "from A"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)", "have [simp]: \"y \\<in> X\\<^sub>0\" \"z \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0 &&& z \\<in> X\\<^sub>0", "unfolding X\\<^sub>0_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n\ngoal (1 subgoal):\n 1. y \\<in> {x \\<in> X. isIntv (I x)} &&& z \\<in> {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n  z \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "from t_bound'''"], ["proof (chain)\npicking this:\n  ?y2 \\<in> X\\<^sub>0 \\<Longrightarrow>\n  1 - frac (v x) \\<le> 1 - frac (v ?y2)", "have \"?t \\<le> 1 - frac (v y)\" \"?t \\<le> 1 - frac (v z)\""], ["proof (prove)\nusing this:\n  ?y2 \\<in> X\\<^sub>0 \\<Longrightarrow>\n  1 - frac (v x) \\<le> 1 - frac (v ?y2)\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) \\<le> 1 - frac (v y) &&&\n    1 - frac (v x) \\<le> 1 - frac (v z)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) \\<le> 1 - frac (v y)\n  1 - frac (v x) \\<le> 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "with lt"], ["proof (chain)\npicking this:\n  t < 1 - frac (v x)\n  1 - frac (v x) \\<le> 1 - frac (v y)\n  1 - frac (v x) \\<le> 1 - frac (v z)", "have \"t < 1 - frac (v y)\" \"t < 1 - frac (v z)\""], ["proof (prove)\nusing this:\n  t < 1 - frac (v x)\n  1 - frac (v x) \\<le> 1 - frac (v y)\n  1 - frac (v x) \\<le> 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v y) &&& t < 1 - frac (v z)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v y)\n  t < 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "from frac_add_leD[OF \\<open>t > 0\\<close> this] A(5)"], ["proof (chain)\npicking this:\n  frac (v y + t) \\<le> frac (v z + t) \\<Longrightarrow>\n  frac (v y) \\<le> frac (v z)\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)", "have\n          \"frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  frac (v y + t) \\<le> frac (v z + t) \\<Longrightarrow>\n  frac (v y) \\<le> frac (v z)\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac (v z)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac (v z)\n\ngoal (1 subgoal):\n 1. \\<And>y z uu_ uua_.\n       \\<lbrakk>y \\<in> X; I y = Intv uu_; z \\<in> X; I z = Intv uua_;\n        frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r", "with v[unfolded R_def] A"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n  frac (v y) \\<le> frac (v z)", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  y \\<in> X\n  I y = Intv d\n  z \\<in> X\n  I z = Intv d'\n  frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z)\n  frac (v y) \\<le> frac (v z)\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>X\\<^sub>0.\n     \\<forall>z\\<in>X\\<^sub>0.\n        ((y, z) \\<in> r) =\n        (frac ((v \\<oplus> t) y) \\<le> frac ((v \\<oplus> t) z))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<not> real (c + 1) \\<le> v x + t \\<Longrightarrow> False", "with t R_def"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  R \\<equiv> region X I r\n  v \\<oplus> t \\<in> region X I r", "show False"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  R \\<equiv> region X I r\n  v \\<oplus> t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (c + 1) \\<le> v x + t\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with shift"], ["proof (chain)\npicking this:\n  v x + (1 - frac (v x)) = real (c + 1)\n  real (c + 1) \\<le> v x + t", "have \"t \\<ge> ?t\""], ["proof (prove)\nusing this:\n  v x + (1 - frac (v x)) = real (c + 1)\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) \\<le> t", "by simp"], ["proof (state)\nthis:\n  1 - frac (v x) \\<le> t\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "let ?R = \"region X I' r'\""], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "have \"(v \\<oplus> ?t) \\<in> ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> 1 - frac (v x) \\<in> region X I' r'", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v \\<oplus> 1 - frac (v x)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v \\<oplus> 1 - frac (v x)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "from v"], ["proof (chain)\npicking this:\n  v \\<in> R", "have \"\\<forall> x \\<in> X. v x \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "unfolding R_def"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v \\<oplus> 1 - frac (v x)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "with \\<open>?t > 0\\<close> t"], ["proof (chain)\npicking this:\n  0 < 1 - frac (v x)\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  \\<forall>x\\<in>X. 0 \\<le> v x", "show ?case"], ["proof (prove)\nusing this:\n  0 < 1 - frac (v x)\n  0 \\<le> t\n  v \\<oplus> t \\<notin> R\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v \\<oplus> 1 - frac (v x)) xa", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 < 1 - frac (v x)\n  0 \\<le> t\n  (\\<lambda>x. v x + t) \\<notin> R\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. 0 \\<le> v xa + (1 - frac (v x))", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. 0 \\<le> (v \\<oplus> 1 - frac (v x)) xa\n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)", "case (1 y)"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)", "note A = this"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)", "with elem"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X", "have e: \"intv_elem y v (I y)\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem y v (I y)", "by auto"], ["proof (state)\nthis:\n  intv_elem y v (I y)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "proof (cases \"y \\<in> M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. y \\<notin> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case False"], ["proof (state)\nthis:\n  y \\<notin> M\n\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. y \\<notin> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "then"], ["proof (chain)\npicking this:\n  y \\<notin> M", "have [simp]: \"I' y = I y\""], ["proof (prove)\nusing this:\n  y \\<notin> M\n\ngoal (1 subgoal):\n 1. I' y = I y", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  I' y = I y\n\ngoal (2 subgoals):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. y \\<notin> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "proof (cases \"I y\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case 1"], ["proof (state)\nthis:\n  I y = Const x1_\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with assms(3) A"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n  y \\<in> X\n  I y = Const x1_", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n  y \\<in> X\n  I y = Const x1_\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "by auto"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case (2 c)"], ["proof (state)\nthis:\n  I y = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "from t_bound[OF False this A] \\<open>?t > 0\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 \\<le> ?tb2; ?tb2 \\<le> 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> intv_elem y (v \\<oplus> ?tb2) (I y)\n  0 < 1 - frac (v x)", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?tb2; ?tb2 \\<le> 1 - frac (v x)\\<rbrakk>\n  \\<Longrightarrow> intv_elem y (v \\<oplus> ?tb2) (I y)\n  0 < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "by (auto simp: cval_add_def 2)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case (3 c)"], ["proof (state)\nthis:\n  I y = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with e"], ["proof (chain)\npicking this:\n  intv_elem y v (I y)\n  I y = Greater c", "have \"v y > c\""], ["proof (prove)\nusing this:\n  intv_elem y v (I y)\n  I y = Greater c\n\ngoal (1 subgoal):\n 1. real c < v y", "by auto"], ["proof (state)\nthis:\n  real c < v y\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with 3 \\<open>?t > 0\\<close>"], ["proof (chain)\npicking this:\n  I y = Greater c\n  0 < 1 - frac (v x)\n  real c < v y", "show ?case"], ["proof (prove)\nusing this:\n  I y = Greater c\n  0 < 1 - frac (v x)\n  real c < v y\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case True"], ["proof (state)\nthis:\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "then"], ["proof (chain)\npicking this:\n  y \\<in> M", "have \"y \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> X\\<^sub>0", "by (auto simp: M_def)"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "note T = this True"], ["proof (state)\nthis:\n  y \\<in> X\\<^sub>0\n  y \\<in> M\n\ngoal (1 subgoal):\n 1. y \\<in> M \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "proof (cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with M_eq T(2)"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n  y \\<in> M\n  x \\<noteq> y", "have \"(x, y) \\<in> r\" \"(y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (x, ?y2) \\<in> r\n  \\<lbrakk>?y2 \\<in> M; x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (?y2, x) \\<in> r\n  y \\<in> M\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r &&& (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n  (y, x) \\<in> r\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with v[unfolded R_def] X\\<^sub>0_def x(4) T(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (x, y) \\<in> r\n  (y, x) \\<in> r", "have *: \"frac (v y) = frac (v x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\n  x \\<in> X\\<^sub>0\n  y \\<in> X\\<^sub>0\n  (x, y) \\<in> r\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y) = frac (v x)", "by auto"], ["proof (state)\nthis:\n  frac (v y) = frac (v x)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "from T(1)"], ["proof (chain)\npicking this:\n  y \\<in> X\\<^sub>0", "obtain c where c: \"I y = Intv c\""], ["proof (prove)\nusing this:\n  y \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. (\\<And>c. I y = Intv c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: X\\<^sub>0_def)"], ["proof (state)\nthis:\n  I y = Intv c\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with elem T(1)"], ["proof (chain)\npicking this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X\\<^sub>0\n  I y = Intv c", "have \"c < v y\" \"v y < c + 1\""], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> intv_elem ?x v (I ?x)\n  y \\<in> X\\<^sub>0\n  I y = Intv c\n\ngoal (1 subgoal):\n 1. real c < v y &&& v y < real (c + 1)", "by (fastforce simp: X\\<^sub>0_def)+"], ["proof (state)\nthis:\n  real c < v y\n  v y < real (c + 1)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "then"], ["proof (chain)\npicking this:\n  real c < v y\n  v y < real (c + 1)", "have \"floor (v y) = c\""], ["proof (prove)\nusing this:\n  real c < v y\n  v y < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<lfloor>v y\\<rfloor> = int c", "by linarith"], ["proof (state)\nthis:\n  \\<lfloor>v y\\<rfloor> = int c\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with *"], ["proof (chain)\npicking this:\n  frac (v y) = frac (v x)\n  \\<lfloor>v y\\<rfloor> = int c", "have \"(v y + ?t) = c + 1\""], ["proof (prove)\nusing this:\n  frac (v y) = frac (v x)\n  \\<lfloor>v y\\<rfloor> = int c\n\ngoal (1 subgoal):\n 1. v y + (1 - frac (v x)) = real (c + 1)", "unfolding frac_def"], ["proof (prove)\nusing this:\n  v y - real_of_int \\<lfloor>v y\\<rfloor> =\n  v x - real_of_int \\<lfloor>v x\\<rfloor>\n  \\<lfloor>v y\\<rfloor> = int c\n\ngoal (1 subgoal):\n 1. v y + (1 - (v x - real_of_int \\<lfloor>v x\\<rfloor>)) = real (c + 1)", "by auto"], ["proof (state)\nthis:\n  v y + (1 - frac (v x)) = real (c + 1)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n 2. x \\<noteq> y \\<Longrightarrow>\n    intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with T(2)"], ["proof (chain)\npicking this:\n  y \\<in> M\n  v y + (1 - frac (v x)) = real (c + 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<in> M\n  v y + (1 - frac (v x)) = real (c + 1)\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "by (auto simp: c cval_add_def I'_def)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow> intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "with shift x"], ["proof (chain)\npicking this:\n  v x + (1 - frac (v x)) = real (c + 1)\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  x = y", "show ?thesis"], ["proof (prove)\nusing this:\n  v x + (1 - frac (v x)) = real (c + 1)\n  x \\<in> M\n  I x = Intv c\n  x \\<in> X\n  x \\<in> X\\<^sub>0\n  x = y\n\ngoal (1 subgoal):\n 1. intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)", "by (auto simp: cval_add_def I'_def)"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem y (v \\<oplus> 1 - frac (v x)) (I' y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. intv_elem xa (v \\<oplus> 1 - frac (v x)) (I' xa)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "show \"?X\\<^sub>0 = ?X\\<^sub>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((xa, y) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) xa)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) y))", "show \"\\<forall>y\\<in>?X\\<^sub>0. \\<forall>z\\<in>?X\\<^sub>0. ((y, z) \\<in> r') = (frac ((v \\<oplus> 1 - frac (v x))y) \\<le> frac ((v \\<oplus> 1 - frac (v x)) z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>z\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((y, z) \\<in> r') =\n          (frac ((v \\<oplus> 1 - frac (v x)) y)\n           \\<le> frac ((v \\<oplus> 1 - frac (v x)) z))", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "case (1 y z d d')"], ["proof (state)\nthis:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "note A = this"], ["proof (state)\nthis:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'", "have \"y \\<notin> M\" \"z \\<notin> M\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. y \\<notin> M &&& z \\<notin> M", "unfolding I'_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  (if y \\<notin> M then I y else Const (intv_const (I y) + 1)) = Intv d\n  z \\<in> X\n  (if z \\<notin> M then I z else Const (intv_const (I z) + 1)) = Intv d'\n  (y, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. y \\<notin> M &&& z \\<notin> M", "by auto"], ["proof (state)\nthis:\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n  y \\<notin> M\n  z \\<notin> M", "have [simp]: \"I' y = I y\" \"I' z = I z\" \"y \\<in> X\\<^sub>0\" \"z \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. (I' y = I y &&& I' z = I z) &&& y \\<in> X\\<^sub>0 &&& z \\<in> X\\<^sub>0", "unfolding X\\<^sub>0_def I'_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  (if y \\<notin> M then I y else Const (intv_const (I y) + 1)) = Intv d\n  z \\<in> X\n  (if z \\<notin> M then I z else Const (intv_const (I z) + 1)) = Intv d'\n  (y, z) \\<in> r'\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. ((if y \\<notin> M then I y else Const (intv_const (I y) + 1)) = I y &&&\n     (if z \\<notin> M then I z else Const (intv_const (I z) + 1)) = I z) &&&\n    y \\<in> {x \\<in> X. isIntv (I x)} &&& z \\<in> {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  I' y = I y\n  I' z = I z\n  y \\<in> X\\<^sub>0\n  z \\<in> X\\<^sub>0\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "from A v[unfolded R_def]"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n  v \\<in> region X I r", "have le: \"frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  (y, z) \\<in> r'\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac (v z)", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac (v z)\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "from t_bound' \\<open>y \\<notin> M\\<close> \\<open>z \\<notin> M\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n  y \\<notin> M\n  z \\<notin> M", "have \"?t < 1 - frac (v y)\" \"?t < 1 - frac (v z)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) < 1 - frac (v y) &&& 1 - frac (v x) < 1 - frac (v z)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) < 1 - frac (v y)\n  1 - frac (v x) < 1 - frac (v z)\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "with frac_distr[OF \\<open>?t > 0\\<close>]"], ["proof (chain)\npicking this:\n  1 - frac (v x) < 1 - frac ?a \\<Longrightarrow>\n  0 < frac (?a + (1 - frac (v x)))\n  1 - frac (v x) < 1 - frac ?a \\<Longrightarrow>\n  frac ?a + (1 - frac (v x)) = frac (?a + (1 - frac (v x)))\n  1 - frac (v x) < 1 - frac (v y)\n  1 - frac (v x) < 1 - frac (v z)", "have\n        \"frac (v y) + ?t = frac (v y + ?t)\" \"frac (v z) + ?t = frac (v z + ?t)\""], ["proof (prove)\nusing this:\n  1 - frac (v x) < 1 - frac ?a \\<Longrightarrow>\n  0 < frac (?a + (1 - frac (v x)))\n  1 - frac (v x) < 1 - frac ?a \\<Longrightarrow>\n  frac ?a + (1 - frac (v x)) = frac (?a + (1 - frac (v x)))\n  1 - frac (v x) < 1 - frac (v y)\n  1 - frac (v x) < 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. frac (v y) + (1 - frac (v x)) = frac (v y + (1 - frac (v x))) &&&\n    frac (v z) + (1 - frac (v x)) = frac (v z + (1 - frac (v x)))", "by auto"], ["proof (state)\nthis:\n  frac (v y) + (1 - frac (v x)) = frac (v y + (1 - frac (v x)))\n  frac (v z) + (1 - frac (v x)) = frac (v z + (1 - frac (v x)))\n\ngoal (2 subgoals):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> frac ((v \\<oplus> 1 - frac (v x)) y)\n                         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n 2. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "with le"], ["proof (chain)\npicking this:\n  frac (v y) \\<le> frac (v z)\n  frac (v y) + (1 - frac (v x)) = frac (v y + (1 - frac (v x)))\n  frac (v z) + (1 - frac (v x)) = frac (v z + (1 - frac (v x)))", "show ?case"], ["proof (prove)\nusing this:\n  frac (v y) \\<le> frac (v z)\n  frac (v y) + (1 - frac (v x)) = frac (v y + (1 - frac (v x)))\n  frac (v z) + (1 - frac (v x)) = frac (v z + (1 - frac (v x)))\n\ngoal (1 subgoal):\n 1. frac ((v \\<oplus> 1 - frac (v x)) y)\n    \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "case (2 y z d d')"], ["proof (state)\nthis:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "note A = this"], ["proof (state)\nthis:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)", "have M: \"y \\<notin> M\" \"z \\<notin> M\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n\ngoal (1 subgoal):\n 1. y \\<notin> M &&& z \\<notin> M", "unfolding I'_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  (if y \\<notin> M then I y else Const (intv_const (I y) + 1)) = Intv d\n  z \\<in> X\n  (if z \\<notin> M then I z else Const (intv_const (I z) + 1)) = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n\ngoal (1 subgoal):\n 1. y \\<notin> M &&& z \\<notin> M", "by auto"], ["proof (state)\nthis:\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n  y \\<notin> M\n  z \\<notin> M", "have [simp]: \"I' y = I y\" \"I' z = I z\" \"y \\<in> X\\<^sub>0\" \"z \\<in> X\\<^sub>0\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. (I' y = I y &&& I' z = I z) &&& y \\<in> X\\<^sub>0 &&& z \\<in> X\\<^sub>0", "unfolding X\\<^sub>0_def I'_def"], ["proof (prove)\nusing this:\n  y \\<in> X\n  (if y \\<notin> M then I y else Const (intv_const (I y) + 1)) = Intv d\n  z \\<in> X\n  (if z \\<notin> M then I z else Const (intv_const (I z) + 1)) = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. ((if y \\<notin> M then I y else Const (intv_const (I y) + 1)) = I y &&&\n     (if z \\<notin> M then I z else Const (intv_const (I z) + 1)) = I z) &&&\n    y \\<in> {x \\<in> X. isIntv (I x)} &&& z \\<in> {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  I' y = I y\n  I' z = I z\n  y \\<in> X\\<^sub>0\n  z \\<in> X\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "from t_bound' \\<open>y \\<notin> M\\<close> \\<open>z \\<notin> M\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n  y \\<notin> M\n  z \\<notin> M", "have \"?t < 1 - frac (v y)\" \"?t < 1 - frac (v z)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<notin> M; ?y2 \\<in> X\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> 1 - frac (v x) < 1 - frac (v ?y2)\n  y \\<notin> M\n  z \\<notin> M\n\ngoal (1 subgoal):\n 1. 1 - frac (v x) < 1 - frac (v y) &&& 1 - frac (v x) < 1 - frac (v z)", "by auto"], ["proof (state)\nthis:\n  1 - frac (v x) < 1 - frac (v y)\n  1 - frac (v x) < 1 - frac (v z)\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "from frac_add_leD[OF \\<open>?t > 0\\<close> this] A(5)"], ["proof (chain)\npicking this:\n  frac (v y + (1 - frac (v x)))\n  \\<le> frac (v z + (1 - frac (v x))) \\<Longrightarrow>\n  frac (v y) \\<le> frac (v z)\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)", "have\n        \"frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  frac (v y + (1 - frac (v x)))\n  \\<le> frac (v z + (1 - frac (v x))) \\<Longrightarrow>\n  frac (v y) \\<le> frac (v z)\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac (v z)", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac (v z)\n\ngoal (1 subgoal):\n 1. \\<And>y z d da.\n       \\<lbrakk>y \\<in> X; I' y = Intv d; z \\<in> X; I' z = Intv da;\n        frac ((v \\<oplus> 1 - frac (v x)) y)\n        \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r'", "with v[unfolded R_def] A M"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n  y \\<notin> M\n  z \\<notin> M\n  frac (v y) \\<le> frac (v z)", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  y \\<in> X\n  I' y = Intv d\n  z \\<in> X\n  I' z = Intv d'\n  frac ((v \\<oplus> 1 - frac (v x)) y)\n  \\<le> frac ((v \\<oplus> 1 - frac (v x)) z)\n  y \\<notin> M\n  z \\<notin> M\n  frac (v y) \\<le> frac (v z)\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r'", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  (y, z) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n     \\<forall>z\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n        ((y, z) \\<in> r') =\n        (frac ((v \\<oplus> 1 - frac (v x)) y)\n         \\<le> frac ((v \\<oplus> 1 - frac (v x)) z))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<oplus> 1 - frac (v x) \\<in> region X I' r'\n\ngoal (6 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<notin> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<le>t.\n                            v \\<oplus> t' \\<in> region X I' r' \\<and>\n                            0 \\<le> t'\n 2. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 6. \\<exists>x\\<in>X. isConst (I' x)", "with \\<open>?t > 0\\<close> \\<open>?t \\<le> t\\<close>"], ["proof (chain)\npicking this:\n  0 < 1 - frac (v x)\n  1 - frac (v x) \\<le> t\n  v \\<oplus> 1 - frac (v x) \\<in> region X I' r'", "show \"\\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> 0 \\<le> t'\""], ["proof (prove)\nusing this:\n  0 < 1 - frac (v x)\n  1 - frac (v x) \\<le> t\n  v \\<oplus> 1 - frac (v x) \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'", "by auto"], ["proof (state)\nthis:\n  \\<exists>t'\\<le>t. v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t'\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "fix v t"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "assume A: \"v \\<in> region X I' r'\" \"0 \\<le> t\" \"(v \\<oplus> t) \\<in> R\""], ["proof (state)\nthis:\n  v \\<in> region X I' r'\n  0 \\<le> t\n  v \\<oplus> t \\<in> R\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "from assms(10)"], ["proof (chain)\npicking this:\n  M \\<noteq> {}", "obtain x c where x:\n    \"x \\<in> X\\<^sub>0\" \"I x = Intv c\" \"x \\<in> X\" \"x \\<in> M\""], ["proof (prove)\nusing this:\n  M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<lbrakk>x \\<in> X\\<^sub>0; I x = Intv c; x \\<in> X;\n         x \\<in> M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding M_def X\\<^sub>0_def"], ["proof (prove)\nusing this:\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<lbrakk>x \\<in> {x \\<in> X. isIntv (I x)}; I x = Intv c; x \\<in> X;\n         x \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                     (x, y) \\<in> r \\<longrightarrow>\n                     (y, x) \\<in> r}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  x \\<in> X\\<^sub>0\n  I x = Intv c\n  x \\<in> X\n  x \\<in> M\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "with A(1)"], ["proof (chain)\npicking this:\n  v \\<in> region X I' r'\n  x \\<in> X\\<^sub>0\n  I x = Intv c\n  x \\<in> X\n  x \\<in> M", "have \"intv_elem x v (I' x)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I' r'\n  x \\<in> X\\<^sub>0\n  I x = Intv c\n  x \\<in> X\n  x \\<in> M\n\ngoal (1 subgoal):\n 1. intv_elem x v (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x v (I' x)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "with x"], ["proof (chain)\npicking this:\n  x \\<in> X\\<^sub>0\n  I x = Intv c\n  x \\<in> X\n  x \\<in> M\n  intv_elem x v (I' x)", "have \"v x = c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\\<^sub>0\n  I x = Intv c\n  x \\<in> X\n  x \\<in> M\n  intv_elem x v (I' x)\n\ngoal (1 subgoal):\n 1. v x = real (c + 1)", "unfolding I'_def"], ["proof (prove)\nusing this:\n  x \\<in> X\\<^sub>0\n  I x = Intv c\n  x \\<in> X\n  x \\<in> M\n  intv_elem x v (if x \\<notin> M then I x else Const (intv_const (I x) + 1))\n\ngoal (1 subgoal):\n 1. v x = real (c + 1)", "by auto"], ["proof (state)\nthis:\n  v x = real (c + 1)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "moreover"], ["proof (state)\nthis:\n  v x = real (c + 1)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "from A(3) x(2,3)"], ["proof (chain)\npicking this:\n  v \\<oplus> t \\<in> R\n  I x = Intv c\n  x \\<in> X", "have \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  v \\<oplus> t \\<in> R\n  I x = Intv c\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 1)", "by (fastforce simp: cval_add_def R_def)"], ["proof (state)\nthis:\n  v x + t < real (c + 1)\n\ngoal (5 subgoals):\n 1. \\<And>v t.\n       \\<lbrakk>v \\<in> region X I' r'; 0 \\<le> t;\n        v \\<oplus> t \\<in> R\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 4. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 5. \\<exists>x\\<in>X. isConst (I' x)", "ultimately"], ["proof (chain)\npicking this:\n  v x = real (c + 1)\n  v x + t < real (c + 1)", "show False"], ["proof (prove)\nusing this:\n  v x = real (c + 1)\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. False", "using A(2)"], ["proof (prove)\nusing this:\n  v x = real (c + 1)\n  v x + t < real (c + 1)\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (4 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<exists>x\\<in>X. isConst (I' x)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<exists>x\\<in>X. isConst (I' x)", "case A: (3 v t' x c)"], ["proof (state)\nthis:\n  v \\<in> R\n  x \\<in> X\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (4 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<exists>x\\<in>X. isConst (I' x)", "from A(3)"], ["proof (chain)\npicking this:\n  I' x = Intv c", "have \"I x = Intv c\""], ["proof (prove)\nusing this:\n  I' x = Intv c\n\ngoal (1 subgoal):\n 1. I x = Intv c", "by (auto simp: I'_def) (cases \"x \\<in> M\", auto)"], ["proof (state)\nthis:\n  I x = Intv c\n\ngoal (4 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 4. \\<exists>x\\<in>X. isConst (I' x)", "with A(4)"], ["proof (chain)\npicking this:\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  I x = Intv c", "show ?case"], ["proof (prove)\nusing this:\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t\n\ngoal (3 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<exists>x\\<in>X. isConst (I' x)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<exists>x\\<in>X. isConst (I' x)", "case 4"], ["proof (state)\nthis:\n  v_ \\<in> R\n  x_ \\<in> X\n  I' x_ = Intv c_\n  real (c_ + 1) \\<le> (v_ \\<oplus> t'_) x_ + (t - t'_)\n  x_ \\<in> M\n\ngoal (3 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<in> X; I' x = Intv c;\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t'); x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 3. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  v_ \\<in> R\n  x_ \\<in> X\n  I' x_ = Intv c_\n  real (c_ + 1) \\<le> (v_ \\<oplus> t'_) x_ + (t - t'_)\n  x_ \\<in> M", "show ?case"], ["proof (prove)\nusing this:\n  v_ \\<in> R\n  x_ \\<in> X\n  I' x_ = Intv c_\n  real (c_ + 1) \\<le> (v_ \\<oplus> t'_) x_ + (t - t'_)\n  x_ \\<in> M\n\ngoal (1 subgoal):\n 1. False", "unfolding I'_def"], ["proof (prove)\nusing this:\n  v_ \\<in> R\n  x_ \\<in> X\n  (if x_ \\<notin> M then I x_ else Const (intv_const (I x_) + 1)) = Intv c_\n  real (c_ + 1) \\<le> (v_ \\<oplus> t'_) x_ + (t - t'_)\n  x_ \\<in> M\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<exists>x\\<in>X. isConst (I' x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<exists>x\\<in>X. isConst (I' x)", "case A: (5 v t' x c)"], ["proof (state)\nthis:\n  v \\<in> R\n  x \\<notin> M\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (2 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  v \\<in> R\n  x \\<notin> M\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have \"I' x = Intv c\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  x \\<notin> M\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. I' x = Intv c", "unfolding I'_def"], ["proof (prove)\nusing this:\n  v \\<in> R\n  x \\<notin> M\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. (if x \\<notin> M then I x else Const (intv_const (I x) + 1)) = Intv c", "by auto"], ["proof (state)\nthis:\n  I' x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<exists>x\\<in>X. isConst (I' x)", "moreover"], ["proof (state)\nthis:\n  I' x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<exists>x\\<in>X. isConst (I' x)", "from A"], ["proof (chain)\npicking this:\n  v \\<in> R\n  x \\<notin> M\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have \"real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  x \\<notin> M\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (2 subgoals):\n 1. \\<And>v t' x c.\n       \\<lbrakk>v \\<in> R; x \\<notin> M; x \\<in> X; I x = Intv c;\n        real (c + 1) \\<le> v x + t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c.\n                            I' x = Intv c \\<and>\n                            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n 2. \\<exists>x\\<in>X. isConst (I' x)", "ultimately"], ["proof (chain)\npicking this:\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')", "show ?case"], ["proof (prove)\nusing this:\n  I' x = Intv c\n  real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (1 subgoal):\n 1. \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')", "by blast"], ["proof (state)\nthis:\n  \\<exists>c.\n     I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I' x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I' x)", "from assms(5,10)"], ["proof (chain)\npicking this:\n  M \\<equiv>\n  {x \\<in> X\\<^sub>0.\n   \\<forall>y\\<in>X\\<^sub>0.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  M \\<noteq> {}", "obtain x where x: \"x \\<in> M\""], ["proof (prove)\nusing this:\n  M \\<equiv>\n  {x \\<in> X\\<^sub>0.\n   \\<forall>y\\<in>X\\<^sub>0.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x. x \\<in> M \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  x \\<in> M\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I' x)", "then"], ["proof (chain)\npicking this:\n  x \\<in> M", "have \"isConst (I' x)\""], ["proof (prove)\nusing this:\n  x \\<in> M\n\ngoal (1 subgoal):\n 1. isConst (I' x)", "by (auto simp: I'_def)"], ["proof (state)\nthis:\n  isConst (I' x)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I' x)", "with x"], ["proof (chain)\npicking this:\n  x \\<in> M\n  isConst (I' x)", "show \"\\<exists>x\\<in>X. isConst (I' x)\""], ["proof (prove)\nusing this:\n  x \\<in> M\n  isConst (I' x)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I' x)", "unfolding M_def X\\<^sub>0_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  isConst (I' x)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I' x)", "by force"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isConst (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closest_valid_2:\n  fixes I X k r\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"R \\<equiv> region X I r\"\n  assumes \"\\<forall> x \\<in> X. \\<not> isConst (I x)\"\n  defines \"X\\<^sub>0 \\<equiv> {x \\<in> X. isIntv (I x)}\"\n  defines \"M \\<equiv> {x \\<in> X\\<^sub>0. \\<forall> y \\<in> X\\<^sub>0. (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\"\n  defines \"I'\\<equiv> \\<lambda> x. if x \\<notin> M then I x else Const (intv_const (I x) + 1)\"\n  defines \"r' \\<equiv> {(x,y) \\<in> r. x \\<notin> M \\<and> y \\<notin> M}\"\n  assumes \"finite X\"\n  assumes \"valid_region X k I r\"\n  assumes \"M \\<noteq> {}\"\n  shows \"valid_region X k I' r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. valid_region X k I' r'", "proof"], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "let ?X\\<^sub>0' = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. refl_on ?X\\<^sub>0 r'\n 3. trans r'\n 4. total_on ?X\\<^sub>0 r'\n 5. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"?X\\<^sub>0' = ?X\\<^sub>0'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "from assms(9)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have refl: \"refl_on ?X\\<^sub>0 r\" and total: \"total_on ?X\\<^sub>0 r\" and trans: \"trans r\"\n    and valid: \"\\<And> x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x)\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. (refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r &&&\n     total_on {x \\<in> X. \\<exists>d. I x = Intv d} r) &&&\n    trans r &&&\n    (\\<And>x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x))", "by auto"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  trans r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "have subs: \"r' \\<subseteq> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r' \\<subseteq> r", "unfolding r'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(x, y). (x, y) \\<in> r \\<and> x \\<notin> M \\<and> y \\<notin> M}\n    \\<subseteq> r", "by auto"], ["proof (state)\nthis:\n  r' \\<subseteq> r\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "from refl"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r", "have \"r \\<subseteq> ?X\\<^sub>0 \\<times> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                  {x \\<in> X. \\<exists>d. I x = Intv d}", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}. (x, x) \\<in> r)\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                  {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "then"], ["proof (chain)\npicking this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"r'\\<subseteq> ?X\\<^sub>0' \\<times> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                   {x \\<in> X. \\<exists>d. I' x = Intv d}", "unfolding r'_def I'_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>d. I x = Intv d} \\<times>\n                {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. {(x, y). (x, y) \\<in> r \\<and> x \\<notin> M \\<and> y \\<notin> M}\n    \\<subseteq> {x \\<in> X.\n                 \\<exists>d.\n                    (if x \\<notin> M then I x\n                     else Const (intv_const (I x) + 1)) =\n                    Intv d} \\<times>\n                {x \\<in> X.\n                 \\<exists>d.\n                    (if x \\<notin> M then I x\n                     else Const (intv_const (I x) + 1)) =\n                    Intv d}", "by auto"], ["proof (state)\nthis:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (4 subgoals):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 2. trans r'\n 3. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 4. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "then"], ["proof (chain)\npicking this:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}", "show \"refl_on ?X\\<^sub>0' r'\""], ["proof (prove)\nusing this:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                 {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. r' \\<subseteq> {x \\<in> X. \\<exists>d. I' x = Intv d} \\<times>\n                   {x \\<in> X. \\<exists>d. I' x = Intv d} \\<and>\n    (\\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}. (x, x) \\<in> r')", "proof auto"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "fix x d"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "assume A: \"x \\<in> X\" \"I' x = Intv d\""], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d", "have \"x \\<notin> M\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n\ngoal (1 subgoal):\n 1. x \\<notin> M", "by (force simp: I'_def)"], ["proof (state)\nthis:\n  x \\<notin> M\n\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<notin> M", "have \"I x = Intv d\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  x \\<notin> M\n\ngoal (1 subgoal):\n 1. I x = Intv d", "by (force simp: I'_def)"], ["proof (state)\nthis:\n  I x = Intv d\n\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "with A refl"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  I x = Intv d", "have \"(x,x) \\<in> r\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  refl_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  I x = Intv d\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> r", "by (auto simp: refl_on_def)"], ["proof (state)\nthis:\n  (x, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x d.\n       \\<lbrakk>r' \\<subseteq> {x \\<in> X.\n                                \\<exists>d. I' x = Intv d} \\<times>\n                               {x \\<in> X. \\<exists>d. I' x = Intv d};\n        x \\<in> X; I' x = Intv d\\<rbrakk>\n       \\<Longrightarrow> (x, x) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  (x, x) \\<in> r", "show \"(x, x) \\<in> r'\""], ["proof (prove)\nusing this:\n  (x, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> r'", "by (auto simp: r'_def \\<open>x \\<notin> M\\<close>)"], ["proof (state)\nthis:\n  (x, x) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n\ngoal (3 subgoals):\n 1. trans r'\n 2. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n 3. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"total_on ?X\\<^sub>0' r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'", "unfolding total_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          x \\<noteq> y \\<longrightarrow>\n          (x, y) \\<in> r' \\<or> (y, x) \\<in> r'", "proof (safe, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        x \\<noteq> y; (y, x) \\<notin> r'\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "case (1 x y d d')"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        x \\<noteq> y; (y, x) \\<notin> r'\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "note A = this"], ["proof (state)\nthis:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        x \\<noteq> y; (y, x) \\<notin> r'\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'", "have *: \"x \\<notin> M\" \"y \\<notin> M\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n\ngoal (1 subgoal):\n 1. x \\<notin> M &&& y \\<notin> M", "by (force simp: I'_def)+"], ["proof (state)\nthis:\n  x \\<notin> M\n  y \\<notin> M\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        x \\<noteq> y; (y, x) \\<notin> r'\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with A"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n  x \\<notin> M\n  y \\<notin> M", "have \"I x = Intv d\" \"I y = Intv d'\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n  x \\<notin> M\n  y \\<notin> M\n\ngoal (1 subgoal):\n 1. I x = Intv d &&& I y = Intv d'", "by (force simp: I'_def)+"], ["proof (state)\nthis:\n  I x = Intv d\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        x \\<noteq> y; (y, x) \\<notin> r'\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with A total"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  I x = Intv d\n  I y = Intv d'", "have \"(x, y) \\<in> r \\<or> (y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I' x = Intv d\n  y \\<in> X\n  I' y = Intv d'\n  x \\<noteq> y\n  (y, x) \\<notin> r'\n  total_on {x \\<in> X. \\<exists>d. I x = Intv d} r\n  I x = Intv d\n  I y = Intv d'\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<or> (y, x) \\<in> r", "by (auto simp: total_on_def)"], ["proof (state)\nthis:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x y d da.\n       \\<lbrakk>x \\<in> X; I' x = Intv d; y \\<in> X; I' y = Intv da;\n        x \\<noteq> y; (y, x) \\<notin> r'\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r'", "with A(6) *"], ["proof (chain)\npicking this:\n  (y, x) \\<notin> r'\n  x \\<notin> M\n  y \\<notin> M\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r", "show ?case"], ["proof (prove)\nusing this:\n  (y, x) \\<notin> r'\n  x \\<notin> M\n  y \\<notin> M\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r'", "unfolding r'_def"], ["proof (prove)\nusing this:\n  (y, x)\n  \\<notin> {(x, y). (x, y) \\<in> r \\<and> x \\<notin> M \\<and> y \\<notin> M}\n  x \\<notin> M\n  y \\<notin> M\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y)\n    \\<in> {(x, y). (x, y) \\<in> r \\<and> x \\<notin> M \\<and> y \\<notin> M}", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  total_on {x \\<in> X. \\<exists>d. I' x = Intv d} r'\n\ngoal (2 subgoals):\n 1. trans r'\n 2. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"trans r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans r'", "unfolding trans_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> r' \\<longrightarrow>\n       (y, z) \\<in> r' \\<longrightarrow> (x, z) \\<in> r'", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "assume A: \"(x, y) \\<in> r'\" \"(y, z) \\<in> r'\""], ["proof (state)\nthis:\n  (x, y) \\<in> r'\n  (y, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "from trans"], ["proof (chain)\npicking this:\n  trans r", "have [intro]:\n      \"\\<And> x y z. (x,y) \\<in> r \\<Longrightarrow> (y, z) \\<in> r \\<Longrightarrow> (x, z) \\<in> r\""], ["proof (prove)\nusing this:\n  trans r\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r", "unfolding trans_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?y) \\<in> r; (?y, ?z) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> (?x, ?z) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r'; (y, z) \\<in> r'\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r'", "from A"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r'\n  (y, z) \\<in> r'", "show \"(x, z) \\<in> r'\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r'\n  (y, z) \\<in> r'\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r'", "by (auto simp: r'_def)"], ["proof (state)\nthis:\n  (x, z) \\<in> r'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trans r'\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "show \"\\<forall>x\\<in>X. valid_intv (k x) (I' x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "using valid"], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. valid_intv (k x) (I' x)", "unfolding I'_def"], ["proof (prove)\nusing this:\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X.\n       valid_intv (k x)\n        (if x \\<notin> M then I x else Const (intv_const (I x) + 1))", "proof (auto simp: I'_def intro: valid, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x);\n        x \\<in> X; x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x) (Const (Suc (intv_const (I x))))", "case (1 x)"], ["proof (state)\nthis:\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n  x \\<in> X\n  x \\<in> M\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x);\n        x \\<in> X; x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x) (Const (Suc (intv_const (I x))))", "with assms(9)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n  x \\<in> X\n  x \\<in> M", "have \"intv_const (I x) < k x\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  ?x \\<in> X \\<Longrightarrow> valid_intv (k ?x) (I ?x)\n  x \\<in> X\n  x \\<in> M\n\ngoal (1 subgoal):\n 1. intv_const (I x) < k x", "by (fastforce simp: M_def X\\<^sub>0_def)"], ["proof (state)\nthis:\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>x. x \\<in> X \\<Longrightarrow> valid_intv (k x) (I x);\n        x \\<in> X; x \\<in> M\\<rbrakk>\n       \\<Longrightarrow> valid_intv (k x) (Const (Suc (intv_const (I x))))", "then"], ["proof (chain)\npicking this:\n  intv_const (I x) < k x", "show ?case"], ["proof (prove)\nusing this:\n  intv_const (I x) < k x\n\ngoal (1 subgoal):\n 1. valid_intv (k x) (Const (Suc (intv_const (I x))))", "by auto"], ["proof (state)\nthis:\n  valid_intv (k x) (Const (Suc (intv_const (I x))))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. valid_intv (k x) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Putting the Proof for the 'Set of Regions' Property Together\\<close>"], ["", "subsubsection \\<open>Misc\\<close>"], ["", "lemma total_finite_trans_max:\n  \"X \\<noteq> {} \\<Longrightarrow> finite X \\<Longrightarrow> total_on X r \\<Longrightarrow> trans r \\<Longrightarrow> \\<exists> x \\<in> X. \\<forall> y \\<in> X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>X \\<noteq> {}; finite X; total_on X r; trans r\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x\\<in>X.\n                         \\<forall>y\\<in>X.\n                            x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "proof (induction \"card X\" arbitrary: X)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>X.\n       \\<lbrakk>0 = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. \\<And>x X.\n       \\<lbrakk>\\<And>X.\n                   \\<lbrakk>x = card X; X \\<noteq> {}; finite X;\n                    total_on X r; trans r\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>x\\<in>X.\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r;\n        Suc x = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "case 0"], ["proof (state)\nthis:\n  0 = card X\n  X \\<noteq> {}\n  finite X\n  total_on X r\n  trans r\n\ngoal (2 subgoals):\n 1. \\<And>X.\n       \\<lbrakk>0 = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. \\<And>x X.\n       \\<lbrakk>\\<And>X.\n                   \\<lbrakk>x = card X; X \\<noteq> {}; finite X;\n                    total_on X r; trans r\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>x\\<in>X.\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r;\n        Suc x = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "then"], ["proof (chain)\npicking this:\n  0 = card X\n  X \\<noteq> {}\n  finite X\n  total_on X r\n  trans r", "show ?case"], ["proof (prove)\nusing this:\n  0 = card X\n  X \\<noteq> {}\n  finite X\n  total_on X r\n  trans r\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X.\n     \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x X.\n       \\<lbrakk>\\<And>X.\n                   \\<lbrakk>x = card X; X \\<noteq> {}; finite X;\n                    total_on X r; trans r\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>x\\<in>X.\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r;\n        Suc x = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x X.\n       \\<lbrakk>\\<And>X.\n                   \\<lbrakk>x = card X; X \\<noteq> {}; finite X;\n                    total_on X r; trans r\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>x\\<in>X.\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r;\n        Suc x = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>n = card ?X; ?X \\<noteq> {}; finite ?X; total_on ?X r;\n   trans r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>?X.\n                       \\<forall>y\\<in>?X.\n                          x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n  Suc n = card X\n  X \\<noteq> {}\n  finite X\n  total_on X r\n  trans r\n\ngoal (1 subgoal):\n 1. \\<And>x X.\n       \\<lbrakk>\\<And>X.\n                   \\<lbrakk>x = card X; X \\<noteq> {}; finite X;\n                    total_on X r; trans r\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>x\\<in>X.\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r;\n        Suc x = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>n = card ?X; ?X \\<noteq> {}; finite ?X; total_on ?X r;\n   trans r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>?X.\n                       \\<forall>y\\<in>?X.\n                          x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n  Suc n = card X\n  X \\<noteq> {}\n  finite X\n  total_on X r\n  trans r", "obtain x where x: \"x \\<in> X\""], ["proof (prove)\nusing this:\n  \\<lbrakk>n = card ?X; ?X \\<noteq> {}; finite ?X; total_on ?X r;\n   trans r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>?X.\n                       \\<forall>y\\<in>?X.\n                          x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n  Suc n = card X\n  X \\<noteq> {}\n  finite X\n  total_on X r\n  trans r\n\ngoal (1 subgoal):\n 1. (\\<And>x. x \\<in> X \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x X.\n       \\<lbrakk>\\<And>X.\n                   \\<lbrakk>x = card X; X \\<noteq> {}; finite X;\n                    total_on X r; trans r\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>x\\<in>X.\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r;\n        Suc x = card X; X \\<noteq> {}; finite X; total_on X r;\n        trans r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>X.\n                            \\<forall>y\\<in>X.\n                               x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "proof (cases \"n = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "case True"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "with Suc.hyps(2) \\<open>finite X\\<close> x"], ["proof (chain)\npicking this:\n  Suc n = card X\n  finite X\n  x \\<in> X\n  n = 0", "have \"X = {x}\""], ["proof (prove)\nusing this:\n  Suc n = card X\n  finite X\n  x \\<in> X\n  n = 0\n\ngoal (1 subgoal):\n 1. X = {x}", "by (metis card_Suc_eq empty_iff insertE)"], ["proof (state)\nthis:\n  X = {x}\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "then"], ["proof (chain)\npicking this:\n  X = {x}", "show ?thesis"], ["proof (prove)\nusing this:\n  X = {x}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X.\n     \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "case False"], ["proof (state)\nthis:\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "proof (cases \"\\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>y\\<in>X.\n       x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "case True"], ["proof (state)\nthis:\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<forall>y\\<in>X.\n       x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n 2. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "with x"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X.\n     \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r)", "obtain y where y: \"y \\<in> X\" \"x \\<noteq> y\" \"\\<not> (y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r)\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>y \\<in> X; x \\<noteq> y; (y, x) \\<notin> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "with x Suc.prems(3)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  total_on X r\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r", "have \"(x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  total_on X r\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<forall>x\\<in>X.\n     \\<forall>y\\<in>X.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by blast"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "let ?X = \"X - {x}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "have tot: \"total_on ?X r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. total_on (X - {x}) r", "using \\<open>total_on X r\\<close>"], ["proof (prove)\nusing this:\n  total_on X r\n\ngoal (1 subgoal):\n 1. total_on (X - {x}) r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X.\n     \\<forall>y\\<in>X.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X - {x}.\n       \\<forall>y\\<in>X - {x}.\n          xa \\<noteq> y \\<longrightarrow>\n          (xa, y) \\<in> r \\<or> (y, xa) \\<in> r", "by auto"], ["proof (state)\nthis:\n  total_on (X - {x}) r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "from x Suc.hyps(2) \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  Suc n = card X\n  finite X", "have card: \"n = card ?X\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  Suc n = card X\n  finite X\n\ngoal (1 subgoal):\n 1. n = card (X - {x})", "by auto"], ["proof (state)\nthis:\n  n = card (X - {x})\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "with \\<open>finite X\\<close> \\<open>n \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  finite X\n  n \\<noteq> 0\n  n = card (X - {x})", "have \"?X \\<noteq> {}\""], ["proof (prove)\nusing this:\n  finite X\n  n \\<noteq> 0\n  n = card (X - {x})\n\ngoal (1 subgoal):\n 1. X - {x} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  X - {x} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "from Suc.hyps(1)[OF card this _ tot \\<open>trans r\\<close>] \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite (X - {x}) \\<Longrightarrow>\n  \\<exists>xa\\<in>X - {x}.\n     \\<forall>y\\<in>X - {x}. xa \\<noteq> y \\<longrightarrow> (y, xa) \\<in> r\n  finite X", "obtain x' where\n        IH: \"x' \\<in> ?X\" \"\\<forall> y \\<in> ?X. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\""], ["proof (prove)\nusing this:\n  finite (X - {x}) \\<Longrightarrow>\n  \\<exists>xa\\<in>X - {x}.\n     \\<forall>y\\<in>X - {x}. xa \\<noteq> y \\<longrightarrow> (y, xa) \\<in> r\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>x' \\<in> X - {x};\n         \\<forall>y\\<in>X - {x}.\n            x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x' \\<in> X - {x}\n  \\<forall>y\\<in>X - {x}. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "have \"(x', x) \\<notin> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x', x) \\<notin> r", "proof (rule ccontr, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. (x', x) \\<in> r \\<Longrightarrow> False", "assume A: \"(x', x) \\<in> r\""], ["proof (state)\nthis:\n  (x', x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x', x) \\<in> r \\<Longrightarrow> False", "with y(3)"], ["proof (chain)\npicking this:\n  (y, x) \\<notin> r\n  (x', x) \\<in> r", "have \"x' \\<noteq> y\""], ["proof (prove)\nusing this:\n  (y, x) \\<notin> r\n  (x', x) \\<in> r\n\ngoal (1 subgoal):\n 1. x' \\<noteq> y", "by auto"], ["proof (state)\nthis:\n  x' \\<noteq> y\n\ngoal (1 subgoal):\n 1. (x', x) \\<in> r \\<Longrightarrow> False", "with y IH"], ["proof (chain)\npicking this:\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n  x' \\<in> X - {x}\n  \\<forall>y\\<in>X - {x}. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n  x' \\<noteq> y", "have \"(y, x') \\<in> r\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n  x' \\<in> X - {x}\n  \\<forall>y\\<in>X - {x}. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n  x' \\<noteq> y\n\ngoal (1 subgoal):\n 1. (y, x') \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. (x', x) \\<in> r \\<Longrightarrow> False", "with \\<open>trans r\\<close> A"], ["proof (chain)\npicking this:\n  trans r\n  (x', x) \\<in> r\n  (y, x') \\<in> r", "have \"(y, x) \\<in> r\""], ["proof (prove)\nusing this:\n  trans r\n  (x', x) \\<in> r\n  (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "unfolding trans_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n  (x', x) \\<in> r\n  (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "by blast"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x', x) \\<in> r \\<Longrightarrow> False", "with y"], ["proof (chain)\npicking this:\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n  (y, x) \\<in> r", "show False"], ["proof (prove)\nusing this:\n  y \\<in> X\n  x \\<noteq> y\n  (y, x) \\<notin> r\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x', x) \\<notin> r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "with \\<open>x \\<in> X\\<close> \\<open>x' \\<in> ?X\\<close> \\<open>total_on X r\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  x' \\<in> X - {x}\n  total_on X r\n  (x', x) \\<notin> r", "have \"(x, x') \\<in> r\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  x' \\<in> X - {x}\n  total_on X r\n  (x', x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, x') \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  x' \\<in> X - {x}\n  \\<forall>x\\<in>X.\n     \\<forall>y\\<in>X.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  (x', x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, x') \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, x') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>y\\<in>X.\n               x \\<noteq> y \\<longrightarrow>\n               (y, x) \\<in> r) \\<Longrightarrow>\n    \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "with IH"], ["proof (chain)\npicking this:\n  x' \\<in> X - {x}\n  \\<forall>y\\<in>X - {x}. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n  (x, x') \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  x' \\<in> X - {x}\n  \\<forall>y\\<in>X - {x}. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n  (x, x') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X.\n       \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X.\n     \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X.\n     \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X.\n     \\<forall>y\\<in>X. x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma card_mono_strict_subset:\n  \"finite A \\<Longrightarrow> finite B \\<Longrightarrow> finite C \\<Longrightarrow> A \\<inter> B \\<noteq> {} \\<Longrightarrow> C = A - B \\<Longrightarrow> card C < card A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite A; finite B; finite C; A \\<inter> B \\<noteq> {};\n     C = A - B\\<rbrakk>\n    \\<Longrightarrow> card C < card A", "by (metis Diff_disjoint Diff_subset inf_commute less_le psubset_card_mono)"], ["", "subsubsection \\<open>Proof\\<close>"], ["", "text \\<open>\n  First we show that a shift by a non-negative integer constant means that any two valuations from \n  the same region are being shifted to the same region.\n\\<close>"], ["", "lemma int_shift_equiv:\n  fixes X k fixes t :: int\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"v \\<in> R\" \"v' \\<in> R\" \"R \\<in> \\<R>\" \"t \\<ge> 0\"\n  shows \"(v' \\<oplus> t) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v' \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<in> R\n  v' \\<in> R\n  R \\<in> \\<R>\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. v' \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     v \\<in> R; v' \\<in> R; R \\<in> \\<R>; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v' \\<oplus> real_of_int t\n                      \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "from assms"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<in> R\n  v' \\<in> R\n  R \\<in> \\<R>\n  0 \\<le> t", "obtain I r where A: \"R = region X I r\" \"valid_region X k I r\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<in> R\n  v' \\<in> R\n  R \\<in> \\<R>\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>R = region X I r; valid_region X k I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R = region X I r\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     v \\<in> R; v' \\<in> R; R \\<in> \\<R>; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v' \\<oplus> real_of_int t\n                      \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "from regions_closed[OF _ assms(4,2), of X k t] assms(1,5)"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   0 \\<le> real_of_int t\\<rbrakk>\n  \\<Longrightarrow> [v \\<oplus> real_of_int t]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  0 \\<le> t", "obtain I' r' where RR:\n    \"[v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\" \"valid_region X k I' r'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   0 \\<le> real_of_int t\\<rbrakk>\n  \\<Longrightarrow> [v \\<oplus> real_of_int t]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>[v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r';\n         valid_region X k I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     v \\<in> R; v' \\<in> R; R \\<in> \\<R>; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v' \\<oplus> real_of_int t\n                      \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "from regions_closed'[OF _ assms(4,2), of X k t] assms(1,5)"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   0 \\<le> real_of_int t\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> real_of_int t\n                    \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  0 \\<le> t", "have RR': \"(v \\<oplus> t) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   0 \\<le> real_of_int t\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> real_of_int t\n                    \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     v \\<in> R; v' \\<in> R; R \\<in> \\<R>; 0 \\<le> t\\<rbrakk>\n    \\<Longrightarrow> v' \\<oplus> real_of_int t\n                      \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. v' \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "proof (simp add: RR(1), rule, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v' \\<oplus> real_of_int t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v' \\<oplus> real_of_int t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "from \\<open>v' \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  v' \\<in> R\n  R = region X I r", "have \"\\<forall>x\\<in>X. 0 \\<le> v' x\""], ["proof (prove)\nusing this:\n  v' \\<in> R\n  R = region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v' x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v' x\n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v' \\<oplus> real_of_int t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "with \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v' x", "show ?case"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v' x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v' \\<oplus> real_of_int t) x", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> v' x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v' x + real_of_int t", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v' \\<oplus> real_of_int t) x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "assume x: \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with \\<open>v' \\<in> R\\<close> \\<open>v \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  v' \\<in> R\n  v \\<in> R\n  R = region X I r\n  x \\<in> X", "have I: \"intv_elem x v (I x)\" \"intv_elem x v' (I x)\""], ["proof (prove)\nusing this:\n  v' \\<in> R\n  v \\<in> R\n  R = region X I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem x v (I x) &&& intv_elem x v' (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "from x RR RR'"], ["proof (chain)\npicking this:\n  x \\<in> X\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "have I': \"intv_elem x (v \\<oplus> t) (I' x)\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> real_of_int t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "show \"intv_elem x (v' \\<oplus> t) (I' x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "proof (cases \"I' x\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I' x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "case (Const c)"], ["proof (state)\nthis:\n  I' x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I' x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "from Const I'"], ["proof (chain)\npicking this:\n  I' x = Const c\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)", "have \"v x + t = c\""], ["proof (prove)\nusing this:\n  I' x = Const c\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n\ngoal (1 subgoal):\n 1. v x + real_of_int t = real c", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  I' x = Const c\n  intv_elem x (\\<lambda>x. v x + real_of_int t) (I' x)\n\ngoal (1 subgoal):\n 1. v x + real_of_int t = real c", "by auto"], ["proof (state)\nthis:\n  v x + real_of_int t = real c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I' x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with x A(1) \\<open>v \\<in> R\\<close> \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  R = region X I r\n  v \\<in> R\n  0 \\<le> t\n  v x + real_of_int t = real c", "have *: \"v x = c - nat t\" \"t \\<le> c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  R = region X I r\n  v \\<in> R\n  0 \\<le> t\n  v x + real_of_int t = real c\n\ngoal (1 subgoal):\n 1. v x = real (c - nat t) &&& t \\<le> int c", "by fastforce+"], ["proof (state)\nthis:\n  v x = real (c - nat t)\n  t \\<le> int c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I' x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with \\<open>t \\<ge> 0\\<close> I(1)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  intv_elem x v (I x)\n  v x = real (c - nat t)\n  t \\<le> int c", "have \"I x = Const (c - nat t)\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  intv_elem x v (I x)\n  v x = real (c - nat t)\n  t \\<le> int c\n\ngoal (1 subgoal):\n 1. I x = Const (c - nat t)", "proof (cases \"I x\", auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "case (Greater c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "from RR(2) Const \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  valid_region X k I' r'\n  I' x = Const c\n  x \\<in> X", "have \"c \\<le> k x\""], ["proof (prove)\nusing this:\n  valid_region X k I' r'\n  I' x = Const c\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. c \\<le> k x", "by fastforce"], ["proof (state)\nthis:\n  c \\<le> k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "with Greater * \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  v x = real (c - nat t)\n  t \\<le> int c\n  0 \\<le> t\n  c \\<le> k x", "have *: \"v x \\<le> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  v x = real (c - nat t)\n  t \\<le> int c\n  0 \\<le> t\n  c \\<le> k x\n\ngoal (1 subgoal):\n 1. v x \\<le> real (k x)", "by auto"], ["proof (state)\nthis:\n  v x \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "from Greater A(2) \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  valid_region X k I r\n  x \\<in> X", "have \"c' = k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  valid_region X k I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. c' = k x", "by fastforce"], ["proof (state)\nthis:\n  c' = k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  c' = k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "from I(1) Greater"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  I x = Greater c'", "have \"v x > c'\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < v x", "by auto"], ["proof (state)\nthis:\n  real c' < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; 0 \\<le> t; v x = real (c - nat t);\n        t \\<le> int c; x3 < c - nat t\\<rbrakk>\n       \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  c' = k x\n  real c' < v x", "show False"], ["proof (prove)\nusing this:\n  c' = k x\n  real c' < v x\n\ngoal (1 subgoal):\n 1. False", "using \\<open>c \\<le> k x\\<close> *"], ["proof (prove)\nusing this:\n  c' = k x\n  real c' < v x\n  c \\<le> k x\n  v x \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  I x = Const (c - nat t)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I' x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with I \\<open>t \\<ge> 0\\<close> *(2)"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n  0 \\<le> t\n  t \\<le> int c\n  I x = Const (c - nat t)", "have \"v' x + t = c\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n  0 \\<le> t\n  t \\<le> int c\n  I x = Const (c - nat t)\n\ngoal (1 subgoal):\n 1. v' x + real_of_int t = real c", "by auto"], ["proof (state)\nthis:\n  v' x + real_of_int t = real c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I' x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with Const"], ["proof (chain)\npicking this:\n  I' x = Const c\n  v' x + real_of_int t = real c", "show ?thesis"], ["proof (prove)\nusing this:\n  I' x = Const c\n  v' x + real_of_int t = real c\n\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  I' x = Const c\n  v' x + real_of_int t = real c\n\ngoal (1 subgoal):\n 1. intv_elem x (\\<lambda>x. v' x + real_of_int t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "case (Intv c)"], ["proof (state)\nthis:\n  I' x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with I'"], ["proof (chain)\npicking this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  I' x = Intv c", "have \"c < v x + t\" \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  I' x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x + real_of_int t &&& v x + real_of_int t < real (c + 1)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  intv_elem x (\\<lambda>x. v x + real_of_int t) (I' x)\n  I' x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x + real_of_int t &&& v x + real_of_int t < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v x + real_of_int t\n  v x + real_of_int t < real (c + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with x A(1) \\<open>v \\<in> R\\<close> \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  R = region X I r\n  v \\<in> R\n  0 \\<le> t\n  real c < v x + real_of_int t\n  v x + real_of_int t < real (c + 1)", "have\n          *: \"c - nat t < v x\" \"v x < c - nat t + 1\" \"t \\<le> c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  R = region X I r\n  v \\<in> R\n  0 \\<le> t\n  real c < v x + real_of_int t\n  v x + real_of_int t < real (c + 1)\n\ngoal (1 subgoal):\n 1. real (c - nat t) < v x &&& v x < real (c - nat t + 1) &&& t \\<le> int c", "by fastforce+"], ["proof (state)\nthis:\n  real (c - nat t) < v x\n  v x < real (c - nat t + 1)\n  t \\<le> int c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with I"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n  real (c - nat t) < v x\n  v x < real (c - nat t + 1)\n  t \\<le> int c", "have \"I x = Intv (c - nat t)\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n  real (c - nat t) < v x\n  v x < real (c - nat t + 1)\n  t \\<le> int c\n\ngoal (1 subgoal):\n 1. I x = Intv (c - nat t)", "proof (cases \"I x\", auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "case (Greater c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "from RR(2) Intv \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  valid_region X k I' r'\n  I' x = Intv c\n  x \\<in> X", "have \"c < k x\""], ["proof (prove)\nusing this:\n  valid_region X k I' r'\n  I' x = Intv c\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. c < k x", "by fastforce"], ["proof (state)\nthis:\n  c < k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "with Greater *"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  real (c - nat t) < v x\n  v x < real (c - nat t + 1)\n  t \\<le> int c\n  c < k x", "have *: \"v x \\<le> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  real (c - nat t) < v x\n  v x < real (c - nat t + 1)\n  t \\<le> int c\n  c < k x\n\ngoal (1 subgoal):\n 1. v x \\<le> real (k x)", "by auto"], ["proof (state)\nthis:\n  v x \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "from Greater A(2) \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  valid_region X k I r\n  x \\<in> X", "have \"c' = k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  valid_region X k I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. c' = k x", "by fastforce"], ["proof (state)\nthis:\n  c' = k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  c' = k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "from I(1) Greater"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  I x = Greater c'", "have \"v x > c'\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < v x", "by auto"], ["proof (state)\nthis:\n  real c' < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       \\<lbrakk>I x = Greater x3; real (c - nat t) < v x;\n        v x < 1 + real (c - nat t); t \\<le> int c; real x3 < v x;\n        real x3 < v' x\\<rbrakk>\n       \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  c' = k x\n  real c' < v x", "show False"], ["proof (prove)\nusing this:\n  c' = k x\n  real c' < v x\n\ngoal (1 subgoal):\n 1. False", "using \\<open>c < k x\\<close> *"], ["proof (prove)\nusing this:\n  c' = k x\n  real c' < v x\n  c < k x\n  v x \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  I x = Intv (c - nat t)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with I \\<open>t \\<le> c\\<close>"], ["proof (chain)\npicking this:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n  t \\<le> int c\n  I x = Intv (c - nat t)", "have \"c < v' x + nat t\" \"v' x + t < c + 1\""], ["proof (prove)\nusing this:\n  intv_elem x v (I x)\n  intv_elem x v' (I x)\n  t \\<le> int c\n  I x = Intv (c - nat t)\n\ngoal (1 subgoal):\n 1. real c < v' x + real (nat t) &&& v' x + real_of_int t < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real c < v' x + real (nat t)\n  v' x + real_of_int t < real (c + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I' x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with Intv \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  I' x = Intv c\n  0 \\<le> t\n  real c < v' x + real (nat t)\n  v' x + real_of_int t < real (c + 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  I' x = Intv c\n  0 \\<le> t\n  real c < v' x + real (nat t)\n  v' x + real_of_int t < real (c + 1)\n\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  I' x = Intv c\n  0 \\<le> t\n  real c < v' x + real (nat t)\n  v' x + real_of_int t < real (c + 1)\n\ngoal (1 subgoal):\n 1. intv_elem x (\\<lambda>x. v' x + real_of_int t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "case (Greater c)"], ["proof (state)\nthis:\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with I'"], ["proof (chain)\npicking this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  I' x = Greater c", "have *: \"c < v x + t\""], ["proof (prove)\nusing this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. real c < v x + real_of_int t", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  intv_elem x (\\<lambda>x. v x + real_of_int t) (I' x)\n  I' x = Greater c\n\ngoal (1 subgoal):\n 1. real c < v x + real_of_int t", "by auto"], ["proof (state)\nthis:\n  real c < v x + real_of_int t\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I' x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "proof (cases \"I x\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "case (Const c')"], ["proof (state)\nthis:\n  I x = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with x A(1) I(2) \\<open>v \\<in> R\\<close> \\<open>v' \\<in> R\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  R = region X I r\n  intv_elem x v' (I x)\n  v \\<in> R\n  v' \\<in> R\n  I x = Const c'", "have \"v x = v' x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  R = region X I r\n  intv_elem x v' (I x)\n  v \\<in> R\n  v' \\<in> R\n  I x = Const c'\n\ngoal (1 subgoal):\n 1. v x = v' x", "by fastforce"], ["proof (state)\nthis:\n  v x = v' x\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with Greater *"], ["proof (chain)\npicking this:\n  I' x = Greater c\n  real c < v x + real_of_int t\n  v x = v' x", "show ?thesis"], ["proof (prove)\nusing this:\n  I' x = Greater c\n  real c < v x + real_of_int t\n  v x = v' x\n\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  I' x = Greater c\n  real c < v x + real_of_int t\n  v x = v' x\n\ngoal (1 subgoal):\n 1. intv_elem x (\\<lambda>x. v' x + real_of_int t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "case (Intv c')"], ["proof (state)\nthis:\n  I x = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with x A(1) I(2) \\<open>v \\<in> R\\<close> \\<open>v' \\<in> R\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  R = region X I r\n  intv_elem x v' (I x)\n  v \\<in> R\n  v' \\<in> R\n  I x = Intv c'", "have **: \"c' < v x\" \"v x < c' + 1\" \"c' < v' x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  R = region X I r\n  intv_elem x v' (I x)\n  v \\<in> R\n  v' \\<in> R\n  I x = Intv c'\n\ngoal (1 subgoal):\n 1. real c' < v x &&& v x < real (c' + 1) &&& real c' < v' x", "by fastforce+"], ["proof (state)\nthis:\n  real c' < v x\n  v x < real (c' + 1)\n  real c' < v' x\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "then"], ["proof (chain)\npicking this:\n  real c' < v x\n  v x < real (c' + 1)\n  real c' < v' x", "have \"c' + t < v x + t\" \"v x + t < c' + t + 1\""], ["proof (prove)\nusing this:\n  real c' < v x\n  v x < real (c' + 1)\n  real c' < v' x\n\ngoal (1 subgoal):\n 1. real_of_int (int c' + t) < v x + real_of_int t &&&\n    v x + real_of_int t < real_of_int (int c' + t + 1)", "by auto"], ["proof (state)\nthis:\n  real_of_int (int c' + t) < v x + real_of_int t\n  v x + real_of_int t < real_of_int (int c' + t + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with *"], ["proof (chain)\npicking this:\n  real c < v x + real_of_int t\n  real_of_int (int c' + t) < v x + real_of_int t\n  v x + real_of_int t < real_of_int (int c' + t + 1)", "have \"c \\<le> c' + t\""], ["proof (prove)\nusing this:\n  real c < v x + real_of_int t\n  real_of_int (int c' + t) < v x + real_of_int t\n  v x + real_of_int t < real_of_int (int c' + t + 1)\n\ngoal (1 subgoal):\n 1. int c \\<le> int c' + t", "by auto"], ["proof (state)\nthis:\n  int c \\<le> int c' + t\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with **(3)"], ["proof (chain)\npicking this:\n  real c' < v' x\n  int c \\<le> int c' + t", "have \"v' x + t > c\""], ["proof (prove)\nusing this:\n  real c' < v' x\n  int c \\<le> int c' + t\n\ngoal (1 subgoal):\n 1. real c < v' x + real_of_int t", "by auto"], ["proof (state)\nthis:\n  real c < v' x + real_of_int t\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with Greater *"], ["proof (chain)\npicking this:\n  I' x = Greater c\n  real c < v x + real_of_int t\n  real c < v' x + real_of_int t", "show ?thesis"], ["proof (prove)\nusing this:\n  I' x = Greater c\n  real c < v x + real_of_int t\n  real c < v' x + real_of_int t\n\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  I' x = Greater c\n  real c < v x + real_of_int t\n  real c < v' x + real_of_int t\n\ngoal (1 subgoal):\n 1. intv_elem x (\\<lambda>x. v' x + real_of_int t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "fix c'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "assume c': \"I x = Greater c'\""], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with x A(1) I(2) \\<open>v \\<in> R\\<close> \\<open>v' \\<in> R\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  R = region X I r\n  intv_elem x v' (I x)\n  v \\<in> R\n  v' \\<in> R\n  I x = Greater c'", "have **: \"c' < v x\" \"c' < v' x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  R = region X I r\n  intv_elem x v' (I x)\n  v \\<in> R\n  v' \\<in> R\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < v x &&& real c' < v' x", "by fastforce+"], ["proof (state)\nthis:\n  real c' < v x\n  real c' < v' x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "from Greater RR(2) c' A(2) \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  I' x = Greater c\n  valid_region X k I' r'\n  I x = Greater c'\n  valid_region X k I r\n  x \\<in> X", "have \"c' = k x\" \"c = k x\""], ["proof (prove)\nusing this:\n  I' x = Greater c\n  valid_region X k I' r'\n  I x = Greater c'\n  valid_region X k I r\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. c' = k x &&& c = k x", "by fastforce+"], ["proof (state)\nthis:\n  c' = k x\n  c = k x\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "with \\<open>t \\<ge> 0\\<close> **(2) Greater"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  real c' < v' x\n  I' x = Greater c\n  c' = k x\n  c = k x", "show \"intv_elem x (v' \\<oplus> real_of_int t) (I' x)\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  real c' < v' x\n  I' x = Greater c\n  c' = k x\n  c = k x\n\ngoal (1 subgoal):\n 1. intv_elem x (v' \\<oplus> real_of_int t) (I' x)", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  real c' < v' x\n  I' x = Greater c\n  c' = k x\n  c = k x\n\ngoal (1 subgoal):\n 1. intv_elem x (\\<lambda>x. v' x + real_of_int t) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x (v' \\<oplus> real_of_int t) (I' x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>01 = {x \\<in> X. \\<exists>d. I' x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>01.\n       \\<forall>y\\<in>?X\\<^sub>01.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "show \"{x \\<in> X. \\<exists>d. I' x = Intv d} = {x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I' x = Intv d} =\n    {x \\<in> X. \\<exists>d. I' x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I' x = Intv d} =\n  {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I' x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "fix x y :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "have \"frac (x + t) \\<le> frac (y + t) \\<longleftrightarrow> frac x \\<le> frac y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (x + real_of_int t) \\<le> frac (y + real_of_int t)) =\n    (frac x \\<le> frac y)", "by (simp add: frac_def)"], ["proof (state)\nthis:\n  (frac (x + real_of_int t) \\<le> frac (y + real_of_int t)) =\n  (frac x \\<le> frac y)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "}"], ["proof (state)\nthis:\n  (frac (?x2 + real_of_int t) \\<le> frac (?y2 + real_of_int t)) =\n  (frac ?x2 \\<le> frac ?y2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "note frac_equiv = this"], ["proof (state)\nthis:\n  (frac (?x2 + real_of_int t) \\<le> frac (?y2 + real_of_int t)) =\n  (frac ?x2 \\<le> frac ?y2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "{"], ["proof (state)\nthis:\n  (frac (?x2 + real_of_int t) \\<le> frac (?y2 + real_of_int t)) =\n  (frac ?x2 \\<le> frac ?y2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "have \"frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y) \\<longleftrightarrow> frac (v x) \\<le> frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac ((v \\<oplus> real_of_int t) x)\n     \\<le> frac ((v \\<oplus> real_of_int t) y)) =\n    (frac (v x) \\<le> frac (v y))", "unfolding cval_add_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (v x + real_of_int t) \\<le> frac (v y + real_of_int t)) =\n    (frac (v x) \\<le> frac (v y))", "using frac_equiv"], ["proof (prove)\nusing this:\n  (frac (?x2 + real_of_int t) \\<le> frac (?y2 + real_of_int t)) =\n  (frac ?x2 \\<le> frac ?y2)\n\ngoal (1 subgoal):\n 1. (frac (v x + real_of_int t) \\<le> frac (v y + real_of_int t)) =\n    (frac (v x) \\<le> frac (v y))", "by auto"], ["proof (state)\nthis:\n  (frac ((v \\<oplus> real_of_int t) x)\n   \\<le> frac ((v \\<oplus> real_of_int t) y)) =\n  (frac (v x) \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "}"], ["proof (state)\nthis:\n  (frac ((v \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v \\<oplus> real_of_int t) ?y2)) =\n  (frac (v ?x2) \\<le> frac (v ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "note frac_equiv' = this"], ["proof (state)\nthis:\n  (frac ((v \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v \\<oplus> real_of_int t) ?y2)) =\n  (frac (v ?x2) \\<le> frac (v ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "{"], ["proof (state)\nthis:\n  (frac ((v \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v \\<oplus> real_of_int t) ?y2)) =\n  (frac (v ?x2) \\<le> frac (v ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "have \"frac ((v' \\<oplus> t) x) \\<le> frac ((v' \\<oplus> t) y) \\<longleftrightarrow> frac (v' x) \\<le> frac (v' y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac ((v' \\<oplus> real_of_int t) x)\n     \\<le> frac ((v' \\<oplus> real_of_int t) y)) =\n    (frac (v' x) \\<le> frac (v' y))", "unfolding cval_add_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (v' x + real_of_int t) \\<le> frac (v' y + real_of_int t)) =\n    (frac (v' x) \\<le> frac (v' y))", "using frac_equiv"], ["proof (prove)\nusing this:\n  (frac (?x2 + real_of_int t) \\<le> frac (?y2 + real_of_int t)) =\n  (frac ?x2 \\<le> frac ?y2)\n\ngoal (1 subgoal):\n 1. (frac (v' x + real_of_int t) \\<le> frac (v' y + real_of_int t)) =\n    (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac ((v' \\<oplus> real_of_int t) x)\n   \\<le> frac ((v' \\<oplus> real_of_int t) y)) =\n  (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "}"], ["proof (state)\nthis:\n  (frac ((v' \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v' \\<oplus> real_of_int t) ?y2)) =\n  (frac (v' ?x2) \\<le> frac (v' ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "note frac_equiv'' = this"], ["proof (state)\nthis:\n  (frac ((v' \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v' \\<oplus> real_of_int t) ?y2)) =\n  (frac (v' ?x2) \\<le> frac (v' ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "{"], ["proof (state)\nthis:\n  (frac ((v' \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v' \\<oplus> real_of_int t) ?y2)) =\n  (frac (v' ?x2) \\<le> frac (v' ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "assume x: \"x \\<in> X\" and y: \"y \\<in> X\" and B: \"\\<not> isGreater(I x)\" \"\\<not> isGreater(I y)\""], ["proof (state)\nthis:\n  x \\<in> X\n  y \\<in> X\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "have \"frac (v x) \\<le> frac (v y) \\<longleftrightarrow> frac (v' x) \\<le> frac (v' y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "proof (cases \"I x\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "case (Const c)"], ["proof (state)\nthis:\n  I x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with x \\<open>v \\<in> R\\<close> \\<open>v' \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> R\n  v' \\<in> R\n  R = region X I r\n  I x = Const c", "have \"v x = c\" \"v' x = c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> R\n  v' \\<in> R\n  R = region X I r\n  I x = Const c\n\ngoal (1 subgoal):\n 1. v x = real c &&& v' x = real c", "by fastforce+"], ["proof (state)\nthis:\n  v x = real c\n  v' x = real c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "then"], ["proof (chain)\npicking this:\n  v x = real c\n  v' x = real c", "have \"frac (v x) \\<le> frac (v y)\" \"frac (v' x) \\<le> frac (v' y)\""], ["proof (prove)\nusing this:\n  v x = real c\n  v' x = real c\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y) &&& frac (v' x) \\<le> frac (v' y)", "by(simp add: frac_def)+"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n  frac (v' x) \\<le> frac (v' y)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "then"], ["proof (chain)\npicking this:\n  frac (v x) \\<le> frac (v y)\n  frac (v' x) \\<le> frac (v' y)", "show ?thesis"], ["proof (prove)\nusing this:\n  frac (v x) \\<le> frac (v y)\n  frac (v' x) \\<le> frac (v' y)\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "case (Intv c)"], ["proof (state)\nthis:\n  I x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with x \\<open>v \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> R\n  R = region X I r\n  I x = Intv c", "have v: \"c < v x\" \"v x < c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> R\n  R = region X I r\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x &&& v x < real (c + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "from Intv x \\<open>v' \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  I x = Intv c\n  x \\<in> X\n  v' \\<in> R\n  R = region X I r", "have v':\"c < v' x\" \"v' x < c + 1\""], ["proof (prove)\nusing this:\n  I x = Intv c\n  x \\<in> X\n  v' \\<in> R\n  R = region X I r\n\ngoal (1 subgoal):\n 1. real c < v' x &&& v' x < real (c + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c < v' x\n  v' x < real (c + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "proof (cases \"I y\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "case (Const c')"], ["proof (state)\nthis:\n  I y = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with y \\<open>v \\<in> R\\<close> \\<open>v' \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  y \\<in> X\n  v \\<in> R\n  v' \\<in> R\n  R = region X I r\n  I y = Const c'", "have \"v y = c'\" \"v' y = c'\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  v \\<in> R\n  v' \\<in> R\n  R = region X I r\n  I y = Const c'\n\ngoal (1 subgoal):\n 1. v y = real c' &&& v' y = real c'", "by fastforce+"], ["proof (state)\nthis:\n  v y = real c'\n  v' y = real c'\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "then"], ["proof (chain)\npicking this:\n  v y = real c'\n  v' y = real c'", "have \"frac (v y) = 0\" \"frac (v' y) = 0\""], ["proof (prove)\nusing this:\n  v y = real c'\n  v' y = real c'\n\ngoal (1 subgoal):\n 1. frac (v y) = 0 &&& frac (v' y) = 0", "by auto"], ["proof (state)\nthis:\n  frac (v y) = 0\n  frac (v' y) = 0\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with nat_intv_frac_gt0[OF v] nat_intv_frac_gt0[OF v']"], ["proof (chain)\npicking this:\n  0 < frac (v x)\n  0 < frac (v' x)\n  frac (v y) = 0\n  frac (v' y) = 0", "have \"\\<not> frac (v x) \\<le> frac (v y)\" \"\\<not> frac (v' x) \\<le> frac (v' y)\""], ["proof (prove)\nusing this:\n  0 < frac (v x)\n  0 < frac (v' x)\n  frac (v y) = 0\n  frac (v' y) = 0\n\ngoal (1 subgoal):\n 1. \\<not> frac (v x) \\<le> frac (v y) &&&\n    \\<not> frac (v' x) \\<le> frac (v' y)", "by linarith+"], ["proof (state)\nthis:\n  \\<not> frac (v x) \\<le> frac (v y)\n  \\<not> frac (v' x) \\<le> frac (v' y)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I y = Const x1 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 3. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "then"], ["proof (chain)\npicking this:\n  \\<not> frac (v x) \\<le> frac (v y)\n  \\<not> frac (v' x) \\<le> frac (v' y)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> frac (v x) \\<le> frac (v y)\n  \\<not> frac (v' x) \\<le> frac (v' y)\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "case 2: (Intv c')"], ["proof (state)\nthis:\n  I y = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with x y Intv \\<open>v \\<in> R\\<close> \\<open>v' \\<in> R\\<close> A(1)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  y \\<in> X\n  I x = Intv c\n  v \\<in> R\n  v' \\<in> R\n  R = region X I r\n  I y = Intv c'", "have\n            \"(x, y) \\<in> r \\<longleftrightarrow> frac (v x) \\<le> frac (v y)\"\n            \"(x, y) \\<in> r \\<longleftrightarrow> frac (v' x) \\<le> frac (v' y)\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  y \\<in> X\n  I x = Intv c\n  v \\<in> R\n  v' \\<in> R\n  R = region X I r\n  I y = Intv c'\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y)) &&&\n    ((x, y) \\<in> r) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n  ((x, y) \\<in> r) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I y = Intv x2 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n 2. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "then"], ["proof (chain)\npicking this:\n  ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n  ((x, y) \\<in> r) = (frac (v' x) \\<le> frac (v' y))", "show ?thesis"], ["proof (prove)\nusing this:\n  ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n  ((x, y) \\<in> r) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "case Greater"], ["proof (state)\nthis:\n  I y = Greater x3_\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I y = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with B"], ["proof (chain)\npicking this:\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n  I y = Greater x3_", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n  I y = Greater x3_\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "case Greater"], ["proof (state)\nthis:\n  I x = Greater x3_\n\ngoal (1 subgoal):\n 1. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "with B"], ["proof (chain)\npicking this:\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n  I x = Greater x3_", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n  I x = Greater x3_\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> X; ?y2 \\<in> X; \\<not> isGreater (I ?x2);\n   \\<not> isGreater (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?x2) \\<le> frac (v ?y2)) =\n                    (frac (v' ?x2) \\<le> frac (v' ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "note frac_cong = this"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> X; ?y2 \\<in> X; \\<not> isGreater (I ?x2);\n   \\<not> isGreater (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?x2) \\<le> frac (v ?y2)) =\n                    (frac (v' ?x2) \\<le> frac (v' ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "have not_greater: \"\\<not> isGreater (I x)\" if x: \"x \\<in> X\" \"\\<not> isGreater (I' x)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> isGreater (I x)", "proof (rule ccontr, auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "case (1 c)"], ["proof (state)\nthis:\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "with x \\<open>v \\<in> R\\<close> A(1,2)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<not> isGreater (I' x)\n  v \\<in> R\n  R = region X I r\n  valid_region X k I r\n  I x = Greater c", "have \"c < v x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<not> isGreater (I' x)\n  v \\<in> R\n  R = region X I r\n  valid_region X k I r\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. real c < v x", "by fastforce+"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "from x A(2) 1"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<not> isGreater (I' x)\n  valid_region X k I r\n  I x = Greater c", "have \"c = k x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<not> isGreater (I' x)\n  valid_region X k I r\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. c = k x", "by fastforce+"], ["proof (state)\nthis:\n  c = k x\n\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  real c < v x\n  c = k x", "have *: \"k x < v x + t\""], ["proof (prove)\nusing this:\n  real c < v x\n  c = k x\n\ngoal (1 subgoal):\n 1. real (k x) < v x + real_of_int t", "using \\<open>t \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  real c < v x\n  c = k x\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. real (k x) < v x + real_of_int t", "by simp"], ["proof (state)\nthis:\n  real (k x) < v x + real_of_int t\n\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "from RR(1,2) RR' x"], ["proof (chain)\npicking this:\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n  x \\<in> X\n  \\<not> isGreater (I' x)", "have I': \"intv_elem x (v \\<oplus> t) (I' x)\" \"valid_intv (k x) (I' x)\""], ["proof (prove)\nusing this:\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n  x \\<in> X\n  \\<not> isGreater (I' x)\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> real_of_int t) (I' x) &&&\n    valid_intv (k x) (I' x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  valid_intv (k x) (I' x)\n\ngoal (1 subgoal):\n 1. \\<And>uu_. I x = Greater uu_ \\<Longrightarrow> False", "from x"], ["proof (chain)\npicking this:\n  x \\<in> X\n  \\<not> isGreater (I' x)", "show False"], ["proof (prove)\nusing this:\n  x \\<in> X\n  \\<not> isGreater (I' x)\n\ngoal (1 subgoal):\n 1. False", "proof (cases \"I' x\", auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<not> isGreater (Const x1); I' x = Const x1;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x2.\n       \\<lbrakk>\\<not> isGreater (Intv x2); I' x = Intv x2;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False", "case (Const c')"], ["proof (state)\nthis:\n  I' x = Const c'\n\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<not> isGreater (Const x1); I' x = Const x1;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x2.\n       \\<lbrakk>\\<not> isGreater (Intv x2); I' x = Intv x2;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False", "with I' *"], ["proof (chain)\npicking this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  valid_intv (k x) (I' x)\n  real (k x) < v x + real_of_int t\n  I' x = Const c'", "show False"], ["proof (prove)\nusing this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  valid_intv (k x) (I' x)\n  real (k x) < v x + real_of_int t\n  I' x = Const c'\n\ngoal (1 subgoal):\n 1. False", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       \\<lbrakk>\\<not> isGreater (Intv x2); I' x = Intv x2;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       \\<lbrakk>\\<not> isGreater (Intv x2); I' x = Intv x2;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False", "case (Intv c')"], ["proof (state)\nthis:\n  I' x = Intv c'\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       \\<lbrakk>\\<not> isGreater (Intv x2); I' x = Intv x2;\n        x \\<in> X\\<rbrakk>\n       \\<Longrightarrow> False", "with I' *"], ["proof (chain)\npicking this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  valid_intv (k x) (I' x)\n  real (k x) < v x + real_of_int t\n  I' x = Intv c'", "show False"], ["proof (prove)\nusing this:\n  intv_elem x (v \\<oplus> real_of_int t) (I' x)\n  valid_intv (k x) (I' x)\n  real (k x) < v x + real_of_int t\n  I' x = Intv c'\n\ngoal (1 subgoal):\n 1. False", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?x \\<in> X; \\<not> isGreater (I' ?x)\\<rbrakk>\n  \\<Longrightarrow> \\<not> isGreater (I ?x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "show \"\\<forall> x \\<in> ?X\\<^sub>0. \\<forall>y \\<in> ?X\\<^sub>0. ((x, y) \\<in> r') = (frac ((v' \\<oplus> t) x) \\<le> frac ((v' \\<oplus> t) y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n          ((x, y) \\<in> r') =\n          (frac ((v' \\<oplus> real_of_int t) x)\n           \\<le> frac ((v' \\<oplus> real_of_int t) y))", "proof (standard, standard)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "assume x: \"x \\<in> ?X\\<^sub>0\" and y: \"y \\<in> ?X\\<^sub>0\""], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "then"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}", "have B: \"\\<not> isGreater (I' x)\" \"\\<not> isGreater (I' y)\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<not> isGreater (I' x) &&& \\<not> isGreater (I' y)", "by auto"], ["proof (state)\nthis:\n  \\<not> isGreater (I' x)\n  \\<not> isGreater (I' y)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "with x y not_greater"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  \\<lbrakk>?x \\<in> X; \\<not> isGreater (I' ?x)\\<rbrakk>\n  \\<Longrightarrow> \\<not> isGreater (I ?x)\n  \\<not> isGreater (I' x)\n  \\<not> isGreater (I' y)", "have \"\\<not> isGreater (I x)\" \"\\<not> isGreater (I y)\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  \\<lbrakk>?x \\<in> X; \\<not> isGreater (I' ?x)\\<rbrakk>\n  \\<Longrightarrow> \\<not> isGreater (I ?x)\n  \\<not> isGreater (I' x)\n  \\<not> isGreater (I' y)\n\ngoal (1 subgoal):\n 1. \\<not> isGreater (I x) &&& \\<not> isGreater (I y)", "by auto"], ["proof (state)\nthis:\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "with x y frac_cong"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  \\<lbrakk>?x2 \\<in> X; ?y2 \\<in> X; \\<not> isGreater (I ?x2);\n   \\<not> isGreater (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?x2) \\<le> frac (v ?y2)) =\n                    (frac (v' ?x2) \\<le> frac (v' ?y2))\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)", "have \"frac (v x) \\<le> frac (v y) \\<longleftrightarrow> frac (v' x) \\<le> frac (v' y)\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  \\<lbrakk>?x2 \\<in> X; ?y2 \\<in> X; \\<not> isGreater (I ?x2);\n   \\<not> isGreater (I ?y2)\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?x2) \\<le> frac (v ?y2)) =\n                    (frac (v' ?x2) \\<le> frac (v' ?y2))\n  \\<not> isGreater (I x)\n  \\<not> isGreater (I y)\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))", "by auto"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "moreover"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "from x y RR(1) RR'"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>", "have \"(x, y) \\<in> r' \\<longleftrightarrow> frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\n  [v \\<oplus> real_of_int t]\\<^sub>\\<R> = region X I' r'\n  v \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r') =\n    (frac ((v \\<oplus> real_of_int t) x)\n     \\<le> frac ((v \\<oplus> real_of_int t) y))", "by fastforce"], ["proof (state)\nthis:\n  ((x, y) \\<in> r') =\n  (frac ((v \\<oplus> real_of_int t) x)\n   \\<le> frac ((v \\<oplus> real_of_int t) y))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I' x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r') =\n                         (frac ((v' \\<oplus> real_of_int t) x)\n                          \\<le> frac ((v' \\<oplus> real_of_int t) y))", "ultimately"], ["proof (chain)\npicking this:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n  ((x, y) \\<in> r') =\n  (frac ((v \\<oplus> real_of_int t) x)\n   \\<le> frac ((v \\<oplus> real_of_int t) y))", "show \"(x, y) \\<in> r' \\<longleftrightarrow> frac ((v' \\<oplus> t) x) \\<le> frac ((v' \\<oplus> t) y)\""], ["proof (prove)\nusing this:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n  ((x, y) \\<in> r') =\n  (frac ((v \\<oplus> real_of_int t) x)\n   \\<le> frac ((v \\<oplus> real_of_int t) y))\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r') =\n    (frac ((v' \\<oplus> real_of_int t) x)\n     \\<le> frac ((v' \\<oplus> real_of_int t) y))", "using frac_equiv' frac_equiv''"], ["proof (prove)\nusing this:\n  (frac (v x) \\<le> frac (v y)) = (frac (v' x) \\<le> frac (v' y))\n  ((x, y) \\<in> r') =\n  (frac ((v \\<oplus> real_of_int t) x)\n   \\<le> frac ((v \\<oplus> real_of_int t) y))\n  (frac ((v \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v \\<oplus> real_of_int t) ?y2)) =\n  (frac (v ?x2) \\<le> frac (v ?y2))\n  (frac ((v' \\<oplus> real_of_int t) ?x2)\n   \\<le> frac ((v' \\<oplus> real_of_int t) ?y2)) =\n  (frac (v' ?x2) \\<le> frac (v' ?y2))\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r') =\n    (frac ((v' \\<oplus> real_of_int t) x)\n     \\<le> frac ((v' \\<oplus> real_of_int t) y))", "by blast"], ["proof (state)\nthis:\n  ((x, y) \\<in> r') =\n  (frac ((v' \\<oplus> real_of_int t) x)\n   \\<le> frac ((v' \\<oplus> real_of_int t) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I' x = Intv d}.\n        ((x, y) \\<in> r') =\n        (frac ((v' \\<oplus> real_of_int t) x)\n         \\<le> frac ((v' \\<oplus> real_of_int t) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v' \\<oplus> real_of_int t \\<in> [v \\<oplus> real_of_int t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Now, we can use the 'immediate' induction proposed by P. Bouyer for shifts smaller than one.\n  The induction principle is not at all obvious: the induction is over the set of clocks for\n  which the valuation is shifted beyond the current interval boundaries.\n  Using the two successor operations, we can see that either the set of these clocks remains the\n  same (Z ~= {}) or strictly decreases (Z = {}).\n\\<close>"], ["", "lemma set_of_regions_lt_1:\n  fixes X k I r t v\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  defines \"C \\<equiv> {x. x \\<in> X \\<and> (\\<exists> c. I x = Intv c \\<and> v x + t \\<ge> c + 1)}\"\n  assumes \"valid_region X k I r\" \"v \\<in> region X I r\" \"v' \\<in> region X I r\" \"finite X\" \"0 \\<le> t\" \"t < 1\"\n  shows \"\\<exists> t'\\<ge>0. (v' \\<oplus> t') \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  C \\<equiv>\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n  valid_region X k I r\n  v \\<in> region X I r\n  v' \\<in> region X I r\n  finite X\n  0 \\<le> t\n  t < 1\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (induction \"card C\" arbitrary: C I r v v' t rule: less_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case less"], ["proof (state)\nthis:\n  \\<lbrakk>card\n            {x \\<in> X.\n             \\<exists>c. ?I x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\n           < card\n              {x \\<in> X.\n               \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t};\n   \\<R> = {region X I r |I r. valid_region X k I r}; valid_region X k ?I ?r;\n   ?v \\<in> region X ?I ?r; ?v' \\<in> region X ?I ?r; finite X; 0 \\<le> ?t;\n   ?t < 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v' \\<oplus> t' \\<in> [?v \\<oplus> ?t]\\<^sub>\\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I r\n  v \\<in> region X I r\n  v' \\<in> region X I r\n  finite X\n  0 \\<le> t\n  t < 1\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R = \"region X I r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C = \"{x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from less"], ["proof (chain)\npicking this:\n  \\<lbrakk>card\n            {x \\<in> X.\n             \\<exists>c. ?I x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\n           < card\n              {x \\<in> X.\n               \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t};\n   \\<R> = {region X I r |I r. valid_region X k I r}; valid_region X k ?I ?r;\n   ?v \\<in> region X ?I ?r; ?v' \\<in> region X ?I ?r; finite X; 0 \\<le> ?t;\n   ?t < 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v' \\<oplus> t' \\<in> [?v \\<oplus> ?t]\\<^sub>\\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I r\n  v \\<in> region X I r\n  v' \\<in> region X I r\n  finite X\n  0 \\<le> t\n  t < 1", "have R: \"?R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>card\n            {x \\<in> X.\n             \\<exists>c. ?I x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\n           < card\n              {x \\<in> X.\n               \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t};\n   \\<R> = {region X I r |I r. valid_region X k I r}; valid_region X k ?I ?r;\n   ?v \\<in> region X ?I ?r; ?v' \\<in> region X ?I ?r; finite X; 0 \\<le> ?t;\n   ?t < 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v' \\<oplus> t' \\<in> [?v \\<oplus> ?t]\\<^sub>\\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I r\n  v \\<in> region X I r\n  v' \\<in> region X I r\n  finite X\n  0 \\<le> t\n  t < 1\n\ngoal (1 subgoal):\n 1. region X I r \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  region X I r \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  region X I r \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "fix v I k r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "fix t :: t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume no_consts: \"\\<forall>x\\<in>X. \\<not>isConst (I x)\""], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume v: \"v \\<in> region X I r\""], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume t: \"t \\<ge> 0\""], ["proof (state)\nthis:\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C = \"{x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume C: \"?C = {}\""], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R = \"region X I r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"(v \\<oplus> t) \\<in> ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r", "proof (rule, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n 2. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "with \\<open>t \\<ge> 0\\<close> \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  v \\<in> region X I r", "show ?case"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> (v \\<oplus> t) x\n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)", "proof (standard, case_tac \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "case (1 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x x1.\n       \\<lbrakk>x \\<in> X; I x = Const x1\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 3. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "with no_consts"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n  x \\<in> X\n  I x = Const c", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n  x \\<in> X\n  I x = Const c\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I x)", "by auto"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I x)\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "case (2 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "with \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Intv c", "have \"c < v x\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x", "by fastforce"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "with \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  real c < v x", "have \"c < v x + t\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  real c < v x\n\ngoal (1 subgoal):\n 1. real c < v x + t", "by auto"], ["proof (state)\nthis:\n  real c < v x + t\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "moreover"], ["proof (state)\nthis:\n  real c < v x + t\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "from 2 C"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}", "have \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 1)", "by fastforce"], ["proof (state)\nthis:\n  v x + t < real (c + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x x2.\n       \\<lbrakk>x \\<in> X; I x = Intv x2\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)\n 2. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "ultimately"], ["proof (chain)\npicking this:\n  real c < v x + t\n  v x + t < real (c + 1)", "show ?case"], ["proof (prove)\nusing this:\n  real c < v x + t\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I x)", "by (auto simp: 2 cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I x)\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "case (3 x c)"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "with \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Greater c", "have \"c < v x\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. real c < v x", "by fastforce"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "with \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  real c < v x", "have \"c < v x + t\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  real c < v x\n\ngoal (1 subgoal):\n 1. real c < v x + t", "by auto"], ["proof (state)\nthis:\n  real c < v x + t\n\ngoal (1 subgoal):\n 1. \\<And>x x3.\n       \\<lbrakk>x \\<in> X; I x = Greater x3\\<rbrakk>\n       \\<Longrightarrow> intv_elem x (v \\<oplus> t) (I x)", "then"], ["proof (chain)\npicking this:\n  real c < v x + t", "show ?case"], ["proof (prove)\nusing this:\n  real c < v x + t\n\ngoal (1 subgoal):\n 1. intv_elem x (v \\<oplus> t) (I x)", "by (auto simp: 3 cval_add_def)"], ["proof (state)\nthis:\n  intv_elem x (v \\<oplus> t) (I x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. intv_elem x (v \\<oplus> t) (I x)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>x\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"{x \\<in> X. \\<exists>d. I x = Intv d} = {x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>d. I x = Intv d} =\n    {x \\<in> X. \\<exists>d. I x = Intv d}", ".."], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>d. I x = Intv d} =\n  {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "fix x d :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "fix c:: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "assume A: \"c < x\" \"x + d < c + 1\" \"d \\<ge> 0\""], ["proof (state)\nthis:\n  real c < x\n  x + d < real (c + 1)\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "then"], ["proof (chain)\npicking this:\n  real c < x\n  x + d < real (c + 1)\n  0 \\<le> d", "have \"d < 1 - frac x\""], ["proof (prove)\nusing this:\n  real c < x\n  x + d < real (c + 1)\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. d < 1 - frac x", "unfolding frac_def"], ["proof (prove)\nusing this:\n  real c < x\n  x + d < real (c + 1)\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. d < 1 - (x - real_of_int \\<lfloor>x\\<rfloor>)", "using floor_eq3 of_nat_Suc"], ["proof (prove)\nusing this:\n  real c < x\n  x + d < real (c + 1)\n  0 \\<le> d\n  \\<lbrakk>real ?n < ?x; ?x < real (Suc ?n)\\<rbrakk>\n  \\<Longrightarrow> nat \\<lfloor>?x\\<rfloor> = ?n\n  of_nat (Suc ?m) = (1::?'a) + of_nat ?m\n\ngoal (1 subgoal):\n 1. d < 1 - (x - real_of_int \\<lfloor>x\\<rfloor>)", "by fastforce"], ["proof (state)\nthis:\n  d < 1 - frac x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>real ?c2 < ?x2; ?x2 + ?d2 < real (?c2 + 1); 0 \\<le> ?d2\\<rbrakk>\n  \\<Longrightarrow> ?d2 < 1 - frac ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "note intv_frac = this"], ["proof (state)\nthis:\n  \\<lbrakk>real ?c2 < ?x2; ?x2 + ?d2 < real (?c2 + 1); 0 \\<le> ?d2\\<rbrakk>\n  \\<Longrightarrow> ?d2 < 1 - frac ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "{"], ["proof (state)\nthis:\n  \\<lbrakk>real ?c2 < ?x2; ?x2 + ?d2 < real (?c2 + 1); 0 \\<le> ?d2\\<rbrakk>\n  \\<Longrightarrow> ?d2 < 1 - frac ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "assume x: \"x \\<in> ?X\\<^sub>0\""], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "then"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "obtain c where x: \"x \\<in> X\" \"I x = Intv c\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>x \\<in> X; I x = Intv c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "with \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Intv c", "have *: \"c < v x\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. real c < v x", "by fastforce"], ["proof (state)\nthis:\n  real c < v x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "with \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  real c < v x", "have \"c < v x + t\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  real c < v x\n\ngoal (1 subgoal):\n 1. real c < v x + t", "by auto"], ["proof (state)\nthis:\n  real c < v x + t\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "from x C"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}", "have \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "from intv_frac[OF * this \\<open>t \\<ge> 0\\<close>]"], ["proof (chain)\npicking this:\n  t < 1 - frac (v x)", "have \"t < 1 - frac (v x) \""], ["proof (prove)\nusing this:\n  t < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. t < 1 - frac (v x)", "by auto"], ["proof (state)\nthis:\n  t < 1 - frac (v x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n  t < 1 - frac (v ?x2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "note intv_frac = this"], ["proof (state)\nthis:\n  ?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n  t < 1 - frac (v ?x2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "{"], ["proof (state)\nthis:\n  ?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d} \\<Longrightarrow>\n  t < 1 - frac (v ?x2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "assume x: \"x \\<in> ?X\\<^sub>0\" and y: \"y \\<in> ?X\\<^sub>0\""], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "from frac_add_leIFF[OF \\<open>t \\<ge> 0\\<close> intv_frac[OF x] intv_frac[OF y]]"], ["proof (chain)\npicking this:\n  (frac (v x) \\<le> frac (v y)) = (frac (v x + t) \\<le> frac (v y + t))", "have \"frac (v x) \\<le> frac (v y) \\<longleftrightarrow> frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\""], ["proof (prove)\nusing this:\n  (frac (v x) \\<le> frac (v y)) = (frac (v x + t) \\<le> frac (v y + t))\n\ngoal (1 subgoal):\n 1. (frac (v x) \\<le> frac (v y)) =\n    (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  (frac (v x) \\<le> frac (v y)) =\n  (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?x2) \\<le> frac (v ?y2)) =\n                    (frac ((v \\<oplus> t) ?x2)\n                     \\<le> frac ((v \\<oplus> t) ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "note frac_cong = this"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n   ?y2 \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?x2) \\<le> frac (v ?y2)) =\n                    (frac ((v \\<oplus> t) ?x2)\n                     \\<le> frac ((v \\<oplus> t) ?y2))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "show \"\\<forall> x \\<in> ?X\\<^sub>0. \\<forall> y \\<in> ?X\\<^sub>0. (x, y) \\<in> r \\<longleftrightarrow> frac ((v  \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n          ((x, y) \\<in> r) =\n          (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "proof (standard, standard, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r) =\n                         (frac ((v \\<oplus> t) x)\n                          \\<le> frac ((v \\<oplus> t) y))", "case (1 x y)"], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r) =\n                         (frac ((v \\<oplus> t) x)\n                          \\<le> frac ((v \\<oplus> t) y))", "with \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}", "have \"(x, y) \\<in> r \\<longleftrightarrow> frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n  y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "by auto"], ["proof (state)\nthis:\n  ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {x \\<in> X. \\<exists>d. I x = Intv d};\n        y \\<in> {x \\<in> X. \\<exists>d. I x = Intv d}\\<rbrakk>\n       \\<Longrightarrow> ((x, y) \\<in> r) =\n                         (frac ((v \\<oplus> t) x)\n                          \\<le> frac ((v \\<oplus> t) y))", "with frac_cong[OF 1]"], ["proof (chain)\npicking this:\n  (frac (v x) \\<le> frac (v y)) =\n  (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n  ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))", "show ?case"], ["proof (prove)\nusing this:\n  (frac (v x) \\<le> frac (v y)) =\n  (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n  ((x, y) \\<in> r) = (frac (v x) \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r) =\n    (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))", "by simp"], ["proof (state)\nthis:\n  ((x, y) \\<in> r) = (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>d. I x = Intv d}.\n        ((x, y) \\<in> r) =\n        (frac ((v \\<oplus> t) x) \\<le> frac ((v \\<oplus> t) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isConst (?Ib2 x);\n   ?vb2 \\<in> region X ?Ib2 ?rb2; 0 \\<le> ?tb2;\n   {x \\<in> X.\n    \\<exists>c. ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2} =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?vb2 \\<oplus> ?tb2 \\<in> region X ?Ib2 ?rb2\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "note critical_empty_intro = this"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isConst (?Ib2 x);\n   ?vb2 \\<in> region X ?Ib2 ?rb2; 0 \\<le> ?tb2;\n   {x \\<in> X.\n    \\<exists>c. ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2} =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?vb2 \\<oplus> ?tb2 \\<in> region X ?Ib2 ?rb2\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>x\\<in>X. \\<not> isConst (?Ib2 x);\n   ?vb2 \\<in> region X ?Ib2 ?rb2; 0 \\<le> ?tb2;\n   {x \\<in> X.\n    \\<exists>c. ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2} =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?vb2 \\<oplus> ?tb2 \\<in> region X ?Ib2 ?rb2\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume const: \"\\<exists>x\\<in>X. isConst (I x)\""], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume t: \"t > 0\""], ["proof (state)\nthis:\n  0 < t\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from const"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>X. isConst (I x)", "have \"{x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from closest_prestable_1[OF this less.prems(4) less(3)] R closest_valid_1[OF this less.prems(4) less(3)]"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<and>\n           0 \\<le> t'\n  \\<forall>v\\<in>region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}).\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>x\\<in>X.\n     \\<not> isConst\n             (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n              else if intv_const (I x) = k x then Greater (k x)\n                   else Intv (intv_const (I x)))\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                then I x\n                else if intv_const (I x) = k x then Greater (k x)\n                     else Intv (intv_const (I x))) =\n               Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  region X I r \\<in> \\<R>\n  valid_region X k\n   (\\<lambda>x.\n       if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n       else if intv_const (I x) = k x then Greater (k x)\n            else Intv (intv_const (I x)))\n   (r \\<union>\n    {(x, y).\n     x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n     y \\<in> X \\<and>\n     intv_const (I x) < k x \\<and>\n     isIntv\n      (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I y\n       else if intv_const (I y) = k y then Greater (k y)\n            else Intv (intv_const (I y)))})", "obtain I'' r''\n      where   stability: \"\\<forall> v \\<in> ?R. \\<forall> t>0. \\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I'' r'' \\<and> t' \\<ge> 0\"\n      and succ_not_refl: \"\\<forall> v \\<in> region X I'' r''. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> ?R\"\n      and no_consts:     \"\\<forall> x \\<in> X. \\<not> isConst (I'' x)\"\n      and crit_mono:     \"\\<forall> v \\<in> ?R. \\<forall> t < 1. \\<forall> t' \\<ge> 0. (v \\<oplus> t') \\<in> region X I'' r''\n                          \\<longrightarrow> {x. x \\<in> X \\<and> (\\<exists> c. I x = Intv c \\<and> v x + t \\<ge> c + 1)}\n                            = {x. x \\<in> X \\<and> (\\<exists> c. I'' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> c + 1)}\"\n      and succ_valid:    \"valid_region X k I'' r''\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<and>\n           0 \\<le> t'\n  \\<forall>v\\<in>region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}).\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>x\\<in>X.\n     \\<not> isConst\n             (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n              else if intv_const (I x) = k x then Greater (k x)\n                   else Intv (intv_const (I x)))\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                then I x\n                else if intv_const (I x) = k x then Greater (k x)\n                     else Intv (intv_const (I x))) =\n               Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  region X I r \\<in> \\<R>\n  valid_region X k\n   (\\<lambda>x.\n       if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n       else if intv_const (I x) = k x then Greater (k x)\n            else Intv (intv_const (I x)))\n   (r \\<union>\n    {(x, y).\n     x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n     y \\<in> X \\<and>\n     intv_const (I x) < k x \\<and>\n     isIntv\n      (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I y\n       else if intv_const (I y) = k y then Greater (k y)\n            else Intv (intv_const (I y)))})\n\ngoal (1 subgoal):\n 1. (\\<And>I'' r''.\n        \\<lbrakk>\\<forall>v\\<in>region X I r.\n                    \\<forall>t>0.\n                       \\<exists>t'\\<le>t.\n                          v \\<oplus> t' \\<in> region X I'' r'' \\<and>\n                          0 \\<le> t';\n         \\<forall>v\\<in>region X I'' r''.\n            \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r;\n         \\<forall>x\\<in>X. \\<not> isConst (I'' x);\n         \\<forall>v\\<in>region X I r.\n            \\<forall>t<1.\n               \\<forall>t'\\<ge>0.\n                  v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n                  {x \\<in> X.\n                   \\<exists>c.\n                      I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n                  {x \\<in> X.\n                   \\<exists>c.\n                      I'' x = Intv c \\<and>\n                      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')};\n         valid_region X k I'' r''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  \\<forall>v\\<in>region X I'' r''.\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>x\\<in>X. \\<not> isConst (I'' x)\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I'' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  valid_region X k I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R'' = \"region X I'' r''\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from stability less(4) \\<open>t > 0\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v \\<in> region X I r\n  0 < t", "obtain t1 where t1: \"t1 \\<ge> 0\" \"t1 \\<le> t\" \"(v \\<oplus> t1) \\<in> ?R''\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v \\<in> region X I r\n  0 < t\n\ngoal (1 subgoal):\n 1. (\\<And>t1.\n        \\<lbrakk>0 \\<le> t1; t1 \\<le> t;\n         v \\<oplus> t1 \\<in> region X I'' r''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from stability less(5) \\<open>t > 0\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v' \\<in> region X I r\n  0 < t", "obtain t2 where t2: \"t2 \\<ge> 0\" \"t2 \\<le> t\" \"(v' \\<oplus> t2) \\<in> ?R''\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v' \\<in> region X I r\n  0 < t\n\ngoal (1 subgoal):\n 1. (\\<And>t2.\n        \\<lbrakk>0 \\<le> t2; t2 \\<le> t;\n         v' \\<oplus> t2 \\<in> region X I'' r''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?v = \"v \\<oplus> t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?t = \"t - t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C' = \"{x \\<in> X. \\<exists>c. I'' x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from t1 \\<open>t < 1\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n  t < 1", "have tt: \"0 \\<le> ?t\" \"?t < 1\""], ["proof (prove)\nusing this:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n  t < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> t - t1 &&& t - t1 < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t - t1\n  t - t1 < 1\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from crit_mono \\<open>t < 1\\<close> t1(1,3) \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I'' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  t < 1\n  0 \\<le> t1\n  v \\<oplus> t1 \\<in> region X I'' r''\n  v \\<in> region X I r", "have crit:\n      \"?C = ?C'\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I'' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  t < 1\n  0 \\<le> t1\n  v \\<oplus> t1 \\<in> region X I'' r''\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n    {x \\<in> X.\n     \\<exists>c.\n        I'' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with t1 t2 succ_valid no_consts"], ["proof (chain)\npicking this:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I'' r''\n  valid_region X k I'' r''\n  \\<forall>x\\<in>X. \\<not> isConst (I'' x)\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "have\n      \"\\<exists> t1 \\<ge> 0. \\<exists> t2 \\<ge> 0. \\<exists> I' r'. t1 \\<le> t \\<and> (v \\<oplus> t1) \\<in> region X I' r'\n       \\<and> t2 \\<le> t \\<and> (v' \\<oplus> t2) \\<in> region X I' r'\n       \\<and> valid_region X k I' r'\n       \\<and> (\\<forall> x \\<in> X. \\<not> isConst (I' x))\n       \\<and> ?C = {x \\<in> X. \\<exists>c. I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\""], ["proof (prove)\nusing this:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I'' r''\n  valid_region X k I'' r''\n  \\<forall>x\\<in>X. \\<not> isConst (I'' x)\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<exists>t1\\<ge>0.\n       \\<exists>t2\\<ge>0.\n          \\<exists>I' r'.\n             t1 \\<le> t \\<and>\n             v \\<oplus> t1 \\<in> region X I' r' \\<and>\n             t2 \\<le> t \\<and>\n             v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n             valid_region X k I' r' \\<and>\n             (\\<forall>x\\<in>X. \\<not> isConst (I' x)) \\<and>\n             {x \\<in> X.\n              \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n             {x \\<in> X.\n              \\<exists>c.\n                 I' x = Intv c \\<and>\n                 real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "by blast"], ["proof (state)\nthis:\n  \\<exists>t1\\<ge>0.\n     \\<exists>t2\\<ge>0.\n        \\<exists>I' r'.\n           t1 \\<le> t \\<and>\n           v \\<oplus> t1 \\<in> region X I' r' \\<and>\n           t2 \\<le> t \\<and>\n           v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n           valid_region X k I' r' \\<and>\n           (\\<forall>x\\<in>X. \\<not> isConst (I' x)) \\<and>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<exists>x\\<in>X. isConst (I x); 0 < t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t1\\<ge>0.\n                       \\<exists>t2\\<ge>0.\n                          \\<exists>I' r'.\n                             t1 \\<le> t \\<and>\n                             v \\<oplus> t1 \\<in> region X I' r' \\<and>\n                             t2 \\<le> t \\<and>\n                             v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n                             valid_region X k I' r' \\<and>\n                             (\\<forall>x\\<in>X.\n                                 \\<not> isConst (I' x)) \\<and>\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 I x = Intv c \\<and>\n                                 real (c + 1) \\<le> v x + t} =\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 I' x = Intv c \\<and>\n                                 real (c + 1)\n                                 \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "note const_dest = this"], ["proof (state)\nthis:\n  \\<lbrakk>\\<exists>x\\<in>X. isConst (I x); 0 < t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t1\\<ge>0.\n                       \\<exists>t2\\<ge>0.\n                          \\<exists>I' r'.\n                             t1 \\<le> t \\<and>\n                             v \\<oplus> t1 \\<in> region X I' r' \\<and>\n                             t2 \\<le> t \\<and>\n                             v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n                             valid_region X k I' r' \\<and>\n                             (\\<forall>x\\<in>X.\n                                 \\<not> isConst (I' x)) \\<and>\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 I x = Intv c \\<and>\n                                 real (c + 1) \\<le> v x + t} =\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 I' x = Intv c \\<and>\n                                 real (c + 1)\n                                 \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>\\<exists>x\\<in>X. isConst (I x); 0 < t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t1\\<ge>0.\n                       \\<exists>t2\\<ge>0.\n                          \\<exists>I' r'.\n                             t1 \\<le> t \\<and>\n                             v \\<oplus> t1 \\<in> region X I' r' \\<and>\n                             t2 \\<le> t \\<and>\n                             v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n                             valid_region X k I' r' \\<and>\n                             (\\<forall>x\\<in>X.\n                                 \\<not> isConst (I' x)) \\<and>\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 I x = Intv c \\<and>\n                                 real (c + 1) \\<le> v x + t} =\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 I' x = Intv c \\<and>\n                                 real (c + 1)\n                                 \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "fix t :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "fix v I r x c v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R = \"region X I r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume v: \"v \\<in> ?R\""], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume v': \"v' \\<in> ?R\""], ["proof (state)\nthis:\n  v' \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume valid: \"valid_region X k I r\""], ["proof (state)\nthis:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume t: \"t > 0\" \"t < 1\""], ["proof (state)\nthis:\n  0 < t\n  t < 1\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C = \"{x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume C: \"?C = {}\""], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume const: \"\\<exists> x \\<in> X. isConst (I x)\""], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>X. isConst (I x)", "have \"{x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from closest_prestable_1[OF this less.prems(4) valid] R closest_valid_1[OF this less.prems(4) valid]"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<and>\n           0 \\<le> t'\n  \\<forall>v\\<in>region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}).\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>x\\<in>X.\n     \\<not> isConst\n             (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n              else if intv_const (I x) = k x then Greater (k x)\n                   else Intv (intv_const (I x)))\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                then I x\n                else if intv_const (I x) = k x then Greater (k x)\n                     else Intv (intv_const (I x))) =\n               Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  region X Ia__ ra__ \\<in> \\<R>\n  valid_region X k\n   (\\<lambda>x.\n       if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n       else if intv_const (I x) = k x then Greater (k x)\n            else Intv (intv_const (I x)))\n   (r \\<union>\n    {(x, y).\n     x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n     y \\<in> X \\<and>\n     intv_const (I x) < k x \\<and>\n     isIntv\n      (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I y\n       else if intv_const (I y) = k y then Greater (k y)\n            else Intv (intv_const (I y)))})", "obtain I'' r''\n      where   stability: \"\\<forall> v \\<in> ?R. \\<forall> t>0. \\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I'' r'' \\<and> t' \\<ge> 0\"\n      and succ_not_refl: \"\\<forall> v \\<in> region X I'' r''. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> ?R\"\n      and no_consts:     \"\\<forall> x \\<in> X. \\<not> isConst (I'' x)\"\n      and crit_mono:     \"\\<forall> v \\<in> ?R. \\<forall> t < 1. \\<forall> t' \\<ge> 0. (v \\<oplus> t') \\<in> region X I'' r''\n                          \\<longrightarrow> {x. x \\<in> X \\<and> (\\<exists> c. I x = Intv c \\<and> v x + t \\<ge> c + 1)}\n                            = {x. x \\<in> X \\<and> (\\<exists> c. I'' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> c + 1)}\"\n      and succ_valid:    \"valid_region X k I'' r''\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<and>\n           0 \\<le> t'\n  \\<forall>v\\<in>region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}).\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>x\\<in>X.\n     \\<not> isConst\n             (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n              else if intv_const (I x) = k x then Greater (k x)\n                   else Intv (intv_const (I x)))\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t'\n           \\<in> region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I x\n                      else if intv_const (I x) = k x then Greater (k x)\n                           else Intv (intv_const (I x)))\n                  (r \\<union>\n                   {(x, y).\n                    x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n                    y \\<in> X \\<and>\n                    intv_const (I x) < k x \\<and>\n                    isIntv\n                     (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                      then I y\n                      else if intv_const (I y) = k y then Greater (k y)\n                           else Intv (intv_const (I y)))}) \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               (if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c}\n                then I x\n                else if intv_const (I x) = k x then Greater (k x)\n                     else Intv (intv_const (I x))) =\n               Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  region X Ia__ ra__ \\<in> \\<R>\n  valid_region X k\n   (\\<lambda>x.\n       if x \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I x\n       else if intv_const (I x) = k x then Greater (k x)\n            else Intv (intv_const (I x)))\n   (r \\<union>\n    {(x, y).\n     x \\<in> {x \\<in> X. \\<exists>c. I x = Const c} \\<and>\n     y \\<in> X \\<and>\n     intv_const (I x) < k x \\<and>\n     isIntv\n      (if y \\<notin> {x \\<in> X. \\<exists>c. I x = Const c} then I y\n       else if intv_const (I y) = k y then Greater (k y)\n            else Intv (intv_const (I y)))})\n\ngoal (1 subgoal):\n 1. (\\<And>I'' r''.\n        \\<lbrakk>\\<forall>v\\<in>region X I r.\n                    \\<forall>t>0.\n                       \\<exists>t'\\<le>t.\n                          v \\<oplus> t' \\<in> region X I'' r'' \\<and>\n                          0 \\<le> t';\n         \\<forall>v\\<in>region X I'' r''.\n            \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r;\n         \\<forall>x\\<in>X. \\<not> isConst (I'' x);\n         \\<forall>v\\<in>region X I r.\n            \\<forall>t<1.\n               \\<forall>t'\\<ge>0.\n                  v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n                  {x \\<in> X.\n                   \\<exists>c.\n                      I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n                  {x \\<in> X.\n                   \\<exists>c.\n                      I'' x = Intv c \\<and>\n                      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')};\n         valid_region X k I'' r''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  \\<forall>v\\<in>region X I'' r''.\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>x\\<in>X. \\<not> isConst (I'' x)\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I'' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  valid_region X k I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R'' = \"region X I'' r''\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from stability v \\<open>t > 0\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v \\<in> region X I r\n  0 < t", "obtain t1 where t1: \"t1 \\<ge> 0\" \"t1 \\<le> t\" \"(v \\<oplus> t1) \\<in> ?R''\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v \\<in> region X I r\n  0 < t\n\ngoal (1 subgoal):\n 1. (\\<And>t1.\n        \\<lbrakk>0 \\<le> t1; t1 \\<le> t;\n         v \\<oplus> t1 \\<in> region X I'' r''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from stability v' \\<open>t > 0\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v' \\<in> region X I r\n  0 < t", "obtain t2 where t2: \"t2 \\<ge> 0\" \"t2 \\<le> t\" \"(v' \\<oplus> t2) \\<in> ?R''\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t>0.\n        \\<exists>t'\\<le>t.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<and> 0 \\<le> t'\n  v' \\<in> region X I r\n  0 < t\n\ngoal (1 subgoal):\n 1. (\\<And>t2.\n        \\<lbrakk>0 \\<le> t2; t2 \\<le> t;\n         v' \\<oplus> t2 \\<in> region X I'' r''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?v = \"v \\<oplus> t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?t = \"t - t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C' = \"{x \\<in> X. \\<exists>c. I'' x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from t1 \\<open>t < 1\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n  t < 1", "have tt: \"0 \\<le> ?t\" \"?t < 1\""], ["proof (prove)\nusing this:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I'' r''\n  t < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> t - t1 &&& t - t1 < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t - t1\n  t - t1 < 1\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from crit_mono \\<open>t < 1\\<close> t1(1,3) \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I'' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  t < 1\n  0 \\<le> t1\n  v \\<oplus> t1 \\<in> region X I'' r''\n  v \\<in> region X I r", "have crit:\n      \"{x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n        = {x \\<in> X. \\<exists>c. I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t<1.\n        \\<forall>t'\\<ge>0.\n           v \\<oplus> t' \\<in> region X I'' r'' \\<longrightarrow>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I'' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  t < 1\n  0 \\<le> t1\n  v \\<oplus> t1 \\<in> region X I'' r''\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n    {x \\<in> X.\n     \\<exists>c.\n        I'' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with C"], ["proof (chain)\npicking this:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "have C: \"?C' = {}\""], ["proof (prove)\nusing this:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I'' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {}", "by blast"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c.\n      I'' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from critical_empty_intro[OF no_consts t1(3) tt(1) this]"], ["proof (chain)\npicking this:\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I'' r''", "have \"((v \\<oplus> t1) \\<oplus> ?t) \\<in> ?R''\""], ["proof (prove)\nusing this:\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I'' r''", "."], ["proof (state)\nthis:\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from region_unique[OF less(2) this] less(2) succ_valid t2"], ["proof (chain)\npicking this:\n  region X I'' r'' \\<in> \\<R> \\<Longrightarrow>\n  [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R> = region X I'' r''\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I'' r''\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I'' r''", "have \"\\<exists>t'\\<ge>0. (v' \\<oplus> t') \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  region X I'' r'' \\<in> \\<R> \\<Longrightarrow>\n  [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R> = region X I'' r''\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I'' r''\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I'' r''\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?vb2 \\<in> region X ?Ib2 ?rb2; ?v'b2 \\<in> region X ?Ib2 ?rb2;\n   valid_region X k ?Ib2 ?rb2; 0 < ?tb2; ?tb2 < 1;\n   {x \\<in> X.\n    \\<exists>c. ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2} =\n   {};\n   \\<exists>x\\<in>X. isConst (?Ib2 x)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v'b2 \\<oplus> t'\n                       \\<in> [?vb2 \\<oplus> ?tb2]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "note intro_const = this"], ["proof (state)\nthis:\n  \\<lbrakk>?vb2 \\<in> region X ?Ib2 ?rb2; ?v'b2 \\<in> region X ?Ib2 ?rb2;\n   valid_region X k ?Ib2 ?rb2; 0 < ?tb2; ?tb2 < 1;\n   {x \\<in> X.\n    \\<exists>c. ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2} =\n   {};\n   \\<exists>x\\<in>X. isConst (?Ib2 x)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v'b2 \\<oplus> t'\n                       \\<in> [?vb2 \\<oplus> ?tb2]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?vb2 \\<in> region X ?Ib2 ?rb2; ?v'b2 \\<in> region X ?Ib2 ?rb2;\n   valid_region X k ?Ib2 ?rb2; 0 < ?tb2; ?tb2 < 1;\n   {x \\<in> X.\n    \\<exists>c. ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2} =\n   {};\n   \\<exists>x\\<in>X. isConst (?Ib2 x)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v'b2 \\<oplus> t'\n                       \\<in> [?vb2 \\<oplus> ?tb2]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "fix v I r t x c v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R = \"region X I r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume v: \"v \\<in> ?R\""], ["proof (state)\nthis:\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume v': \"v' \\<in> ?R\""], ["proof (state)\nthis:\n  v' \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume F2: \"\\<forall>x\\<in>X. \\<not>isConst (I x)\""], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume x: \"x \\<in> X\" \"I x = Intv c\" \"v x + t \\<ge> c + 1\""], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume valid: \"valid_region X k I r\""], ["proof (state)\nthis:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume t: \"t \\<ge> 0\" \"t < 1\""], ["proof (state)\nthis:\n  0 \\<le> t\n  t < 1\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C' = \"{x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume C: \"?C = ?C'\""], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c. Ia__ x = Intv c \\<and> real (c + 1) \\<le> va__ x + ta__} =\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have not_in_R: \"(v \\<oplus> t) \\<notin> ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<notin> region X I r", "proof (rule ccontr, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r \\<Longrightarrow> False", "assume \"(v \\<oplus> t) \\<in> ?R\""], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r \\<Longrightarrow> False", "with x(1,2)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  v \\<oplus> t \\<in> region X I r", "have \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  v \\<oplus> t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 1)", "by (fastforce simp: cval_add_def)"], ["proof (state)\nthis:\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r \\<Longrightarrow> False", "with x(3)"], ["proof (chain)\npicking this:\n  real (c + 1) \\<le> v x + t\n  v x + t < real (c + 1)", "show False"], ["proof (prove)\nusing this:\n  real (c + 1) \\<le> v x + t\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<oplus> t \\<notin> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have not_in_R': \"(v' \\<oplus> 1) \\<notin> ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v' \\<oplus> 1 \\<notin> region X I r", "proof (rule ccontr, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. v' \\<oplus> 1 \\<in> region X I r \\<Longrightarrow> False", "assume \"(v' \\<oplus> 1) \\<in> ?R\""], ["proof (state)\nthis:\n  v' \\<oplus> 1 \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v' \\<oplus> 1 \\<in> region X I r \\<Longrightarrow> False", "with x"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n  v' \\<oplus> 1 \\<in> region X I r", "have \"v' x + 1 < c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n  v' \\<oplus> 1 \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v' x + 1 < real (c + 1)", "by (fastforce simp: cval_add_def)"], ["proof (state)\nthis:\n  v' x + 1 < real (c + 1)\n\ngoal (1 subgoal):\n 1. v' \\<oplus> 1 \\<in> region X I r \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  v' x + 1 < real (c + 1)\n\ngoal (1 subgoal):\n 1. v' \\<oplus> 1 \\<in> region X I r \\<Longrightarrow> False", "from x v'"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n  v' \\<in> region X I r", "have \"c < v' x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n  v' \\<in> region X I r\n\ngoal (1 subgoal):\n 1. real c < v' x", "by fastforce"], ["proof (state)\nthis:\n  real c < v' x\n\ngoal (1 subgoal):\n 1. v' \\<oplus> 1 \\<in> region X I r \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  v' x + 1 < real (c + 1)\n  real c < v' x", "show False"], ["proof (prove)\nusing this:\n  v' x + 1 < real (c + 1)\n  real c < v' x\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v' \\<oplus> 1 \\<notin> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?X\\<^sub>0 = \"{x \\<in> X. isIntv (I x)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?M = \"{x \\<in> ?X\\<^sub>0. \\<forall>y\\<in>?X\\<^sub>0. (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from x"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have x: \"x \\<in> X\" \"\\<not> isGreater (I x)\" and c: \"I x = Intv c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. (x \\<in> X &&& \\<not> isGreater (I x)) &&& I x = Intv c", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n  \\<not> isGreater (I x)\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  x \\<in> X\n  \\<not> isGreater (I x)\n  I x = Intv c", "have *: \"?X\\<^sub>0 \\<noteq> {}\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  x \\<in> X\n  \\<not> isGreater (I x)\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. {x \\<in> X. isIntv (I x)} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. isIntv (I x)} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. isIntv (I x)} = {x \\<in> X. \\<exists>d. I x = Intv d}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. isIntv (I x)} = {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with valid"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  {x \\<in> X. isIntv (I x)} = {x \\<in> X. \\<exists>d. I x = Intv d}", "have r: \"total_on ?X\\<^sub>0 r\" \"trans r\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  {x \\<in> X. isIntv (I x)} = {x \\<in> X. \\<exists>d. I x = Intv d}\n\ngoal (1 subgoal):\n 1. total_on {x \\<in> X. isIntv (I x)} r &&& trans r", "by auto"], ["proof (state)\nthis:\n  total_on {x \\<in> X. isIntv (I x)} r\n  trans r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from total_finite_trans_max[OF * _ this] \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite {x \\<in> X. isIntv (I x)} \\<Longrightarrow>\n  \\<exists>x\\<in>{x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n  finite X", "obtain x' where x': \"x' \\<in> ?X\\<^sub>0\" \"\\<forall> y \\<in> ?X\\<^sub>0. x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\""], ["proof (prove)\nusing this:\n  finite {x \\<in> X. isIntv (I x)} \\<Longrightarrow>\n  \\<exists>x\\<in>{x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        x \\<noteq> y \\<longrightarrow> (y, x) \\<in> r\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>x' \\<in> {x \\<in> X. isIntv (I x)};\n         \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n            x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  x' \\<in> {x \\<in> X. isIntv (I x)}\n  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n     x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from this(2)"], ["proof (chain)\npicking this:\n  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n     x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r", "have \"\\<forall>y\\<in>?X\\<^sub>0. (x', y) \\<in> r \\<longrightarrow> (y, x') \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n     x' \\<noteq> y \\<longrightarrow> (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n       (x', y) \\<in> r \\<longrightarrow> (y, x') \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n     (x', y) \\<in> r \\<longrightarrow> (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with x'(1)"], ["proof (chain)\npicking this:\n  x' \\<in> {x \\<in> X. isIntv (I x)}\n  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n     (x', y) \\<in> r \\<longrightarrow> (y, x') \\<in> r", "have \"?M \\<noteq> {}\""], ["proof (prove)\nusing this:\n  x' \\<in> {x \\<in> X. isIntv (I x)}\n  \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n     (x', y) \\<in> r \\<longrightarrow> (y, x') \\<in> r\n\ngoal (1 subgoal):\n 1. {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {}", "by fastforce"], ["proof (state)\nthis:\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from closest_prestable_2[OF F2 less.prems(4) valid this] closest_valid_2[OF F2 less.prems(4) valid this]"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t'\n            \\<in> region X\n                   (\\<lambda>x.\n                       if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n\\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n                       then I x else Const (intv_const (I x) + 1))\n                   {(x, y).\n                    (x, y) \\<in> r \\<and>\n                    x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                   (x, y) \\<in> r \\<longrightarrow>\n                                   (y, x) \\<in> r} \\<and>\n                    y \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                   (x, y) \\<in> r \\<longrightarrow>\n                                   (y, x) \\<in> r}} \\<and>\n            0 \\<le> t')\n  \\<forall>v\\<in>region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                                     \\<forall>y\n        \\<in>{x \\<in> X. isIntv (I x)}.\n  (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n                      then I x else Const (intv_const (I x) + 1))\n                  {(x, y).\n                   (x, y) \\<in> r \\<and>\n                   x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                               \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                  (x, y) \\<in> r \\<longrightarrow>\n                                  (y, x) \\<in> r} \\<and>\n                   y \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                               \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                  (x, y) \\<in> r \\<longrightarrow>\n                                  (y, x) \\<in> r}}.\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t'.\n        {x \\<in> X.\n         \\<exists>c.\n            (if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                            \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                               (x, y) \\<in> r \\<longrightarrow>\n                               (y, x) \\<in> r}\n             then I x else Const (intv_const (I x) + 1)) =\n            Intv c \\<and>\n            real (c + 1) \\<le> (v \\<oplus> t') x + (?t - t')} =\n        {x \\<in> X.\n         \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + ?t} -\n        {x \\<in> {x \\<in> X. isIntv (I x)}.\n         \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n            (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  \\<exists>x\\<in>X.\n     isConst\n      (if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                      \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                         (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n       then I x else Const (intv_const (I x) + 1))\n  valid_region X k\n   (\\<lambda>x.\n       if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                      \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                         (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n       then I x else Const (intv_const (I x) + 1))\n   {(x, y).\n    (x, y) \\<in> r \\<and>\n    x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<and>\n    y \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}}", "obtain I' r'\n      where   stability:\n        \"\\<forall> v \\<in> region X I r. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> region X I r \\<longrightarrow> (\\<exists>t'\\<le>t. (v \\<oplus> t') \\<in> region X I' r' \\<and> t' \\<ge> 0)\"\n      and succ_not_refl: \"\\<forall> v \\<in> region X I' r'. \\<forall> t\\<ge>0. (v \\<oplus> t) \\<notin> region X I r\"\n      and critical_mono: \"\\<forall> v \\<in> region X I r. \\<forall>t. \\<forall> t'.\n                            {x. x \\<in> X \\<and> (\\<exists> c. I' x = Intv c \\<and> (v \\<oplus> t') x + (t - t') \\<ge> real (c + 1))}\n                            = {x. x \\<in> X \\<and> (\\<exists> c. I x  = Intv c \\<and> v x + t \\<ge> real (c + 1))} - ?M\"\n      and const_ex:      \"\\<exists>x\\<in>X. isConst (I' x)\"\n      and succ_valid:    \"valid_region X k I' r'\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t'\n            \\<in> region X\n                   (\\<lambda>x.\n                       if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n\\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n                       then I x else Const (intv_const (I x) + 1))\n                   {(x, y).\n                    (x, y) \\<in> r \\<and>\n                    x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                   (x, y) \\<in> r \\<longrightarrow>\n                                   (y, x) \\<in> r} \\<and>\n                    y \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                   (x, y) \\<in> r \\<longrightarrow>\n                                   (y, x) \\<in> r}} \\<and>\n            0 \\<le> t')\n  \\<forall>v\\<in>region X\n                  (\\<lambda>x.\n                      if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                                     \\<forall>y\n        \\<in>{x \\<in> X. isIntv (I x)}.\n  (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n                      then I x else Const (intv_const (I x) + 1))\n                  {(x, y).\n                   (x, y) \\<in> r \\<and>\n                   x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                               \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                  (x, y) \\<in> r \\<longrightarrow>\n                                  (y, x) \\<in> r} \\<and>\n                   y \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                               \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                                  (x, y) \\<in> r \\<longrightarrow>\n                                  (y, x) \\<in> r}}.\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t'.\n        {x \\<in> X.\n         \\<exists>c.\n            (if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                            \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                               (x, y) \\<in> r \\<longrightarrow>\n                               (y, x) \\<in> r}\n             then I x else Const (intv_const (I x) + 1)) =\n            Intv c \\<and>\n            real (c + 1) \\<le> (v \\<oplus> t') x + (?t - t')} =\n        {x \\<in> X.\n         \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + ?t} -\n        {x \\<in> {x \\<in> X. isIntv (I x)}.\n         \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n            (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  \\<exists>x\\<in>X.\n     isConst\n      (if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                      \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                         (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n       then I x else Const (intv_const (I x) + 1))\n  valid_region X k\n   (\\<lambda>x.\n       if x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                      \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                         (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n       then I x else Const (intv_const (I x) + 1))\n   {(x, y).\n    (x, y) \\<in> r \\<and>\n    x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<and>\n    y \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>\\<forall>v\\<in>region X I r.\n                    \\<forall>t\\<ge>0.\n                       v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n                       (\\<exists>t'\\<le>t.\n                           v \\<oplus> t' \\<in> region X I' r' \\<and>\n                           0 \\<le> t');\n         \\<forall>v\\<in>region X I' r'.\n            \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r;\n         \\<forall>v\\<in>region X I r.\n            \\<forall>t t'.\n               {x \\<in> X.\n                \\<exists>c.\n                   I' x = Intv c \\<and>\n                   real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n               {x \\<in> X.\n                \\<exists>c.\n                   I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n               {x \\<in> {x \\<in> X. isIntv (I x)}.\n                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r};\n         \\<exists>x\\<in>X. isConst (I' x); valid_region X k I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t')\n  \\<forall>v\\<in>region X I' r'.\n     \\<forall>t\\<ge>0. v \\<oplus> t \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t t'.\n        {x \\<in> X.\n         \\<exists>c.\n            I' x = Intv c \\<and>\n            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n        {x \\<in> X.\n         \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n        {x \\<in> {x \\<in> X. isIntv (I x)}.\n         \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n            (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  \\<exists>x\\<in>X. isConst (I' x)\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R' = \"region X I' r'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from not_in_R stability \\<open>t \\<ge> 0\\<close> v"], ["proof (chain)\npicking this:\n  v \\<oplus> t \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t')\n  0 \\<le> t\n  v \\<in> region X I r", "obtain t' where\n      t': \"t' \\<ge> 0\" \"t' \\<le> t\" \"(v \\<oplus> t') \\<in> ?R'\""], ["proof (prove)\nusing this:\n  v \\<oplus> t \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t')\n  0 \\<le> t\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. (\\<And>t'.\n        \\<lbrakk>0 \\<le> t'; t' \\<le> t;\n         v \\<oplus> t' \\<in> region X I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 \\<le> t'\n  t' \\<le> t\n  v \\<oplus> t' \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"(1::t) \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with not_in_R' stability v'"], ["proof (chain)\npicking this:\n  v' \\<oplus> 1 \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t')\n  v' \\<in> region X I r\n  0 \\<le> 1", "obtain t1 where\n      t1: \"t1 \\<ge> 0\" \"t1 \\<le> 1\" \"(v' \\<oplus> t1) \\<in> ?R'\""], ["proof (prove)\nusing this:\n  v' \\<oplus> 1 \\<notin> region X I r\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t\\<ge>0.\n        v \\<oplus> t \\<notin> region X I r \\<longrightarrow>\n        (\\<exists>t'\\<le>t.\n            v \\<oplus> t' \\<in> region X I' r' \\<and> 0 \\<le> t')\n  v' \\<in> region X I r\n  0 \\<le> 1\n\ngoal (1 subgoal):\n 1. (\\<And>t1.\n        \\<lbrakk>0 \\<le> t1; t1 \\<le> 1;\n         v' \\<oplus> t1 \\<in> region X I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 \\<le> t1\n  t1 \\<le> 1\n  v' \\<oplus> t1 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?v = \"v \\<oplus> t'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?t = \"t - t'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C'' = \"{x \\<in> X. \\<exists>c. I' x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"\\<exists>t'\\<ge>0. (v' \\<oplus> t') \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"t = t'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t = t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  t = t'\n\ngoal (2 subgoals):\n 1. t = t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with t'"], ["proof (chain)\npicking this:\n  0 \\<le> t'\n  t' \\<le> t\n  v \\<oplus> t' \\<in> region X I' r'\n  t = t'", "have \"(v \\<oplus> t) \\<in> ?R'\""], ["proof (prove)\nusing this:\n  0 \\<le> t'\n  t' \\<le> t\n  v \\<oplus> t' \\<in> region X I' r'\n  t = t'\n\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I' r'", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> region X I' r'\n\ngoal (2 subgoals):\n 1. t = t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from region_unique[OF less(2) this] succ_valid \\<R>_def"], ["proof (chain)\npicking this:\n  region X I' r' \\<in> \\<R> \\<Longrightarrow>\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \"[v \\<oplus> t]\\<^sub>\\<R> = ?R'\""], ["proof (prove)\nusing this:\n  region X I' r' \\<in> \\<R> \\<Longrightarrow>\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'", "by blast"], ["proof (state)\nthis:\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n\ngoal (2 subgoals):\n 1. t = t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with t1(1,3)"], ["proof (chain)\npicking this:\n  0 \\<le> t1\n  v' \\<oplus> t1 \\<in> region X I' r'\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> t1\n  v' \\<oplus> t1 \\<in> region X I' r'\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  t \\<noteq> t'\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with \\<open>t < 1\\<close> t'"], ["proof (chain)\npicking this:\n  t < 1\n  0 \\<le> t'\n  t' \\<le> t\n  v \\<oplus> t' \\<in> region X I' r'\n  t \\<noteq> t'", "have tt: \"0 \\<le> ?t\" \"?t < 1\" \"?t > 0\""], ["proof (prove)\nusing this:\n  t < 1\n  0 \\<le> t'\n  t' \\<le> t\n  v \\<oplus> t' \\<in> region X I' r'\n  t \\<noteq> t'\n\ngoal (1 subgoal):\n 1. 0 \\<le> t - t' &&& t - t' < 1 &&& 0 < t - t'", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t - t'\n  t - t' < 1\n  0 < t - t'\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from critical_mono \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t t'.\n        {x \\<in> X.\n         \\<exists>c.\n            I' x = Intv c \\<and>\n            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n        {x \\<in> X.\n         \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n        {x \\<in> {x \\<in> X. isIntv (I x)}.\n         \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n            (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  v \\<in> region X I r", "have C_eq: \"?C'' = ?C' - ?M\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>region X I r.\n     \\<forall>t t'.\n        {x \\<in> X.\n         \\<exists>c.\n            I' x = Intv c \\<and>\n            real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n        {x \\<in> X.\n         \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n        {x \\<in> {x \\<in> X. isIntv (I x)}.\n         \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n            (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n    {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show \"\\<exists>t'\\<ge>0. (v' \\<oplus> t') \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"?C' \\<inter> ?M = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite X", "have \"finite ?C''\" \"finite ?C'\" \"finite ?M\""], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. finite\n     {x \\<in> X.\n      \\<exists>c.\n         I' x = Intv c \\<and>\n         real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} &&&\n    finite\n     {x \\<in> X.\n      \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} &&&\n    finite\n     {x \\<in> {x \\<in> X. isIntv (I x)}.\n      \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n         (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  finite\n   {x \\<in> X.\n    \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  finite\n   {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n  finite\n   {x \\<in> {x \\<in> X. isIntv (I x)}.\n    \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n       (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  finite\n   {x \\<in> X.\n    \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  finite\n   {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n  finite\n   {x \\<in> {x \\<in> X. isIntv (I x)}.\n    \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n       (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}", "have \"card ?C'' < card ?C\""], ["proof (prove)\nusing this:\n  finite\n   {x \\<in> X.\n    \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  finite\n   {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n  finite\n   {x \\<in> {x \\<in> X. isIntv (I x)}.\n    \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n       (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. card\n     {x \\<in> X.\n      \\<exists>c.\n         I' x = Intv c \\<and>\n         real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n    < card\n       {x \\<in> X.\n        \\<exists>c. Ia__ x = Intv c \\<and> real (c + 1) \\<le> va__ x + ta__}", "using C_eq C False"], ["proof (prove)\nusing this:\n  finite\n   {x \\<in> X.\n    \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  finite\n   {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n  finite\n   {x \\<in> {x \\<in> X. isIntv (I x)}.\n    \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n       (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  {x \\<in> X.\n   \\<exists>c. Ia__ x = Intv c \\<and> real (c + 1) \\<le> va__ x + ta__} =\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t}\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. card\n     {x \\<in> X.\n      \\<exists>c.\n         I' x = Intv c \\<and>\n         real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n    < card\n       {x \\<in> X.\n        \\<exists>c. Ia__ x = Intv c \\<and> real (c + 1) \\<le> va__ x + ta__}", "by (intro card_mono_strict_subset) auto"], ["proof (state)\nthis:\n  card\n   {x \\<in> X.\n    \\<exists>c.\n       I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')}\n  < card\n     {x \\<in> X.\n      \\<exists>c. Ia__ x = Intv c \\<and> real (c + 1) \\<le> va__ x + ta__}\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from less(1)[OF this less(2) succ_valid t'(3) t1(3) \\<open>finite X\\<close> tt(1,2)]"], ["proof (chain)\npicking this:\n  \\<exists>t'a\\<ge>0.\n     (v' \\<oplus> t1) \\<oplus> t'a\n     \\<in> [(v \\<oplus> t') \\<oplus> t - t']\\<^sub>\\<R>", "obtain t2 where \"t2 \\<ge> 0\" \"((v' \\<oplus> t1) \\<oplus> t2) \\<in> [(v \\<oplus> t)]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<exists>t'a\\<ge>0.\n     (v' \\<oplus> t1) \\<oplus> t'a\n     \\<in> [(v \\<oplus> t') \\<oplus> t - t']\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>t2.\n        \\<lbrakk>0 \\<le> t2;\n         (v' \\<oplus> t1) \\<oplus> t2\n         \\<in> [v \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"(v' \\<oplus> (t1 + t2)) = ((v' \\<oplus> t1) \\<oplus> t2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"t1 + t2 \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> t1 + t2", "using \\<open>t2 \\<ge> 0\\<close> t1(1)"], ["proof (prove)\nusing this:\n  0 \\<le> t2\n  0 \\<le> t1\n\ngoal (1 subgoal):\n 1. 0 \\<le> t1 + t2", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1 + t2\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n  0 \\<le> t1 + t2", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n  0 \\<le> t1 + t2\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by metis"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "fix x c"], ["proof (state)\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "assume x: \"x \\<in> X\" \"I x = Intv c\" \"real (c + 1) \\<le> v x + t\""], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with True"], ["proof (chain)\npicking this:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n  {}\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have \"x \\<notin> ?M\""], ["proof (prove)\nusing this:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n  {}\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                   (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}", "by force"], ["proof (state)\nthis:\n  x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n              \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                 (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from x"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have \"x \\<in> ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. x \\<in> {x \\<in> X. isIntv (I x)}", "by auto"], ["proof (state)\nthis:\n  x \\<in> {x \\<in> X. isIntv (I x)}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from x(1,2) \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  v \\<in> region X I r", "have *: \"c < v x\" \"v x < c + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. real c < v x &&& v x < real (c + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with \\<open>t < 1\\<close>"], ["proof (chain)\npicking this:\n  t < 1\n  real c < v x\n  v x < real (c + 1)", "have \"v x + t < c + 2\""], ["proof (prove)\nusing this:\n  t < 1\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 2)", "by auto"], ["proof (state)\nthis:\n  v x + t < real (c + 2)\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have ge_1: \"frac (v x) + t \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> frac (v x) + t", "proof (rule ccontr, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> 1 \\<le> frac (v x) + t \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  \\<not> 1 \\<le> frac (v x) + t\n\ngoal (1 subgoal):\n 1. \\<not> 1 \\<le> frac (v x) + t \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> 1 \\<le> frac (v x) + t", "have A: \"frac (v x) + t < 1\""], ["proof (prove)\nusing this:\n  \\<not> 1 \\<le> frac (v x) + t\n\ngoal (1 subgoal):\n 1. frac (v x) + t < 1", "by auto"], ["proof (state)\nthis:\n  frac (v x) + t < 1\n\ngoal (1 subgoal):\n 1. \\<not> 1 \\<le> frac (v x) + t \\<Longrightarrow> False", "from *"], ["proof (chain)\npicking this:\n  real c < v x\n  v x < real (c + 1)", "have \"floor (v x) + frac (v x) < c + 1\""], ["proof (prove)\nusing this:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>v x\\<rfloor> + frac (v x) < real (c + 1)", "unfolding frac_def"], ["proof (prove)\nusing this:\n  real c < v x\n  v x < real (c + 1)\n\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>v x\\<rfloor> +\n    (v x - real_of_int \\<lfloor>v x\\<rfloor>)\n    < real (c + 1)", "by auto"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>v x\\<rfloor> + frac (v x) < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<not> 1 \\<le> frac (v x) + t \\<Longrightarrow> False", "with nat_intv_frac_gt0[OF *]"], ["proof (chain)\npicking this:\n  0 < frac (v x)\n  real_of_int \\<lfloor>v x\\<rfloor> + frac (v x) < real (c + 1)", "have \"floor (v x) \\<le> c\""], ["proof (prove)\nusing this:\n  0 < frac (v x)\n  real_of_int \\<lfloor>v x\\<rfloor> + frac (v x) < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<lfloor>v x\\<rfloor> \\<le> int c", "by linarith"], ["proof (state)\nthis:\n  \\<lfloor>v x\\<rfloor> \\<le> int c\n\ngoal (1 subgoal):\n 1. \\<not> 1 \\<le> frac (v x) + t \\<Longrightarrow> False", "with A"], ["proof (chain)\npicking this:\n  frac (v x) + t < 1\n  \\<lfloor>v x\\<rfloor> \\<le> int c", "have \"v x + t < c + 1\""], ["proof (prove)\nusing this:\n  frac (v x) + t < 1\n  \\<lfloor>v x\\<rfloor> \\<le> int c\n\ngoal (1 subgoal):\n 1. v x + t < real (c + 1)", "by (auto simp: frac_def)"], ["proof (state)\nthis:\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<not> 1 \\<le> frac (v x) + t \\<Longrightarrow> False", "with x(3)"], ["proof (chain)\npicking this:\n  real (c + 1) \\<le> v x + t\n  v x + t < real (c + 1)", "show False"], ["proof (prove)\nusing this:\n  real (c + 1) \\<le> v x + t\n  v x + t < real (c + 1)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> frac (v x) + t\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from \\<open>?M \\<noteq> {}\\<close>"], ["proof (chain)\npicking this:\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}", "obtain y where \"y \\<in> ?M\""], ["proof (prove)\nusing this:\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n                 \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                    (x, y) \\<in> r \\<longrightarrow>\n                    (y, x) \\<in> r} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with \\<open>x \\<in> ?X\\<^sub>0\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> X. isIntv (I x)}\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}", "have y: \"y \\<in> ?X\\<^sub>0\" \"(y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> X. isIntv (I x)}\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. y \\<in> {x \\<in> X. isIntv (I x)} &&&\n    (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r", "by auto"], ["proof (state)\nthis:\n  y \\<in> {x \\<in> X. isIntv (I x)}\n  (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from y"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. isIntv (I x)}\n  (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r", "obtain c' where c': \"y \\<in> X\" \"I y = Intv c'\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. isIntv (I x)}\n  (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (\\<And>c'.\n        \\<lbrakk>y \\<in> X; I y = Intv c'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\n  I y = Intv c'\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with \\<open>v \\<in> ?R\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  y \\<in> X\n  I y = Intv c'", "have \"c' < v y\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  y \\<in> X\n  I y = Intv c'\n\ngoal (1 subgoal):\n 1. real c' < v y", "by fastforce"], ["proof (state)\nthis:\n  real c' < v y\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from \\<open>y \\<in> ?M\\<close> \\<open>x \\<notin> ?M\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n              \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                 (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}", "have \"x \\<noteq> y\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  x \\<notin> {x \\<in> {x \\<in> X. isIntv (I x)}.\n              \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n                 (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. x \\<noteq> y", "by auto"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with y r(1) x(1,2)"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. isIntv (I x)}\n  (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r\n  total_on {x \\<in> X. isIntv (I x)} r\n  x \\<in> X\n  I x = Intv c\n  x \\<noteq> y", "have \"(x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. isIntv (I x)}\n  (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r\n  total_on {x \\<in> X. isIntv (I x)} r\n  x \\<in> X\n  I x = Intv c\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. isIntv (I x)}\n  (y, x) \\<in> r \\<longrightarrow> (x, y) \\<in> r\n  \\<forall>x\\<in>{x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  x \\<in> X\n  I x = Intv c\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by fastforce"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with \\<open>v \\<in> ?R\\<close> c' x"], ["proof (chain)\npicking this:\n  v \\<in> region X I r\n  y \\<in> X\n  I y = Intv c'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n  (x, y) \\<in> r", "have \"frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X I r\n  y \\<in> X\n  I y = Intv c'\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v x) \\<le> frac (v y)", "by fastforce"], ["proof (state)\nthis:\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with ge_1"], ["proof (chain)\npicking this:\n  1 \\<le> frac (v x) + t\n  frac (v x) \\<le> frac (v y)", "have frac: \"frac (v y) + t \\<ge> 1\""], ["proof (prove)\nusing this:\n  1 \\<le> frac (v x) + t\n  frac (v x) \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. 1 \\<le> frac (v y) + t", "by auto"], ["proof (state)\nthis:\n  1 \\<le> frac (v y) + t\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"real (c' + 1) \\<le> v y + t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (c' + 1) \\<le> v y + t", "proof (rule ccontr, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> real (c' + 1) \\<le> v y + t \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  \\<not> real (c' + 1) \\<le> v y + t\n\ngoal (1 subgoal):\n 1. \\<not> real (c' + 1) \\<le> v y + t \\<Longrightarrow> False", "from \\<open>c' < v y\\<close>"], ["proof (chain)\npicking this:\n  real c' < v y", "have \"floor (v y) \\<ge> c'\""], ["proof (prove)\nusing this:\n  real c' < v y\n\ngoal (1 subgoal):\n 1. int c' \\<le> \\<lfloor>v y\\<rfloor>", "by linarith"], ["proof (state)\nthis:\n  int c' \\<le> \\<lfloor>v y\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> real (c' + 1) \\<le> v y + t \\<Longrightarrow> False", "with frac"], ["proof (chain)\npicking this:\n  1 \\<le> frac (v y) + t\n  int c' \\<le> \\<lfloor>v y\\<rfloor>", "have \"v y + t \\<ge> c' + 1\""], ["proof (prove)\nusing this:\n  1 \\<le> frac (v y) + t\n  int c' \\<le> \\<lfloor>v y\\<rfloor>\n\ngoal (1 subgoal):\n 1. real (c' + 1) \\<le> v y + t", "unfolding frac_def"], ["proof (prove)\nusing this:\n  1 \\<le> v y - real_of_int \\<lfloor>v y\\<rfloor> + t\n  int c' \\<le> \\<lfloor>v y\\<rfloor>\n\ngoal (1 subgoal):\n 1. real (c' + 1) \\<le> v y + t", "by linarith"], ["proof (state)\nthis:\n  real (c' + 1) \\<le> v y + t\n\ngoal (1 subgoal):\n 1. \\<not> real (c' + 1) \\<le> v y + t \\<Longrightarrow> False", "with 1"], ["proof (chain)\npicking this:\n  \\<not> real (c' + 1) \\<le> v y + t\n  real (c' + 1) \\<le> v y + t", "show False"], ["proof (prove)\nusing this:\n  \\<not> real (c' + 1) \\<le> v y + t\n  real (c' + 1) \\<le> v y + t\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (c' + 1) \\<le> v y + t\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with c' True \\<open>y \\<in> ?M\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> X\n  I y = Intv c'\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n  {}\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  real (c' + 1) \\<le> v y + t", "have False"], ["proof (prove)\nusing this:\n  y \\<in> X\n  I y = Intv c'\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n  {}\n  y \\<in> {x \\<in> {x \\<in> X. isIntv (I x)}.\n           \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n              (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  real (c' + 1) \\<le> v y + t\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?xa2 \\<in> X; I ?xa2 = Intv ?ca2;\n   real (?ca2 + 1) \\<le> v ?xa2 + t\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?xa2 \\<in> X; I ?xa2 = Intv ?ca2;\n   real (?ca2 + 1) \\<le> v ?xa2 + t\\<rbrakk>\n  \\<Longrightarrow> False", "have C: \"?C' = {}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?xa2 \\<in> X; I ?xa2 = Intv ?ca2;\n   real (?ca2 + 1) \\<le> v ?xa2 + t\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n    {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with C_eq"], ["proof (chain)\npicking this:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}", "have C'': \"?C'' = {}\""], ["proof (prove)\nusing this:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} -\n  {x \\<in> {x \\<in> X. isIntv (I x)}.\n   \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n      (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r}\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n    {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t') x + (t - t')} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from intro_const[OF t'(3) t1(3) succ_valid tt(3) tt(2) C'' const_ex]"], ["proof (chain)\npicking this:\n  \\<exists>t'a\\<ge>0.\n     (v' \\<oplus> t1) \\<oplus> t'a\n     \\<in> [(v \\<oplus> t') \\<oplus> t - t']\\<^sub>\\<R>", "obtain t2 where \"t2 \\<ge> 0\" \"((v' \\<oplus> t1) \\<oplus> t2) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<exists>t'a\\<ge>0.\n     (v' \\<oplus> t1) \\<oplus> t'a\n     \\<in> [(v \\<oplus> t') \\<oplus> t - t']\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>t2.\n        \\<lbrakk>0 \\<le> t2;\n         (v' \\<oplus> t1) \\<oplus> t2\n         \\<in> [v \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"(v' \\<oplus> (t1 + t2)) = ((v' \\<oplus> t1) \\<oplus> t2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"t1 + t2 \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> t1 + t2", "using \\<open>t2 \\<ge> 0\\<close> t1(1)"], ["proof (prove)\nusing this:\n  0 \\<le> t2\n  0 \\<le> t1\n\ngoal (1 subgoal):\n 1. 0 \\<le> t1 + t2", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1 + t2\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<inter>\n    {x \\<in> {x \\<in> X. isIntv (I x)}.\n     \\<forall>y\\<in>{x \\<in> X. isIntv (I x)}.\n        (x, y) \\<in> r \\<longrightarrow> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n  0 \\<le> t1 + t2", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> t2\n  (v' \\<oplus> t1) \\<oplus> t2 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  v' \\<oplus> t1 + t2 = (v' \\<oplus> t1) \\<oplus> t2\n  0 \\<le> t1 + t2\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by metis"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?vb2 \\<in> region X ?Ib2 ?rb2; ?v'b2 \\<in> region X ?Ib2 ?rb2;\n   \\<forall>x\\<in>X. \\<not> isConst (?Ib2 x); ?x2 \\<in> X;\n   ?Ib2 ?x2 = Intv ?c2; real (?c2 + 1) \\<le> ?vb2 ?x2 + ?tb2;\n   valid_region X k ?Ib2 ?rb2; 0 \\<le> ?tb2; ?tb2 < 1;\n   {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n   {x \\<in> X.\n    \\<exists>c.\n       ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2}\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v'b2 \\<oplus> t'\n                       \\<in> [?vb2 \\<oplus> ?tb2]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "note intro_intv = this"], ["proof (state)\nthis:\n  \\<lbrakk>?vb2 \\<in> region X ?Ib2 ?rb2; ?v'b2 \\<in> region X ?Ib2 ?rb2;\n   \\<forall>x\\<in>X. \\<not> isConst (?Ib2 x); ?x2 \\<in> X;\n   ?Ib2 ?x2 = Intv ?c2; real (?c2 + 1) \\<le> ?vb2 ?x2 + ?tb2;\n   valid_region X k ?Ib2 ?rb2; 0 \\<le> ?tb2; ?tb2 < 1;\n   {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n   {x \\<in> X.\n    \\<exists>c.\n       ?Ib2 x = Intv c \\<and> real (c + 1) \\<le> ?vb2 x + ?tb2}\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       ?v'b2 \\<oplus> t'\n                       \\<in> [?vb2 \\<oplus> ?tb2]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from regions_closed[OF less(2) R less(4,7)] less(2)"], ["proof (chain)\npicking this:\n  [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}", "obtain I' r' where R':\n      \"[v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\" \"valid_region X k I' r'\""], ["proof (prove)\nusing this:\n  [v \\<oplus> t]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>I' r'.\n        \\<lbrakk>[v \\<oplus> t]\\<^sub>\\<R> = region X I' r';\n         valid_region X k I' r'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with regions_closed'[OF less(2) R less(4,7)] assms(1)"], ["proof (chain)\npicking this:\n  v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'", "have\n    R'2: \"(v \\<oplus> t) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\" \"(v \\<oplus> t) \\<in> region X I' r'\""], ["proof (prove)\nusing this:\n  v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R> &&&\n    v \\<oplus> t \\<in> region X I' r'", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  v \\<oplus> t \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R' = \"region X I' r'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from less(2) R'"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'", "have \"?R' \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n\ngoal (1 subgoal):\n 1. region X I' r' \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  region X I' r' \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>I r v v' t.\n       \\<lbrakk>\\<And>Ia r va v' ta.\n                   \\<lbrakk>card\n                             {x \\<in> X.\n                              \\<exists>c.\n                                 Ia x = Intv c \\<and>\n                                 real (c + 1) \\<le> va x + ta}\n                            < card\n                               {x \\<in> X.\n                                \\<exists>c.\n                                   I x = Intv c \\<and>\n                                   real (c + 1) \\<le> v x + t};\n                    \\<R> = {region X I r |I r. valid_region X k I r};\n                    valid_region X k Ia r; va \\<in> region X Ia r;\n                    v' \\<in> region X Ia r; finite X; 0 \\<le> ta;\n                    ta < 1\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>t'\\<ge>0.\n  v' \\<oplus> t' \\<in> [va \\<oplus> ta]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_region X k I r; v \\<in> region X I r; v' \\<in> region X I r;\n        finite X; 0 \\<le> t; t < 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                            v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"?R' = ?R\")"], ["proof (state)\ngoal (2 subgoals):\n 1. region X I' r' = region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  region X I' r' = region X I r\n\ngoal (2 subgoals):\n 1. region X I' r' = region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with less(3,5) R'(1)"], ["proof (chain)\npicking this:\n  valid_region X k I r\n  v' \\<in> region X I r\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  region X I' r' = region X I r", "have \"(v' \\<oplus> 0) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n  v' \\<in> region X I r\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  region X I' r' = region X I r\n\ngoal (1 subgoal):\n 1. v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. region X I' r' = region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\nusing this:\n  v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  region X I' r' \\<noteq> region X I r\n\ngoal (1 subgoal):\n 1. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"t > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < t", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> 0 < t \\<Longrightarrow> False", "assume \"\\<not> 0 < t\""], ["proof (state)\nthis:\n  \\<not> 0 < t\n\ngoal (1 subgoal):\n 1. \\<not> 0 < t \\<Longrightarrow> False", "with R' \\<open>t \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  0 \\<le> t\n  \\<not> 0 < t", "have \"[v]\\<^sub>\\<R> = ?R'\""], ["proof (prove)\nusing this:\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I' r'\n  valid_region X k I' r'\n  0 \\<le> t\n  \\<not> 0 < t\n\ngoal (1 subgoal):\n 1. [v]\\<^sub>\\<R> = region X I' r'", "by (simp add: cval_add_def)"], ["proof (state)\nthis:\n  [v]\\<^sub>\\<R> = region X I' r'\n\ngoal (1 subgoal):\n 1. \\<not> 0 < t \\<Longrightarrow> False", "with region_unique[OF less(2) less(4) R] \\<open>?R' \\<noteq> ?R\\<close>"], ["proof (chain)\npicking this:\n  [v]\\<^sub>\\<R> = region X I r\n  region X I' r' \\<noteq> region X I r\n  [v]\\<^sub>\\<R> = region X I' r'", "show False"], ["proof (prove)\nusing this:\n  [v]\\<^sub>\\<R> = region X I r\n  region X I' r' \\<noteq> region X I r\n  [v]\\<^sub>\\<R> = region X I' r'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < t\n\ngoal (1 subgoal):\n 1. region X I' r' \\<noteq> region X I r \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"?C = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"\\<exists> x \\<in> X. isConst (I x)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>x\\<in>X. isConst (I x))\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>x\\<in>X. isConst (I x))", "have no_consts: \"\\<forall>x\\<in>X. \\<not>isConst (I x)\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>x\\<in>X. isConst (I x))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. \\<not> isConst (I x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from critical_empty_intro[OF this \\<open>v \\<in> ?R\\<close> \\<open>t \\<ge> 0\\<close> True]"], ["proof (chain)\npicking this:\n  v \\<oplus> t \\<in> region X I r", "have \"(v \\<oplus> t) \\<in> ?R\""], ["proof (prove)\nusing this:\n  v \\<oplus> t \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v \\<oplus> t \\<in> region X I r", "."], ["proof (state)\nthis:\n  v \\<oplus> t \\<in> region X I r\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from region_unique[OF less(2) this R] less(5)"], ["proof (chain)\npicking this:\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I r\n  v' \\<in> region X I r", "have \"(v' \\<oplus> 0) \\<in> [v \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  [v \\<oplus> t]\\<^sub>\\<R> = region X I r\n  v' \\<in> region X I r\n\ngoal (1 subgoal):\n 1. v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\nusing this:\n  v' \\<oplus> 0 \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by blast"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from const_dest[OF this \\<open>t > 0\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>t1\\<ge>0.\n     \\<exists>t2\\<ge>0.\n        \\<exists>I' r'.\n           t1 \\<le> t \\<and>\n           v \\<oplus> t1 \\<in> region X I' r' \\<and>\n           t2 \\<le> t \\<and>\n           v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n           valid_region X k I' r' \\<and>\n           (\\<forall>x\\<in>X. \\<not> isConst (I' x)) \\<and>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "obtain t1 t2 I' r'\n          where t1:  \"t1 \\<ge> 0\" \"t1 \\<le> t\" \"(v \\<oplus> t1) \\<in> region X I' r'\"\n          and   t2:  \"t2 \\<ge> 0\" \"t2 \\<le> t\" \"(v' \\<oplus> t2) \\<in> region X I' r'\"\n          and valid: \"valid_region X k I' r'\"\n          and no_consts: \"\\<forall> x \\<in> X. \\<not> isConst (I' x)\"\n          and   C:   \"?C = {x \\<in> X. \\<exists>c. I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\""], ["proof (prove)\nusing this:\n  \\<exists>t1\\<ge>0.\n     \\<exists>t2\\<ge>0.\n        \\<exists>I' r'.\n           t1 \\<le> t \\<and>\n           v \\<oplus> t1 \\<in> region X I' r' \\<and>\n           t2 \\<le> t \\<and>\n           v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n           valid_region X k I' r' \\<and>\n           (\\<forall>x\\<in>X. \\<not> isConst (I' x)) \\<and>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. (\\<And>t1 I' r' t2.\n        \\<lbrakk>0 \\<le> t1; t1 \\<le> t; v \\<oplus> t1 \\<in> region X I' r';\n         0 \\<le> t2; t2 \\<le> t; v' \\<oplus> t2 \\<in> region X I' r';\n         valid_region X k I' r'; \\<forall>x\\<in>X. \\<not> isConst (I' x);\n         {x \\<in> X.\n          \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n         {x \\<in> X.\n          \\<exists>c.\n             I' x = Intv c \\<and>\n             real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I' r'\n  valid_region X k I' r'\n  \\<forall>x\\<in>X. \\<not> isConst (I' x)\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?v = \"v \\<oplus> t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?t = \"t - t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C' = \"{x \\<in> X. \\<exists>c. I' x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R' = \"region X I' r'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from C \\<open>?C = {}\\<close>"], ["proof (chain)\npicking this:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}", "have \"?C' = {}\""], ["proof (prove)\nusing this:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {}", "by blast"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from critical_empty_intro[OF no_consts t1(3) _ this] t1"], ["proof (chain)\npicking this:\n  0 \\<le> t - t1 \\<Longrightarrow>\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'", "have \"(?v \\<oplus> ?t) \\<in> ?R'\""], ["proof (prove)\nusing this:\n  0 \\<le> t - t1 \\<Longrightarrow>\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'", "by auto"], ["proof (state)\nthis:\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from region_unique[OF less(2) this] less(2) valid t2"], ["proof (chain)\npicking this:\n  region X I' r' \\<in> \\<R> \\<Longrightarrow>\n  [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R> = region X I' r'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I' r'\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I' r'", "show ?thesis"], ["proof (prove)\nusing this:\n  region X I' r' \\<in> \\<R> \\<Longrightarrow>\n  [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R> = region X I' r'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I' r'\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n  {}", "obtain x c where x: \"x \\<in> X\" \"I x = Intv c\" \"v x + t \\<ge> c + 1\""], ["proof (prove)\nusing this:\n  {x \\<in> X.\n   \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<lbrakk>x \\<in> X; I x = Intv c;\n         real (c + 1) \\<le> v x + t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t", "have F: \"\\<not> (\\<forall> x \\<in> X. \\<exists> c. I x = Greater c)\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n  real (c + 1) \\<le> v x + t\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>x\\<in>X. \\<exists>c. I x = Greater c)", "by force"], ["proof (state)\nthis:\n  \\<not> (\\<forall>x\\<in>X. \\<exists>c. I x = Greater c)\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"\\<exists> x \\<in> X. isConst (I x)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>x\\<in>X. isConst (I x))\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>x\\<in>X. isConst (I x))", "have \"\\<forall>x\\<in>X. \\<not>isConst (I x)\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>x\\<in>X. isConst (I x))\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. \\<not> isConst (I x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. \\<not> isConst (I x)\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. \\<not> (\\<exists>x\\<in>X. isConst (I x)) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from intro_intv[OF \\<open>v \\<in> ?R\\<close> \\<open>v' \\<in> ?R\\<close> this x less(3,7,8)]"], ["proof (chain)\npicking this:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<Longrightarrow>\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\nusing this:\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I x = Intv c \\<and> real (c + 1) \\<le> v x + t} \\<Longrightarrow>\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>X. isConst (I x)", "have \"{x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>X. isConst (I x)\n\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Const c} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from const_dest[OF True \\<open>t > 0\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>t1\\<ge>0.\n     \\<exists>t2\\<ge>0.\n        \\<exists>I' r'.\n           t1 \\<le> t \\<and>\n           v \\<oplus> t1 \\<in> region X I' r' \\<and>\n           t2 \\<le> t \\<and>\n           v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n           valid_region X k I' r' \\<and>\n           (\\<forall>x\\<in>X. \\<not> isConst (I' x)) \\<and>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}", "obtain t1 t2 I' r'\n          where t1:  \"t1 \\<ge> 0\" \"t1 \\<le> t\" \"(v \\<oplus> t1) \\<in> region X I' r'\"\n          and   t2:  \"t2 \\<ge> 0\" \"t2 \\<le> t\" \"(v' \\<oplus> t2) \\<in> region X I' r'\"\n          and valid: \"valid_region X k I' r'\"\n          and no_consts: \"\\<forall> x \\<in> X. \\<not> isConst (I' x)\"\n          and   C:   \"?C = {x \\<in> X. \\<exists>c. I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\""], ["proof (prove)\nusing this:\n  \\<exists>t1\\<ge>0.\n     \\<exists>t2\\<ge>0.\n        \\<exists>I' r'.\n           t1 \\<le> t \\<and>\n           v \\<oplus> t1 \\<in> region X I' r' \\<and>\n           t2 \\<le> t \\<and>\n           v' \\<oplus> t2 \\<in> region X I' r' \\<and>\n           valid_region X k I' r' \\<and>\n           (\\<forall>x\\<in>X. \\<not> isConst (I' x)) \\<and>\n           {x \\<in> X.\n            \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n           {x \\<in> X.\n            \\<exists>c.\n               I' x = Intv c \\<and>\n               real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. (\\<And>t1 I' r' t2.\n        \\<lbrakk>0 \\<le> t1; t1 \\<le> t; v \\<oplus> t1 \\<in> region X I' r';\n         0 \\<le> t2; t2 \\<le> t; v' \\<oplus> t2 \\<in> region X I' r';\n         valid_region X k I' r'; \\<forall>x\\<in>X. \\<not> isConst (I' x);\n         {x \\<in> X.\n          \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n         {x \\<in> X.\n          \\<exists>c.\n             I' x = Intv c \\<and>\n             real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I' r'\n  valid_region X k I' r'\n  \\<forall>x\\<in>X. \\<not> isConst (I' x)\n  {x \\<in> X. \\<exists>c. I x = Intv c \\<and> real (c + 1) \\<le> v x + t} =\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and> real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?v = \"v \\<oplus> t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?t = \"t - t1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?C' = \"{x \\<in> X. \\<exists>c. I' x = Intv c \\<and> real (c + 1) \\<le> ?v x + ?t}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "let ?R' = \"region X I' r'\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>X. isConst (I x) \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "proof (cases \"?C' = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case False"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "with intro_intv[OF t1(3) t2(3) no_consts _ _ _ valid _ _ C] \\<open>t < 1\\<close> t1"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<in> X; I' ?x2 = Intv ?c2;\n   real (?c2 + 1) \\<le> (v \\<oplus> t1) ?x2 + (t - t1); 0 \\<le> t - t1;\n   t - t1 < 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       (v' \\<oplus> t2) \\<oplus> t'\n                       \\<in> [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R>\n  t < 1\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n  {}", "obtain t' where\n            \"t' \\<ge> 0\" \"((v' \\<oplus> t2) \\<oplus> t') \\<in> [(v \\<oplus> t)]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> X; I' ?x2 = Intv ?c2;\n   real (?c2 + 1) \\<le> (v \\<oplus> t1) ?x2 + (t - t1); 0 \\<le> t - t1;\n   t - t1 < 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t'\\<ge>0.\n                       (v' \\<oplus> t2) \\<oplus> t'\n                       \\<in> [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R>\n  t < 1\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>t'.\n        \\<lbrakk>0 \\<le> t';\n         (v' \\<oplus> t2) \\<oplus> t'\n         \\<in> [v \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  0 \\<le> t'\n  (v' \\<oplus> t2) \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  0 \\<le> t'\n  (v' \\<oplus> t2) \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"((v' \\<oplus> t2) \\<oplus> t') = (v' \\<oplus> (t2 + t'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v' \\<oplus> t2) \\<oplus> t' = v' \\<oplus> t2 + t'", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  (v' \\<oplus> t2) \\<oplus> t' = v' \\<oplus> t2 + t'\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  (v' \\<oplus> t2) \\<oplus> t' = v' \\<oplus> t2 + t'\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "have \"t2 + t' \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> t2 + t'", "using \\<open>t' \\<ge> 0\\<close> \\<open>t2 \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> t'\n  0 \\<le> t2\n\ngoal (1 subgoal):\n 1. 0 \\<le> t2 + t'", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t2 + t'\n\ngoal (2 subgoals):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n 2. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> t'\n  (v' \\<oplus> t2) \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  (v' \\<oplus> t2) \\<oplus> t' = v' \\<oplus> t2 + t'\n  0 \\<le> t2 + t'", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> t'\n  (v' \\<oplus> t2) \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n  (v' \\<oplus> t2) \\<oplus> t' = v' \\<oplus> t2 + t'\n  0 \\<le> t2 + t'\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by metis"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "case True"], ["proof (state)\nthis:\n  {x \\<in> X.\n   \\<exists>c.\n      I' x = Intv c \\<and>\n      real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n  {}\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from critical_empty_intro[OF no_consts t1(3) _ this] t1"], ["proof (chain)\npicking this:\n  0 \\<le> t - t1 \\<Longrightarrow>\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'", "have \"((v \\<oplus> t1) \\<oplus> ?t) \\<in> ?R'\""], ["proof (prove)\nusing this:\n  0 \\<le> t - t1 \\<Longrightarrow>\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'\n  0 \\<le> t1\n  t1 \\<le> t\n  v \\<oplus> t1 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'", "by auto"], ["proof (state)\nthis:\n  (v \\<oplus> t1) \\<oplus> t - t1 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. {x \\<in> X.\n     \\<exists>c.\n        I' x = Intv c \\<and>\n        real (c + 1) \\<le> (v \\<oplus> t1) x + (t - t1)} =\n    {} \\<Longrightarrow>\n    \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "from region_unique[OF less(2) this] less(2) valid t2"], ["proof (chain)\npicking this:\n  region X I' r' \\<in> \\<R> \\<Longrightarrow>\n  [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R> = region X I' r'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I' r'\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I' r'", "show ?thesis"], ["proof (prove)\nusing this:\n  region X I' r' \\<in> \\<R> \\<Longrightarrow>\n  [(v \\<oplus> t1) \\<oplus> t - t1]\\<^sub>\\<R> = region X I' r'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_region X k I' r'\n  0 \\<le> t2\n  t2 \\<le> t\n  v' \\<oplus> t2 \\<in> region X I' r'\n\ngoal (1 subgoal):\n 1. \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>", "by (auto simp: cval_add_def)"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>t'\\<ge>0. v' \\<oplus> t' \\<in> [v \\<oplus> t]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Finally, we can put the two pieces together: for a non-negative shift @{term t}, we first shift\n  @{term \"floor t\"} and then @{term \"frac t\"}.\n\\<close>"], ["", "lemma set_of_regions:\n  fixes X k\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"R \\<in> \\<R>\" \"v \\<in> R\" \"R' \\<in> Succ \\<R> R\" \"finite X\"\n  shows \"\\<exists> t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  R' \\<in> Succ \\<R> R\n  finite X\n\ngoal (1 subgoal):\n 1. \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "from assms(4)"], ["proof (chain)\npicking this:\n  R' \\<in> Succ \\<R> R", "obtain v' t where v': \"v' \\<in> R\" \"R' \\<in> \\<R>\" \"0 \\<le> t\" \"R' = [v' \\<oplus> t]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  R' \\<in> Succ \\<R> R\n\ngoal (1 subgoal):\n 1. (\\<And>v' t.\n        \\<lbrakk>v' \\<in> R; R' \\<in> \\<R>; 0 \\<le> t;\n         R' = [v' \\<oplus> t]\\<^sub>\\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  v' \\<in> R\n  R' \\<in> \\<R>\n  0 \\<le> t\n  R' = [v' \\<oplus> t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "obtain t1 :: int where t1: \"t1 = floor t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t1.\n        t1 = \\<lfloor>t\\<rfloor> \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t1 = \\<lfloor>t\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "with v'(3)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  t1 = \\<lfloor>t\\<rfloor>", "have \"t1 \\<ge> 0\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  t1 = \\<lfloor>t\\<rfloor>\n\ngoal (1 subgoal):\n 1. 0 \\<le> t1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "from int_shift_equiv[OF v'(1) \\<open>v \\<in> R\\<close> assms(2)[unfolded \\<R>_def] this] \\<R>_def"], ["proof (chain)\npicking this:\n  v \\<oplus> real_of_int t1\n  \\<in> [v' \\<oplus>\n         real_of_int t1]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have *: \"(v \\<oplus> t1) \\<in> [v' \\<oplus> t1]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  v \\<oplus> real_of_int t1\n  \\<in> [v' \\<oplus>\n         real_of_int t1]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. v \\<oplus> real_of_int t1 \\<in> [v' \\<oplus> real_of_int t1]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> real_of_int t1 \\<in> [v' \\<oplus> real_of_int t1]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "let ?v = \"(v \\<oplus> t1)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "let ?t2 = \"frac t\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "have frac: \"0 \\<le> ?t2\" \"?t2 < 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> frac t &&& frac t < 1", "by (auto simp: frac_lt_1)"], ["proof (state)\nthis:\n  0 \\<le> frac t\n  frac t < 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "let ?R = \"[v' \\<oplus> t1]\\<^sub>\\<R>\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "from regions_closed[OF _ assms(2) v'(1)] \\<open>t1 \\<ge> 0\\<close> \\<R>_def"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> [v' \\<oplus> ?t]\\<^sub>\\<R> \\<in> \\<R>\n  0 \\<le> t1\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \"?R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> [v' \\<oplus> ?t]\\<^sub>\\<R> \\<in> \\<R>\n  0 \\<le> t1\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "with assms"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  R' \\<in> Succ \\<R> R\n  finite X\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> \\<in> \\<R>", "obtain I r where R: \"?R = region X I r\" \"valid_region X k I r\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  R' \\<in> Succ \\<R> R\n  finite X\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>[v' \\<oplus> real_of_int t1]\\<^sub>\\<R> = region X I r;\n         valid_region X k I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> = region X I r\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "with *"], ["proof (chain)\npicking this:\n  v \\<oplus> real_of_int t1 \\<in> [v' \\<oplus> real_of_int t1]\\<^sub>\\<R>\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> = region X I r\n  valid_region X k I r", "have v: \"?v \\<in> region X I r\""], ["proof (prove)\nusing this:\n  v \\<oplus> real_of_int t1 \\<in> [v' \\<oplus> real_of_int t1]\\<^sub>\\<R>\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> = region X I r\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. v \\<oplus> real_of_int t1 \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> real_of_int t1 \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "from R regions_closed'[OF _ assms(2) v'(1)] \\<open>t1 \\<ge> 0\\<close> \\<R>_def"], ["proof (chain)\npicking this:\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> = region X I r\n  valid_region X k I r\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> v' \\<oplus> ?t \\<in> [v' \\<oplus> ?t]\\<^sub>\\<R>\n  0 \\<le> t1\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \"(v' \\<oplus> t1) \\<in> region X I r\""], ["proof (prove)\nusing this:\n  [v' \\<oplus> real_of_int t1]\\<^sub>\\<R> = region X I r\n  valid_region X k I r\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> v' \\<oplus> ?t \\<in> [v' \\<oplus> ?t]\\<^sub>\\<R>\n  0 \\<le> t1\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. v' \\<oplus> real_of_int t1 \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  v' \\<oplus> real_of_int t1 \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "from set_of_regions_lt_1[OF R(2) this v assms(5) frac] \\<R>_def"], ["proof (chain)\npicking this:\n  \\<exists>t'\\<ge>0.\n     (v \\<oplus> real_of_int t1) \\<oplus> t'\n     \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus>\n            frac t]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "obtain t2 where\n    \"t2 \\<ge> 0\" \"(?v \\<oplus> t2) \\<in> [(v' \\<oplus> t1) \\<oplus> ?t2]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<exists>t'\\<ge>0.\n     (v \\<oplus> real_of_int t1) \\<oplus> t'\n     \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus>\n            frac t]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. (\\<And>t2.\n        \\<lbrakk>0 \\<le> t2;\n         (v \\<oplus> real_of_int t1) \\<oplus> t2\n         \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus>\n                frac t]\\<^sub>\\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t2\n  (v \\<oplus> real_of_int t1) \\<oplus> t2\n  \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus> frac t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "moreover"], ["proof (state)\nthis:\n  0 \\<le> t2\n  (v \\<oplus> real_of_int t1) \\<oplus> t2\n  \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus> frac t]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "from t1"], ["proof (chain)\npicking this:\n  t1 = \\<lfloor>t\\<rfloor>", "have \"(v \\<oplus> (t1 + t2)) = (?v \\<oplus> t2)\" \"v' \\<oplus> t = ((v' \\<oplus> t1) \\<oplus> ?t2)\""], ["proof (prove)\nusing this:\n  t1 = \\<lfloor>t\\<rfloor>\n\ngoal (1 subgoal):\n 1. v \\<oplus> real_of_int t1 + t2 =\n    (v \\<oplus> real_of_int t1) \\<oplus> t2 &&&\n    v' \\<oplus> t = (v' \\<oplus> real_of_int t1) \\<oplus> frac t", "by (auto simp: frac_def cval_add_def)"], ["proof (state)\nthis:\n  v \\<oplus> real_of_int t1 + t2 = (v \\<oplus> real_of_int t1) \\<oplus> t2\n  v' \\<oplus> t = (v' \\<oplus> real_of_int t1) \\<oplus> frac t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> t2\n  (v \\<oplus> real_of_int t1) \\<oplus> t2\n  \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus> frac t]\\<^sub>\\<R>\n  v \\<oplus> real_of_int t1 + t2 = (v \\<oplus> real_of_int t1) \\<oplus> t2\n  v' \\<oplus> t = (v' \\<oplus> real_of_int t1) \\<oplus> frac t", "have \"(v \\<oplus> (t1 + t2)) \\<in> [v' \\<oplus> t]\\<^sub>\\<R>\" \"t1 + t2 \\<ge> 0\""], ["proof (prove)\nusing this:\n  0 \\<le> t2\n  (v \\<oplus> real_of_int t1) \\<oplus> t2\n  \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus> frac t]\\<^sub>\\<R>\n  v \\<oplus> real_of_int t1 + t2 = (v \\<oplus> real_of_int t1) \\<oplus> t2\n  v' \\<oplus> t = (v' \\<oplus> real_of_int t1) \\<oplus> frac t\n\ngoal (1 subgoal):\n 1. v \\<oplus> real_of_int t1 + t2 \\<in> [v' \\<oplus> t]\\<^sub>\\<R> &&&\n    0 \\<le> real_of_int t1 + t2", "using \\<open>t1 \\<ge> 0\\<close> \\<open>t2 \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> t2\n  (v \\<oplus> real_of_int t1) \\<oplus> t2\n  \\<in> [(v' \\<oplus> real_of_int t1) \\<oplus> frac t]\\<^sub>\\<R>\n  v \\<oplus> real_of_int t1 + t2 = (v \\<oplus> real_of_int t1) \\<oplus> t2\n  v' \\<oplus> t = (v' \\<oplus> real_of_int t1) \\<oplus> frac t\n  0 \\<le> t1\n  0 \\<le> t2\n\ngoal (1 subgoal):\n 1. v \\<oplus> real_of_int t1 + t2 \\<in> [v' \\<oplus> t]\\<^sub>\\<R> &&&\n    0 \\<le> real_of_int t1 + t2", "by auto"], ["proof (state)\nthis:\n  v \\<oplus> real_of_int t1 + t2 \\<in> [v' \\<oplus> t]\\<^sub>\\<R>\n  0 \\<le> real_of_int t1 + t2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n     R \\<in> \\<R>; v \\<in> R; R' \\<in> Succ \\<R> R; finite X\\<rbrakk>\n    \\<Longrightarrow> \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "with region_unique[OF _ this(1)] v'(2,4) \\<R>_def"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   [v' \\<oplus> t]\\<^sub>\\<R> \\<in> ?\\<R>\\<rbrakk>\n  \\<Longrightarrow> [v \\<oplus> real_of_int t1 + t2]\\<^sub>?\\<R> =\n                    [v' \\<oplus> t]\\<^sub>\\<R>\n  R' \\<in> \\<R>\n  R' = [v' \\<oplus> t]\\<^sub>\\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<oplus> real_of_int t1 + t2 \\<in> [v' \\<oplus> t]\\<^sub>\\<R>\n  0 \\<le> real_of_int t1 + t2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   [v' \\<oplus> t]\\<^sub>\\<R> \\<in> ?\\<R>\\<rbrakk>\n  \\<Longrightarrow> [v \\<oplus> real_of_int t1 + t2]\\<^sub>?\\<R> =\n                    [v' \\<oplus> t]\\<^sub>\\<R>\n  R' \\<in> \\<R>\n  R' = [v' \\<oplus> t]\\<^sub>\\<R>\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<oplus> real_of_int t1 + t2 \\<in> [v' \\<oplus> t]\\<^sub>\\<R>\n  0 \\<le> real_of_int t1 + t2\n\ngoal (1 subgoal):\n 1. \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'", "by blast"], ["proof (state)\nthis:\n  \\<exists>t\\<ge>0. [v \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Compability With Clock Constraints\\<close>"], ["", "definition ccval (\"\\<lbrace>_\\<rbrace>\" [100]) where \"ccval cc \\<equiv> {v. v \\<turnstile> cc}\""], ["", "definition ccompatible\nwhere\n  \"ccompatible \\<R> cc \\<equiv> \\<forall> R \\<in> \\<R>. R \\<subseteq> ccval cc \\<or> ccval cc \\<inter> R = {}\""], ["", "lemma ccompatible1:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (EQ x c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ccompatible \\<R> (EQ x c)", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> (EQ x c)", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<forall>R\\<in>\\<R>.\n       R \\<subseteq> \\<lbrace>EQ x c\\<rbrace> \\<or>\n       \\<lbrace>EQ x c\\<rbrace> \\<inter> R = {}", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "case A: (1 I r v u)"], ["proof (state)\nthis:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n  valid_region X k I r\n  v \\<in> region X I r\n  v \\<notin> \\<lbrace>EQ x c\\<rbrace>\n  u \\<in> \\<lbrace>EQ x c\\<rbrace>\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "from A(3)"], ["proof (chain)\npicking this:\n  c \\<in> \\<nat>", "obtain d where d: \"c = of_nat d\""], ["proof (prove)\nusing this:\n  c \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding Nats_def"], ["proof (prove)\nusing this:\n  c \\<in> range real\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  c = real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(8)"], ["proof (chain)\npicking this:\n  u \\<in> \\<lbrace>EQ x c\\<rbrace>\n  c = real d", "have u: \"u x = c\" \"u x = d\""], ["proof (prove)\nusing this:\n  u \\<in> \\<lbrace>EQ x c\\<rbrace>\n  c = real d\n\ngoal (1 subgoal):\n 1. u x = c &&& u x = real d", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  u \\<in> {v. v \\<turnstile> EQ x c}\n  c = real d\n\ngoal (1 subgoal):\n 1. u x = c &&& u x = real d", "by auto"], ["proof (state)\nthis:\n  u x = c\n  u x = real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"I x = Const d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I x = Const d", "proof (cases \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> I x = Const d\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "case (1 c')"], ["proof (state)\nthis:\n  I x = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> I x = Const d\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "with A(4,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Const c'", "have \"u x = c'\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Const c'\n\ngoal (1 subgoal):\n 1. u x = real c'", "by fastforce"], ["proof (state)\nthis:\n  u x = real c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> I x = Const d\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "with 1 u"], ["proof (chain)\npicking this:\n  I x = Const c'\n  u x = c\n  u x = real d\n  u x = real c'", "show ?case"], ["proof (prove)\nusing this:\n  I x = Const c'\n  u x = c\n  u x = real d\n  u x = real c'\n\ngoal (1 subgoal):\n 1. I x = Const d", "by auto"], ["proof (state)\nthis:\n  I x = Const d\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "case (2 c')"], ["proof (state)\nthis:\n  I x = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "with A(4,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Intv c'", "have \"c' < u x\" \"u x < c' + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Intv c'\n\ngoal (1 subgoal):\n 1. real c' < u x &&& u x < real (c' + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c' < u x\n  u x < real (c' + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> I x = Const d\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "with 2 u"], ["proof (chain)\npicking this:\n  I x = Intv c'\n  u x = c\n  u x = real d\n  real c' < u x\n  u x < real (c' + 1)", "show ?case"], ["proof (prove)\nusing this:\n  I x = Intv c'\n  u x = c\n  u x = real d\n  real c' < u x\n  u x < real (c' + 1)\n\ngoal (1 subgoal):\n 1. I x = Const d", "by auto"], ["proof (state)\nthis:\n  I x = Const d\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "case (3 c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "with A(4,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Greater c'", "have \"c' < u x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < u x", "by fastforce"], ["proof (state)\nthis:\n  real c' < u x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "moreover"], ["proof (state)\nthis:\n  real c' < u x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "from 3 A(4,5)"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r", "have \"c' \\<ge> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. k x \\<le> c'", "by fastforce"], ["proof (state)\nthis:\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> I x = Const d", "ultimately"], ["proof (chain)\npicking this:\n  real c' < u x\n  k x \\<le> c'", "show ?case"], ["proof (prove)\nusing this:\n  real c' < u x\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. I x = Const d", "using u A(2)"], ["proof (prove)\nusing this:\n  real c' < u x\n  k x \\<le> c'\n  u x = c\n  u x = real d\n  c \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. I x = Const d", "by auto"], ["proof (state)\nthis:\n  I x = Const d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  I x = Const d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(4,6) d"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  c = real d\n  I x = Const d", "have \"v x = c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  c = real d\n  I x = Const d\n\ngoal (1 subgoal):\n 1. v x = c", "by fastforce"], ["proof (state)\nthis:\n  v x = c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(3,5)"], ["proof (chain)\npicking this:\n  c \\<in> \\<nat>\n  valid_region X k I r\n  v x = c", "have \"v \\<turnstile> EQ x c\""], ["proof (prove)\nusing this:\n  c \\<in> \\<nat>\n  valid_region X k I r\n  v x = c\n\ngoal (1 subgoal):\n 1. v \\<turnstile> EQ x c", "by auto"], ["proof (state)\nthis:\n  v \\<turnstile> EQ x c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>EQ x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>EQ x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(7)"], ["proof (chain)\npicking this:\n  v \\<notin> \\<lbrace>EQ x c\\<rbrace>\n  v \\<turnstile> EQ x c", "show False"], ["proof (prove)\nusing this:\n  v \\<notin> \\<lbrace>EQ x c\\<rbrace>\n  v \\<turnstile> EQ x c\n\ngoal (1 subgoal):\n 1. False", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  v \\<notin> {v. v \\<turnstile> EQ x c}\n  v \\<turnstile> EQ x c\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ccompatible2:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (LT x c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ccompatible \\<R> (LT x c)", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> (LT x c)", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<forall>R\\<in>\\<R>.\n       R \\<subseteq> \\<lbrace>LT x c\\<rbrace> \\<or>\n       \\<lbrace>LT x c\\<rbrace> \\<inter> R = {}", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "case A: (1 I r v u)"], ["proof (state)\nthis:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n  valid_region X k I r\n  v \\<in> region X I r\n  v \\<notin> \\<lbrace>LT x c\\<rbrace>\n  u \\<in> \\<lbrace>LT x c\\<rbrace>\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "from A(3)"], ["proof (chain)\npicking this:\n  c \\<in> \\<nat>", "obtain d :: nat where d: \"c = of_nat d\""], ["proof (prove)\nusing this:\n  c \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding Nats_def"], ["proof (prove)\nusing this:\n  c \\<in> range real\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  c = real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(8)"], ["proof (chain)\npicking this:\n  u \\<in> \\<lbrace>LT x c\\<rbrace>\n  c = real d", "have u: \"u x < c\" \"u x < d\""], ["proof (prove)\nusing this:\n  u \\<in> \\<lbrace>LT x c\\<rbrace>\n  c = real d\n\ngoal (1 subgoal):\n 1. u x < c &&& u x < real d", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  u \\<in> {v. v \\<turnstile> LT x c}\n  c = real d\n\ngoal (1 subgoal):\n 1. u x < c &&& u x < real d", "by auto"], ["proof (state)\nthis:\n  u x < c\n  u x < real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"v x < c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v x < c", "proof (cases \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> v x < c\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "case (1 c')"], ["proof (state)\nthis:\n  I x = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> v x < c\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with A(4,6,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Const c'", "have \"u x = c'\" \"v x = c'\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Const c'\n\ngoal (1 subgoal):\n 1. u x = real c' &&& v x = real c'", "by fastforce+"], ["proof (state)\nthis:\n  u x = real c'\n  v x = real c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> v x < c\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with u"], ["proof (chain)\npicking this:\n  u x < c\n  u x < real d\n  u x = real c'\n  v x = real c'", "show \"v x < c\""], ["proof (prove)\nusing this:\n  u x < c\n  u x < real d\n  u x = real c'\n  v x = real c'\n\ngoal (1 subgoal):\n 1. v x < c", "by auto"], ["proof (state)\nthis:\n  v x < c\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "case (2 c')"], ["proof (state)\nthis:\n  I x = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with A(4,6,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'", "have B: \"c' < u x\" \"u x < c' + 1\" \"c' < v x\" \"v x < c' + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'\n\ngoal (1 subgoal):\n 1. (real c' < u x &&& u x < real (c' + 1)) &&&\n    real c' < v x &&& v x < real (c' + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with u A(3)"], ["proof (chain)\npicking this:\n  u x < c\n  u x < real d\n  c \\<in> \\<nat>\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)", "have \"c' + 1 \\<le> d\""], ["proof (prove)\nusing this:\n  u x < c\n  u x < real d\n  c \\<in> \\<nat>\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (1 subgoal):\n 1. c' + 1 \\<le> d", "by auto"], ["proof (state)\nthis:\n  c' + 1 \\<le> d\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with d"], ["proof (chain)\npicking this:\n  c = real d\n  c' + 1 \\<le> d", "have \"c' + 1 \\<le> c\""], ["proof (prove)\nusing this:\n  c = real d\n  c' + 1 \\<le> d\n\ngoal (1 subgoal):\n 1. real (c' + 1) \\<le> c", "by auto"], ["proof (state)\nthis:\n  real (c' + 1) \\<le> c\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x < c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with B u"], ["proof (chain)\npicking this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  u x < c\n  u x < real d\n  real (c' + 1) \\<le> c", "show \"v x < c\""], ["proof (prove)\nusing this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  u x < c\n  u x < real d\n  real (c' + 1) \\<le> c\n\ngoal (1 subgoal):\n 1. v x < c", "by auto"], ["proof (state)\nthis:\n  v x < c\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "case (3 c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "with A(4,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Greater c'", "have \"c' < u x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < u x", "by fastforce"], ["proof (state)\nthis:\n  real c' < u x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "moreover"], ["proof (state)\nthis:\n  real c' < u x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "from 3 A(4,5)"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r", "have \"c' \\<ge> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. k x \\<le> c'", "by fastforce"], ["proof (state)\nthis:\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x < c", "ultimately"], ["proof (chain)\npicking this:\n  real c' < u x\n  k x \\<le> c'", "show ?case"], ["proof (prove)\nusing this:\n  real c' < u x\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. v x < c", "using u A(2)"], ["proof (prove)\nusing this:\n  real c' < u x\n  k x \\<le> c'\n  u x < c\n  u x < real d\n  c \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. v x < c", "by auto"], ["proof (state)\nthis:\n  v x < c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v x < c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(4,6)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  v x < c", "have \"v \\<turnstile> LT x c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  v x < c\n\ngoal (1 subgoal):\n 1. v \\<turnstile> LT x c", "by auto"], ["proof (state)\nthis:\n  v \\<turnstile> LT x c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(7)"], ["proof (chain)\npicking this:\n  v \\<notin> \\<lbrace>LT x c\\<rbrace>\n  v \\<turnstile> LT x c", "show False"], ["proof (prove)\nusing this:\n  v \\<notin> \\<lbrace>LT x c\\<rbrace>\n  v \\<turnstile> LT x c\n\ngoal (1 subgoal):\n 1. False", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  v \\<notin> {v. v \\<turnstile> LT x c}\n  v \\<turnstile> LT x c\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ccompatible3:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (LE x c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ccompatible \\<R> (LE x c)", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> (LE x c)", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<forall>R\\<in>\\<R>.\n       R \\<subseteq> \\<lbrace>LE x c\\<rbrace> \\<or>\n       \\<lbrace>LE x c\\<rbrace> \\<inter> R = {}", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "case A: (1 I r v u)"], ["proof (state)\nthis:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n  valid_region X k I r\n  v \\<in> region X I r\n  v \\<notin> \\<lbrace>LE x c\\<rbrace>\n  u \\<in> \\<lbrace>LE x c\\<rbrace>\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "from A(3)"], ["proof (chain)\npicking this:\n  c \\<in> \\<nat>", "obtain d :: nat where d: \"c = of_nat d\""], ["proof (prove)\nusing this:\n  c \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding Nats_def"], ["proof (prove)\nusing this:\n  c \\<in> range real\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  c = real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(8)"], ["proof (chain)\npicking this:\n  u \\<in> \\<lbrace>LE x c\\<rbrace>\n  c = real d", "have u: \"u x \\<le> c\" \"u x \\<le> d\""], ["proof (prove)\nusing this:\n  u \\<in> \\<lbrace>LE x c\\<rbrace>\n  c = real d\n\ngoal (1 subgoal):\n 1. u x \\<le> c &&& u x \\<le> real d", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  u \\<in> {v. v \\<turnstile> LE x c}\n  c = real d\n\ngoal (1 subgoal):\n 1. u x \\<le> c &&& u x \\<le> real d", "by auto"], ["proof (state)\nthis:\n  u x \\<le> c\n  u x \\<le> real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"v x \\<le> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v x \\<le> c", "proof (cases \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "case (1 c')"], ["proof (state)\nthis:\n  I x = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "with A(4,6,9) u"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  u x \\<le> c\n  u x \\<le> real d\n  I x = Const c'", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  u x \\<le> c\n  u x \\<le> real d\n  I x = Const c'\n\ngoal (1 subgoal):\n 1. v x \\<le> c", "by fastforce"], ["proof (state)\nthis:\n  v x \\<le> c\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "case (2 c')"], ["proof (state)\nthis:\n  I x = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "with A(4,6,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'", "have B: \"c' < u x\" \"u x < c' + 1\" \"c' < v x\" \"v x < c' + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'\n\ngoal (1 subgoal):\n 1. (real c' < u x &&& u x < real (c' + 1)) &&&\n    real c' < v x &&& v x < real (c' + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "with u A(3)"], ["proof (chain)\npicking this:\n  u x \\<le> c\n  u x \\<le> real d\n  c \\<in> \\<nat>\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)", "have \"c' + 1 \\<le> d\""], ["proof (prove)\nusing this:\n  u x \\<le> c\n  u x \\<le> real d\n  c \\<in> \\<nat>\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (1 subgoal):\n 1. c' + 1 \\<le> d", "by auto"], ["proof (state)\nthis:\n  c' + 1 \\<le> d\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "with d u A(3)"], ["proof (chain)\npicking this:\n  c = real d\n  u x \\<le> c\n  u x \\<le> real d\n  c \\<in> \\<nat>\n  c' + 1 \\<le> d", "have \"c' + 1 \\<le> c\""], ["proof (prove)\nusing this:\n  c = real d\n  u x \\<le> c\n  u x \\<le> real d\n  c \\<in> \\<nat>\n  c' + 1 \\<le> d\n\ngoal (1 subgoal):\n 1. real (c' + 1) \\<le> c", "by auto"], ["proof (state)\nthis:\n  real (c' + 1) \\<le> c\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> v x \\<le> c\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "with B u"], ["proof (chain)\npicking this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  u x \\<le> c\n  u x \\<le> real d\n  real (c' + 1) \\<le> c", "show \"v x \\<le> c\""], ["proof (prove)\nusing this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  u x \\<le> c\n  u x \\<le> real d\n  real (c' + 1) \\<le> c\n\ngoal (1 subgoal):\n 1. v x \\<le> c", "by auto"], ["proof (state)\nthis:\n  v x \\<le> c\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "case (3 c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "with A(4,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Greater c'", "have \"c' < u x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  u \\<in> region X I r\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < u x", "by fastforce"], ["proof (state)\nthis:\n  real c' < u x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "moreover"], ["proof (state)\nthis:\n  real c' < u x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "from 3 A(4,5)"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r", "have \"c' \\<ge> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. k x \\<le> c'", "by fastforce"], ["proof (state)\nthis:\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> v x \\<le> c", "ultimately"], ["proof (chain)\npicking this:\n  real c' < u x\n  k x \\<le> c'", "show ?case"], ["proof (prove)\nusing this:\n  real c' < u x\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. v x \\<le> c", "using u A(2)"], ["proof (prove)\nusing this:\n  real c' < u x\n  k x \\<le> c'\n  u x \\<le> c\n  u x \\<le> real d\n  c \\<le> real (k x)\n\ngoal (1 subgoal):\n 1. v x \\<le> c", "by auto"], ["proof (state)\nthis:\n  v x \\<le> c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v x \\<le> c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(4,6)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  v x \\<le> c", "have \"v \\<turnstile> LE x c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  v x \\<le> c\n\ngoal (1 subgoal):\n 1. v \\<turnstile> LE x c", "by auto"], ["proof (state)\nthis:\n  v \\<turnstile> LE x c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>LE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>LE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(7)"], ["proof (chain)\npicking this:\n  v \\<notin> \\<lbrace>LE x c\\<rbrace>\n  v \\<turnstile> LE x c", "show False"], ["proof (prove)\nusing this:\n  v \\<notin> \\<lbrace>LE x c\\<rbrace>\n  v \\<turnstile> LE x c\n\ngoal (1 subgoal):\n 1. False", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  v \\<notin> {v. v \\<turnstile> LE x c}\n  v \\<turnstile> LE x c\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ccompatible4:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (GT x c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ccompatible \\<R> (GT x c)", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> (GT x c)", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<forall>R\\<in>\\<R>.\n       R \\<subseteq> \\<lbrace>GT x c\\<rbrace> \\<or>\n       \\<lbrace>GT x c\\<rbrace> \\<inter> R = {}", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "case A: (1 I r v u)"], ["proof (state)\nthis:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n  valid_region X k I r\n  v \\<in> region X I r\n  v \\<notin> \\<lbrace>GT x c\\<rbrace>\n  u \\<in> \\<lbrace>GT x c\\<rbrace>\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "from A(3)"], ["proof (chain)\npicking this:\n  c \\<in> \\<nat>", "obtain d :: nat where d: \"c = of_nat d\""], ["proof (prove)\nusing this:\n  c \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding Nats_def"], ["proof (prove)\nusing this:\n  c \\<in> range real\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  c = real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(8)"], ["proof (chain)\npicking this:\n  u \\<in> \\<lbrace>GT x c\\<rbrace>\n  c = real d", "have u: \"u x > c\" \"u x > d\""], ["proof (prove)\nusing this:\n  u \\<in> \\<lbrace>GT x c\\<rbrace>\n  c = real d\n\ngoal (1 subgoal):\n 1. c < u x &&& real d < u x", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  u \\<in> {v. v \\<turnstile> GT x c}\n  c = real d\n\ngoal (1 subgoal):\n 1. c < u x &&& real d < u x", "by auto"], ["proof (state)\nthis:\n  c < u x\n  real d < u x\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"v x > c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c < v x", "proof (cases \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> c < v x\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "case (1 c')"], ["proof (state)\nthis:\n  I x = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> c < v x\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "with A(4,6,9) u"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  c < u x\n  real d < u x\n  I x = Const c'", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  c < u x\n  real d < u x\n  I x = Const c'\n\ngoal (1 subgoal):\n 1. c < v x", "by fastforce"], ["proof (state)\nthis:\n  c < v x\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "case (2 c')"], ["proof (state)\nthis:\n  I x = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "with A(4,6,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'", "have B: \"c' < u x\" \"u x < c' + 1\" \"c' < v x\" \"v x < c' + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'\n\ngoal (1 subgoal):\n 1. (real c' < u x &&& u x < real (c' + 1)) &&&\n    real c' < v x &&& v x < real (c' + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "with d u"], ["proof (chain)\npicking this:\n  c = real d\n  c < u x\n  real d < u x\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)", "have \"c' \\<ge> c\""], ["proof (prove)\nusing this:\n  c = real d\n  c < u x\n  real d < u x\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (1 subgoal):\n 1. c \\<le> real c'", "by auto"], ["proof (state)\nthis:\n  c \\<le> real c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c < v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "with B u"], ["proof (chain)\npicking this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  c < u x\n  real d < u x\n  c \\<le> real c'", "show \"v x > c\""], ["proof (prove)\nusing this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  c < u x\n  real d < u x\n  c \\<le> real c'\n\ngoal (1 subgoal):\n 1. c < v x", "by auto"], ["proof (state)\nthis:\n  c < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "case (3 c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "with A(4,6)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  I x = Greater c'", "have \"c' < v x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < v x", "by fastforce"], ["proof (state)\nthis:\n  real c' < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "moreover"], ["proof (state)\nthis:\n  real c' < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "from 3 A(4,5)"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r", "have \"c' \\<ge> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. k x \\<le> c'", "by fastforce"], ["proof (state)\nthis:\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c < v x", "ultimately"], ["proof (chain)\npicking this:\n  real c' < v x\n  k x \\<le> c'", "show ?case"], ["proof (prove)\nusing this:\n  real c' < v x\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. c < v x", "using A(2) u(1)"], ["proof (prove)\nusing this:\n  real c' < v x\n  k x \\<le> c'\n  c \\<le> real (k x)\n  c < u x\n\ngoal (1 subgoal):\n 1. c < v x", "by auto"], ["proof (state)\nthis:\n  c < v x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c < v x\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(4,6)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  c < v x", "have \"v \\<turnstile> GT x c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  c < v x\n\ngoal (1 subgoal):\n 1. v \\<turnstile> GT x c", "by auto"], ["proof (state)\nthis:\n  v \\<turnstile> GT x c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GT x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GT x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(7)"], ["proof (chain)\npicking this:\n  v \\<notin> \\<lbrace>GT x c\\<rbrace>\n  v \\<turnstile> GT x c", "show False"], ["proof (prove)\nusing this:\n  v \\<notin> \\<lbrace>GT x c\\<rbrace>\n  v \\<turnstile> GT x c\n\ngoal (1 subgoal):\n 1. False", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  v \\<notin> {v. v \\<turnstile> GT x c}\n  v \\<turnstile> GT x c\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ccompatible5:\n  fixes X k fixes c :: real\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"c \\<le> k x\" \"c \\<in> \\<nat>\" \"x \\<in> X\"\n  shows \"ccompatible \\<R> (GE x c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ccompatible \\<R> (GE x c)", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> (GE x c)", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<forall>R\\<in>\\<R>.\n       R \\<subseteq> \\<lbrace>GE x c\\<rbrace> \\<or>\n       \\<lbrace>GE x c\\<rbrace> \\<inter> R = {}", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "case A: (1 I r v u)"], ["proof (state)\nthis:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  c \\<le> real (k x)\n  c \\<in> \\<nat>\n  x \\<in> X\n  valid_region X k I r\n  v \\<in> region X I r\n  v \\<notin> \\<lbrace>GE x c\\<rbrace>\n  u \\<in> \\<lbrace>GE x c\\<rbrace>\n  u \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "from A(3)"], ["proof (chain)\npicking this:\n  c \\<in> \\<nat>", "obtain d :: nat where d: \"c = of_nat d\""], ["proof (prove)\nusing this:\n  c \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding Nats_def"], ["proof (prove)\nusing this:\n  c \\<in> range real\n\ngoal (1 subgoal):\n 1. (\\<And>d. c = real d \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  c = real d\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(8)"], ["proof (chain)\npicking this:\n  u \\<in> \\<lbrace>GE x c\\<rbrace>\n  c = real d", "have u: \"u x \\<ge> c\" \"u x \\<ge> d\""], ["proof (prove)\nusing this:\n  u \\<in> \\<lbrace>GE x c\\<rbrace>\n  c = real d\n\ngoal (1 subgoal):\n 1. c \\<le> u x &&& real d \\<le> u x", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  u \\<in> {v. v \\<turnstile> GE x c}\n  c = real d\n\ngoal (1 subgoal):\n 1. c \\<le> u x &&& real d \\<le> u x", "by auto"], ["proof (state)\nthis:\n  c \\<le> u x\n  real d \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"v x \\<ge> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<le> v x", "proof (cases \"I x\", goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "case (1 c')"], ["proof (state)\nthis:\n  I x = Const c'\n\ngoal (3 subgoals):\n 1. \\<And>x1. I x = Const x1 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 3. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "with A(4,6,9) u"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  c \\<le> u x\n  real d \\<le> u x\n  I x = Const c'", "show ?case"], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  c \\<le> u x\n  real d \\<le> u x\n  I x = Const c'\n\ngoal (1 subgoal):\n 1. c \\<le> v x", "by fastforce"], ["proof (state)\nthis:\n  c \\<le> v x\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "case (2 c')"], ["proof (state)\nthis:\n  I x = Intv c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "with A(4,6,9)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'", "have B: \"c' < u x\" \"u x < c' + 1\" \"c' < v x\" \"v x < c' + 1\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  u \\<in> region X I r\n  I x = Intv c'\n\ngoal (1 subgoal):\n 1. (real c' < u x &&& u x < real (c' + 1)) &&&\n    real c' < v x &&& v x < real (c' + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "with d u"], ["proof (chain)\npicking this:\n  c = real d\n  c \\<le> u x\n  real d \\<le> u x\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)", "have \"c' \\<ge> c\""], ["proof (prove)\nusing this:\n  c = real d\n  c \\<le> u x\n  real d \\<le> u x\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n\ngoal (1 subgoal):\n 1. c \\<le> real c'", "by auto"], ["proof (state)\nthis:\n  c \\<le> real c'\n\ngoal (2 subgoals):\n 1. \\<And>x2. I x = Intv x2 \\<Longrightarrow> c \\<le> v x\n 2. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "with B u"], ["proof (chain)\npicking this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  c \\<le> u x\n  real d \\<le> u x\n  c \\<le> real c'", "show \"v x \\<ge> c\""], ["proof (prove)\nusing this:\n  real c' < u x\n  u x < real (c' + 1)\n  real c' < v x\n  v x < real (c' + 1)\n  c \\<le> u x\n  real d \\<le> u x\n  c \\<le> real c'\n\ngoal (1 subgoal):\n 1. c \\<le> v x", "by auto"], ["proof (state)\nthis:\n  c \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "case (3 c')"], ["proof (state)\nthis:\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "with A(4,6)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  I x = Greater c'", "have \"c' < v x\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  I x = Greater c'\n\ngoal (1 subgoal):\n 1. real c' < v x", "by fastforce"], ["proof (state)\nthis:\n  real c' < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "moreover"], ["proof (state)\nthis:\n  real c' < v x\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "from 3 A(4,5)"], ["proof (chain)\npicking this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r", "have \"c' \\<ge> k x\""], ["proof (prove)\nusing this:\n  I x = Greater c'\n  x \\<in> X\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. k x \\<le> c'", "by fastforce"], ["proof (state)\nthis:\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. \\<And>x3. I x = Greater x3 \\<Longrightarrow> c \\<le> v x", "ultimately"], ["proof (chain)\npicking this:\n  real c' < v x\n  k x \\<le> c'", "show ?case"], ["proof (prove)\nusing this:\n  real c' < v x\n  k x \\<le> c'\n\ngoal (1 subgoal):\n 1. c \\<le> v x", "using A(2) u(1)"], ["proof (prove)\nusing this:\n  real c' < v x\n  k x \\<le> c'\n  c \\<le> real (k x)\n  c \\<le> u x\n\ngoal (1 subgoal):\n 1. c \\<le> v x", "by auto"], ["proof (state)\nthis:\n  c \\<le> v x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c \\<le> v x\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(4,6)"], ["proof (chain)\npicking this:\n  x \\<in> X\n  v \\<in> region X I r\n  c \\<le> v x", "have \"v \\<turnstile> GE x c\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  v \\<in> region X I r\n  c \\<le> v x\n\ngoal (1 subgoal):\n 1. v \\<turnstile> GE x c", "by auto"], ["proof (state)\nthis:\n  v \\<turnstile> GE x c\n\ngoal (1 subgoal):\n 1. \\<And>I r xa xaa.\n       \\<lbrakk>\\<R> \\<equiv> {region X I r |I r. valid_region X k I r};\n        c \\<le> real (k x); c \\<in> \\<nat>; x \\<in> X; valid_region X k I r;\n        xa \\<in> region X I r; xa \\<notin> \\<lbrace>GE x c\\<rbrace>;\n        xaa \\<in> \\<lbrace>GE x c\\<rbrace>; xaa \\<in> region X I r\\<rbrakk>\n       \\<Longrightarrow> False", "with A(7)"], ["proof (chain)\npicking this:\n  v \\<notin> \\<lbrace>GE x c\\<rbrace>\n  v \\<turnstile> GE x c", "show False"], ["proof (prove)\nusing this:\n  v \\<notin> \\<lbrace>GE x c\\<rbrace>\n  v \\<turnstile> GE x c\n\ngoal (1 subgoal):\n 1. False", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  v \\<notin> {v. v \\<turnstile> GE x c}\n  v \\<turnstile> GE x c\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ccompatible:\n  fixes X k fixes c :: nat\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"\\<forall>(x,m) \\<in> collect_clock_pairs cc. m \\<le> k x \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n  shows \"ccompatible \\<R> cc\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ccompatible \\<R> cc", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  \\<forall>(x, m)\\<in>collect_clock_pairs cc.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> cc", "proof (induction cc)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>cc1 cc2.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 \\<forall>(x, m)\\<in>collect_clock_pairs cc1.\n                    m \\<le> real (k x) \\<and>\n                    x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n                \\<Longrightarrow> ccompatible \\<R> cc1;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         \\<forall>(x, m)\\<in>collect_clock_pairs cc2.\n            m \\<le> real (k x) \\<and>\n            x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n        \\<Longrightarrow> ccompatible \\<R> cc2;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (AND cc1 cc2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (AND cc1 cc2)\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LT x1 x2)\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LE x1 x2)\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (EQ x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (EQ x1 x2)\n 5. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GT x1 x2)\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GE x1 x2)", "case (AND cc1 cc2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   \\<forall>a\\<in>collect_clock_pairs cc1.\n      case a of\n      (x, m) \\<Rightarrow>\n        m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n  \\<Longrightarrow> ccompatible \\<R> cc1\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   \\<forall>a\\<in>collect_clock_pairs cc2.\n      case a of\n      (x, m) \\<Rightarrow>\n        m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n  \\<Longrightarrow> ccompatible \\<R> cc2\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>a\\<in>collect_clock_pairs (AND cc1 cc2).\n     case a of\n     (x, m) \\<Rightarrow>\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (6 subgoals):\n 1. \\<And>cc1 cc2.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 \\<forall>(x, m)\\<in>collect_clock_pairs cc1.\n                    m \\<le> real (k x) \\<and>\n                    x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n                \\<Longrightarrow> ccompatible \\<R> cc1;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         \\<forall>(x, m)\\<in>collect_clock_pairs cc2.\n            m \\<le> real (k x) \\<and>\n            x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n        \\<Longrightarrow> ccompatible \\<R> cc2;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (AND cc1 cc2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (AND cc1 cc2)\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LT x1 x2)\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LE x1 x2)\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (EQ x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (EQ x1 x2)\n 5. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GT x1 x2)\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GE x1 x2)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   \\<forall>a\\<in>collect_clock_pairs cc1.\n      case a of\n      (x, m) \\<Rightarrow>\n        m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n  \\<Longrightarrow> ccompatible \\<R> cc1\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   \\<forall>a\\<in>collect_clock_pairs cc2.\n      case a of\n      (x, m) \\<Rightarrow>\n        m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n  \\<Longrightarrow> ccompatible \\<R> cc2\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>a\\<in>collect_clock_pairs (AND cc1 cc2).\n     case a of\n     (x, m) \\<Rightarrow>\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "have IH: \"ccompatible \\<R> cc1\" \"ccompatible \\<R> cc2\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   \\<forall>a\\<in>collect_clock_pairs cc1.\n      case a of\n      (x, m) \\<Rightarrow>\n        m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n  \\<Longrightarrow> ccompatible \\<R> cc1\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   \\<forall>a\\<in>collect_clock_pairs cc2.\n      case a of\n      (x, m) \\<Rightarrow>\n        m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n  \\<Longrightarrow> ccompatible \\<R> cc2\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>a\\<in>collect_clock_pairs (AND cc1 cc2).\n     case a of\n     (x, m) \\<Rightarrow>\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> cc1 &&& ccompatible \\<R> cc2", "by auto"], ["proof (state)\nthis:\n  ccompatible \\<R> cc1\n  ccompatible \\<R> cc2\n\ngoal (6 subgoals):\n 1. \\<And>cc1 cc2.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 \\<forall>(x, m)\\<in>collect_clock_pairs cc1.\n                    m \\<le> real (k x) \\<and>\n                    x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n                \\<Longrightarrow> ccompatible \\<R> cc1;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         \\<forall>(x, m)\\<in>collect_clock_pairs cc2.\n            m \\<le> real (k x) \\<and>\n            x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n        \\<Longrightarrow> ccompatible \\<R> cc2;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (AND cc1 cc2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (AND cc1 cc2)\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LT x1 x2)\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LE x1 x2)\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (EQ x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (EQ x1 x2)\n 5. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GT x1 x2)\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GE x1 x2)", "moreover"], ["proof (state)\nthis:\n  ccompatible \\<R> cc1\n  ccompatible \\<R> cc2\n\ngoal (6 subgoals):\n 1. \\<And>cc1 cc2.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 \\<forall>(x, m)\\<in>collect_clock_pairs cc1.\n                    m \\<le> real (k x) \\<and>\n                    x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n                \\<Longrightarrow> ccompatible \\<R> cc1;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         \\<forall>(x, m)\\<in>collect_clock_pairs cc2.\n            m \\<le> real (k x) \\<and>\n            x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n        \\<Longrightarrow> ccompatible \\<R> cc2;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (AND cc1 cc2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (AND cc1 cc2)\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LT x1 x2)\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LE x1 x2)\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (EQ x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (EQ x1 x2)\n 5. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GT x1 x2)\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GE x1 x2)", "have \"\\<lbrace>AND cc1 cc2\\<rbrace> = \\<lbrace>cc1\\<rbrace> \\<inter> \\<lbrace>cc2\\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace>AND cc1 cc2\\<rbrace> =\n    \\<lbrace>cc1\\<rbrace> \\<inter> \\<lbrace>cc2\\<rbrace>", "unfolding ccval_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {v. v \\<turnstile> AND cc1 cc2} =\n    {v. v \\<turnstile> cc1} \\<inter> {v. v \\<turnstile> cc2}", "by auto"], ["proof (state)\nthis:\n  \\<lbrace>AND cc1 cc2\\<rbrace> =\n  \\<lbrace>cc1\\<rbrace> \\<inter> \\<lbrace>cc2\\<rbrace>\n\ngoal (6 subgoals):\n 1. \\<And>cc1 cc2.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 \\<forall>(x, m)\\<in>collect_clock_pairs cc1.\n                    m \\<le> real (k x) \\<and>\n                    x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n                \\<Longrightarrow> ccompatible \\<R> cc1;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         \\<forall>(x, m)\\<in>collect_clock_pairs cc2.\n            m \\<le> real (k x) \\<and>\n            x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n        \\<Longrightarrow> ccompatible \\<R> cc2;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (AND cc1 cc2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (AND cc1 cc2)\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LT x1 x2)\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LE x1 x2)\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (EQ x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (EQ x1 x2)\n 5. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GT x1 x2)\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GE x1 x2)", "ultimately"], ["proof (chain)\npicking this:\n  ccompatible \\<R> cc1\n  ccompatible \\<R> cc2\n  \\<lbrace>AND cc1 cc2\\<rbrace> =\n  \\<lbrace>cc1\\<rbrace> \\<inter> \\<lbrace>cc2\\<rbrace>", "show ?case"], ["proof (prove)\nusing this:\n  ccompatible \\<R> cc1\n  ccompatible \\<R> cc2\n  \\<lbrace>AND cc1 cc2\\<rbrace> =\n  \\<lbrace>cc1\\<rbrace> \\<inter> \\<lbrace>cc2\\<rbrace>\n\ngoal (1 subgoal):\n 1. ccompatible \\<R> (AND cc1 cc2)", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> \\<lbrace>cc1\\<rbrace> \\<or>\n     \\<lbrace>cc1\\<rbrace> \\<inter> R = {}\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> \\<lbrace>cc2\\<rbrace> \\<or>\n     \\<lbrace>cc2\\<rbrace> \\<inter> R = {}\n  \\<lbrace>AND cc1 cc2\\<rbrace> =\n  \\<lbrace>cc1\\<rbrace> \\<inter> \\<lbrace>cc2\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<forall>R\\<in>\\<R>.\n       R \\<subseteq> \\<lbrace>AND cc1 cc2\\<rbrace> \\<or>\n       \\<lbrace>AND cc1 cc2\\<rbrace> \\<inter> R = {}", "by auto"], ["proof (state)\nthis:\n  ccompatible \\<R> (AND cc1 cc2)\n\ngoal (5 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LT x1 x2)\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (LE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (LE x1 x2)\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (EQ x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (EQ x1 x2)\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GT x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GT x1 x2)\n 5. \\<And>x1 x2.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        \\<forall>(x, m)\\<in>collect_clock_pairs (GE x1 x2).\n           m \\<le> real (k x) \\<and>\n           x \\<in> X \\<and> m \\<in> \\<nat>\\<rbrakk>\n       \\<Longrightarrow> ccompatible \\<R> (GE x1 x2)", "qed (auto intro: ccompatible1 ccompatible2 ccompatible3 ccompatible4 ccompatible5)"], ["", "section \\<open>Compability with Resets\\<close>"], ["", "definition region_set\nwhere\n  \"region_set R x c = {v(x := c) | v. v \\<in> R}\""], ["", "lemma region_set_id:\n  fixes X k\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"R \\<in> \\<R>\" \"v \\<in> R\" \"finite X\" \"0 \\<le> c\" \"c \\<le> k x\" \"x \\<in> X\"\n  shows \"[v(x := c)]\\<^sub>\\<R> = region_set R x c\" \"[v(x := c)]\\<^sub>\\<R> \\<in> \\<R>\" \"v(x := c) \\<in> [v(x := c)]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c) &&&\n    [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R> &&&\n    v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "from assms"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  c \\<le> k x\n  x \\<in> X", "obtain I r where R: \"R = region X I r\" \"valid_region X k I r\" \"v \\<in> region X I r\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  c \\<le> k x\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. (\\<And>I r.\n        \\<lbrakk>R = region X I r; valid_region X k I r;\n         v \\<in> region X I r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R = region X I r\n  valid_region X k I r\n  v \\<in> region X I r\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "let ?I = \"\\<lambda> y. if x = y then Const c else I y\""], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "let ?r = \"{(y,z) \\<in> r. x \\<noteq> y \\<and> x \\<noteq> z}\""], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "let ?X\\<^sub>0 = \"{x \\<in> X. \\<exists> c. I x = Intv c}\""], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "let ?X\\<^sub>0' = \"{x \\<in> X. \\<exists> c. ?I x = Intv c}\""], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "from R(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have refl: \"refl_on ?X\\<^sub>0 r\" and trans: \"trans r\" and total: \"total_on ?X\\<^sub>0 r\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r &&&\n    trans r &&& total_on {x \\<in> X. \\<exists>c. I x = Intv c} r", "by auto"], ["proof (state)\nthis:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  trans r\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "have valid: \"valid_region X k ?I ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. valid_region X k (\\<lambda>y. if x = y then Const c else I y)\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "proof"], ["proof (state)\ngoal (5 subgoals):\n 1. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 2. refl_on ?X\\<^sub>0\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 3. trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 4. total_on ?X\\<^sub>0\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 5. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "show \"?X\\<^sub>0 - {x} = ?X\\<^sub>0'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>c. I x = Intv c} - {x} =\n    {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c} - {x} =\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (4 subgoals):\n 1. refl_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 2. trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 3. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 4. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. refl_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 2. trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 3. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 4. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "from refl"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r", "show \"refl_on (?X\\<^sub>0 - {x}) ?r\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n\ngoal (1 subgoal):\n 1. refl_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>c. I x = Intv c} \\<times>\n                {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}. (x, x) \\<in> r)\n\ngoal (1 subgoal):\n 1. {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n    \\<subseteq> ({x \\<in> X. \\<exists>c. I x = Intv c} - {x}) \\<times>\n                ({x \\<in> X. \\<exists>c. I x = Intv c} - {x}) \\<and>\n    (\\<forall>xa\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n        (xa, xa)\n        \\<in> {(y, z).\n               (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z})", "by auto"], ["proof (state)\nthis:\n  refl_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 2. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 3. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 2. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 3. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "from trans"], ["proof (chain)\npicking this:\n  trans r", "show \"trans ?r\""], ["proof (prove)\nusing this:\n  trans r\n\ngoal (1 subgoal):\n 1. trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "unfolding trans_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>xa y z.\n       (xa, y)\n       \\<in> {(y, z).\n              (y, z) \\<in> r \\<and>\n              x \\<noteq> y \\<and> x \\<noteq> z} \\<longrightarrow>\n       (y, z)\n       \\<in> {(y, z).\n              (y, z) \\<in> r \\<and>\n              x \\<noteq> y \\<and> x \\<noteq> z} \\<longrightarrow>\n       (xa, z)\n       \\<in> {(y, z).\n              (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "by blast"], ["proof (state)\nthis:\n  trans {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (2 subgoals):\n 1. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 2. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n 2. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "from total"], ["proof (chain)\npicking this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r", "show \"total_on (?X\\<^sub>0 - {x}) ?r\""], ["proof (prove)\nusing this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n\ngoal (1 subgoal):\n 1. total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n          xa \\<noteq> y \\<longrightarrow>\n          (xa, y)\n          \\<in> {(y, z).\n                 (y, z) \\<in> r \\<and>\n                 x \\<noteq> y \\<and> x \\<noteq> z} \\<or>\n          (y, xa)\n          \\<in> {(y, z).\n                 (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "by auto"], ["proof (state)\nthis:\n  total_on ({x \\<in> X. \\<exists>c. I x = Intv c} - {x})\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "from R(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have \"\\<forall> x \\<in> X. valid_intv (k x) (I x)\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. valid_intv (k x) (I x)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. valid_intv (k x) (I x)\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "with \\<open>c \\<le> k x\\<close>"], ["proof (chain)\npicking this:\n  c \\<le> k x\n  \\<forall>x\\<in>X. valid_intv (k x) (I x)", "show \"\\<forall> x \\<in> X. valid_intv (k x) (?I x)\""], ["proof (prove)\nusing this:\n  c \\<le> k x\n  \\<forall>x\\<in>X. valid_intv (k x) (I x)\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. valid_intv (k xa) (if x = xa then Const c else I xa)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  valid_region X k (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  valid_region X k (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "fix v"], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "assume v: \"v \\<in> region_set R x c\""], ["proof (state)\nthis:\n  v \\<in> region_set R x (real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "with R(1)"], ["proof (chain)\npicking this:\n  R = region X I r\n  v \\<in> region_set R x (real c)", "obtain v' where v': \"v' \\<in> region X I r\" \"v = v'(x := c)\""], ["proof (prove)\nusing this:\n  R = region X I r\n  v \\<in> region_set R x (real c)\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>v' \\<in> region X I r; v = v'(x := real c)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding region_set_def"], ["proof (prove)\nusing this:\n  R = region X I r\n  v \\<in> {v(x := real c) |v. v \\<in> R}\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>v' \\<in> region X I r; v = v'(x := real c)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "have \"v \\<in> region X ?I ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n             {(y, z).\n              (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x\n 2. \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)\n 3. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x\n 2. \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)\n 3. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "from v' \\<open>0 \\<le> c\\<close>"], ["proof (chain)\npicking this:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n  0 \\<le> c", "show ?case"], ["proof (prove)\nusing this:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> v x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)\n 2. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)\n 2. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)\n 2. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "from v'"], ["proof (chain)\npicking this:\n  v' \\<in> region X I r\n  v = v'(x := real c)", "show ?case"], ["proof (prove)\nusing this:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>v' \\<in> region X I r; v = v'(x := real c); xa \\<in> X;\n        x \\<noteq> xa\\<rbrakk>\n       \\<Longrightarrow> intv_elem xa (v'(x := real c)) (I xa)", "case (1 y)"], ["proof (state)\nthis:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n  y \\<in> X\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>v' \\<in> region X I r; v = v'(x := real c); xa \\<in> X;\n        x \\<noteq> xa\\<rbrakk>\n       \\<Longrightarrow> intv_elem xa (v'(x := real c)) (I xa)", "then"], ["proof (chain)\npicking this:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n  y \\<in> X\n  x \\<noteq> y", "have \"intv_elem y v' (I y)\""], ["proof (prove)\nusing this:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n  y \\<in> X\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. intv_elem y v' (I y)", "by auto"], ["proof (state)\nthis:\n  intv_elem y v' (I y)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>v' \\<in> region X I r; v = v'(x := real c); xa \\<in> X;\n        x \\<noteq> xa\\<rbrakk>\n       \\<Longrightarrow> intv_elem xa (v'(x := real c)) (I xa)", "with \\<open>x \\<noteq> y\\<close>"], ["proof (chain)\npicking this:\n  x \\<noteq> y\n  intv_elem y v' (I y)", "show \"intv_elem y (v'(x := c)) (I y)\""], ["proof (prove)\nusing this:\n  x \\<noteq> y\n  intv_elem y v' (I y)\n\ngoal (1 subgoal):\n 1. intv_elem y (v'(x := real c)) (I y)", "by (cases \"I y\") auto"], ["proof (state)\nthis:\n  intv_elem y (v'(x := real c)) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. intv_elem xa v (if x = xa then Const c else I xa)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 =\n    {xa \\<in> X. \\<exists>d. (if x = xa then Const c else I xa) = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "show \"?X\\<^sub>0 - {x} = ?X\\<^sub>0'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> X. \\<exists>c. I x = Intv c} - {x} =\n    {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> X. \\<exists>c. I x = Intv c} - {x} =\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v xa) \\<le> frac (v y))", "from v'"], ["proof (chain)\npicking this:\n  v' \\<in> region X I r\n  v = v'(x := real c)", "show \"\\<forall> y \\<in> ?X\\<^sub>0 - {x}. \\<forall> z \\<in> ?X\\<^sub>0 - {x}. (y,z) \\<in> ?r \\<longleftrightarrow> frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  v' \\<in> region X I r\n  v = v'(x := real c)\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       \\<forall>z\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n          ((y, z)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v y) \\<le> frac (v z))", "by auto"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     \\<forall>z\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  ?va2 \\<in> region_set R x (real c) \\<Longrightarrow>\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  ?va2 \\<in> region_set R x (real c) \\<Longrightarrow>\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "{"], ["proof (state)\nthis:\n  ?va2 \\<in> region_set R x (real c) \\<Longrightarrow>\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "fix v"], ["proof (state)\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "assume v: \"v \\<in> region X ?I ?r\""], ["proof (state)\nthis:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "have \"\\<exists> c. v(x := c) \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. v(x := c) \\<in> region X I r", "proof (cases \"I x\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "case (Const c)"], ["proof (state)\nthis:\n  I x = Const c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from R(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have \"c \\<ge> 0\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. 0 \\<le> c", "by auto"], ["proof (state)\nthis:\n  0 \\<le> c\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?v = \"v(x := c)\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"?v \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v(x := real c) \\<in> region X I r", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := real c)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := real c)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "from \\<open>c\\<ge>0\\<close> v"], ["proof (chain)\npicking this:\n  0 \\<le> c\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "show ?case"], ["proof (prove)\nusing this:\n  0 \\<le> c\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := real c)) xa", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. 0 \\<le> (v(x := real c)) xa\n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow> intv_elem xa (v(x := real c)) (I xa)", "case (1 y)"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow> intv_elem xa (v(x := real c)) (I xa)", "with v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  y \\<in> X", "have \"intv_elem y v (?I y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem y v (if x = y then Const c else I y)", "by fast"], ["proof (state)\nthis:\n  intv_elem y v (if x = y then Const c else I y)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow> intv_elem xa (v(x := real c)) (I xa)", "with Const"], ["proof (chain)\npicking this:\n  I x = Const c\n  intv_elem y v (if x = y then Const c else I y)", "show \"intv_elem y ?v (I y)\""], ["proof (prove)\nusing this:\n  I x = Const c\n  intv_elem y v (if x = y then Const c else I y)\n\ngoal (1 subgoal):\n 1. intv_elem y (v(x := real c)) (I y)", "by (cases \"x = y\", auto) (cases \"I y\", auto)"], ["proof (state)\nthis:\n  intv_elem y (v(x := real c)) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. intv_elem xa (v(x := real c)) (I xa)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "from Const"], ["proof (chain)\npicking this:\n  I x = Const c", "show \"?X\\<^sub>0' = ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  I x = Const c\n\ngoal (1 subgoal):\n 1. {xa \\<in> X.\n     \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n    {x \\<in> X. \\<exists>c. I x = Intv c}", "by auto"], ["proof (state)\nthis:\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "with refl"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}", "have \"r \\<subseteq> ?X\\<^sub>0' \\<times> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                  {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>c. I x = Intv c} \\<times>\n                {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}. (x, x) \\<in> r)\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                  {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> {xa \\<in> X.\n                 \\<exists>ca.\n                    (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                {xa \\<in> X.\n                 \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "then"], ["proof (chain)\npicking this:\n  r \\<subseteq> {xa \\<in> X.\n                 \\<exists>ca.\n                    (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                {xa \\<in> X.\n                 \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "have r: \"?r = r\""], ["proof (prove)\nusing this:\n  r \\<subseteq> {xa \\<in> X.\n                 \\<exists>ca.\n                    (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                {xa \\<in> X.\n                 \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r", "by auto"], ["proof (state)\nthis:\n  {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "from v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "have \"\\<forall> y \\<in> ?X\\<^sub>0'. \\<forall> z \\<in> ?X\\<^sub>0'. (y,z) \\<in> ?r \\<longleftrightarrow> frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>z\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((y, z)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v y) \\<le> frac (v z))", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real c)) xa) \\<le> frac ((v(x := real c)) y))", "with r"], ["proof (chain)\npicking this:\n  {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))", "show \"\\<forall> y \\<in> ?X\\<^sub>0'. \\<forall> z \\<in> ?X\\<^sub>0'. (y,z) \\<in> r \\<longleftrightarrow> frac (?v y) \\<le> frac (?v z)\""], ["proof (prove)\nusing this:\n  {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>z\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((y, z) \\<in> r) =\n          (frac ((v(x := real c)) y) \\<le> frac ((v(x := real c)) z))", "by auto"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z) \\<in> r) =\n        (frac ((v(x := real c)) y) \\<le> frac ((v(x := real c)) z))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v(x := real c) \\<in> region X I r\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       I x = Const x1 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 3. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  v(x := real c) \\<in> region X I r", "show ?thesis"], ["proof (prove)\nusing this:\n  v(x := real c) \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<exists>c. v(x := c) \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  \\<exists>c. v(x := c) \\<in> region X I r\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "case (Greater c)"], ["proof (state)\nthis:\n  I x = Greater c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from R(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have \"c \\<ge> 0\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. 0 \\<le> c", "by auto"], ["proof (state)\nthis:\n  0 \\<le> c\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?v = \"v(x := c + 1)\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"?v \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v(x := real (c + 1)) \\<in> region X I r", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := real (c + 1))) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := real (c + 1))) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "from \\<open>c\\<ge>0\\<close> v"], ["proof (chain)\npicking this:\n  0 \\<le> c\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "show ?case"], ["proof (prove)\nusing this:\n  0 \\<le> c\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := real (c + 1))) xa", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. 0 \\<le> (v(x := real (c + 1))) xa\n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)", "proof (standard, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v(x := real (c + 1))) (I xa)", "case (1 y)"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v(x := real (c + 1))) (I xa)", "with v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  y \\<in> X", "have \"intv_elem y v (?I y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem y v (if x = y then Const c else I y)", "by fast"], ["proof (state)\nthis:\n  intv_elem y v (if x = y then Const c else I y)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> X \\<Longrightarrow>\n       intv_elem xa (v(x := real (c + 1))) (I xa)", "with Greater"], ["proof (chain)\npicking this:\n  I x = Greater c\n  intv_elem y v (if x = y then Const c else I y)", "show \"intv_elem y ?v (I y)\""], ["proof (prove)\nusing this:\n  I x = Greater c\n  intv_elem y v (if x = y then Const c else I y)\n\ngoal (1 subgoal):\n 1. intv_elem y (v(x := real (c + 1))) (I y)", "by (cases \"x = y\", auto) (cases \"I y\", auto)"], ["proof (state)\nthis:\n  intv_elem y (v(x := real (c + 1))) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. intv_elem xa (v(x := real (c + 1))) (I xa)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "from Greater"], ["proof (chain)\npicking this:\n  I x = Greater c", "show \"?X\\<^sub>0' = ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  I x = Greater c\n\ngoal (1 subgoal):\n 1. {xa \\<in> X.\n     \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n    {x \\<in> X. \\<exists>c. I x = Intv c}", "by auto"], ["proof (state)\nthis:\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "with refl"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}", "have \"r \\<subseteq> ?X\\<^sub>0' \\<times> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                  {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>c. I x = Intv c} \\<times>\n                {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}. (x, x) \\<in> r)\n  {xa \\<in> X. \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                  {xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> {xa \\<in> X.\n                 \\<exists>ca.\n                    (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                {xa \\<in> X.\n                 \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "then"], ["proof (chain)\npicking this:\n  r \\<subseteq> {xa \\<in> X.\n                 \\<exists>ca.\n                    (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                {xa \\<in> X.\n                 \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "have r: \"?r = r\""], ["proof (prove)\nusing this:\n  r \\<subseteq> {xa \\<in> X.\n                 \\<exists>ca.\n                    (if x = xa then Const c else I xa) = Intv ca} \\<times>\n                {xa \\<in> X.\n                 \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r", "by auto"], ["proof (state)\nthis:\n  {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "from v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "have \"\\<forall> y \\<in> ?X\\<^sub>0'. \\<forall> z \\<in> ?X\\<^sub>0'. (y,z) \\<in> ?r \\<longleftrightarrow> frac (v y) \\<le> frac (v z)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>z\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((y, z)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n          (frac (v y) \\<le> frac (v z))", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := real (c + 1))) xa)\n           \\<le> frac ((v(x := real (c + 1))) y))", "with r"], ["proof (chain)\npicking this:\n  {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))", "show \"\\<forall> y \\<in> ?X\\<^sub>0'. \\<forall> z \\<in> ?X\\<^sub>0'. (y,z) \\<in> r \\<longleftrightarrow> frac (?v y) \\<le> frac (?v z)\""], ["proof (prove)\nusing this:\n  {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z} = r\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}) =\n        (frac (v y) \\<le> frac (v z))\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>z\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((y, z) \\<in> r) =\n          (frac ((v(x := real (c + 1))) y)\n           \\<le> frac ((v(x := real (c + 1))) z))", "by auto"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((y, z) \\<in> r) =\n        (frac ((v(x := real (c + 1))) y)\n         \\<le> frac ((v(x := real (c + 1))) z))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v(x := real (c + 1)) \\<in> region X I r\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r\n 2. \\<And>x3.\n       I x = Greater x3 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  v(x := real (c + 1)) \\<in> region X I r", "show ?thesis"], ["proof (prove)\nusing this:\n  v(x := real (c + 1)) \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<exists>c. v(x := c) \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  \\<exists>c. v(x := c) \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "case (Intv c)"], ["proof (state)\nthis:\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from R(2)"], ["proof (chain)\npicking this:\n  valid_region X k I r", "have \"c \\<ge> 0\""], ["proof (prove)\nusing this:\n  valid_region X k I r\n\ngoal (1 subgoal):\n 1. 0 \\<le> c", "by auto"], ["proof (state)\nthis:\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?L = \"{frac (v y) | y. y \\<in> ?X\\<^sub>0 \\<and> x \\<noteq> y \\<and> (y,x) \\<in> r}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?U = \"{frac (v y) | y. y \\<in> ?X\\<^sub>0 \\<and> x \\<noteq> y \\<and> (x,y) \\<in> r}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?l = \"if ?L \\<noteq> {} then c + Max ?L else if ?U \\<noteq> {} then c else c + 0.5\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?u = \"if ?U \\<noteq> {} then c + Min ?U else if ?L \\<noteq> {} then c + 1 else c + 0.5\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite X", "have fin: \"finite ?L\" \"finite ?U\""], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. finite\n     {frac (v y) |y.\n      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n      x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    finite\n     {frac (v y) |y.\n      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n      x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  finite\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (y, x) \\<in> r}\n  finite\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "{"], ["proof (state)\nthis:\n  finite\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (y, x) \\<in> r}\n  finite\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "assume y: \"y \\<in> ?X\\<^sub>0\" \"x \\<noteq> y\" \"(y, x) \\<in> r\""], ["proof (state)\nthis:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (y, x) \\<in> r", "have L: \"frac (v y) \\<in> ?L\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with Max_in[OF fin(1)]"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "have In: \"Max ?L \\<in> ?L\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "have \"frac (Max ?L) = (Max ?L)\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "using frac_idempotent"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac (frac ?x) = frac ?x\n\ngoal (1 subgoal):\n 1. frac\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "by fastforce"], ["proof (state)\nthis:\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from Max_ge[OF fin(1) L]"], ["proof (chain)\npicking this:\n  frac (v y)\n  \\<le> Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}", "have \"frac (v y) \\<le> Max ?L\""], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}", "."], ["proof (state)\nthis:\n  frac (v y)\n  \\<le> Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "also"], ["proof (state)\nthis:\n  frac (v y)\n  \\<le> Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"\\<dots> = frac (Max ?L)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    frac\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r})", "using In frac_idempotent[symmetric]"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac ?x = frac (frac ?x)\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    frac\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r})", "by fastforce"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "also"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"\\<dots> = frac (c + Max ?L)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}) =\n    frac\n     (real c +\n      Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r})", "by (auto simp: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}) =\n  frac\n   (real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "finally"], ["proof (chain)\npicking this:\n  frac (v y)\n  \\<le> frac\n         (real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r})", "have \"frac (v y) \\<le> frac ?l\""], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> frac\n         (real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r})\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10)", "using L"], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> frac\n         (real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r})\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> ?y2;\n   (?y2, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v ?y2)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "note L_bound = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> ?y2;\n   (?y2, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v ?y2)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> ?y2;\n   (?y2, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v ?y2)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "assume y: \"y \\<in> ?X\\<^sub>0\" \"x \\<noteq> y\" \"(x,y) \\<in> r\""], ["proof (state)\nthis:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (x, y) \\<in> r", "have U: \"frac (v y) \\<in> ?U\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with Min_in[OF fin(2)]"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "have In: \"Min ?U \\<in> ?U\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "have \"frac (Min ?U) = (Min ?U)\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "using frac_idempotent"], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac (frac ?x) = frac ?x\n\ngoal (1 subgoal):\n 1. frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by fastforce"], ["proof (state)\nthis:\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"frac (c + Min ?U) = frac (Min ?U)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (real c +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n    frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})", "by (auto simp: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac\n   (real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "also"], ["proof (state)\nthis:\n  frac\n   (real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"\\<dots> = Min ?U\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "using In frac_idempotent"], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac (frac ?x) = frac ?x\n\ngoal (1 subgoal):\n 1. frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by fastforce"], ["proof (state)\nthis:\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "also"], ["proof (state)\nthis:\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from Min_le[OF fin(2) U]"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<le> frac (v y)", "have \"Min ?U \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    \\<le> frac (v y)", "."], ["proof (state)\nthis:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "finally"], ["proof (chain)\npicking this:\n  frac\n   (real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})\n  \\<le> frac (v y)", "have \"frac ?u \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  frac\n   (real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n    \\<le> frac (v y)", "using U"], ["proof (prove)\nusing this:\n  frac\n   (real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})\n  \\<le> frac (v y)\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n    \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> ?y2;\n   (x, ?y2) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v ?y2)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "note U_bound = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> ?y2;\n   (x, ?y2) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v ?y2)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> ?y2;\n   (x, ?y2) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v ?y2)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "assume \"?L \\<noteq> {}\""], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from Max_in[OF fin(1) this]"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "obtain l d where l:\n          \"Max ?L = frac (v l)\" \"l \\<in> X\" \"x \\<noteq> l\" \"I l = Intv d\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>l d.\n        \\<lbrakk>Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} =\n                 frac (v l);\n         l \\<in> X; x \\<noteq> l; I l = Intv d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  l \\<in> X\n  x \\<noteq> l\n  I l = Intv d\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  l \\<in> X\n  x \\<noteq> l\n  I l = Intv d", "have \"d < v l\" \"v l < d + 1\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  l \\<in> X\n  x \\<noteq> l\n  I l = Intv d\n\ngoal (1 subgoal):\n 1. real d < v l &&& v l < real (d + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real d < v l\n  v l < real (d + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with nat_intv_frac_gt0[OF this] frac_lt_1 l(1)"], ["proof (chain)\npicking this:\n  0 < frac (v l)\n  frac ?x < (1::?'a)\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  real d < v l\n  v l < real (d + 1)", "have \"0 < Max ?L\" \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  0 < frac (v l)\n  frac ?x < (1::?'a)\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  real d < v l\n  v l < real (d + 1)\n\ngoal (1 subgoal):\n 1. 0 < Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1", "have \"c < c + Max ?L\" \"c + Max ?L < c + 1\""], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. real c\n    < real c +\n      Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < real (c + 1)", "by simp+"], ["proof (state)\nthis:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "}"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "note L_intv = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "{"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "assume \"?U \\<noteq> {}\""], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from Min_in[OF fin(2) this]"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "obtain u d where u:\n          \"Min ?U = frac (v u)\" \"u\\<in> X\" \"x \\<noteq> u\" \"I u = Intv d\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>u d.\n        \\<lbrakk>Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} =\n                 frac (v u);\n         u \\<in> X; x \\<noteq> u; I u = Intv d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  u \\<in> X\n  x \\<noteq> u\n  I u = Intv d\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  u \\<in> X\n  x \\<noteq> u\n  I u = Intv d", "have \"d < v u\" \"v u < d + 1\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  u \\<in> X\n  x \\<noteq> u\n  I u = Intv d\n\ngoal (1 subgoal):\n 1. real d < v u &&& v u < real (d + 1)", "by fastforce+"], ["proof (state)\nthis:\n  real d < v u\n  v u < real (d + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with nat_intv_frac_gt0[OF this] frac_lt_1 u(1)"], ["proof (chain)\npicking this:\n  0 < frac (v u)\n  frac ?x < (1::?'a)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  real d < v u\n  v u < real (d + 1)", "have \"0 < Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  0 < frac (v u)\n  frac ?x < (1::?'a)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  real d < v u\n  v u < real (d + 1)\n\ngoal (1 subgoal):\n 1. 0 < Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1", "have \"c < c + Min ?U\" \"c + Min ?U < c + 1\""], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. real c\n    < real c +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < real (c + 1)", "by simp+"], ["proof (state)\nthis:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "}"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "note U_intv = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have l_bound: \"c \\<le> ?l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "with U_intv T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "with L_intv"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. real c\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have l_bound': \"c < ?u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "with U_intv T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "with U_intv"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. real c\n    < (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n          {}\n       then real c +\n            Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r}\n       else if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have u_bound: \"?u \\<le> c + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "with L_intv T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "with U_intv"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n    \\<le> real (c + 1)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have u_bound': \"?l < c + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "with L_intv T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "with L_intv"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    < real (c + 1)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have frac_c: \"frac c = 0\" \"frac (c+1) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac (real c) = 0 &&& frac (real (c + 1)) = 0", "by auto"], ["proof (state)\nthis:\n  frac (real c) = 0\n  frac (real (c + 1)) = 0\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have l_u: \"?l \\<le> ?u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "using Min_in[OF fin(2) False]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "by (auto simp: frac_c)"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with Max_in[OF fin(1) this]"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "have l: \"?l = c + Max ?L\" \"Max ?L \\<in> ?L\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "note F = False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "from l(1)"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}", "have *: \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "using False L_intv(2)"], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {} \\<Longrightarrow>\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by linarith"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with F l *"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "from Min_in[OF fin(2) this] l(2)"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "obtain l u where l_u:\n            \"Max ?L = frac (v l)\" \"Min ?U = frac (v u)\" \"l \\<in> ?X\\<^sub>0\" \"u \\<in> ?X\\<^sub>0\" \"(l,x) \\<in> r\" \"(x,u) \\<in> r\"\n            \"x \\<noteq> l\" \"x \\<noteq> u\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>l u.\n        \\<lbrakk>Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} =\n                 frac (v l);\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} =\n         frac (v u);\n         l \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n         u \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; (l, x) \\<in> r;\n         (x, u) \\<in> r; x \\<noteq> l; x \\<noteq> u\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  l \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  u \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  (l, x) \\<in> r\n  (x, u) \\<in> r\n  x \\<noteq> l\n  x \\<noteq> u\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "from trans l_u(5-)"], ["proof (chain)\npicking this:\n  trans r\n  (l, x) \\<in> r\n  (x, u) \\<in> r\n  x \\<noteq> l\n  x \\<noteq> u", "have \"(l,u) \\<in> ?r\""], ["proof (prove)\nusing this:\n  trans r\n  (l, x) \\<in> r\n  (x, u) \\<in> r\n  x \\<noteq> l\n  x \\<noteq> u\n\ngoal (1 subgoal):\n 1. (l, u)\n    \\<in> {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "unfolding trans_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n  (l, x) \\<in> r\n  (x, u) \\<in> r\n  x \\<noteq> l\n  x \\<noteq> u\n\ngoal (1 subgoal):\n 1. (l, u)\n    \\<in> {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "by blast"], ["proof (state)\nthis:\n  (l, u)\n  \\<in> {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with l_u(1-4) v"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  l \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  u \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  (l, u)\n  \\<in> {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "have *: \"Max ?L \\<le> Min ?U\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  l \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  u \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  (l, u)\n  \\<in> {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}", "by fastforce"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with l_u(1,2)"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}", "have \"frac (Max ?L) \\<le> frac (Min ?U)\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v l)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v u)\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r})\n    \\<le> frac\n           (Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r})", "by (simp add: frac_idempotent)"], ["proof (state)\nthis:\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})\n  \\<le> frac\n         (Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r})\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with frac_nat_add_id l(1) False"], ["proof (chain)\npicking this:\n  frac (real ?n + ?r) = frac ?r\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})\n  \\<le> frac\n         (Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r})", "have \"frac ?l \\<le> frac ?u\""], ["proof (prove)\nusing this:\n  frac (real ?n + ?r) = frac ?r\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})\n  \\<le> frac\n         (Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r})\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "with l(1) * False"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "obtain d where d: \"d = (?l + ?u) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>d.\n        d =\n        ((if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10) +\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)) /\n        2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with l_u"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2", "have d2: \"?l \\<le> d\" \"d \\<le> ?u\""], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Min {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real (c + 1) else real c + 5 / 10)\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)\n    \\<le> d &&&\n    d \\<le> (if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10)", "by simp+"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  \\<le> d\n  d \\<le> (if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from d l_bound l_bound' u_bound u_bound'"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)", "have d3: \"c < d\" \"d < c + 1\" \"d \\<ge> 0\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  real c\n  \\<le> (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real c +\n              Max {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r}\n         else if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c else real c + 5 / 10)\n  real c\n  < (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n  \\<le> real (c + 1)\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. real c < d &&& d < real (c + 1) &&& 0 \\<le> d", "by simp+"], ["proof (state)\nthis:\n  real c < d\n  d < real (c + 1)\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"floor ?l = c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "from L_intv[OF False]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)", "have \"0 \\<le> Max ?L\" \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> Max {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "from floor_nat_add_id[OF this] False"], ["proof (chain)\npicking this:\n  \\<lfloor>real ?n +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lfloor>real ?n +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "by simp"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10\\<rfloor> =\n  int c\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "by (simp)"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10\\<rfloor> =\n  int c\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "from U_intv[OF False]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)", "have \"0 \\<le> Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "from floor_nat_add_id[OF this] T False"], ["proof (chain)\npicking this:\n  \\<lfloor>real ?n +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lfloor>real ?n +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Max {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                     {}\n                  then real c else real c + 5 / 10\\<rfloor> =\n    int c", "by simp"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10\\<rfloor> =\n  int c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10\\<rfloor> =\n  int c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10\\<rfloor> =\n  int c\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have floor_u: \"floor ?u = (if ?U = {} \\<and> ?L \\<noteq> {} then c + 1 else c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "from U_intv[OF False]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)", "have \"0 \\<le> Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "from floor_nat_add_id[OF this] False"], ["proof (chain)\npicking this:\n  \\<lfloor>real ?n +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lfloor>real ?n +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "by simp"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "by (simp)"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "from L_intv[OF False]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)", "have \"0 \\<le> Max ?L\" \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> Max {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "from floor_nat_add_id[OF this] T False"], ["proof (chain)\npicking this:\n  \\<lfloor>real ?n +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lfloor>real ?n +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\\<rfloor> =\n  int ?n\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<lfloor>if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                {}\n             then real c +\n                  Min {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r}\n             else if {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                     {}\n                  then real (c + 1) else real c + 5 / 10\\<rfloor> =\n    int (if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} =\n            {} \\<and>\n            {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then c + 1 else c)", "by (auto)"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "{"], ["proof (state)\nthis:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "assume \"?L \\<noteq> {}\" \"?U \\<noteq> {}\""], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from Max_in[OF fin(1) \\<open>?L \\<noteq> {}\\<close>]"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "obtain w where w:\n          \"w \\<in> ?X\\<^sub>0\" \"x \\<noteq> w\" \"(w,x) \\<in> r\" \"Max ?L = frac (v w)\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n         x \\<noteq> w; (w, x) \\<in> r;\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} =\n         frac (v w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from Min_in[OF fin(2) \\<open>?U \\<noteq> {}\\<close>]"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "obtain z where z:\n          \"z \\<in> ?X\\<^sub>0\" \"x \\<noteq> z\" \"(x,z) \\<in> r\" \"Min ?U = frac (v z)\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n         x \\<noteq> z; (x, z) \\<in> r;\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} =\n         frac (v z)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> z\n  (x, z) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v z)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from w z trans"], ["proof (chain)\npicking this:\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n  z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> z\n  (x, z) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v z)\n  trans r", "have \"(w,z) \\<in> r\""], ["proof (prove)\nusing this:\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n  z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> z\n  (x, z) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v z)\n  trans r\n\ngoal (1 subgoal):\n 1. (w, z) \\<in> r", "unfolding trans_def"], ["proof (prove)\nusing this:\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n  z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> z\n  (x, z) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v z)\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (w, z) \\<in> r", "by blast"], ["proof (state)\nthis:\n  (w, z) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "with v w z"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n  z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> z\n  (x, z) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v z)\n  (w, z) \\<in> r", "have \"Max ?L \\<le> Min ?U\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n  z \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> z\n  (x, z) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v z)\n  (w, z) \\<in> r\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}", "by fastforce"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>{frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {};\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n   {}\\<rbrakk>\n  \\<Longrightarrow> Max {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r}\n                    \\<le> Min {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "note l_le_u = this"], ["proof (state)\nthis:\n  \\<lbrakk>{frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {};\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n   {}\\<rbrakk>\n  \\<Longrightarrow> Max {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r}\n                    \\<le> Min {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "{"], ["proof (state)\nthis:\n  \\<lbrakk>{frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {};\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n   {}\\<rbrakk>\n  \\<Longrightarrow> Max {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r}\n                    \\<le> Min {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "assume y: \"y \\<in> ?X\\<^sub>0\" \"x \\<noteq> y\""], ["proof (state)\nthis:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "from total y \\<open>x \\<in> X\\<close> Intv"], ["proof (chain)\npicking this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  x \\<in> X\n  I x = Intv c", "have total: \"(x,y) \\<in> r \\<or> (y,x) \\<in> r\""], ["proof (prove)\nusing this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<or> (y, x) \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r \\<or> (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"frac (v y) = frac d \\<longleftrightarrow> (y,x) \\<in> r \\<and> (x,y) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (v y) = frac d) = ((y, x) \\<in> r \\<and> (x, y) \\<in> r)", "proof safe"], ["proof (state)\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "assume A: \"(y,x) \\<in> r\" \"(x,y) \\<in> r\""], ["proof (state)\nthis:\n  (y, x) \\<in> r\n  (x, y) \\<in> r\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "from L_bound[OF y A(1)] U_bound[OF y A(2)]"], ["proof (chain)\npicking this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)", "have *:\n            \"frac (v y) \\<le> frac ?l\" \"frac ?u \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10) &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n    \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "from A y"], ["proof (chain)\npicking this:\n  (y, x) \\<in> r\n  (x, y) \\<in> r\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y", "have **: \"?L \\<noteq> {}\" \"?U \\<noteq> {}\""], ["proof (prove)\nusing this:\n  (y, x) \\<in> r\n  (x, y) \\<in> r\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} &&&\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {}", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "with L_intv[OF this(1)] U_intv[OF this(2)]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "have \"frac ?l = Max ?L\" \"frac ?u = Min ?U\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by (auto simp: frac_nat_add_id frac_eq)"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "with * ** l_le_u"], ["proof (chain)\npicking this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  \\<lbrakk>{frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {};\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n   {}\\<rbrakk>\n  \\<Longrightarrow> Max {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r}\n                    \\<le> Min {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}", "have \"frac ?l = frac ?u\" \"frac (v y) = frac ?l\""], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  \\<lbrakk>{frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {};\n   {frac (v y) |y.\n    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n   {}\\<rbrakk>\n  \\<Longrightarrow> Max {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r}\n                    \\<le> Min {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) &&&\n    frac (v y) =\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  frac (v y) =\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "with d"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  frac (v y) =\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)", "have \"d = ((floor ?l + floor ?u) + (frac (v y) + frac (v y))) / 2\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  frac (v y) =\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. d =\n    (real_of_int\n      (\\<lfloor>if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Max {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (y, x) \\<in> r}\n                else if {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                        {}\n                     then real c else real c + 5 / 10\\<rfloor> +\n       \\<lfloor>if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Min {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r}\n                else if {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                        {}\n                     then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n     (frac (v y) + frac (v y))) /\n    2", "unfolding frac_def"], ["proof (prove)\nusing this:\n  d =\n  ((if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) -\n  real_of_int\n   \\<lfloor>if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10\\<rfloor> =\n  (if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) -\n  real_of_int\n   \\<lfloor>if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10\\<rfloor>\n  v y - real_of_int \\<lfloor>v y\\<rfloor> =\n  (if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) -\n  real_of_int\n   \\<lfloor>if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10\\<rfloor>\n\ngoal (1 subgoal):\n 1. d =\n    (real_of_int\n      (\\<lfloor>if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Max {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (y, x) \\<in> r}\n                else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                        {}\n                     then real c else real c + 5 / 10\\<rfloor> +\n       \\<lfloor>if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Min {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r}\n                else if {v y - real_of_int \\<lfloor>v y\\<rfloor> |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                        {}\n                     then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n     (v y - real_of_int \\<lfloor>v y\\<rfloor> +\n      (v y - real_of_int \\<lfloor>v y\\<rfloor>))) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real_of_int\n    (\\<lfloor>if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real c +\n                   Max {frac (v y) |y.\n                        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                        x \\<noteq> y \\<and> (y, x) \\<in> r}\n              else if {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                      {}\n                   then real c else real c + 5 / 10\\<rfloor> +\n     \\<lfloor>if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c +\n                   Min {frac (v y) |y.\n                        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                        x \\<noteq> y \\<and> (x, y) \\<in> r}\n              else if {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                      {}\n                   then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n   (frac (v y) + frac (v y))) /\n  2\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "also"], ["proof (state)\nthis:\n  d =\n  (real_of_int\n    (\\<lfloor>if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real c +\n                   Max {frac (v y) |y.\n                        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                        x \\<noteq> y \\<and> (y, x) \\<in> r}\n              else if {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                      {}\n                   then real c else real c + 5 / 10\\<rfloor> +\n     \\<lfloor>if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c +\n                   Min {frac (v y) |y.\n                        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                        x \\<noteq> y \\<and> (x, y) \\<in> r}\n              else if {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                      {}\n                   then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n   (frac (v y) + frac (v y))) /\n  2\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "have \"\\<dots> = c + frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real_of_int\n      (\\<lfloor>if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Max {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (y, x) \\<in> r}\n                else if {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                        {}\n                     then real c else real c + 5 / 10\\<rfloor> +\n       \\<lfloor>if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Min {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r}\n                else if {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                        {}\n                     then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n     (frac (v y) + frac (v y))) /\n    2 =\n    real c + frac (v y)", "using \\<open>floor ?l = c\\<close> floor_u \\<open>?U \\<noteq> {}\\<close>"], ["proof (prove)\nusing this:\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Max {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c else real c + 5 / 10\\<rfloor> =\n  int c\n  \\<lfloor>if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c +\n                Min {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r}\n           else if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real (c + 1) else real c + 5 / 10\\<rfloor> =\n  int (if {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} =\n          {} \\<and>\n          {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n          {}\n       then c + 1 else c)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (real_of_int\n      (\\<lfloor>if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Max {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (y, x) \\<in> r}\n                else if {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                        {}\n                     then real c else real c + 5 / 10\\<rfloor> +\n       \\<lfloor>if {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                   {}\n                then real c +\n                     Min {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r}\n                else if {frac (v y) |y.\n                         y \\<in> {x \\<in> X.\n                                  \\<exists>c. I x = Intv c} \\<and>\n                         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                        {}\n                     then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n     (frac (v y) + frac (v y))) /\n    2 =\n    real c + frac (v y)", "by auto"], ["proof (state)\nthis:\n  (real_of_int\n    (\\<lfloor>if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                 {}\n              then real c +\n                   Max {frac (v y) |y.\n                        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                        x \\<noteq> y \\<and> (y, x) \\<in> r}\n              else if {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                      {}\n                   then real c else real c + 5 / 10\\<rfloor> +\n     \\<lfloor>if {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                 {}\n              then real c +\n                   Min {frac (v y) |y.\n                        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                        x \\<noteq> y \\<and> (x, y) \\<in> r}\n              else if {frac (v y) |y.\n                       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                      {}\n                   then real (c + 1) else real c + 5 / 10\\<rfloor>) +\n   (frac (v y) + frac (v y))) /\n  2 =\n  real c + frac (v y)\n\ngoal (3 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r\n 3. \\<lbrakk>(y, x) \\<in> r; (x, y) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> frac (v y) = frac d", "finally"], ["proof (chain)\npicking this:\n  d = real c + frac (v y)", "show \"frac (v y) = frac d\""], ["proof (prove)\nusing this:\n  d = real c + frac (v y)\n\ngoal (1 subgoal):\n 1. frac (v y) = frac d", "using frac_nat_add_id frac_idempotent"], ["proof (prove)\nusing this:\n  d = real c + frac (v y)\n  frac (real ?n + ?r) = frac ?r\n  frac (frac ?x) = frac ?x\n\ngoal (1 subgoal):\n 1. frac (v y) = frac d", "by metis"], ["proof (state)\nthis:\n  frac (v y) = frac d\n\ngoal (2 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r", "assume A: \"frac (v y) = frac d\""], ["proof (state)\nthis:\n  frac (v y) = frac d\n\ngoal (2 subgoals):\n 1. frac (v y) = frac d \\<Longrightarrow> (y, x) \\<in> r\n 2. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r", "show \"(y, x) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "assume B: \"(y,x) \\<notin> r\""], ["proof (state)\nthis:\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "with total"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  (y, x) \\<notin> r", "have B': \"(x,y) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "from U_bound[OF y this]"], ["proof (chain)\npicking this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)", "have u_y:\"frac ?u \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n    \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "from y B'"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (x, y) \\<in> r", "have U: \"?U \\<noteq> {}\" and \"frac (v y) \\<in> ?U\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} &&&\n    frac (v y)\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "have u: \"frac ?u = Min ?U\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "using Min_in[OF fin(2) \\<open>?U \\<noteq> {}\\<close>]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by (auto simp: frac_nat_add_id frac_idempotent)"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "show False"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from U_intv[OF U]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)", "have \"0 < Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 < Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1", "have *: \"frac (Min ?U / 2) = Min ?U / 2\""], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} /\n      2) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} /\n            2 \\<and>\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    < 1", "by simp"], ["proof (state)\nthis:\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from d U True"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}", "have \"d = ((c + c) + Min ?U) / 2\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = c + Min ?U / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2 =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2 =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2", "have \"frac d = Min ?U / 2\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2", "using *"], ["proof (prove)\nusing this:\n  d =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac d =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> < Min ?U\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}", "using \\<open>0 < Min ?U\\<close>"], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n  < Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  frac d\n  < Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "have \"frac d < frac ?u\""], ["proof (prove)\nusing this:\n  frac d\n  < Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac d\n    < frac\n       (if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}\n        else if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real (c + 1) else real c + 5 / 10)", "using u"], ["proof (prove)\nusing this:\n  frac d\n  < Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac d\n    < frac\n       (if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}\n        else if {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                {}\n             then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  frac d\n  < frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "with u_y A"], ["proof (chain)\npicking this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n  frac (v y) = frac d\n  frac d\n  < frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)", "show False"], ["proof (prove)\nusing this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n  frac (v y) = frac d\n  frac d\n  < frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "have l:  \"?l = c + Max ?L\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from Max_in[OF fin(1) \\<open>?L \\<noteq> {}\\<close>]"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "obtain w where w:\n                \"w \\<in> ?X\\<^sub>0\" \"x \\<noteq> w\" \"(w,x) \\<in> r\" \"Max ?L = frac (v w)\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n         x \\<noteq> w; (w, x) \\<in> r;\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} =\n         frac (v w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "with \\<open>(y,x) \\<notin> r\\<close> trans"], ["proof (chain)\npicking this:\n  (y, x) \\<notin> r\n  trans r\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)", "have **: \"(y,w) \\<notin> r\""], ["proof (prove)\nusing this:\n  (y, x) \\<notin> r\n  trans r\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. (y, w) \\<notin> r", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (y, x) \\<notin> r\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. (y, w) \\<notin> r", "by blast"], ["proof (state)\nthis:\n  (y, w) \\<notin> r\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from Min_in[OF fin(2) \\<open>?U \\<noteq> {}\\<close>] Max_in[OF fin(1) \\<open>?L \\<noteq> {}\\<close>] frac_lt_1"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac ?x < (1::?'a)", "have \"0 \\<le> Max ?L\" \"Max ?L < 1\" \"0 \\<le> Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac ?x < (1::?'a)\n\ngoal (1 subgoal):\n 1. (0 \\<le> Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}\n     < 1) &&&\n    0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1", "have \"0 \\<le> (Max ?L + Min ?U) / 2\" \"(Max ?L + Min ?U) / 2 < 1\""], ["proof (prove)\nusing this:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n            2 &&&\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1", "have ***: \"frac ((Max ?L + Min ?U) / 2) = (Max ?L + Min ?U) / 2\""], ["proof (prove)\nusing this:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n            2 \\<and>\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < 1", ".."], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from y w"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)", "have \"y \\<in> ?X\\<^sub>0'\" \"w \\<in> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (w, x) \\<in> r\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. y \\<in> {xa \\<in> X.\n             \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} &&&\n    w \\<in> {xa \\<in> X.\n             \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "by auto"], ["proof (state)\nthis:\n  y \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n  w \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "with v **"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  (y, w) \\<notin> r\n  y \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n  w \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "have lt: \"frac (v y) > frac (v w)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  (y, w) \\<notin> r\n  y \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n  w \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. frac (v w) < frac (v y)", "by fastforce"], ["proof (state)\nthis:\n  frac (v w) < frac (v y)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from d U l"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}", "have \"d = ((c + c) + (Max ?L + Min ?U))/2\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = c + (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2 =\n    real c +\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2 =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2", "have \"frac d = frac ((Max ?L + Min ?U) / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "using ***"], ["proof (prove)\nusing this:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> < (frac (v y) + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < (frac (v y) +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2", "using lt w(4)"], ["proof (prove)\nusing this:\n  frac (v w) < frac (v y)\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < (frac (v y) +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2", "by auto"], ["proof (state)\nthis:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < (frac (v y) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < (frac (v y) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> \\<le> frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (frac (v y) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    \\<le> frac (v y)", "using Min_le[OF fin(2) \\<open>frac (v y) \\<in> ?U\\<close>]"], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (frac (v y) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  (frac (v y) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  frac d < frac (v y)", "show False"], ["proof (prove)\nusing this:\n  frac d < frac (v y)\n\ngoal (1 subgoal):\n 1. False", "using A"], ["proof (prove)\nusing this:\n  frac d < frac (v y)\n  frac (v y) = frac d\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r", "assume A: \"frac (v y) = frac d\""], ["proof (state)\nthis:\n  frac (v y) = frac d\n\ngoal (1 subgoal):\n 1. frac (v y) = frac d \\<Longrightarrow> (x, y) \\<in> r", "show \"(x, y) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "assume B: \"(x,y) \\<notin> r\""], ["proof (state)\nthis:\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "with total"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  (x, y) \\<notin> r", "have B': \"(y,x) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "from L_bound[OF y this]"], ["proof (chain)\npicking this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)", "have l_y:\"frac ?l \\<ge> frac (v y)\""], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "from y B'"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (y, x) \\<in> r", "have L: \"?L \\<noteq> {}\" and \"frac (v y) \\<in> ?L\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} &&&\n    frac (v y)\n    \\<in> {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "have l: \"frac ?l = Max ?L\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "using Max_in[OF fin(1) \\<open>?L \\<noteq> {}\\<close>]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  frac (v y)\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "by (auto simp: frac_nat_add_id frac_idempotent)"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "show False"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from L_intv[OF L]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)", "have *: \"0 < Max ?L\" \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 < Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from d L True"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "have \"d = ((c + c) + (1 + Max ?L)) / 2\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     (1 +\n      Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r})) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (1 +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (1 +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = c + (1 + Max ?L) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     (1 +\n      Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r})) /\n    2 =\n    real c +\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   (1 +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r})) /\n  2 =\n  real c +\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2", "have \"frac d = frac ((1 + Max ?L) / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     ((1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = (1 + Max ?L) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     ((1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2) =\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2", "using *"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     ((1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2) =\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (1 +\n             Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n            2 \\<and>\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2) =\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2) =\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> > Max ?L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < (1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2", "using *"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < (1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2", "by auto"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < frac d", "have \"frac d > frac ?l\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < frac d\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    < frac d", "using l"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < frac d\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    < frac d", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  < frac d\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    False\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "with l_y A"], ["proof (chain)\npicking this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac (v y) = frac d\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  < frac d", "show False"], ["proof (prove)\nusing this:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n  frac (v y) = frac d\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  < frac d\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "have u: \"?u = c + Min ?U\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10) =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by simp"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from Min_in[OF fin(2) \\<open>?U \\<noteq> {}\\<close>]"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "obtain w where w:\n                \"w \\<in> ?X\\<^sub>0\" \"x \\<noteq> w\" \"(x,w) \\<in> r\" \"Min ?U = frac (v w)\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n         x \\<noteq> w; (x, w) \\<in> r;\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} =\n         frac (v w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (x, w) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "with \\<open>(x,y) \\<notin> r\\<close> trans"], ["proof (chain)\npicking this:\n  (x, y) \\<notin> r\n  trans r\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (x, w) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)", "have **: \"(w,y) \\<notin> r\""], ["proof (prove)\nusing this:\n  (x, y) \\<notin> r\n  trans r\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (x, w) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. (w, y) \\<notin> r", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, y) \\<notin> r\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<longrightarrow>\n     (y, z) \\<in> r \\<longrightarrow> (x, z) \\<in> r\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (x, w) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. (w, y) \\<notin> r", "by blast"], ["proof (state)\nthis:\n  (w, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from Min_in[OF fin(2) \\<open>?U \\<noteq> {}\\<close>] Max_in[OF fin(1) \\<open>?L \\<noteq> {}\\<close>] frac_lt_1"], ["proof (chain)\npicking this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac ?x < (1::?'a)", "have \"0 \\<le> Max ?L\" \"Max ?L < 1\" \"0 \\<le> Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac ?x < (1::?'a)\n\ngoal (1 subgoal):\n 1. (0 \\<le> Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}\n     < 1) &&&\n    0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1", "have \"0 \\<le> (Max ?L + Min ?U) / 2\" \"(Max ?L + Min ?U) / 2 < 1\""], ["proof (prove)\nusing this:\n  0 \\<le> Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n            2 &&&\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1", "have ***: \"frac ((Max ?L + Min ?U) / 2) = (Max ?L + Min ?U) / 2\""], ["proof (prove)\nusing this:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n            2 \\<and>\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < 1", ".."], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from y w"], ["proof (chain)\npicking this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (x, w) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)", "have \"y \\<in> ?X\\<^sub>0'\" \"w \\<in> ?X\\<^sub>0'\""], ["proof (prove)\nusing this:\n  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> y\n  w \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}\n  x \\<noteq> w\n  (x, w) \\<in> r\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. y \\<in> {xa \\<in> X.\n             \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} &&&\n    w \\<in> {xa \\<in> X.\n             \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "by auto"], ["proof (state)\nthis:\n  y \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n  w \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "with v **"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  (w, y) \\<notin> r\n  y \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n  w \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}", "have lt: \"frac (v y) < frac (v w)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  (w, y) \\<notin> r\n  y \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n  w \\<in> {xa \\<in> X.\n           \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca}\n\ngoal (1 subgoal):\n 1. frac (v y) < frac (v w)", "by fastforce"], ["proof (state)\nthis:\n  frac (v y) < frac (v w)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "from d L u"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}", "have \"d = ((c + c) + (Max ?L + Min ?U))/2\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = c + (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2 =\n    real c +\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2 =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2", "have \"frac d = frac ((Max ?L + Min ?U) / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> = (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "using ***"], ["proof (prove)\nusing this:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "have \"\\<dots> > (Max ?L + frac (v y)) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     frac (v y)) /\n    2\n    < (Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2", "using lt w(4)"], ["proof (prove)\nusing this:\n  frac (v y) < frac (v w)\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  frac (v w)\n\ngoal (1 subgoal):\n 1. (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     frac (v y)) /\n    2\n    < (Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2", "by auto"], ["proof (state)\nthis:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   frac (v y)) /\n  2\n  < (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   frac (v y)) /\n  2\n  < frac d", "have \"frac d > frac (v y)\""], ["proof (prove)\nusing this:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   frac (v y)) /\n  2\n  < frac d\n\ngoal (1 subgoal):\n 1. frac (v y) < frac d", "using Max_ge[OF fin(1) \\<open>frac (v y) \\<in> ?L\\<close>]"], ["proof (prove)\nusing this:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   frac (v y)) /\n  2\n  < frac d\n  frac (v y)\n  \\<le> Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac (v y) < frac d", "by auto"], ["proof (state)\nthis:\n  frac (v y) < frac d\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  frac (v y) < frac d", "show False"], ["proof (prove)\nusing this:\n  frac (v y) < frac d\n\ngoal (1 subgoal):\n 1. False", "using A"], ["proof (prove)\nusing this:\n  frac (v y) < frac d\n  frac (v y) = frac d\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (frac (v y) = frac d) = ((y, x) \\<in> r \\<and> (x, y) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n   x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?y2) = frac d) =\n                    ((?y2, x) \\<in> r \\<and> (x, ?y2) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "note d_frac_equiv = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n   x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?y2) = frac d) =\n                    ((?y2, x) \\<in> r \\<and> (x, ?y2) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have frac_l: \"frac ?l \\<le> frac d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}", "have \"?l = ?u\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "with d"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)", "have \"d = ?l\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. d =\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  d =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "then"], ["proof (chain)\npicking this:\n  d =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\nusing this:\n  d =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "have \"frac ?l = 0\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    0", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  0\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "moreover"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  0\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"frac d \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> frac d", "by auto"], ["proof (state)\nthis:\n  0 \\<le> frac d\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "ultimately"], ["proof (chain)\npicking this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  0\n  0 \\<le> frac d", "show ?thesis"], ["proof (prove)\nusing this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  0\n  0 \\<le> frac d\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "by linarith"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "note F = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "have l: \"?l = c + Max ?L\" \"frac ?l = Max ?L\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "using Max_in[OF fin(1) \\<open>?L \\<noteq> {}\\<close>]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "by (auto simp: frac_nat_add_id frac_idempotent)"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "from L_intv[OF F]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)", "have *: \"0 < Max ?L\" \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 < Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "from True F"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "have \"?u = c + 1\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10) =\n    real (c + 1)", "by auto"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real (c + 1)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "with l d"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real (c + 1)", "have \"d = ((c + c) + (Max ?L + 1)) / 2\""], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real (c + 1)\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      1)) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    1)) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    1)) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"\\<dots> = c + (1 + Max ?L) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      1)) /\n    2 =\n    real c +\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    1)) /\n  2 =\n  real c +\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2", "have \"frac d = frac ((1 + Max ?L) / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     ((1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"\\<dots> = (1 + Max ?L) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     ((1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2) =\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2", "using *"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     ((1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2) =\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (1 +\n             Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n            2 \\<and>\n    (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2) =\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "also"], ["proof (state)\nthis:\n  frac\n   ((1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2) =\n  (1 +\n   Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"\\<dots> > Max ?L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < (1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2", "using *"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < (1 +\n       Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n      2", "by auto"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < (1 +\n     Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r}) /\n    2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "finally"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < frac d", "show \"frac d \\<ge> frac ?l\""], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < frac d\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "using l"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < frac d\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "have u: \"?u = c + Min ?U\" \"frac ?u = Min ?U\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10) =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "using Min_in[OF fin(2) False]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10) =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by (auto simp: frac_nat_add_id frac_idempotent)"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "from U_intv[OF False]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)", "have **: \"0 < Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 < Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "from l u d"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2", "have \"d = ((c + c) + (Max ?L + Min ?U)) / 2\""], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"\\<dots> = c + (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2 =\n    real c +\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2 =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2", "have \"frac d = frac ((Max ?L + Min ?U) / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"\\<dots> = (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "using * **"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n            2 \\<and>\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "also"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "have \"\\<dots> \\<ge> Max ?L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2", "using l_le_u[OF F False]"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    \\<le> (Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n          2", "by auto"], ["proof (state)\nthis:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> (Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n        2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "finally"], ["proof (chain)\npicking this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> frac d", "show ?thesis"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> frac d\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "using l"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> frac d\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10)\n    \\<le> frac d", "by auto"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have frac_u: \"?U \\<noteq> {} \\<or> ?L = {} \\<longrightarrow> frac d \\<le> frac ?u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "proof (cases \"?U = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "note T = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}", "have \"?l = ?u\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "with d"], ["proof (chain)\npicking this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)", "have \"d = ?u\""], ["proof (prove)\nusing this:\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. d =\n    (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  d =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "then"], ["proof (chain)\npicking this:\n  d =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\nusing this:\n  d =\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "with T"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "show ?thesis"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "note F = this"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "have u: \"?u = c + Min ?U\" \"frac ?u = Min ?U\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10) =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "using Min_in[OF fin(2) \\<open>?U \\<noteq> {}\\<close>]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real (c + 1) else real c + 5 / 10) =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}", "by (auto simp: frac_nat_add_id frac_idempotent)"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "from U_intv[OF F]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)", "have *: \"0 < Min ?U\" \"Min ?U < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 < Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} &&&\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "proof (cases \"?L = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "case True"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "from True F"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "have \"?l = c\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {}\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c", "by auto"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "with u d"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c", "have \"d = ((c + c) + Min ?U) / 2\""], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "have \"\\<dots> = c + Min ?U / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2 =\n    real c +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2 =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2", "have \"frac d = frac (Min ?U / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "have \"\\<dots> = Min ?U / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     (Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r} /\n      2) =\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2", "unfolding frac_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} /\n            2 \\<and>\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    < 1", "using *"], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> Min {frac (v y) |y.\n                 y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                 x \\<noteq> y \\<and> (x, y) \\<in> r} /\n            2 \\<and>\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "also"], ["proof (state)\nthis:\n  frac\n   (Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "have \"\\<dots> \\<le> Min ?U\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}", "using \\<open>0 < Min ?U\\<close>"], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r} /\n    2\n    \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} /\n  2\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "finally"], ["proof (chain)\npicking this:\n  frac d\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}", "have \"frac d \\<le> frac ?u\""], ["proof (prove)\nusing this:\n  frac d\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "using u"], ["proof (prove)\nusing this:\n  frac d\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (2 subgoals):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)\n 2. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "then"], ["proof (chain)\npicking this:\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)", "show ?thesis"], ["proof (prove)\nusing this:\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "case False"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "then"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}", "have l: \"?l = c + Max ?L\" \"frac ?l = Max ?L\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "using Max_in[OF fin(1) False]"], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n  {}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<in> {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. (if {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n        {}\n     then real c +\n          Max {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r}\n     else if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c else real c + 5 / 10) =\n    real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Max {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n              {}\n           then real c else real c + 5 / 10) =\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}", "by (auto simp: frac_nat_add_id frac_idempotent)"], ["proof (state)\nthis:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "from L_intv[OF False]"], ["proof (chain)\npicking this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)", "have **: \"0 < Max ?L\" \"Max ?L < 1\""], ["proof (prove)\nusing this:\n  real c\n  < real c +\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < real (c + 1)\n\ngoal (1 subgoal):\n 1. 0 < Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} &&&\n    Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r}\n    < 1", "by auto"], ["proof (state)\nthis:\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "from l u d"], ["proof (chain)\npicking this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2", "have \"d = ((c + c) + (Max ?L + Min ?U)) / 2\""], ["proof (prove)\nusing this:\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Max {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n           {}\n        then real c else real c + 5 / 10) =\n  real c +\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) =\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  d =\n  ((if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10) +\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)) /\n  2\n\ngoal (1 subgoal):\n 1. d =\n    (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2", "by auto"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "also"], ["proof (state)\nthis:\n  d =\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "have \"\\<dots> = c + (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (c + c) +\n     (Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r} +\n      Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n    2 =\n    real c +\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "by simp"], ["proof (state)\nthis:\n  (real (c + c) +\n   (Max {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (y, x) \\<in> r} +\n    Min {frac (v y) |y.\n         y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n         x \\<noteq> y \\<and> (x, y) \\<in> r})) /\n  2 =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "finally"], ["proof (chain)\npicking this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2", "have \"frac d = frac ((Max ?L + Min ?U) / 2)\""], ["proof (prove)\nusing this:\n  d =\n  real c +\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. frac d =\n    frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2)", "by (simp add: frac_nat_add_id)"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "also"], ["proof (state)\nthis:\n  frac d =\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2)\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "have \"\\<dots> = (Max ?L + Min ?U) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "using * **"], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. frac\n     ((Max {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} +\n       Min {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n      2) =\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2", "unfolding frac_eq"], ["proof (prove)\nusing this:\n  0 < Min {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (x, y) \\<in> r}\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  < 1\n  0 < Max {frac (v y) |y.\n           y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n           x \\<noteq> y \\<and> (y, x) \\<in> r}\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  < 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> (Max {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (y, x) \\<in> r} +\n             Min {frac (v y) |y.\n                  y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                  x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n            2 \\<and>\n    (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    < 1", "by auto"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "also"], ["proof (state)\nthis:\n  frac\n   ((Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2) =\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "have \"\\<dots> \\<le> Min ?U\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}", "using l_le_u[OF False F]"], ["proof (prove)\nusing this:\n  Max {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (y, x) \\<in> r}\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (Max {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (y, x) \\<in> r} +\n     Min {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n    2\n    \\<le> Min {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (x, y) \\<in> r}", "by auto"], ["proof (state)\nthis:\n  (Max {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} +\n   Min {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r}) /\n  2\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n    {} \\<Longrightarrow>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "finally"], ["proof (chain)\npicking this:\n  frac d\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}", "show ?thesis"], ["proof (prove)\nusing this:\n  frac d\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "using u"], ["proof (prove)\nusing this:\n  frac d\n  \\<le> Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n  (if {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n      {}\n   then real c +\n        Min {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r}\n   else if {frac (v y) |y.\n            y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n            x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n           {}\n        then real (c + 1) else real c + 5 / 10) =\n  real c +\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10) =\n  Min {frac (v y) |y.\n       y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n       x \\<noteq> y \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} \\<or>\n    {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (y, x) \\<in> r} =\n    {} \\<longrightarrow>\n    frac d\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Min {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (x, y) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                    {}\n                 then real (c + 1) else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"\\<forall> y \\<in> ?X\\<^sub>0 - {x}. (y,x) \\<in> r \\<longleftrightarrow> frac (v y) \\<le> frac d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        (y, x) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac (v y) \\<le> frac d\n 2. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac (v y) \\<le> frac d\\<rbrakk>\n       \\<Longrightarrow> (y, x) \\<in> r", "case (1 y k)"], ["proof (state)\nthis:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (y, x) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        (y, x) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac (v y) \\<le> frac d\n 2. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac (v y) \\<le> frac d\\<rbrakk>\n       \\<Longrightarrow> (y, x) \\<in> r", "with L_bound[of y] frac_l"], ["proof (chain)\npicking this:\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (y, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v y)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (y, x) \\<in> r", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (y, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v y)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac d", "by auto"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac d\n\ngoal (1 subgoal):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac (v y) \\<le> frac d\\<rbrakk>\n       \\<Longrightarrow> (y, x) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac (v y) \\<le> frac d\\<rbrakk>\n       \\<Longrightarrow> (y, x) \\<in> r", "case (2 y k)"], ["proof (state)\nthis:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n\ngoal (1 subgoal):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac (v y) \\<le> frac d\\<rbrakk>\n       \\<Longrightarrow> (y, x) \\<in> r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "proof (rule ccontr, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "with total 2 \\<open>x \\<in> X\\<close> Intv"], ["proof (chain)\npicking this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  x \\<in> X\n  I x = Intv c\n  (y, x) \\<notin> r", "have \"(x,y) \\<in> r\""], ["proof (prove)\nusing this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  x \\<in> X\n  I x = Intv c\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  x \\<in> X\n  I x = Intv c\n  (y, x) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "with 2 U_bound[of y]"], ["proof (chain)\npicking this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (x, y) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v y)\n  (x, y) \\<in> r", "have \"?U \\<noteq> {}\" \"frac ?u \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (x, y) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v y)\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {} &&&\n    frac\n     (if {frac (v y) |y.\n          y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n         {}\n      then real c +\n           Min {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (x, y) \\<in> r}\n      else if {frac (v y) |y.\n               y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n              {}\n           then real (c + 1) else real c + 5 / 10)\n    \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "with frac_u"], ["proof (chain)\npicking this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)", "have \"frac d \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Min {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n            {}\n         then real (c + 1) else real c + 5 / 10)\n  \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. frac d \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac d \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> r \\<Longrightarrow> False", "with 2 d_frac_equiv 1"], ["proof (chain)\npicking this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n   x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?y2) = frac d) =\n                    ((?y2, x) \\<in> r \\<and> (x, ?y2) \\<in> r)\n  (y, x) \\<notin> r\n  frac d \\<le> frac (v y)", "show False"], ["proof (prove)\nusing this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac (v y) \\<le> frac d\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n   x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?y2) = frac d) =\n                    ((?y2, x) \\<in> r \\<and> (x, ?y2) \\<in> r)\n  (y, x) \\<notin> r\n  frac d \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "moreover"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"\\<forall> y \\<in> ?X\\<^sub>0 - {x}. (x,y) \\<in> r \\<longleftrightarrow> frac d \\<le> frac (v y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       ((x, y) \\<in> r) = (frac d \\<le> frac (v y))", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac d \\<le> frac (v y)\n 2. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac d \\<le> frac (v y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "case (1 y k)"], ["proof (state)\nthis:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (x, y) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac d \\<le> frac (v y)\n 2. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac d \\<le> frac (v y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "then"], ["proof (chain)\npicking this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (x, y) \\<in> r", "have \"?U \\<noteq> {}\""], ["proof (prove)\nusing this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. {frac (v y) |y.\n     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n    {}", "by auto"], ["proof (state)\nthis:\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        (x, y) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> frac d \\<le> frac (v y)\n 2. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac d \\<le> frac (v y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "with 1 U_bound[of y] frac_u"], ["proof (chain)\npicking this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (x, y) \\<in> r\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (x, y) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v y)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}", "show ?case"], ["proof (prove)\nusing this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  (x, y) \\<in> r\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (x, y) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac\n                     (if {frac (v y) |y.\n                          y \\<in> {x \\<in> X.\n                                   \\<exists>c. I x = Intv c} \\<and>\n                          x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                         {}\n                      then real c +\n                           Min {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (x, y) \\<in> r}\n                      else if {frac (v y) |y.\n                               y \\<in> {x \\<in> X.\n  \\<exists>c. I x = Intv c} \\<and>\n                               x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                              {}\n                           then real (c + 1) else real c + 5 / 10)\n                    \\<le> frac (v y)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {} \\<or>\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (y, x) \\<in> r} =\n  {} \\<longrightarrow>\n  frac d\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Min {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (x, y) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                  {}\n               then real (c + 1) else real c + 5 / 10)\n  {frac (v y) |y.\n   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. frac d \\<le> frac (v y)", "by auto"], ["proof (state)\nthis:\n  frac d \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac d \\<le> frac (v y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac d \\<le> frac (v y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "case (2 y k)"], ["proof (state)\nthis:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n\ngoal (1 subgoal):\n 1. \\<And>y c.\n       \\<lbrakk>y \\<notin> {}; y \\<in> X; I y = Intv c; y \\<noteq> x;\n        frac d \\<le> frac (v y)\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "proof (rule ccontr, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "with total 2 \\<open>x \\<in> X\\<close> Intv"], ["proof (chain)\npicking this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  x \\<in> X\n  I x = Intv c\n  (x, y) \\<notin> r", "have \"(y,x) \\<in> r\""], ["proof (prove)\nusing this:\n  total_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  x \\<in> X\n  I x = Intv c\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "unfolding total_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}.\n        x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  x \\<in> X\n  I x = Intv c\n  (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r", "by auto"], ["proof (state)\nthis:\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "with 2 L_bound[of y]"], ["proof (chain)\npicking this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (y, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v y)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n  (y, x) \\<in> r", "have \"frac (v y) \\<le> frac ?l\""], ["proof (prove)\nusing this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  \\<lbrakk>y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c}; x \\<noteq> y;\n   (y, x) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> frac (v y)\n                    \\<le> frac\n                           (if {frac (v y) |y.\n                                y \\<in> {x \\<in> X.\n   \\<exists>c. I x = Intv c} \\<and>\n                                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n                               {}\n                            then real c +\n                                 Max {frac (v y) |y.\ny \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\nx \\<noteq> y \\<and> (y, x) \\<in> r}\n                            else if {frac (v y) |y.\n                                     y \\<in> {x \\<in> X.\n        \\<exists>c. I x = Intv c} \\<and>\n                                     x \\<noteq> y \\<and>\n                                     (x, y) \\<in> r} \\<noteq>\n                                    {}\n                                 then real c else real c + 5 / 10)\n  (y, x) \\<in> r\n\ngoal (1 subgoal):\n 1. frac (v y)\n    \\<le> frac\n           (if {frac (v y) |y.\n                y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n               {}\n            then real c +\n                 Max {frac (v y) |y.\n                      y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                      x \\<noteq> y \\<and> (y, x) \\<in> r}\n            else if {frac (v y) |y.\n                     y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                     x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                    {}\n                 then real c else real c + 5 / 10)", "by auto"], ["proof (state)\nthis:\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "with frac_l"], ["proof (chain)\npicking this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)", "have \"frac (v y) \\<le> frac d\""], ["proof (prove)\nusing this:\n  frac\n   (if {frac (v y) |y.\n        y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n        x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n       {}\n    then real c +\n         Max {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r}\n    else if {frac (v y) |y.\n             y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n             x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n            {}\n         then real c else real c + 5 / 10)\n  \\<le> frac d\n  frac (v y)\n  \\<le> frac\n         (if {frac (v y) |y.\n              y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n              x \\<noteq> y \\<and> (y, x) \\<in> r} \\<noteq>\n             {}\n          then real c +\n               Max {frac (v y) |y.\n                    y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                    x \\<noteq> y \\<and> (y, x) \\<in> r}\n          else if {frac (v y) |y.\n                   y \\<in> {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n                   x \\<noteq> y \\<and> (x, y) \\<in> r} \\<noteq>\n                  {}\n               then real c else real c + 5 / 10)\n\ngoal (1 subgoal):\n 1. frac (v y) \\<le> frac d", "by auto"], ["proof (state)\nthis:\n  frac (v y) \\<le> frac d\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> r \\<Longrightarrow> False", "with 2 d_frac_equiv 1"], ["proof (chain)\npicking this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n   x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?y2) = frac d) =\n                    ((?y2, x) \\<in> r \\<and> (x, ?y2) \\<in> r)\n  (x, y) \\<notin> r\n  frac (v y) \\<le> frac d", "show False"], ["proof (prove)\nusing this:\n  y \\<notin> {}\n  y \\<in> X\n  I y = Intv k\n  y \\<noteq> x\n  frac d \\<le> frac (v y)\n  \\<lbrakk>?y2 \\<in> {x \\<in> X. \\<exists>c. I x = Intv c};\n   x \\<noteq> ?y2\\<rbrakk>\n  \\<Longrightarrow> (frac (v ?y2) = frac d) =\n                    ((?y2, x) \\<in> r \\<and> (x, ?y2) \\<in> r)\n  (x, y) \\<notin> r\n  frac (v y) \\<le> frac d\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))", "have d:\n        \"c < d\" \"d < c + 1\" \"\\<forall> y \\<in> ?X\\<^sub>0 - {x}. (y,x) \\<in> r \\<longleftrightarrow> frac (v y) \\<le> frac d\"\n        \"\\<forall> y \\<in> ?X\\<^sub>0 - {x}. (x,y) \\<in> r \\<longleftrightarrow> frac d \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. (real c < d &&& d < real (c + 1)) &&&\n    \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       ((y, x) \\<in> r) = (frac (v y) \\<le> frac d) &&&\n    \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       ((x, y) \\<in> r) = (frac d \\<le> frac (v y))", "using d3"], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n  real c < d\n  d < real (c + 1)\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. (real c < d &&& d < real (c + 1)) &&&\n    \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       ((y, x) \\<in> r) = (frac (v y) \\<le> frac d) &&&\n    \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n       ((x, y) \\<in> r) = (frac d \\<le> frac (v y))", "by auto"], ["proof (state)\nthis:\n  real c < d\n  d < real (c + 1)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "let ?v = \"v(x := d)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "have \"?v \\<in> region X I r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v(x := d) \\<in> region X I r", "proof (standard, goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := d)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := d)) xa\n 2. \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)\n 3. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 4. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "from \\<open>d\\<ge>0\\<close> v"], ["proof (chain)\npicking this:\n  0 \\<le> d\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "show ?case"], ["proof (prove)\nusing this:\n  0 \\<le> d\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. 0 \\<le> (v(x := d)) xa", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. 0 \\<le> (v(x := d)) xa\n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)\n 2. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 3. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)", "proof (safe, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa. xa \\<in> X \\<Longrightarrow> intv_elem xa (v(x := d)) (I xa)", "case (1 y)"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>xa. xa \\<in> X \\<Longrightarrow> intv_elem xa (v(x := d)) (I xa)", "with v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  y \\<in> X", "have \"intv_elem y v (?I y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. intv_elem y v (if x = y then Const c else I y)", "by fast"], ["proof (state)\nthis:\n  intv_elem y v (if x = y then Const c else I y)\n\ngoal (1 subgoal):\n 1. \\<And>xa. xa \\<in> X \\<Longrightarrow> intv_elem xa (v(x := d)) (I xa)", "with Intv d(1,2)"], ["proof (chain)\npicking this:\n  I x = Intv c\n  real c < d\n  d < real (c + 1)\n  intv_elem y v (if x = y then Const c else I y)", "show \"intv_elem y ?v (I y)\""], ["proof (prove)\nusing this:\n  I x = Intv c\n  real c < d\n  d < real (c + 1)\n  intv_elem y v (if x = y then Const c else I y)\n\ngoal (1 subgoal):\n 1. intv_elem y (v(x := d)) (I y)", "by (cases \"x = y\", auto) (cases \"I y\", auto)"], ["proof (state)\nthis:\n  intv_elem y (v(x := d)) (I y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>X. intv_elem xa (v(x := d)) (I xa)\n\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. ?X\\<^sub>0 = {x \\<in> X. \\<exists>d. I x = Intv d}\n 2. \\<forall>xa\\<in>?X\\<^sub>0.\n       \\<forall>y\\<in>?X\\<^sub>0.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "from \\<open>x \\<in> X\\<close> Intv"], ["proof (chain)\npicking this:\n  x \\<in> X\n  I x = Intv c", "show \"?X\\<^sub>0' \\<union> {x} = ?X\\<^sub>0\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. {xa \\<in> X.\n     \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} \\<union>\n    {x} =\n    {x \\<in> X. \\<exists>c. I x = Intv c}", "by auto"], ["proof (state)\nthis:\n  {xa \\<in> X.\n   \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} \\<union>\n  {x} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) =\n                        Intv ca} \\<union>\n                    {x}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) =\n                          Intv ca} \\<union>\n                      {x}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "with refl"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  {xa \\<in> X.\n   \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} \\<union>\n  {x} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}", "have \"r \\<subseteq> (?X\\<^sub>0' \\<union> {x}) \\<times> (?X\\<^sub>0' \\<union> {x})\""], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  {xa \\<in> X.\n   \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} \\<union>\n  {x} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> ({xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) =\n                       Intv ca} \\<union>\n                   {x}) \\<times>\n                  ({xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) =\n                       Intv ca} \\<union>\n                   {x})", "unfolding refl_on_def"], ["proof (prove)\nusing this:\n  r \\<subseteq> {x \\<in> X. \\<exists>c. I x = Intv c} \\<times>\n                {x \\<in> X. \\<exists>c. I x = Intv c} \\<and>\n  (\\<forall>x\\<in>{x \\<in> X. \\<exists>c. I x = Intv c}. (x, x) \\<in> r)\n  {xa \\<in> X.\n   \\<exists>ca. (if x = xa then Const c else I xa) = Intv ca} \\<union>\n  {x} =\n  {x \\<in> X. \\<exists>c. I x = Intv c}\n\ngoal (1 subgoal):\n 1. r \\<subseteq> ({xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) =\n                       Intv ca} \\<union>\n                   {x}) \\<times>\n                  ({xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) =\n                       Intv ca} \\<union>\n                   {x})", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> ({xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca} \\<union>\n                 {x}) \\<times>\n                ({xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca} \\<union>\n                 {x})\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) =\n                        Intv ca} \\<union>\n                    {x}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) =\n                          Intv ca} \\<union>\n                      {x}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "have \"\\<forall> x \\<in> ?X\\<^sub>0'. \\<forall> y \\<in> ?X\\<^sub>0'. (x,y) \\<in> r \\<longleftrightarrow> (x,y) \\<in> ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          ((xa, y)\n           \\<in> {(y, z).\n                  (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z})", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) =\n        ((xa, y)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z})\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) =\n                        Intv ca} \\<union>\n                    {x}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) =\n                          Intv ca} \\<union>\n                      {x}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "with v"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) =\n        ((xa, y)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z})", "have \"\\<forall> x \\<in> ?X\\<^sub>0'. \\<forall> y \\<in> ?X\\<^sub>0'. (x,y) \\<in> r \\<longleftrightarrow> frac (v x) \\<le> frac (v y)\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) =\n        ((xa, y)\n         \\<in> {(y, z).\n                (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z})\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) = (frac (v xa) \\<le> frac (v y))", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) = (frac (v xa) \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) =\n                        Intv ca} \\<union>\n                    {x}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) =\n                          Intv ca} \\<union>\n                      {x}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "then"], ["proof (chain)\npicking this:\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) = (frac (v xa) \\<le> frac (v y))", "have \"\\<forall> x \\<in> ?X\\<^sub>0'. \\<forall> y \\<in> ?X\\<^sub>0'. (x,y) \\<in> r \\<longleftrightarrow> frac (?v x) \\<le> frac (?v y)\""], ["proof (prove)\nusing this:\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) = (frac (v xa) \\<le> frac (v y))\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) = Intv ca}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "by auto"], ["proof (state)\nthis:\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) =\n        (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) =\n                        Intv ca} \\<union>\n                    {x}.\n       \\<forall>y\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) =\n                          Intv ca} \\<union>\n                      {x}.\n          ((xa, y) \\<in> r) =\n          (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "with d(3,4)"], ["proof (chain)\npicking this:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) =\n        (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))", "show \"\\<forall> y \\<in> ?X\\<^sub>0' \\<union> {x}. \\<forall> z \\<in> ?X\\<^sub>0' \\<union> {x}. (y,z) \\<in> r \\<longleftrightarrow> frac (?v y) \\<le> frac (?v z)\""], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n  \\<forall>xa\\<in>{xa \\<in> X.\n                   \\<exists>ca.\n                      (if x = xa then Const c else I xa) = Intv ca}.\n     \\<forall>y\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) = Intv ca}.\n        ((xa, y) \\<in> r) =\n        (frac ((v(x := d)) xa) \\<le> frac ((v(x := d)) y))\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>{xa \\<in> X.\n                    \\<exists>ca.\n                       (if x = xa then Const c else I xa) =\n                       Intv ca} \\<union>\n                   {x}.\n       \\<forall>z\\<in>{xa \\<in> X.\n                       \\<exists>ca.\n                          (if x = xa then Const c else I xa) =\n                          Intv ca} \\<union>\n                      {x}.\n          ((y, z) \\<in> r) =\n          (frac ((v(x := d)) y) \\<le> frac ((v(x := d)) z))", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n                ((y, x) \\<in> r) = (frac (v y) \\<le> frac d);\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n        ((x, y) \\<in> r) = (frac d \\<le> frac (v y));\n     \\<forall>xa.\n        xa \\<in> X \\<and>\n        (\\<exists>ca.\n            (if x = xa then Const c else I xa) = Intv ca) \\<longrightarrow>\n        (\\<forall>y.\n            y \\<in> X \\<and>\n            (\\<exists>ca.\n                (if x = y then Const c else I y) =\n                Intv ca) \\<longrightarrow>\n            ((xa, y) \\<in> r) =\n            (frac (if xa = x then d else v xa)\n             \\<le> frac (if y = x then d else v y)))\\<rbrakk>\n    \\<Longrightarrow> (x, x) \\<in> r", "case 1"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((y, x) \\<in> r) = (frac (v y) \\<le> frac d)\n  \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n     ((x, y) \\<in> r) = (frac d \\<le> frac (v y))\n  \\<forall>xa.\n     xa \\<in> X \\<and>\n     (\\<exists>ca.\n         (if x = xa then Const c else I xa) = Intv ca) \\<longrightarrow>\n     (\\<forall>y.\n         y \\<in> X \\<and>\n         (\\<exists>ca.\n             (if x = y then Const c else I y) = Intv ca) \\<longrightarrow>\n         ((xa, y) \\<in> r) =\n         (frac (if xa = x then d else v xa)\n          \\<le> frac (if y = x then d else v y)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n                ((y, x) \\<in> r) = (frac (v y) \\<le> frac d);\n     \\<forall>y\\<in>{x \\<in> X. \\<exists>c. I x = Intv c} - {x}.\n        ((x, y) \\<in> r) = (frac d \\<le> frac (v y));\n     \\<forall>xa.\n        xa \\<in> X \\<and>\n        (\\<exists>ca.\n            (if x = xa then Const c else I xa) = Intv ca) \\<longrightarrow>\n        (\\<forall>y.\n            y \\<in> X \\<and>\n            (\\<exists>ca.\n                (if x = y then Const c else I y) =\n                Intv ca) \\<longrightarrow>\n            ((xa, y) \\<in> r) =\n            (frac (if xa = x then d else v xa)\n             \\<le> frac (if y = x then d else v y)))\\<rbrakk>\n    \\<Longrightarrow> (x, x) \\<in> r", "from refl \\<open>x \\<in> X\\<close> Intv"], ["proof (chain)\npicking this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  x \\<in> X\n  I x = Intv c", "show ?case"], ["proof (prove)\nusing this:\n  refl_on {x \\<in> X. \\<exists>c. I x = Intv c} r\n  x \\<in> X\n  I x = Intv c\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> r", "by (auto simp: refl_on_def)"], ["proof (state)\nthis:\n  (x, x) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>{xa \\<in> X.\n                  \\<exists>ca.\n                     (if x = xa then Const c else I xa) = Intv ca} \\<union>\n                 {x}.\n     \\<forall>z\\<in>{xa \\<in> X.\n                     \\<exists>ca.\n                        (if x = xa then Const c else I xa) =\n                        Intv ca} \\<union>\n                    {x}.\n        ((y, z) \\<in> r) = (frac ((v(x := d)) y) \\<le> frac ((v(x := d)) z))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v(x := d) \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<And>x2.\n       I x = Intv x2 \\<Longrightarrow>\n       \\<exists>c. v(x := c) \\<in> region X I r", "then"], ["proof (chain)\npicking this:\n  v(x := d) \\<in> region X I r", "show ?thesis"], ["proof (prove)\nusing this:\n  v(x := d) \\<in> region X I r\n\ngoal (1 subgoal):\n 1. \\<exists>c. v(x := c) \\<in> region X I r", "by auto"], ["proof (state)\nthis:\n  \\<exists>c. v(x := c) \\<in> region X I r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>c. v(x := c) \\<in> region X I r\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<exists>c. v(x := c) \\<in> region X I r", "obtain d where \"v(x := d) \\<in> R\""], ["proof (prove)\nusing this:\n  \\<exists>c. v(x := c) \\<in> region X I r\n\ngoal (1 subgoal):\n 1. (\\<And>d. v(x := d) \\<in> R \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using R"], ["proof (prove)\nusing this:\n  \\<exists>c. v(x := c) \\<in> region X I r\n  R = region X I r\n  valid_region X k I r\n  v \\<in> region X I r\n\ngoal (1 subgoal):\n 1. (\\<And>d. v(x := d) \\<in> R \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v(x := d) \\<in> R\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  v(x := d) \\<in> R", "have \"(v(x := d))(x := c) \\<in> region_set R x c\""], ["proof (prove)\nusing this:\n  v(x := d) \\<in> R\n\ngoal (1 subgoal):\n 1. v(x := d, x := real c) \\<in> region_set R x (real c)", "unfolding region_set_def"], ["proof (prove)\nusing this:\n  v(x := d) \\<in> R\n\ngoal (1 subgoal):\n 1. v(x := d, x := real c) \\<in> {v(x := real c) |v. v \\<in> R}", "by blast"], ["proof (state)\nthis:\n  v(x := d, x := real c) \\<in> region_set R x (real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  v(x := d, x := real c) \\<in> region_set R x (real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "from v \\<open>x \\<in> X\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  x \\<in> X", "have \"(v(x := d))(x := c) = v\""], ["proof (prove)\nusing this:\n  v \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n           {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. v(x := d, x := real c) = v", "by fastforce"], ["proof (state)\nthis:\n  v(x := d, x := real c) = v\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  v(x := d, x := real c) \\<in> region_set R x (real c)\n  v(x := d, x := real c) = v", "have \"v \\<in> region_set R x c\""], ["proof (prove)\nusing this:\n  v(x := d, x := real c) \\<in> region_set R x (real c)\n  v(x := d, x := real c) = v\n\ngoal (1 subgoal):\n 1. v \\<in> region_set R x (real c)", "by simp"], ["proof (state)\nthis:\n  v \\<in> region_set R x (real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "}"], ["proof (state)\nthis:\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z).\n          (y, z) \\<in> r \\<and>\n          x \\<noteq> y \\<and> x \\<noteq> z} \\<Longrightarrow>\n  ?va2 \\<in> region_set R x (real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  ?va2 \\<in> region_set R x (real c) \\<Longrightarrow>\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z).\n          (y, z) \\<in> r \\<and>\n          x \\<noteq> y \\<and> x \\<noteq> z} \\<Longrightarrow>\n  ?va2 \\<in> region_set R x (real c)", "have \"region_set R x c = region X ?I ?r\""], ["proof (prove)\nusing this:\n  ?va2 \\<in> region_set R x (real c) \\<Longrightarrow>\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  ?va2\n  \\<in> region X (\\<lambda>y. if x = y then Const c else I y)\n         {(y, z).\n          (y, z) \\<in> r \\<and>\n          x \\<noteq> y \\<and> x \\<noteq> z} \\<Longrightarrow>\n  ?va2 \\<in> region_set R x (real c)\n\ngoal (1 subgoal):\n 1. region_set R x (real c) =\n    region X (\\<lambda>y. if x = y then Const c else I y)\n     {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "by blast"], ["proof (state)\nthis:\n  region_set R x (real c) =\n  region X (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "with valid \\<R>_def"], ["proof (chain)\npicking this:\n  valid_region X k (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  region_set R x (real c) =\n  region X (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}", "have *: \"region_set R x c \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  valid_region X k (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  region_set R x (real c) =\n  region X (\\<lambda>y. if x = y then Const c else I y)\n   {(y, z). (y, z) \\<in> r \\<and> x \\<noteq> y \\<and> x \\<noteq> z}\n\ngoal (1 subgoal):\n 1. region_set R x (real c) \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  region_set R x (real c) \\<in> \\<R>\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  region_set R x (real c) \\<in> \\<R>\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "from assms"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  c \\<le> k x\n  x \\<in> X", "have **: \"v (x := c) \\<in> region_set R x c\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  c \\<le> k x\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. v(x := real c) \\<in> region_set R x (real c)", "unfolding region_set_def"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  c \\<le> k x\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. v(x := real c) \\<in> {v(x := real c) |v. v \\<in> R}", "by auto"], ["proof (state)\nthis:\n  v(x := real c) \\<in> region_set R x (real c)\n\ngoal (3 subgoals):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n 2. [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n 3. v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  region_set R x (real c) \\<in> \\<R>\n  v(x := real c) \\<in> region_set R x (real c)", "show \"[v(x := c)]\\<^sub>\\<R> = region_set R x c\" \"[v(x := c)]\\<^sub>\\<R> \\<in> \\<R>\" \"v(x := c) \\<in> [v(x := c)]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  region_set R x (real c) \\<in> \\<R>\n  v(x := real c) \\<in> region_set R x (real c)\n\ngoal (1 subgoal):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c) &&&\n    [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R> &&&\n    v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "using region_unique[OF _ ** *] \\<R>_def"], ["proof (prove)\nusing this:\n  region_set R x (real c) \\<in> \\<R>\n  v(x := real c) \\<in> region_set R x (real c)\n  \\<R> = {region ?X I r |I r. valid_region ?X ?k I r} \\<Longrightarrow>\n  [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c) &&&\n    [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R> &&&\n    v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [v(x := real c)]\\<^sub>\\<R> = region_set R x (real c)\n  [v(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n  v(x := real c) \\<in> [v(x := real c)]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "definition region_set'\nwhere\n  \"region_set' R r c = {[r \\<rightarrow> c]v | v. v \\<in> R}\""], ["", "lemma region_set'_id:\n  fixes X k and c :: nat\n  defines \"\\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\"\n  assumes \"R \\<in> \\<R>\" \"v \\<in> R\" \"finite X\" \"0 \\<le> c\" \"\\<forall> x \\<in> set r. c \\<le> k x\" \"set r \\<subseteq> X\"\n  shows \"[[r \\<rightarrow> c]v]\\<^sub>\\<R> = region_set' R r c \\<and> [[r \\<rightarrow> c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and> [r \\<rightarrow> c]v \\<in> [[r \\<rightarrow> c]v]\\<^sub>\\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [[r\\<rightarrow>real c]v]\\<^sub>\\<R> = region_set' R r (real c) \\<and>\n    [[r\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n    [r\\<rightarrow>real c]v \\<in> [[r\\<rightarrow>real c]v]\\<^sub>\\<R>", "using assms"], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  \\<forall>x\\<in>set r. c \\<le> k x\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. [[r\\<rightarrow>real c]v]\\<^sub>\\<R> = region_set' R r (real c) \\<and>\n    [[r\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n    [r\\<rightarrow>real c]v \\<in> [[r\\<rightarrow>real c]v]\\<^sub>\\<R>", "proof (induction r)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; finite X; 0 \\<le> c; \\<forall>x\\<in>set []. c \\<le> k x;\n     set [] \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                      region_set' R [] (real c) \\<and>\n                      [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n                      \\<in> \\<R> \\<and>\n                      [[]\\<rightarrow>real c]v\n                      \\<in> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "case Nil"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  \\<forall>x\\<in>set []. c \\<le> k x\n  set [] \\<subseteq> X\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; finite X; 0 \\<le> c; \\<forall>x\\<in>set []. c \\<le> k x;\n     set [] \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                      region_set' R [] (real c) \\<and>\n                      [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n                      \\<in> \\<R> \\<and>\n                      [[]\\<rightarrow>real c]v\n                      \\<in> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "from regions_closed[OF _ Nil(2,3)] regions_closed'[OF _ Nil(2,3)] region_unique[OF _ Nil(3,2)] Nil(1)"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> [v \\<oplus> ?t]\\<^sub>\\<R> \\<in> \\<R>\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> [v \\<oplus> ?t]\\<^sub>\\<R>\n  \\<R> = {region ?X I r |I r. valid_region ?X ?k I r} \\<Longrightarrow>\n  [v]\\<^sub>\\<R> = R\n  \\<R> = {region X I r |I r. valid_region X k I r}", "have \"[v]\\<^sub>\\<R> = R\" \"[v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R>\" \"(v \\<oplus> 0) \\<in> [v \\<oplus> 0]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> [v \\<oplus> ?t]\\<^sub>\\<R> \\<in> \\<R>\n  \\<lbrakk>\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   0 \\<le> ?t\\<rbrakk>\n  \\<Longrightarrow> v \\<oplus> ?t \\<in> [v \\<oplus> ?t]\\<^sub>\\<R>\n  \\<R> = {region ?X I r |I r. valid_region ?X ?k I r} \\<Longrightarrow>\n  [v]\\<^sub>\\<R> = R\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. [v]\\<^sub>\\<R> = R &&&\n    [v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R> &&&\n    v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [v]\\<^sub>\\<R> = R\n  [v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R>\n  v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n     v \\<in> R; finite X; 0 \\<le> c; \\<forall>x\\<in>set []. c \\<le> k x;\n     set [] \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                      region_set' R [] (real c) \\<and>\n                      [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n                      \\<in> \\<R> \\<and>\n                      [[]\\<rightarrow>real c]v\n                      \\<in> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  [v]\\<^sub>\\<R> = R\n  [v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R>\n  v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>", "show ?case"], ["proof (prove)\nusing this:\n  [v]\\<^sub>\\<R> = R\n  [v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R>\n  v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> = region_set' R [] (real c) \\<and>\n    [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n    [[]\\<rightarrow>real c]v \\<in> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>", "unfolding region_set'_def cval_add_def"], ["proof (prove)\nusing this:\n  [v]\\<^sub>\\<R> = R\n  [(\\<lambda>x. v x + 0)]\\<^sub>\\<R> \\<in> \\<R>\n  (\\<lambda>x. v x + 0) \\<in> [(\\<lambda>x. v x + 0)]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> =\n    {[[]\\<rightarrow>real c]v |v. v \\<in> R} \\<and>\n    [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n    [[]\\<rightarrow>real c]v \\<in> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>", "by simp"], ["proof (state)\nthis:\n  [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> = region_set' R [] (real c) \\<and>\n  [[[]\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n  [[]\\<rightarrow>real c]v \\<in> [[[]\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "case (Cons x xs)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n   v \\<in> R; finite X; 0 \\<le> c; \\<forall>x\\<in>set xs. c \\<le> k x;\n   set xs \\<subseteq> X\\<rbrakk>\n  \\<Longrightarrow> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                    region_set' R xs (real c) \\<and>\n                    [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [xs\\<rightarrow>real c]v\n                    \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  \\<forall>x\\<in>set (x # xs). c \\<le> k x\n  set (x # xs) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n   v \\<in> R; finite X; 0 \\<le> c; \\<forall>x\\<in>set xs. c \\<le> k x;\n   set xs \\<subseteq> X\\<rbrakk>\n  \\<Longrightarrow> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                    region_set' R xs (real c) \\<and>\n                    [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [xs\\<rightarrow>real c]v\n                    \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  \\<forall>x\\<in>set (x # xs). c \\<le> k x\n  set (x # xs) \\<subseteq> X", "have \"[[xs\\<rightarrow>c]v]\\<^sub>\\<R> = region_set' R xs c\" \"[[xs\\<rightarrow>c]v]\\<^sub>\\<R> \\<in> \\<R>\" \"[xs\\<rightarrow>c]v \\<in> [[xs\\<rightarrow>c]v]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n   v \\<in> R; finite X; 0 \\<le> c; \\<forall>x\\<in>set xs. c \\<le> k x;\n   set xs \\<subseteq> X\\<rbrakk>\n  \\<Longrightarrow> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                    region_set' R xs (real c) \\<and>\n                    [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [xs\\<rightarrow>real c]v\n                    \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R \\<in> \\<R>\n  v \\<in> R\n  finite X\n  0 \\<le> c\n  \\<forall>x\\<in>set (x # xs). c \\<le> k x\n  set (x # xs) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> = region_set' R xs (real c) &&&\n    [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> &&&\n    [xs\\<rightarrow>real c]v \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>", "by force+"], ["proof (state)\nthis:\n  [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> = region_set' R xs (real c)\n  [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R>\n  [xs\\<rightarrow>real c]v \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "note IH = this[unfolded \\<R>_def]"], ["proof (state)\nthis:\n  [[xs\\<rightarrow>real\n                    c]v]\\<^sub>{region X I r |I r. valid_region X k I r} =\n  region_set' R xs (real c)\n  [[xs\\<rightarrow>real c]v]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<in> {region X I r |I r. valid_region X k I r}\n  [xs\\<rightarrow>real c]v\n  \\<in> [[xs\\<rightarrow>real\n                          c]v]\\<^sub>{region X I r |I r.\nvalid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "let ?v = \"([xs\\<rightarrow>c]v)(x := c)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "from region_set_id[OF IH(2,3) \\<open>finite X\\<close> \\<open>c \\<ge> 0\\<close>, of x] \\<R>_def Cons.prems(5,6)"], ["proof (chain)\npicking this:\n  \\<lbrakk>c \\<le> k x; x \\<in> X\\<rbrakk>\n  \\<Longrightarrow> [([xs\\<rightarrow>real c]v)\n                    (x := real\n                           c)]\\<^sub>{region X I r |I r.\nvalid_region X k I r} =\n                    region_set\n                     ([[xs\\<rightarrow>real\n  c]v]\\<^sub>{region X I r |I r. valid_region X k I r})\n                     x (real c)\n  \\<lbrakk>c \\<le> k x; x \\<in> X\\<rbrakk>\n  \\<Longrightarrow> [([xs\\<rightarrow>real c]v)\n                    (x := real\n                           c)]\\<^sub>{region X I r |I r.\nvalid_region X k I r}\n                    \\<in> {region X I r |I r. valid_region X k I r}\n  \\<lbrakk>c \\<le> k x; x \\<in> X\\<rbrakk>\n  \\<Longrightarrow> ([xs\\<rightarrow>real c]v)(x := real c)\n                    \\<in> [([xs\\<rightarrow>real c]v)\n                    (x := real\n                           c)]\\<^sub>{region X I r |I r.\nvalid_region X k I r}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>set (x # xs). c \\<le> k x\n  set (x # xs) \\<subseteq> X", "have \"[?v]\\<^sub>\\<R> = region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x c\" \"[?v]\\<^sub>\\<R> \\<in> \\<R>\" \"?v \\<in> [?v]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>c \\<le> k x; x \\<in> X\\<rbrakk>\n  \\<Longrightarrow> [([xs\\<rightarrow>real c]v)\n                    (x := real\n                           c)]\\<^sub>{region X I r |I r.\nvalid_region X k I r} =\n                    region_set\n                     ([[xs\\<rightarrow>real\n  c]v]\\<^sub>{region X I r |I r. valid_region X k I r})\n                     x (real c)\n  \\<lbrakk>c \\<le> k x; x \\<in> X\\<rbrakk>\n  \\<Longrightarrow> [([xs\\<rightarrow>real c]v)\n                    (x := real\n                           c)]\\<^sub>{region X I r |I r.\nvalid_region X k I r}\n                    \\<in> {region X I r |I r. valid_region X k I r}\n  \\<lbrakk>c \\<le> k x; x \\<in> X\\<rbrakk>\n  \\<Longrightarrow> ([xs\\<rightarrow>real c]v)(x := real c)\n                    \\<in> [([xs\\<rightarrow>real c]v)\n                    (x := real\n                           c)]\\<^sub>{region X I r |I r.\nvalid_region X k I r}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>set (x # xs). c \\<le> k x\n  set (x # xs) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> =\n    region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c) &&&\n    [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> \\<in> \\<R> &&&\n    ([xs\\<rightarrow>real c]v)(x := real c)\n    \\<in> [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n  ([xs\\<rightarrow>real c]v)(x := real c) \\<in> [([xs\\<rightarrow>real c]v)\n  (x := real c)]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n  ([xs\\<rightarrow>real c]v)(x := real c) \\<in> [([xs\\<rightarrow>real c]v)\n  (x := real c)]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "have \"region_set' R (x # xs) (real c) = region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. region_set' R (x # xs) (real c) =\n    region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)", "unfolding region_set_def region_set'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {[x # xs\\<rightarrow>real c]v |v. v \\<in> R} =\n    {va(x := real c) |va. va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>}", "proof (safe, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa va.\n       va \\<in> R \\<Longrightarrow>\n       \\<exists>vb.\n          [x # xs\\<rightarrow>real c]va = vb(x := real c) \\<and>\n          vb \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "case (1 y u)"], ["proof (state)\nthis:\n  u \\<in> R\n\ngoal (2 subgoals):\n 1. \\<And>xa va.\n       va \\<in> R \\<Longrightarrow>\n       \\<exists>vb.\n          [x # xs\\<rightarrow>real c]va = vb(x := real c) \\<and>\n          vb \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "let ?u = \"[xs\\<rightarrow>real c]u\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa va.\n       va \\<in> R \\<Longrightarrow>\n       \\<exists>vb.\n          [x # xs\\<rightarrow>real c]va = vb(x := real c) \\<and>\n          vb \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "have \"[x # xs\\<rightarrow>real c]u = ?u(x := real c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [x # xs\\<rightarrow>real c]u = ([xs\\<rightarrow>real c]u)(x := real c)", "by auto"], ["proof (state)\nthis:\n  [x # xs\\<rightarrow>real c]u = ([xs\\<rightarrow>real c]u)(x := real c)\n\ngoal (2 subgoals):\n 1. \\<And>xa va.\n       va \\<in> R \\<Longrightarrow>\n       \\<exists>vb.\n          [x # xs\\<rightarrow>real c]va = vb(x := real c) \\<and>\n          vb \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "moreover"], ["proof (state)\nthis:\n  [x # xs\\<rightarrow>real c]u = ([xs\\<rightarrow>real c]u)(x := real c)\n\ngoal (2 subgoals):\n 1. \\<And>xa va.\n       va \\<in> R \\<Longrightarrow>\n       \\<exists>vb.\n          [x # xs\\<rightarrow>real c]va = vb(x := real c) \\<and>\n          vb \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "from IH(1) 1"], ["proof (chain)\npicking this:\n  [[xs\\<rightarrow>real\n                    c]v]\\<^sub>{region X I r |I r. valid_region X k I r} =\n  region_set' R xs (real c)\n  u \\<in> R", "have \"?u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  [[xs\\<rightarrow>real\n                    c]v]\\<^sub>{region X I r |I r. valid_region X k I r} =\n  region_set' R xs (real c)\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. [xs\\<rightarrow>real c]u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>", "unfolding \\<R>_def region_set'_def"], ["proof (prove)\nusing this:\n  [[xs\\<rightarrow>real\n                    c]v]\\<^sub>{region X I r |I r. valid_region X k I r} =\n  {[xs\\<rightarrow>real c]v |v. v \\<in> R}\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. [xs\\<rightarrow>real c]u\n    \\<in> [[xs\\<rightarrow>real\n                            c]v]\\<^sub>{region X I r |I r.\n  valid_region X k I r}", "by auto"], ["proof (state)\nthis:\n  [xs\\<rightarrow>real c]u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. \\<And>xa va.\n       va \\<in> R \\<Longrightarrow>\n       \\<exists>vb.\n          [x # xs\\<rightarrow>real c]va = vb(x := real c) \\<and>\n          vb \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n 2. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "ultimately"], ["proof (chain)\npicking this:\n  [x # xs\\<rightarrow>real c]u = ([xs\\<rightarrow>real c]u)(x := real c)\n  [xs\\<rightarrow>real c]u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>", "show ?case"], ["proof (prove)\nusing this:\n  [x # xs\\<rightarrow>real c]u = ([xs\\<rightarrow>real c]u)(x := real c)\n  [xs\\<rightarrow>real c]u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>va.\n       [x # xs\\<rightarrow>real c]u = va(x := real c) \\<and>\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  \\<exists>va.\n     [x # xs\\<rightarrow>real c]u = va(x := real c) \\<and>\n     va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "case (2 y u)"], ["proof (state)\nthis:\n  u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>xa va.\n       va \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<Longrightarrow>\n       \\<exists>v.\n          va(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "with IH(1)[unfolded region_set'_def \\<R>_def[symmetric]]"], ["proof (chain)\npicking this:\n  [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n  {[xs\\<rightarrow>real c]v |v. v \\<in> R}\n  u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>", "show ?case"], ["proof (prove)\nusing this:\n  [[xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n  {[xs\\<rightarrow>real c]v |v. v \\<in> R}\n  u \\<in> [[xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>v.\n       u(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R", "by auto"], ["proof (state)\nthis:\n  \\<exists>v. u(x := real c) = [x # xs\\<rightarrow>real c]v \\<and> v \\<in> R\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  region_set' R (x # xs) (real c) =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "moreover"], ["proof (state)\nthis:\n  region_set' R (x # xs) (real c) =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "have \"[x # xs\\<rightarrow>real c]v = ?v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [x # xs\\<rightarrow>real c]v = ([xs\\<rightarrow>real c]v)(x := real c)", "by simp"], ["proof (state)\nthis:\n  [x # xs\\<rightarrow>real c]v = ([xs\\<rightarrow>real c]v)(x := real c)\n\ngoal (1 subgoal):\n 1. \\<And>a r.\n       \\<lbrakk>\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n                 R \\<in> \\<R>; v \\<in> R; finite X; 0 \\<le> c;\n                 \\<forall>x\\<in>set r. c \\<le> k x;\n                 set r \\<subseteq> X\\<rbrakk>\n                \\<Longrightarrow> [[r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                                  region_set' R r (real c) \\<and>\n                                  [[r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                                  \\<in> \\<R> \\<and>\n                                  [r\\<rightarrow>real c]v\n                                  \\<in> [[r\\<rightarrow>real\n                   c]v]\\<^sub>\\<R>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R \\<in> \\<R>;\n        v \\<in> R; finite X; 0 \\<le> c;\n        \\<forall>x\\<in>set (a # r). c \\<le> k x;\n        set (a # r) \\<subseteq> X\\<rbrakk>\n       \\<Longrightarrow> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R> =\n                         region_set' R (a # r) (real c) \\<and>\n                         [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>\n                         \\<in> \\<R> \\<and>\n                         [a # r\\<rightarrow>real c]v\n                         \\<in> [[a # r\\<rightarrow>real c]v]\\<^sub>\\<R>", "ultimately"], ["proof (chain)\npicking this:\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n  ([xs\\<rightarrow>real c]v)(x := real c) \\<in> [([xs\\<rightarrow>real c]v)\n  (x := real c)]\\<^sub>\\<R>\n  region_set' R (x # xs) (real c) =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n  [x # xs\\<rightarrow>real c]v = ([xs\\<rightarrow>real c]v)(x := real c)", "show ?case"], ["proof (prove)\nusing this:\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n  [([xs\\<rightarrow>real c]v)(x := real c)]\\<^sub>\\<R> \\<in> \\<R>\n  ([xs\\<rightarrow>real c]v)(x := real c) \\<in> [([xs\\<rightarrow>real c]v)\n  (x := real c)]\\<^sub>\\<R>\n  region_set' R (x # xs) (real c) =\n  region_set ([[xs\\<rightarrow>real c]v]\\<^sub>\\<R>) x (real c)\n  [x # xs\\<rightarrow>real c]v = ([xs\\<rightarrow>real c]v)(x := real c)\n\ngoal (1 subgoal):\n 1. [[x # xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n    region_set' R (x # xs) (real c) \\<and>\n    [[x # xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n    [x # xs\\<rightarrow>real c]v\n    \\<in> [[x # xs\\<rightarrow>real c]v]\\<^sub>\\<R>", "by presburger"], ["proof (state)\nthis:\n  [[x # xs\\<rightarrow>real c]v]\\<^sub>\\<R> =\n  region_set' R (x # xs) (real c) \\<and>\n  [[x # xs\\<rightarrow>real c]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n  [x # xs\\<rightarrow>real c]v\n  \\<in> [[x # xs\\<rightarrow>real c]v]\\<^sub>\\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>A Semantics Based on Regions\\<close>"], ["", "subsection \\<open>Single step\\<close>"], ["", "inductive step_r ::\n  \"('a, 'c, t, 's) ta \\<Rightarrow> ('c, t) zone set \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> bool\"\n(\"_,_ \\<turnstile> \\<langle>_, _\\<rangle> \\<leadsto> \\<langle>_, _\\<rangle>\" [61,61,61,61] 61)\nwhere\n  step_t_r:\n  \"\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; valid_abstraction A X k; R \\<in> \\<R>; R' \\<in> Succ \\<R> R;\n    R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>; R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\\<rbrakk> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l,R\\<rangle> \\<leadsto> \\<langle>l,R'\\<rangle>\" |\n  step_a_r:\n  \"\\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; valid_abstraction A X k; A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l,R\\<rangle> \\<leadsto> \\<langle>l',region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\\<rangle>\""], ["", "inductive_cases[elim!]: \"A,\\<R> \\<turnstile> \\<langle>l, u\\<rangle> \\<leadsto> \\<langle>l', u'\\<rangle>\""], ["", "declare step_r.intros[intro]"], ["", "lemma region_cover':\n  assumes \"\\<R> = {region X I r |I r. valid_region X k I r}\" and \"\\<forall>x\\<in>X. 0 \\<le> v x\"\n  shows \"v \\<in> [v]\\<^sub>\\<R>\" \"[v]\\<^sub>\\<R> \\<in> \\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> [v]\\<^sub>\\<R> &&& [v]\\<^sub>\\<R> \\<in> \\<R>", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> [v]\\<^sub>\\<R>\n 2. [v]\\<^sub>\\<R> \\<in> \\<R>", "from region_cover[OF assms(2), of k] assms"], ["proof (chain)\npicking this:\n  \\<exists>R.\n     R \\<in> {region X I r |I r. valid_region X k I r} \\<and> v \\<in> R\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> v x", "obtain R where R: \"R \\<in> \\<R>\" \"v \\<in> R\""], ["proof (prove)\nusing this:\n  \\<exists>R.\n     R \\<in> {region X I r |I r. valid_region X k I r} \\<and> v \\<in> R\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<forall>x\\<in>X. 0 \\<le> v x\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        \\<lbrakk>R \\<in> \\<R>; v \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (2 subgoals):\n 1. v \\<in> [v]\\<^sub>\\<R>\n 2. [v]\\<^sub>\\<R> \\<in> \\<R>", "from regions_closed'[OF assms(1) R, of 0]"], ["proof (chain)\npicking this:\n  0 \\<le> 0 \\<Longrightarrow> v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>", "show \"v \\<in> [v]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  0 \\<le> 0 \\<Longrightarrow> v \\<oplus> 0 \\<in> [v \\<oplus> 0]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. v \\<in> [v]\\<^sub>\\<R>", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> 0 \\<Longrightarrow>\n  (\\<lambda>x. v x + 0) \\<in> [(\\<lambda>x. v x + 0)]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. v \\<in> [v]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  v \\<in> [v]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [v]\\<^sub>\\<R> \\<in> \\<R>", "from regions_closed[OF assms(1) R, of 0]"], ["proof (chain)\npicking this:\n  0 \\<le> 0 \\<Longrightarrow> [v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R>", "show \"[v]\\<^sub>\\<R> \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  0 \\<le> 0 \\<Longrightarrow> [v \\<oplus> 0]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [v]\\<^sub>\\<R> \\<in> \\<R>", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  0 \\<le> 0 \\<Longrightarrow> [(\\<lambda>x. v x + 0)]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [v]\\<^sub>\\<R> \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [v]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma step_r_complete_aux:\n  fixes R r A l' g\n  defines \"R' \\<equiv> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\"\n  assumes \"\\<R> = {region X I r |I r. valid_region X k I r}\"\n    and \"valid_abstraction A X k\"\n    and \"u \\<in> R\"\n    and \"R \\<in> \\<R>\"\n    and \"A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\"\n    and \"u \\<turnstile> g\"\n    and \"[r\\<rightarrow>0]u \\<turnstile> inv_of A l'\"\n  shows \"R = R \\<inter> {u. u \\<turnstile> g} \\<and> R' = region_set' R r 0 \\<and> R' \\<in> \\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "note A = assms(2-)"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  u \\<in> R\n  R \\<in> \\<R>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  u \\<turnstile> g\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from A(2)"], ["proof (chain)\npicking this:\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have *:\n    \"\\<forall>(x, m)\\<in>clkp_set A. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n    \"collect_clkvt (trans_of A) \\<subseteq> X\"\n    \"finite X\""], ["proof (prove)\nusing this:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> &&&\n    collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (fastforce elim: valid_abstraction.cases)+"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from A(5) *(2)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X", "have r: \"set r \\<subseteq> X\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "unfolding collect_clkvt_def"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  \\<Union>\n   {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n    t \\<in> trans_of A}\n  \\<subseteq> X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from *(1) A(5)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs g. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clkt_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>collect_clki (inv_of A) \\<union>\n                \\<Union>\n                 {collect_clock_pairs (fst (snd t)) |t. t \\<in> trans_of A}.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs g.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from ccompatible[OF this, folded A(1)] A(3,4,6)"], ["proof (chain)\npicking this:\n  ccompatible \\<R> g\n  u \\<in> R\n  R \\<in> \\<R>\n  u \\<turnstile> g", "have \"R \\<subseteq> \\<lbrace>g\\<rbrace>\""], ["proof (prove)\nusing this:\n  ccompatible \\<R> g\n  u \\<in> R\n  R \\<in> \\<R>\n  u \\<turnstile> g\n\ngoal (1 subgoal):\n 1. R \\<subseteq> \\<lbrace>g\\<rbrace>", "unfolding ccompatible_def ccval_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> {v. v \\<turnstile> g} \\<or>\n     {v. v \\<turnstile> g} \\<inter> R = {}\n  u \\<in> R\n  R \\<in> \\<R>\n  u \\<turnstile> g\n\ngoal (1 subgoal):\n 1. R \\<subseteq> {v. v \\<turnstile> g}", "by blast"], ["proof (state)\nthis:\n  R \\<subseteq> \\<lbrace>g\\<rbrace>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "then"], ["proof (chain)\npicking this:\n  R \\<subseteq> \\<lbrace>g\\<rbrace>", "have R_id: \"R \\<inter> {u. u \\<turnstile> g} = R\""], ["proof (prove)\nusing this:\n  R \\<subseteq> \\<lbrace>g\\<rbrace>\n\ngoal (1 subgoal):\n 1. R \\<inter> {u. u \\<turnstile> g} = R", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  R \\<subseteq> {v. v \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. R \\<inter> {u. u \\<turnstile> g} = R", "by auto"], ["proof (state)\nthis:\n  R \\<inter> {u. u \\<turnstile> g} = R\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from region_set'_id[OF A(4)[unfolded A(1)] A(3) *(3) _ _ r, of 0, folded A(1)]"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 \\<le> 0; \\<forall>x\\<in>set r. 0 \\<le> k x\\<rbrakk>\n  \\<Longrightarrow> [[r\\<rightarrow>real 0]u]\\<^sub>\\<R> =\n                    region_set' R r (real 0) \\<and>\n                    [[r\\<rightarrow>real 0]u]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [r\\<rightarrow>real 0]u\n                    \\<in> [[r\\<rightarrow>real 0]u]\\<^sub>\\<R>", "have **:\n    \"[[r\\<rightarrow>0]u]\\<^sub>\\<R> = region_set' R r 0\" \"[[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\" \"[r\\<rightarrow>0]u \\<in> [[r\\<rightarrow>0]u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> 0; \\<forall>x\\<in>set r. 0 \\<le> k x\\<rbrakk>\n  \\<Longrightarrow> [[r\\<rightarrow>real 0]u]\\<^sub>\\<R> =\n                    region_set' R r (real 0) \\<and>\n                    [[r\\<rightarrow>real 0]u]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [r\\<rightarrow>real 0]u\n                    \\<in> [[r\\<rightarrow>real 0]u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [[r\\<rightarrow>0]u]\\<^sub>\\<R> = region_set' R r 0 &&&\n    [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R> &&&\n    [r\\<rightarrow>0]u \\<in> [[r\\<rightarrow>0]u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> = region_set' R r 0\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\n  [r\\<rightarrow>0]u \\<in> [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "let ?R = \"[[r\\<rightarrow>0]u]\\<^sub>\\<R>\""], ["proof (state)\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from *(1) A(5)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have ***:\n    \"\\<forall>(x, m) \\<in> collect_clock_pairs (inv_of A l'). m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l').\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding inv_of_def clkp_set_def collect_clki_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                collect_clkt (trans_of A).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (snd A l').\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l').\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "from ccompatible[OF this, folded A(1)] **(2-) A(7)"], ["proof (chain)\npicking this:\n  ccompatible \\<R> (inv_of A l')\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\n  [r\\<rightarrow>0]u \\<in> [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'", "have \"?R \\<subseteq> \\<lbrace>inv_of A l'\\<rbrace>\""], ["proof (prove)\nusing this:\n  ccompatible \\<R> (inv_of A l')\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\n  [r\\<rightarrow>0]u \\<in> [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n    \\<subseteq> \\<lbrace>inv_of A l'\\<rbrace>", "unfolding ccompatible_def ccval_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> {v. v \\<turnstile> inv_of A l'} \\<or>\n     {v. v \\<turnstile> inv_of A l'} \\<inter> R = {}\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\n  [r\\<rightarrow>0]u \\<in> [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n    \\<subseteq> {v. v \\<turnstile> inv_of A l'}", "by blast"], ["proof (state)\nthis:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l'\\<rbrace>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "then"], ["proof (chain)\npicking this:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l'\\<rbrace>", "have ***: \"?R \\<inter> {u. u \\<turnstile> inv_of A l'} = ?R\""], ["proof (prove)\nusing this:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l'\\<rbrace>\n\ngoal (1 subgoal):\n 1. ([[r\\<rightarrow>0]u]\\<^sub>\\<R>) \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    [[r\\<rightarrow>0]u]\\<^sub>\\<R>", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n  \\<subseteq> {v. v \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. ([[r\\<rightarrow>0]u]\\<^sub>\\<R>) \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    [[r\\<rightarrow>0]u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  ([[r\\<rightarrow>0]u]\\<^sub>\\<R>) \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "with **(1,2) R_id"], ["proof (chain)\npicking this:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> = region_set' R r 0\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\n  R \\<inter> {u. u \\<turnstile> g} = R\n  ([[r\\<rightarrow>0]u]\\<^sub>\\<R>) \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R>", "show ?thesis"], ["proof (prove)\nusing this:\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> = region_set' R r 0\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R> \\<in> \\<R>\n  R \\<inter> {u. u \\<turnstile> g} = R\n  ([[r\\<rightarrow>0]u]\\<^sub>\\<R>) \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  [[r\\<rightarrow>0]u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n    R' = region_set' R r 0 \\<and> R' \\<in> \\<R>", "by (auto simp: R'_def)"], ["proof (state)\nthis:\n  R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n  R' = region_set' R r 0 \\<and> R' \\<in> \\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma step_r_complete:\n  \"\\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>; \\<R> = {region X I r |I r. valid_region X k I r}; valid_abstraction A X k;\n    \\<forall> x \\<in> X. u x \\<ge> 0\\<rbrakk> \\<Longrightarrow> \\<exists> R'. A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle> \\<and> u' \\<in> R' \\<and> R' \\<in> \\<R>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     valid_abstraction A X (\\<lambda>x. real (k x));\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>R'.\n                         A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                         u' \\<in> R' \\<and> R' \\<in> \\<R>", "proof (induction rule: step.induct, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "case (1 A l u a l' u')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "note A = this"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "then"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x", "obtain g r where u': \"u' = [r\\<rightarrow>0]u\" \"A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\" \"u \\<turnstile> g\" \"u' \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. (\\<And>r g.\n        \\<lbrakk>u' = [r\\<rightarrow>0]u;\n         A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n         u \\<turnstile> g; u' \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases rule: step_a.cases) auto"], ["proof (state)\nthis:\n  u' = [r\\<rightarrow>0]u\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  u \\<turnstile> g\n  u' \\<turnstile> inv_of A l'\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "let ?R'= \"region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from region_cover'[OF A(2,4)]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "have R: \"[u]\\<^sub>\\<R> \\<in> \\<R>\" \"u \\<in> [u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> \\<in> \\<R> &&& u \\<in> [u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from step_r_complete_aux[OF A(2,3) this(2,1) u'(2,3)] u'"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l' \\<Longrightarrow>\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0 \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' = [r\\<rightarrow>0]u\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  u \\<turnstile> g\n  u' \\<turnstile> inv_of A l'", "have *: \"[u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\" \"?R' = region_set' ([u]\\<^sub>\\<R>) r 0\" \"?R' \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l' \\<Longrightarrow>\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0 \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' = [r\\<rightarrow>0]u\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  u \\<turnstile> g\n  u' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} &&&\n    region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    region_set' ([u]\\<^sub>\\<R>) r 0 &&&\n    region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from 1(2,3)"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have \"collect_clkvt (trans_of A) \\<subseteq> X\" \"finite X\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "with u'(2)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X", "have r: \"set r \\<subseteq> X\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "unfolding collect_clkvt_def"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  \\<Union>\n   {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n    t \\<in> trans_of A}\n  \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> X\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from * u'(1) R(2)"], ["proof (chain)\npicking this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>", "have \"u' \\<in> ?R'\""], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. u' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n              0 \\<inter>\n             {u. u \\<turnstile> inv_of A l'}", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  {[r\\<rightarrow>0]v |v. v \\<in> [u]\\<^sub>\\<R>}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. u' \\<in> {[r\\<rightarrow>0]v |v.\n              v \\<in> ([u]\\<^sub>\\<R>) \\<inter>\n                      {u. u \\<turnstile> g}} \\<inter>\n             {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  u' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "moreover"], ["proof (state)\nthis:\n  u' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "have \"A,\\<R> \\<turnstile> \\<langle>l,([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l',?R'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n         (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\\<rangle>", "using R(1) A(2,3) u'(2)"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n         (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>A l u a l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>a\\<^esub> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>\n 2. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "ultimately"], ["proof (chain)\npicking this:\n  u' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  u' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n       u' \\<in> R' \\<and> R' \\<in> \\<R>", "using *(3)"], ["proof (prove)\nusing this:\n  u' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n       u' \\<in> R' \\<and> R' \\<in> \\<R>", "by meson"], ["proof (state)\nthis:\n  \\<exists>R'.\n     A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n     u' \\<in> R' \\<and> R' \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "case (2 A l u d l' u')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "hence u': \"u' = (u \\<oplus> d)\" \"u \\<turnstile> inv_of A l\" \"u \\<oplus> d \\<turnstile> inv_of A l\" \"0 \\<le> d\" and \"l = l'\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. ((u' = u \\<oplus> d &&& u \\<turnstile> inv_of A l) &&&\n     u \\<oplus> d \\<turnstile> inv_of A l &&& 0 \\<le> d) &&&\n    l = l'", "by auto"], ["proof (state)\nthis:\n  u' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n  l = l'\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from region_cover'[OF 2(2,4)]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "have R: \"[u]\\<^sub>\\<R> \\<in> \\<R>\" \"u \\<in> [u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> \\<in> \\<R> &&& u \\<in> [u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from SuccI2[OF 2(2) this(2,1) u'(4), of \"[u']\\<^sub>\\<R>\"] u'(1)"], ["proof (chain)\npicking this:\n  [u']\\<^sub>\\<R> = [u \\<oplus> d]\\<^sub>\\<R> \\<Longrightarrow>\n  [u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  u' = u \\<oplus> d", "have u'1:\n    \"[u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\" \"[u']\\<^sub>\\<R> \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  [u']\\<^sub>\\<R> = [u \\<oplus> d]\\<^sub>\\<R> \\<Longrightarrow>\n  [u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  u' = u \\<oplus> d\n\ngoal (1 subgoal):\n 1. [u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>) &&&\n    [u']\\<^sub>\\<R> \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from regions_closed'[OF 2(2) R(1,2) u'(4)] u'(1)"], ["proof (chain)\npicking this:\n  u \\<oplus> d \\<in> [u \\<oplus> d]\\<^sub>\\<R>\n  u' = u \\<oplus> d", "have u'2: \"u' \\<in> [u']\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<oplus> d \\<in> [u \\<oplus> d]\\<^sub>\\<R>\n  u' = u \\<oplus> d\n\ngoal (1 subgoal):\n 1. u' \\<in> [u']\\<^sub>\\<R>", "by simp"], ["proof (state)\nthis:\n  u' \\<in> [u']\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from 2(3)"], ["proof (chain)\npicking this:\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have *:\n    \"\\<forall>(x, m)\\<in>clkp_set A. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n    \"collect_clkvt (trans_of A) \\<subseteq> X\"\n    \"finite X\""], ["proof (prove)\nusing this:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> &&&\n    collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (fastforce elim: valid_abstraction.cases)+"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from *(1) u'(2)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<turnstile> inv_of A l", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l). m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<turnstile> inv_of A l\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                collect_clkt (trans_of A).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<turnstile> snd A l\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (snd A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "from ccompatible[OF this, folded 2(2)] u'1(2) u'2 u'(1,2,3) R"], ["proof (chain)\npicking this:\n  ccompatible \\<R> (inv_of A l)\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  u' \\<in> [u']\\<^sub>\\<R>\n  u' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>", "have\n    \"[u']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\" \"([u]\\<^sub>\\<R>) \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\""], ["proof (prove)\nusing this:\n  ccompatible \\<R> (inv_of A l)\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  u' \\<in> [u']\\<^sub>\\<R>\n  u' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [u']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace> &&&\n    [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>", "unfolding ccompatible_def ccval_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> {v. v \\<turnstile> inv_of A l} \\<or>\n     {v. v \\<turnstile> inv_of A l} \\<inter> R = {}\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  u' \\<in> [u']\\<^sub>\\<R>\n  u' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [u']\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l} &&&\n    [u]\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  [u']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "with 2 u'1 R(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  [u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  [u']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>", "have \"A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l,([u']\\<^sub>\\<R>)\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  [u']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  [u']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [u']\\<^sub>\\<R>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [u']\\<^sub>\\<R>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l u d l' u'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsup>d\\<^esup> \\<langle>l', u'\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n                            u' \\<in> R' \\<and> R' \\<in> \\<R>", "with u'1(2) u'2 \\<open>l = l'\\<close>"], ["proof (chain)\npicking this:\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  u' \\<in> [u']\\<^sub>\\<R>\n  l = l'\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [u']\\<^sub>\\<R>\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  [u']\\<^sub>\\<R> \\<in> \\<R>\n  u' \\<in> [u']\\<^sub>\\<R>\n  l = l'\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [u']\\<^sub>\\<R>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n       u' \\<in> R' \\<and> R' \\<in> \\<R>", "by meson"], ["proof (state)\nthis:\n  \\<exists>R'.\n     A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n     u' \\<in> R' \\<and> R' \\<in> \\<R>\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Compare this to lemma \\<open>step_z_sound\\<close>. This version is weaker because for regions we may very well\n  arrive at a successor for which not every valuation can be reached by the predecessor.\n  This is the case for e.g. the region with only Greater (k x) bounds.\n\\<close>"], ["", "lemma step_r_sound:\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle> \\<Longrightarrow> \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<Longrightarrow> R' \\<noteq> {} \\<Longrightarrow> (\\<forall> u \\<in> R. \\<exists> u' \\<in> R'. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     R' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<forall>u\\<in>R.\n                         \\<exists>u'\\<in>R'.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>", "proof (induction rule: step_r.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<R> Xa ka A R R' l.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x)); R \\<in> \\<R>;\n        R' \\<in> Succ \\<R> R; R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>;\n        R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        R' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R. Bex R' (step A l u l)\n 2. \\<And>\\<R> Xa ka A l g a r l' R.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x));\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        R \\<in> \\<R>; \\<R> = {region X I r |I r. valid_region X k I r};\n        region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'} \\<noteq>\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R.\n                            Bex (region_set'\n                                  (R \\<inter> {u. u \\<turnstile> g}) r\n                                  0 \\<inter>\n                                 {u. u \\<turnstile> inv_of A l'})\n                             (step A l u l')", "case (step_t_r \\<R> X k A R R' l)"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  R \\<in> \\<R>\n  R' \\<in> Succ \\<R> R\n  R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R' \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<And>\\<R> Xa ka A R R' l.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x)); R \\<in> \\<R>;\n        R' \\<in> Succ \\<R> R; R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>;\n        R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        R' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R. Bex R' (step A l u l)\n 2. \\<And>\\<R> Xa ka A l g a r l' R.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x));\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        R \\<in> \\<R>; \\<R> = {region X I r |I r. valid_region X k I r};\n        region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'} \\<noteq>\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R.\n                            Bex (region_set'\n                                  (R \\<inter> {u. u \\<turnstile> g}) r\n                                  0 \\<inter>\n                                 {u. u \\<turnstile> inv_of A l'})\n                             (step A l u l')", "note A = this[unfolded this(1)]"], ["proof (state)\nthis:\n  {region X I r |I r. valid_region X k I r} =\n  {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  R \\<in> {region X I r |I r. valid_region X k I r}\n  R' \\<in> Succ {region X I r |I r. valid_region X k I r} R\n  R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  {region X I r |I r. valid_region X k I r} =\n  {region X I r |I r. valid_region X k I r}\n  R' \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<And>\\<R> Xa ka A R R' l.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x)); R \\<in> \\<R>;\n        R' \\<in> Succ \\<R> R; R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>;\n        R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>;\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        R' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R. Bex R' (step A l u l)\n 2. \\<And>\\<R> Xa ka A l g a r l' R.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x));\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        R \\<in> \\<R>; \\<R> = {region X I r |I r. valid_region X k I r};\n        region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'} \\<noteq>\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R.\n                            Bex (region_set'\n                                  (R \\<inter> {u. u \\<turnstile> g}) r\n                                  0 \\<inter>\n                                 {u. u \\<turnstile> inv_of A l'})\n                             (step A l u l')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>u\\<in>R.\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "assume u: \"u \\<in> R\""], ["proof (state)\nthis:\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "from set_of_regions[OF A(3) this A(4), folded step_t_r(1)] A(2)"], ["proof (chain)\npicking this:\n  finite X \\<Longrightarrow>\n  \\<exists>t\\<ge>0. [u \\<oplus> t]\\<^sub>\\<R> = R'\n  valid_abstraction A X (\\<lambda>x. real (k x))", "obtain t where t: \"t \\<ge> 0\" \"[u \\<oplus> t]\\<^sub>\\<R> = R'\""], ["proof (prove)\nusing this:\n  finite X \\<Longrightarrow>\n  \\<exists>t\\<ge>0. [u \\<oplus> t]\\<^sub>\\<R> = R'\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>0 \\<le> t; [u \\<oplus> t]\\<^sub>\\<R> = R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  0 \\<le> t\n  [u \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "with regions_closed'[OF A(1,3) u this(1)] step_t_r(1)"], ["proof (chain)\npicking this:\n  u \\<oplus> t\n  \\<in> [u \\<oplus> t]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  0 \\<le> t\n  [u \\<oplus> t]\\<^sub>\\<R> = R'", "have *: \"(u \\<oplus> t) \\<in> R'\""], ["proof (prove)\nusing this:\n  u \\<oplus> t\n  \\<in> [u \\<oplus> t]\\<^sub>{region X I r |I r. valid_region X k I r}\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  0 \\<le> t\n  [u \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. u \\<oplus> t \\<in> R'", "by auto"], ["proof (state)\nthis:\n  u \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "with u t(1) A(5,6)"], ["proof (chain)\npicking this:\n  u \\<in> R\n  0 \\<le> t\n  R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  u \\<oplus> t \\<in> R'", "have \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,(u \\<oplus> t)\\<rangle>\""], ["proof (prove)\nusing this:\n  u \\<in> R\n  0 \\<le> t\n  R \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  R' \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  u \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u \\<oplus>\n                             t\\<rangle>", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  u \\<in> R\n  0 \\<le> t\n  R \\<subseteq> {v. v \\<turnstile> inv_of A l}\n  R' \\<subseteq> {v. v \\<turnstile> inv_of A l}\n  u \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u \\<oplus>\n                             t\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u \\<oplus>\n                           t\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>R'.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>", "with t *"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  [u \\<oplus> t]\\<^sub>\\<R> = R'\n  u \\<oplus> t \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u \\<oplus>\n                           t\\<rangle>", "show \"\\<exists>u'\\<in>R'. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u'\\<rangle>\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  [u \\<oplus> t]\\<^sub>\\<R> = R'\n  u \\<oplus> t \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u \\<oplus>\n                           t\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>u'\\<in>R'.\n       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u'\\<rangle>", "by meson"], ["proof (state)\nthis:\n  \\<exists>u'\\<in>R'.\n     A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,u'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>u\\<in>R.\n     \\<exists>a\\<in>R'.\n        A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l,a\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<R> Xa ka A l g a r l' R.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x));\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        R \\<in> \\<R>; \\<R> = {region X I r |I r. valid_region X k I r};\n        region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'} \\<noteq>\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R.\n                            Bex (region_set'\n                                  (R \\<inter> {u. u \\<turnstile> g}) r\n                                  0 \\<inter>\n                                 {u. u \\<turnstile> inv_of A l'})\n                             (step A l u l')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<R> Xa ka A l g a r l' R.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x));\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        R \\<in> \\<R>; \\<R> = {region X I r |I r. valid_region X k I r};\n        region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'} \\<noteq>\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R.\n                            Bex (region_set'\n                                  (R \\<inter> {u. u \\<turnstile> g}) r\n                                  0 \\<inter>\n                                 {u. u \\<turnstile> inv_of A l'})\n                             (step A l u l')", "case A: (step_a_r \\<R> X k A l g a r l' R)"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  R \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>\\<R> Xa ka A l g a r l' R.\n       \\<lbrakk>\\<R> = {region Xa I r |I r. valid_region Xa ka I r};\n        valid_abstraction A Xa (\\<lambda>x. real (ka x));\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        R \\<in> \\<R>; \\<R> = {region X I r |I r. valid_region X k I r};\n        region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'} \\<noteq>\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>u\\<in>R.\n                            Bex (region_set'\n                                  (R \\<inter> {u. u \\<turnstile> g}) r\n                                  0 \\<inter>\n                                 {u. u \\<turnstile> inv_of A l'})\n                             (step A l u l')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>u\\<in>R.\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "assume u: \"u \\<in> R\""], ["proof (state)\nthis:\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "from A(6)"], ["proof (chain)\npicking this:\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} \\<noteq>\n  {}", "obtain v where v: \"v \\<in> R\" \"v \\<turnstile> g\" \"[r\\<rightarrow>0]v \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R; v \\<turnstile> g;\n         [r\\<rightarrow>0]v \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  {[r\\<rightarrow>0]v |v. v \\<in> R \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R; v \\<turnstile> g;\n         [r\\<rightarrow>0]v \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> R\n  v \\<turnstile> g\n  [r\\<rightarrow>0]v \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "let ?R' = \"region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "from step_r_complete_aux[OF A(1,2) v(1) A(4,3) v(2-)]"], ["proof (chain)\npicking this:\n  R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' R r 0 \\<and>\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>", "have R:\n      \"R = R \\<inter> {u. u \\<turnstile> g}\" \"?R' = region_set' R r 0\""], ["proof (prove)\nusing this:\n  R = R \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' R r 0 \\<and>\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {u. u \\<turnstile> g} &&&\n    region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    region_set' R r 0", "by auto"], ["proof (state)\nthis:\n  R = R \\<inter> {u. u \\<turnstile> g}\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' R r 0\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "from A"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  R \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} \\<noteq>\n  {}", "have \"collect_clkvt (trans_of A) \\<subseteq> X\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  R \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. collect_clkvt (trans_of A) \\<subseteq> X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  collect_clkvt (trans_of A) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "with A(3)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X", "have r: \"set r \\<subseteq> X\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "unfolding collect_clkvt_def"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  \\<Union>\n   {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n    t \\<in> trans_of A}\n  \\<subseteq> X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "from u R"], ["proof (chain)\npicking this:\n  u \\<in> R\n  R = R \\<inter> {u. u \\<turnstile> g}\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' R r 0", "have *: \"[r\\<rightarrow>0]u \\<in> ?R'\" \"u \\<turnstile> g\" \"[r\\<rightarrow>0]u \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  u \\<in> R\n  R = R \\<inter> {u. u \\<turnstile> g}\n  region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' R r 0\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u\n    \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n          {u. u \\<turnstile> inv_of A l'} &&&\n    u \\<turnstile> g &&& [r\\<rightarrow>0]u \\<turnstile> inv_of A l'", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  u \\<in> R\n  R = R \\<inter> {u. u \\<turnstile> g}\n  {[r\\<rightarrow>0]v |v. v \\<in> R \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  {[r\\<rightarrow>0]v |v. v \\<in> R}\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u\n    \\<in> {[r\\<rightarrow>0]v |v.\n           v \\<in> R \\<inter> {u. u \\<turnstile> g}} \\<inter>\n          {u. u \\<turnstile> inv_of A l'} &&&\n    u \\<turnstile> g &&& [r\\<rightarrow>0]u \\<turnstile> inv_of A l'", "by auto"], ["proof (state)\nthis:\n  [r\\<rightarrow>0]u\n  \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u \\<turnstile> g\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "with A(3)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [r\\<rightarrow>0]u\n  \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u \\<turnstile> g\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'", "have \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [r\\<rightarrow>0]u\n  \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u \\<turnstile> g\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u\\<rangle>", "apply (intro step.intros(1))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u\n     \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u \\<turnstile> g; [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>\\<^bsub>?a4\\<^esub> \\<langle>l', [r\\<rightarrow>0]u\\<rangle>", "apply rule"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u\n     \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u \\<turnstile> g; [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> l \\<longrightarrow>\\<^bsup>?g5,?a4,?r5\\<^esup> l'\n 2. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u\n     \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u \\<turnstile> g; [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> u \\<turnstile> ?g5\n 3. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u\n     \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u \\<turnstile> g; [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n 4. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u\n     \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u \\<turnstile> g; [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> [r\\<rightarrow>0]u = [?r5\\<rightarrow>0]u", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> R \\<Longrightarrow>\n       \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                       0 \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "with *"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>0]u\n  \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u \\<turnstile> g\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u\\<rangle>", "show \"\\<exists>a\\<in>?R'. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u\n  \\<in> region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u \\<turnstile> g\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                    0 \\<inter>\n                   {u. u \\<turnstile> inv_of A l'}.\n       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>", "by meson"], ["proof (state)\nthis:\n  \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n                 {u. u \\<turnstile> inv_of A l'}.\n     A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>u\\<in>R.\n     \\<exists>a\\<in>region_set' (R \\<inter> {u. u \\<turnstile> g}) r\n                     0 \\<inter>\n                    {u. u \\<turnstile> inv_of A l'}.\n        A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',a\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Multi Step\\<close>"], ["", "inductive\n  steps_r :: \"('a, 'c, t, 's) ta \\<Rightarrow> ('c, t) zone set \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> bool\"\n(\"_,_ \\<turnstile> \\<langle>_, _\\<rangle> \\<leadsto>* \\<langle>_, _\\<rangle>\" [61,61,61,61,61,61] 61)\nwhere\n  refl: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l, R\\<rangle>\" |\n  step: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\""], ["", "declare steps_r.intros[intro]"], ["", "lemma steps_alt:\n  \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'',u''\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>;\n     A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>", "by (induction rule: steps.induct) auto"], ["", "lemma emptiness_preservance: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle> \\<Longrightarrow> R = {} \\<Longrightarrow> R' = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>;\n     R = {}\\<rbrakk>\n    \\<Longrightarrow> R' = {}", "by (induction rule: step_r.cases) (auto simp: region_set'_def)"], ["", "lemma emptiness_preservance_steps: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l',R'\\<rangle> \\<Longrightarrow> R = {} \\<Longrightarrow> R' = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n     R = {}\\<rbrakk>\n    \\<Longrightarrow> R' = {}", "apply (induction rule: steps_r.induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A \\<R> l R. R = {} \\<Longrightarrow> R = {}\n 2. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        R = {} \\<Longrightarrow> R' = {};\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        R = {}\\<rbrakk>\n       \\<Longrightarrow> R'' = {}", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        R = {} \\<Longrightarrow> R' = {};\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        R = {}\\<rbrakk>\n       \\<Longrightarrow> R'' = {}", "apply (subst emptiness_preservance)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        R = {} \\<Longrightarrow> R' = {};\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        R = {}\\<rbrakk>\n       \\<Longrightarrow> ?A4 A \\<R> l R l' R' l''\n                          R'',?\\<R>4 A \\<R> l R l' R' l''\n                               R'' \\<turnstile> \\<langle>?l4 A \\<R> l R l'\n                    R' l''\n                    R'', ?R4 A \\<R> l R l' R' l''\n                          R''\\<rangle> \\<leadsto> \\<langle>?l'4 A \\<R> l R\n                      l' R' l'' R'', R''\\<rangle>\n 2. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        R = {} \\<Longrightarrow> R' = {};\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        R = {}\\<rbrakk>\n       \\<Longrightarrow> ?R4 A \\<R> l R l' R' l'' R'' = {}\n 3. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        R = {} \\<Longrightarrow> R' = {};\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        R = {}\\<rbrakk>\n       \\<Longrightarrow> {} = {}", "by blast+"], ["", "text \\<open>\n  Note how it is important to define the multi-step semantics \"the right way round\".\n  This also the direction Bouyer implies for her implicit induction.\n\\<close>"], ["", "lemma steps_r_sound:\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle> \\<Longrightarrow> \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<Longrightarrow> R' \\<noteq> {} \\<Longrightarrow> u \\<in> R \\<Longrightarrow> \\<exists> u' \\<in> R'. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r}; R' \\<noteq> {};\n     u \\<in> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u'\\<in>R'.\n                         A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "proof (induction rule: steps_r.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A \\<R> l R.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        R \\<noteq> {}; u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R (steps A l u l)\n 2. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "case refl"], ["proof (state)\nthis:\n  \\<R>_ = {region X I r |I r. valid_region X k I r}\n  R_ \\<noteq> {}\n  u \\<in> R_\n\ngoal (2 subgoals):\n 1. \\<And>A \\<R> l R.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        R \\<noteq> {}; u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R (steps A l u l)\n 2. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "then"], ["proof (chain)\npicking this:\n  \\<R>_ = {region X I r |I r. valid_region X k I r}\n  R_ \\<noteq> {}\n  u \\<in> R_", "show ?case"], ["proof (prove)\nusing this:\n  \\<R>_ = {region X I r |I r. valid_region X k I r}\n  R_ \\<noteq> {}\n  u \\<in> R_\n\ngoal (1 subgoal):\n 1. \\<exists>a\\<in>R_.\n       A_ \\<turnstile> \\<langle>l_, u\\<rangle> \\<rightarrow>* \\<langle>l_, a\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<exists>a\\<in>R_.\n     A_ \\<turnstile> \\<langle>l_, u\\<rangle> \\<rightarrow>* \\<langle>l_, a\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "case (step A \\<R> l R l' R' l'' R'')"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\n  A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R' \\<noteq> {};\n   u \\<in> R\\<rbrakk>\n  \\<Longrightarrow> \\<exists>a\\<in>R'.\n                       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', a\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R'' \\<noteq> {}\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "from emptiness_preservance[OF step.hyps(2)] step.prems"], ["proof (chain)\npicking this:\n  R' = {} \\<Longrightarrow> R'' = {}\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R'' \\<noteq> {}\n  u \\<in> R", "have \"R' \\<noteq> {}\""], ["proof (prove)\nusing this:\n  R' = {} \\<Longrightarrow> R'' = {}\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R'' \\<noteq> {}\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. R' \\<noteq> {}", "by fastforce"], ["proof (state)\nthis:\n  R' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "with step"], ["proof (chain)\npicking this:\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\n  A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R' \\<noteq> {};\n   u \\<in> R\\<rbrakk>\n  \\<Longrightarrow> \\<exists>a\\<in>R'.\n                       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', a\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R'' \\<noteq> {}\n  u \\<in> R\n  R' \\<noteq> {}", "obtain u' where u': \"u' \\<in> R'\" \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>\""], ["proof (prove)\nusing this:\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\n  A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r}; R' \\<noteq> {};\n   u \\<in> R\\<rbrakk>\n  \\<Longrightarrow> \\<exists>a\\<in>R'.\n                       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', a\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R'' \\<noteq> {}\n  u \\<in> R\n  R' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>u'.\n        \\<lbrakk>u' \\<in> R';\n         A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  u' \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "with step_r_sound[OF step(2,4,5)]"], ["proof (chain)\npicking this:\n  \\<forall>u\\<in>R'.\n     \\<exists>u'\\<in>R''.\n        A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow> \\<langle>l'',u'\\<rangle>\n  u' \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "obtain u'' where \"u'' \\<in> R''\" \"A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<forall>u\\<in>R'.\n     \\<exists>u'\\<in>R''.\n        A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow> \\<langle>l'',u'\\<rangle>\n  u' \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>u''.\n        \\<lbrakk>u'' \\<in> R'';\n         A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u'' \\<in> R''\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A \\<R> l R l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         R' \\<noteq> {}; u \\<in> R\\<rbrakk>\n        \\<Longrightarrow> Bex R' (steps A l u l');\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        \\<R> = {region X I r |I r. valid_region X k I r}; R'' \\<noteq> {};\n        u \\<in> R\\<rbrakk>\n       \\<Longrightarrow> Bex R'' (steps A l u l'')", "with u'"], ["proof (chain)\npicking this:\n  u' \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n  u'' \\<in> R''\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  u' \\<in> R'\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n  u'' \\<in> R''\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow> \\<langle>l'',u''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>a\\<in>R''.\n       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', a\\<rangle>", "by (auto intro: steps_alt)"], ["proof (state)\nthis:\n  \\<exists>a\\<in>R''.\n     A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', a\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_r_sound':\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle> \\<Longrightarrow> \\<R> = {region X I r |I r. valid_region X k I r}\n  \\<Longrightarrow> R' \\<noteq> {} \\<Longrightarrow> (\\<exists> u' \\<in> R'. \\<exists> u \\<in> R.  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     R' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u'\\<in>R'.\n                         \\<exists>u\\<in>R.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     R' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u'\\<in>R'.\n                         \\<exists>u\\<in>R.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "case 1"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     R' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u'\\<in>R'.\n                         \\<exists>u\\<in>R.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "with emptiness_preservance_steps[OF this(1)]"], ["proof (chain)\npicking this:\n  R = {} \\<Longrightarrow> R' = {}\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R' \\<noteq> {}", "obtain u where \"u \\<in> R\""], ["proof (prove)\nusing this:\n  R = {} \\<Longrightarrow> R' = {}\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  R' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>u. u \\<in> R \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     R' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u'\\<in>R'.\n                         \\<exists>u\\<in>R.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "with steps_r_sound[OF 1 this]"], ["proof (chain)\npicking this:\n  \\<exists>u'\\<in>R'.\n     A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n  u \\<in> R", "show ?case"], ["proof (prove)\nusing this:\n  \\<exists>u'\\<in>R'.\n     A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<exists>u'\\<in>R'.\n       \\<exists>u\\<in>R.\n          A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<exists>u'\\<in>R'.\n     \\<exists>u\\<in>R.\n        A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma single_step_r:\n  \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<Longrightarrow>\n    A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>", "by (metis steps_r.refl steps_r.step)"], ["", "lemma steps_r_alt:\n  \"A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>;\n     A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>", "apply (induction rule: steps_r.induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A \\<R> la Ra.\n       A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle> \\<Longrightarrow>\n       A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>la, Ra\\<rangle>\n 2. \\<And>A \\<R> la Ra l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>la, Ra\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle> \\<Longrightarrow>\n        A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>", "apply (rule single_step_r)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A \\<R> la Ra.\n       A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle> \\<Longrightarrow>\n       A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle>\n 2. \\<And>A \\<R> la Ra l' R' l'' R''.\n       \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>la, Ra\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle> \\<Longrightarrow>\n        A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle>;\n        A,\\<R> \\<turnstile> \\<langle>l', R'\\<rangle> \\<leadsto> \\<langle>l'', R''\\<rangle>;\n        A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>la, Ra\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>", "by auto"], ["", "lemma single_step:\n  \"x1 \\<turnstile> \\<langle>x2, x3\\<rangle> \\<rightarrow> \\<langle>x4,x5\\<rangle> \\<Longrightarrow> x1 \\<turnstile> \\<langle>x2, x3\\<rangle> \\<rightarrow>* \\<langle>x4,x5\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 \\<turnstile> \\<langle>x2, x3\\<rangle> \\<rightarrow> \\<langle>x4,x5\\<rangle> \\<Longrightarrow>\n    x1 \\<turnstile> \\<langle>x2, x3\\<rangle> \\<rightarrow>* \\<langle>x4, x5\\<rangle>", "by (metis steps.intros)"], ["", "lemma steps_r_complete:\n  \"\\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>; \\<R> = {region X I r |I r. valid_region X k I r}; valid_abstraction A X k;\n    \\<forall> x \\<in> X. u x \\<ge> 0\\<rbrakk> \\<Longrightarrow> \\<exists> R'. A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto>* \\<langle>l',R'\\<rangle> \\<and> u' \\<in> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>;\n     \\<R> = {region X I r |I r. valid_region X k I r};\n     valid_abstraction A X (\\<lambda>x. real (k x));\n     \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>R'.\n                         A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l', R'\\<rangle> \\<and>\n                         u' \\<in> R'", "proof (induction rule: steps.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l u.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l, R'\\<rangle> \\<and>\n                            u \\<in> R'\n 2. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "case (refl A l u)"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (2 subgoals):\n 1. \\<And>A l u.\n       \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l, R'\\<rangle> \\<and>\n                            u \\<in> R'\n 2. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "from region_cover'[OF refl(1,3)]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "show ?case"], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l, R'\\<rangle> \\<and>\n       u \\<in> R'", "by auto"], ["proof (state)\nthis:\n  \\<exists>R'.\n     A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l, R'\\<rangle> \\<and>\n     u \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "case (step A l u l' u' l'' u'')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   valid_abstraction A X (\\<lambda>x. real (k x));\n   \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n  \\<Longrightarrow> \\<exists>R'.\n                       A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                       u'' \\<in> R'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "from step_r_complete[OF step(1,4-6)]"], ["proof (chain)\npicking this:\n  \\<exists>R'.\n     A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n     u' \\<in> R' \\<and> R' \\<in> \\<R>", "obtain R' where R':\n    \"A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l',R'\\<rangle>\" \"u' \\<in> R'\" \"R' \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  \\<exists>R'.\n     A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle> \\<and>\n     u' \\<in> R' \\<and> R' \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>;\n         u' \\<in> R'; R' \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>\n  u' \\<in> R'\n  R' \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "with step(4) \\<open>u' \\<in> R'\\<close>"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  u' \\<in> R'\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>\n  u' \\<in> R'\n  R' \\<in> \\<R>", "have \"\\<forall>x\\<in>X. 0 \\<le> u' x\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  u' \\<in> R'\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>\n  u' \\<in> R'\n  R' \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u' x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u' x\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "with step"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   valid_abstraction A X (\\<lambda>x. real (k x));\n   \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n  \\<Longrightarrow> \\<exists>R'.\n                       A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                       u'' \\<in> R'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  \\<forall>x\\<in>X. 0 \\<le> u' x", "obtain R'' where R'': \"A,\\<R> \\<turnstile> \\<langle>l', ([u']\\<^sub>\\<R>)\\<rangle> \\<leadsto>* \\<langle>l'',R''\\<rangle>\" \"u'' \\<in> R''\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>\n  \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n   valid_abstraction A X (\\<lambda>x. real (k x));\n   \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n  \\<Longrightarrow> \\<exists>R'.\n                       A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                       u'' \\<in> R'\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  \\<forall>x\\<in>X. 0 \\<le> u x\n  \\<forall>x\\<in>X. 0 \\<le> u' x\n\ngoal (1 subgoal):\n 1. (\\<And>R''.\n        \\<lbrakk>A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>;\n         u'' \\<in> R''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n  u'' \\<in> R''\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "with region_unique[OF step(4) R'(2,3)] R'(1)"], ["proof (chain)\npicking this:\n  [u']\\<^sub>\\<R> = R'\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>\n  A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n  u'' \\<in> R''", "have \"A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto>* \\<langle>l'',R''\\<rangle>\""], ["proof (prove)\nusing this:\n  [u']\\<^sub>\\<R> = R'\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', R'\\<rangle>\n  A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n  u'' \\<in> R''\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>", "by (subst steps_r_alt) auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<lbrakk>\\<R> = {region X I r |I r. valid_region X k I r};\n         valid_abstraction A X (\\<lambda>x. real (k x));\n         \\<forall>x\\<in>X. 0 \\<le> u' x\\<rbrakk>\n        \\<Longrightarrow> \\<exists>R'.\n                             A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                             u'' \\<in> R';\n        \\<R> = {region X I r |I r. valid_region X k I r};\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        \\<forall>x\\<in>X. 0 \\<le> u x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>R'.\n                            A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n                            u'' \\<in> R'", "with R'' region_cover'[OF step(4,6)]"], ["proof (chain)\npicking this:\n  A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n  u'' \\<in> R''\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  A,\\<R> \\<turnstile> \\<langle>l', [u']\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n  u'' \\<in> R''\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n       u'' \\<in> R'", "by auto"], ["proof (state)\nthis:\n  \\<exists>R'.\n     A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto>* \\<langle>l'', R'\\<rangle> \\<and>\n     u'' \\<in> R'\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}