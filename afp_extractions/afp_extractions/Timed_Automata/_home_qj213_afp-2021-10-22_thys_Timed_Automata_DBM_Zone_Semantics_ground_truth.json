{"file_name": "/home/qj213/afp-2021-10-22/thys/Timed_Automata/DBM_Zone_Semantics.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Timed_Automata", "problem_names": ["lemma step_z_dbm_preserves_int:\n  assumes \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle>\" \"global_clock_numbering A v n\" \"valid_abstraction A X k\"\n          \"dbm_int D n\"\n  shows \"dbm_int D' n\"", "lemma And_correct:\n  shows \"[M1]\\<^bsub>v,n\\<^esub> \\<inter> [M2]\\<^bsub>v,n\\<^esub> = [And M1 M2]\\<^bsub>v,n\\<^esub>\"", "lemma up_correct:\n  assumes \"clock_numbering' v n\"\n  shows \"[up M]\\<^bsub>v,n\\<^esub> = [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\"", "lemma step_z_dbm_sound:\n  assumes \"A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\" \"global_clock_numbering A v n\"\n  shows \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\"", "lemma step_z_dbm_DBM:\n  assumes \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z\\<rangle>\" \"global_clock_numbering A v n\"\n  obtains D' where \"A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\" \"Z = [D']\\<^bsub>v,n\\<^esub>\"", "lemma step_z_computable:\n  assumes \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l',Z\\<rangle>\" \"global_clock_numbering A v n\"\n  obtains D' where \"Z = [D']\\<^bsub>v,n\\<^esub>\"", "lemma step_z_dbm_complete:\n  assumes \"global_clock_numbering A v n\" \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\"\n  and     \"u \\<in> [(D )]\\<^bsub>v,n\\<^esub>\"\n  shows \"\\<exists> D'. A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle> \\<and> u' \\<in> [D']\\<^bsub>v,n\\<^esub>\"", "lemma steps_z_dbm_sound:\n  assumes \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle>\"\n  and \"global_clock_numbering A v n\"\n  and \"u' \\<in> [D']\\<^bsub>v,n\\<^esub>\"\n  shows \"\\<exists> u \\<in> [D]\\<^bsub>v,n\\<^esub>. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>\"", "lemma steps_z_dbm_complete:\n  assumes \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>\"\n  and \"global_clock_numbering A v n\"\n  and \"u \\<in> [D]\\<^bsub>v,n\\<^esub>\"\n  shows \"\\<exists> D'. A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and> u' \\<in> [D']\\<^bsub>v,n\\<^esub>\""], "translations": [["", "lemma step_z_dbm_preserves_int:\n  assumes \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle>\" \"global_clock_numbering A v n\" \"valid_abstraction A X k\"\n          \"dbm_int D n\"\n  shows \"dbm_int D' n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dbm_int D' n", "using assms"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n\ngoal (1 subgoal):\n 1. dbm_int D' n", "proof (cases, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n; l' = l;\n        D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "case (1 D'')"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n; l' = l;\n        D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "hence \"clock_numbering' v n\" \"\\<forall>c\\<in>clk_set A. v c \\<le> n\""], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. \\<forall>c.\n       0 < v c \\<and>\n       (\\<forall>x y.\n           v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n           x = y) &&&\n    \\<forall>c\\<in>clk_set A. v c \\<le> n", "by blast+"], ["proof (state)\nthis:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n; l' = l;\n        D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "from 1(2)"], ["proof (chain)\npicking this:\n  valid_abstraction A X k", "have \"\\<forall> (x, m) \\<in> clkp_set A. m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  valid_abstraction A X k\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A. m \\<in> \\<nat>", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A. m \\<in> \\<nat>\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n; l' = l;\n        D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "from dbm_int_inv_abstr[OF this] 1"], ["proof (chain)\npicking this:\n  dbm_int (abstr (inv_of A ?l) (\\<lambda>i j. \\<infinity>) ?v) ?n\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v", "have D''_int: \"dbm_int D'' n\""], ["proof (prove)\nusing this:\n  dbm_int (abstr (inv_of A ?l) (\\<lambda>i j. \\<infinity>) ?v) ?n\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. dbm_int D'' n", "by simp"], ["proof (state)\nthis:\n  dbm_int D'' n\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n; l' = l;\n        D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. dbm_int D' n", "unfolding 1(5)"], ["proof (prove)\ngoal (1 subgoal):\n 1. dbm_int (And (up (And D D'')) D'') n", "by (intro And_int_preservation up_int_preservation dbm_int_inv_abstr D''_int 1)"], ["proof (state)\nthis:\n  dbm_int D' n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "case (2 g a r)"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "hence assms: \"clock_numbering' v n\" \"\\<forall>c\\<in>clk_set A. v c \\<le> n\" \"\\<forall>k\\<le>n. k > 0 \\<longrightarrow> (\\<exists>c. v c = k)\""], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c.\n       0 < v c \\<and>\n       (\\<forall>x y.\n           v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n           x = y) &&&\n    \\<forall>c\\<in>clk_set A. v c \\<le> n &&&\n    \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)", "by blast+"], ["proof (state)\nthis:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "from 2(2)"], ["proof (chain)\npicking this:\n  valid_abstraction A X k", "have *: \"\\<forall> (x, m) \\<in> clkp_set A. m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  valid_abstraction A X k\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A. m \\<in> \\<nat>", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A. m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "from dbm_int_inv_abstr[OF this]"], ["proof (chain)\npicking this:\n  dbm_int (abstr (inv_of A ?l) (\\<lambda>i j. \\<infinity>) ?v) ?n", "have D'_int: \"dbm_int (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v) n\""], ["proof (prove)\nusing this:\n  dbm_int (abstr (inv_of A ?l) (\\<lambda>i j. \\<infinity>) ?v) ?n\n\ngoal (1 subgoal):\n 1. dbm_int (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v) n", "by simp"], ["proof (state)\nthis:\n  dbm_int (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v) n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "from dbm_int_guard_abstr 2"], ["proof (chain)\npicking this:\n  \\<lbrakk>valid_abstraction ?A ?X ?k;\n   ?A \\<turnstile> ?l \\<longrightarrow>\\<^bsup>?g,?a,?r\\<^esup> ?l'\\<rbrakk>\n  \\<Longrightarrow> dbm_int (abstr ?g (\\<lambda>i j. \\<infinity>) ?v) ?n\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have D''_int: \"dbm_int (abstr g (\\<lambda>i j. \\<infinity>) v) n\""], ["proof (prove)\nusing this:\n  \\<lbrakk>valid_abstraction ?A ?X ?k;\n   ?A \\<turnstile> ?l \\<longrightarrow>\\<^bsup>?g,?a,?r\\<^esup> ?l'\\<rbrakk>\n  \\<Longrightarrow> dbm_int (abstr ?g (\\<lambda>i j. \\<infinity>) ?v) ?n\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  valid_abstraction A X k\n  dbm_int D n\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. dbm_int (abstr g (\\<lambda>i j. \\<infinity>) v) n", "by simp"], ["proof (state)\nthis:\n  dbm_int (abstr g (\\<lambda>i j. \\<infinity>) v) n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "have \"set r \\<subseteq> clk_set A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set r \\<subseteq> clk_set A", "using 2(5)"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> clk_set A", "unfolding trans_of_def collect_clkvt_def"], ["proof (prove)\nusing this:\n  (l, g, a, r, l') \\<in> fst A\n\ngoal (1 subgoal):\n 1. set r\n    \\<subseteq> fst ` clkp_set A \\<union>\n                \\<Union>\n                 {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n                  t \\<in> fst A}", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> clk_set A\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "hence **:\"\\<forall>c\\<in>set r. v c \\<le> n\""], ["proof (prove)\nusing this:\n  set r \\<subseteq> clk_set A\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. v c \\<le> n", "using assms(2)"], ["proof (prove)\nusing this:\n  set r \\<subseteq> clk_set A\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. v c \\<le> n", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>c\\<in>set r. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        valid_abstraction A X k; dbm_int D n;\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> dbm_int D' n", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. dbm_int D' n", "unfolding 2(4)"], ["proof (prove)\ngoal (1 subgoal):\n 1. dbm_int\n     (And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n            (0::'c))\n       (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v))\n     n", "by (intro And_int_preservation DBM_reset'_int_preservation dbm_int_inv_abstr 2 D''_int)\n     (simp_all add: assms(1) * **)"], ["proof (state)\nthis:\n  dbm_int D' n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma And_correct:\n  shows \"[M1]\\<^bsub>v,n\\<^esub> \\<inter> [M2]\\<^bsub>v,n\\<^esub> = [And M1 M2]\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [M1]\\<^bsub>v,n\\<^esub> \\<inter> [M2]\\<^bsub>v,n\\<^esub> =\n    [And M1 M2]\\<^bsub>v,n\\<^esub>", "using DBM_and_sound1 DBM_and_sound2 DBM_and_complete"], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> And ?M1.0 ?M2.0 \\<Longrightarrow>\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M1.0\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> And ?M1.0 ?M2.0 \\<Longrightarrow>\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M2.0\n  \\<lbrakk>?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M1.0;\n   ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M2.0\\<rbrakk>\n  \\<Longrightarrow> ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> And ?M1.0 ?M2.0\n\ngoal (1 subgoal):\n 1. [M1]\\<^bsub>v,n\\<^esub> \\<inter> [M2]\\<^bsub>v,n\\<^esub> =\n    [And M1 M2]\\<^bsub>v,n\\<^esub>", "unfolding DBM_zone_repr_def"], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> And ?M1.0 ?M2.0 \\<Longrightarrow>\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M1.0\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> And ?M1.0 ?M2.0 \\<Longrightarrow>\n  ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M2.0\n  \\<lbrakk>?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M1.0;\n   ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> ?M2.0\\<rbrakk>\n  \\<Longrightarrow> ?u \\<turnstile>\\<^bsub>?v,?n\\<^esub> And ?M1.0 ?M2.0\n\ngoal (1 subgoal):\n 1. {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> M1} \\<inter>\n    {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> M2} =\n    {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> And M1 M2}", "by auto"], ["", "lemma up_correct:\n  assumes \"clock_numbering' v n\"\n  shows \"[up M]\\<^bsub>v,n\\<^esub> = [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [up M]\\<^bsub>v,n\\<^esub> = [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n\ngoal (1 subgoal):\n 1. [up M]\\<^bsub>v,n\\<^esub> = [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>", "apply safe"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [up M]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\n 2. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> [up M]\\<^bsub>v,n\\<^esub>", "apply (rule DBM_up_sound')"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [up M]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<forall>c.\n                            0 < v c \\<and>\n                            (\\<forall>x y.\n                                v x \\<le> n \\<and>\n                                v y \\<le> n \\<and>\n                                v x = v y \\<longrightarrow>\n                                x = y)\n 2. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [up M]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> [up M]\\<^bsub>v,n\\<^esub>\n 3. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> [up M]\\<^bsub>v,n\\<^esub>", "apply assumption+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> [up M]\\<^bsub>v,n\\<^esub>", "apply (rule DBM_up_complete')"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> \\<forall>c. 0 < v c\n 2. \\<And>x.\n       \\<lbrakk>\\<forall>c.\n                   0 < v c \\<and>\n                   (\\<forall>x y.\n                       v x \\<le> n \\<and>\n                       v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                       x = y);\n        x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> [M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma step_z_dbm_sound:\n  assumes \"A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\" \"global_clock_numbering A v n\"\n  shows \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "using assms"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "proof (cases, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "case (1 D'')"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "hence \"clock_numbering' v n\" \"\\<forall>c\\<in>clk_set A. v c \\<le> n\""], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. \\<forall>c.\n       0 < v c \\<and>\n       (\\<forall>x y.\n           v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n           x = y) &&&\n    \\<forall>c\\<in>clk_set A. v c \\<le> n", "by blast+"], ["proof (state)\nthis:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "note assms = assms(1) this"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "from assms(3)"], ["proof (chain)\npicking this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n", "have *: \"\\<forall>c\\<in>collect_clks (inv_of A l). v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (inv_of A l). v c \\<le> n", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>fst `\n                 (\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                  collect_clkt (trans_of A)) \\<union>\n                 collect_clkvt (trans_of A).\n     v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (snd A l). v c \\<le> n", "by (fastforce simp: collect_clks_id)"], ["proof (state)\nthis:\n  \\<forall>c\\<in>collect_clks (inv_of A l). v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "from 1"], ["proof (chain)\npicking this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v", "have D'':\"[D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\""], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}", "using dbm_abstr_zone_eq[OF assms(2) *]"], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  D' = And (up (And D D'')) D''\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n  [abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}", "by metis"], ["proof (state)\nthis:\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "with And_correct"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}", "have A11: \"[And D D'']\\<^bsub>v,n\\<^esub> = ([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. [And D D'']\\<^bsub>v,n\\<^esub> =\n    [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}", "by blast"], ["proof (state)\nthis:\n  [And D D'']\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "with And_correct D''"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  [And D D'']\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}", "have\n    \"[D']\\<^bsub>v,n\\<^esub> = ([up (And D D'')]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  [And D D'']\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. [D']\\<^bsub>v,n\\<^esub> =\n    [up (And D D'')]\\<^bsub>v,n\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l}", "unfolding 1(3)"], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  [And D D'']\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. [And (up (And D D'')) D'']\\<^bsub>v,n\\<^esub> =\n    [up (And D D'')]\\<^bsub>v,n\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l}", "by blast"], ["proof (state)\nthis:\n  [D']\\<^bsub>v,n\\<^esub> =\n  [up (And D D'')]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "with up_correct[OF assms(2)] A11"], ["proof (chain)\npicking this:\n  [up ?M]\\<^bsub>v,n\\<^esub> = [?M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\n  [And D D'']\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n  [D']\\<^bsub>v,n\\<^esub> =\n  [up (And D D'')]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l}", "have\n    \"[D']\\<^bsub>v,n\\<^esub> = (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (prove)\nusing this:\n  [up ?M]\\<^bsub>v,n\\<^esub> = [?M]\\<^bsub>v,n\\<^esub>\\<^sup>\\<up>\n  [And D D'']\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n  [D']\\<^bsub>v,n\\<^esub> =\n  [up (And D D'')]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. [D']\\<^bsub>v,n\\<^esub> =\n    ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n    {u. u \\<turnstile> inv_of A l}", "by metis"], ["proof (state)\nthis:\n  [D']\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<And>D_inv.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        l' = l; D' = And (up (And D D_inv)) D_inv;\n        D_inv = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n 2. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "with 1(2)"], ["proof (chain)\npicking this:\n  l' = l\n  [D']\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}", "show ?thesis"], ["proof (prove)\nusing this:\n  l' = l\n  [D']\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "case (2 g a r)"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "hence \"clock_numbering' v n\" \"\\<forall>c\\<in>clk_set A. v c \\<le> n\" \"\\<forall>k\\<le>n. k > 0 \\<longrightarrow> (\\<exists>c. v c = k)\""], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c.\n       0 < v c \\<and>\n       (\\<forall>x y.\n           v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n           x = y) &&&\n    \\<forall>c\\<in>clk_set A. v c \\<le> n &&&\n    \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)", "by blast+"], ["proof (state)\nthis:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "note assms = assms(1) this"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "from assms(3)"], ["proof (chain)\npicking this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n", "have *: \"\\<forall>c\\<in>collect_clks (inv_of A l'). v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (inv_of A l'). v c \\<le> n", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>fst `\n                 (\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                  collect_clkt (trans_of A)) \\<union>\n                 collect_clkvt (trans_of A).\n     v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (snd A l'). v c \\<le> n", "by (fastforce simp: collect_clks_id)"], ["proof (state)\nthis:\n  \\<forall>c\\<in>collect_clks (inv_of A l'). v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "have D':\n    \"[abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n    {u. u \\<turnstile> inv_of A l'}", "using 2 dbm_abstr_zone_eq[OF assms(2) *]"], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n    {u. u \\<turnstile> inv_of A l'}", "by simp"], ["proof (state)\nthis:\n  [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "from assms(3) 2(3)"], ["proof (chain)\npicking this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have *: \"\\<forall>c\\<in>collect_clks g. v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks g. v c \\<le> n", "unfolding clkp_set_def collect_clkt_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>fst `\n                 (collect_clki (snd A) \\<union>\n                  \\<Union>\n                   {collect_clock_pairs (fst (snd t)) |t.\n                    t \\<in> trans_of A}) \\<union>\n                 collect_clkvt (trans_of A).\n     v c \\<le> n\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks g. v c \\<le> n", "by (fastforce simp: collect_clks_id)"], ["proof (state)\nthis:\n  \\<forall>c\\<in>collect_clks g. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "have D'':\"[abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n    {u. u \\<turnstile> g}", "using 2 dbm_abstr_zone_eq[OF assms(2) *]"], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n    {u. u \\<turnstile> g}", "by auto"], ["proof (state)\nthis:\n  [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "with And_correct"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> g}", "have A11: \"[And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> = ([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> g})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> =\n    [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}", "by blast"], ["proof (state)\nthis:\n  [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "let ?D = \"reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "have \"set r \\<subseteq> clk_set A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set r \\<subseteq> clk_set A", "using 2(3)"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> clk_set A", "unfolding trans_of_def collect_clkvt_def"], ["proof (prove)\nusing this:\n  (l, g, a, r, l') \\<in> fst A\n\ngoal (1 subgoal):\n 1. set r\n    \\<subseteq> fst ` clkp_set A \\<union>\n                \\<Union>\n                 {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n                  t \\<in> fst A}", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> clk_set A\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "hence **:\"\\<forall>c\\<in>set r. v c \\<le> n\""], ["proof (prove)\nusing this:\n  set r \\<subseteq> clk_set A\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. v c \\<le> n", "using assms(3)"], ["proof (prove)\nusing this:\n  set r \\<subseteq> clk_set A\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. v c \\<le> n", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>c\\<in>set r. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "have D_reset: \"[?D]\\<^bsub>v,n\\<^esub> = zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n      (0::'c)]\\<^bsub>v,n\\<^esub> =\n    ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "fix u"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "assume u: \"u \\<in> [?D]\\<^bsub>v,n\\<^esub>\""], ["proof (state)\nthis:\n  u \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n            (0::'c)]\\<^bsub>v,n\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "from DBM_reset'_sound[OF assms(4,2) ** this]"], ["proof (chain)\npicking this:\n  \\<exists>ts.\n     set_clocks r ts u\n     \\<in> [And D\n             (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub>", "obtain ts where\n      \"set_clocks r ts u \\<in> [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  \\<exists>ts.\n     set_clocks r ts u\n     \\<in> [And D\n             (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>ts.\n        set_clocks r ts u\n        \\<in> [And D\n                (abstr g (\\<lambda>i j. \\<infinity>)\n                  v)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  set_clocks r ts u\n  \\<in> [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "with A11"], ["proof (chain)\npicking this:\n  [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  set_clocks r ts u\n  \\<in> [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub>", "have *: \"set_clocks r ts u \\<in> ([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> g})\""], ["proof (prove)\nusing this:\n  [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  set_clocks r ts u\n  \\<in> [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. set_clocks r ts u\n    \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}", "by blast"], ["proof (state)\nthis:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "from DBM_reset'_resets[OF assms(4,2) **] u"], ["proof (chain)\npicking this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d \\<Longrightarrow>\n  \\<forall>c\\<in>set r. ?u c = ?d\n  u \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n            (0::'c)]\\<^bsub>v,n\\<^esub>", "have \"\\<forall>c \\<in> set r. u c = 0\""], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d \\<Longrightarrow>\n  \\<forall>c\\<in>set r. ?u c = ?d\n  u \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n            (0::'c)]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. u c = (0::'c)", "unfolding DBM_zone_repr_def"], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d \\<Longrightarrow>\n  \\<forall>c\\<in>set r. ?u c = ?d\n  u \\<in> {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> reset'\n           (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c)}\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. u c = (0::'c)", "by auto"], ["proof (state)\nthis:\n  \\<forall>c\\<in>set r. u c = (0::'c)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "from reset_set[OF this]"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>(0::'c)]set_clocks r ?ts u = u", "have \"[r\\<rightarrow>0]set_clocks r ts u = u\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>(0::'c)]set_clocks r ?ts u = u\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>(0::'c)]set_clocks r ts u = u", "by simp"], ["proof (state)\nthis:\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "with *"], ["proof (chain)\npicking this:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u", "show \"u \\<in> zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r\""], ["proof (prove)\nusing this:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u\n\ngoal (1 subgoal):\n 1. u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u\n\ngoal (1 subgoal):\n 1. u \\<in> {[r\\<rightarrow>(0::'c)]u |u.\n             u \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}}", "by force"], ["proof (state)\nthis:\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "assume u: \"u \\<in> zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r\""], ["proof (state)\nthis:\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub>", "from DBM_reset'_complete[OF _ assms(2) **] u A11"], ["proof (chain)\npicking this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> ?M \\<Longrightarrow>\n  [r\\<rightarrow>?d]?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}", "show \"u \\<in> [?D]\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> ?M \\<Longrightarrow>\n  [r\\<rightarrow>?d]?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  [And D (abstr g (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. u \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c)]\\<^bsub>v,n\\<^esub>", "unfolding DBM_zone_repr_def zone_set_def"], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> ?M \\<Longrightarrow>\n  [r\\<rightarrow>?d]?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d\n  u \\<in> {[r\\<rightarrow>(0::'c)]u |u.\n           u \\<in> {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> D} \\<inter>\n                   {u. u \\<turnstile> g}}\n  {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> And D\n   (abstr g (\\<lambda>i j. \\<infinity>) v)} =\n  {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> D} \\<inter> {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. u \\<in> {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> reset'\n             (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c)}", "by force"], ["proof (state)\nthis:\n  u \\<in> [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n            (0::'c)]\\<^bsub>v,n\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "from D' And_correct D_reset"], ["proof (chain)\npicking this:\n  [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l'}\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have A22:\n    \"[And ?D (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)]\\<^bsub>v,n\\<^esub> = ([?D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l'})\""], ["proof (prove)\nusing this:\n  [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l'}\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. [And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n           (0::'c))\n      (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>)\n        v)]\\<^bsub>v,n\\<^esub> =\n    [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n      (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l'}", "by blast"], ["proof (state)\nthis:\n  [And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n         (0::'c))\n    (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>)\n      v)]\\<^bsub>v,n\\<^esub> =\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        D' =\n        And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n              (0::'c))\n         (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v);\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "with D_reset 2(2,3)"], ["proof (chain)\npicking this:\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n         (0::'c))\n    (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>)\n      v)]\\<^bsub>v,n\\<^esub> =\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}", "show ?thesis"], ["proof (prove)\nusing this:\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  D' =\n  And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v (0::'c))\n   (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v)\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [And (reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n         (0::'c))\n    (abstr (inv_of A l') (\\<lambda>i j. \\<infinity>)\n      v)]\\<^bsub>v,n\\<^esub> =\n  [reset' (And D (abstr g (\\<lambda>i j. \\<infinity>) v)) n r v\n    (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', [D']\\<^bsub>v,n\\<^esub>\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma step_z_dbm_DBM:\n  assumes \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z\\<rangle>\" \"global_clock_numbering A v n\"\n  obtains D' where \"A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\" \"Z = [D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n         Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n         Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof (cases, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "case 1"], ["proof (state)\nthis:\n  \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', ?D'\\<rangle>;\n   Z = [?D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  Z =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "hence \"clock_numbering' v n\" \"\\<forall>c\\<in>clk_set A. v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', ?D'\\<rangle>;\n   Z = [?D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  Z =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<forall>c.\n       0 < v c \\<and>\n       (\\<forall>x y.\n           v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n           x = y) &&&\n    \\<forall>c\\<in>clk_set A. v c \\<le> n", "by metis+"], ["proof (state)\nthis:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "note assms = assms(1) this"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z\\<rangle>\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from assms(3)"], ["proof (chain)\npicking this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n", "have *: \"\\<forall>c\\<in>collect_clks (inv_of A l). v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (inv_of A l). v c \\<le> n", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>fst `\n                 (\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                  collect_clkt (trans_of A)) \\<union>\n                 collect_clkvt (trans_of A).\n     v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (snd A l). v c \\<le> n", "by (fastforce simp: collect_clks_id)"], ["proof (state)\nthis:\n  \\<forall>c\\<in>collect_clks (inv_of A l). v c \\<le> n\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain D'' where D''_def: \"D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D''.\n        D'' =\n        abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "hence D'':\"[D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\""], ["proof (prove)\nusing this:\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}", "using dbm_abstr_zone_eq[OF assms(2) *]"], ["proof (prove)\nusing this:\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n  [abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}", "by metis"], ["proof (state)\nthis:\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain A1 where A1: \"A1 = And D D''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A1. A1 = And D D'' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  A1 = And D D''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "with And_correct D''"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  A1 = And D D''", "have A11: \"[A1]\\<^bsub>v,n\\<^esub> = ([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  A1 = And D D''\n\ngoal (1 subgoal):\n 1. [A1]\\<^bsub>v,n\\<^esub> =\n    [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}", "by blast"], ["proof (state)\nthis:\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}", "obtain D_up where D_up': \"D_up = up A1\""], ["proof (prove)\nusing this:\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. (\\<And>D_up. D_up = up A1 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  D_up = up A1\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "with up_correct assms(2) A11"], ["proof (chain)\npicking this:\n  \\<forall>c.\n     0 < ?v c \\<and>\n     (\\<forall>x y.\n         ?v x \\<le> ?n \\<and>\n         ?v y \\<le> ?n \\<and> ?v x = ?v y \\<longrightarrow>\n         x = y) \\<Longrightarrow>\n  [up ?M]\\<^bsub>?v,?n\\<^esub> = [?M]\\<^bsub>?v,?n\\<^esub>\\<^sup>\\<up>\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n  D_up = up A1", "have D_up: \"[D_up]\\<^bsub>v,n\\<^esub> = (([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l}))\\<^sup>\\<up>\""], ["proof (prove)\nusing this:\n  \\<forall>c.\n     0 < ?v c \\<and>\n     (\\<forall>x y.\n         ?v x \\<le> ?n \\<and>\n         ?v y \\<le> ?n \\<and> ?v x = ?v y \\<longrightarrow>\n         x = y) \\<Longrightarrow>\n  [up ?M]\\<^bsub>?v,?n\\<^esub> = [?M]\\<^bsub>?v,?n\\<^esub>\\<^sup>\\<up>\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n  D_up = up A1\n\ngoal (1 subgoal):\n 1. [D_up]\\<^bsub>v,n\\<^esub> =\n    ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "by metis"], ["proof (state)\nthis:\n  [D_up]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain A2 where A2: \"A2 = And D_up D''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A2. A2 = And D_up D'' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  A2 = And D_up D''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "with And_correct D''"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  A2 = And D_up D''", "have A22: \"[A2]\\<^bsub>v,n\\<^esub> = ([D_up]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l}\n  A2 = And D_up D''\n\ngoal (1 subgoal):\n 1. [A2]\\<^bsub>v,n\\<^esub> =\n    [D_up]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}", "by blast"], ["proof (state)\nthis:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  [D_up]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from A2 D_up' D''_def A1"], ["proof (chain)\npicking this:\n  A2 = And D_up D''\n  D_up = up A1\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n  A1 = And D D''", "have \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l,A2\\<rangle>\""], ["proof (prove)\nusing this:\n  A2 = And D_up D''\n  D_up = up A1\n  D'' = abstr (inv_of A l) (\\<lambda>i j. \\<infinity>) v\n  A1 = And D D''\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l, A2\\<rangle>", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l, A2\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l, A2\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from A22 D_up"], ["proof (chain)\npicking this:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  [D_up]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n  [D_up]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "have\n    \"[A2]\\<^bsub>v,n\\<^esub> = (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (prove)\nusing this:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  [D_up]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> inv_of A l}\n  [D_up]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. [A2]\\<^bsub>v,n\\<^esub> =\n    ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n    {u. u \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>D'.\n                \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                 Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     (\\<forall>c.\n         0 < v c \\<and>\n         (\\<forall>x y.\n             v x \\<le> n \\<and>\n             v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n             x = y)) \\<and>\n     (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n     (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n     l' = l;\n     Z =\n     ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l, A2\\<rangle>\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}", "show thesis"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l, A2\\<rangle>\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. thesis", "using 1"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l, A2\\<rangle>\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n  \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', ?D'\\<rangle>;\n   Z = [?D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  l' = l\n  Z =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. thesis", "by (intro that[of A2]) auto"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "case (2 g a r)"], ["proof (state)\nthis:\n  \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', ?D'\\<rangle>;\n   Z = [?D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  Z =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "hence \"clock_numbering' v n\" \"\\<forall>c\\<in>clk_set A. v c \\<le> n\" \"\\<forall>k\\<le>n. k > 0 \\<longrightarrow> (\\<exists>c. v c = k)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', ?D'\\<rangle>;\n   Z = [?D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  Z =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c.\n       0 < v c \\<and>\n       (\\<forall>x y.\n           v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n           x = y) &&&\n    \\<forall>c\\<in>clk_set A. v c \\<le> n &&&\n    \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)", "by metis+"], ["proof (state)\nthis:\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "note assms = assms(1) this"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z\\<rangle>\n  \\<forall>c.\n     0 < v c \\<and>\n     (\\<forall>x y.\n         v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n         x = y)\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  \\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k)\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from assms(3)"], ["proof (chain)\npicking this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n", "have *: \"\\<forall>c\\<in>collect_clks (inv_of A l'). v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (inv_of A l'). v c \\<le> n", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>fst `\n                 (\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                  collect_clkt (trans_of A)) \\<union>\n                 collect_clkvt (trans_of A).\n     v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks (snd A l'). v c \\<le> n", "by (fastforce simp: collect_clks_id)"], ["proof (state)\nthis:\n  \\<forall>c\\<in>collect_clks (inv_of A l'). v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain D' where D'_def: \"D' = abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        D' =\n        abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  D' = abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "hence D':\"[D']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}\""], ["proof (prove)\nusing this:\n  D' = abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. [D']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}", "using dbm_abstr_zone_eq[OF assms(2) *]"], ["proof (prove)\nusing this:\n  D' = abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v\n  [abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. [D']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}", "by simp"], ["proof (state)\nthis:\n  [D']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from assms(3) 2(4)"], ["proof (chain)\npicking this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have *: \"\\<forall>c\\<in>collect_clks g. v c \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks g. v c \\<le> n", "unfolding clkp_set_def collect_clkt_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>c\\<in>fst `\n                 (collect_clki (snd A) \\<union>\n                  \\<Union>\n                   {collect_clock_pairs (fst (snd t)) |t.\n                    t \\<in> trans_of A}) \\<union>\n                 collect_clkvt (trans_of A).\n     v c \\<le> n\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>collect_clks g. v c \\<le> n", "by (fastforce simp: collect_clks_id)"], ["proof (state)\nthis:\n  \\<forall>c\\<in>collect_clks g. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain D'' where D''_def: \"D'' = abstr g (\\<lambda>i j. \\<infinity>) v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D''.\n        D'' = abstr g (\\<lambda>i j. \\<infinity>) v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  D'' = abstr g (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "hence D'':\"[D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}\""], ["proof (prove)\nusing this:\n  D'' = abstr g (\\<lambda>i j. \\<infinity>) v\n\ngoal (1 subgoal):\n 1. [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}", "using dbm_abstr_zone_eq[OF assms(2) *]"], ["proof (prove)\nusing this:\n  D'' = abstr g (\\<lambda>i j. \\<infinity>) v\n  [abstr g (\\<lambda>i j. \\<infinity>) v]\\<^bsub>v,n\\<^esub> =\n  {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}", "by auto"], ["proof (state)\nthis:\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain A1 where A1: \"A1 = And D D''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A1. A1 = And D D'' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  A1 = And D D''\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "with And_correct D''"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}\n  A1 = And D D''", "have A11: \"[A1]\\<^bsub>v,n\\<^esub> = ([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> g})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D'']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> g}\n  A1 = And D D''\n\ngoal (1 subgoal):\n 1. [A1]\\<^bsub>v,n\\<^esub> =\n    [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}", "by blast"], ["proof (state)\nthis:\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "let ?D = \"reset' A1 n r v 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "have \"set r \\<subseteq> clk_set A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set r \\<subseteq> clk_set A", "using 2(4)"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> clk_set A", "unfolding trans_of_def collect_clkvt_def"], ["proof (prove)\nusing this:\n  (l, g, a, r, l') \\<in> fst A\n\ngoal (1 subgoal):\n 1. set r\n    \\<subseteq> fst ` clkp_set A \\<union>\n                \\<Union>\n                 {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n                  t \\<in> fst A}", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> clk_set A\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "hence **:\"\\<forall>c\\<in>set r. v c \\<le> n\""], ["proof (prove)\nusing this:\n  set r \\<subseteq> clk_set A\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. v c \\<le> n", "using assms(3)"], ["proof (prove)\nusing this:\n  set r \\<subseteq> clk_set A\n  \\<forall>c\\<in>clk_set A. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. v c \\<le> n", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>c\\<in>set r. v c \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "have D_reset: \"[?D]\\<^bsub>v,n\\<^esub> = zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> =\n    ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "fix u"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "assume u: \"u \\<in> [?D]\\<^bsub>v,n\\<^esub>\""], ["proof (state)\nthis:\n  u \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "from DBM_reset'_sound[OF assms(4,2) ** this]"], ["proof (chain)\npicking this:\n  \\<exists>ts. set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub>", "obtain ts where\n      \"set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  \\<exists>ts. set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>ts.\n        set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "with A11"], ["proof (chain)\npicking this:\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub>", "have *: \"set_clocks r ts u \\<in> ([D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> g})\""], ["proof (prove)\nusing this:\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  set_clocks r ts u \\<in> [A1]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. set_clocks r ts u\n    \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}", "by blast"], ["proof (state)\nthis:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "from DBM_reset'_resets[OF assms(4,2) **] u"], ["proof (chain)\npicking this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d \\<Longrightarrow>\n  \\<forall>c\\<in>set r. ?u c = ?d\n  u \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "have \"\\<forall>c \\<in> set r. u c = 0\""], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d \\<Longrightarrow>\n  \\<forall>c\\<in>set r. ?u c = ?d\n  u \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. u c = (0::'c)", "unfolding DBM_zone_repr_def"], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d \\<Longrightarrow>\n  \\<forall>c\\<in>set r. ?u c = ?d\n  u \\<in> {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' A1 n r v (0::'c)}\n\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>set r. u c = (0::'c)", "by auto"], ["proof (state)\nthis:\n  \\<forall>c\\<in>set r. u c = (0::'c)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "from reset_set[OF this]"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>(0::'c)]set_clocks r ?ts u = u", "have \"[r\\<rightarrow>0]set_clocks r ts u = u\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>(0::'c)]set_clocks r ?ts u = u\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>(0::'c)]set_clocks r ts u = u", "by simp"], ["proof (state)\nthis:\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> [reset' A1 n r v\n                 (0::'c)]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "with *"], ["proof (chain)\npicking this:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u", "show \"u \\<in> zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r\""], ["proof (prove)\nusing this:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u\n\ngoal (1 subgoal):\n 1. u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  set_clocks r ts u\n  \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n  [r\\<rightarrow>(0::'c)]set_clocks r ts u = u\n\ngoal (1 subgoal):\n 1. u \\<in> {[r\\<rightarrow>(0::'c)]u |u.\n             u \\<in> [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}}", "by force"], ["proof (state)\nthis:\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "assume u: \"u \\<in> zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r\""], ["proof (state)\nthis:\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n       x \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "from DBM_reset'_complete[OF _ assms(2) **] u A11"], ["proof (chain)\npicking this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> ?M \\<Longrightarrow>\n  [r\\<rightarrow>?d]?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}", "show \"u \\<in> [?D]\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> ?M \\<Longrightarrow>\n  [r\\<rightarrow>?d]?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d\n  u \\<in> ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  [A1]\\<^bsub>v,n\\<^esub> =\n  [D]\\<^bsub>v,n\\<^esub> \\<inter> {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. u \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>", "unfolding DBM_zone_repr_def zone_set_def"], ["proof (prove)\nusing this:\n  ?u \\<turnstile>\\<^bsub>v,n\\<^esub> ?M \\<Longrightarrow>\n  [r\\<rightarrow>?d]?u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' ?M n r v ?d\n  u \\<in> {[r\\<rightarrow>(0::'c)]u |u.\n           u \\<in> {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> D} \\<inter>\n                   {u. u \\<turnstile> g}}\n  {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> A1} =\n  {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> D} \\<inter> {u. u \\<turnstile> g}\n\ngoal (1 subgoal):\n 1. u \\<in> {u. u \\<turnstile>\\<^bsub>v,n\\<^esub> reset' A1 n r v (0::'c)}", "by force"], ["proof (state)\nthis:\n  u \\<in> [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain A2 where A2: \"A2 = And ?D D'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A2.\n        A2 = And (reset' A1 n r v (0::'c)) D' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  A2 = And (reset' A1 n r v (0::'c)) D'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "with And_correct D'"], ["proof (chain)\npicking this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}\n  A2 = And (reset' A1 n r v (0::'c)) D'", "have A22: \"[A2]\\<^bsub>v,n\\<^esub> = ([?D]\\<^bsub>v,n\\<^esub>) \\<inter> ({u. u \\<turnstile> inv_of A l'})\""], ["proof (prove)\nusing this:\n  [?M1.0]\\<^bsub>?v,?n\\<^esub> \\<inter> [?M2.0]\\<^bsub>?v,?n\\<^esub> =\n  [And ?M1.0 ?M2.0]\\<^bsub>?v,?n\\<^esub>\n  [D']\\<^bsub>v,n\\<^esub> = {u. u \\<turnstile> inv_of A l'}\n  A2 = And (reset' A1 n r v (0::'c)) D'\n\ngoal (1 subgoal):\n 1. [A2]\\<^bsub>v,n\\<^esub> =\n    [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l'}", "by blast"], ["proof (state)\nthis:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from 2(4) A2 D'_def D''_def A1"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  A2 = And (reset' A1 n r v (0::'c)) D'\n  D' = abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v\n  D'' = abstr g (\\<lambda>i j. \\<infinity>) v\n  A1 = And D D''", "have \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',A2\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  A2 = And (reset' A1 n r v (0::'c)) D'\n  D' = abstr (inv_of A l') (\\<lambda>i j. \\<infinity>) v\n  D'' = abstr g (\\<lambda>i j. \\<infinity>) v\n  A1 = And D D''\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', A2\\<rangle>", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "from A22 D_reset"], ["proof (chain)\npicking this:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have\n    \"[A2]\\<^bsub>v,n\\<^esub> = zone_set (([D]\\<^bsub>v,n\\<^esub>) \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (prove)\nusing this:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  [reset' A1 n r v (0::'c)]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. [A2]\\<^bsub>v,n\\<^esub> =\n    ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>\\<And>D'.\n                   \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n                    Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        Z =\n        ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> thesis", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', A2\\<rangle>\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}", "show ?thesis"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', A2\\<rangle>\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. thesis", "using 2"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', A2\\<rangle>\n  [A2]\\<^bsub>v,n\\<^esub> =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', ?D'\\<rangle>;\n   Z = [?D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  Z =\n  ([D]\\<^bsub>v,n\\<^esub> \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. thesis", "by (intro that[of A2]) simp+"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma step_z_computable:\n  assumes \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l',Z\\<rangle>\" \"global_clock_numbering A v n\"\n  obtains D' where \"Z = [D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        Z = [D']\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using step_z_dbm_DBM[OF assms]"], ["proof (prove)\nusing this:\n  (\\<And>D'.\n      \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n       Z = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        Z = [D']\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma step_z_dbm_complete:\n  assumes \"global_clock_numbering A v n\" \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\"\n  and     \"u \\<in> [(D )]\\<^bsub>v,n\\<^esub>\"\n  shows \"\\<exists> D'. A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle> \\<and> u' \\<in> [D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "note A = assms"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  u \\<in> [D]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "from step_z_complete[OF A(2,3)]"], ["proof (chain)\npicking this:\n  \\<exists>Z'.\n     A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle> \\<and>\n     u' \\<in> Z'", "obtain Z' where Z': \"A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle>\" \"u' \\<in> Z'\""], ["proof (prove)\nusing this:\n  \\<exists>Z'.\n     A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle> \\<and>\n     u' \\<in> Z'\n\ngoal (1 subgoal):\n 1. (\\<And>Z'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n         u' \\<in> Z'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  u' \\<in> Z'\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "with step_z_dbm_DBM[OF Z'(1) A(1)]"], ["proof (chain)\npicking this:\n  (\\<And>D'.\n      \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n       Z' = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  u' \\<in> Z'", "obtain D' where D':\n    \"A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle>\" \"Z' = [D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  (\\<And>D'.\n      \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n       Z' = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n  A \\<turnstile> \\<langle>l, [D]\\<^bsub>v,n\\<^esub>\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  u' \\<in> Z'\n\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n         Z' = [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  Z' = [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "with Z'(2)"], ["proof (chain)\npicking this:\n  u' \\<in> Z'\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  Z' = [D']\\<^bsub>v,n\\<^esub>", "show ?thesis"], ["proof (prove)\nusing this:\n  u' \\<in> Z'\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  Z' = [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "by auto"], ["proof (state)\nthis:\n  \\<exists>D'.\n     A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n     u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Multi Step\\<close>"], ["", "inductive steps_z_dbm ::\n  \"('a, 'c, 't, 's) ta \\<Rightarrow> 's \\<Rightarrow> ('t::time) DBM\n    \\<Rightarrow> ('c \\<Rightarrow> nat) \\<Rightarrow> nat \\<Rightarrow> 's \\<Rightarrow> ('t::time) DBM \\<Rightarrow> bool\"\n(\"_ \\<turnstile> \\<langle>_, _\\<rangle> \\<leadsto>*\\<^bsub>_,_\\<^esub> \\<langle>_, _\\<rangle>\" [61,61,61] 61)\nwhere\n  refl: \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l,D\\<rangle>\" |\n  step: \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l',D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'',D''\\<rangle> \\<Longrightarrow>\n         A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'',D''\\<rangle>\""], ["", "declare steps_z_dbm.intros[intro]"], ["", "lemma steps_z_dbm_sound:\n  assumes \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle>\"\n  and \"global_clock_numbering A v n\"\n  and \"u' \\<in> [D']\\<^bsub>v,n\\<^esub>\"\n  shows \"\\<exists> u \\<in> [D]\\<^bsub>v,n\\<^esub>. A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "using assms"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>", "proof (induction A l D v n l' D' rule: steps_z_dbm.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l D v n.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l, u'\\<rangle>\n 2. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "case refl"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v_ c \\<and>\n      (\\<forall>x y.\n          v_ x \\<le> n_ \\<and>\n          v_ y \\<le> n_ \\<and> v_ x = v_ y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A_. v_ c \\<le> n_) \\<and>\n  (\\<forall>k\\<le>n_. 0 < k \\<longrightarrow> (\\<exists>c. v_ c = k))\n  u' \\<in> [D_]\\<^bsub>v_,n_\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>A l D v n.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l, u'\\<rangle>\n 2. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v_ c \\<and>\n      (\\<forall>x y.\n          v_ x \\<le> n_ \\<and>\n          v_ y \\<le> n_ \\<and> v_ x = v_ y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A_. v_ c \\<le> n_) \\<and>\n  (\\<forall>k\\<le>n_. 0 < k \\<longrightarrow> (\\<exists>c. v_ c = k))\n  u' \\<in> [D_]\\<^bsub>v_,n_\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>u\\<in>[D_]\\<^bsub>v_,n_\\<^esub>.\n       A_ \\<turnstile> \\<langle>l_, u\\<rangle> \\<rightarrow>* \\<langle>l_, u'\\<rangle>", "by fast"], ["proof (state)\nthis:\n  \\<exists>u\\<in>[D_]\\<^bsub>v_,n_\\<^esub>.\n     A_ \\<turnstile> \\<langle>l_, u\\<rangle> \\<rightarrow>* \\<langle>l_, u'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "case (step A l D v n l' D' l'' D'')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>\n  \\<lbrakk>(\\<forall>c.\n               0 < v c \\<and>\n               (\\<forall>x y.\n                   v x \\<le> n \\<and>\n                   v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                   x = y)) \\<and>\n           (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n           (\\<forall>k\\<le>n.\n               0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n   u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                       A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>\n  \\<lbrakk>(\\<forall>c.\n               0 < v c \\<and>\n               (\\<forall>x y.\n                   v x \\<le> n \\<and>\n                   v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                   x = y)) \\<and>\n           (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n           (\\<forall>k\\<le>n.\n               0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n   u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                       A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u' \\<in> [D'']\\<^bsub>v,n\\<^esub>", "obtain u'' where u'': \"A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'',u'\\<rangle>\" \"u''\\<in>[D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>\n  \\<lbrakk>(\\<forall>c.\n               0 < v c \\<and>\n               (\\<forall>x y.\n                   v x \\<le> n \\<and>\n                   v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                   x = y)) \\<and>\n           (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n           (\\<forall>k\\<le>n.\n               0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n   u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                       A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>u''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n         u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "with step_z_sound[OF step_z_dbm_sound[OF step(1,4)]]"], ["proof (chain)\npicking this:\n  \\<forall>u'\\<in>[D']\\<^bsub>v,n\\<^esub>.\n     \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n        A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "obtain u where\n    \"u \\<in> [D]\\<^bsub>v,n\\<^esub>\" \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u''\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<forall>u'\\<in>[D']\\<^bsub>v,n\\<^esub>.\n     \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n        A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>u \\<in> [D]\\<^bsub>v,n\\<^esub>;\n         A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u''\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u \\<in> [D]\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l D v n l' D' l'' D''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n        A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n        \\<lbrakk>(\\<forall>c.\n                     0 < v c \\<and>\n                     (\\<forall>x y.\n                         v x \\<le> n \\<and>\n                         v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                         x = y)) \\<and>\n                 (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                 (\\<forall>k\\<le>n.\n                     0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n         u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u\\<in>[D']\\<^bsub>v,n\\<^esub>.\n                             A \\<turnstile> \\<langle>l', u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n                            A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "with u''"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  u \\<in> [D]\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u''\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l', u''\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n  u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  u \\<in> [D]\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n       A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>u\\<in>[D]\\<^bsub>v,n\\<^esub>.\n     A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l'', u'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_dbm_complete:\n  assumes \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l',u'\\<rangle>\"\n  and \"global_clock_numbering A v n\"\n  and \"u \\<in> [D]\\<^bsub>v,n\\<^esub>\"\n  shows \"\\<exists> D'. A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and> u' \\<in> [D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "using assms"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow>* \\<langle>l', u'\\<rangle>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u \\<in> [D]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n       u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "proof (induction arbitrary: D rule: steps.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l u D.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l, D'\\<rangle> \\<and>\n                            u \\<in> [D']\\<^bsub>v,n\\<^esub>\n 2. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "case refl"], ["proof (state)\nthis:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A_. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u_ \\<in> [D]\\<^bsub>v,n\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>A l u D.\n       \\<lbrakk>(\\<forall>c.\n                    0 < v c \\<and>\n                    (\\<forall>x y.\n                        v x \\<le> n \\<and>\n                        v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                        x = y)) \\<and>\n                (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                (\\<forall>k\\<le>n.\n                    0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l, D'\\<rangle> \\<and>\n                            u \\<in> [D']\\<^bsub>v,n\\<^esub>\n 2. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A_. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u_ \\<in> [D]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A_ \\<turnstile> \\<langle>l_, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l_, D'\\<rangle> \\<and>\n       u_ \\<in> [D']\\<^bsub>v,n\\<^esub>", "by auto"], ["proof (state)\nthis:\n  \\<exists>D'.\n     A_ \\<turnstile> \\<langle>l_, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l_, D'\\<rangle> \\<and>\n     u_ \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "case (step A l u l' u' l'' u'' D)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>\n  A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>\n  \\<lbrakk>(\\<forall>c.\n               0 < v c \\<and>\n               (\\<forall>x y.\n                   v x \\<le> n \\<and>\n                   v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                   x = y)) \\<and>\n           (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n           (\\<forall>k\\<le>n.\n               0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n   u' \\<in> [?D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>D'.\n                       A \\<turnstile> \\<langle>l', ?D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                       u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  (\\<forall>c.\n      0 < v c \\<and>\n      (\\<forall>x y.\n          v x \\<le> n \\<and> v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n          x = y)) \\<and>\n  (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n  (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k))\n  u \\<in> [D]\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "from step_z_dbm_complete[OF step(4,1,5)]"], ["proof (chain)\npicking this:\n  \\<exists>D'.\n     A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n     u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "obtain D'\n  where D': \"A \\<turnstile> \\<langle>l,D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l',D'\\<rangle>\" \"u' \\<in> [D']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  \\<exists>D'.\n     A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle> \\<and>\n     u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>D'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>;\n         u' \\<in> [D']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "with step(3)[OF step(4)]"], ["proof (chain)\npicking this:\n  u' \\<in> [?D]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n  \\<exists>D'.\n     A \\<turnstile> \\<langle>l', ?D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n     u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  u' \\<in> [D']\\<^bsub>v,n\\<^esub>", "obtain D'' where\n    \"A \\<turnstile> \\<langle>l',D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'',D''\\<rangle>\" \"u'' \\<in> [D'']\\<^bsub>v,n\\<^esub>\""], ["proof (prove)\nusing this:\n  u' \\<in> [?D]\\<^bsub>v,n\\<^esub> \\<Longrightarrow>\n  \\<exists>D'.\n     A \\<turnstile> \\<langle>l', ?D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n     u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>D''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>;\n         u'' \\<in> [D'']\\<^bsub>v,n\\<^esub>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>\n  u'' \\<in> [D'']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>A l u l' u' l'' u'' D.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, u\\<rangle> \\<rightarrow> \\<langle>l',u'\\<rangle>;\n        A \\<turnstile> \\<langle>l', u'\\<rangle> \\<rightarrow>* \\<langle>l'', u''\\<rangle>;\n        \\<And>D.\n           \\<lbrakk>(\\<forall>c.\n                        0 < v c \\<and>\n                        (\\<forall>x y.\n                            v x \\<le> n \\<and>\n                            v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                            x = y)) \\<and>\n                    (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n                    (\\<forall>k\\<le>n.\n                        0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n            u' \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>D'.\n                                A \\<turnstile> \\<langle>l', D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                                u'' \\<in> [D']\\<^bsub>v,n\\<^esub>;\n        (\\<forall>c.\n            0 < v c \\<and>\n            (\\<forall>x y.\n                v x \\<le> n \\<and>\n                v y \\<le> n \\<and> v x = v y \\<longrightarrow>\n                x = y)) \\<and>\n        (\\<forall>c\\<in>clk_set A. v c \\<le> n) \\<and>\n        (\\<forall>k\\<le>n. 0 < k \\<longrightarrow> (\\<exists>c. v c = k));\n        u \\<in> [D]\\<^bsub>v,n\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D'.\n                            A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n                            u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "with D'"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>\n  u'' \\<in> [D'']\\<^bsub>v,n\\<^esub>", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>\\<^bsub>v,n\\<^esub> \\<langle>l', D'\\<rangle>\n  u' \\<in> [D']\\<^bsub>v,n\\<^esub>\n  A \\<turnstile> \\<langle>l', D'\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D''\\<rangle>\n  u'' \\<in> [D'']\\<^bsub>v,n\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<exists>D'.\n       A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n       u'' \\<in> [D']\\<^bsub>v,n\\<^esub>", "by blast"], ["proof (state)\nthis:\n  \\<exists>D'.\n     A \\<turnstile> \\<langle>l, D\\<rangle> \\<leadsto>*\\<^bsub>v,n\\<^esub> \\<langle>l'', D'\\<rangle> \\<and>\n     u'' \\<in> [D']\\<^bsub>v,n\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*>*)"]]}