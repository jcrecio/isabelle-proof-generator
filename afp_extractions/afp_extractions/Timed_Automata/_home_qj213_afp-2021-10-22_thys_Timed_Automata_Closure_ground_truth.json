{"file_name": "/home/qj213/afp-2021-10-22/thys/Timed_Automata/Closure.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Timed_Automata", "problem_names": ["lemmas set_of_regions_spec = set_of_regions[OF _ _ _ finite, of _ k, folded \\<R>_def]", "lemmas region_cover_spec = region_cover[of X _ k, folded \\<R>_def]", "lemmas region_unique_spec = region_unique[of \\<R> X k, folded \\<R>_def, simplified]", "lemmas regions_closed'_spec = regions_closed'[of \\<R> X k, folded \\<R>_def, simplified]", "lemma valid_regions_distinct_spec:\n  \"R \\<in> \\<R> \\<Longrightarrow> R' \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> v \\<in> R' \\<Longrightarrow> R = R'\"", "lemma closure_constraint_id:\n  \"\\<forall>(x, m)\\<in>collect_clock_pairs g. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> \\<Longrightarrow> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> = \\<lbrace>g\\<rbrace> \\<inter> V\"", "lemma closure_id':\n  \"Z \\<noteq> {} \\<Longrightarrow> Z \\<subseteq> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R\"", "lemma closure_id:\n  \"Closure\\<^sub>\\<alpha> Z \\<noteq> {} \\<Longrightarrow> Z \\<subseteq> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R\"", "lemma closure_update_mono:\n  \"Z \\<subseteq> V \\<Longrightarrow> set r \\<subseteq> X \\<Longrightarrow> zone_set (Closure\\<^sub>\\<alpha> Z) r \\<subseteq> Closure\\<^sub>\\<alpha>(zone_set Z r)\"", "lemma SuccI3:\n  \"R \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> (v \\<oplus> t) \\<in> R' \\<Longrightarrow> R' \\<in> \\<R> \\<Longrightarrow> R' \\<in> Succ \\<R> R\"", "lemma closure_delay_mono:\n  \"Z \\<subseteq> V \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z)\\<^sup>\\<up> \\<subseteq> Closure\\<^sub>\\<alpha> (Z\\<^sup>\\<up>)\"", "lemma region_V: \"R \\<in> \\<R> \\<Longrightarrow> R \\<subseteq> V\"", "lemma closure_V:\n  \"Closure\\<^sub>\\<alpha> Z \\<subseteq> V\"", "lemma closure_V_int:\n  \"Closure\\<^sub>\\<alpha> Z = Closure\\<^sub>\\<alpha> (Z \\<inter> V)\"", "lemma closure_constraint_mono:\n  \"Closure\\<^sub>\\<alpha> g = g \\<Longrightarrow> g \\<inter> (Closure\\<^sub>\\<alpha> Z) \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)\"", "lemma closure_constraint_mono':\n  assumes \"Closure\\<^sub>\\<alpha> g = g \\<inter> V\"\n  shows \"g \\<inter> (Closure\\<^sub>\\<alpha> Z) \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)\"", "lemma cla_empty_iff:\n  \"Z \\<subseteq> V \\<Longrightarrow> Z = {} \\<longleftrightarrow> Closure\\<^sub>\\<alpha> Z = {}\"", "lemma closure_involutive_aux:\n  \"U \\<subseteq> \\<R> \\<Longrightarrow> Closure\\<^sub>\\<alpha> \\<Union> U = \\<Union> U\"", "lemma closure_involutive_aux':\n  \"\\<exists> U. U \\<subseteq> \\<R> \\<and> Closure\\<^sub>\\<alpha> Z = \\<Union> U\"", "lemma closure_involutive:\n  \"Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> Z = Closure\\<^sub>\\<alpha> Z\"", "lemma closure_involutive':\n  \"Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\"", "lemma closure_subs:\n  \"Z \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\"", "lemma cla_mono':\n  \"Z' \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> Z' \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z'\"", "lemma cla_mono:\n  \"Z \\<subseteq> Z' \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z'\"", "lemma up_V: \"Z \\<subseteq> V \\<Longrightarrow> Z\\<^sup>\\<up> \\<subseteq> V\"", "lemma reset_V: \"Z \\<subseteq> V \\<Longrightarrow> (zone_set Z r) \\<subseteq> V\"", "lemma step_z_V: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V\"", "lemma step_z_alpha_sound:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {} \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {}\"", "lemma step_z_alpha_complete:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {} \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {}\"", "lemma zone_set_mono:\n  \"A \\<subseteq> B \\<Longrightarrow> zone_set A r \\<subseteq> zone_set B r\"", "lemma zone_delay_mono:\n  \"A \\<subseteq> B \\<Longrightarrow> A\\<^sup>\\<up> \\<subseteq> B\\<^sup>\\<up>\"", "lemma subset_int_mono: \"A \\<subseteq> B \\<Longrightarrow> A \\<inter> C \\<subseteq> B \\<inter> C\"", "lemma calc:\n  \"valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  \\<Longrightarrow> \\<exists>Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and> Z' \\<subseteq> Z''\"", "lemma steps_z_alpha_closure_involutive'_aux:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'\"", "lemma steps_z_alpha_closure_involutive'_aux':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> W \\<subseteq> Z\n  \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and> W' \\<subseteq> Z'\"", "lemma steps_z_alt:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z''\\<rangle>\"", "lemma steps_z_alpha_V: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V\"", "lemma steps_z_alpha_closure_involutive':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> Z'''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z'' \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and> Z''' \\<subseteq> Z''\"", "lemma steps_z_alpha_closure_involutive'':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> Z'''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z'' \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\"", "lemma steps_z_alpha_closure_involutive:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z''\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and> Z'' \\<subseteq> Z'\"", "lemma steps_z_V:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V\"", "lemma steps_z_alpha_sound:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {}\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'\"", "lemma step_z_mono:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> W \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle> \\<and> Z' \\<subseteq> W'\"", "lemma step_z_alpha_mono:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> W \\<Longrightarrow> W \\<subseteq> V \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',W'\\<rangle> \\<and> Z' \\<subseteq> W'\"", "lemma steps_z_alpha_mono:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> W \\<Longrightarrow> W \\<subseteq> V \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',W'\\<rangle> \\<and> Z' \\<subseteq> W'\"", "lemma steps_z_alpha_alt:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle>\"", "lemma steps_z_alpha_complete:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {}\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z''\\<rangle> \\<and> Z' \\<subseteq> Z''\"", "lemma steps_z_alpha_complete':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {}\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {}\""], "translations": [["", "lemmas set_of_regions_spec = set_of_regions[OF _ _ _ finite, of _ k, folded \\<R>_def]"], ["", "lemmas region_cover_spec = region_cover[of X _ k, folded \\<R>_def]"], ["", "lemmas region_unique_spec = region_unique[of \\<R> X k, folded \\<R>_def, simplified]"], ["", "lemmas regions_closed'_spec = regions_closed'[of \\<R> X k, folded \\<R>_def, simplified]"], ["", "lemma valid_regions_distinct_spec:\n  \"R \\<in> \\<R> \\<Longrightarrow> R' \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> v \\<in> R' \\<Longrightarrow> R = R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<in> \\<R>; R' \\<in> \\<R>; v \\<in> R; v \\<in> R'\\<rbrakk>\n    \\<Longrightarrow> R = R'", "unfolding \\<R>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<in> {region X I r |I r. valid_region X k I r};\n     R' \\<in> {region X I r |I r. valid_region X k I r}; v \\<in> R;\n     v \\<in> R'\\<rbrakk>\n    \\<Longrightarrow> R = R'", "using valid_regions_distinct"], ["proof (prove)\nusing this:\n  \\<lbrakk>valid_region ?X ?k ?I ?r; valid_region ?X ?k ?I' ?r';\n   ?v \\<in> region ?X ?I ?r; ?v \\<in> region ?X ?I' ?r'\\<rbrakk>\n  \\<Longrightarrow> region ?X ?I ?r = region ?X ?I' ?r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<in> {region X I r |I r. valid_region X k I r};\n     R' \\<in> {region X I r |I r. valid_region X k I r}; v \\<in> R;\n     v \\<in> R'\\<rbrakk>\n    \\<Longrightarrow> R = R'", "by auto (drule valid_regions_distinct, assumption+, simp)+"], ["", "definition cla (\"Closure\\<^sub>\\<alpha> _\" [71] 71)\nwhere\n  \"cla Z = \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\""], ["", "subsubsection \\<open>The nice and easy properties proved by Bouyer\\<close>"], ["", "lemma closure_constraint_id:\n  \"\\<forall>(x, m)\\<in>collect_clock_pairs g. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> \\<Longrightarrow> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> = \\<lbrace>g\\<rbrace> \\<inter> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and>\n       x \\<in> X \\<and> m \\<in> \\<nat> \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n    \\<lbrace>g\\<rbrace> \\<inter> V", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and>\n       x \\<in> X \\<and> m \\<in> \\<nat> \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n    \\<lbrace>g\\<rbrace> \\<inter> V", "case 1"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs g.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and>\n       x \\<in> X \\<and> m \\<in> \\<nat> \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n    \\<lbrace>g\\<rbrace> \\<inter> V", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n    \\<lbrace>g\\<rbrace> \\<inter> V", "proof auto"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> \\<lbrace>g\\<rbrace>\n 2. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> V\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "fix v"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> \\<lbrace>g\\<rbrace>\n 2. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> V\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "assume v: \"v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>\""], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> \\<lbrace>g\\<rbrace>\n 2. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> V\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "then"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "obtain R where R: \"v \\<in> R\" \"R \\<in> \\<R>\" \"R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        \\<lbrakk>v \\<in> R; R \\<in> \\<R>;\n         R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v \\<in> \\<Union>\n           {R \\<in> \\<R>. R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}}\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        \\<lbrakk>v \\<in> R; R \\<in> \\<R>;\n         R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> R\n  R \\<in> \\<R>\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> \\<lbrace>g\\<rbrace>\n 2. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> V\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "with ccompatible[OF 1, folded \\<R>_def]"], ["proof (chain)\npicking this:\n  ccompatible \\<R> g\n  v \\<in> R\n  R \\<in> \\<R>\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}", "show \"v \\<in> \\<lbrace>g\\<rbrace>\""], ["proof (prove)\nusing this:\n  ccompatible \\<R> g\n  v \\<in> R\n  R \\<in> \\<R>\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. v \\<in> \\<lbrace>g\\<rbrace>", "unfolding ccompatible_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> \\<lbrace>g\\<rbrace> \\<or>\n     \\<lbrace>g\\<rbrace> \\<inter> R = {}\n  v \\<in> R\n  R \\<in> \\<R>\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. v \\<in> \\<lbrace>g\\<rbrace>", "by auto"], ["proof (state)\nthis:\n  v \\<in> \\<lbrace>g\\<rbrace>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> \\<Longrightarrow>\n       x \\<in> V\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "from R"], ["proof (chain)\npicking this:\n  v \\<in> R\n  R \\<in> \\<R>\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}", "show \"v \\<in> V\""], ["proof (prove)\nusing this:\n  v \\<in> R\n  R \\<in> \\<R>\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. v \\<in> V", "unfolding V_def \\<R>_def"], ["proof (prove)\nusing this:\n  v \\<in> R\n  R \\<in> {region X I r |I r. valid_region X k I r}\n  R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. v \\<in> {v. \\<forall>x\\<in>X. 0 \\<le> v x}", "by auto"], ["proof (state)\nthis:\n  v \\<in> V\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "assume v: \"v \\<in> \\<lbrace>g\\<rbrace>\" \"v \\<in> V\""], ["proof (state)\nthis:\n  v \\<in> \\<lbrace>g\\<rbrace>\n  v \\<in> V\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "with region_cover[of X v k, folded \\<R>_def]"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> \\<lbrace>g\\<rbrace>\n  v \\<in> V", "obtain R where \"R \\<in> \\<R>\" \"v \\<in> R\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> \\<lbrace>g\\<rbrace>\n  v \\<in> V\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        \\<lbrakk>R \\<in> \\<R>; v \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding V_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> \\<lbrace>g\\<rbrace>\n  v \\<in> {v. \\<forall>x\\<in>X. 0 \\<le> v x}\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        \\<lbrakk>R \\<in> \\<R>; v \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> \\<lbrace>g\\<rbrace>; x \\<in> V\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "then"], ["proof (chain)\npicking this:\n  R \\<in> \\<R>\n  v \\<in> R", "show \"v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>\""], ["proof (prove)\nusing this:\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>", "unfolding cla_def"], ["proof (prove)\nusing this:\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. v \\<in> \\<Union>\n             {R \\<in> \\<R>. R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}}", "using v"], ["proof (prove)\nusing this:\n  R \\<in> \\<R>\n  v \\<in> R\n  v \\<in> \\<lbrace>g\\<rbrace>\n  v \\<in> V\n\ngoal (1 subgoal):\n 1. v \\<in> \\<Union>\n             {R \\<in> \\<R>. R \\<inter> \\<lbrace>g\\<rbrace> \\<noteq> {}}", "by auto"], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n  \\<lbrace>g\\<rbrace> \\<inter> V\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closure_id':\n  \"Z \\<noteq> {} \\<Longrightarrow> Z \\<subseteq> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "case 1"], ["proof (state)\nthis:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "note A = this"], ["proof (state)\nthis:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "then"], ["proof (chain)\npicking this:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>", "have \"R \\<subseteq> Closure\\<^sub>\\<alpha> Z\""], ["proof (prove)\nusing this:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. R \\<subseteq> Closure\\<^sub>\\<alpha> Z", "unfolding cla_def"], ["proof (prove)\nusing this:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. R \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}", "by auto"], ["proof (state)\nthis:\n  R \\<subseteq> Closure\\<^sub>\\<alpha> Z\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "moreover"], ["proof (state)\nthis:\n  R \\<subseteq> Closure\\<^sub>\\<alpha> Z\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "{"], ["proof (state)\nthis:\n  R \\<subseteq> Closure\\<^sub>\\<alpha> Z\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "fix R'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "assume R': \"Z \\<inter> R' \\<noteq> {}\" \"R' \\<in> \\<R>\" \"R \\<noteq> R'\""], ["proof (state)\nthis:\n  Z \\<inter> R' \\<noteq> {}\n  R' \\<in> \\<R>\n  R \\<noteq> R'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "with A"], ["proof (chain)\npicking this:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n  Z \\<inter> R' \\<noteq> {}\n  R' \\<in> \\<R>\n  R \\<noteq> R'", "obtain v where \"v \\<in> R\" \"v \\<in> R'\""], ["proof (prove)\nusing this:\n  Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n  Z \\<inter> R' \\<noteq> {}\n  R' \\<in> \\<R>\n  R \\<noteq> R'\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R; v \\<in> R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> R\n  v \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "with \\<R>_regions_distinct[OF _ A(3) this(1) R'(2-)] \\<R>_def"], ["proof (chain)\npicking this:\n  \\<R> = {region ?X I r |I r. valid_region ?X ?k I r} \\<Longrightarrow>\n  v \\<notin> R'\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<in> R\n  v \\<in> R'", "have False"], ["proof (prove)\nusing this:\n  \\<R> = {region ?X I r |I r. valid_region ?X ?k I r} \\<Longrightarrow>\n  v \\<notin> R'\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  v \\<in> R\n  v \\<in> R'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "}"], ["proof (state)\nthis:\n  \\<lbrakk>Z \\<inter> ?R'2 \\<noteq> {}; ?R'2 \\<in> \\<R>;\n   R \\<noteq> ?R'2\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<noteq> {}; Z \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "ultimately"], ["proof (chain)\npicking this:\n  R \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  \\<lbrakk>Z \\<inter> ?R'2 \\<noteq> {}; ?R'2 \\<in> \\<R>;\n   R \\<noteq> ?R'2\\<rbrakk>\n  \\<Longrightarrow> False", "show ?thesis"], ["proof (prove)\nusing this:\n  R \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  \\<lbrakk>Z \\<inter> ?R'2 \\<noteq> {}; ?R'2 \\<in> \\<R>;\n   R \\<noteq> ?R'2\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z = R", "unfolding cla_def"], ["proof (prove)\nusing this:\n  R \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<lbrakk>Z \\<inter> ?R'2 \\<noteq> {}; ?R'2 \\<in> \\<R>;\n   R \\<noteq> ?R'2\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} = R", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z = R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closure_id:\n  \"Closure\\<^sub>\\<alpha> Z \\<noteq> {} \\<Longrightarrow> Z \\<subseteq> R \\<Longrightarrow> R \\<in> \\<R> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<noteq> {}; Z \\<subseteq> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<noteq> {}; Z \\<subseteq> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "case 1"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<noteq> {}; Z \\<subseteq> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "then"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>", "have \"Z \\<noteq> {}\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. Z \\<noteq> {}", "unfolding cla_def"], ["proof (prove)\nusing this:\n  \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. Z \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  Z \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<noteq> {}; Z \\<subseteq> R;\n     R \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z = R", "with 1 closure_id'"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n  \\<lbrakk>?Z \\<noteq> {}; ?Z \\<subseteq> ?R; ?R \\<in> \\<R>\\<rbrakk>\n  \\<Longrightarrow> Closure\\<^sub>\\<alpha> ?Z = ?R\n  Z \\<noteq> {}", "show ?case"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<noteq> {}\n  Z \\<subseteq> R\n  R \\<in> \\<R>\n  \\<lbrakk>?Z \\<noteq> {}; ?Z \\<subseteq> ?R; ?R \\<in> \\<R>\\<rbrakk>\n  \\<Longrightarrow> Closure\\<^sub>\\<alpha> ?Z = ?R\n  Z \\<noteq> {}\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z = R", "by blast"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z = R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closure_update_mono:\n  \"Z \\<subseteq> V \\<Longrightarrow> set r \\<subseteq> X \\<Longrightarrow> zone_set (Closure\\<^sub>\\<alpha> Z) r \\<subseteq> Closure\\<^sub>\\<alpha>(zone_set Z r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "assume A: \"Z \\<subseteq> V\" \"set r \\<subseteq> X\""], ["proof (state)\nthis:\n  Z \\<subseteq> V\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "let ?U = \"{R \\<in> \\<R>. Z \\<inter> R \\<noteq> {}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "from A(1) region_cover_spec"], ["proof (chain)\npicking this:\n  Z \\<subseteq> V\n  \\<forall>x\\<in>X. 0 \\<le> ?u x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> ?u \\<in> R", "have \"\\<forall> v \\<in> Z. \\<exists> R. R \\<in> \\<R> \\<and> v \\<in> R\""], ["proof (prove)\nusing this:\n  Z \\<subseteq> V\n  \\<forall>x\\<in>X. 0 \\<le> ?u x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> ?u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R", "unfolding V_def"], ["proof (prove)\nusing this:\n  Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x}\n  \\<forall>x\\<in>X. 0 \\<le> ?u x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> ?u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R", "by auto"], ["proof (state)\nthis:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R", "have \"Z = \\<Union> {Z \\<inter> R | R. R \\<in> ?U}\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n\ngoal (1 subgoal):\n 1. Z =\n    \\<Union>\n     {Z \\<inter> R |R. R \\<in> {R \\<in> \\<R>. Z \\<inter> R \\<noteq> {}}}", "proof (auto, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R;\n        x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>R.\n                                xa = Z \\<inter> R \\<and>\n                                R \\<in> \\<R> \\<and>\n                                Z \\<inter> R \\<noteq> {}) \\<and>\n                            x \\<in> xa", "case (1 v)"], ["proof (state)\nthis:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> Z\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R;\n        x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>R.\n                                xa = Z \\<inter> R \\<and>\n                                R \\<in> \\<R> \\<and>\n                                Z \\<inter> R \\<noteq> {}) \\<and>\n                            x \\<in> xa", "then"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> Z", "obtain R where \"R \\<in> \\<R>\" \"v \\<in> R\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> Z\n\ngoal (1 subgoal):\n 1. (\\<And>R.\n        \\<lbrakk>R \\<in> \\<R>; v \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R;\n        x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>R.\n                                xa = Z \\<inter> R \\<and>\n                                R \\<in> \\<R> \\<and>\n                                Z \\<inter> R \\<noteq> {}) \\<and>\n                            x \\<in> xa", "moreover"], ["proof (state)\nthis:\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R;\n        x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>R.\n                                xa = Z \\<inter> R \\<and>\n                                R \\<in> \\<R> \\<and>\n                                Z \\<inter> R \\<noteq> {}) \\<and>\n                            x \\<in> xa", "with 1"], ["proof (chain)\npicking this:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> Z\n  R \\<in> \\<R>\n  v \\<in> R", "have \"Z \\<inter> R \\<noteq> {}\" \"v \\<in> Z \\<inter> R\""], ["proof (prove)\nusing this:\n  \\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v \\<in> Z\n  R \\<in> \\<R>\n  v \\<in> R\n\ngoal (1 subgoal):\n 1. Z \\<inter> R \\<noteq> {} &&& v \\<in> Z \\<inter> R", "by auto"], ["proof (state)\nthis:\n  Z \\<inter> R \\<noteq> {}\n  v \\<in> Z \\<inter> R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>v\\<in>Z. \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R;\n        x \\<in> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>R.\n                                xa = Z \\<inter> R \\<and>\n                                R \\<in> \\<R> \\<and>\n                                Z \\<inter> R \\<noteq> {}) \\<and>\n                            x \\<in> xa", "ultimately"], ["proof (chain)\npicking this:\n  R \\<in> \\<R>\n  v \\<in> R\n  Z \\<inter> R \\<noteq> {}\n  v \\<in> Z \\<inter> R", "show ?case"], ["proof (prove)\nusing this:\n  R \\<in> \\<R>\n  v \\<in> R\n  Z \\<inter> R \\<noteq> {}\n  v \\<in> Z \\<inter> R\n\ngoal (1 subgoal):\n 1. \\<exists>x.\n       (\\<exists>R.\n           x = Z \\<inter> R \\<and>\n           R \\<in> \\<R> \\<and> Z \\<inter> R \\<noteq> {}) \\<and>\n       v \\<in> x", "by auto"], ["proof (state)\nthis:\n  \\<exists>x.\n     (\\<exists>R.\n         x = Z \\<inter> R \\<and>\n         R \\<in> \\<R> \\<and> Z \\<inter> R \\<noteq> {}) \\<and>\n     v \\<in> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Z =\n  \\<Union>\n   {Z \\<inter> R |R. R \\<in> {R \\<in> \\<R>. Z \\<inter> R \\<noteq> {}}}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  Z =\n  \\<Union>\n   {Z \\<inter> R |R. R \\<in> {R \\<in> \\<R>. Z \\<inter> R \\<noteq> {}}}", "obtain U where U: \"Z = \\<Union> {Z \\<inter> R | R. R \\<in> U}\" \"\\<forall> R \\<in> U. R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  Z =\n  \\<Union>\n   {Z \\<inter> R |R. R \\<in> {R \\<in> \\<R>. Z \\<inter> R \\<noteq> {}}}\n\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>Z = \\<Union> {Z \\<inter> R |R. R \\<in> U};\n         \\<forall>R\\<in>U. R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  Z = \\<Union> {Z \\<inter> R |R. R \\<in> U}\n  \\<forall>R\\<in>U. R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "{"], ["proof (state)\nthis:\n  Z = \\<Union> {Z \\<inter> R |R. R \\<in> U}\n  \\<forall>R\\<in>U. R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "fix R"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "assume R: \"R \\<in> U\""], ["proof (state)\nthis:\n  R \\<in> U\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "{"], ["proof (state)\nthis:\n  R \\<in> U\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "fix v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "assume v': \"v' \\<in> zone_set (Closure\\<^sub>\\<alpha> (Z \\<inter> R)) r - Closure\\<^sub>\\<alpha>(zone_set (Z \\<inter> R) r)\""], ["proof (state)\nthis:\n  v' \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n           Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  v' \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n           Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub>", "obtain v where *:\n        \"v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)\" \"v' = [r \\<rightarrow> 0]v\""], ["proof (prove)\nusing this:\n  v' \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n           Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R);\n         v' = [r\\<rightarrow>0]v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  v' \\<in> {[r\\<rightarrow>0]u |u.\n            u \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)} -\n           Closure\\<^sub>\\<alpha> {[r\\<rightarrow>0]u |u.\n                                   u \\<in> Z \\<inter> R}\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R);\n         v' = [r\\<rightarrow>0]v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)\n  v' = [r\\<rightarrow>0]v\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "with closure_id[of \"Z \\<inter> R\" R] R U(2)"], ["proof (chain)\npicking this:\n  \\<lbrakk>Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<noteq> {};\n   Z \\<inter> R \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n  \\<Longrightarrow> Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  R \\<in> U\n  \\<forall>R\\<in>U. R \\<in> \\<R>\n  v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)\n  v' = [r\\<rightarrow>0]v", "have **:\n        \"Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\" \"Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<noteq> {};\n   Z \\<inter> R \\<subseteq> R; R \\<in> \\<R>\\<rbrakk>\n  \\<Longrightarrow> Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  R \\<in> U\n  \\<forall>R\\<in>U. R \\<in> \\<R>\n  v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)\n  v' = [r\\<rightarrow>0]v\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R &&&\n    Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<in> \\<R>", "by fastforce+"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "with region_set'_id[OF _ *(1) finite _ _ A(2), of k 0, folded \\<R>_def, OF this(2)]"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 \\<le> 0; \\<forall>x\\<in>set r. 0 \\<le> k x\\<rbrakk>\n  \\<Longrightarrow> [[r\\<rightarrow>real 0]v]\\<^sub>\\<R> =\n                    region_set' (Closure\\<^sub>\\<alpha> (Z \\<inter> R)) r\n                     (real 0) \\<and>\n                    [[r\\<rightarrow>real 0]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [r\\<rightarrow>real 0]v\n                    \\<in> [[r\\<rightarrow>real 0]v]\\<^sub>\\<R>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<in> \\<R>", "have ***: \"zone_set R r \\<in> \\<R>\" \"[r\\<rightarrow>0]v \\<in> zone_set R r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> 0; \\<forall>x\\<in>set r. 0 \\<le> k x\\<rbrakk>\n  \\<Longrightarrow> [[r\\<rightarrow>real 0]v]\\<^sub>\\<R> =\n                    region_set' (Closure\\<^sub>\\<alpha> (Z \\<inter> R)) r\n                     (real 0) \\<and>\n                    [[r\\<rightarrow>real 0]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [r\\<rightarrow>real 0]v\n                    \\<in> [[r\\<rightarrow>real 0]v]\\<^sub>\\<R>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. R\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<in> \\<R> &&&\n    [r\\<rightarrow>0]v \\<in> R\\<^bsub>r \\<rightarrow> 0\\<^esub>", "unfolding zone_set_def region_set'_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> 0; \\<forall>x\\<in>set r. 0 \\<le> k x\\<rbrakk>\n  \\<Longrightarrow> [[r\\<rightarrow>real 0]v]\\<^sub>\\<R> =\n                    {[r\\<rightarrow>real 0]v |v.\n                     v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)} \\<and>\n                    [[r\\<rightarrow>real 0]v]\\<^sub>\\<R> \\<in> \\<R> \\<and>\n                    [r\\<rightarrow>real 0]v\n                    \\<in> [[r\\<rightarrow>real 0]v]\\<^sub>\\<R>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. {[r\\<rightarrow>0]u |u. u \\<in> R} \\<in> \\<R> &&&\n    [r\\<rightarrow>0]v \\<in> {[r\\<rightarrow>0]u |u. u \\<in> R}", "by auto"], ["proof (state)\nthis:\n  R\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<in> \\<R>\n  [r\\<rightarrow>0]v \\<in> R\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "from *"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)\n  v' = [r\\<rightarrow>0]v", "have \"Z \\<inter> R \\<noteq> {}\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)\n  v' = [r\\<rightarrow>0]v\n\ngoal (1 subgoal):\n 1. Z \\<inter> R \\<noteq> {}", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v \\<in> \\<Union> {Ra \\<in> \\<R>. Ra \\<inter> (Z \\<inter> R) \\<noteq> {}}\n  v' = [r\\<rightarrow>0]v\n\ngoal (1 subgoal):\n 1. Z \\<inter> R \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  Z \\<inter> R \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  Z \\<inter> R \\<noteq> {}", "have \"zone_set (Z \\<inter> R) r \\<noteq> {}\""], ["proof (prove)\nusing this:\n  Z \\<inter> R \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<noteq> {}", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  Z \\<inter> R \\<noteq> {}\n\ngoal (1 subgoal):\n 1. {[r\\<rightarrow>0]u |u. u \\<in> Z \\<inter> R} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "from closure_id'[OF this _ ***(1)]"], ["proof (chain)\npicking this:\n  (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> R\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  R\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have \"Closure\\<^sub>\\<alpha> zone_set (Z \\<inter> R) r = zone_set R r\""], ["proof (prove)\nusing this:\n  (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> R\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  R\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n    R\\<^bsub>r \\<rightarrow> 0\\<^esub>", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  {[r\\<rightarrow>0]u |u. u \\<in> Z \\<inter> R}\n  \\<subseteq> {[r\\<rightarrow>0]u |u. u \\<in> R} \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> {[r\\<rightarrow>0]u |u. u \\<in> Z \\<inter> R} =\n  {[r\\<rightarrow>0]u |u. u \\<in> R}\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> {[r\\<rightarrow>0]u |u. u \\<in> Z \\<inter> R} =\n    {[r\\<rightarrow>0]u |u. u \\<in> R}", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  R\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "with v' **(1)"], ["proof (chain)\npicking this:\n  v' \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n           Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  R\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have False"], ["proof (prove)\nusing this:\n  v' \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n           Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                   R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R) = R\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  R\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "}"], ["proof (state)\nthis:\n  ?v'2\n  \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n        Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                R)\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  ?v'2\n  \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n        Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                R)\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n  False", "have \"zone_set (Closure\\<^sub>\\<alpha> (Z \\<inter> R)) r \\<subseteq> Closure\\<^sub>\\<alpha>(zone_set (Z \\<inter> R) r)\""], ["proof (prove)\nusing this:\n  ?v'2\n  \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                R)\\<^bsub>r \\<rightarrow> 0\\<^esub> -\n        Closure\\<^sub>\\<alpha> (Z \\<inter>\n                                R)\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  R)\\<^bsub>r \\<rightarrow> 0\\<^esub>", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\nR)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "}"], ["proof (state)\nthis:\n  ?R2 \\<in> U \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> ?R2)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n?R2)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "note Z_i = this"], ["proof (state)\nthis:\n  ?R2 \\<in> U \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> ?R2)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n?R2)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "from U(1)"], ["proof (chain)\npicking this:\n  Z = \\<Union> {Z \\<inter> R |R. R \\<in> U}", "have \"Closure\\<^sub>\\<alpha> Z = \\<Union> {Closure\\<^sub>\\<alpha> (Z \\<inter> R) | R. R \\<in> U}\""], ["proof (prove)\nusing this:\n  Z = \\<Union> {Z \\<inter> R |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z =\n    \\<Union> {Closure\\<^sub>\\<alpha> (Z \\<inter> R) |R. R \\<in> U}", "unfolding cla_def"], ["proof (prove)\nusing this:\n  Z = \\<Union> {Z \\<inter> R |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} =\n    \\<Union>\n     {\\<Union> {Ra \\<in> \\<R>. Ra \\<inter> (Z \\<inter> R) \\<noteq> {}} |R.\n      R \\<in> U}", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z =\n  \\<Union> {Closure\\<^sub>\\<alpha> (Z \\<inter> R) |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z =\n  \\<Union> {Closure\\<^sub>\\<alpha> (Z \\<inter> R) |R. R \\<in> U}", "have \"zone_set (Closure\\<^sub>\\<alpha> Z) r = \\<Union> {zone_set (Closure\\<^sub>\\<alpha> (Z \\<inter> R)) r | R. R \\<in> U}\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z =\n  \\<Union> {Closure\\<^sub>\\<alpha> (Z \\<inter> R) |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n    \\<Union>\n     {Closure\\<^sub>\\<alpha> (Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n      R. R \\<in> U}", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z =\n  \\<Union> {Closure\\<^sub>\\<alpha> (Z \\<inter> R) |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. {[r\\<rightarrow>0]u |u. u \\<in> Closure\\<^sub>\\<alpha> Z} =\n    \\<Union>\n     {{[r\\<rightarrow>0]u |u.\n       u \\<in> Closure\\<^sub>\\<alpha> (Z \\<inter> R)} |\n      R. R \\<in> U}", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  \\<Union>\n   {Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n    R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "also"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  \\<Union>\n   {Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n    R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have \"\\<dots> \\<subseteq> \\<Union> {Closure\\<^sub>\\<alpha>(zone_set (Z \\<inter> R) r) | R. R \\<in> U}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     {Closure\\<^sub>\\<alpha> (Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n      R. R \\<in> U}\n    \\<subseteq> \\<Union>\n                 {Closure\\<^sub>\\<alpha> (Z \\<inter>\n    R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                  R. R \\<in> U}", "using Z_i"], ["proof (prove)\nusing this:\n  ?R2 \\<in> U \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> (Z \\<inter> ?R2)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n?R2)\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<Union>\n     {Closure\\<^sub>\\<alpha> (Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n      R. R \\<in> U}\n    \\<subseteq> \\<Union>\n                 {Closure\\<^sub>\\<alpha> (Z \\<inter>\n    R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                  R. R \\<in> U}", "by auto"], ["proof (state)\nthis:\n  \\<Union>\n   {Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n    R. R \\<in> U}\n  \\<subseteq> \\<Union>\n               {Closure\\<^sub>\\<alpha> (Z \\<inter>\n  R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "also"], ["proof (state)\nthis:\n  \\<Union>\n   {Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n    R. R \\<in> U}\n  \\<subseteq> \\<Union>\n               {Closure\\<^sub>\\<alpha> (Z \\<inter>\n  R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have \"\\<dots> = Closure\\<^sub>\\<alpha> \\<Union> {(zone_set (Z \\<inter> R) r) | R. R \\<in> U}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     {Closure\\<^sub>\\<alpha> (Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n      R. R \\<in> U} =\n    Closure\\<^sub>\\<alpha> \\<Union>\n                            {(Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                             R. R \\<in> U}", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     {\\<Union>\n       {Ra \\<in> \\<R>.\n        Ra \\<inter> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<noteq>\n        {}} |\n      R. R \\<in> U} =\n    \\<Union>\n     {R \\<in> \\<R>.\n      R \\<inter>\n      \\<Union>\n       {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |R.\n        R \\<in> U} \\<noteq>\n      {}}", "by auto"], ["proof (state)\nthis:\n  \\<Union>\n   {Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n    R. R \\<in> U} =\n  Closure\\<^sub>\\<alpha> \\<Union>\n                          {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                           R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "also"], ["proof (state)\nthis:\n  \\<Union>\n   {Closure\\<^sub>\\<alpha> (Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n    R. R \\<in> U} =\n  Closure\\<^sub>\\<alpha> \\<Union>\n                          {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                           R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have \"\\<dots> = Closure\\<^sub>\\<alpha> zone_set (\\<Union> {Z \\<inter> R| R. R \\<in> U}) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<Union>\n                            {(Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                             R. R \\<in> U} =\n    Closure\\<^sub>\\<alpha> \\<Union>\n                            {Z \\<inter> R |R.\n                             R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<Union>\n                            {(Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                             R. R \\<in> U} =\n    Closure\\<^sub>\\<alpha> \\<Union>\n                            {Z \\<inter> R |R.\n                             R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<Union>\n                            {(Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                             R. R \\<in> U} =\n    Closure\\<^sub>\\<alpha> \\<Union>\n                            {Z \\<inter> R |R.\n                             R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have \"zone_set (\\<Union> {Z \\<inter> R| R. R \\<in> U}) r = \\<Union> {(zone_set (Z \\<inter> R) r) | R. R \\<in> U}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n    \\<Union> {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |R. R \\<in> U}", "unfolding zone_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {[r\\<rightarrow>0]u |u. u \\<in> \\<Union> {Z \\<inter> R |R. R \\<in> U}} =\n    \\<Union> {{[r\\<rightarrow>0]u |u. u \\<in> Z \\<inter> R} |R. R \\<in> U}", "by auto"], ["proof (state)\nthis:\n  \\<Union> {Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  \\<Union> {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<Union>\n                            {(Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                             R. R \\<in> U} =\n    Closure\\<^sub>\\<alpha> \\<Union>\n                            {Z \\<inter> R |R.\n                             R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>", "then"], ["proof (chain)\npicking this:\n  \\<Union> {Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  \\<Union> {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |R. R \\<in> U}", "show ?case"], ["proof (prove)\nusing this:\n  \\<Union> {Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub> =\n  \\<Union> {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |R. R \\<in> U}\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<Union>\n                            {(Z \\<inter>\n                              R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                             R. R \\<in> U} =\n    Closure\\<^sub>\\<alpha> \\<Union>\n                            {Z \\<inter> R |R.\n                             R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> \\<Union>\n                          {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                           R. R \\<in> U} =\n  Closure\\<^sub>\\<alpha> \\<Union>\n                          {Z \\<inter> R |R.\n                           R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> \\<Union>\n                          {(Z \\<inter> R)\\<^bsub>r \\<rightarrow> 0\\<^esub> |\n                           R. R \\<in> U} =\n  Closure\\<^sub>\\<alpha> \\<Union>\n                          {Z \\<inter> R |R.\n                           R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Z \\<subseteq> V; set r \\<subseteq> X\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "finally"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> \\<Union>\n{Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>", "show \"zone_set (Closure\\<^sub>\\<alpha> Z) r \\<subseteq> Closure\\<^sub>\\<alpha>(zone_set Z r)\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> \\<Union>\n{Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "using U"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> \\<Union>\n{Z \\<inter> R |R. R \\<in> U}\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  Z = \\<Union> {Z \\<inter> R |R. R \\<in> U}\n  \\<forall>R\\<in>U. R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>", "by simp"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SuccI3:\n  \"R \\<in> \\<R> \\<Longrightarrow> v \\<in> R \\<Longrightarrow> t \\<ge> 0 \\<Longrightarrow> (v \\<oplus> t) \\<in> R' \\<Longrightarrow> R' \\<in> \\<R> \\<Longrightarrow> R' \\<in> Succ \\<R> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R' \\<in> Succ \\<R> R", "apply (intro SuccI2[of \\<R> X k, folded \\<R>_def, simplified])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> ?v \\<in> R\n 2. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R \\<in> \\<R>\n 3. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> 0 \\<le> ?t\n 4. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R' = [?v \\<oplus> ?t]\\<^sub>\\<R>", "apply assumption+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R' = [v \\<oplus> t]\\<^sub>\\<R>", "apply (intro region_unique[of \\<R> X k, folded \\<R>_def, simplified, symmetric])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> v \\<oplus> t \\<in> R'\n 2. \\<lbrakk>R \\<in> \\<R>; v \\<in> R; 0 \\<le> t; v \\<oplus> t \\<in> R';\n     R' \\<in> \\<R>\\<rbrakk>\n    \\<Longrightarrow> R' \\<in> \\<R>", "by assumption+"], ["", "lemma closure_delay_mono:\n  \"Z \\<subseteq> V \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z)\\<^sup>\\<up> \\<subseteq> Closure\\<^sub>\\<alpha> (Z\\<^sup>\\<up>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> V \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\n    \\<subseteq> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "assume v: \"v \\<in> (Closure\\<^sub>\\<alpha> Z)\\<^sup>\\<up>\" and Z: \"Z \\<subseteq> V\""], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "then"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\n  Z \\<subseteq> V", "obtain u u' t R where A:\n    \"u \\<in> Closure\\<^sub>\\<alpha> Z\" \"v = (u \\<oplus> t)\" \"u \\<in> R\" \"u' \\<in> R\" \"R \\<in> \\<R>\" \"u' \\<in> Z\" \"t \\<ge> 0\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. (\\<And>u t R u'.\n        \\<lbrakk>u \\<in> Closure\\<^sub>\\<alpha> Z; v = u \\<oplus> t;\n         u \\<in> R; u' \\<in> R; R \\<in> \\<R>; u' \\<in> Z; 0 \\<le> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def zone_delay_def"], ["proof (prove)\nusing this:\n  v \\<in> {u \\<oplus> d |u d.\n           u \\<in> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} \\<and>\n           0 \\<le> d}\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. (\\<And>u t R u'.\n        \\<lbrakk>u \\<in> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}};\n         v = u \\<oplus> t; u \\<in> R; u' \\<in> R; R \\<in> \\<R>; u' \\<in> Z;\n         0 \\<le> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u \\<in> Closure\\<^sub>\\<alpha> Z\n  v = u \\<oplus> t\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  u' \\<in> Z\n  0 \\<le> t\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "from A(3,5)"], ["proof (chain)\npicking this:\n  u \\<in> R\n  R \\<in> \\<R>", "have \"\\<forall> x \\<in> X. u x \\<ge> 0\""], ["proof (prove)\nusing this:\n  u \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "unfolding \\<R>_def"], ["proof (prove)\nusing this:\n  u \\<in> R\n  R \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "with region_cover_spec[of v] A(2,7)"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v = u \\<oplus> t\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> u x", "obtain R' where R':\n    \"R' \\<in> \\<R>\" \"v \\<in> R'\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v = u \\<oplus> t\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cval_add_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> v x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> v \\<in> R\n  v = (\\<lambda>x. u x + t)\n  0 \\<le> t\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "with set_of_regions_spec[OF A(5,4), OF SuccI3, of u] A"], ["proof (chain)\npicking this:\n  \\<lbrakk>R \\<in> \\<R>; u \\<in> R; 0 \\<le> ?t1; u \\<oplus> ?t1 \\<in> ?R';\n   ?R' \\<in> \\<R>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t\\<ge>0. [u' \\<oplus> t]\\<^sub>\\<R> = ?R'\n  u \\<in> Closure\\<^sub>\\<alpha> Z\n  v = u \\<oplus> t\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  u' \\<in> Z\n  0 \\<le> t\n  R' \\<in> \\<R>\n  v \\<in> R'", "obtain t where t:\n    \"t \\<ge> 0\" \"[u' \\<oplus> t]\\<^sub>\\<R> = R'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>R \\<in> \\<R>; u \\<in> R; 0 \\<le> ?t1; u \\<oplus> ?t1 \\<in> ?R';\n   ?R' \\<in> \\<R>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>t\\<ge>0. [u' \\<oplus> t]\\<^sub>\\<R> = ?R'\n  u \\<in> Closure\\<^sub>\\<alpha> Z\n  v = u \\<oplus> t\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  u' \\<in> Z\n  0 \\<le> t\n  R' \\<in> \\<R>\n  v \\<in> R'\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>0 \\<le> t; [u' \\<oplus> t]\\<^sub>\\<R> = R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "with A"], ["proof (chain)\npicking this:\n  u \\<in> Closure\\<^sub>\\<alpha> Z\n  v = u \\<oplus> t__\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  u' \\<in> Z\n  0 \\<le> t__\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'", "have \"(u' \\<oplus> t) \\<in> Z\\<^sup>\\<up>\""], ["proof (prove)\nusing this:\n  u \\<in> Closure\\<^sub>\\<alpha> Z\n  v = u \\<oplus> t__\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  u' \\<in> Z\n  0 \\<le> t__\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. u' \\<oplus> t \\<in> Z\\<^sup>\\<up>", "unfolding zone_delay_def"], ["proof (prove)\nusing this:\n  u \\<in> Closure\\<^sub>\\<alpha> Z\n  v = u \\<oplus> t__\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  u' \\<in> Z\n  0 \\<le> t__\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. u' \\<oplus> t \\<in> {u \\<oplus> d |u d. u \\<in> Z \\<and> 0 \\<le> d}", "by auto"], ["proof (state)\nthis:\n  u' \\<oplus> t \\<in> Z\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "moreover"], ["proof (state)\nthis:\n  u' \\<oplus> t \\<in> Z\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "from regions_closed'_spec[OF A(5,4)] t"], ["proof (chain)\npicking this:\n  0 \\<le> ?t \\<Longrightarrow>\n  u' \\<oplus> ?t \\<in> [u' \\<oplus> ?t]\\<^sub>\\<R>\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'", "have \"(u' \\<oplus> t) \\<in> R'\""], ["proof (prove)\nusing this:\n  0 \\<le> ?t \\<Longrightarrow>\n  u' \\<oplus> ?t \\<in> [u' \\<oplus> ?t]\\<^sub>\\<R>\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. u' \\<oplus> t \\<in> R'", "by auto"], ["proof (state)\nthis:\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "ultimately"], ["proof (chain)\npicking this:\n  u' \\<oplus> t \\<in> Z\\<^sup>\\<up>\n  u' \\<oplus> t \\<in> R'", "have \"R' \\<inter> (Z\\<^sup>\\<up>) \\<noteq> {}\""], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> Z\\<^sup>\\<up>\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. R' \\<inter> Z\\<^sup>\\<up> \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  R' \\<inter> Z\\<^sup>\\<up> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>Z \\<subseteq> V;\n        x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "with R'"], ["proof (chain)\npicking this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  R' \\<inter> Z\\<^sup>\\<up> \\<noteq> {}", "show \"v \\<in> Closure\\<^sub>\\<alpha> (Z\\<^sup>\\<up>)\""], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  R' \\<inter> Z\\<^sup>\\<up> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. v \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>", "unfolding cla_def"], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  R' \\<inter> Z\\<^sup>\\<up> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. v \\<in> \\<Union> {R \\<in> \\<R>. R \\<inter> Z\\<^sup>\\<up> \\<noteq> {}}", "by auto"], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> Z\\<^sup>\\<up>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma region_V: \"R \\<in> \\<R> \\<Longrightarrow> R \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<in> \\<R> \\<Longrightarrow> R \\<subseteq> V", "using V_def \\<R>_def region.cases"], ["proof (prove)\nusing this:\n  V \\<equiv> {v. \\<forall>x\\<in>X. 0 \\<le> v x}\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n  \\<lbrakk>?a \\<in> region ?X ?I ?r;\n   \\<And>u X\\<^sub>0.\n      \\<lbrakk>?a = u; \\<forall>x\\<in>?X. 0 \\<le> u x;\n       \\<forall>x\\<in>?X. intv_elem x u (?I x);\n       X\\<^sub>0 = {x \\<in> ?X. \\<exists>d. ?I x = Intv d};\n       \\<forall>x\\<in>X\\<^sub>0.\n          \\<forall>y\\<in>X\\<^sub>0.\n             ((x, y) \\<in> ?r) = (frac (u x) \\<le> frac (u y))\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. R \\<in> \\<R> \\<Longrightarrow> R \\<subseteq> V", "by auto"], ["", "lemma closure_V:\n  \"Closure\\<^sub>\\<alpha> Z \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z \\<subseteq> V", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} \\<subseteq> V", "using region_V"], ["proof (prove)\nusing this:\n  ?R \\<in> \\<R> \\<Longrightarrow> ?R \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} \\<subseteq> V", "by auto"], ["", "lemma closure_V_int:\n  \"Closure\\<^sub>\\<alpha> Z = Closure\\<^sub>\\<alpha> (Z \\<inter> V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z = Closure\\<^sub>\\<alpha> (Z \\<inter> V)", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} =\n    \\<Union> {R \\<in> \\<R>. R \\<inter> (Z \\<inter> V) \\<noteq> {}}", "using region_V"], ["proof (prove)\nusing this:\n  ?R \\<in> \\<R> \\<Longrightarrow> ?R \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} =\n    \\<Union> {R \\<in> \\<R>. R \\<inter> (Z \\<inter> V) \\<noteq> {}}", "by auto"], ["", "lemma closure_constraint_mono:\n  \"Closure\\<^sub>\\<alpha> g = g \\<Longrightarrow> g \\<inter> (Closure\\<^sub>\\<alpha> Z) \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> g = g \\<Longrightarrow>\n    g \\<inter> Closure\\<^sub>\\<alpha> Z\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {R \\<in> \\<R>. R \\<inter> g \\<noteq> {}} = g \\<Longrightarrow>\n    g \\<inter> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n    \\<subseteq> \\<Union>\n                 {R \\<in> \\<R>. R \\<inter> (g \\<inter> Z) \\<noteq> {}}", "by auto"], ["", "lemma closure_constraint_mono':\n  assumes \"Closure\\<^sub>\\<alpha> g = g \\<inter> V\"\n  shows \"g \\<inter> (Closure\\<^sub>\\<alpha> Z) \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<inter> Closure\\<^sub>\\<alpha> Z\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. g \\<inter> Closure\\<^sub>\\<alpha> Z\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)", "from assms closure_V_int"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> g = g \\<inter> V\n  Closure\\<^sub>\\<alpha> ?Z = Closure\\<^sub>\\<alpha> (?Z \\<inter> V)", "have \"Closure\\<^sub>\\<alpha> (g \\<inter> V) = g \\<inter> V\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> g = g \\<inter> V\n  Closure\\<^sub>\\<alpha> ?Z = Closure\\<^sub>\\<alpha> (?Z \\<inter> V)\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (g \\<inter> V) = g \\<inter> V", "by auto"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> (g \\<inter> V) = g \\<inter> V\n\ngoal (1 subgoal):\n 1. g \\<inter> Closure\\<^sub>\\<alpha> Z\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)", "from closure_constraint_mono[OF this, of Z]"], ["proof (chain)\npicking this:\n  g \\<inter> V \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> V \\<inter> Z)", "have\n    \"g \\<inter> (V \\<inter> Closure\\<^sub>\\<alpha> Z) \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)\""], ["proof (prove)\nusing this:\n  g \\<inter> V \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> V \\<inter> Z)\n\ngoal (1 subgoal):\n 1. g \\<inter> (V \\<inter> Closure\\<^sub>\\<alpha> Z)\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)", "by (metis Int_assoc Int_commute)"], ["proof (state)\nthis:\n  g \\<inter> (V \\<inter> Closure\\<^sub>\\<alpha> Z)\n  \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)\n\ngoal (1 subgoal):\n 1. g \\<inter> Closure\\<^sub>\\<alpha> Z\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)", "with closure_V[of Z] closure_V_int[of \"g \\<inter> Z\"]"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> V\n  Closure\\<^sub>\\<alpha> (g \\<inter> Z) =\n  Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)\n  g \\<inter> (V \\<inter> Closure\\<^sub>\\<alpha> Z)\n  \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)", "show ?thesis"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> V\n  Closure\\<^sub>\\<alpha> (g \\<inter> Z) =\n  Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)\n  g \\<inter> (V \\<inter> Closure\\<^sub>\\<alpha> Z)\n  \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z \\<inter> V)\n\ngoal (1 subgoal):\n 1. g \\<inter> Closure\\<^sub>\\<alpha> Z\n    \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)", "by auto"], ["proof (state)\nthis:\n  g \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (g \\<inter> Z)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cla_empty_iff:\n  \"Z \\<subseteq> V \\<Longrightarrow> Z = {} \\<longleftrightarrow> Closure\\<^sub>\\<alpha> Z = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> V \\<Longrightarrow>\n    (Z = {}) = (Closure\\<^sub>\\<alpha> Z = {})", "unfolding cla_def V_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    (Z = {}) = (\\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} = {})", "using region_cover_spec"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> ?u x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> ?u \\<in> R\n\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    (Z = {}) = (\\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} = {})", "by fast"], ["", "lemma closure_involutive_aux:\n  \"U \\<subseteq> \\<R> \\<Longrightarrow> Closure\\<^sub>\\<alpha> \\<Union> U = \\<Union> U\""], ["proof (prove)\ngoal (1 subgoal):\n 1. U \\<subseteq> \\<R> \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> \\<Union> U = \\<Union> U", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. U \\<subseteq> \\<R> \\<Longrightarrow>\n    \\<Union> {R \\<in> \\<R>. R \\<inter> \\<Union> U \\<noteq> {}} = \\<Union> U", "using valid_regions_distinct_spec"], ["proof (prove)\nusing this:\n  \\<lbrakk>?R \\<in> \\<R>; ?R' \\<in> \\<R>; ?v \\<in> ?R; ?v \\<in> ?R'\\<rbrakk>\n  \\<Longrightarrow> ?R = ?R'\n\ngoal (1 subgoal):\n 1. U \\<subseteq> \\<R> \\<Longrightarrow>\n    \\<Union> {R \\<in> \\<R>. R \\<inter> \\<Union> U \\<noteq> {}} = \\<Union> U", "by blast"], ["", "lemma closure_involutive_aux':\n  \"\\<exists> U. U \\<subseteq> \\<R> \\<and> Closure\\<^sub>\\<alpha> Z = \\<Union> U\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>U\\<subseteq>\\<R>. Closure\\<^sub>\\<alpha> Z = \\<Union> U", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>U\\<subseteq>\\<R>.\n       \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}} = \\<Union> U", "by (rule exI[where x = \"{R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\"]) auto"], ["", "lemma closure_involutive:\n  \"Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> Z = Closure\\<^sub>\\<alpha> Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> Z =\n    Closure\\<^sub>\\<alpha> Z", "using closure_involutive_aux closure_involutive_aux'"], ["proof (prove)\nusing this:\n  ?U \\<subseteq> \\<R> \\<Longrightarrow>\n  Closure\\<^sub>\\<alpha> \\<Union> ?U = \\<Union> ?U\n  \\<exists>U\\<subseteq>\\<R>. Closure\\<^sub>\\<alpha> ?Z = \\<Union> U\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> Z =\n    Closure\\<^sub>\\<alpha> Z", "by metis"], ["", "lemma closure_involutive':\n  \"Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W", "unfolding cla_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> \\<Union>\n                   {R \\<in> \\<R>.\n                    R \\<inter> W \\<noteq> {}} \\<Longrightarrow>\n    \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n    \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W \\<noteq> {}}", "using valid_regions_distinct_spec"], ["proof (prove)\nusing this:\n  \\<lbrakk>?R \\<in> \\<R>; ?R' \\<in> \\<R>; ?v \\<in> ?R; ?v \\<in> ?R'\\<rbrakk>\n  \\<Longrightarrow> ?R = ?R'\n\ngoal (1 subgoal):\n 1. Z \\<subseteq> \\<Union>\n                   {R \\<in> \\<R>.\n                    R \\<inter> W \\<noteq> {}} \\<Longrightarrow>\n    \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n    \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W \\<noteq> {}}", "by fast"], ["", "lemma closure_subs:\n  \"Z \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z", "unfolding cla_def V_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    Z \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}", "using region_cover_spec"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>X. 0 \\<le> ?u x \\<Longrightarrow>\n  \\<exists>R. R \\<in> \\<R> \\<and> ?u \\<in> R\n\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    Z \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}", "by fast"], ["", "lemma cla_mono':\n  \"Z' \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> Z' \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z' \\<subseteq> V; Z \\<subseteq> Z'\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z\n                      \\<subseteq> Closure\\<^sub>\\<alpha> Z'", "by (meson closure_involutive' closure_subs subset_trans)"], ["", "lemma cla_mono:\n  \"Z \\<subseteq> Z' \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> Z' \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z'", "using closure_V_int cla_mono'[of \"Z' \\<inter> V\" \"Z \\<inter> V\"]"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> ?Z = Closure\\<^sub>\\<alpha> (?Z \\<inter> V)\n  \\<lbrakk>Z' \\<inter> V \\<subseteq> V;\n   Z \\<inter> V \\<subseteq> Z' \\<inter> V\\<rbrakk>\n  \\<Longrightarrow> Closure\\<^sub>\\<alpha> (Z \\<inter> V)\n                    \\<subseteq> Closure\\<^sub>\\<alpha> (Z' \\<inter> V)\n\ngoal (1 subgoal):\n 1. Z \\<subseteq> Z' \\<Longrightarrow>\n    Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> Z'", "by auto"], ["", "section \\<open>A New Zone Semantics Abstracting with \\<open>Closure\\<^sub>\\<alpha>\\<close>\\<close>"], ["", "subsection \\<open>Single step\\<close>"], ["", "inductive step_z_alpha ::\n  \"('a, 'c, t, 's) ta \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> bool\"\n(\"_ \\<turnstile> \\<langle>_, _\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>_, _\\<rangle>\" [61,61,61] 61)\nwhere\n  step_alpha: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle>\""], ["", "inductive_cases[elim!]: \"A \\<turnstile> \\<langle>l, u\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',u'\\<rangle>\""], ["", "declare step_z_alpha.intros[intro]"], ["", "lemma up_V: \"Z \\<subseteq> V \\<Longrightarrow> Z\\<^sup>\\<up> \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> V \\<Longrightarrow> Z\\<^sup>\\<up> \\<subseteq> V", "unfolding V_def zone_delay_def cval_add_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    {\\<lambda>x. u x + d |u d. u \\<in> Z \\<and> 0 \\<le> d}\n    \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x}", "by auto"], ["", "lemma reset_V: \"Z \\<subseteq> V \\<Longrightarrow> (zone_set Z r) \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> V \\<Longrightarrow>\n    Z\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<subseteq> V", "unfolding V_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    Z\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x}", "unfolding zone_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x} \\<Longrightarrow>\n    {[r\\<rightarrow>0]u |u. u \\<in> Z}\n    \\<subseteq> {v. \\<forall>x\\<in>X. 0 \\<le> v x}", "by (induction r, auto)"], ["", "lemma step_z_V: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> Z' \\<subseteq> V", "apply (induction rule: step_z.induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       Z \\<subseteq> V \\<Longrightarrow>\n       (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n       {u. u \\<turnstile> inv_of A l}\n       \\<subseteq> V\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                         {u. u \\<turnstile> inv_of A l'}\n                         \\<subseteq> V", "apply (rule le_infI1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       Z \\<subseteq> V \\<Longrightarrow>\n       (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<subseteq> V\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                         {u. u \\<turnstile> inv_of A l'}\n                         \\<subseteq> V", "apply (rule up_V)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       Z \\<subseteq> V \\<Longrightarrow>\n       Z \\<inter> {u. u \\<turnstile> inv_of A l} \\<subseteq> V\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                         {u. u \\<turnstile> inv_of A l'}\n                         \\<subseteq> V", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                         {u. u \\<turnstile> inv_of A l'}\n                         \\<subseteq> V", "apply (rule le_infI1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                         \\<subseteq> V", "apply (rule reset_V)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> Z \\<inter> {u. u \\<turnstile> g} \\<subseteq> V", "by blast"], ["", "text \\<open>Single-step soundness and completeness follows trivially from \\<open>cla_empty_iff\\<close>.\\<close>"], ["", "lemma step_z_alpha_sound:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {} \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "apply (induction rule: step_z_alpha.induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V; Closure\\<^sub>\\<alpha> Z' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z'' \\<noteq> {}", "apply (frule step_z_V)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A l Z l' Z'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V; Closure\\<^sub>\\<alpha> Z' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> Z \\<subseteq> V\n 2. \\<And>A l Z l' Z'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V; Closure\\<^sub>\\<alpha> Z' \\<noteq> {};\n        Z' \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z'' \\<noteq> {}", "apply assumption"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V; Closure\\<^sub>\\<alpha> Z' \\<noteq> {};\n        Z' \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z'' \\<noteq> {}", "apply (rotate_tac 3)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z'.\n       \\<lbrakk>Z' \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V; Closure\\<^sub>\\<alpha> Z' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z'' \\<noteq> {}", "apply (drule cla_empty_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z'.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V; Closure\\<^sub>\\<alpha> Z' \\<noteq> {};\n        (Z' = {}) = (Closure\\<^sub>\\<alpha> Z' = {})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z'' \\<noteq> {}", "by auto"], ["", "lemma step_z_alpha_complete:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {} \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "apply (frule step_z_V)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> Z \\<subseteq> V\n 2. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {}; Z' \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "apply assumption"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {}; Z' \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "apply (rotate_tac 3)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Z' \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "apply (drule cla_empty_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V; Z' \\<noteq> {};\n     (Z' = {}) = (Closure\\<^sub>\\<alpha> Z' = {})\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "by auto"], ["", "lemma zone_set_mono:\n  \"A \\<subseteq> B \\<Longrightarrow> zone_set A r \\<subseteq> zone_set B r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> B \\<Longrightarrow>\n    A\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> B\\<^bsub>r \\<rightarrow> 0\\<^esub>", "unfolding zone_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> B \\<Longrightarrow>\n    {[r\\<rightarrow>(0::'b)]u |u. u \\<in> A}\n    \\<subseteq> {[r\\<rightarrow>(0::'b)]u |u. u \\<in> B}", "by auto"], ["", "lemma zone_delay_mono:\n  \"A \\<subseteq> B \\<Longrightarrow> A\\<^sup>\\<up> \\<subseteq> B\\<^sup>\\<up>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> B \\<Longrightarrow>\n    A\\<^sup>\\<up> \\<subseteq> B\\<^sup>\\<up>", "unfolding zone_delay_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> B \\<Longrightarrow>\n    {u \\<oplus> d |u d. u \\<in> A \\<and> (0::'b) \\<le> d}\n    \\<subseteq> {u \\<oplus> d |u d. u \\<in> B \\<and> (0::'b) \\<le> d}", "by auto"], ["", "subsection \\<open>Multi step\\<close>"], ["", "inductive\n  steps_z_alpha :: \"('a, 'c, t, 's) ta \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> 's \\<Rightarrow> ('c, t) zone \\<Rightarrow> bool\"\n(\"_ \\<turnstile> \\<langle>_, _\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>_, _\\<rangle>\" [61,61,61] 61)\nwhere\n  refl: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l, Z\\<rangle>\" |\n  step: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle>\""], ["", "declare steps_z_alpha.intros[intro]"], ["", "lemma subset_int_mono: \"A \\<subseteq> B \\<Longrightarrow> A \\<inter> C \\<subseteq> B \\<inter> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> B \\<Longrightarrow> A \\<inter> C \\<subseteq> B \\<inter> C", "by blast"], ["", "text \\<open>P. Bouyer's calculation for @{term \"Post(Closure\\<^sub>\\<alpha> Z, e) \\<subseteq> Closure\\<^sub>\\<alpha>(Post (Z, e))\"}\\<close>"], ["", "text \\<open>This is now obsolete as we argue solely with monotonicty of \\<open>steps_z\\<close> w.r.t \\<open>Closure\\<^sub>\\<alpha>\\<close>\\<close>"], ["", "lemma calc:\n  \"valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  \\<Longrightarrow> \\<exists>Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and> Z' \\<subseteq> Z''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''", "proof (cases rule: step_z.cases, assumption, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "case 1"], ["proof (state)\nthis:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  l' = l\n  Z' =\n  (Closure\\<^sub>\\<alpha> Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "note A = this"], ["proof (state)\nthis:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  l' = l\n  Z' =\n  (Closure\\<^sub>\\<alpha> Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from A(1)"], ["proof (chain)\npicking this:\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have \"\\<forall>(x, m)\\<in>clkp_set A. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by (fastforce elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "then"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l). m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                collect_clkt (trans_of A).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (snd A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by auto"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from closure_constraint_id[OF this]"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l\\<rbrace> =\n  \\<lbrace>inv_of A l\\<rbrace> \\<inter> V", "have *: \"Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l\\<rbrace> = \\<lbrace>inv_of A l\\<rbrace> \\<inter> V\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l\\<rbrace> =\n  \\<lbrace>inv_of A l\\<rbrace> \\<inter> V\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l\\<rbrace> =\n    \\<lbrace>inv_of A l\\<rbrace> \\<inter> V", "."], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l\\<rbrace> =\n  \\<lbrace>inv_of A l\\<rbrace> \\<inter> V\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from closure_constraint_mono'[OF *, of Z]"], ["proof (chain)\npicking this:\n  \\<lbrace>inv_of A l\\<rbrace> \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (\\<lbrace>inv_of A l\\<rbrace> \\<inter>\nZ)", "have\n    \"(Closure\\<^sub>\\<alpha> Z) \\<inter> {u. u \\<turnstile> inv_of A l} \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\""], ["proof (prove)\nusing this:\n  \\<lbrace>inv_of A l\\<rbrace> \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (\\<lbrace>inv_of A l\\<rbrace> \\<inter>\nZ)\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  {v. v \\<turnstile> inv_of A l} \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> ({v.\n v \\<turnstile> inv_of A l} \\<inter>\nZ)\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})", "by (subst Int_commute) (subst (asm) (2) Int_commute, assumption)"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "moreover"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "have \"\\<dots>\\<^sup>\\<up> \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter>\n                            {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "using A(2)"], ["proof (prove)\nusing this:\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter>\n                            {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "by (blast intro!: closure_delay_mono)"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "ultimately"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "have \"Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l})\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l})", "using closure_constraint_mono'[OF *, of \"(Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\"]"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<lbrace>inv_of A l\\<rbrace> \\<inter>\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (\\<lbrace>inv_of A l\\<rbrace> \\<inter>\n(Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>)\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l})", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  {v. v \\<turnstile> inv_of A l} \\<inter>\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n  \\<subseteq> Closure\\<^sub>\\<alpha> ({v.\n v \\<turnstile> inv_of A l} \\<inter>\n(Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>)\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l})", "apply (subst A(5))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     {v. v \\<turnstile> inv_of A l} \\<inter>\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> ({v.\n    v \\<turnstile> inv_of A l} \\<inter>\n   (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>)\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                    {u. u \\<turnstile> inv_of A l})", "apply (subst (asm) (5 7) Int_commute)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                    {u. u \\<turnstile> inv_of A l})", "apply (rule subset_trans)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}\n                      \\<subseteq> ?B5\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> ?B5\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                    {u. u \\<turnstile> inv_of A l})", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> ?B5\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}\n                      \\<subseteq> ?B5", "apply assumption"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                                  {v. v \\<turnstile> inv_of A l}", "apply (subst subset_int_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> True", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> True\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "apply rule"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "apply (rule subset_trans)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n                      \\<subseteq> ?B8\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> ?B8\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> ?B8\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n                      \\<subseteq> ?B8", "apply assumption"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "apply (rule zone_delay_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter>\n             {u. u \\<turnstile> inv_of A l}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> inv_of A l});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n     {v. v \\<turnstile> inv_of A l}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {v. v \\<turnstile> inv_of A l})\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<inter>\n                      {u. u \\<turnstile> inv_of A l}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> inv_of A l})", "apply assumption"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V;\n     A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     l' = l;\n     Z' =\n     (Closure\\<^sub>\\<alpha> Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''\n 2. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "with A(4,3)"], ["proof (chain)\npicking this:\n  l' = l\n  A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})", "show ?thesis"], ["proof (prove)\nusing this:\n  l' = l\n  A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. \\<exists>Z''.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n       Z' \\<subseteq> Z''", "by auto"], ["proof (state)\nthis:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n     Z' \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "case (2 g a r)"], ["proof (state)\nthis:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z' =\n  (Closure\\<^sub>\\<alpha> Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "note A = this"], ["proof (state)\nthis:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z' =\n  (Closure\\<^sub>\\<alpha> Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from A(1)"], ["proof (chain)\npicking this:\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have *:\n    \"\\<forall>(x, m)\\<in>clkp_set A. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n    \"collect_clkvt (trans_of A) \\<subseteq> X\"\n    \"finite X\""], ["proof (prove)\nusing this:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> &&&\n    collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from *(1) A(5)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l'). m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l').\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                collect_clkt (trans_of A).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (snd A l').\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l').\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from closure_constraint_id[OF this]"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l'\\<rbrace> =\n  \\<lbrace>inv_of A l'\\<rbrace> \\<inter> V", "have **: \"Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l'\\<rbrace> = \\<lbrace>inv_of A l'\\<rbrace> \\<inter> V\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l'\\<rbrace> =\n  \\<lbrace>inv_of A l'\\<rbrace> \\<inter> V\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l'\\<rbrace> =\n    \\<lbrace>inv_of A l'\\<rbrace> \\<inter> V", "."], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> \\<lbrace>inv_of A l'\\<rbrace> =\n  \\<lbrace>inv_of A l'\\<rbrace> \\<inter> V\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from *(1) A(5)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs g. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clkt_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>collect_clki (inv_of A) \\<union>\n                \\<Union>\n                 {collect_clock_pairs (fst (snd t)) |t. t \\<in> trans_of A}.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs g.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs g.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from closure_constraint_id[OF this]"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n  \\<lbrace>g\\<rbrace> \\<inter> V", "have ***: \"Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> = \\<lbrace>g\\<rbrace> \\<inter> V\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n  \\<lbrace>g\\<rbrace> \\<inter> V\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n    \\<lbrace>g\\<rbrace> \\<inter> V", "."], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> \\<lbrace>g\\<rbrace> =\n  \\<lbrace>g\\<rbrace> \\<inter> V\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from *(2) A(5)"], ["proof (chain)\npicking this:\n  collect_clkvt (trans_of A) \\<subseteq> X\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have ****: \"set r \\<subseteq> X\""], ["proof (prove)\nusing this:\n  collect_clkvt (trans_of A) \\<subseteq> X\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "unfolding collect_clkvt_def"], ["proof (prove)\nusing this:\n  \\<Union>\n   {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n    t \\<in> trans_of A}\n  \\<subseteq> X\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "from closure_constraint_mono'[OF ***, of Z]"], ["proof (chain)\npicking this:\n  \\<lbrace>g\\<rbrace> \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (\\<lbrace>g\\<rbrace> \\<inter> Z)", "have\n    \"(Closure\\<^sub>\\<alpha> Z) \\<inter> {u. u \\<turnstile> g} \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\""], ["proof (prove)\nusing this:\n  \\<lbrace>g\\<rbrace> \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> (\\<lbrace>g\\<rbrace> \\<inter> Z)\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  {v. v \\<turnstile> g} \\<inter> Closure\\<^sub>\\<alpha> Z\n  \\<subseteq> Closure\\<^sub>\\<alpha> ({v. v \\<turnstile> g} \\<inter> Z)\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})", "by (subst Int_commute) (subst (asm) (2) Int_commute, assumption)"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "moreover"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "have \"zone_set \\<dots> r \\<subseteq> Closure\\<^sub>\\<alpha> (zone_set (Z \\<inter> {u. u \\<turnstile> g}) r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter>\n                            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "using **** A(2)"], ["proof (prove)\nusing this:\n  set r \\<subseteq> X\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> (Z \\<inter>\n                            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "by (intro closure_update_mono, auto)"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "ultimately"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "have \"Z' \\<subseteq> Closure\\<^sub>\\<alpha> (zone_set (Z \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'})\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "using closure_constraint_mono'[OF **, of \"zone_set (Z \\<inter> {u. u \\<turnstile> g}) r\"]"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<lbrace>inv_of A l'\\<rbrace> \\<inter>\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (\\<lbrace>inv_of A l'\\<rbrace> \\<inter>\n(Z \\<inter> {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>)\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "unfolding ccval_def"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter> {u. u \\<turnstile> g})\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n{u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  {v. v \\<turnstile> inv_of A l'} \\<inter>\n  Closure\\<^sub>\\<alpha> (Z \\<inter>\n                          {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n  \\<subseteq> Closure\\<^sub>\\<alpha> ({v.\n v \\<turnstile> inv_of A l'} \\<inter>\n(Z \\<inter> {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>)\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "apply (subst A(4))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     {v. v \\<turnstile> inv_of A l'} \\<inter>\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> ({v.\n    v \\<turnstile> inv_of A l'} \\<inter>\n   (Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>)\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                    {u. u \\<turnstile> inv_of A l'})", "apply (subst (asm) (5 7) Int_commute)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                    {u. u \\<turnstile> inv_of A l'})", "apply (rule subset_trans)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}\n                      \\<subseteq> ?B5\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> ?B5\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                    {u. u \\<turnstile> inv_of A l'})", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> ?B5\n                      \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                    {u. u \\<turnstile> inv_of A l'})\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}\n                      \\<subseteq> ?B5", "apply assumption"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {v. v \\<turnstile> inv_of A l'}", "apply (subst subset_int_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> True", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> True\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "apply rule"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "apply (rule subset_trans)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> ?B8\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> ?B8\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> ?B8\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n 2. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> ?B8", "apply assumption"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> (Closure\\<^sub>\\<alpha> Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "apply (rule zone_set_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Closure\\<^sub>\\<alpha> Z \\<inter> {u. u \\<turnstile> g}\n             \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n           {u. u \\<turnstile> g});\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n     \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>;\n     Closure\\<^sub>\\<alpha> (Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {v. v \\<turnstile> inv_of A l'}\n     \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {v. v \\<turnstile> inv_of A l'})\\<rbrakk>\n    \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<inter>\n                      {u. u \\<turnstile> g}\n                      \\<subseteq> Closure\\<^sub>\\<alpha> (Z \\<inter>\n                    {u. u \\<turnstile> g})", "apply assumption"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V;\n        A \\<turnstile> \\<langle>l, Closure\\<^sub>\\<alpha> Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z' =\n        (Closure\\<^sub>\\<alpha> Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n                            Z' \\<subseteq> Z''", "with A(5)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})", "show ?thesis"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<exists>Z''.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n       Z' \\<subseteq> Z''", "by auto"], ["proof (state)\nthis:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z''\\<rangle> \\<and>\n     Z' \\<subseteq> Z''\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Turning P. Bouyers argument for multiple steps into an inductive proof is not direct.\n  With this initial argument we can get to a point where the induction hypothesis is applicable.\n  This breaks the \"information hiding\" induced by the different variants of steps.\n\\<close>"], ["", "lemma steps_z_alpha_closure_involutive'_aux:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n     valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Closure\\<^sub>\\<alpha> Z'\n                         \\<subseteq> Closure\\<^sub>\\<alpha> W'", "proof (induction rule: step_z.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "case A: (step_t_z A l Z)"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "let ?Z' = \"(Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "let ?W' = \"(W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "from \\<R>_def"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \\<R>_def': \"\\<R> = {region X I r |I r. valid_region X k I r}\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<R> = {region X I r |I r. valid_region X k I r}", "by simp"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "have step_z: \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l,?W'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                            {u. u \\<turnstile> inv_of A\n          l})\\<^sup>\\<up> \\<inter>\n                           {u. u \\<turnstile> inv_of A l}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "have \"Closure\\<^sub>\\<alpha> ?Z' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n                            {u. u \\<turnstile> inv_of A l})\n    \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l})", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "assume v: \"v \\<in> Closure\\<^sub>\\<alpha> ?Z'\""], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "then"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})", "obtain R' v' where 1: \"R' \\<in> \\<R>\" \"v \\<in> R'\" \"v' \\<in> R'\" \"v' \\<in> ?Z'\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                  {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v \\<in> \\<Union>\n           {R \\<in> \\<R>.\n            R \\<inter>\n            ((Z \\<inter>\n              {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n             {u. u \\<turnstile> inv_of A l}) \\<noteq>\n            {}}\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                  {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n           {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "then"], ["proof (chain)\npicking this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n           {u. u \\<turnstile> inv_of A l}", "obtain u d where\n      \"u \\<in> Z\" and v': \"v' = u \\<oplus> d\" \"u \\<turnstile> inv_of A l\" \"u \\<oplus> d \\<turnstile> inv_of A l\" \"0 \\<le> d\""], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n           {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. (\\<And>u d.\n        \\<lbrakk>u \\<in> Z; v' = u \\<oplus> d; u \\<turnstile> inv_of A l;\n         u \\<oplus> d \\<turnstile> inv_of A l; 0 \\<le> d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding zone_delay_def"], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> {u \\<oplus> d |u d.\n            u \\<in> Z \\<inter> {u. u \\<turnstile> inv_of A l} \\<and>\n            0 \\<le> d} \\<inter>\n           {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. (\\<And>u d.\n        \\<lbrakk>u \\<in> Z; v' = u \\<oplus> d; u \\<turnstile> inv_of A l;\n         u \\<oplus> d \\<turnstile> inv_of A l; 0 \\<le> d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with closure_subs[OF A(3)] A(1)"], ["proof (chain)\npicking this:\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d", "obtain u' R where u': \"u' \\<in> W\" \"u \\<in> R\" \"u' \\<in> R\" \"R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  Z \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W \\<noteq> {}}\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "then"], ["proof (chain)\npicking this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "unfolding \\<R>_def"], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from region_cover'[OF \\<R>_def' this]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "have R: \"[u]\\<^sub>\\<R> \\<in> \\<R>\" \"u \\<in> [u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> \\<in> \\<R> &&& u \\<in> [u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from SuccI2[OF \\<R>_def' this(2,1) v'(4), of \"[v']\\<^sub>\\<R>\"] v'(1)"], ["proof (chain)\npicking this:\n  [v']\\<^sub>\\<R> = [u \\<oplus> d]\\<^sub>\\<R> \\<Longrightarrow>\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  v' = u \\<oplus> d", "have v'1:\n      \"[v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\" \"[v']\\<^sub>\\<R> \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  [v']\\<^sub>\\<R> = [u \\<oplus> d]\\<^sub>\\<R> \\<Longrightarrow>\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  v' = u \\<oplus> d\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>) &&&\n    [v']\\<^sub>\\<R> \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from regions_closed'_spec[OF R(1,2) v'(4)] v'(1)"], ["proof (chain)\npicking this:\n  u \\<oplus> d \\<in> [u \\<oplus> d]\\<^sub>\\<R>\n  v' = u \\<oplus> d", "have v'2: \"v' \\<in> [v']\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<oplus> d \\<in> [u \\<oplus> d]\\<^sub>\\<R>\n  v' = u \\<oplus> d\n\ngoal (1 subgoal):\n 1. v' \\<in> [v']\\<^sub>\\<R>", "by simp"], ["proof (state)\nthis:\n  v' \\<in> [v']\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from A(2)"], ["proof (chain)\npicking this:\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have *:\n      \"\\<forall>(x, m)\\<in>clkp_set A. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n      \"collect_clkvt (trans_of A) \\<subseteq> X\"\n      \"finite X\""], ["proof (prove)\nusing this:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> &&&\n    collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from *(1) u'(2)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<in> R", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l). m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                collect_clkt (trans_of A).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (snd A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from ccompatible[OF this, folded \\<R>_def'] v'1(2) v'2 v'(1,2,3) R"], ["proof (chain)\npicking this:\n  ccompatible \\<R> (inv_of A l)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  v' \\<in> [v']\\<^sub>\\<R>\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>", "have 3:\n      \"[v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\" \"([u]\\<^sub>\\<R>) \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\""], ["proof (prove)\nusing this:\n  ccompatible \\<R> (inv_of A l)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  v' \\<in> [v']\\<^sub>\\<R>\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace> &&&\n    [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>", "unfolding ccompatible_def ccval_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> {v. v \\<turnstile> inv_of A l} \\<or>\n     {v. v \\<turnstile> inv_of A l} \\<inter> R = {}\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  v' \\<in> [v']\\<^sub>\\<R>\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l} &&&\n    [u]\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with A v'1 R(1) \\<R>_def'"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>", "have \"A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l,([v']\\<^sub>\\<R>)\\<rangle>\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with valid_regions_distinct_spec[OF v'1(2) 1(1) v'2 1(3)] region_unique_spec[OF u'(2,4)]"], ["proof (chain)\npicking this:\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>", "have step_r: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l, R'\\<rangle>\" and 2: \"[v']\\<^sub>\\<R> = R'\" \"[u]\\<^sub>\\<R> = R\""], ["proof (prove)\nusing this:\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l, R'\\<rangle> &&&\n    [v']\\<^sub>\\<R> = R' &&& [u]\\<^sub>\\<R> = R", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l, R'\\<rangle>\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from set_of_regions_spec[OF u'(4,3)] v'1(1) 2"], ["proof (chain)\npicking this:\n  ?R' \\<in> Succ \\<R> R \\<Longrightarrow>\n  \\<exists>t\\<ge>0. [u' \\<oplus> t]\\<^sub>\\<R> = ?R'\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R", "obtain t where t: \"t \\<ge> 0\" \"[u' \\<oplus> t]\\<^sub>\\<R> = R'\""], ["proof (prove)\nusing this:\n  ?R' \\<in> Succ \\<R> R \\<Longrightarrow>\n  \\<exists>t\\<ge>0. [u' \\<oplus> t]\\<^sub>\\<R> = ?R'\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>0 \\<le> t; [u' \\<oplus> t]\\<^sub>\\<R> = R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with regions_closed'_spec[OF u'(4,3) this(1)] step_t_r(1)"], ["proof (chain)\npicking this:\n  u' \\<oplus> t \\<in> [u' \\<oplus> t]\\<^sub>\\<R>\n  \\<lbrakk>?\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   valid_abstraction ?A ?X (\\<lambda>x. real (?k x)); ?R \\<in> ?\\<R>;\n   ?R' \\<in> Succ ?\\<R> ?R; ?R \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>;\n   ?R' \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>\\<rbrakk>\n  \\<Longrightarrow> ?A,?\\<R> \\<turnstile> \\<langle>?l, ?R\\<rangle> \\<leadsto> \\<langle>?l, ?R'\\<rangle>\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'", "have *: \"u' \\<oplus> t \\<in> R'\""], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> [u' \\<oplus> t]\\<^sub>\\<R>\n  \\<lbrakk>?\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   valid_abstraction ?A ?X (\\<lambda>x. real (?k x)); ?R \\<in> ?\\<R>;\n   ?R' \\<in> Succ ?\\<R> ?R; ?R \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>;\n   ?R' \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>\\<rbrakk>\n  \\<Longrightarrow> ?A,?\\<R> \\<turnstile> \\<langle>?l, ?R\\<rangle> \\<leadsto> \\<langle>?l, ?R'\\<rangle>\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. u' \\<oplus> t \\<in> R'", "by auto"], ["proof (state)\nthis:\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with t(1) 3 2 u'(1,3)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  u' \\<in> W\n  u' \\<in> R\n  u' \\<oplus> t \\<in> R'", "have \"A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l, u' \\<oplus> t\\<rangle>\" \"u' \\<oplus> t \\<in> ?W'\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  u' \\<in> W\n  u' \\<in> R\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                              t\\<rangle> &&&\n    u' \\<oplus> t\n    \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n          {u. u \\<turnstile> inv_of A l}", "unfolding zone_delay_def ccval_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  [v']\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}\n  [u]\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  u' \\<in> W\n  u' \\<in> R\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                              t\\<rangle> &&&\n    u' \\<oplus> t\n    \\<in> {u \\<oplus> d |u d.\n           u \\<in> W \\<inter> {u. u \\<turnstile> inv_of A l} \\<and>\n           0 \\<le> d} \\<inter>\n          {u. u \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with * 1(1)"], ["proof (chain)\npicking this:\n  u' \\<oplus> t \\<in> R'\n  R' \\<in> \\<R>\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}", "have \"R' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> R'\n  R' \\<in> \\<R>\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l})", "unfolding cla_def"], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> R'\n  R' \\<in> \\<R>\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> \\<Union>\n                    {R \\<in> \\<R>.\n                     R \\<inter>\n                     ((W \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}) \\<noteq>\n                     {}}", "by auto"], ["proof (state)\nthis:\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with 1(2)"], ["proof (chain)\npicking this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})", "show \"v \\<in> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                     {u.\nu \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                                    {u. u \\<turnstile> inv_of A l})", ".."], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                {u. u \\<turnstile> inv_of A\n              l})\\<^sup>\\<up> \\<inter>\n                               {u. u \\<turnstile> inv_of A l})\n       \\<subseteq> Closure\\<^sub>\\<alpha> W'", "by auto"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                              {u. u \\<turnstile> inv_of A\n            l})\\<^sup>\\<up> \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\n     \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "case A: (step_a_z A l g a r l' Z)"], ["proof (state)\nthis:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "let ?Z' = \"zone_set (Z \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "let ?W' = \"zone_set (W \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "from \\<R>_def"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \\<R>_def': \"\\<R> = {region X I r |I r. valid_region X k I r}\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<R> = {region X I r |I r. valid_region X k I r}", "by simp"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "from A(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have step_z: \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',?W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                            {u. u \\<turnstile> inv_of A l'}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "have \"Closure\\<^sub>\\<alpha> ?Z' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                            {u. u \\<turnstile> inv_of A l'})\n    \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'})", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "assume v: \"v \\<in> Closure\\<^sub>\\<alpha> ?Z'\""], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "then"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})", "obtain R' v' where 1: \"R' \\<in> \\<R>\" \"v \\<in> R'\" \"v' \\<in> R'\" \"v' \\<in> ?Z'\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                  {u. u \\<turnstile> inv_of A l'}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v \\<in> \\<Union>\n           {R \\<in> \\<R>.\n            R \\<inter>\n            ((Z \\<inter>\n              {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n             {u. u \\<turnstile> inv_of A l'}) \\<noteq>\n            {}}\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                  {u. u \\<turnstile> inv_of A l'}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter>\n            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "then"], ["proof (chain)\npicking this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter>\n            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n           {u. u \\<turnstile> inv_of A l'}", "obtain u where\n      \"u \\<in> Z\" and v': \"v' = [r\\<rightarrow>0]u\" \"u \\<turnstile> g\" \"v' \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter>\n            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>u \\<in> Z; v' = [r\\<rightarrow>0]u; u \\<turnstile> g;\n         v' \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> {[r\\<rightarrow>0]u |u.\n            u \\<in> Z \\<inter> {u. u \\<turnstile> g}} \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>u \\<in> Z; v' = [r\\<rightarrow>0]u; u \\<turnstile> g;\n         v' \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u \\<in> Z\n  v' = [r\\<rightarrow>0]u\n  u \\<turnstile> g\n  v' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "let ?R'= \"region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from \\<open>u \\<in> Z\\<close> closure_subs[OF A(4)] A(2)"], ["proof (chain)\npicking this:\n  u \\<in> Z\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W", "obtain u' R where u': \"u' \\<in> W\" \"u \\<in> R\" \"u' \\<in> R\" \"R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> Z\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  u \\<in> Z\n  Z \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W \\<noteq> {}}\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "then"], ["proof (chain)\npicking this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "unfolding \\<R>_def"], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from region_cover'[OF \\<R>_def' this]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "have R: \"[u]\\<^sub>\\<R> \\<in> \\<R>\" \"u \\<in> [u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> \\<in> \\<R> &&& u \\<in> [u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from step_r_complete_aux[OF \\<R>_def' A(3) this(2,1) A(1) v'(2)] v'"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l' \\<Longrightarrow>\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0 \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<turnstile> g\n  v' \\<turnstile> inv_of A l'", "have *: \"[u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\" \"?R' = region_set' ([u]\\<^sub>\\<R>) r 0\" \"?R' \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l' \\<Longrightarrow>\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0 \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<turnstile> g\n  v' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} &&&\n    region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    region_set' ([u]\\<^sub>\\<R>) r 0 &&&\n    region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from \\<R>_def' A(3)"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have \"collect_clkvt (trans_of A) \\<subseteq> X\" \"finite X\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with A(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X", "have r: \"set r \\<subseteq> X\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "unfolding collect_clkvt_def"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  \\<Union>\n   {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n    t \\<in> trans_of A}\n  \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from * v'(1) R(2)"], ["proof (chain)\npicking this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>", "have \"v' \\<in> ?R'\""], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n              0 \\<inter>\n             {u. u \\<turnstile> inv_of A l'}", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  {[r\\<rightarrow>0]v |v. v \\<in> [u]\\<^sub>\\<R>}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. v' \\<in> {[r\\<rightarrow>0]v |v.\n              v \\<in> ([u]\\<^sub>\\<R>) \\<inter>\n                      {u. u \\<turnstile> g}} \\<inter>\n             {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "moreover"], ["proof (state)\nthis:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "have \"A,\\<R> \\<turnstile> \\<langle>l,([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l',?R'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n         (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\\<rangle>", "using R(1) \\<R>_def' A(1,3) v'(2)"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  u \\<turnstile> g\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n         (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "thm valid_regions_distinct_spec"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with valid_regions_distinct_spec[OF *(3) 1(1) \\<open>v' \\<in> ?R'\\<close> 1(3)] region_unique_spec[OF u'(2,4)]"], ["proof (chain)\npicking this:\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>", "have 2: \"?R' = R'\" \"[u]\\<^sub>\\<R> = R\""], ["proof (prove)\nusing this:\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    R' &&&\n    [u]\\<^sub>\\<R> = R", "by auto"], ["proof (state)\nthis:\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with * u'"], ["proof (chain)\npicking this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R", "have *: \"[r\\<rightarrow>0]u' \\<in> ?R'\" \"u' \\<turnstile> g\" \"[r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n           0 \\<inter>\n          {u. u \\<turnstile> inv_of A l'} &&&\n    u' \\<turnstile> g &&& [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  {[r\\<rightarrow>0]v |v. v \\<in> [u]\\<^sub>\\<R>}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> {[r\\<rightarrow>0]v |v.\n           v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n          {u. u \\<turnstile> inv_of A l'} &&&\n    u' \\<turnstile> g &&& [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'", "by auto"], ["proof (state)\nthis:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with A(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'", "have \"A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>", "apply (intro step.intros(1))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow>\\<^bsub>?a4\\<^esub> \\<langle>l', [r\\<rightarrow>0]u'\\<rangle>", "apply rule"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> l \\<longrightarrow>\\<^bsup>?g5,?a4,?r5\\<^esup> l'\n 2. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> u' \\<turnstile> ?g5\n 3. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n 4. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> [r\\<rightarrow>0]u' = [?r5\\<rightarrow>0]u'", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from * u'(1)"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n  u' \\<in> W", "have \"[r\\<rightarrow>0]u' \\<in> ?W'\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n  u' \\<in> W\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> (W \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n          {u. u \\<turnstile> inv_of A l'}", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n  u' \\<in> W\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> {[r\\<rightarrow>0]u |u.\n           u \\<in> W \\<inter> {u. u \\<turnstile> g}} \\<inter>\n          {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "ultimately"], ["proof (chain)\npicking this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}", "have \"R' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "using *(1) 1(1) 2(1)"], ["proof (prove)\nusing this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  R' \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  R' \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> \\<Union>\n                    {R \\<in> \\<R>.\n                     R \\<inter>\n                     ((W \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}) \\<noteq>\n                     {}}", "by auto"], ["proof (state)\nthis:\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with 1(2)"], ["proof (chain)\npicking this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})", "show \"v \\<in> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                     {u.\nu \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                    {u. u \\<turnstile> inv_of A l'})", ".."], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W'", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                               {u. u \\<turnstile> inv_of A l'})\n       \\<subseteq> Closure\\<^sub>\\<alpha> W'", "by meson"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                              {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                             {u. u \\<turnstile> inv_of A l'})\n     \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_alpha_closure_involutive'_aux':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> W \\<subseteq> Z\n  \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and> W' \\<subseteq> Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     W \\<subseteq> Z\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Closure\\<^sub>\\<alpha> Z'\n                         \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                         W' \\<subseteq> Z'", "proof (induction rule: step_z.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "case A: (step_t_z A l Z)"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  W \\<subseteq> Z\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "let ?Z' = \"(Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "let ?W' = \"(W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "from \\<R>_def"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \\<R>_def': \"\\<R> = {region X I r |I r. valid_region X k I r}\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<R> = {region X I r |I r. valid_region X k I r}", "by simp"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "have step_z: \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l,?W'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                            {u. u \\<turnstile> inv_of A\n          l})\\<^sup>\\<up> \\<inter>\n                           {u. u \\<turnstile> inv_of A l}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "have \"Closure\\<^sub>\\<alpha> ?Z' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n                            {u. u \\<turnstile> inv_of A l})\n    \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l})", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "assume v: \"v \\<in> Closure\\<^sub>\\<alpha> ?Z'\""], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "then"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})", "obtain R' v' where 1: \"R' \\<in> \\<R>\" \"v \\<in> R'\" \"v' \\<in> R'\" \"v' \\<in> ?Z'\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                  {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v \\<in> \\<Union>\n           {R \\<in> \\<R>.\n            R \\<inter>\n            ((Z \\<inter>\n              {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n             {u. u \\<turnstile> inv_of A l}) \\<noteq>\n            {}}\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                  {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n           {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "then"], ["proof (chain)\npicking this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n           {u. u \\<turnstile> inv_of A l}", "obtain u d where\n      \"u \\<in> Z\" and v': \"v' = u \\<oplus> d\" \"u \\<turnstile> inv_of A l\" \"u \\<oplus> d \\<turnstile> inv_of A l\" \"0 \\<le> d\""], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n           {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. (\\<And>u d.\n        \\<lbrakk>u \\<in> Z; v' = u \\<oplus> d; u \\<turnstile> inv_of A l;\n         u \\<oplus> d \\<turnstile> inv_of A l; 0 \\<le> d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding zone_delay_def"], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> {u \\<oplus> d |u d.\n            u \\<in> Z \\<inter> {u. u \\<turnstile> inv_of A l} \\<and>\n            0 \\<le> d} \\<inter>\n           {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. (\\<And>u d.\n        \\<lbrakk>u \\<in> Z; v' = u \\<oplus> d; u \\<turnstile> inv_of A l;\n         u \\<oplus> d \\<turnstile> inv_of A l; 0 \\<le> d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with closure_subs[OF A(3)] A(1)"], ["proof (chain)\npicking this:\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d", "obtain u' R where u': \"u' \\<in> W\" \"u \\<in> R\" \"u' \\<in> R\" \"R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  Z \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W \\<noteq> {}}\n  u \\<in> Z\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  0 \\<le> d\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "then"], ["proof (chain)\npicking this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "unfolding \\<R>_def"], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from region_cover'[OF \\<R>_def' this]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "have R: \"[u]\\<^sub>\\<R> \\<in> \\<R>\" \"u \\<in> [u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> \\<in> \\<R> &&& u \\<in> [u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from SuccI2[OF \\<R>_def' this(2,1) v'(4), of \"[v']\\<^sub>\\<R>\"] v'(1)"], ["proof (chain)\npicking this:\n  [v']\\<^sub>\\<R> = [u \\<oplus> d]\\<^sub>\\<R> \\<Longrightarrow>\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  v' = u \\<oplus> d", "have v'1:\n      \"[v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\" \"[v']\\<^sub>\\<R> \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  [v']\\<^sub>\\<R> = [u \\<oplus> d]\\<^sub>\\<R> \\<Longrightarrow>\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  v' = u \\<oplus> d\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>) &&&\n    [v']\\<^sub>\\<R> \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from regions_closed'_spec[OF R(1,2) v'(4)] v'(1)"], ["proof (chain)\npicking this:\n  u \\<oplus> d \\<in> [u \\<oplus> d]\\<^sub>\\<R>\n  v' = u \\<oplus> d", "have v'2: \"v' \\<in> [v']\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<oplus> d \\<in> [u \\<oplus> d]\\<^sub>\\<R>\n  v' = u \\<oplus> d\n\ngoal (1 subgoal):\n 1. v' \\<in> [v']\\<^sub>\\<R>", "by simp"], ["proof (state)\nthis:\n  v' \\<in> [v']\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from A(2)"], ["proof (chain)\npicking this:\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have *:\n      \"\\<forall>(x, m)\\<in>clkp_set A. m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\"\n      \"collect_clkvt (trans_of A) \\<subseteq> X\"\n      \"finite X\""], ["proof (prove)\nusing this:\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>clkp_set A.\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat> &&&\n    collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from *(1) u'(2)"], ["proof (chain)\npicking this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<in> R", "have \"\\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l). m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\""], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\\<in>clkp_set A.\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "unfolding clkp_set_def collect_clki_def inv_of_def"], ["proof (prove)\nusing this:\n  \\<forall>(x, m)\n           \\<in>\\<Union> {collect_clock_pairs (snd A x) |x. True} \\<union>\n                collect_clkt (trans_of A).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n  u \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>(x, m)\\<in>collect_clock_pairs (snd A l).\n       m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>(x, m)\\<in>collect_clock_pairs (inv_of A l).\n     m \\<le> real (k x) \\<and> x \\<in> X \\<and> m \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from ccompatible[OF this, folded \\<R>_def'] v'1(2) v'2 v'(1,2,3) R"], ["proof (chain)\npicking this:\n  ccompatible \\<R> (inv_of A l)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  v' \\<in> [v']\\<^sub>\\<R>\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>", "have 3:\n      \"[v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\" \"([u]\\<^sub>\\<R>) \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\""], ["proof (prove)\nusing this:\n  ccompatible \\<R> (inv_of A l)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  v' \\<in> [v']\\<^sub>\\<R>\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace> &&&\n    [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>", "unfolding ccompatible_def ccval_def"], ["proof (prove)\nusing this:\n  \\<forall>R\\<in>\\<R>.\n     R \\<subseteq> {v. v \\<turnstile> inv_of A l} \\<or>\n     {v. v \\<turnstile> inv_of A l} \\<inter> R = {}\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  v' \\<in> [v']\\<^sub>\\<R>\n  v' = u \\<oplus> d\n  u \\<turnstile> inv_of A l\n  u \\<oplus> d \\<turnstile> inv_of A l\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. [v']\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l} &&&\n    [u]\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with A v'1 R(1) \\<R>_def'"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  W \\<subseteq> Z\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>", "have \"A,\\<R> \\<turnstile> \\<langle>l, ([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l,([v']\\<^sub>\\<R>)\\<rangle>\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  W \\<subseteq> Z\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> \\<in> \\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with valid_regions_distinct_spec[OF v'1(2) 1(1) v'2 1(3)] region_unique_spec[OF u'(2,4)]"], ["proof (chain)\npicking this:\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>", "have step_r: \"A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l, R'\\<rangle>\" and 2: \"[v']\\<^sub>\\<R> = R'\" \"[u]\\<^sub>\\<R> = R\""], ["proof (prove)\nusing this:\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l, [v']\\<^sub>\\<R>\\<rangle>\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l, R'\\<rangle> &&&\n    [v']\\<^sub>\\<R> = R' &&& [u]\\<^sub>\\<R> = R", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, R\\<rangle> \\<leadsto> \\<langle>l, R'\\<rangle>\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "from set_of_regions_spec[OF u'(4,3)] v'1(1) 2"], ["proof (chain)\npicking this:\n  ?R' \\<in> Succ \\<R> R \\<Longrightarrow>\n  \\<exists>t\\<ge>0. [u' \\<oplus> t]\\<^sub>\\<R> = ?R'\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R", "obtain t where t: \"t \\<ge> 0\" \"[u' \\<oplus> t]\\<^sub>\\<R> = R'\""], ["proof (prove)\nusing this:\n  ?R' \\<in> Succ \\<R> R \\<Longrightarrow>\n  \\<exists>t\\<ge>0. [u' \\<oplus> t]\\<^sub>\\<R> = ?R'\n  [v']\\<^sub>\\<R> \\<in> Succ \\<R> ([u]\\<^sub>\\<R>)\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>0 \\<le> t; [u' \\<oplus> t]\\<^sub>\\<R> = R'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with regions_closed'_spec[OF u'(4,3) this(1)] step_t_r(1)"], ["proof (chain)\npicking this:\n  u' \\<oplus> t \\<in> [u' \\<oplus> t]\\<^sub>\\<R>\n  \\<lbrakk>?\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   valid_abstraction ?A ?X (\\<lambda>x. real (?k x)); ?R \\<in> ?\\<R>;\n   ?R' \\<in> Succ ?\\<R> ?R; ?R \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>;\n   ?R' \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>\\<rbrakk>\n  \\<Longrightarrow> ?A,?\\<R> \\<turnstile> \\<langle>?l, ?R\\<rangle> \\<leadsto> \\<langle>?l, ?R'\\<rangle>\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'", "have *: \"u' \\<oplus> t \\<in> R'\""], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> [u' \\<oplus> t]\\<^sub>\\<R>\n  \\<lbrakk>?\\<R> = {region ?X I r |I r. valid_region ?X ?k I r};\n   valid_abstraction ?A ?X (\\<lambda>x. real (?k x)); ?R \\<in> ?\\<R>;\n   ?R' \\<in> Succ ?\\<R> ?R; ?R \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>;\n   ?R' \\<subseteq> \\<lbrace>inv_of ?A ?l\\<rbrace>\\<rbrakk>\n  \\<Longrightarrow> ?A,?\\<R> \\<turnstile> \\<langle>?l, ?R\\<rangle> \\<leadsto> \\<langle>?l, ?R'\\<rangle>\n  0 \\<le> t\n  [u' \\<oplus> t]\\<^sub>\\<R> = R'\n\ngoal (1 subgoal):\n 1. u' \\<oplus> t \\<in> R'", "by auto"], ["proof (state)\nthis:\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with t(1) 3 2 u'(1,3)"], ["proof (chain)\npicking this:\n  0 \\<le> t\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  u' \\<in> W\n  u' \\<in> R\n  u' \\<oplus> t \\<in> R'", "have \"A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l, u' \\<oplus> t\\<rangle>\" \"u' \\<oplus> t \\<in> ?W'\""], ["proof (prove)\nusing this:\n  0 \\<le> t\n  [v']\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [u]\\<^sub>\\<R> \\<subseteq> \\<lbrace>inv_of A l\\<rbrace>\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  u' \\<in> W\n  u' \\<in> R\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                              t\\<rangle> &&&\n    u' \\<oplus> t\n    \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n          {u. u \\<turnstile> inv_of A l}", "unfolding zone_delay_def ccval_def"], ["proof (prove)\nusing this:\n  0 \\<le> t\n  [v']\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}\n  [u]\\<^sub>\\<R> \\<subseteq> {v. v \\<turnstile> inv_of A l}\n  [v']\\<^sub>\\<R> = R'\n  [u]\\<^sub>\\<R> = R\n  u' \\<in> W\n  u' \\<in> R\n  u' \\<oplus> t \\<in> R'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                              t\\<rangle> &&&\n    u' \\<oplus> t\n    \\<in> {u \\<oplus> d |u d.\n           u \\<in> W \\<inter> {u. u \\<turnstile> inv_of A l} \\<and>\n           0 \\<le> d} \\<inter>\n          {u. u \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with * 1(1)"], ["proof (chain)\npicking this:\n  u' \\<oplus> t \\<in> R'\n  R' \\<in> \\<R>\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}", "have \"R' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> R'\n  R' \\<in> \\<R>\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l})", "unfolding cla_def"], ["proof (prove)\nusing this:\n  u' \\<oplus> t \\<in> R'\n  R' \\<in> \\<R>\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l,u' \\<oplus>\n                            t\\<rangle>\n  u' \\<oplus> t\n  \\<in> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n        {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> \\<Union>\n                    {R \\<in> \\<R>.\n                     R \\<inter>\n                     ((W \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}) \\<noteq>\n                     {}}", "by auto"], ["proof (state)\nthis:\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n {u. u \\<turnstile> inv_of A l})", "with 1(2)"], ["proof (chain)\npicking this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})", "show \"v \\<in> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n   {u. u \\<turnstile> inv_of A l})\n\ngoal (1 subgoal):\n 1. v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                     {u.\nu \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                                    {u. u \\<turnstile> inv_of A l})", ".."], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                   {u. u \\<turnstile> inv_of A\n                 l})\\<^sup>\\<up> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "moreover"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "have \"?W' \\<subseteq> ?Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n    {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> (Z \\<inter>\n                 {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                {u. u \\<turnstile> inv_of A l}", "using \\<open>W \\<subseteq> Z\\<close>"], ["proof (prove)\nusing this:\n  W \\<subseteq> Z\n\ngoal (1 subgoal):\n 1. (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n    {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> (Z \\<inter>\n                 {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                {u. u \\<turnstile> inv_of A l}", "unfolding zone_delay_def"], ["proof (prove)\nusing this:\n  W \\<subseteq> Z\n\ngoal (1 subgoal):\n 1. {u \\<oplus> d |u d.\n     u \\<in> W \\<inter> {u. u \\<turnstile> inv_of A l} \\<and>\n     0 \\<le> d} \\<inter>\n    {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> {u \\<oplus> d |u d.\n                 u \\<in> Z \\<inter> {u. u \\<turnstile> inv_of A l} \\<and>\n                 0 \\<le> d} \\<inter>\n                {u. u \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> (Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Closure\\<^sub>\\<alpha> Z\n                \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\n 2. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})\n  (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> (Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l}", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, (W \\<inter>\n                          {u. u \\<turnstile> inv_of A\n        l})\\<^sup>\\<up> \\<inter>\n                         {u. u \\<turnstile> inv_of A l}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n{u. u \\<turnstile> inv_of A l})\n  (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n  \\<subseteq> (Z \\<inter>\n               {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n              {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                {u. u \\<turnstile> inv_of A\n              l})\\<^sup>\\<up> \\<inter>\n                               {u. u \\<turnstile> inv_of A l})\n       \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n       W' \\<subseteq> (Z \\<inter>\n                       {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                      {u. u \\<turnstile> inv_of A l}", "by auto"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l, W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                              {u. u \\<turnstile> inv_of A\n            l})\\<^sup>\\<up> \\<inter>\n                             {u. u \\<turnstile> inv_of A l})\n     \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n     W' \\<subseteq> (Z \\<inter>\n                     {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                    {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "case A: (step_a_z A l g a r l' Z)"], ["proof (state)\nthis:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  W \\<subseteq> Z\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "let ?Z' = \"zone_set (Z \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "let ?W' = \"zone_set (W \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "from \\<R>_def"], ["proof (chain)\npicking this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}", "have \\<R>_def': \"\\<R> = {region X I r |I r. valid_region X k I r}\""], ["proof (prove)\nusing this:\n  \\<R> \\<equiv> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<R> = {region X I r |I r. valid_region X k I r}", "by simp"], ["proof (state)\nthis:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "from A(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have step_z: \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',?W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                            {u. u \\<turnstile> inv_of A l'}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "have \"Closure\\<^sub>\\<alpha> ?Z' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                            {u. u \\<turnstile> inv_of A l'})\n    \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'})", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "assume v: \"v \\<in> Closure\\<^sub>\\<alpha> ?Z'\""], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "then"], ["proof (chain)\npicking this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})", "obtain R' v' where 1: \"R' \\<in> \\<R>\" \"v \\<in> R'\" \"v' \\<in> R'\" \"v' \\<in> ?Z'\""], ["proof (prove)\nusing this:\n  v \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                  {u. u \\<turnstile> inv_of A l'}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v \\<in> \\<Union>\n           {R \\<in> \\<R>.\n            R \\<inter>\n            ((Z \\<inter>\n              {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n             {u. u \\<turnstile> inv_of A l'}) \\<noteq>\n            {}}\n\ngoal (1 subgoal):\n 1. (\\<And>R' v'.\n        \\<lbrakk>R' \\<in> \\<R>; v \\<in> R'; v' \\<in> R';\n         v' \\<in> (Z \\<inter>\n                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                  {u. u \\<turnstile> inv_of A l'}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter>\n            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "then"], ["proof (chain)\npicking this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter>\n            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n           {u. u \\<turnstile> inv_of A l'}", "obtain u where\n      \"u \\<in> Z\" and v': \"v' = [r\\<rightarrow>0]u\" \"u \\<turnstile> g\" \"v' \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> (Z \\<inter>\n            {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>u \\<in> Z; v' = [r\\<rightarrow>0]u; u \\<turnstile> g;\n         v' \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  R' \\<in> \\<R>\n  v \\<in> R'\n  v' \\<in> R'\n  v' \\<in> {[r\\<rightarrow>0]u |u.\n            u \\<in> Z \\<inter> {u. u \\<turnstile> g}} \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>u \\<in> Z; v' = [r\\<rightarrow>0]u; u \\<turnstile> g;\n         v' \\<turnstile> inv_of A l'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u \\<in> Z\n  v' = [r\\<rightarrow>0]u\n  u \\<turnstile> g\n  v' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "let ?R'= \"region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from \\<open>u \\<in> Z\\<close> closure_subs[OF A(4)] A(2)"], ["proof (chain)\npicking this:\n  u \\<in> Z\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W", "obtain u' R where u': \"u' \\<in> W\" \"u \\<in> R\" \"u' \\<in> R\" \"R \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> Z\n  Z \\<subseteq> Closure\\<^sub>\\<alpha> Z\n  Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cla_def"], ["proof (prove)\nusing this:\n  u \\<in> Z\n  Z \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<Union> {R \\<in> \\<R>. R \\<inter> Z \\<noteq> {}}\n  \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W \\<noteq> {}}\n\ngoal (1 subgoal):\n 1. (\\<And>u' R.\n        \\<lbrakk>u' \\<in> W; u \\<in> R; u' \\<in> R; R \\<in> \\<R>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "then"], ["proof (chain)\npicking this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>", "have \"\\<forall>x\\<in>X. 0 \\<le> u x\""], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "unfolding \\<R>_def"], ["proof (prove)\nusing this:\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> {region X I r |I r. valid_region X k I r}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>X. 0 \\<le> u x", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>x\\<in>X. 0 \\<le> u x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from region_cover'[OF \\<R>_def' this]"], ["proof (chain)\npicking this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>", "have R: \"[u]\\<^sub>\\<R> \\<in> \\<R>\" \"u \\<in> [u]\\<^sub>\\<R>\""], ["proof (prove)\nusing this:\n  u \\<in> [u]\\<^sub>\\<R>\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> \\<in> \\<R> &&& u \\<in> [u]\\<^sub>\\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from step_r_complete_aux[OF \\<R>_def' A(3) this(2,1) A(1) v'(2)] v'"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l' \\<Longrightarrow>\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0 \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<turnstile> g\n  v' \\<turnstile> inv_of A l'", "have *: \"[u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\" \"?R' = region_set' ([u]\\<^sub>\\<R>) r 0\" \"?R' \\<in> \\<R>\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u \\<turnstile> inv_of A l' \\<Longrightarrow>\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0 \\<and>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<turnstile> g\n  v' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g} &&&\n    region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    region_set' ([u]\\<^sub>\\<R>) r 0 &&&\n    region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<in> \\<R>", "by auto"], ["proof (state)\nthis:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from \\<R>_def' A(3)"], ["proof (chain)\npicking this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))", "have \"collect_clkvt (trans_of A) \\<subseteq> X\" \"finite X\""], ["proof (prove)\nusing this:\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  valid_abstraction A X (\\<lambda>x. real (k x))\n\ngoal (1 subgoal):\n 1. collect_clkvt (trans_of A) \\<subseteq> X &&& finite X", "by (auto elim: valid_abstraction.cases)"], ["proof (state)\nthis:\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with A(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X", "have r: \"set r \\<subseteq> X\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  collect_clkvt (trans_of A) \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "unfolding collect_clkvt_def"], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  \\<Union>\n   {set ((fst \\<circ> snd \\<circ> snd \\<circ> snd) t) |t.\n    t \\<in> trans_of A}\n  \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. set r \\<subseteq> X", "by fastforce"], ["proof (state)\nthis:\n  set r \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from * v'(1) R(2)"], ["proof (chain)\npicking this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>", "have \"v' \\<in> ?R'\""], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n              0 \\<inter>\n             {u. u \\<turnstile> inv_of A l'}", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  {[r\\<rightarrow>0]v |v. v \\<in> [u]\\<^sub>\\<R>}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  v' = [r\\<rightarrow>0]u\n  u \\<in> [u]\\<^sub>\\<R>\n\ngoal (1 subgoal):\n 1. v' \\<in> {[r\\<rightarrow>0]v |v.\n              v \\<in> ([u]\\<^sub>\\<R>) \\<inter>\n                      {u. u \\<turnstile> g}} \\<inter>\n             {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "moreover"], ["proof (state)\nthis:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "have \"A,\\<R> \\<turnstile> \\<langle>l,([u]\\<^sub>\\<R>)\\<rangle> \\<leadsto> \\<langle>l',?R'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n         (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\\<rangle>", "using R(1) \\<R>_def' A(1,3) v'(2)"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> \\<in> \\<R>\n  \\<R> = {region X I r |I r. valid_region X k I r}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  u \\<turnstile> g\n\ngoal (1 subgoal):\n 1. A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n         (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "thm valid_regions_distinct_spec"], ["proof (state)\nthis:\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with valid_regions_distinct_spec[OF *(3) 1(1) \\<open>v' \\<in> ?R'\\<close> 1(3)] region_unique_spec[OF u'(2,4)]"], ["proof (chain)\npicking this:\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>", "have 2: \"?R' = R'\" \"[u]\\<^sub>\\<R> = R\""], ["proof (prove)\nusing this:\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n  A,\\<R> \\<turnstile> \\<langle>l, [u]\\<^sub>\\<R>\\<rangle> \\<leadsto> \\<langle>l', region_set'\n       (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n      {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n     0 \\<inter>\n    {u. u \\<turnstile> inv_of A l'} =\n    R' &&&\n    [u]\\<^sub>\\<R> = R", "by auto"], ["proof (state)\nthis:\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with * u'"], ["proof (chain)\npicking this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R", "have *: \"[r\\<rightarrow>0]u' \\<in> ?R'\" \"u' \\<turnstile> g\" \"[r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\""], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  region_set' ([u]\\<^sub>\\<R>) r 0\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n           0 \\<inter>\n          {u. u \\<turnstile> inv_of A l'} &&&\n    u' \\<turnstile> g &&& [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'", "unfolding region_set'_def"], ["proof (prove)\nusing this:\n  [u]\\<^sub>\\<R> = ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  {[r\\<rightarrow>0]v |v. v \\<in> [u]\\<^sub>\\<R>}\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<in> \\<R>\n  u' \\<in> W\n  u \\<in> R\n  u' \\<in> R\n  R \\<in> \\<R>\n  {[r\\<rightarrow>0]v |v.\n   v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n  [u]\\<^sub>\\<R> = R\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> {[r\\<rightarrow>0]v |v.\n           v \\<in> ([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}} \\<inter>\n          {u. u \\<turnstile> inv_of A l'} &&&\n    u' \\<turnstile> g &&& [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'", "by auto"], ["proof (state)\nthis:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with A(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'", "have \"A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>", "apply (intro step.intros(1))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow>\\<^bsub>?a4\\<^esub> \\<langle>l', [r\\<rightarrow>0]u'\\<rangle>", "apply rule"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> l \\<longrightarrow>\\<^bsup>?g5,?a4,?r5\\<^esup> l'\n 2. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> u' \\<turnstile> ?g5\n 3. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n 4. \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n     [r\\<rightarrow>0]u'\n     \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'};\n     u' \\<turnstile> g;\n     [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\\<rbrakk>\n    \\<Longrightarrow> [r\\<rightarrow>0]u' = [?r5\\<rightarrow>0]u'", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "from * u'(1)"], ["proof (chain)\npicking this:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n  u' \\<in> W", "have \"[r\\<rightarrow>0]u' \\<in> ?W'\""], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n  u' \\<in> W\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> (W \\<inter>\n           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n          {u. u \\<turnstile> inv_of A l'}", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  u' \\<turnstile> g\n  [r\\<rightarrow>0]u' \\<turnstile> inv_of A l'\n  u' \\<in> W\n\ngoal (1 subgoal):\n 1. [r\\<rightarrow>0]u'\n    \\<in> {[r\\<rightarrow>0]u |u.\n           u \\<in> W \\<inter> {u. u \\<turnstile> g}} \\<inter>\n          {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "ultimately"], ["proof (chain)\npicking this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}", "have \"R' \\<subseteq> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "using *(1) 1(1) 2(1)"], ["proof (prove)\nusing this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  R' \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'})", "unfolding cla_def"], ["proof (prove)\nusing this:\n  v' \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n            0 \\<inter>\n           {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> \\<langle>l, u'\\<rangle> \\<rightarrow> \\<langle>l',[r\\<rightarrow>0]u'\\<rangle>\n  [r\\<rightarrow>0]u'\n  \\<in> (W \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  [r\\<rightarrow>0]u'\n  \\<in> region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r\n         0 \\<inter>\n        {u. u \\<turnstile> inv_of A l'}\n  R' \\<in> \\<R>\n  region_set' (([u]\\<^sub>\\<R>) \\<inter> {u. u \\<turnstile> g}) r 0 \\<inter>\n  {u. u \\<turnstile> inv_of A l'} =\n  R'\n\ngoal (1 subgoal):\n 1. R' \\<subseteq> \\<Union>\n                    {R \\<in> \\<R>.\n                     R \\<inter>\n                     ((W \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}) \\<noteq>\n                     {}}", "by auto"], ["proof (state)\nthis:\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Closure\\<^sub>\\<alpha> ((Z \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'}) \\<Longrightarrow>\n       x \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n {u. u \\<turnstile> inv_of A l'})", "with 1(2)"], ["proof (chain)\npicking this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})", "show \"v \\<in> Closure\\<^sub>\\<alpha> ?W'\""], ["proof (prove)\nusing this:\n  v \\<in> R'\n  R' \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n   {u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                     {u.\nu \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                    {u. u \\<turnstile> inv_of A l'})", ".."], ["proof (state)\nthis:\n  v \\<in> Closure\\<^sub>\\<alpha> ((W \\<inter>\n                                   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                                  {u. u \\<turnstile> inv_of A l'})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "moreover"], ["proof (state)\nthis:\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "have \"?W' \\<subseteq> ?Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (W \\<inter>\n     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<subseteq> (Z \\<inter>\n                 {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                {u. u \\<turnstile> inv_of A l'}", "using \\<open>W \\<subseteq> Z\\<close>"], ["proof (prove)\nusing this:\n  W \\<subseteq> Z\n\ngoal (1 subgoal):\n 1. (W \\<inter>\n     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<subseteq> (Z \\<inter>\n                 {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                {u. u \\<turnstile> inv_of A l'}", "unfolding zone_set_def"], ["proof (prove)\nusing this:\n  W \\<subseteq> Z\n\ngoal (1 subgoal):\n 1. {[r\\<rightarrow>0]u |u.\n     u \\<in> W \\<inter> {u. u \\<turnstile> g}} \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<subseteq> {[r\\<rightarrow>0]u |u.\n                 u \\<in> Z \\<inter> {u. u \\<turnstile> g}} \\<inter>\n                {u. u \\<turnstile> inv_of A l'}", "by auto"], ["proof (state)\nthis:\n  (W \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<subseteq> (Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>A l g a r l' Z.\n       \\<lbrakk>A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l';\n        Closure\\<^sub>\\<alpha> Z \\<subseteq> Closure\\<^sub>\\<alpha> W;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        W \\<subseteq> Z\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> ((Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'})\n                            \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n                            W' \\<subseteq> (Z \\<inter>\n      {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n     {u. u \\<turnstile> inv_of A l'}", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})\n  (W \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<subseteq> (Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'}", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'})\n  \\<subseteq> Closure\\<^sub>\\<alpha> ((W \\<inter>\n {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n{u. u \\<turnstile> inv_of A l'})\n  (W \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  \\<subseteq> (Z \\<inter>\n               {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n              {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                                {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                               {u. u \\<turnstile> inv_of A l'})\n       \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n       W' \\<subseteq> (Z \\<inter>\n                       {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                      {u. u \\<turnstile> inv_of A l'}", "by meson"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> ((Z \\<inter>\n                              {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                             {u. u \\<turnstile> inv_of A l'})\n     \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n     W' \\<subseteq> (Z \\<inter>\n                     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                    {u. u \\<turnstile> inv_of A l'}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_alt:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z''\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z'\\<rangle>;\n     A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>", "by (induction rule: steps_z.induct) auto"], ["", "lemma steps_z_alpha_V: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> Z' \\<subseteq> V", "apply (induction rule: steps_z_alpha.induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A l Z. Z \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> V\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> Z'' \\<subseteq> V", "using closure_V"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> ?Z \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<And>A l Z. Z \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> V\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> Z'' \\<subseteq> V", "by auto"], ["", "lemma steps_z_alpha_closure_involutive':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> Z'''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z'' \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and> Z''' \\<subseteq> Z''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z'''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                         Closure\\<^sub>\\<alpha> Z''\n                         \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                         Z''' \\<subseteq> Z''", "proof (induction A l Z l' Z' arbitrary: Z'' l'' rule: steps_z_alpha.induct, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z Z'' l''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''\n 2. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "case refl"], ["proof (state)\nthis:\n  A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>\n  valid_abstraction A_ X (\\<lambda>x. real (k x))\n  Z_ \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<And>A l Z Z'' l''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''\n 2. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "from this(1)"], ["proof (chain)\npicking this:\n  A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>Z'''.\n       A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> Z''\n       \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n       Z''' \\<subseteq> Z''", "by blast"], ["proof (state)\nthis:\n  \\<exists>Z'''.\n     A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n     Z''' \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "case A: (2 A l Z l' Z' l'' Z'' Z''a l''a)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>?l''2, ?Z''2\\<rangle>;\n   valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z'''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>?l''2, Z'''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> ?Z''2\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                       Z''' \\<subseteq> ?Z''2\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "from A(3)"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>", "obtain \\<Z> where Z'': \"Z'' = Closure\\<^sub>\\<alpha> \\<Z>\" \"A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',\\<Z>\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Z>.\n        \\<lbrakk>Z'' = Closure\\<^sub>\\<alpha> \\<Z>;\n         A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Z'' = Closure\\<^sub>\\<alpha> \\<Z>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "from A(2)[OF Z''(2) A(5,6)]"], ["proof (chain)\npicking this:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> \\<Z>\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n     Z''' \\<subseteq> \\<Z>", "obtain Z''' where Z''':\n    \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle>\" \"Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\" \"Z''' \\<subseteq> \\<Z>\""], ["proof (prove)\nusing this:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> \\<Z>\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n     Z''' \\<subseteq> \\<Z>\n\ngoal (1 subgoal):\n 1. (\\<And>Z'''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>;\n         Closure\\<^sub>\\<alpha> \\<Z>\n         \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n         Z''' \\<subseteq> \\<Z>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  Z''' \\<subseteq> \\<Z>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "from closure_subs"], ["proof (chain)\npicking this:\n  ?Z \\<subseteq> V \\<Longrightarrow>\n  ?Z \\<subseteq> Closure\\<^sub>\\<alpha> ?Z", "have *:\n    \"Z''' \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>\""], ["proof (prove)\nusing this:\n  ?Z \\<subseteq> V \\<Longrightarrow>\n  ?Z \\<subseteq> Closure\\<^sub>\\<alpha> ?Z\n\ngoal (1 subgoal):\n 1. Z''' \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>", "by (metis A(1,6) Z'''(3) Z''(2) step_z_V steps_z_alpha_V subset_trans)"], ["proof (state)\nthis:\n  Z''' \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "from A(4) Z''"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n  Z'' = Closure\\<^sub>\\<alpha> \\<Z>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>", "have \"A \\<turnstile> \\<langle>l'', Closure\\<^sub>\\<alpha> \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a,Z''a\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n  Z'' = Closure\\<^sub>\\<alpha> \\<Z>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l'', Closure\\<^sub>\\<alpha> \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l'', Closure\\<^sub>\\<alpha> \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "from steps_z_alpha_closure_involutive'_aux'[OF this(1) _ A(5) closure_V *] Z'''(2,3)"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> \\<Z>\n  \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<Longrightarrow>\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''a\n     \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n     W' \\<subseteq> Z''a\n  Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  Z''' \\<subseteq> \\<Z>", "obtain W'\n    where ***: \"A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a,W'\\<rangle>\" \"Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W'\" \"W' \\<subseteq> Z''a\""], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> \\<Z>\n  \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<Longrightarrow>\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''a\n     \\<subseteq> Closure\\<^sub>\\<alpha> W' \\<and>\n     W' \\<subseteq> Z''a\n  Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  Z''' \\<subseteq> \\<Z>\n\ngoal (1 subgoal):\n 1. (\\<And>W'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>;\n         Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W';\n         W' \\<subseteq> Z''a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: closure_involutive)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  W' \\<subseteq> Z''a\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "with Z'''(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  W' \\<subseteq> Z''a", "have \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a,W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  W' \\<subseteq> Z''a\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>", "by (blast intro: steps_z_alt)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                                Z''' \\<subseteq> Z'';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n                            Z''' \\<subseteq> Z''a", "with ***(2,3)"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  W' \\<subseteq> Z''a\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  W' \\<subseteq> Z''a\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>Z'''.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> Z''a\n       \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n       Z''' \\<subseteq> Z''a", "by blast"], ["proof (state)\nthis:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''a\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n     Z''' \\<subseteq> Z''a\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Old proof using Bouyer's calculation\\<close>"], ["", "lemma steps_z_alpha_closure_involutive'':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> Z'''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z'' \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z'''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                         Closure\\<^sub>\\<alpha> Z''\n                         \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "proof (induction A l Z l' Z' arbitrary: Z'' l'' rule: steps_z_alpha.induct, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z Z'' l''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n 2. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "case refl"], ["proof (state)\nthis:\n  A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>\n  valid_abstraction A_ X (\\<lambda>x. real (k x))\n  Z_ \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<And>A l Z Z'' l''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n 2. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from this(1)"], ["proof (chain)\npicking this:\n  A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>Z'''.\n       A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> Z'' \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "by blast"], ["proof (state)\nthis:\n  \\<exists>Z'''.\n     A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z'' \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "case A: (2 A l Z l' Z' l'' Z'' Z''a l''a)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>?l''2, ?Z''2\\<rangle>;\n   valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z'''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>?l''2, Z'''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> ?Z''2\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from A(3)"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>", "obtain \\<Z> where Z'': \"Z'' = Closure\\<^sub>\\<alpha> \\<Z>\" \"A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',\\<Z>\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Z>.\n        \\<lbrakk>Z'' = Closure\\<^sub>\\<alpha> \\<Z>;\n         A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Z'' = Closure\\<^sub>\\<alpha> \\<Z>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from A(2)[OF Z''(2) A(5,6)]"], ["proof (chain)\npicking this:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "obtain Z''' where Z''':\n    \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle>\" \"Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\""], ["proof (prove)\nusing this:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n\ngoal (1 subgoal):\n 1. (\\<And>Z'''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>;\n         Closure\\<^sub>\\<alpha> \\<Z>\n         \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  Closure\\<^sub>\\<alpha> \\<Z> \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from steps_z_alpha_V[OF A(1,6)] step_z_V[OF Z''(2)]"], ["proof (chain)\npicking this:\n  Z' \\<subseteq> V\n  Z' \\<subseteq> V \\<Longrightarrow> \\<Z> \\<subseteq> V", "have *: \"\\<Z> \\<subseteq> V\""], ["proof (prove)\nusing this:\n  Z' \\<subseteq> V\n  Z' \\<subseteq> V \\<Longrightarrow> \\<Z> \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<Z> \\<subseteq> V", "by blast"], ["proof (state)\nthis:\n  \\<Z> \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from A Z''"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>?l''2, ?Z''2\\<rangle>;\n   valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z'''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>?l''2, Z'''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> ?Z''2\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  Z'' = Closure\\<^sub>\\<alpha> \\<Z>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>", "have \"A \\<turnstile> \\<langle>l'', Closure\\<^sub>\\<alpha> \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a,Z''a\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>?l''2, ?Z''2\\<rangle>;\n   valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z'''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>?l''2, Z'''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> ?Z''2\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  Z'' = Closure\\<^sub>\\<alpha> \\<Z>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', \\<Z>\\<rangle>\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l'', Closure\\<^sub>\\<alpha> \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l'', Closure\\<^sub>\\<alpha> \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from calc[OF A(5) * this]"], ["proof (chain)\npicking this:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l'', \\<Z>\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l''a, Z''\\<rangle> \\<and>\n     Z''a \\<subseteq> Z''", "obtain \\<Z>' where **:\n    \"A \\<turnstile> \\<langle>l'', \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a,\\<Z>'\\<rangle>\" \"Z''a \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>'\""], ["proof (prove)\nusing this:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l'', \\<Z>\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l''a, Z''\\<rangle> \\<and>\n     Z''a \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Z>'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l'', \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a, \\<Z>'\\<rangle>;\n         Z''a \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l'', \\<Z>\\<rangle> \\<leadsto> \\<langle>l''a, \\<Z>'\\<rangle>\n  Z''a \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>'\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "from steps_z_alpha_closure_involutive'_aux[OF this(1) Z'''(2) A(5) *]"], ["proof (chain)\npicking this:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'", "obtain W' where ***:\n    \"A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a,W'\\<rangle>\" \"Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'\""], ["proof (prove)\nusing this:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal (1 subgoal):\n 1. (\\<And>W'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>;\n         Closure\\<^sub>\\<alpha> \\<Z>'\n         \\<subseteq> Closure\\<^sub>\\<alpha> W'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>\n  Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "with Z'''(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>\n  Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'", "have \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a,W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  A \\<turnstile> \\<langle>l'', Z'''\\<rangle> \\<leadsto> \\<langle>l''a, W'\\<rangle>\n  Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>", "by (blast intro: steps_z_alt)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z'' Z''a l''a.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<And>Z'' l''.\n           \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''\\<rangle>;\n            valid_abstraction A X (\\<lambda>x. real (k x));\n            Z \\<subseteq> V\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Z'''.\n                                A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n                                Closure\\<^sub>\\<alpha> Z''\n                                \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        A \\<turnstile> \\<langle>l'', Z''\\<rangle> \\<leadsto> \\<langle>l''a, Z''a\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z'''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''a\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "with closure_involutive'[OF **(2)] ***(2)"], ["proof (chain)\npicking this:\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>'\n  Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> \\<Z>'\n  Closure\\<^sub>\\<alpha> \\<Z>' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, W'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>Z'''.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> Z'''", "by blast"], ["proof (state)\nthis:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l''a, Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_alpha_closure_involutive:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z''\\<rangle> \\<and> Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and> Z'' \\<subseteq> Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x));\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Closure\\<^sub>\\<alpha> Z'\n                         \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                         Z'' \\<subseteq> Z'", "proof (induction A l Z l' Z' rule: steps_z_alpha.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l, Z''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                            Z'' \\<subseteq> Z\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "case refl"], ["proof (state)\nthis:\n  valid_abstraction A_ X (\\<lambda>x. real (k x))\n  Z_ \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l, Z''\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                            Z'' \\<subseteq> Z\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Z''.\n       A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>* \\<langle>l_, Z''\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> Z_\n       \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n       Z'' \\<subseteq> Z_", "by blast"], ["proof (state)\nthis:\n  \\<exists>Z''.\n     A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>* \\<langle>l_, Z''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z_ \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n     Z'' \\<subseteq> Z_\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "case 2: (step A l Z l' Z' l'' Z'')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n   Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> Z'\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                       Z'' \\<subseteq> Z'\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "then"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n   Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> Z'\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                       Z'' \\<subseteq> Z'\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V", "obtain Z''a where *: \"A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'',Z''a\\<rangle>\" \"Z'' = Closure\\<^sub>\\<alpha> Z''a\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n   Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''.\n                       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                       Closure\\<^sub>\\<alpha> Z'\n                       \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                       Z'' \\<subseteq> Z'\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n\ngoal (1 subgoal):\n 1. (\\<And>Z''a.\n        \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''a\\<rangle>;\n         Z'' = Closure\\<^sub>\\<alpha> Z''a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''a\\<rangle>\n  Z'' = Closure\\<^sub>\\<alpha> Z''a\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "from steps_z_alpha_closure_involutive'[OF 2(1) this(1) 2(4,5)]"], ["proof (chain)\npicking this:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''a\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n     Z''' \\<subseteq> Z''a", "obtain Z''' where Z''':\n    \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'',Z'''\\<rangle>\" \"Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\" \"Z''' \\<subseteq> Z''a\""], ["proof (prove)\nusing this:\n  \\<exists>Z'''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''a\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''' \\<and>\n     Z''' \\<subseteq> Z''a\n\ngoal (1 subgoal):\n 1. (\\<And>Z'''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>;\n         Closure\\<^sub>\\<alpha> Z''a\n         \\<subseteq> Closure\\<^sub>\\<alpha> Z''';\n         Z''' \\<subseteq> Z''a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  Z''' \\<subseteq> Z''a\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "have \"Z''' \\<subseteq> Z''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z''' \\<subseteq> Z''", "by (metis *(1,2) 2(1,5) Z'''(3) closure_subs step_z_V steps_z_alpha_V subset_trans)"], ["proof (state)\nthis:\n  Z''' \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''.\n                             A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                             Closure\\<^sub>\\<alpha> Z'\n                             \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n                             Z'' \\<subseteq> Z';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Closure\\<^sub>\\<alpha> Z''\n                            \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n                            Z''a \\<subseteq> Z''", "with * closure_involutive Z'''"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''a\\<rangle>\n  Z'' = Closure\\<^sub>\\<alpha> Z''a\n  Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> ?Z =\n  Closure\\<^sub>\\<alpha> ?Z\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  Z''' \\<subseteq> Z''a\n  Z''' \\<subseteq> Z''", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto> \\<langle>l'', Z''a\\<rangle>\n  Z'' = Closure\\<^sub>\\<alpha> Z''a\n  Closure\\<^sub>\\<alpha> Closure\\<^sub>\\<alpha> ?Z =\n  Closure\\<^sub>\\<alpha> ?Z\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z'''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z''a \\<subseteq> Closure\\<^sub>\\<alpha> Z'''\n  Z''' \\<subseteq> Z''a\n  Z''' \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. \\<exists>Z''a.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n       Closure\\<^sub>\\<alpha> Z''\n       \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n       Z''a \\<subseteq> Z''", "by auto"], ["proof (state)\nthis:\n  \\<exists>Z''a.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l'', Z''a\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z''\n     \\<subseteq> Closure\\<^sub>\\<alpha> Z''a \\<and>\n     Z''a \\<subseteq> Z''\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_V:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> Z' \\<subseteq> V", "apply (induction rule: steps_z.induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A l Z. Z \\<subseteq> V \\<Longrightarrow> Z \\<subseteq> V\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        Z' \\<subseteq> V \\<Longrightarrow> Z'' \\<subseteq> V;\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> Z'' \\<subseteq> V", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        Z' \\<subseteq> V \\<Longrightarrow> Z'' \\<subseteq> V;\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> Z'' \\<subseteq> V", "using step_z_V"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<turnstile> \\<langle>?l, ?Z\\<rangle> \\<leadsto> \\<langle>?l', ?Z'\\<rangle>;\n   ?Z \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> ?Z' \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        Z' \\<subseteq> V \\<Longrightarrow> Z'' \\<subseteq> V;\n        Z \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> Z'' \\<subseteq> V", "by metis"], ["", "lemma steps_z_alpha_sound:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {}\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'", "case 1"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  Z' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'", "from steps_z_alpha_closure_involutive[OF 1(1-3)]"], ["proof (chain)\npicking this:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n     Z'' \\<subseteq> Z'", "obtain Z'' where\n    Z'': \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z''\\<rangle>\" \"Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z''\" \"Z'' \\<subseteq> Z'\""], ["proof (prove)\nusing this:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n     Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z'' \\<and>\n     Z'' \\<subseteq> Z'\n\ngoal (1 subgoal):\n 1. (\\<And>Z''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle>;\n         Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z'';\n         Z'' \\<subseteq> Z'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z''\n  Z'' \\<subseteq> Z'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'", "with 1(4) cla_empty_iff[OF steps_z_alpha_V[OF 1(1)], OF 1(3)]\n    cla_empty_iff[OF steps_z_V, OF this(1) 1(3)]"], ["proof (chain)\npicking this:\n  Z' \\<noteq> {}\n  (Z' = {}) = (Closure\\<^sub>\\<alpha> Z' = {})\n  (Z'' = {}) = (Closure\\<^sub>\\<alpha> Z'' = {})\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z''\n  Z'' \\<subseteq> Z'", "have \"Z'' \\<noteq> {}\""], ["proof (prove)\nusing this:\n  Z' \\<noteq> {}\n  (Z' = {}) = (Closure\\<^sub>\\<alpha> Z' = {})\n  (Z'' = {}) = (Closure\\<^sub>\\<alpha> Z'' = {})\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z''\n  Z'' \\<subseteq> Z'\n\ngoal (1 subgoal):\n 1. Z'' \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  Z'' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'", "with Z''"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z''\n  Z'' \\<subseteq> Z'\n  Z'' \\<noteq> {}", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle>\n  Closure\\<^sub>\\<alpha> Z' \\<subseteq> Closure\\<^sub>\\<alpha> Z''\n  Z'' \\<subseteq> Z'\n  Z'' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>Z''.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n       Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'", "by auto"], ["proof (state)\nthis:\n  \\<exists>Z''.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z''\\<rangle> \\<and>\n     Z'' \\<noteq> {} \\<and> Z'' \\<subseteq> Z'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma step_z_mono:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> W \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle> \\<and> Z' \\<subseteq> W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "proof (cases rule: step_z.cases, assumption, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; l' = l;\n     Z' =\n     (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'\n 2. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "case A: 1"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  l' = l\n  Z' =\n  (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; l' = l;\n     Z' =\n     (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'\n 2. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "let ?W' = \"(W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter> {u. u \\<turnstile> inv_of A l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; l' = l;\n     Z' =\n     (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'\n 2. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "from A"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  l' = l\n  Z' =\n  (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}", "have \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',?W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  l' = l\n  Z' =\n  (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n  {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                             {u. u \\<turnstile> inv_of A\n           l})\\<^sup>\\<up> \\<inter>\n                            {u. u \\<turnstile> inv_of A l}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; l' = l;\n     Z' =\n     (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'\n 2. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l}\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; l' = l;\n     Z' =\n     (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'\n 2. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "have \"Z' \\<subseteq> ?W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z' \\<subseteq> (W \\<inter>\n                    {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                   {u. u \\<turnstile> inv_of A l}", "apply (subst A(4))"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n    {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> (W \\<inter>\n                 {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                {u. u \\<turnstile> inv_of A l}", "apply (rule subset_int_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>\n    \\<subseteq> (W \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up>", "apply (rule zone_delay_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<inter> {u. u \\<turnstile> inv_of A l}\n    \\<subseteq> W \\<inter> {u. u \\<turnstile> inv_of A l}", "apply (rule subset_int_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> W", "apply (rule A(2))"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  Z' \\<subseteq> (W \\<inter>\n                  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                 {u. u \\<turnstile> inv_of A l}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; l' = l;\n     Z' =\n     (Z \\<inter> {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n     {u. u \\<turnstile> inv_of A l}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'\n 2. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l}\\<rangle>\n  Z' \\<subseteq> (W \\<inter>\n                  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                 {u. u \\<turnstile> inv_of A l}", "show ?thesis"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> inv_of A\n         l})\\<^sup>\\<up> \\<inter>\n                          {u. u \\<turnstile> inv_of A l}\\<rangle>\n  Z' \\<subseteq> (W \\<inter>\n                  {u. u \\<turnstile> inv_of A l})\\<^sup>\\<up> \\<inter>\n                 {u. u \\<turnstile> inv_of A l}\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n       Z' \\<subseteq> W'", "by auto"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n     Z' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "case A: (2 g a r)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  Z' =\n  (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "let ?W' = \"zone_set (W \\<inter> {u. u \\<turnstile> g}) r \\<inter> {u. u \\<turnstile> inv_of A l'}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "from A"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  Z' =\n  (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'", "have \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',?W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  Z' =\n  (Z \\<inter>\n   {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n  {u. u \\<turnstile> inv_of A l'}\n  A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                             {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                            {u. u \\<turnstile> inv_of A l'}\\<rangle>", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "have \"Z' \\<subseteq> ?W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z' \\<subseteq> (W \\<inter>\n                    {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                   {u. u \\<turnstile> inv_of A l'}", "apply (subst A(3))"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Z \\<inter>\n     {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n    {u. u \\<turnstile> inv_of A l'}\n    \\<subseteq> (W \\<inter>\n                 {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                {u. u \\<turnstile> inv_of A l'}", "apply (rule subset_int_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Z \\<inter> {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>\n    \\<subseteq> (W \\<inter>\n                 {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub>", "apply (rule zone_set_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<inter> {u. u \\<turnstile> g}\n    \\<subseteq> W \\<inter> {u. u \\<turnstile> g}", "apply (rule subset_int_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> W", "apply (rule A(2))"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  Z' \\<subseteq> (W \\<inter>\n                  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                 {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<And>g a r.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        Z \\<subseteq> W;\n        Z' =\n        (Z \\<inter>\n         {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n        {u. u \\<turnstile> inv_of A l'};\n        A \\<turnstile> l \\<longrightarrow>\\<^bsup>g,a,r\\<^esup> l'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n                            Z' \\<subseteq> W'", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  Z' \\<subseteq> (W \\<inter>\n                  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                 {u. u \\<turnstile> inv_of A l'}", "show ?thesis"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', (W \\<inter>\n                           {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                          {u. u \\<turnstile> inv_of A l'}\\<rangle>\n  Z' \\<subseteq> (W \\<inter>\n                  {u. u \\<turnstile> g})\\<^bsub>r \\<rightarrow> 0\\<^esub> \\<inter>\n                 {u. u \\<turnstile> inv_of A l'}\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n       Z' \\<subseteq> W'", "by auto"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n     Z' \\<subseteq> W'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma step_z_alpha_mono:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> W \\<Longrightarrow> W \\<subseteq> V \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l',W'\\<rangle> \\<and> Z' \\<subseteq> W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "proof goal_cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "case 1"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  W \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "then"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  W \\<subseteq> V", "obtain Z'' where *: \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l',Z''\\<rangle>\" \"Z' = Closure\\<^sub>\\<alpha> Z''\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>\n  Z \\<subseteq> W\n  W \\<subseteq> V\n\ngoal (1 subgoal):\n 1. (\\<And>Z''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle>;\n         Z' = Closure\\<^sub>\\<alpha> Z''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z''\\<rangle>\n  Z' = Closure\\<^sub>\\<alpha> Z''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "from step_z_mono[OF this(1) 1(2)]"], ["proof (chain)\npicking this:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n     Z'' \\<subseteq> W'", "obtain W' where \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l',W'\\<rangle>\" \"Z'' \\<subseteq> W'\""], ["proof (prove)\nusing this:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle> \\<and>\n     Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. (\\<And>W'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>;\n         Z'' \\<subseteq> W'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "with *(2)"], ["proof (chain)\npicking this:\n  Z' = Closure\\<^sub>\\<alpha> Z''\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'", "have \"Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'\""], ["proof (prove)\nusing this:\n  Z' = Closure\\<^sub>\\<alpha> Z''\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'", "unfolding cla_def"], ["proof (prove)\nusing this:\n  Z' = \\<Union> {R \\<in> \\<R>. R \\<inter> Z'' \\<noteq> {}}\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. Z' \\<subseteq> \\<Union> {R \\<in> \\<R>. R \\<inter> W' \\<noteq> {}}", "by auto"], ["proof (state)\nthis:\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto> \\<langle>l', W'\\<rangle>\n  Z'' \\<subseteq> W'\n  Z' \\<subseteq> Closure\\<^sub>\\<alpha> W'\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n       Z' \\<subseteq> W'", "by blast"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', W'\\<rangle> \\<and>\n     Z' \\<subseteq> W'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_alpha_mono:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> Z \\<subseteq> W \\<Longrightarrow> W \\<subseteq> V \\<Longrightarrow> \\<exists> W'. A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',W'\\<rangle> \\<and> Z' \\<subseteq> W'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n     Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n    \\<Longrightarrow> \\<exists>W'.\n                         A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                         Z' \\<subseteq> W'", "proof (induction rule: steps_z_alpha.induct, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l, W'\\<rangle> \\<and>\n                            Z \\<subseteq> W'\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>W'.\n                             A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                             Z' \\<subseteq> W';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n                            Z'' \\<subseteq> W'", "case refl"], ["proof (state)\nthis:\n  Z_ \\<subseteq> W\n  W \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l, W'\\<rangle> \\<and>\n                            Z \\<subseteq> W'\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>W'.\n                             A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                             Z' \\<subseteq> W';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n                            Z'' \\<subseteq> W'", "then"], ["proof (chain)\npicking this:\n  Z_ \\<subseteq> W\n  W \\<subseteq> V", "show ?case"], ["proof (prove)\nusing this:\n  Z_ \\<subseteq> W\n  W \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A_ \\<turnstile> \\<langle>l_, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l_, W'\\<rangle> \\<and>\n       Z_ \\<subseteq> W'", "by auto"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A_ \\<turnstile> \\<langle>l_, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l_, W'\\<rangle> \\<and>\n     Z_ \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>W'.\n                             A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                             Z' \\<subseteq> W';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n                            Z'' \\<subseteq> W'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>W'.\n                             A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                             Z' \\<subseteq> W';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n                            Z'' \\<subseteq> W'", "case (2 A l Z l' Z' l'' Z'')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W'.\n                       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                       Z' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  Z \\<subseteq> W\n  W \\<subseteq> V\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>W'.\n                             A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                             Z' \\<subseteq> W';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n                            Z'' \\<subseteq> W'", "then"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W'.\n                       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                       Z' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  Z \\<subseteq> W\n  W \\<subseteq> V", "obtain W' where \"A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',W'\\<rangle>\" \"Z' \\<subseteq> W'\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>\n  \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W'.\n                       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                       Z' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>\n  Z \\<subseteq> W\n  W \\<subseteq> V\n\ngoal (1 subgoal):\n 1. (\\<And>W'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle>;\n         Z' \\<subseteq> W'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle>\n  Z' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z'\\<rangle>;\n        \\<lbrakk>Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>W'.\n                             A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle> \\<and>\n                             Z' \\<subseteq> W';\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', Z''\\<rangle>;\n        Z \\<subseteq> W; W \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W'.\n                            A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n                            Z'' \\<subseteq> W'", "with step_z_alpha_mono[OF 2(3) this(2) steps_z_alpha_V[OF this(1) 2(5)]]"], ["proof (chain)\npicking this:\n  \\<exists>W'a.\n     A \\<turnstile> \\<langle>l', W'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', W'a\\<rangle> \\<and>\n     Z'' \\<subseteq> W'a\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle>\n  Z' \\<subseteq> W'", "show ?case"], ["proof (prove)\nusing this:\n  \\<exists>W'a.\n     A \\<turnstile> \\<langle>l', W'\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l'', W'a\\<rangle> \\<and>\n     Z'' \\<subseteq> W'a\n  A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', W'\\<rangle>\n  Z' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<exists>W'.\n       A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n       Z'' \\<subseteq> W'", "by blast"], ["proof (state)\nthis:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l, W\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n     Z'' \\<subseteq> W'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_alpha_alt:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle> \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha> \\<langle>l', Z'\\<rangle>;\n     A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''\\<rangle>", "by (rotate_tac, induction rule: steps_z_alpha.induct) blast+"], ["", "lemma steps_z_alpha_complete:\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {}\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z''\\<rangle> \\<and> Z' \\<subseteq> Z''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z' \\<subseteq> Z''", "proof (induction rule: steps_z.induct, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V; Z \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l, Z''\\<rangle> \\<and>\n                            Z \\<subseteq> Z''\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "case refl"], ["proof (state)\nthis:\n  valid_abstraction A_ X (\\<lambda>x. real (k x))\n  Z_ \\<subseteq> V\n  Z_ \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<And>A l Z.\n       \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n        Z \\<subseteq> V; Z \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l, Z''\\<rangle> \\<and>\n                            Z \\<subseteq> Z''\n 2. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "with cla_empty_iff"], ["proof (chain)\npicking this:\n  ?Z \\<subseteq> V \\<Longrightarrow>\n  (?Z = {}) = (Closure\\<^sub>\\<alpha> ?Z = {})\n  valid_abstraction A_ X (\\<lambda>x. real (k x))\n  Z_ \\<subseteq> V\n  Z_ \\<noteq> {}", "show ?case"], ["proof (prove)\nusing this:\n  ?Z \\<subseteq> V \\<Longrightarrow>\n  (?Z = {}) = (Closure\\<^sub>\\<alpha> ?Z = {})\n  valid_abstraction A_ X (\\<lambda>x. real (k x))\n  Z_ \\<subseteq> V\n  Z_ \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>Z''.\n       A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l_, Z''\\<rangle> \\<and>\n       Z_ \\<subseteq> Z''", "by blast"], ["proof (state)\nthis:\n  \\<exists>Z''.\n     A_ \\<turnstile> \\<langle>l_, Z_\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l_, Z''\\<rangle> \\<and>\n     Z_ \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "case (2 A l Z l' Z' l'' Z'')"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>\n  \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x)); Z' \\<subseteq> V;\n   Z'' \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''a.\n                       A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                       Z'' \\<subseteq> Z''a\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  Z'' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "with step_z_V[OF this(1,5)]"], ["proof (chain)\npicking this:\n  Z' \\<subseteq> V\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>\n  \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x)); Z' \\<subseteq> V;\n   Z'' \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''a.\n                       A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                       Z'' \\<subseteq> Z''a\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  Z'' \\<noteq> {}", "obtain Z''' where \"A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'',Z'''\\<rangle>\" \"Z'' \\<subseteq> Z'''\""], ["proof (prove)\nusing this:\n  Z' \\<subseteq> V\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>\n  \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x)); Z' \\<subseteq> V;\n   Z'' \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''a.\n                       A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                       Z'' \\<subseteq> Z''a\n  valid_abstraction A X (\\<lambda>x. real (k x))\n  Z \\<subseteq> V\n  Z'' \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>Z'''.\n        \\<lbrakk>A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z'''\\<rangle>;\n         Z'' \\<subseteq> Z'''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z'''\\<rangle>\n  Z'' \\<subseteq> Z'''\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "with steps_z_alpha_mono[OF this(1) closure_subs[OF step_z_V[OF 2(1,5)]] closure_V]"], ["proof (chain)\npicking this:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n     Z''' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z'''\\<rangle>\n  Z'' \\<subseteq> Z'''", "obtain W' where \"A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'',W'\\<rangle>\" \" Z'' \\<subseteq> W'\""], ["proof (prove)\nusing this:\n  \\<exists>W'.\n     A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle> \\<and>\n     Z''' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z'''\\<rangle>\n  Z'' \\<subseteq> Z'''\n\ngoal (1 subgoal):\n 1. (\\<And>W'.\n        \\<lbrakk>A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>;\n         Z'' \\<subseteq> W'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "moreover"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "with 2(1)"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n  Z'' \\<subseteq> W'", "have \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'',W'\\<rangle>\""], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>\n  A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n  Z'' \\<subseteq> W'\n\ngoal (1 subgoal):\n 1. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>", "by (auto intro: steps_z_alpha_alt)"], ["proof (state)\nthis:\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A l Z l' Z' l'' Z''.\n       \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto> \\<langle>l', Z'\\<rangle>;\n        A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>* \\<langle>l'', Z''\\<rangle>;\n        \\<lbrakk>valid_abstraction A X (\\<lambda>x. real (k x));\n         Z' \\<subseteq> V; Z'' \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>Z''a.\n                             A \\<turnstile> \\<langle>l', Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                             Z'' \\<subseteq> Z''a;\n        valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n        Z'' \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Z''a.\n                            A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n                            Z'' \\<subseteq> Z''a", "ultimately"], ["proof (chain)\npicking this:\n  A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n  Z'' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>", "show ?case"], ["proof (prove)\nusing this:\n  A \\<turnstile> \\<langle>l', Closure\\<^sub>\\<alpha> Z'\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n  Z'' \\<subseteq> W'\n  A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', W'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>Z''a.\n       A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n       Z'' \\<subseteq> Z''a", "by auto"], ["proof (state)\nthis:\n  \\<exists>Z''a.\n     A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l'', Z''a\\<rangle> \\<and>\n     Z'' \\<subseteq> Z''a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_z_alpha_complete':\n  \"A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l',Z'\\<rangle> \\<Longrightarrow> valid_abstraction A X k \\<Longrightarrow> Z \\<subseteq> V \\<Longrightarrow> Z' \\<noteq> {}\n  \\<Longrightarrow> \\<exists> Z''. A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l',Z''\\<rangle> \\<and> Z'' \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "using steps_z_alpha_complete"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<turnstile> \\<langle>?l, ?Z\\<rangle> \\<leadsto>* \\<langle>?l', ?Z'\\<rangle>;\n   valid_abstraction ?A X (\\<lambda>x. real (k x)); ?Z \\<subseteq> V;\n   ?Z' \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Z''.\n                       ?A \\<turnstile> \\<langle>?l, ?Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>?l', Z''\\<rangle> \\<and>\n                       ?Z' \\<subseteq> Z''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>* \\<langle>l', Z'\\<rangle>;\n     valid_abstraction A X (\\<lambda>x. real (k x)); Z \\<subseteq> V;\n     Z' \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Z''.\n                         A \\<turnstile> \\<langle>l, Z\\<rangle> \\<leadsto>\\<^sub>\\<alpha>* \\<langle>l', Z''\\<rangle> \\<and>\n                         Z'' \\<noteq> {}", "by fast"], ["", "end"], ["", "end"]]}