{"file_name": "/home/qj213/afp-2021-10-22/thys/Complex_Geometry/Unitary11_Matrices.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Complex_Geometry", "problem_names": ["lemma unitary11_gen_real:\n  shows \"unitary11_gen M \\<longleftrightarrow> (\\<exists> k. k \\<noteq> 0 \\<and> congruence M (1, 0, 0, -1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, -1))\"", "lemma unitary11_unitary11_gen [simp]:\n  assumes \"unitary11 M\"\n  shows \"unitary11_gen M\"", "lemma unitary11_gen_regular:\n  assumes \"unitary11_gen M\"\n  shows \"mat_det M \\<noteq> 0\"", "lemmas unitary11_regular = unitary11_gen_regular[OF unitary11_unitary11_gen]", "lemma unitary11_special:\n  assumes \"unitary11 M\" and \"mat_det M = 1\"\n  shows \"\\<exists> a b. M = (a, b, cnj b, cnj a)\"", "lemma unitary11_gen_special:\n  assumes \"unitary11_gen M\" and \"mat_det M = 1\"\n  shows \"\\<exists> a b. M = (a, b, cnj b, cnj a) \\<or> M = (a, b, -cnj b, -cnj a)\"", "lemma unitary11_gen_iff':\n  shows \"unitary11_gen M \\<longleftrightarrow>\n         (\\<exists> a b k. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                           (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or> \n                            M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)))\" (is \"?lhs = ?rhs\")", "lemma unitary11_gen_cis_blaschke:\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\" and \n          \"a \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi> a'. k' \\<noteq> 0 \\<and> a' * cnj a' \\<noteq> 1 \\<and> \n                                 M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\"", "lemma unitary11_gen_cis_blaschke':\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\" and\n          \"a \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi> a'. k' \\<noteq> 0 \\<and> a' * cnj a' \\<noteq> 1 \\<and>\n                                 M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\"", "lemma unitary11_gen_cis_blaschke_rev:\n  assumes \"k' \\<noteq> 0\" and \"M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\" and\n          \"a' * cnj a' \\<noteq> 1\"\n  shows \"\\<exists> k a b. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0  \\<and>\n                          M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\"", "lemma unitary11_gen_cis_inversion:\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0)\" and \"b \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi>. k' \\<noteq> 0 \\<and>\n                              M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\"", "lemma unitary11_gen_cis_inversion':\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, b, cnj b, 0)\" and \"b \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi>. k' \\<noteq> 0 \\<and>\n                   M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\"", "lemma unitary11_gen_cis_inversion_rev:\n  assumes \"k' \\<noteq> 0\" and \"M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\"\n  shows \"\\<exists> k a b. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                          M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\"", "lemma unitary11_gen_iff:\n  shows \"unitary11_gen M \\<longleftrightarrow> \n         (\\<exists> k a b. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                           M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\" (is \"?lhs = ?rhs\")", "lemma unitary11_iff:\n  shows \"unitary11 M \\<longleftrightarrow>\n         (\\<exists> a b k. (cmod a)\\<^sup>2 > (cmod b)\\<^sup>2 \\<and>\n                           (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n                           M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\" (is \"?lhs = ?rhs\")", "lemma unitary11_gen_mult_sm:\n  assumes \"k \\<noteq> 0\" and \"unitary11_gen M\"\n  shows \"unitary11_gen (k *\\<^sub>s\\<^sub>m M)\"", "lemma unitary11_gen_div_sm:\n  assumes \"k \\<noteq> 0\" and \"unitary11_gen (k *\\<^sub>s\\<^sub>m M)\"\n  shows \"unitary11_gen M\"", "lemma unitary11_inv:\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n  shows \"\\<exists> k' a' b'. k' \\<noteq> 0 \\<and> mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and> mat_det (a', b', cnj b', cnj a') \\<noteq> 0\"", "lemma unitary11_comp:\n  assumes \"k1 \\<noteq> 0\" and \"M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\" and \"mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0\"\n          \"k2 \\<noteq> 0\" \"M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\" \"mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\"\n  shows \"\\<exists> k a b. k \\<noteq> 0 \\<and> M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"", "lemma unitary11_gen_mat_inv:\n  assumes \"unitary11_gen M\" and \"mat_det M \\<noteq> 0\"\n  shows \"unitary11_gen (mat_inv M)\"", "lemma unitary11_gen_comp:\n  assumes \"unitary11_gen M1\" and \"mat_det M1 \\<noteq> 0\" and \"unitary11_gen M2\"  and \"mat_det M2 \\<noteq> 0\"\n  shows \"unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)\"", "lemma unitary11_sgn_det_orientation:\n  assumes \"k \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\"\n  shows \"\\<exists> k'. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and> congruence M (1, 0, 0, -1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\"", "lemma unitary11_sgn_det:\n  assumes \"k \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\" and \"M = (A, B, C, D)\"\n  shows \"sgn (Re (mat_det (a, b, cnj b, cnj a))) = (if b = 0 then 1 else sgn (Re ((A*D)/(B*C)) - 1))\"", "lemma unitary11_orientation:\n  assumes \"unitary11_gen M\" and \"M = (A, B, C, D)\"\n  shows \"\\<exists> k'. sgn k' = sgn (if B = 0 then 1 else sgn (Re ((A*D)/(B*C)) - 1)) \\<and> congruence M (1, 0, 0, -1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\"", "lemma unitary11_sgn_det_orientation':\n  assumes \"congruence M (1, 0, 0, -1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\" and \"k' \\<noteq> 0\"\n  shows \"\\<exists> a b k. k \\<noteq> 0 \\<and> M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and> sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\""], "translations": [["", "lemma unitary11_gen_real:\n  shows \"unitary11_gen M \\<longleftrightarrow> (\\<exists> k. k \\<noteq> 0 \\<and> congruence M (1, 0, 0, -1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, -1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen M =\n    (\\<exists>k.\n        k \\<noteq> 0 \\<and>\n        congruence M (1, 0, 0, - 1) =\n        cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1))", "unfolding unitary11_gen_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>k.\n        k \\<noteq> 0 \\<and>\n        congruence M (1, 0, 0, - 1) = k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)) =\n    (\\<exists>k.\n        k \\<noteq> 0 \\<and>\n        congruence M (1, 0, 0, - 1) =\n        cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1))", "proof (auto simp del: congruence_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "assume \"k \\<noteq> 0\" \"congruence M (1, 0, 0, -1) = (k, 0, 0, - k)\""], ["proof (state)\nthis:\n  k \\<noteq> 0\n  congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "hence \"mat_det (congruence M (1, 0, 0, -1)) = -k*k\""], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\n\ngoal (1 subgoal):\n 1. mat_det (congruence M (1, 0, 0, - 1)) = - k * k", "by simp"], ["proof (state)\nthis:\n  mat_det (congruence M (1, 0, 0, - 1)) = - k * k\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "moreover"], ["proof (state)\nthis:\n  mat_det (congruence M (1, 0, 0, - 1)) = - k * k\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "have \"is_real (mat_det (congruence M (1, 0, 0, -1)))\" \"Re (mat_det (congruence M (1, 0, 0, -1))) \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_real (mat_det (congruence M (1, 0, 0, - 1))) &&&\n    Re (mat_det (congruence M (1, 0, 0, - 1))) \\<le> 0", "by (auto simp add: mat_det_adj)"], ["proof (state)\nthis:\n  is_real (mat_det (congruence M (1, 0, 0, - 1)))\n  Re (mat_det (congruence M (1, 0, 0, - 1))) \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "ultimately"], ["proof (chain)\npicking this:\n  mat_det (congruence M (1, 0, 0, - 1)) = - k * k\n  is_real (mat_det (congruence M (1, 0, 0, - 1)))\n  Re (mat_det (congruence M (1, 0, 0, - 1))) \\<le> 0", "have \"is_real (k*k)\" \"Re (-k*k) \\<le> 0\""], ["proof (prove)\nusing this:\n  mat_det (congruence M (1, 0, 0, - 1)) = - k * k\n  is_real (mat_det (congruence M (1, 0, 0, - 1)))\n  Re (mat_det (congruence M (1, 0, 0, - 1))) \\<le> 0\n\ngoal (1 subgoal):\n 1. is_real (k * k) &&& Re (- k * k) \\<le> 0", "by auto"], ["proof (state)\nthis:\n  is_real (k * k)\n  Re (- k * k) \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "hence \"is_real (k*k) \\<and> Re (k * k) > 0\""], ["proof (prove)\nusing this:\n  is_real (k * k)\n  Re (- k * k) \\<le> 0\n\ngoal (1 subgoal):\n 1. is_real (k * k) \\<and> 0 < Re (k * k)", "using \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  is_real (k * k)\n  Re (- k * k) \\<le> 0\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. is_real (k * k) \\<and> 0 < Re (k * k)", "by (smt complex_eq_if_Re_eq mult_eq_0_iff mult_minus_left uminus_complex.simps(1) zero_complex.simps(1) zero_complex.simps(2))"], ["proof (state)\nthis:\n  is_real (k * k) \\<and> 0 < Re (k * k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "hence \"is_real k\""], ["proof (prove)\nusing this:\n  is_real (k * k) \\<and> 0 < Re (k * k)\n\ngoal (1 subgoal):\n 1. is_real k", "by auto"], ["proof (state)\nthis:\n  is_real k\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<noteq> 0;\n        congruence M (1, 0, 0, - 1) = (k, 0, 0, - k)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "thus \"\\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka\""], ["proof (prove)\nusing this:\n  is_real k\n\ngoal (1 subgoal):\n 1. \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "using \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  is_real k\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka", "by (rule_tac x=\"Re k\" in exI) (cases k, auto simp add: Complex_eq)"], ["proof (state)\nthis:\n  \\<exists>ka. ka \\<noteq> 0 \\<and> k = cor ka\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Unitary11 matrices are special cases of generalized unitary 11 matrices\\<close>"], ["", "lemma unitary11_unitary11_gen [simp]:\n  assumes \"unitary11 M\"\n  shows \"unitary11_gen M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen M", "using assms"], ["proof (prove)\nusing this:\n  unitary11 M\n\ngoal (1 subgoal):\n 1. unitary11_gen M", "unfolding unitary11_gen_def unitary11_def"], ["proof (prove)\nusing this:\n  congruence M (1, 0, 0, - 1) = (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       k \\<noteq> 0 \\<and>\n       congruence M (1, 0, 0, - 1) = k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by (rule_tac x=\"1\" in exI, auto)"], ["", "text \\<open>All generalized unitary11 matrices are regular\\<close>"], ["", "lemma unitary11_gen_regular:\n  assumes \"unitary11_gen M\"\n  shows \"mat_det M \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_det M \\<noteq> 0", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. mat_det M \\<noteq> 0", "from assms"], ["proof (chain)\npicking this:\n  unitary11_gen M", "obtain k where\n    \"k \\<noteq> 0\" \"mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) *\\<^sub>m\\<^sub>m M = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\""], ["proof (prove)\nusing this:\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<noteq> 0;\n         mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n         cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding unitary11_gen_real"], ["proof (prove)\nusing this:\n  \\<exists>k.\n     k \\<noteq> 0 \\<and>\n     congruence M (1, 0, 0, - 1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<noteq> 0;\n         mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n         cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. mat_det M \\<noteq> 0", "hence \"mat_det (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) *\\<^sub>m\\<^sub>m M) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. mat_det\n     (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n      M) \\<noteq>\n    0", "by simp"], ["proof (state)\nthis:\n  mat_det\n   (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M) \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. mat_det M \\<noteq> 0", "thus ?thesis"], ["proof (prove)\nusing this:\n  mat_det\n   (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M) \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. mat_det M \\<noteq> 0", "by (simp add: mat_det_adj)"], ["proof (state)\nthis:\n  mat_det M \\<noteq> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas unitary11_regular = unitary11_gen_regular[OF unitary11_unitary11_gen]"], ["", "(* ----------------------------------------------------------------- *)"], ["", "subsubsection \\<open>The characterization in terms of matrix elements\\<close>"], ["", "(* ----------------------------------------------------------------- *)"], ["", "text \\<open>Special matrices are those having the determinant equal to 1. We first give their characterization.\\<close>"], ["", "lemma unitary11_special:\n  assumes \"unitary11 M\" and \"mat_det M = 1\"\n  shows \"\\<exists> a b. M = (a, b, cnj b, cnj a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a b. M = (a, b, cnj b, cnj a)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b. M = (a, b, cnj b, cnj a)", "have \"mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) = (1, 0, 0, -1) *\\<^sub>m\\<^sub>m mat_inv M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n    (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M", "using assms mult_mm_inv_r"], ["proof (prove)\nusing this:\n  unitary11 M\n  mat_det M = 1\n  \\<lbrakk>mat_det ?B \\<noteq> 0; ?A *\\<^sub>m\\<^sub>m ?B = ?C\\<rbrakk>\n  \\<Longrightarrow> ?A = ?C *\\<^sub>m\\<^sub>m mat_inv ?B\n\ngoal (1 subgoal):\n 1. mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n    (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M", "by (simp add: unitary11_def)"], ["proof (state)\nthis:\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n\ngoal (1 subgoal):\n 1. \\<exists>a b. M = (a, b, cnj b, cnj a)", "thus ?thesis"], ["proof (prove)\nusing this:\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n\ngoal (1 subgoal):\n 1. \\<exists>a b. M = (a, b, cnj b, cnj a)", "using assms(2)"], ["proof (prove)\nusing this:\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n  mat_det M = 1\n\ngoal (1 subgoal):\n 1. \\<exists>a b. M = (a, b, cnj b, cnj a)", "by (cases M) (simp add: mat_adj_def mat_cnj_def)"], ["proof (state)\nthis:\n  \\<exists>a b. M = (a, b, cnj b, cnj a)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_special:\n  assumes \"unitary11_gen M\" and \"mat_det M = 1\"\n  shows \"\\<exists> a b. M = (a, b, cnj b, cnj a) \\<or> M = (a, b, -cnj b, -cnj a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "from assms"], ["proof (chain)\npicking this:\n  unitary11_gen M\n  mat_det M = 1", "obtain k where *: \"k \\<noteq> 0\" \"mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) *\\<^sub>m\\<^sub>m M = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\""], ["proof (prove)\nusing this:\n  unitary11_gen M\n  mat_det M = 1\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<noteq> 0;\n         mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n         cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding unitary11_gen_real"], ["proof (prove)\nusing this:\n  \\<exists>k.\n     k \\<noteq> 0 \\<and>\n     congruence M (1, 0, 0, - 1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  mat_det M = 1\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<noteq> 0;\n         mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n         cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "hence \"mat_det (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) *\\<^sub>m\\<^sub>m M) = -  cor k* cor k\""], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. mat_det\n     (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M) =\n    - cor k * cor k", "by simp"], ["proof (state)\nthis:\n  mat_det (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M) =\n  - cor k * cor k\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "hence \"mat_det (mat_adj M *\\<^sub>m\\<^sub>m M) = cor k* cor k\""], ["proof (prove)\nusing this:\n  mat_det (mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M) =\n  - cor k * cor k\n\ngoal (1 subgoal):\n 1. mat_det (mat_adj M *\\<^sub>m\\<^sub>m M) = cor k * cor k", "by simp"], ["proof (state)\nthis:\n  mat_det (mat_adj M *\\<^sub>m\\<^sub>m M) = cor k * cor k\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "hence \"cor k* cor k = 1\""], ["proof (prove)\nusing this:\n  mat_det (mat_adj M *\\<^sub>m\\<^sub>m M) = cor k * cor k\n\ngoal (1 subgoal):\n 1. cor k * cor k = 1", "using assms(2)"], ["proof (prove)\nusing this:\n  mat_det (mat_adj M *\\<^sub>m\\<^sub>m M) = cor k * cor k\n  mat_det M = 1\n\ngoal (1 subgoal):\n 1. cor k * cor k = 1", "by (simp add: mat_det_adj)"], ["proof (state)\nthis:\n  cor k * cor k = 1\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "hence \"cor k = 1 \\<or> cor k = -1\""], ["proof (prove)\nusing this:\n  cor k * cor k = 1\n\ngoal (1 subgoal):\n 1. cor k = 1 \\<or> cor k = - 1", "using square_eq_1_iff[of \"cor k\"]"], ["proof (prove)\nusing this:\n  cor k * cor k = 1\n  (cor k * cor k = 1) = (cor k = 1 \\<or> cor k = - 1)\n\ngoal (1 subgoal):\n 1. cor k = 1 \\<or> cor k = - 1", "by simp"], ["proof (state)\nthis:\n  cor k = 1 \\<or> cor k = - 1\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "moreover"], ["proof (state)\nthis:\n  cor k = 1 \\<or> cor k = - 1\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "have \"mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) = (cor k *\\<^sub>s\\<^sub>m (1, 0, 0, -1)) *\\<^sub>m\\<^sub>m mat_inv M \""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n    cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M", "using *"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n    cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M", "using assms mult_mm_inv_r mat_eye_r mat_eye_l"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  unitary11_gen M\n  mat_det M = 1\n  \\<lbrakk>mat_det ?B \\<noteq> 0; ?A *\\<^sub>m\\<^sub>m ?B = ?C\\<rbrakk>\n  \\<Longrightarrow> ?A = ?C *\\<^sub>m\\<^sub>m mat_inv ?B\n  ?A *\\<^sub>m\\<^sub>m eye = ?A\n  eye *\\<^sub>m\\<^sub>m ?A = ?A\n\ngoal (1 subgoal):\n 1. mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n    cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M", "by auto"], ["proof (state)\nthis:\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "moreover"], ["proof (state)\nthis:\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "obtain a b c d where \"M = (a, b, c, d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b c d.\n        M = (a, b, c, d) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases M) auto"], ["proof (state)\nthis:\n  M = (a, b, c, d)\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "ultimately"], ["proof (chain)\npicking this:\n  cor k = 1 \\<or> cor k = - 1\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n  M = (a, b, c, d)", "have \"M = (a, b, cnj b, cnj a) \\<or> M = (a, b, -cnj b, -cnj a)\""], ["proof (prove)\nusing this:\n  cor k = 1 \\<or> cor k = - 1\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n  M = (a, b, c, d)\n\ngoal (1 subgoal):\n 1. M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "using assms(2)"], ["proof (prove)\nusing this:\n  cor k = 1 \\<or> cor k = - 1\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m mat_inv M\n  M = (a, b, c, d)\n  mat_det M = 1\n\ngoal (1 subgoal):\n 1. M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "by (auto simp add: mat_adj_def mat_cnj_def)"], ["proof (state)\nthis:\n  M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "thus ?thesis"], ["proof (prove)\nusing this:\n  M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)", "by auto"], ["proof (state)\nthis:\n  \\<exists>a b. M = (a, b, cnj b, cnj a) \\<or> M = (a, b, - cnj b, - cnj a)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>A characterization of all generalized unitary11 matrices\\<close>"], ["", "lemma unitary11_gen_iff':\n  shows \"unitary11_gen M \\<longleftrightarrow>\n         (\\<exists> a b k. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                           (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or> \n                            M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)))\" (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen M =\n    (\\<exists>a b k.\n        k \\<noteq> 0 \\<and>\n        mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n        (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n         M =\n         k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (a, b, cnj b, cnj a)))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "assume ?lhs"], ["proof (state)\nthis:\n  unitary11_gen M\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "obtain d where *: \"d*d = mat_det M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>d. d * d = mat_det M \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ex_complex_sqrt"], ["proof (prove)\nusing this:\n  \\<exists>s. s * s = ?z\n\ngoal (1 subgoal):\n 1. (\\<And>d. d * d = mat_det M \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  d * d = mat_det M\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "hence \"d \\<noteq> 0\""], ["proof (prove)\nusing this:\n  d * d = mat_det M\n\ngoal (1 subgoal):\n 1. d \\<noteq> 0", "using unitary11_gen_regular[OF \\<open>unitary11_gen M\\<close>]"], ["proof (prove)\nusing this:\n  d * d = mat_det M\n  mat_det M \\<noteq> 0\n\ngoal (1 subgoal):\n 1. d \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  d \\<noteq> 0\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "from \\<open>unitary11_gen M\\<close>"], ["proof (chain)\npicking this:\n  unitary11_gen M", "obtain k where \"k \\<noteq> 0\" \"mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, -1) *\\<^sub>m\\<^sub>m M = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\""], ["proof (prove)\nusing this:\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<noteq> 0;\n         mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n         cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding unitary11_gen_real"], ["proof (prove)\nusing this:\n  \\<exists>k.\n     k \\<noteq> 0 \\<and>\n     congruence M (1, 0, 0, - 1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<noteq> 0;\n         mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n         cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "hence \"mat_adj ((1/d)*\\<^sub>s\\<^sub>mM)*\\<^sub>m\\<^sub>m (1, 0, 0, -1) *\\<^sub>m\\<^sub>m ((1/d)*\\<^sub>s\\<^sub>mM) = (cor k / (d*cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\""], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_adj M *\\<^sub>m\\<^sub>m (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m M =\n  cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n    (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n    ((1 / d) *\\<^sub>s\\<^sub>m M) =\n    (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by simp"], ["proof (state)\nthis:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "moreover"], ["proof (state)\nthis:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "have \"is_real (cor k / (d * cnj d))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_real (cor k / (d * cnj d))", "by (metis complex_In_mult_cnj_zero div_reals Im_complex_of_real)"], ["proof (state)\nthis:\n  is_real (cor k / (d * cnj d))\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "hence \"cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\""], ["proof (prove)\nusing this:\n  is_real (cor k / (d * cnj d))\n\ngoal (1 subgoal):\n 1. cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)", "by simp"], ["proof (state)\nthis:\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "ultimately"], ["proof (chain)\npicking this:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)", "have \"unitary11_gen ((1/d)*\\<^sub>s\\<^sub>mM)\""], ["proof (prove)\nusing this:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\n\ngoal (1 subgoal):\n 1. unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M)", "unfolding unitary11_gen_real"], ["proof (prove)\nusing this:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       k \\<noteq> 0 \\<and>\n       congruence ((1 / d) *\\<^sub>s\\<^sub>m M) (1, 0, 0, - 1) =\n       cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "using \\<open>d \\<noteq> 0\\<close> \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\n  d \\<noteq> 0\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       k \\<noteq> 0 \\<and>\n       congruence ((1 / d) *\\<^sub>s\\<^sub>m M) (1, 0, 0, - 1) =\n       cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "using \\<open>cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\\<close>"], ["proof (prove)\nusing this:\n  mat_adj ((1 / d) *\\<^sub>s\\<^sub>m M) *\\<^sub>m\\<^sub>m\n  (1, 0, 0, - 1) *\\<^sub>m\\<^sub>m\n  ((1 / d) *\\<^sub>s\\<^sub>m M) =\n  (cor k / (d * cnj d)) *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\n  d \\<noteq> 0\n  k \\<noteq> 0\n  cor (Re (cor k / (d * cnj d))) = cor k / (d * cnj d)\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       k \\<noteq> 0 \\<and>\n       congruence ((1 / d) *\\<^sub>s\\<^sub>m M) (1, 0, 0, - 1) =\n       cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by (rule_tac x=\"Re (cor k / (d * cnj d))\" in exI, auto, simp add: *)"], ["proof (state)\nthis:\n  unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "moreover"], ["proof (state)\nthis:\n  unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "have \"mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1", "using * unitary11_gen_regular[of M] \\<open>unitary11_gen M\\<close>"], ["proof (prove)\nusing this:\n  d * d = mat_det M\n  unitary11_gen M \\<Longrightarrow> mat_det M \\<noteq> 0\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1", "by auto"], ["proof (state)\nthis:\n  mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "ultimately"], ["proof (chain)\npicking this:\n  unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M)\n  mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1", "obtain a b where \"(a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<or> (a, b, -cnj b, -cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\""], ["proof (prove)\nusing this:\n  unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M)\n  mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<or>\n        (a, b, - cnj b, - cnj a) =\n        (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_special[of \"(1 / d) *\\<^sub>s\\<^sub>m M\"]"], ["proof (prove)\nusing this:\n  unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M)\n  mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1\n  \\<lbrakk>unitary11_gen ((1 / d) *\\<^sub>s\\<^sub>m M);\n   mat_det ((1 / d) *\\<^sub>s\\<^sub>m M) = 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>a b.\n                       (1 / d) *\\<^sub>s\\<^sub>m M =\n                       (a, b, cnj b, cnj a) \\<or>\n                       (1 / d) *\\<^sub>s\\<^sub>m M =\n                       (a, b, - cnj b, - cnj a)\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<or>\n        (a, b, - cnj b, - cnj a) =\n        (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<or>\n  (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "thus ?rhs"], ["proof (prove)\nusing this:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<or>\n  (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "assume \"(a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\""], ["proof (state)\nthis:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (2 subgoals):\n 1. (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "moreover"], ["proof (state)\nthis:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (2 subgoals):\n 1. (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "hence \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (1 subgoal):\n 1. mat_det (a, b, cnj b, cnj a) \\<noteq> 0", "using unitary11_gen_regular[OF \\<open>unitary11_gen M\\<close>] \\<open>d \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n  mat_det M \\<noteq> 0\n  d \\<noteq> 0\n\ngoal (1 subgoal):\n 1. mat_det (a, b, cnj b, cnj a) \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (2 subgoals):\n 1. (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))\n 2. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "ultimately"], ["proof (chain)\npicking this:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0", "show ?rhs"], ["proof (prove)\nusing this:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "using \\<open>d \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  (a, b, cnj b, cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  d \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "by (rule_tac x=\"a\" in exI, rule_tac x=\"b\" in exI, rule_tac x=\"d\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n      M =\n      k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n      (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "assume *: \"(a, b, -cnj b, -cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\""], ["proof (state)\nthis:\n  (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "hence \" (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, -cnj b, -cnj a)\""], ["proof (prove)\nusing this:\n  (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n\ngoal (1 subgoal):\n 1. (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, - cnj b, - cnj a)", "by simp"], ["proof (state)\nthis:\n  (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, - cnj b, - cnj a)\n\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "hence \"M = (a * d, b * d, - (d * cnj b), - (d * cnj a))\""], ["proof (prove)\nusing this:\n  (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, - cnj b, - cnj a)\n\ngoal (1 subgoal):\n 1. M = (a * d, b * d, - (d * cnj b), - (d * cnj a))", "using \\<open>d \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, - cnj b, - cnj a)\n  d \\<noteq> 0\n\ngoal (1 subgoal):\n 1. M = (a * d, b * d, - (d * cnj b), - (d * cnj a))", "using mult_sm_inv_l[of \"1/d\" M \"(a, b, -cnj b, -cnj a)\", symmetric]"], ["proof (prove)\nusing this:\n  (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, - cnj b, - cnj a)\n  d \\<noteq> 0\n  \\<lbrakk>1 / d \\<noteq> 0;\n   (1 / d) *\\<^sub>s\\<^sub>m M = (a, b, - cnj b, - cnj a)\\<rbrakk>\n  \\<Longrightarrow> (1 / (1 / d)) *\\<^sub>s\\<^sub>m\n                    (a, b, - cnj b, - cnj a) =\n                    M\n\ngoal (1 subgoal):\n 1. M = (a * d, b * d, - (d * cnj b), - (d * cnj a))", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  M = (a * d, b * d, - (d * cnj b), - (d * cnj a))\n\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "moreover"], ["proof (state)\nthis:\n  M = (a * d, b * d, - (d * cnj b), - (d * cnj a))\n\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "have \"mat_det (a, b, -cnj b, -cnj a) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_det (a, b, - cnj b, - cnj a) \\<noteq> 0", "using * unitary11_gen_regular[OF \\<open>unitary11_gen M\\<close>] \\<open>d \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M\n  mat_det M \\<noteq> 0\n  d \\<noteq> 0\n\ngoal (1 subgoal):\n 1. mat_det (a, b, - cnj b, - cnj a) \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  mat_det (a, b, - cnj b, - cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (a, b, - cnj b, - cnj a) = (1 / d) *\\<^sub>s\\<^sub>m M \\<Longrightarrow>\n    \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "ultimately"], ["proof (chain)\npicking this:\n  M = (a * d, b * d, - (d * cnj b), - (d * cnj a))\n  mat_det (a, b, - cnj b, - cnj a) \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  M = (a * d, b * d, - (d * cnj b), - (d * cnj a))\n  mat_det (a, b, - cnj b, - cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "using \\<open>d \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  M = (a * d, b * d, - (d * cnj b), - (d * cnj a))\n  mat_det (a, b, - cnj b, - cnj a) \\<noteq> 0\n  d \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a))", "by (rule_tac x=\"a\" in exI, rule_tac x=\"b\" in exI, rule_tac x=\"-d\" in exI) (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n      M =\n      k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n      (a, b, cnj b, cnj a))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n      M =\n      k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n      (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "assume ?rhs"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n      M =\n      k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n      (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "then"], ["proof (chain)\npicking this:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n      M =\n      k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n      (a, b, cnj b, cnj a))", "obtain a b k where \"k \\<noteq> 0\" \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n    \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or> M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\nusing this:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n      M =\n      k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n      (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n         M =\n         k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "moreover"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "let ?x = \"cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "have \"?x = (k*cnj k)*(a*cnj a - b*cnj b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    k * cnj k * (a * cnj a - b * cnj b)", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  k * cnj k * (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "hence \"is_real ?x\""], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  k * cnj k * (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. is_real (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))", "by simp"], ["proof (state)\nthis:\n  is_real (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "hence \"cor (Re ?x) = ?x\""], ["proof (prove)\nusing this:\n  is_real (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))\n\ngoal (1 subgoal):\n 1. cor (Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))) =\n    cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))", "by (rule complex_of_real_Re)"], ["proof (state)\nthis:\n  cor (Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))) =\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "moreover"], ["proof (state)\nthis:\n  cor (Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))) =\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "have \"?x \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) \\<noteq> 0", "using mult_eq_0_iff[of \"cnj k * k\" \"(cnj a * a + - cnj b * b)\"]"], ["proof (prove)\nusing this:\n  (cnj k * k * (cnj a * a + - cnj b * b) = 0) =\n  (cnj k * k = 0 \\<or> cnj a * a + - cnj b * b = 0)\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) \\<noteq> 0", "using \\<open>mat_det (a, b, cnj b, cnj a) \\<noteq> 0\\<close> \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  (cnj k * k * (cnj a * a + - cnj b * b) = 0) =\n  (cnj k * k = 0 \\<or> cnj a * a + - cnj b * b = 0)\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) \\<noteq> 0", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "hence \"Re ?x \\<noteq> 0\""], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))) \\<noteq> 0", "using \\<open>is_real ?x\\<close>"], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) \\<noteq> 0\n  is_real (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))\n\ngoal (1 subgoal):\n 1. Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))) \\<noteq> 0", "by (metis calculation(4) of_real_0)"], ["proof (state)\nthis:\n  Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       (M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n        M =\n        k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n        (a, b, cnj b, cnj a)) \\<Longrightarrow>\n    unitary11_gen M", "ultimately"], ["proof (chain)\npicking this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n  cor (Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))) =\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))\n  Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))) \\<noteq> 0", "show ?lhs"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n  cor (Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))) =\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))\n  Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. unitary11_gen M", "unfolding unitary11_gen_real"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n  cor (Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)))) =\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))\n  Re (cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b))) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       k \\<noteq> 0 \\<and>\n       congruence M (1, 0, 0, - 1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by (rule_tac x=\"Re ?x\" in exI) (auto simp add: mat_adj_def mat_cnj_def)"], ["proof (state)\nthis:\n  unitary11_gen M\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Another characterization of all generalized unitary11 matrices. They are products of \nrotation and Blaschke factor matrices.\\<close>"], ["", "lemma unitary11_gen_cis_blaschke:\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\" and \n          \"a \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi> a'. k' \\<noteq> 0 \\<and> a' * cnj a' \\<noteq> 1 \\<and> \n                                 M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "have \"a = cnj a * cis (2 * arg a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = cnj a * cis (2 * arg a)", "using rcis_cmod_arg[of a] rcis_cnj[of a]"], ["proof (prove)\nusing this:\n  rcis (cmod a) (arg a) = a\n  cnj a = rcis (cmod a) (- arg a)\n\ngoal (1 subgoal):\n 1. a = cnj a * cis (2 * arg a)", "using cis_rcis_eq rcis_mult"], ["proof (prove)\nusing this:\n  rcis (cmod a) (arg a) = a\n  cnj a = rcis (cmod a) (- arg a)\n  cis ?a = rcis 1 ?a\n  rcis ?r1.0 ?a * rcis ?r2.0 ?b = rcis (?r1.0 * ?r2.0) (?a + ?b)\n\ngoal (1 subgoal):\n 1. a = cnj a * cis (2 * arg a)", "by simp"], ["proof (state)\nthis:\n  a = cnj a * cis (2 * arg a)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = cnj a * cis (2 * arg a)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "using assms"], ["proof (prove)\nusing this:\n  a = cnj a * cis (2 * arg a)\n  k \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  a \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "by (rule_tac x=\"k*cnj a\" in exI, rule_tac x=\"2*arg a\" in exI, rule_tac x=\"- b / a\" in exI) (auto simp add: field_simps)"], ["proof (state)\nthis:\n  \\<exists>k' \\<phi> a'.\n     k' \\<noteq> 0 \\<and>\n     a' * cnj a' \\<noteq> 1 \\<and>\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (1, - a', - cnj a', 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_cis_blaschke':\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\" and\n          \"a \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi> a'. k' \\<noteq> 0 \\<and> a' * cnj a' \\<noteq> 1 \\<and>\n                                 M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "obtain k' \\<phi> a' where *: \"k' \\<noteq> 0\" \"k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\" \"a' * cnj a' \\<noteq> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k' \\<phi> a'.\n        \\<lbrakk>k' \\<noteq> 0;\n         k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) =\n         k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (1, - a', - cnj a', 1);\n         a' * cnj a' \\<noteq> 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_cis_blaschke[OF \\<open>k \\<noteq> 0\\<close> _ \\<open>a \\<noteq> 0\\<close>] \\<open>mat_det (a, b, cnj b, cnj a) \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M = k *\\<^sub>s\\<^sub>m (a, ?b, cnj ?b, cnj a);\n   mat_det (a, ?b, cnj ?b, cnj a) \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k' \\<phi> a'.\n                       k' \\<noteq> 0 \\<and>\n                       a' * cnj a' \\<noteq> 1 \\<and>\n                       ?M =\n                       k' *\\<^sub>s\\<^sub>m\n                       (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n                       (1, - a', - cnj a', 1)\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>k' \\<phi> a'.\n        \\<lbrakk>k' \\<noteq> 0;\n         k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) =\n         k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (1, - a', - cnj a', 1);\n         a' * cnj a' \\<noteq> 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  k' \\<noteq> 0\n  k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) =\n  k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n  (1, - a', - cnj a', 1)\n  a' * cnj a' \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "have \"(cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (-1, 0, 0, 1) = (cis (\\<phi> + pi), 0, 0, 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n    (cis (\\<phi> + pi), 0, 0, 1)", "by (simp add: cis_def complex.corec Complex_eq)"], ["proof (state)\nthis:\n  (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n  (cis (\\<phi> + pi), 0, 0, 1)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n  (cis (\\<phi> + pi), 0, 0, 1)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "using * \\<open>M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\\<close>"], ["proof (prove)\nusing this:\n  (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n  (cis (\\<phi> + pi), 0, 0, 1)\n  k' \\<noteq> 0\n  k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) =\n  k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n  (1, - a', - cnj a', 1)\n  a' * cnj a' \\<noteq> 1\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi> a'.\n       k' \\<noteq> 0 \\<and>\n       a' * cnj a' \\<noteq> 1 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (1, - a', - cnj a', 1)", "by (rule_tac x=\"k'\" in exI, rule_tac x=\"\\<phi> + pi\" in exI, rule_tac x=\"a'\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>k' \\<phi> a'.\n     k' \\<noteq> 0 \\<and>\n     a' * cnj a' \\<noteq> 1 \\<and>\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (1, - a', - cnj a', 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_cis_blaschke_rev:\n  assumes \"k' \\<noteq> 0\" and \"M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (1, -a', -cnj a', 1)\" and\n          \"a' * cnj a' \\<noteq> 1\"\n  shows \"\\<exists> k a b. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0  \\<and>\n                          M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using assms"], ["proof (prove)\nusing this:\n  k' \\<noteq> 0\n  M =\n  k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n  (1, - a', - cnj a', 1)\n  a' * cnj a' \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "apply (rule_tac x=\"k'*cis(\\<phi>/2)\" in exI, rule_tac x=\"cis(\\<phi>/2)\" in exI, rule_tac x=\"-a'*cis(\\<phi>/2)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>k' \\<noteq> 0;\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (1, - a', - cnj a', 1);\n     a' * cnj a' \\<noteq> 1; k' \\<noteq> 0;\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (1, - a', - cnj a', 1);\n     a' * cnj a' \\<noteq> 1; k' \\<noteq> 0;\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (1, - a', - cnj a', 1);\n     a' * cnj a' \\<noteq> 1\\<rbrakk>\n    \\<Longrightarrow> k' * cis (\\<phi> / 2) \\<noteq> 0 \\<and>\n                      mat_det\n                       (cis (\\<phi> / 2), - a' * cis (\\<phi> / 2),\n                        cnj (- a' * cis (\\<phi> / 2)),\n                        cnj (cis (\\<phi> / 2))) \\<noteq>\n                      0 \\<and>\n                      M =\n                      (k' * cis (\\<phi> / 2)) *\\<^sub>s\\<^sub>m\n                      (cis (\\<phi> / 2), - a' * cis (\\<phi> / 2),\n                       cnj (- a' * cis (\\<phi> / 2)),\n                       cnj (cis (\\<phi> / 2)))", "apply (simp add: cis_mult mult.commute mult.left_commute)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma unitary11_gen_cis_inversion:\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0)\" and \"b \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi>. k' \\<noteq> 0 \\<and>\n                              M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "using assms"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0)\n  b \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "using rcis_cmod_arg[of b, symmetric] rcis_cnj[of b] cis_rcis_eq"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0)\n  b \\<noteq> 0\n  b = rcis (cmod b) (arg b)\n  cnj b = rcis (cmod b) (- arg b)\n  cis ?a = rcis 1 ?a\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "by simp (rule_tac x=\"2*arg b\" in exI, simp add: rcis_mult)"], ["", "lemma unitary11_gen_cis_inversion':\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, b, cnj b, 0)\" and \"b \\<noteq> 0\"\n  shows \"\\<exists> k' \\<phi>. k' \\<noteq> 0 \\<and>\n                   M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "obtain k' \\<phi> where *: \"k' \\<noteq> 0\" \"k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0) = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k' \\<phi>.\n        \\<lbrakk>k' \\<noteq> 0;\n         k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0) =\n         k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (0, 1, 1, 0)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_cis_inversion[OF \\<open>k \\<noteq> 0\\<close> _ \\<open>b \\<noteq> 0\\<close>]"], ["proof (prove)\nusing this:\n  ?M = k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0) \\<Longrightarrow>\n  \\<exists>k' \\<phi>.\n     k' \\<noteq> 0 \\<and>\n     ?M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (0, 1, 1, 0)\n\ngoal (1 subgoal):\n 1. (\\<And>k' \\<phi>.\n        \\<lbrakk>k' \\<noteq> 0;\n         k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0) =\n         k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (0, 1, 1, 0)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  k' \\<noteq> 0\n  k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0) =\n  k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "have \"(cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (-1, 0, 0, 1) = (cis (\\<phi> + pi), 0, 0, 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n    (cis (\\<phi> + pi), 0, 0, 1)", "by (simp add: cis_def complex.corec Complex_eq)"], ["proof (state)\nthis:\n  (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n  (cis (\\<phi> + pi), 0, 0, 1)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n  (cis (\\<phi> + pi), 0, 0, 1)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "using * \\<open>M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, b, cnj b, 0)\\<close>"], ["proof (prove)\nusing this:\n  (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (- 1, 0, 0, 1) =\n  (cis (\\<phi> + pi), 0, 0, 1)\n  k' \\<noteq> 0\n  k *\\<^sub>s\\<^sub>m (0, b, cnj b, 0) =\n  k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\n  M = k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, b, cnj b, 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k' \\<phi>.\n       k' \\<noteq> 0 \\<and>\n       M =\n       k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (0, 1, 1, 0)", "by (rule_tac x=\"k'\" in exI, rule_tac x=\"\\<phi> + pi\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>k' \\<phi>.\n     k' \\<noteq> 0 \\<and>\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (0, 1, 1, 0)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_cis_inversion_rev:\n  assumes \"k' \\<noteq> 0\" and \"M = k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\"\n  shows \"\\<exists> k a b. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                          M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using assms"], ["proof (prove)\nusing this:\n  k' \\<noteq> 0\n  M =\n  k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m (0, 1, 1, 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "by (rule_tac x=\"k'*cis(\\<phi>/2)\" in exI, rule_tac x=0 in exI, rule_tac x=\"cis(\\<phi>/2)\" in exI) (simp add: cis_mult)"], ["", "text \\<open>Another characterization of generalized unitary11 matrices\\<close>"], ["", "lemma unitary11_gen_iff:\n  shows \"unitary11_gen M \\<longleftrightarrow> \n         (\\<exists> k a b. k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                           M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\" (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen M =\n    (\\<exists>k a b.\n        k \\<noteq> 0 \\<and>\n        mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n        M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11_gen M", "assume ?lhs"], ["proof (state)\nthis:\n  unitary11_gen M\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11_gen M", "then"], ["proof (chain)\npicking this:\n  unitary11_gen M", "obtain a b k where *: \"k \\<noteq> 0\" \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or> M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\nusing this:\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n         M =\n         k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_iff'"], ["proof (prove)\nusing this:\n  unitary11_gen M\n  unitary11_gen ?M =\n  (\\<exists>a b k.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      (?M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n       ?M =\n       k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (a, b, cnj b, cnj a)))\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n         M =\n         k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n         (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (2 subgoals):\n 1. unitary11_gen M \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11_gen M", "show ?rhs"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "proof (cases \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "case True"], ["proof (state)\nthis:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (2 subgoals):\n 1. M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "thus ?thesis"], ["proof (prove)\nusing this:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using *"], ["proof (prove)\nusing this:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "by auto"], ["proof (state)\nthis:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "case False"], ["proof (state)\nthis:\n  M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "hence **: \"M = k *\\<^sub>s\\<^sub>m (-1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\nusing this:\n  M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. M =\n    k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n    (a, b, cnj b, cnj a)", "using *"], ["proof (prove)\nusing this:\n  M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. M =\n    k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n    (a, b, cnj b, cnj a)", "by simp"], ["proof (state)\nthis:\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. M \\<noteq> k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "proof (cases \"a = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. a \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "case True"], ["proof (state)\nthis:\n  a = 0\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. a \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "hence \"b \\<noteq> 0\""], ["proof (prove)\nusing this:\n  a = 0\n\ngoal (1 subgoal):\n 1. b \\<noteq> 0", "using *"], ["proof (prove)\nusing this:\n  a = 0\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. b \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  b \\<noteq> 0\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. a \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using unitary11_gen_cis_inversion_rev[of _ M]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k' \\<noteq> 0;\n   M =\n   ?k' *\\<^sub>s\\<^sub>m (cis ?\\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n   (0, 1, 1, 0)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using ** \\<open>a = 0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k' \\<noteq> 0;\n   M =\n   ?k' *\\<^sub>s\\<^sub>m (cis ?\\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n   (0, 1, 1, 0)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n  a = 0\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using unitary11_gen_cis_inversion'[OF \\<open>k \\<noteq> 0\\<close> _ \\<open>b \\<noteq> 0\\<close>, of M]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k' \\<noteq> 0;\n   M =\n   ?k' *\\<^sub>s\\<^sub>m (cis ?\\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n   (0, 1, 1, 0)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n  a = 0\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n  (0, b, cnj b, 0) \\<Longrightarrow>\n  \\<exists>k' \\<phi>.\n     k' \\<noteq> 0 \\<and>\n     M =\n     k' *\\<^sub>s\\<^sub>m (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n     (0, 1, 1, 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "by auto"], ["proof (state)\nthis:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. a \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "case False"], ["proof (state)\nthis:\n  a \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using unitary11_gen_cis_blaschke_rev[of _ M]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k' \\<noteq> 0;\n   M =\n   ?k' *\\<^sub>s\\<^sub>m (cis ?\\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n   (1, - ?a', - cnj ?a', 1);\n   ?a' * cnj ?a' \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using **"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k' \\<noteq> 0;\n   M =\n   ?k' *\\<^sub>s\\<^sub>m (cis ?\\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n   (1, - ?a', - cnj ?a', 1);\n   ?a' * cnj ?a' \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using unitary11_gen_cis_blaschke'[OF \\<open>k \\<noteq> 0\\<close> _ \\<open>a \\<noteq> 0\\<close>, of M b] \\<open>mat_det (a, b, cnj b, cnj a) \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k' \\<noteq> 0;\n   M =\n   ?k' *\\<^sub>s\\<^sub>m (cis ?\\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n   (1, - ?a', - cnj ?a', 1);\n   ?a' * cnj ?a' \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n                       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M =\n  k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m (a, b, cnj b, cnj a)\n  \\<lbrakk>M =\n           k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n           (a, b, cnj b, cnj a);\n   mat_det (a, b, cnj b, cnj a) \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k' \\<phi> a'.\n                       k' \\<noteq> 0 \\<and>\n                       a' * cnj a' \\<noteq> 1 \\<and>\n                       M =\n                       k' *\\<^sub>s\\<^sub>m\n                       (cis \\<phi>, 0, 0, 1) *\\<^sub>m\\<^sub>m\n                       (1, - a', - cnj a', 1)\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "by blast"], ["proof (state)\nthis:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11_gen M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11_gen M", "assume ?rhs"], ["proof (state)\nthis:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11_gen M", "thus ?lhs"], ["proof (prove)\nusing this:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. unitary11_gen M", "using unitary11_gen_iff'"], ["proof (prove)\nusing this:\n  \\<exists>k a b.\n     k \\<noteq> 0 \\<and>\n     mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  unitary11_gen ?M =\n  (\\<exists>a b k.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      (?M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<or>\n       ?M =\n       k *\\<^sub>s\\<^sub>m (- 1, 0, 0, 1) *\\<^sub>m\\<^sub>m\n       (a, b, cnj b, cnj a)))\n\ngoal (1 subgoal):\n 1. unitary11_gen M", "by auto"], ["proof (state)\nthis:\n  unitary11_gen M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_iff:\n  shows \"unitary11 M \\<longleftrightarrow>\n         (\\<exists> a b k. (cmod a)\\<^sup>2 > (cmod b)\\<^sup>2 \\<and>\n                           (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n                           M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\" (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11 M =\n    (\\<exists>a b k.\n        (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n        (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n        M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "assume ?lhs"], ["proof (state)\nthis:\n  unitary11 M\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "obtain k a b where *:\n    \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\"\"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" \"k \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a);\n         mat_det (a, b, cnj b, cnj a) \\<noteq> 0; k \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_iff unitary11_unitary11_gen[OF \\<open>unitary11 M\\<close>]"], ["proof (prove)\nusing this:\n  unitary11_gen ?M =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      ?M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a);\n         mat_det (a, b, cnj b, cnj a) \\<noteq> 0; k \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  k \\<noteq> 0\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "have md: \"mat_det (a, b, cnj b, cnj a) = cor ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_det (a, b, cnj b, cnj a) = cor ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2)", "by (auto simp add: complex_mult_cnj_cmod)"], ["proof (state)\nthis:\n  mat_det (a, b, cnj b, cnj a) = cor ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2)\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "hence **: \"(cmod a)\\<^sup>2 \\<noteq> (cmod b)\\<^sup>2\""], ["proof (prove)\nusing this:\n  mat_det (a, b, cnj b, cnj a) = cor ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (cmod a)\\<^sup>2 \\<noteq> (cmod b)\\<^sup>2", "using \\<open>mat_det (a, b, cnj b, cnj a) \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  mat_det (a, b, cnj b, cnj a) = cor ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2)\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (cmod a)\\<^sup>2 \\<noteq> (cmod b)\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  (cmod a)\\<^sup>2 \\<noteq> (cmod b)\\<^sup>2\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "have \"k * cnj k * mat_det (a, b, cnj b, cnj a) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k * cnj k * mat_det (a, b, cnj b, cnj a) = 1", "using \\<open>M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<close>"], ["proof (prove)\nusing this:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. k * cnj k * mat_det (a, b, cnj b, cnj a) = 1", "using \\<open>unitary11 M\\<close>"], ["proof (prove)\nusing this:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  unitary11 M\n\ngoal (1 subgoal):\n 1. k * cnj k * mat_det (a, b, cnj b, cnj a) = 1", "unfolding unitary11_def"], ["proof (prove)\nusing this:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  congruence M (1, 0, 0, - 1) = (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. k * cnj k * mat_det (a, b, cnj b, cnj a) = 1", "by (auto simp add: mat_adj_def mat_cnj_def) (simp add: field_simps)"], ["proof (state)\nthis:\n  k * cnj k * mat_det (a, b, cnj b, cnj a) = 1\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "hence ***: \"(cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) = 1\""], ["proof (prove)\nusing this:\n  k * cnj k * mat_det (a, b, cnj b, cnj a) = 1\n\ngoal (1 subgoal):\n 1. (cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) = 1", "by (subst (asm) complex_mult_cnj_cmod, subst (asm) md, subst (asm) cor_mult[symmetric]) (metis of_real_1 of_real_eq_iff)"], ["proof (state)\nthis:\n  (cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) = 1\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "hence \"((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) = 1 / (cmod k)\\<^sup>2\""], ["proof (prove)\nusing this:\n  (cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) = 1\n\ngoal (1 subgoal):\n 1. (cmod a)\\<^sup>2 - (cmod b)\\<^sup>2 = 1 / (cmod k)\\<^sup>2", "by (cases \"k=0\") (auto simp add: field_simps)"], ["proof (state)\nthis:\n  (cmod a)\\<^sup>2 - (cmod b)\\<^sup>2 = 1 / (cmod k)\\<^sup>2\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "hence \"cmod a ^ 2 = cmod b ^ 2 + 1 / cmod k ^ 2\""], ["proof (prove)\nusing this:\n  (cmod a)\\<^sup>2 - (cmod b)\\<^sup>2 = 1 / (cmod k)\\<^sup>2\n\ngoal (1 subgoal):\n 1. (cmod a)\\<^sup>2 = (cmod b)\\<^sup>2 + 1 / (cmod k)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  (cmod a)\\<^sup>2 = (cmod b)\\<^sup>2 + 1 / (cmod k)\\<^sup>2\n\ngoal (2 subgoals):\n 1. unitary11 M \\<Longrightarrow>\n    \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n 2. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "thus ?rhs"], ["proof (prove)\nusing this:\n  (cmod a)\\<^sup>2 = (cmod b)\\<^sup>2 + 1 / (cmod k)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "using \\<open>M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<close> ** mat_eye_l"], ["proof (prove)\nusing this:\n  (cmod a)\\<^sup>2 = (cmod b)\\<^sup>2 + 1 / (cmod k)\\<^sup>2\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  (cmod a)\\<^sup>2 \\<noteq> (cmod b)\\<^sup>2\n  eye *\\<^sub>m\\<^sub>m ?A = ?A\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "by (rule_tac x=\"a\" in exI, rule_tac x=\"b\" in exI, rule_tac x=\"k\" in exI)\n       (auto simp add: complex_mult_cnj_cmod intro!: )"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n     (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "assume ?rhs"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n     (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "then"], ["proof (chain)\npicking this:\n  \\<exists>a b k.\n     (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n     (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "obtain a b k where \"(cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and> (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and> M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\nusing this:\n  \\<exists>a b k.\n     (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n     (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. (\\<And>b a k.\n        (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n        (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n        M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n  (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "moreover"], ["proof (state)\nthis:\n  (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n  (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "have \"cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) = (cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "have \"cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)", "using complex_mult_cnj_cmod[of a] complex_mult_cnj_cmod[of k]"], ["proof (prove)\nusing this:\n  a * cnj a = cor ((cmod a)\\<^sup>2)\n  k * cnj k = cor ((cmod k)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "moreover"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "have \"cnj k * b * (k * cnj b) = cor ((cmod k)\\<^sup>2 * (cmod b)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * b * (k * cnj b) = cor ((cmod k)\\<^sup>2 * (cmod b)\\<^sup>2)", "using complex_mult_cnj_cmod[of b, symmetric] complex_mult_cnj_cmod[of k]"], ["proof (prove)\nusing this:\n  cor ((cmod b)\\<^sup>2) = b * cnj b\n  k * cnj k = cor ((cmod k)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. cnj k * b * (k * cnj b) = cor ((cmod k)\\<^sup>2 * (cmod b)\\<^sup>2)", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * b * (k * cnj b) = cor ((cmod k)\\<^sup>2 * (cmod b)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "ultimately"], ["proof (chain)\npicking this:\n  cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)\n  cnj k * b * (k * cnj b) = cor ((cmod k)\\<^sup>2 * (cmod b)\\<^sup>2)", "show ?thesis"], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) = cor ((cmod k)\\<^sup>2 * (cmod a)\\<^sup>2)\n  cnj k * b * (k * cnj b) = cor ((cmod k)\\<^sup>2 * (cmod b)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n    cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n       (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n    unitary11 M", "ultimately"], ["proof (chain)\npicking this:\n  (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n  (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))", "show ?lhs"], ["proof (prove)\nusing this:\n  (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n  (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. unitary11 M", "unfolding unitary11_def"], ["proof (prove)\nusing this:\n  (cmod b)\\<^sup>2 < (cmod a)\\<^sup>2 \\<and>\n  (cmod k)\\<^sup>2 = 1 / ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2) \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  cnj k * cnj a * (k * a) + - (cnj k * b * (k * cnj b)) =\n  cor ((cmod k)\\<^sup>2 * ((cmod a)\\<^sup>2 - (cmod b)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. congruence M (1, 0, 0, - 1) = (1, 0, 0, - 1)", "by (auto simp add: mat_adj_def mat_cnj_def field_simps)"], ["proof (state)\nthis:\n  unitary11 M\n\ngoal:\nNo subgoals!", "qed"], ["", "(* ----------------------------------------------------------------- *)"], ["", "subsubsection \\<open>Group properties\\<close>"], ["", "(* ----------------------------------------------------------------- *)"], ["", "text \\<open>Generalized unitary11 matrices form a group under\nmultiplication (it is sometimes denoted by $GU_{1, 1}(2,\n\\mathbb{C})$). The group is also closed under non-zero complex scalar\nmultiplication. Since these matrices are always regular, they form a\nsubgroup of general linear group (usually denoted by $GL(2,\n\\mathbb{C})$) of all regular matrices.\\<close>"], ["", "lemma unitary11_gen_mult_sm:\n  assumes \"k \\<noteq> 0\" and \"unitary11_gen M\"\n  shows \"unitary11_gen (k *\\<^sub>s\\<^sub>m M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen (k *\\<^sub>s\\<^sub>m M)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. unitary11_gen (k *\\<^sub>s\\<^sub>m M)", "have \"k * cnj k = cor (Re (k * cnj k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k * cnj k = cor (Re (k * cnj k))", "by (subst complex_of_real_Re) auto"], ["proof (state)\nthis:\n  k * cnj k = cor (Re (k * cnj k))\n\ngoal (1 subgoal):\n 1. unitary11_gen (k *\\<^sub>s\\<^sub>m M)", "thus ?thesis"], ["proof (prove)\nusing this:\n  k * cnj k = cor (Re (k * cnj k))\n\ngoal (1 subgoal):\n 1. unitary11_gen (k *\\<^sub>s\\<^sub>m M)", "using assms"], ["proof (prove)\nusing this:\n  k * cnj k = cor (Re (k * cnj k))\n  k \\<noteq> 0\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. unitary11_gen (k *\\<^sub>s\\<^sub>m M)", "unfolding unitary11_gen_real"], ["proof (prove)\nusing this:\n  k * cnj k = cor (Re (k * cnj k))\n  k \\<noteq> 0\n  \\<exists>k.\n     k \\<noteq> 0 \\<and>\n     congruence M (1, 0, 0, - 1) = cor k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal (1 subgoal):\n 1. \\<exists>ka.\n       ka \\<noteq> 0 \\<and>\n       congruence (k *\\<^sub>s\\<^sub>m M) (1, 0, 0, - 1) =\n       cor ka *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by auto (rule_tac x=\"Re (k*cnj k) * ka\" in exI, auto)"], ["proof (state)\nthis:\n  unitary11_gen (k *\\<^sub>s\\<^sub>m M)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_div_sm:\n  assumes \"k \\<noteq> 0\" and \"unitary11_gen (k *\\<^sub>s\\<^sub>m M)\"\n  shows \"unitary11_gen M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen M", "using assms unitary11_gen_mult_sm[of \"1/k\" \"k *\\<^sub>s\\<^sub>m M\"]"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  unitary11_gen (k *\\<^sub>s\\<^sub>m M)\n  \\<lbrakk>1 / k \\<noteq> 0; unitary11_gen (k *\\<^sub>s\\<^sub>m M)\\<rbrakk>\n  \\<Longrightarrow> unitary11_gen\n                     ((1 / k) *\\<^sub>s\\<^sub>m (k *\\<^sub>s\\<^sub>m M))\n\ngoal (1 subgoal):\n 1. unitary11_gen M", "by simp"], ["", "lemma unitary11_inv:\n  assumes \"k \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\"\n  shows \"\\<exists> k' a' b'. k' \\<noteq> 0 \\<and> mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and> mat_det (a', b', cnj b', cnj a') \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k' a' b'.\n       k' \\<noteq> 0 \\<and>\n       mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n       mat_det (a', b', cnj b', cnj a') \\<noteq> 0", "using assms"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k' a' b'.\n       k' \\<noteq> 0 \\<and>\n       mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n       mat_det (a', b', cnj b', cnj a') \\<noteq> 0", "by (subst assms, subst mat_inv_mult_sm[OF assms(1)])\n     (rule_tac x=\"1/(k * mat_det (a, b, cnj b, cnj a))\" in exI, rule_tac x=\"cnj a\" in exI, rule_tac x=\"-b\" in exI, simp add: field_simps)"], ["", "lemma unitary11_comp:\n  assumes \"k1 \\<noteq> 0\" and \"M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\" and \"mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0\"\n          \"k2 \\<noteq> 0\" \"M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\" \"mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\"\n  shows \"\\<exists> k a b. k \\<noteq> 0 \\<and> M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       M1 *\\<^sub>m\\<^sub>m M2 =\n       k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0", "using assms"], ["proof (prove)\nusing this:\n  k1 \\<noteq> 0\n  M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\n  mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0\n  k2 \\<noteq> 0\n  M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\n  mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>k a b.\n       k \\<noteq> 0 \\<and>\n       M1 *\\<^sub>m\\<^sub>m M2 =\n       k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       mat_det (a, b, cnj b, cnj a) \\<noteq> 0", "apply (rule_tac x=\"k1*k2\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1);\n     mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0; k2 \\<noteq> 0;\n     M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2);\n     mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>a b.\n                         k1 * k2 \\<noteq> 0 \\<and>\n                         M1 *\\<^sub>m\\<^sub>m M2 =\n                         (k1 * k2) *\\<^sub>s\\<^sub>m\n                         (a, b, cnj b, cnj a) \\<and>\n                         mat_det (a, b, cnj b, cnj a) \\<noteq> 0", "apply (rule_tac x=\"a1*a2 + b1*cnj b2\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1);\n     mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0; k2 \\<noteq> 0;\n     M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2);\n     mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>b.\n                         k1 * k2 \\<noteq> 0 \\<and>\n                         M1 *\\<^sub>m\\<^sub>m M2 =\n                         (k1 * k2) *\\<^sub>s\\<^sub>m\n                         (a1 * a2 + b1 * cnj b2, b, cnj b,\n                          cnj (a1 * a2 + b1 * cnj b2)) \\<and>\n                         mat_det\n                          (a1 * a2 + b1 * cnj b2, b, cnj b,\n                           cnj (a1 * a2 + b1 * cnj b2)) \\<noteq>\n                         0", "apply (rule_tac x=\"a1*b2 + b1*cnj a2\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1);\n     mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0; k2 \\<noteq> 0;\n     M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2);\n     mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> k1 * k2 \\<noteq> 0 \\<and>\n                      M1 *\\<^sub>m\\<^sub>m M2 =\n                      (k1 * k2) *\\<^sub>s\\<^sub>m\n                      (a1 * a2 + b1 * cnj b2, a1 * b2 + b1 * cnj a2,\n                       cnj (a1 * b2 + b1 * cnj a2),\n                       cnj (a1 * a2 + b1 * cnj b2)) \\<and>\n                      mat_det\n                       (a1 * a2 + b1 * cnj b2, a1 * b2 + b1 * cnj a2,\n                        cnj (a1 * b2 + b1 * cnj a2),\n                        cnj (a1 * a2 + b1 * cnj b2)) \\<noteq>\n                      0", "proof (auto simp add: algebra_simps)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = (a1 * k1, b1 * k1, k1 * cnj b1, k1 * cnj a1);\n     a1 * cnj a1 \\<noteq> b1 * cnj b1; k2 \\<noteq> 0;\n     M2 = (a2 * k2, b2 * k2, k2 * cnj b2, k2 * cnj a2);\n     a2 * cnj a2 \\<noteq> b2 * cnj b2;\n     a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n     a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\\<rbrakk>\n    \\<Longrightarrow> False", "assume *: \"a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n            a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\" and\n         **: \"a1*cnj a1 \\<noteq> b1 * cnj b1\" \"a2*cnj a2 \\<noteq> b2*cnj b2\""], ["proof (state)\nthis:\n  a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n  a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\n  a1 * cnj a1 \\<noteq> b1 * cnj b1\n  a2 * cnj a2 \\<noteq> b2 * cnj b2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = (a1 * k1, b1 * k1, k1 * cnj b1, k1 * cnj a1);\n     a1 * cnj a1 \\<noteq> b1 * cnj b1; k2 \\<noteq> 0;\n     M2 = (a2 * k2, b2 * k2, k2 * cnj b2, k2 * cnj a2);\n     a2 * cnj a2 \\<noteq> b2 * cnj b2;\n     a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n     a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\\<rbrakk>\n    \\<Longrightarrow> False", "hence \"(a1*cnj a1)*(a2*cnj a2 - b2*cnj b2) = (b1*cnj b1)*(a2*cnj a2 - b2*cnj b2)\""], ["proof (prove)\nusing this:\n  a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n  a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\n  a1 * cnj a1 \\<noteq> b1 * cnj b1\n  a2 * cnj a2 \\<noteq> b2 * cnj b2\n\ngoal (1 subgoal):\n 1. a1 * cnj a1 * (a2 * cnj a2 - b2 * cnj b2) =\n    b1 * cnj b1 * (a2 * cnj a2 - b2 * cnj b2)", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  a1 * cnj a1 * (a2 * cnj a2 - b2 * cnj b2) =\n  b1 * cnj b1 * (a2 * cnj a2 - b2 * cnj b2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = (a1 * k1, b1 * k1, k1 * cnj b1, k1 * cnj a1);\n     a1 * cnj a1 \\<noteq> b1 * cnj b1; k2 \\<noteq> 0;\n     M2 = (a2 * k2, b2 * k2, k2 * cnj b2, k2 * cnj a2);\n     a2 * cnj a2 \\<noteq> b2 * cnj b2;\n     a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n     a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\\<rbrakk>\n    \\<Longrightarrow> False", "hence \"a1*cnj a1 = b1*cnj b1\""], ["proof (prove)\nusing this:\n  a1 * cnj a1 * (a2 * cnj a2 - b2 * cnj b2) =\n  b1 * cnj b1 * (a2 * cnj a2 - b2 * cnj b2)\n\ngoal (1 subgoal):\n 1. a1 * cnj a1 = b1 * cnj b1", "using **(2)"], ["proof (prove)\nusing this:\n  a1 * cnj a1 * (a2 * cnj a2 - b2 * cnj b2) =\n  b1 * cnj b1 * (a2 * cnj a2 - b2 * cnj b2)\n  a2 * cnj a2 \\<noteq> b2 * cnj b2\n\ngoal (1 subgoal):\n 1. a1 * cnj a1 = b1 * cnj b1", "by simp"], ["proof (state)\nthis:\n  a1 * cnj a1 = b1 * cnj b1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>k1 \\<noteq> 0;\n     M1 = (a1 * k1, b1 * k1, k1 * cnj b1, k1 * cnj a1);\n     a1 * cnj a1 \\<noteq> b1 * cnj b1; k2 \\<noteq> 0;\n     M2 = (a2 * k2, b2 * k2, k2 * cnj b2, k2 * cnj a2);\n     a2 * cnj a2 \\<noteq> b2 * cnj b2;\n     a1 * (a2 * (cnj a1 * cnj a2)) + b1 * (b2 * (cnj b1 * cnj b2)) =\n     a1 * (b2 * (cnj a1 * cnj b2)) + a2 * (b1 * (cnj a2 * cnj b1))\\<rbrakk>\n    \\<Longrightarrow> False", "thus False"], ["proof (prove)\nusing this:\n  a1 * cnj a1 = b1 * cnj b1\n\ngoal (1 subgoal):\n 1. False", "using **(1)"], ["proof (prove)\nusing this:\n  a1 * cnj a1 = b1 * cnj b1\n  a1 * cnj a1 \\<noteq> b1 * cnj b1\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_mat_inv:\n  assumes \"unitary11_gen M\" and \"mat_det M \\<noteq> 0\"\n  shows \"unitary11_gen (mat_inv M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen (mat_inv M)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. unitary11_gen (mat_inv M)", "obtain k a b where \"k \\<noteq> 0 \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and> M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        k \\<noteq> 0 \\<and>\n        mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n        M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms unitary11_gen_iff[of M]"], ["proof (prove)\nusing this:\n  unitary11_gen M\n  mat_det M \\<noteq> 0\n  unitary11_gen M =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        k \\<noteq> 0 \\<and>\n        mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n        M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0 \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. unitary11_gen (mat_inv M)", "then"], ["proof (chain)\npicking this:\n  k \\<noteq> 0 \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)", "obtain k' a' b' where \"k' \\<noteq> 0 \\<and> mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and> mat_det (a', b', cnj b', cnj a') \\<noteq> 0\""], ["proof (prove)\nusing this:\n  k \\<noteq> 0 \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. (\\<And>k' a' b'.\n        k' \\<noteq> 0 \\<and>\n        mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n        mat_det (a', b', cnj b', cnj a') \\<noteq> 0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using unitary11_inv [of k M a b]"], ["proof (prove)\nusing this:\n  k \\<noteq> 0 \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  \\<lbrakk>k \\<noteq> 0; M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a);\n   mat_det (a, b, cnj b, cnj a) \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k' a' b'.\n                       k' \\<noteq> 0 \\<and>\n                       mat_inv M =\n                       k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n                       mat_det (a', b', cnj b', cnj a') \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>k' a' b'.\n        k' \\<noteq> 0 \\<and>\n        mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n        mat_det (a', b', cnj b', cnj a') \\<noteq> 0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k' \\<noteq> 0 \\<and>\n  mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n  mat_det (a', b', cnj b', cnj a') \\<noteq> 0\n\ngoal (1 subgoal):\n 1. unitary11_gen (mat_inv M)", "thus ?thesis"], ["proof (prove)\nusing this:\n  k' \\<noteq> 0 \\<and>\n  mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n  mat_det (a', b', cnj b', cnj a') \\<noteq> 0\n\ngoal (1 subgoal):\n 1. unitary11_gen (mat_inv M)", "using unitary11_gen_iff[of \"mat_inv M\"]"], ["proof (prove)\nusing this:\n  k' \\<noteq> 0 \\<and>\n  mat_inv M = k' *\\<^sub>s\\<^sub>m (a', b', cnj b', cnj a') \\<and>\n  mat_det (a', b', cnj b', cnj a') \\<noteq> 0\n  unitary11_gen (mat_inv M) =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      mat_inv M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. unitary11_gen (mat_inv M)", "by auto"], ["proof (state)\nthis:\n  unitary11_gen (mat_inv M)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_gen_comp:\n  assumes \"unitary11_gen M1\" and \"mat_det M1 \\<noteq> 0\" and \"unitary11_gen M2\"  and \"mat_det M2 \\<noteq> 0\"\n  shows \"unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)", "from assms"], ["proof (chain)\npicking this:\n  unitary11_gen M1\n  mat_det M1 \\<noteq> 0\n  unitary11_gen M2\n  mat_det M2 \\<noteq> 0", "obtain k1 k2 a1 a2 b1 b2 where\n    \"k1 \\<noteq> 0 \\<and> mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and> M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\"\n    \"k2 \\<noteq> 0 \\<and> mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and> M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\""], ["proof (prove)\nusing this:\n  unitary11_gen M1\n  mat_det M1 \\<noteq> 0\n  unitary11_gen M2\n  mat_det M2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>k1 a1 b1 k2 a2 b2.\n        \\<lbrakk>k1 \\<noteq> 0 \\<and>\n                 mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and>\n                 M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1);\n         k2 \\<noteq> 0 \\<and>\n         mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and>\n         M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_iff[of M1]  unitary11_gen_iff[of M2]"], ["proof (prove)\nusing this:\n  unitary11_gen M1\n  mat_det M1 \\<noteq> 0\n  unitary11_gen M2\n  mat_det M2 \\<noteq> 0\n  unitary11_gen M1 =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M1 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n  unitary11_gen M2 =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (\\<And>k1 a1 b1 k2 a2 b2.\n        \\<lbrakk>k1 \\<noteq> 0 \\<and>\n                 mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and>\n                 M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1);\n         k2 \\<noteq> 0 \\<and>\n         mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and>\n         M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  k1 \\<noteq> 0 \\<and>\n  mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and>\n  M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\n  k2 \\<noteq> 0 \\<and>\n  mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and>\n  M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\n\ngoal (1 subgoal):\n 1. unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)", "then"], ["proof (chain)\npicking this:\n  k1 \\<noteq> 0 \\<and>\n  mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and>\n  M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\n  k2 \\<noteq> 0 \\<and>\n  mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and>\n  M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)", "obtain k a b where \"k \\<noteq> 0 \\<and> M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and> mat_det (a, b, cnj b, cnj a) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  k1 \\<noteq> 0 \\<and>\n  mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and>\n  M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\n  k2 \\<noteq> 0 \\<and>\n  mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and>\n  M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        k \\<noteq> 0 \\<and>\n        M1 *\\<^sub>m\\<^sub>m M2 =\n        k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n        mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using unitary11_comp[of k1 M1 a1 b1 k2 M2 a2 b2]"], ["proof (prove)\nusing this:\n  k1 \\<noteq> 0 \\<and>\n  mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0 \\<and>\n  M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1)\n  k2 \\<noteq> 0 \\<and>\n  mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0 \\<and>\n  M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2)\n  \\<lbrakk>k1 \\<noteq> 0;\n   M1 = k1 *\\<^sub>s\\<^sub>m (a1, b1, cnj b1, cnj a1);\n   mat_det (a1, b1, cnj b1, cnj a1) \\<noteq> 0; k2 \\<noteq> 0;\n   M2 = k2 *\\<^sub>s\\<^sub>m (a2, b2, cnj b2, cnj a2);\n   mat_det (a2, b2, cnj b2, cnj a2) \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k a b.\n                       k \\<noteq> 0 \\<and>\n                       M1 *\\<^sub>m\\<^sub>m M2 =\n                       k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n                       mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        k \\<noteq> 0 \\<and>\n        M1 *\\<^sub>m\\<^sub>m M2 =\n        k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n        mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  k \\<noteq> 0 \\<and>\n  M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  k \\<noteq> 0 \\<and>\n  M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)", "using unitary11_gen_iff[of \"M1 *\\<^sub>m\\<^sub>m M2\"]"], ["proof (prove)\nusing this:\n  k \\<noteq> 0 \\<and>\n  M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2) =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M1 *\\<^sub>m\\<^sub>m M2 = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)", "by blast"], ["proof (state)\nthis:\n  unitary11_gen (M1 *\\<^sub>m\\<^sub>m M2)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Classification into orientation-preserving and orientation-reversing matrices\\<close>"], ["", "lemma unitary11_sgn_det_orientation:\n  assumes \"k \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\"\n  shows \"\\<exists> k'. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and> congruence M (1, 0, 0, -1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "let ?x = \"cnj k * cnj a * (k * a) - (cnj k * b * (k * cnj b))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "have *: \"?x = k * cnj k * (a * cnj a - b * cnj b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) =\n    k * cnj k * (a * cnj a - b * cnj b)", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) =\n  k * cnj k * (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "hence \"is_real ?x\""], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) =\n  k * cnj k * (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. is_real (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))", "by auto"], ["proof (state)\nthis:\n  is_real (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "hence \"cor (Re ?x) = ?x\""], ["proof (prove)\nusing this:\n  is_real (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))\n\ngoal (1 subgoal):\n 1. cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)", "by (rule complex_of_real_Re)"], ["proof (state)\nthis:\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "moreover"], ["proof (state)\nthis:\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "have \"sgn (Re ?x) = sgn (Re (a * cnj a - b * cnj b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "have *: \"Re ?x = (cmod k)\\<^sup>2 * Re (a * cnj a - b * cnj b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)) =\n    (cmod k)\\<^sup>2 * Re (a * cnj a - b * cnj b)", "by (subst *, subst complex_mult_cnj_cmod, subst Re_mult_real) (metis Im_complex_of_real, metis Re_complex_of_real)"], ["proof (state)\nthis:\n  Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)) =\n  (cmod k)\\<^sup>2 * Re (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "using \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "by (subst *) (simp add: sgn_mult)"], ["proof (state)\nthis:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "ultimately"], ["proof (chain)\npicking this:\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))", "show ?thesis"], ["proof (prove)\nusing this:\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "using assms(3)"], ["proof (prove)\nusing this:\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by (rule_tac x=\"Re ?x\" in exI) (auto simp add: mat_adj_def mat_cnj_def)"], ["proof (state)\nthis:\n  \\<exists>k'.\n     sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n     congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_sgn_det:\n  assumes \"k \\<noteq> 0\" and \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" and \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\" and \"M = (A, B, C, D)\"\n  shows \"sgn (Re (mat_det (a, b, cnj b, cnj a))) = (if b = 0 then 1 else sgn (Re ((A*D)/(B*C)) - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "proof (cases \"b = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. b = 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))\n 2. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "case True"], ["proof (state)\nthis:\n  b = 0\n\ngoal (2 subgoals):\n 1. b = 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))\n 2. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "thus ?thesis"], ["proof (prove)\nusing this:\n  b = 0\n\ngoal (1 subgoal):\n 1. sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "using assms"], ["proof (prove)\nusing this:\n  b = 0\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "by (simp only: mat_det.simps, subst complex_mult_cnj_cmod, subst minus_complex.sel, subst Re_complex_of_real, simp)"], ["proof (state)\nthis:\n  sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n  (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))\n\ngoal (1 subgoal):\n 1. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "case False"], ["proof (state)\nthis:\n  b \\<noteq> 0\n\ngoal (1 subgoal):\n 1. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "from assms"], ["proof (chain)\npicking this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M = (A, B, C, D)", "have *: \"A =  k * a\" \"B =  k * b\" \"C =  k * cnj b\" \"D =  k * cnj a\""], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  M = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. (A = k * a &&& B = k * b) &&& C = k * cnj b &&& D = k * cnj a", "by auto"], ["proof (state)\nthis:\n  A = k * a\n  B = k * b\n  C = k * cnj b\n  D = k * cnj a\n\ngoal (1 subgoal):\n 1. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "hence *: \"(A*D)/(B*C) = (a*cnj a)/(b*cnj b)\""], ["proof (prove)\nusing this:\n  A = k * a\n  B = k * b\n  C = k * cnj b\n  D = k * cnj a\n\ngoal (1 subgoal):\n 1. A * D / (B * C) = a * cnj a / (b * cnj b)", "using \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  A = k * a\n  B = k * b\n  C = k * cnj b\n  D = k * cnj a\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. A * D / (B * C) = a * cnj a / (b * cnj b)", "by simp"], ["proof (state)\nthis:\n  A * D / (B * C) = a * cnj a / (b * cnj b)\n\ngoal (1 subgoal):\n 1. b \\<noteq> 0 \\<Longrightarrow>\n    sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "using \\<open>b \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  b \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n    (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))", "apply (subst *, subst Re_divide_real, simp, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<noteq> 0; b \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n                      (if b = 0 then 1\n                       else sgn (Re (a * cnj a) / Re (b * cnj b) - 1))", "apply (simp only: mat_det.simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> False; b \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> sgn (Re (a * cnj a - b * cnj b)) =\n                      (if False then 1\n                       else sgn (Re (a * cnj a) / Re (b * cnj b) - 1))", "apply (subst complex_mult_cnj_cmod)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> False; b \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> sgn (Re (cor ((cmod a)\\<^sup>2) -\n                               cor ((cmod b)\\<^sup>2))) =\n                      (if False then 1\n                       else sgn (Re (cor ((cmod a)\\<^sup>2)) /\n                                 Re (cor ((cmod b)\\<^sup>2)) -\n                                 1))", "apply ((subst Re_complex_of_real)+, subst minus_complex.sel, (subst Re_complex_of_real)+, simp add: field_simps sgn_if)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n  (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_orientation:\n  assumes \"unitary11_gen M\" and \"M = (A, B, C, D)\"\n  shows \"\\<exists> k'. sgn k' = sgn (if B = 0 then 1 else sgn (Re ((A*D)/(B*C)) - 1)) \\<and> congruence M (1, 0, 0, -1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "from \\<open>unitary11_gen M\\<close>"], ["proof (chain)\npicking this:\n  unitary11_gen M", "obtain k a b where *: \"k \\<noteq> 0\" \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" \"M = k*\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\nusing this:\n  unitary11_gen M\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_iff[of M]"], ["proof (prove)\nusing this:\n  unitary11_gen M\n  unitary11_gen M =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "moreover"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "have \"b = 0 \\<longleftrightarrow> B = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b = 0) = (B = 0)", "using \\<open>M = (A, B, C, D)\\<close> *"], ["proof (prove)\nusing this:\n  M = (A, B, C, D)\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. (b = 0) = (B = 0)", "by auto"], ["proof (state)\nthis:\n  (b = 0) = (B = 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "ultimately"], ["proof (chain)\npicking this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  (b = 0) = (B = 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  (b = 0) = (B = 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "using unitary11_sgn_det_orientation[OF *] unitary11_sgn_det[OF * \\<open>M = (A, B, C, D)\\<close>]"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  (b = 0) = (B = 0)\n  \\<exists>k'.\n     sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a))) \\<and>\n     congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  sgn (Re (mat_det (a, b, cnj b, cnj a))) =\n  (if b = 0 then 1 else sgn (Re (A * D / (B * C)) - 1))\n\ngoal (1 subgoal):\n 1. \\<exists>k'.\n       sgn k' =\n       sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n       congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)", "by auto"], ["proof (state)\nthis:\n  \\<exists>k'.\n     sgn k' =\n     sgn (if B = 0 then 1 else sgn (Re (A * D / (B * C)) - 1)) \\<and>\n     congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unitary11_sgn_det_orientation':\n  assumes \"congruence M (1, 0, 0, -1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, -1)\" and \"k' \\<noteq> 0\"\n  shows \"\\<exists> a b k. k \\<noteq> 0 \\<and> M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and> sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "obtain a b k where\n    \"k \\<noteq> 0\" \"mat_det (a, b, cnj b, cnj a) \\<noteq> 0\" \"M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  k' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unitary11_gen_iff[of M]"], ["proof (prove)\nusing this:\n  congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  k' \\<noteq> 0\n  unitary11_gen M =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding unitary11_gen_def"], ["proof (prove)\nusing this:\n  congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  k' \\<noteq> 0\n  (\\<exists>k.\n      k \\<noteq> 0 \\<and>\n      congruence M (1, 0, 0, - 1) = k *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)) =\n  (\\<exists>k a b.\n      k \\<noteq> 0 \\<and>\n      mat_det (a, b, cnj b, cnj a) \\<noteq> 0 \\<and>\n      M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a))\n\ngoal (1 subgoal):\n 1. (\\<And>k a b.\n        \\<lbrakk>k \\<noteq> 0; mat_det (a, b, cnj b, cnj a) \\<noteq> 0;\n         M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "moreover"], ["proof (state)\nthis:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "have \"sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "let ?x = \"cnj k * cnj a * (k * a) - (cnj k * b * (k * cnj b))\""], ["proof (state)\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "have *: \"?x = k * cnj k * (a * cnj a - b * cnj b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) =\n    k * cnj k * (a * cnj a - b * cnj b)", "by (auto simp add: field_simps)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) =\n  k * cnj k * (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "hence \"is_real ?x\""], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) =\n  k * cnj k * (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. is_real (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))", "by auto"], ["proof (state)\nthis:\n  is_real (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "hence \"cor (Re ?x) = ?x\""], ["proof (prove)\nusing this:\n  is_real (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))\n\ngoal (1 subgoal):\n 1. cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)", "by (rule complex_of_real_Re)"], ["proof (state)\nthis:\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "have **: \"sgn (Re ?x) = sgn (Re (a * cnj a - b * cnj b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "have *: \"Re ?x = (cmod k)\\<^sup>2 * Re (a * cnj a - b * cnj b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)) =\n    (cmod k)\\<^sup>2 * Re (a * cnj a - b * cnj b)", "by (subst *, subst complex_mult_cnj_cmod, subst Re_mult_real) (metis Im_complex_of_real, metis Re_complex_of_real)"], ["proof (state)\nthis:\n  Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)) =\n  (cmod k)\\<^sup>2 * Re (a * cnj a - b * cnj b)\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "using \\<open>k \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n    sgn (Re (a * cnj a - b * cnj b))", "by (subst *) (simp add: sgn_mult)"], ["proof (state)\nthis:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "moreover"], ["proof (state)\nthis:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "have \"?x = cor k'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) = cor k'", "using \\<open>M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\\<close> assms"], ["proof (prove)\nusing this:\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  congruence M (1, 0, 0, - 1) = cor k' *\\<^sub>s\\<^sub>m (1, 0, 0, - 1)\n  k' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) = cor k'", "by (simp add: mat_adj_def mat_cnj_def)"], ["proof (state)\nthis:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) = cor k'\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "hence \"sgn (Re ?x) = sgn k'\""], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) = cor k'\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) = sgn k'", "using \\<open>cor (Re ?x) = ?x\\<close>"], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) = cor k'\n  cor (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) = sgn k'", "unfolding complex_of_real_def"], ["proof (prove)\nusing this:\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b) = Complex k' 0\n  Complex (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) 0 =\n  cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b)\n\ngoal (1 subgoal):\n 1. sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) = sgn k'", "by simp"], ["proof (state)\nthis:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) = sgn k'\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "ultimately"], ["proof (chain)\npicking this:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) = sgn k'", "show ?thesis"], ["proof (prove)\nusing this:\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) =\n  sgn (Re (a * cnj a - b * cnj b))\n  sgn (Re (cnj k * cnj a * (k * a) - cnj k * b * (k * cnj b))) = sgn k'\n\ngoal (1 subgoal):\n 1. sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "by simp"], ["proof (state)\nthis:\n  sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "ultimately"], ["proof (chain)\npicking this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "show ?thesis"], ["proof (prove)\nusing this:\n  k \\<noteq> 0\n  mat_det (a, b, cnj b, cnj a) \\<noteq> 0\n  M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a)\n  sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\n\ngoal (1 subgoal):\n 1. \\<exists>a b k.\n       k \\<noteq> 0 \\<and>\n       M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n       sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))", "by (rule_tac x=\"a\" in exI, rule_tac x=\"b\" in exI, rule_tac x=\"k\" in exI)  simp"], ["proof (state)\nthis:\n  \\<exists>a b k.\n     k \\<noteq> 0 \\<and>\n     M = k *\\<^sub>s\\<^sub>m (a, b, cnj b, cnj a) \\<and>\n     sgn k' = sgn (Re (mat_det (a, b, cnj b, cnj a)))\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}