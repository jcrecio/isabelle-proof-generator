{"file_name": "/home/qj213/afp-2021-10-22/thys/Amortized_Complexity/Splay_Tree_Analysis.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Amortized_Complexity", "problem_names": ["lemma zig_zig: fixes lx x rx lb b rb a ra u lb1 lb2\ndefines [simp]: \"X == Node lx (x) rx\" defines[simp]: \"B == Node lb b rb\"\ndefines [simp]: \"t == Node B a ra\" defines [simp]: \"A' == Node rb a ra\"\ndefines [simp]: \"t' == Node lb1 u (Node lb2 b A')\"\nassumes hyps: \"lb \\<noteq> \\<langle>\\<rangle>\" and IH: \"T_splay x lb + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb \\<le> 2 * \\<phi> lb - 3 * \\<phi> X + 1\" and\n prems: \"size lb = size lb1 + size lb2 + 1\" \"X \\<in> subtrees lb\"\nshows \"T_splay x lb + \\<Phi> t' - \\<Phi> t \\<le> 3 * (\\<phi> t - \\<phi> X)\"", "lemma A_splay_ub: \"\\<lbrakk> bst t; Node l x r : subtrees t \\<rbrakk>\n  \\<Longrightarrow> A_splay x t \\<le> 3 * (\\<phi> t - \\<phi>(Node l x r)) + 1\"", "lemma A_splay_ub2: assumes \"bst t\" \"x : set_tree t\"\nshows \"A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1\"", "lemma A_splay_ub3: assumes \"bst t\" shows \"A_splay x t \\<le> 3 * \\<phi> t + 1\"", "lemma amor_insert: assumes \"bst t\"\nshows \"T_insert x t + \\<Phi>(Splay_Tree.insert x t) - \\<Phi> t \\<le> 4 * log 2 (size1 t) + 3\" (is \"?l \\<le> ?r\")", "lemma A_splay_max_ub: \"t \\<noteq> Leaf \\<Longrightarrow> A_splay_max t \\<le> 3 * (\\<phi> t - 1) + 1\"", "lemma A_splay_max_ub3: \"A_splay_max t \\<le> 3 * \\<phi> t + 1\"", "lemma amor_delete: assumes \"bst t\"\nshows \"T_delete a t + \\<Phi>(Splay_Tree.delete a t) - \\<Phi> t \\<le> 6 * log 2 (size1 t) + 3\""], "translations": [["", "lemma zig_zig: fixes lx x rx lb b rb a ra u lb1 lb2\ndefines [simp]: \"X == Node lx (x) rx\" defines[simp]: \"B == Node lb b rb\"\ndefines [simp]: \"t == Node B a ra\" defines [simp]: \"A' == Node rb a ra\"\ndefines [simp]: \"t' == Node lb1 u (Node lb2 b A')\"\nassumes hyps: \"lb \\<noteq> \\<langle>\\<rangle>\" and IH: \"T_splay x lb + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb \\<le> 2 * \\<phi> lb - 3 * \\<phi> X + 1\" and\n prems: \"size lb = size lb1 + size lb2 + 1\" \"X \\<in> subtrees lb\"\nshows \"T_splay x lb + \\<Phi> t' - \\<Phi> t \\<le> 3 * (\\<phi> t - \\<phi> X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "define B' where [simp]: \"B' = Node lb2 b A'\""], ["proof (state)\nthis:\n  B' = \\<langle>lb2, b, A'\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "have \"T_splay x lb + \\<Phi> t' - \\<Phi> t = T_splay x lb + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t =\n    real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n    \\<phi> A' -\n    \\<phi> B", "using prems"], ["proof (prove)\nusing this:\n  size lb = size lb1 + size lb2 + 1\n  X \\<in> subtrees lb\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t =\n    real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n    \\<phi> A' -\n    \\<phi> B", "by(auto simp: A_splay_def size_if_splay algebra_simps in_set_tree_if split: tree.split)"], ["proof (state)\nthis:\n  real (T_splay x lb) + \\<Phi> t' - \\<Phi> t =\n  real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n  \\<phi> A' -\n  \\<phi> B\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "also"], ["proof (state)\nthis:\n  real (T_splay x lb) + \\<Phi> t' - \\<Phi> t =\n  real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n  \\<phi> A' -\n  \\<phi> B\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "have \"\\<dots> \\<le> 2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n    \\<phi> A' -\n    \\<phi> B\n    \\<le> 2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X +\n          1", "using IH prems(2)"], ["proof (prove)\nusing this:\n  real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb\n  \\<le> 2 * \\<phi> lb - 3 * \\<phi> X + 1\n  X \\<in> subtrees lb\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n    \\<phi> A' -\n    \\<phi> B\n    \\<le> 2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X +\n          1", "by(auto simp: algebra_simps)"], ["proof (state)\nthis:\n  real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n  \\<phi> A' -\n  \\<phi> B\n  \\<le> 2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X + 1\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "also"], ["proof (state)\nthis:\n  real (T_splay x lb) + \\<Phi> lb1 + \\<Phi> lb2 - \\<Phi> lb + \\<phi> B' +\n  \\<phi> A' -\n  \\<phi> B\n  \\<le> 2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X + 1\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "have \"\\<dots> \\<le> \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X + 1\n    \\<le> \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1", "by(simp)"], ["proof (state)\nthis:\n  2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X + 1\n  \\<le> \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "also"], ["proof (state)\nthis:\n  2 * \\<phi> lb + \\<phi> B' + \\<phi> A' - \\<phi> B - 3 * \\<phi> X + 1\n  \\<le> \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "have \"\\<dots> \\<le> \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\n    \\<le> \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X", "using prems ld_ld_1_less[of \"size1 lb\" \"size1 A'\"]"], ["proof (prove)\nusing this:\n  size lb = size lb1 + size lb2 + 1\n  X \\<in> subtrees lb\n  \\<lbrakk>0 < real (size1 lb); 0 < real (size1 A')\\<rbrakk>\n  \\<Longrightarrow> 1 + \\<phi> lb + \\<phi> A'\n                    < 2 * log 2 (real (size1 lb) + real (size1 A'))\n\ngoal (1 subgoal):\n 1. \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\n    \\<le> \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\n  \\<le> \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "also"], ["proof (state)\nthis:\n  \\<phi> lb + \\<phi> B' + \\<phi> A' - 3 * \\<phi> X + 1\n  \\<le> \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "have \"\\<dots> \\<le> 3 * \\<phi> t - 3 * \\<phi> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X\n    \\<le> 3 * \\<phi> t - 3 * \\<phi> X", "using prems"], ["proof (prove)\nusing this:\n  size lb = size lb1 + size lb2 + 1\n  X \\<in> subtrees lb\n\ngoal (1 subgoal):\n 1. \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X\n    \\<le> 3 * \\<phi> t - 3 * \\<phi> X", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi> B' + 2 * \\<phi> t - 3 * \\<phi> X \\<le> 3 * \\<phi> t - 3 * \\<phi> X\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "finally"], ["proof (chain)\npicking this:\n  real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n  \\<le> 3 * \\<phi> t - 3 * \\<phi> X", "show ?thesis"], ["proof (prove)\nusing this:\n  real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n  \\<le> 3 * \\<phi> t - 3 * \\<phi> X\n\ngoal (1 subgoal):\n 1. real (T_splay x lb) + \\<Phi> t' - \\<Phi> t\n    \\<le> 3 * (\\<phi> t - \\<phi> X)", "by simp"], ["proof (state)\nthis:\n  real (T_splay x lb) + \\<Phi> t' - \\<Phi> t \\<le> 3 * (\\<phi> t - \\<phi> X)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma A_splay_ub: \"\\<lbrakk> bst t; Node l x r : subtrees t \\<rbrakk>\n  \\<Longrightarrow> A_splay x t \\<le> 3 * (\\<phi> t - \\<phi>(Node l x r)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>bst t; \\<langle>l, x, r\\<rangle> \\<in> subtrees t\\<rbrakk>\n    \\<Longrightarrow> A_splay x t\n                      \\<le> 3 *\n                            (\\<phi> t - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                            1", "proof(induction x t rule: splay.induct)"], ["proof (state)\ngoal (14 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>bst \\<langle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle> \\<in> subtrees \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x AB CD.\n       \\<lbrakk>bst \\<langle>AB, x, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, x, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>AB, x, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>AB, x, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x AB.\n        \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 14 subgoals...", "case 1"], ["proof (state)\nthis:\n  bst \\<langle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle> \\<in> subtrees \\<langle>\\<rangle>\n\ngoal (14 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>bst \\<langle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle> \\<in> subtrees \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x AB CD.\n       \\<lbrakk>bst \\<langle>AB, x, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, x, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>AB, x, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>AB, x, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x AB.\n        \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 14 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  bst \\<langle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle> \\<in> subtrees \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay x_ \\<langle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>\\<rangle> - \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", "by simp"], ["proof (state)\nthis:\n  A_splay x_ \\<langle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>\\<rangle> - \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (13 subgoals):\n 1. \\<And>x AB CD.\n       \\<lbrakk>bst \\<langle>AB, x, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, x, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>AB, x, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>AB, x, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c C AB D.\n        \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n         \\<Longrightarrow> A_splay x C\n                           \\<le> 3 *\n                                 (\\<phi> C -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 13 subgoals...", "next"], ["proof (state)\ngoal (13 subgoals):\n 1. \\<And>x AB CD.\n       \\<lbrakk>bst \\<langle>AB, x, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, x, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>AB, x, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>AB, x, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c C AB D.\n        \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n         \\<Longrightarrow> A_splay x C\n                           \\<le> 3 *\n                                 (\\<phi> C -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 13 subgoals...", "case 2"], ["proof (state)\nthis:\n  bst \\<langle>AB_, x_, CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle> \\<in> subtrees \\<langle>AB_, x_, CD_\\<rangle>\n\ngoal (13 subgoals):\n 1. \\<And>x AB CD.\n       \\<lbrakk>bst \\<langle>AB, x, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, x, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x \\<langle>AB, x, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi> \\<langle>AB, x, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c C AB D.\n        \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n         \\<Longrightarrow> A_splay x C\n                           \\<le> 3 *\n                                 (\\<phi> C -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 13 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  bst \\<langle>AB_, x_, CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle> \\<in> subtrees \\<langle>AB_, x_, CD_\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay x_ \\<langle>AB_, x_, CD_\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>AB_, x_, CD_\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", "by (auto simp: A_splay_def)"], ["proof (state)\nthis:\n  A_splay x_ \\<langle>AB_, x_, CD_\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>AB_, x_, CD_\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (12 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB D.\n        \\<lbrakk>b < x; x < c;\n         bst \\<langle>AB, b,\n              \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>\\<langle>\\<rangle>, c,\n                  D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>\\<langle>\\<rangle>, c,\n                             D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>\\<langle>\\<rangle>, c,\n                                    D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 12 subgoals...", "next"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB D.\n        \\<lbrakk>b < x; x < c;\n         bst \\<langle>AB, b,\n              \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>\\<langle>\\<rangle>, c,\n                  D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>\\<langle>\\<rangle>, c,\n                             D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>\\<langle>\\<rangle>, c,\n                                    D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 12 subgoals...", "case 4"], ["proof (state)\nthis:\n  x_ < b_\n  bst \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle>\n\ngoal (12 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB D.\n        \\<lbrakk>b < x; x < c;\n         bst \\<langle>AB, b,\n              \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>\\<langle>\\<rangle>, c,\n                  D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>\\<langle>\\<rangle>, c,\n                             D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>\\<langle>\\<rangle>, c,\n                                    D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 12 subgoals...", "hence False"], ["proof (prove)\nusing this:\n  x_ < b_\n  bst \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle>\n\ngoal (1 subgoal):\n 1. False", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  False\n\ngoal (12 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x b CD.\n       \\<lbrakk>x < b; bst \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB D.\n        \\<lbrakk>b < x; x < c;\n         bst \\<langle>AB, b,\n              \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>\\<langle>\\<rangle>, c,\n                  D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>\\<langle>\\<rangle>, c,\n                             D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>\\<langle>\\<rangle>, c,\n                                    D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 12 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. A_splay x_ \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", ".."], ["proof (state)\nthis:\n  A_splay x_ \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>\\<langle>\\<rangle>, b_, CD_\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (11 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB C.\n        \\<lbrakk>b < x; c < x;\n         bst \\<langle>AB, b,\n              \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>C, c,\n                  \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c,\n                             \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c,\n                                    \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 11 subgoals...", "next"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB C.\n        \\<lbrakk>b < x; c < x;\n         bst \\<langle>AB, b,\n              \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>C, c,\n                  \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c,\n                             \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c,\n                                    \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 11 subgoals...", "case 5"], ["proof (state)\nthis:\n  x_ < a_\n  x_ < b_\n  bst \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_,\n       CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_,\n          CD_\\<rangle>\n\ngoal (11 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB C.\n        \\<lbrakk>b < x; c < x;\n         bst \\<langle>AB, b,\n              \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>C, c,\n                  \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c,\n                             \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c,\n                                    \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 11 subgoals...", "hence False"], ["proof (prove)\nusing this:\n  x_ < a_\n  x_ < b_\n  bst \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_,\n       CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_,\n          CD_\\<rangle>\n\ngoal (1 subgoal):\n 1. False", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  False\n\ngoal (11 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b B CD.\n       \\<lbrakk>x < a; x < b;\n        bst \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>\\<langle>\\<rangle>, a, B\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n                                    B\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>\\<langle>\\<rangle>, a,\n     B\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>b x c AB C.\n        \\<lbrakk>b < x; c < x;\n         bst \\<langle>AB, b,\n              \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, b,\n                 \\<langle>C, c,\n                  \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, b,\n                            \\<langle>C, c,\n                             \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, b,\n                                   \\<langle>C, c,\n                                    \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1\nA total of 11 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. A_splay x_\n     \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_, CD_\\<rangle>\n    \\<le> 3 *\n          (\\<phi>\n            \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_,\n             CD_\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", ".."], ["proof (state)\nthis:\n  A_splay x_\n   \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_, CD_\\<rangle>\n  \\<le> 3 *\n        (\\<phi>\n          \\<langle>\\<langle>\\<langle>\\<rangle>, a_, B_\\<rangle>, b_,\n           CD_\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (10 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>a x c D AB C.\n        \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n         \\<Longrightarrow> A_splay x D\n                           \\<le> 3 *\n                                 (\\<phi> D -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, a,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, a,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>a x c D AB C.\n        \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n         \\<Longrightarrow> A_splay x D\n                           \\<le> 3 *\n                                 (\\<phi> D -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, a,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, a,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1", "case 7"], ["proof (state)\nthis:\n  a_ < x_\n  x_ < b_\n  bst \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_,\n       CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_,\n          CD_\\<rangle>\n\ngoal (10 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>a x c D AB C.\n        \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n         \\<Longrightarrow> A_splay x D\n                           \\<le> 3 *\n                                 (\\<phi> D -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, a,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, a,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1", "hence False"], ["proof (prove)\nusing this:\n  a_ < x_\n  x_ < b_\n  bst \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_,\n       CD_\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_,\n          CD_\\<rangle>\n\ngoal (1 subgoal):\n 1. False", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  False\n\ngoal (10 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b A CD.\n       \\<lbrakk>a < x; x < b;\n        bst \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n             CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, \\<langle>\\<rangle>\\<rangle>, b,\n                CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a,\n                                    \\<langle>\\<rangle>\\<rangle>,\n                           b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a,\n     \\<langle>\\<rangle>\\<rangle>,\n                                  b, CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 10. \\<And>a x c D AB C.\n        \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n         \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n         \\<Longrightarrow> A_splay x D\n                           \\<le> 3 *\n                                 (\\<phi> D -\n                                  \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                 1;\n         bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n         \\<langle>l, x, r\\<rangle>\n         \\<in> subtrees\n                \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> A_splay x\n                           \\<langle>AB, a,\n                            \\<langle>C, c, D\\<rangle>\\<rangle>\n                          \\<le> 3 *\n                                (\\<phi>\n                                  \\<langle>AB, a,\n                                   \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. A_splay x_\n     \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_, CD_\\<rangle>\n    \\<le> 3 *\n          (\\<phi>\n            \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_,\n             CD_\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", ".."], ["proof (state)\nthis:\n  A_splay x_\n   \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_, CD_\\<rangle>\n  \\<le> 3 *\n        (\\<phi>\n          \\<langle>\\<langle>A_, a_, \\<langle>\\<rangle>\\<rangle>, b_,\n           CD_\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (9 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case 10"], ["proof (state)\nthis:\n  b_ < x_\n  bst \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle>\n\ngoal (9 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence False"], ["proof (prove)\nusing this:\n  b_ < x_\n  bst \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. False", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  False\n\ngoal (9 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x AB.\n       \\<lbrakk>b < x; bst \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 9. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. A_splay x_ \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", ".."], ["proof (state)\nthis:\n  A_splay x_ \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>AB_, b_, \\<langle>\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (8 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case 12"], ["proof (state)\nthis:\n  b_ < x_\n  x_ < c_\n  bst \\<langle>AB_, b_,\n       \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>AB_, b_,\n          \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle>\n\ngoal (8 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence False"], ["proof (prove)\nusing this:\n  b_ < x_\n  x_ < c_\n  bst \\<langle>AB_, b_,\n       \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>AB_, b_,\n          \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. False", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  False\n\ngoal (8 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB D.\n       \\<lbrakk>b < x; x < c;\n        bst \\<langle>AB, b,\n             \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>\\<langle>\\<rangle>, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>\\<langle>\\<rangle>, c,\n                            D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>\\<langle>\\<rangle>, c,\n                                   D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 8. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. A_splay x_\n     \\<langle>AB_, b_, \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi>\n            \\<langle>AB_, b_,\n             \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", ".."], ["proof (state)\nthis:\n  A_splay x_\n   \\<langle>AB_, b_, \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi>\n          \\<langle>AB_, b_,\n           \\<langle>\\<langle>\\<rangle>, c_, D_\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (7 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case 13"], ["proof (state)\nthis:\n  b_ < x_\n  c_ < x_\n  bst \\<langle>AB_, b_,\n       \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>AB_, b_,\n          \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n\ngoal (7 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence False"], ["proof (prove)\nusing this:\n  b_ < x_\n  c_ < x_\n  bst \\<langle>AB_, b_,\n       \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n  \\<langle>l, x_, r\\<rangle>\n  \\<in> subtrees\n         \\<langle>AB_, b_,\n          \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. False", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  False\n\ngoal (7 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>b x c AB C.\n       \\<lbrakk>b < x; c < x;\n        bst \\<langle>AB, b,\n             \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b,\n                \\<langle>C, c, \\<langle>\\<rangle>\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b,\n                           \\<langle>C, c,\n                            \\<langle>\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c,\n                                   \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 7. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. A_splay x_\n     \\<langle>AB_, b_, \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi>\n            \\<langle>AB_, b_,\n             \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x_, r\\<rangle>) +\n          1", ".."], ["proof (state)\nthis:\n  A_splay x_\n   \\<langle>AB_, b_, \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi>\n          \\<langle>AB_, b_,\n           \\<langle>C_, c_, \\<langle>\\<rangle>\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x_, r\\<rangle>) +\n        1\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case (3 x b A B CD)"], ["proof (state)\nthis:\n  x < b\n  bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "(* A readable proof *)"], ["proof (state)\nthis:\n  x < b\n  bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?t = \"\\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\""], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?t' = \"\\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle>\""], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have *: \"l = A \\<and> r = B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l = A \\<and> r = B", "using \"3.prems\""], ["proof (prove)\nusing this:\n  bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n\ngoal (1 subgoal):\n 1. l = A \\<and> r = B", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  l = A \\<and> r = B\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"A_splay x ?t = 1 + \\<Phi> ?t' - \\<Phi> ?t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n    1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>", "using \"3.hyps\""], ["proof (prove)\nusing this:\n  x < b\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n    1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>", "by (simp add: A_splay_def)"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n  1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n  1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = 1 + \\<phi> ?t' + \\<phi> \\<langle>B, b, CD\\<rangle>  - \\<phi> ?t - \\<phi> \\<langle>A, x, B\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n    1 + \\<phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, CD\\<rangle> -\n    \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n    \\<phi> \\<langle>A, x, B\\<rangle>", "by(simp)"], ["proof (state)\nthis:\n  1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n  1 + \\<phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, CD\\<rangle> -\n  \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n  \\<phi> \\<langle>A, x, B\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  1 + \\<Phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> =\n  1 + \\<phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, CD\\<rangle> -\n  \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n  \\<phi> \\<langle>A, x, B\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = 1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + \\<phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, CD\\<rangle> -\n    \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n    \\<phi> \\<langle>A, x, B\\<rangle> =\n    1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>", "by(simp)"], ["proof (state)\nthis:\n  1 + \\<phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, CD\\<rangle> -\n  \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n  \\<phi> \\<langle>A, x, B\\<rangle> =\n  1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  1 + \\<phi> \\<langle>A, x, \\<langle>B, b, CD\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, CD\\<rangle> -\n  \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n  \\<phi> \\<langle>A, x, B\\<rangle> =\n  1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le>  1 + \\<phi> ?t - \\<phi>(Node A x B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\n    \\<le> 1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n          \\<phi> \\<langle>A, x, B\\<rangle>", "using log_le_cancel_iff[of 2 \"size1(Node B b CD)\" \"size1 ?t\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 < 2; 0 < real (size1 \\<langle>B, b, CD\\<rangle>);\n   0 < real\n        (size1 \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> (\\<phi> \\<langle>B, b, CD\\<rangle>\n                     \\<le> \\<phi>\n                            \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                             CD\\<rangle>) =\n                    (real (size1 \\<langle>B, b, CD\\<rangle>)\n                     \\<le> real\n                            (size1\n                              \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                               CD\\<rangle>))\n\ngoal (1 subgoal):\n 1. 1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\n    \\<le> 1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n          \\<phi> \\<langle>A, x, B\\<rangle>", "by (simp)"], ["proof (state)\nthis:\n  1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\n  \\<le> 1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n        \\<phi> \\<langle>A, x, B\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  1 + \\<phi> \\<langle>B, b, CD\\<rangle> - \\<phi> \\<langle>A, x, B\\<rangle>\n  \\<le> 1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n        \\<phi> \\<langle>A, x, B\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> 1 + 3 * (\\<phi> ?t - \\<phi>(Node A x B))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n    \\<phi> \\<langle>A, x, B\\<rangle>\n    \\<le> 1 +\n          3 *\n          (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n           \\<phi> \\<langle>A, x, B\\<rangle>)", "using log_le_cancel_iff[of 2 \"size1(Node A x B)\" \"size1 ?t\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 < 2; 0 < real (size1 \\<langle>A, x, B\\<rangle>);\n   0 < real\n        (size1 \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> (\\<phi> \\<langle>A, x, B\\<rangle>\n                     \\<le> \\<phi>\n                            \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                             CD\\<rangle>) =\n                    (real (size1 \\<langle>A, x, B\\<rangle>)\n                     \\<le> real\n                            (size1\n                              \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                               CD\\<rangle>))\n\ngoal (1 subgoal):\n 1. 1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n    \\<phi> \\<langle>A, x, B\\<rangle>\n    \\<le> 1 +\n          3 *\n          (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n           \\<phi> \\<langle>A, x, B\\<rangle>)", "by (simp)"], ["proof (state)\nthis:\n  1 + \\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n  \\<phi> \\<langle>A, x, B\\<rangle>\n  \\<le> 1 +\n        3 *\n        (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n         \\<phi> \\<langle>A, x, B\\<rangle>)\n\ngoal (6 subgoals):\n 1. \\<And>x b A B CD.\n       \\<lbrakk>x < b;\n        bst \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, x, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 6. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "finally"], ["proof (chain)\npicking this:\n  A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<le> 1 +\n        3 *\n        (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n         \\<phi> \\<langle>A, x, B\\<rangle>)", "show ?case"], ["proof (prove)\nusing this:\n  A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<le> 1 +\n        3 *\n        (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n         \\<phi> \\<langle>A, x, B\\<rangle>)\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "using *"], ["proof (prove)\nusing this:\n  A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<le> 1 +\n        3 *\n        (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n         \\<phi> \\<langle>A, x, B\\<rangle>)\n  l = A \\<and> r = B\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "by simp"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>\\<langle>A, x, B\\<rangle>, b, CD\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal (5 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case (9 b x AB C D)"], ["proof (state)\nthis:\n  b < x\n  bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n\ngoal (5 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "(* An automatic proof *)"], ["proof (state)\nthis:\n  b < x\n  bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n\ngoal (5 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?A = \"\\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\""], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"x \\<notin> set_tree AB\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> set_tree AB", "using \"9.prems\"(1)"], ["proof (prove)\nusing this:\n  bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<notin> set_tree AB", "by auto"], ["proof (state)\nthis:\n  x \\<notin> set_tree AB\n\ngoal (5 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x AB C D.\n       \\<lbrakk>b < x;\n        bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, x, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 5. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "with 9"], ["proof (chain)\npicking this:\n  b < x\n  bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  x \\<notin> set_tree AB", "show ?case"], ["proof (prove)\nusing this:\n  b < x\n  bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  x \\<notin> set_tree AB\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "using\n    log_le_cancel_iff[of 2 \"size1(Node AB b C)\" \"size1 ?A\"]\n    log_le_cancel_iff[of 2 \"size1(Node C x D)\" \"size1 ?A\"]"], ["proof (prove)\nusing this:\n  b < x\n  bst \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  x \\<notin> set_tree AB\n  \\<lbrakk>1 < 2; 0 < real (size1 \\<langle>AB, b, C\\<rangle>);\n   0 < real\n        (size1 \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> (\\<phi> \\<langle>AB, b, C\\<rangle>\n                     \\<le> \\<phi>\n                            \\<langle>AB, b,\n                             \\<langle>C, x, D\\<rangle>\\<rangle>) =\n                    (real (size1 \\<langle>AB, b, C\\<rangle>)\n                     \\<le> real\n                            (size1\n                              \\<langle>AB, b,\n                               \\<langle>C, x, D\\<rangle>\\<rangle>))\n  \\<lbrakk>1 < 2; 0 < real (size1 \\<langle>C, x, D\\<rangle>);\n   0 < real\n        (size1 \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> (\\<phi> \\<langle>C, x, D\\<rangle>\n                     \\<le> \\<phi>\n                            \\<langle>AB, b,\n                             \\<langle>C, x, D\\<rangle>\\<rangle>) =\n                    (real (size1 \\<langle>C, x, D\\<rangle>)\n                     \\<le> real\n                            (size1\n                              \\<langle>AB, b,\n                               \\<langle>C, x, D\\<rangle>\\<rangle>))\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "by (auto simp: A_splay_def algebra_simps simp del:log_le_cancel_iff)"], ["proof (state)\nthis:\n  A_splay x \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>AB, b, \\<langle>C, x, D\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case (6 x a b A B C)"], ["proof (state)\nthis:\n  x < a\n  x < b\n  A \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n  \\<Longrightarrow> A_splay x A\n                    \\<le> 3 *\n                          (\\<phi> A - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence *: \"\\<langle>l, x, r\\<rangle> \\<in> subtrees A\""], ["proof (prove)\nusing this:\n  x < a\n  x < b\n  A \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n  \\<Longrightarrow> A_splay x A\n                    \\<le> 3 *\n                          (\\<phi> A - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>l, x, r\\<rangle> \\<in> subtrees A", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees A\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "obtain A1 a' A2 where sp: \"splay x A = Node A1 a' A2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A1 a' A2.\n        splay x A = \\<langle>A1, a', A2\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using splay_not_Leaf[OF \\<open>A \\<noteq> Leaf\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>l x r. splay ?a A = \\<langle>l, x, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>A1 a' A2.\n        splay x A = \\<langle>A1, a', A2\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?X = \"Node l x r\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?AB = \"Node A a B\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?ABC = \"Node ?AB b C\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?A' = \"Node A1 a' A2\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?BC = \"Node B b C\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?A2BC = \"Node A2 a ?BC\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?A1A2BC = \"Node A1 a' ?A2BC\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have 0: \"\\<phi> ?A1A2BC = \\<phi> ?ABC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> =\n    \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "using sp"], ["proof (prove)\nusing this:\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> =\n    \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> =\n  \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have 1: \"\\<Phi> ?A1A2BC - \\<Phi> ?ABC = \\<Phi> A1 + \\<Phi> A2 + \\<phi> ?A2BC + \\<phi> ?BC - \\<Phi> A - \\<phi> ?AB\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    \\<Phi> A1 + \\<Phi> A2 +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<Phi> A -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "using 0"], ["proof (prove)\nusing this:\n  \\<phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> =\n  \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    \\<Phi> A1 + \\<Phi> A2 +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<Phi> A -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "by (simp)"], ["proof (state)\nthis:\n  \\<Phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  \\<Phi> A1 + \\<Phi> A2 +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<Phi> A -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"A_splay x ?ABC = T_splay x A + 1 + \\<Phi> ?A1A2BC - \\<Phi> ?ABC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x A + 1) +\n    \\<Phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "using \"6.hyps\" sp"], ["proof (prove)\nusing this:\n  x < a\n  x < b\n  A \\<noteq> \\<langle>\\<rangle>\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x A + 1) +\n    \\<Phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "by(simp add: A_splay_def)"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x A + 1) +\n  \\<Phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x A + 1) +\n  \\<Phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = T_splay x A + 1 + \\<Phi> A1 + \\<Phi> A2 + \\<phi> ?A2BC + \\<phi> ?BC - \\<Phi> A - \\<phi> ?AB\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x A + 1) +\n    \\<Phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<Phi> A -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "using 1"], ["proof (prove)\nusing this:\n  \\<Phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  \\<Phi> A1 + \\<Phi> A2 +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<Phi> A -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_splay x A + 1) +\n    \\<Phi>\n     \\<langle>A1, a',\n      \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<Phi> A -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "by simp"], ["proof (state)\nthis:\n  real (T_splay x A + 1) +\n  \\<Phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<Phi> A -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  real (T_splay x A + 1) +\n  \\<Phi>\n   \\<langle>A1, a',\n    \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<Phi> A -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = T_splay x A + \\<Phi> ?A' - \\<phi> ?A' - \\<Phi> A + \\<phi> ?A2BC + \\<phi> ?BC - \\<phi> ?AB + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<Phi> A -\n    \\<phi> \\<langle>A, a, B\\<rangle> =\n    real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> -\n    \\<Phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> +\n    1", "by(simp)"], ["proof (state)\nthis:\n  real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<Phi> A -\n  \\<phi> \\<langle>A, a, B\\<rangle> =\n  real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<Phi> A +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  real (T_splay x A + 1) + \\<Phi> A1 + \\<Phi> A2 +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<Phi> A -\n  \\<phi> \\<langle>A, a, B\\<rangle> =\n  real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<Phi> A +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = A_splay x A + \\<phi> ?A2BC + \\<phi> ?BC - \\<phi> ?AB - \\<phi> ?A' + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> -\n    \\<Phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> +\n    1 =\n    A_splay x A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> +\n    1", "using sp"], ["proof (prove)\nusing this:\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> -\n    \\<Phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> +\n    1 =\n    A_splay x A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> +\n    1", "by(simp add: A_splay_def)"], ["proof (state)\nthis:\n  real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<Phi> A +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1 =\n  A_splay x A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> +\n  1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  real (T_splay x A) + \\<Phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> -\n  \\<Phi> A +\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1 =\n  A_splay x A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> +\n  1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> 3 * \\<phi> A + \\<phi> ?A2BC + \\<phi> ?BC - \\<phi> ?AB - \\<phi> ?A' - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> A +\n          \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n          \\<phi> \\<langle>B, b, C\\<rangle> -\n          \\<phi> \\<langle>A, a, B\\<rangle> -\n          \\<phi> \\<langle>A1, a', A2\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "using \"6.IH\" \"6.prems\"(1) *"], ["proof (prove)\nusing this:\n  \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n  \\<Longrightarrow> A_splay x A\n                    \\<le> 3 *\n                          (\\<phi> A - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees A\n\ngoal (1 subgoal):\n 1. A_splay x A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> A +\n          \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n          \\<phi> \\<langle>B, b, C\\<rangle> -\n          \\<phi> \\<langle>A, a, B\\<rangle> -\n          \\<phi> \\<langle>A1, a', A2\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "by(simp)"], ["proof (state)\nthis:\n  A_splay x A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> A +\n        \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n        \\<phi> \\<langle>B, b, C\\<rangle> -\n        \\<phi> \\<langle>A, a, B\\<rangle> -\n        \\<phi> \\<langle>A1, a', A2\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> A +\n        \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n        \\<phi> \\<langle>B, b, C\\<rangle> -\n        \\<phi> \\<langle>A, a, B\\<rangle> -\n        \\<phi> \\<langle>A1, a', A2\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = 2 * \\<phi> A + \\<phi> ?A2BC + \\<phi> ?BC - \\<phi> ?AB - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * \\<phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2 =\n    2 * \\<phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2", "using sp"], ["proof (prove)\nusing this:\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. 3 * \\<phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>A1, a', A2\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2 =\n    2 * \\<phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  3 * \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2 =\n  2 * \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  3 * \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>A1, a', A2\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2 =\n  2 * \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> < \\<phi> A + \\<phi> ?A2BC + \\<phi> ?BC - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<phi> A +\n    \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    < \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n      \\<phi> \\<langle>B, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      2", "by(simp)"], ["proof (state)\nthis:\n  2 * \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  2 * \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> < \\<phi> ?A2BC + 2 * \\<phi> ?ABC - 3 * \\<phi> ?X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    < \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n      2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "using sp ld_ld_1_less[of \"size1 A\" \"size1 ?BC\"]"], ["proof (prove)\nusing this:\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n  \\<lbrakk>0 < real (size1 A);\n   0 < real (size1 \\<langle>B, b, C\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> 1 + \\<phi> A + \\<phi> \\<langle>B, b, C\\<rangle>\n                    < 2 *\n                      log 2\n                       (real (size1 A) +\n                        real (size1 \\<langle>B, b, C\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>B, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    < \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n      2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  \\<phi> A + \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>B, b, C\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> < 3 * \\<phi> ?ABC - 3 * \\<phi> ?X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n    < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "using sp"], ["proof (prove)\nusing this:\n  splay x A = \\<langle>A1, a', A2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n    < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi> \\<langle>A2, a, \\<langle>B, b, C\\<rangle>\\<rangle> +\n  2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  1\n  < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (4 subgoals):\n 1. \\<And>x a b A B CD.\n       \\<lbrakk>x < a; x < b; A \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst A; \\<langle>l, x, r\\<rangle> \\<in> subtrees A\\<rbrakk>\n        \\<Longrightarrow> A_splay x A\n                          \\<le> 3 *\n                                (\\<phi> A -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 4. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "finally"], ["proof (chain)\npicking this:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1", "show ?case"], ["proof (prove)\nusing this:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "by simp"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case (8 a x b B A C)"], ["proof (state)\nthis:\n  a < x\n  x < b\n  B \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n  \\<Longrightarrow> A_splay x B\n                    \\<le> 3 *\n                          (\\<phi> B - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence *: \"\\<langle>l, x, r\\<rangle> \\<in> subtrees B\""], ["proof (prove)\nusing this:\n  a < x\n  x < b\n  B \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n  \\<Longrightarrow> A_splay x B\n                    \\<le> 3 *\n                          (\\<phi> B - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>l, x, r\\<rangle> \\<in> subtrees B", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees B\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "obtain B1 b' B2 where sp: \"splay x B = Node B1 b' B2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B1 b' B2.\n        splay x B = \\<langle>B1, b', B2\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using splay_not_Leaf[OF \\<open>B \\<noteq> Leaf\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>l x r. splay ?a B = \\<langle>l, x, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>B1 b' B2.\n        splay x B = \\<langle>B1, b', B2\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  splay x B = \\<langle>B1, b', B2\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?X = \"Node l x r\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?AB = \"Node A a B\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?ABC = \"Node ?AB b C\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?B' = \"Node B1 b' B2\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?AB1 = \"Node A a B1\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?B2C = \"Node B2 b C\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?AB1B2C = \"Node ?AB1 b' ?B2C\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have 0: \"\\<phi> ?AB1B2C = \\<phi> ?ABC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> =\n    \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "using sp"], ["proof (prove)\nusing this:\n  splay x B = \\<langle>B1, b', B2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> =\n    \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> =\n  \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have 1: \"\\<Phi> ?AB1B2C - \\<Phi> ?ABC = \\<Phi> B1 + \\<Phi> B2 + \\<phi> ?AB1 + \\<phi> ?B2C - \\<Phi> B - \\<phi> ?AB\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    \\<Phi> B1 + \\<Phi> B2 + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<Phi> B -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "using 0"], ["proof (prove)\nusing this:\n  \\<phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> =\n  \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    \\<Phi> B1 + \\<Phi> B2 + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<Phi> B -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "by (simp)"], ["proof (state)\nthis:\n  \\<Phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  \\<Phi> B1 + \\<Phi> B2 + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<Phi> B -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"A_splay x ?ABC = T_splay x B + 1 + \\<Phi> ?AB1B2C - \\<Phi> ?ABC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x B + 1) +\n    \\<Phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "using \"8.hyps\" sp"], ["proof (prove)\nusing this:\n  a < x\n  x < b\n  B \\<noteq> \\<langle>\\<rangle>\n  splay x B = \\<langle>B1, b', B2\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x B + 1) +\n    \\<Phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>", "by(simp add: A_splay_def)"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x B + 1) +\n  \\<Phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x B + 1) +\n  \\<Phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = T_splay x B + 1 + \\<Phi> B1 + \\<Phi> B2 + \\<phi> ?AB1 + \\<phi> ?B2C - \\<Phi> B - \\<phi> ?AB\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x B + 1) +\n    \\<Phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n    \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<Phi> B -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "using 1"], ["proof (prove)\nusing this:\n  \\<Phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  \\<Phi> B1 + \\<Phi> B2 + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<Phi> B -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_splay x B + 1) +\n    \\<Phi>\n     \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n      \\<langle>B2, b, C\\<rangle>\\<rangle> -\n    \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n    real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n    \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<Phi> B -\n    \\<phi> \\<langle>A, a, B\\<rangle>", "by simp"], ["proof (state)\nthis:\n  real (T_splay x B + 1) +\n  \\<Phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<Phi> B -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  real (T_splay x B + 1) +\n  \\<Phi>\n   \\<langle>\\<langle>A, a, B1\\<rangle>, b',\n    \\<langle>B2, b, C\\<rangle>\\<rangle> -\n  \\<Phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> =\n  real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<Phi> B -\n  \\<phi> \\<langle>A, a, B\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = T_splay x B + \\<Phi> ?B' - \\<phi> ?B' - \\<Phi> B + \\<phi> ?AB1 + \\<phi> ?B2C - \\<phi> ?AB + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n    \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<Phi> B -\n    \\<phi> \\<langle>A, a, B\\<rangle> =\n    real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> -\n    \\<Phi> B +\n    \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> +\n    1", "by simp"], ["proof (state)\nthis:\n  real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<Phi> B -\n  \\<phi> \\<langle>A, a, B\\<rangle> =\n  real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<Phi> B +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  real (T_splay x B + 1) + \\<Phi> B1 + \\<Phi> B2 +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<Phi> B -\n  \\<phi> \\<langle>A, a, B\\<rangle> =\n  real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<Phi> B +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = A_splay x B + \\<phi> ?AB1 + \\<phi> ?B2C - \\<phi> ?AB - \\<phi> ?B' + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> -\n    \\<Phi> B +\n    \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> +\n    1 =\n    A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> +\n    1", "using sp"], ["proof (prove)\nusing this:\n  splay x B = \\<langle>B1, b', B2\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> -\n    \\<Phi> B +\n    \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> +\n    1 =\n    A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> +\n    1", "by (simp add: A_splay_def)"], ["proof (state)\nthis:\n  real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<Phi> B +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1 =\n  A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> +\n  1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  real (T_splay x B) + \\<Phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> -\n  \\<Phi> B +\n  \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> +\n  1 =\n  A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> +\n  1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> 3 * \\<phi> B + \\<phi> ?AB1 + \\<phi> ?B2C - \\<phi> ?AB - \\<phi> ?B' - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n          \\<phi> \\<langle>B2, b, C\\<rangle> -\n          \\<phi> \\<langle>A, a, B\\<rangle> -\n          \\<phi> \\<langle>B1, b', B2\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "using \"8.IH\" \"8.prems\"(1) *"], ["proof (prove)\nusing this:\n  \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n  \\<Longrightarrow> A_splay x B\n                    \\<le> 3 *\n                          (\\<phi> B - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees B\n\ngoal (1 subgoal):\n 1. A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n          \\<phi> \\<langle>B2, b, C\\<rangle> -\n          \\<phi> \\<langle>A, a, B\\<rangle> -\n          \\<phi> \\<langle>B1, b', B2\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "by(simp)"], ["proof (state)\nthis:\n  A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n        \\<phi> \\<langle>B2, b, C\\<rangle> -\n        \\<phi> \\<langle>A, a, B\\<rangle> -\n        \\<phi> \\<langle>B1, b', B2\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n        \\<phi> \\<langle>B2, b, C\\<rangle> -\n        \\<phi> \\<langle>A, a, B\\<rangle> -\n        \\<phi> \\<langle>B1, b', B2\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = 2 * \\<phi> B + \\<phi> ?AB1 + \\<phi> ?B2C - \\<phi> ?AB - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2 =\n    2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2", "using sp"], ["proof (prove)\nusing this:\n  splay x B = \\<langle>B1, b', B2\\<rangle>\n\ngoal (1 subgoal):\n 1. 3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    \\<phi> \\<langle>B1, b', B2\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2 =\n    2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2 =\n  2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  3 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  \\<phi> \\<langle>B1, b', B2\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2 =\n  2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> < \\<phi> B + \\<phi> ?AB1 + \\<phi> ?B2C - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    \\<phi> \\<langle>A, a, B\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    < \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n      \\<phi> \\<langle>B2, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      2", "by(simp)"], ["proof (state)\nthis:\n  2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  2 * \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  \\<phi> \\<langle>A, a, B\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> < \\<phi> B + 2 * \\<phi> ?ABC - 3 * \\<phi> ?X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    < \\<phi> B +\n      2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "using sp ld_ld_1_less[of \"size1 ?AB1\" \"size1 ?B2C\"]"], ["proof (prove)\nusing this:\n  splay x B = \\<langle>B1, b', B2\\<rangle>\n  \\<lbrakk>0 < real (size1 \\<langle>A, a, B1\\<rangle>);\n   0 < real (size1 \\<langle>B2, b, C\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> 1 + \\<phi> \\<langle>A, a, B1\\<rangle> +\n                    \\<phi> \\<langle>B2, b, C\\<rangle>\n                    < 2 *\n                      log 2\n                       (real (size1 \\<langle>A, a, B1\\<rangle>) +\n                        real (size1 \\<langle>B2, b, C\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n    \\<phi> \\<langle>B2, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    < \\<phi> B +\n      2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> B +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  \\<phi> B + \\<phi> \\<langle>A, a, B1\\<rangle> +\n  \\<phi> \\<langle>B2, b, C\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  < \\<phi> B +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> < 3 * \\<phi> ?ABC - 3 * \\<phi> ?X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> B +\n    2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n    < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n      3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n      1", "by(simp)"], ["proof (state)\nthis:\n  \\<phi> B + 2 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  1\n  < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (3 subgoals):\n 1. \\<And>a x b B A CD.\n       \\<lbrakk>a < x; x < b; B \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst B; \\<langle>l, x, r\\<rangle> \\<in> subtrees B\\<rbrakk>\n        \\<Longrightarrow> A_splay x B\n                          \\<le> 3 *\n                                (\\<phi> B -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>\\<langle>A, a, B\\<rangle>, b, CD\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>\\<langle>A, a, B\\<rangle>, b,\n                                  CD\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 3. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "finally"], ["proof (chain)\npicking this:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1", "show ?case"], ["proof (prove)\nusing this:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  < 3 * \\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "by simp"], ["proof (state)\nthis:\n  A_splay x \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>\\<langle>A, a, B\\<rangle>, b, C\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case (11 b x c C A D)"], ["proof (state)\nthis:\n  b < x\n  x < c\n  C \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n  \\<Longrightarrow> A_splay x C\n                    \\<le> 3 *\n                          (\\<phi> C - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence *: \"\\<langle>l, x, r\\<rangle> \\<in> subtrees C\""], ["proof (prove)\nusing this:\n  b < x\n  x < c\n  C \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n  \\<Longrightarrow> A_splay x C\n                    \\<le> 3 *\n                          (\\<phi> C - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>l, x, r\\<rangle> \\<in> subtrees C", "by(fastforce dest: in_set_tree_if)"], ["proof (state)\nthis:\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees C\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "obtain C1 c' C2 where sp: \"splay x C = Node C1 c' C2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C1 c' C2.\n        splay x C = \\<langle>C1, c', C2\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using splay_not_Leaf[OF \\<open>C \\<noteq> Leaf\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>l x r. splay ?a C = \\<langle>l, x, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>C1 c' C2.\n        splay x C = \\<langle>C1, c', C2\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  splay x C = \\<langle>C1, c', C2\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?X = \"Node l x r\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?CD = \"Node C c D\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?ACD = \"Node A b ?CD\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?C' = \"Node C1 c' C2\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?C2D = \"Node C2 c D\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "let ?AC1 = \"Node A b C1\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"A_splay x ?ACD = A_splay x C + \\<phi> ?C2D + \\<phi> ?AC1 - \\<phi> ?CD - \\<phi> ?C' + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> =\n    A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    \\<phi> \\<langle>C1, c', C2\\<rangle> +\n    1", "using \"11.hyps\" sp"], ["proof (prove)\nusing this:\n  b < x\n  x < c\n  C \\<noteq> \\<langle>\\<rangle>\n  splay x C = \\<langle>C1, c', C2\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> =\n    A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    \\<phi> \\<langle>C1, c', C2\\<rangle> +\n    1", "by(auto simp: A_splay_def size_if_splay algebra_simps split: tree.split)"], ["proof (state)\nthis:\n  A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> =\n  A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  \\<phi> \\<langle>C1, c', C2\\<rangle> +\n  1\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> =\n  A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  \\<phi> \\<langle>C1, c', C2\\<rangle> +\n  1\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> 3 * \\<phi> C + \\<phi> ?C2D + \\<phi> ?AC1 - \\<phi> ?CD - \\<phi> ?C' - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    \\<phi> \\<langle>C1, c', C2\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n          \\<phi> \\<langle>A, b, C1\\<rangle> -\n          \\<phi> \\<langle>C, c, D\\<rangle> -\n          \\<phi> \\<langle>C1, c', C2\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "using \"11.IH\" \"11.prems\"(1) *"], ["proof (prove)\nusing this:\n  \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n  \\<Longrightarrow> A_splay x C\n                    \\<le> 3 *\n                          (\\<phi> C - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees C\n\ngoal (1 subgoal):\n 1. A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    \\<phi> \\<langle>C1, c', C2\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n          \\<phi> \\<langle>A, b, C1\\<rangle> -\n          \\<phi> \\<langle>C, c, D\\<rangle> -\n          \\<phi> \\<langle>C1, c', C2\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "by(auto simp: algebra_simps)"], ["proof (state)\nthis:\n  A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  \\<phi> \\<langle>C1, c', C2\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n        \\<phi> \\<langle>A, b, C1\\<rangle> -\n        \\<phi> \\<langle>C, c, D\\<rangle> -\n        \\<phi> \\<langle>C1, c', C2\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  A_splay x C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  \\<phi> \\<langle>C1, c', C2\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n        \\<phi> \\<langle>A, b, C1\\<rangle> -\n        \\<phi> \\<langle>C, c, D\\<rangle> -\n        \\<phi> \\<langle>C1, c', C2\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> = 2 * \\<phi> C + \\<phi> ?C2D + \\<phi> ?AC1 - \\<phi> ?CD - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    \\<phi> \\<langle>C1, c', C2\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2 =\n    2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2", "using sp"], ["proof (prove)\nusing this:\n  splay x C = \\<langle>C1, c', C2\\<rangle>\n\ngoal (1 subgoal):\n 1. 3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    \\<phi> \\<langle>C1, c', C2\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2 =\n    2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2", "by(simp add: size_if_splay)"], ["proof (state)\nthis:\n  3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  \\<phi> \\<langle>C1, c', C2\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2 =\n  2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  3 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  \\<phi> \\<langle>C1, c', C2\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2 =\n  2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> \\<phi> C + \\<phi> ?C2D + \\<phi> ?AC1 - 3 * \\<phi> ?X + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    \\<phi> \\<langle>C, c, D\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    \\<le> \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n          \\<phi> \\<langle>A, b, C1\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          2", "by(simp)"], ["proof (state)\nthis:\n  2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  \\<le> \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n        \\<phi> \\<langle>A, b, C1\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  2 * \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  \\<phi> \\<langle>C, c, D\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  \\<le> \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n        \\<phi> \\<langle>A, b, C1\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        2\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> \\<phi> C + 2 * \\<phi> ?ACD - 3 * \\<phi> ?X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    \\<le> \\<phi> C +\n          2 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          1", "using sp ld_ld_1_less[of \"size1 ?C2D\" \"size1 ?AC1\"]"], ["proof (prove)\nusing this:\n  splay x C = \\<langle>C1, c', C2\\<rangle>\n  \\<lbrakk>0 < real (size1 \\<langle>C2, c, D\\<rangle>);\n   0 < real (size1 \\<langle>A, b, C1\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> 1 + \\<phi> \\<langle>C2, c, D\\<rangle> +\n                    \\<phi> \\<langle>A, b, C1\\<rangle>\n                    < 2 *\n                      log 2\n                       (real (size1 \\<langle>C2, c, D\\<rangle>) +\n                        real (size1 \\<langle>A, b, C1\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n    \\<phi> \\<langle>A, b, C1\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    2\n    \\<le> \\<phi> C +\n          2 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          1", "by(simp add: size_if_splay algebra_simps)"], ["proof (state)\nthis:\n  \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  \\<le> \\<phi> C +\n        2 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        1\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "also"], ["proof (state)\nthis:\n  \\<phi> C + \\<phi> \\<langle>C2, c, D\\<rangle> +\n  \\<phi> \\<langle>A, b, C1\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  2\n  \\<le> \\<phi> C +\n        2 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        1\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "have \"\\<dots> \\<le> 3 * \\<phi> ?ACD - 3 * \\<phi> ?X + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> C +\n    2 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n    3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n    1\n    \\<le> 3 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n          3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n          1", "by(simp)"], ["proof (state)\nthis:\n  \\<phi> C + 2 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n  3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n  1\n  \\<le> 3 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        1\n\ngoal (2 subgoals):\n 1. \\<And>b x c C AB D.\n       \\<lbrakk>b < x; x < c; C \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst C; \\<langle>l, x, r\\<rangle> \\<in> subtrees C\\<rbrakk>\n        \\<Longrightarrow> A_splay x C\n                          \\<le> 3 *\n                                (\\<phi> C -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, b,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1\n 2. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "finally"], ["proof (chain)\npicking this:\n  A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n  \\<le> 3 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        1", "show ?case"], ["proof (prove)\nusing this:\n  A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n  \\<le> 3 * \\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n        3 * \\<phi> \\<langle>l, x, r\\<rangle> +\n        1\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "by simp"], ["proof (state)\nthis:\n  A_splay x \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>A, b, \\<langle>C, c, D\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal (1 subgoal):\n 1. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "case (14 a x b CD A B)"], ["proof (state)\nthis:\n  a < x\n  b < x\n  CD \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst CD; \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> A_splay x CD\n                    \\<le> 3 *\n                          (\\<phi> CD - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence 0: \"x \\<notin> set_tree B \\<and> x \\<notin> set_tree A\""], ["proof (prove)\nusing this:\n  a < x\n  b < x\n  CD \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst CD; \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> A_splay x CD\n                    \\<le> 3 *\n                          (\\<phi> CD - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<notin> set_tree B \\<and> x \\<notin> set_tree A", "using \"14.prems\"(1) \\<open>b<x\\<close>"], ["proof (prove)\nusing this:\n  a < x\n  b < x\n  CD \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst CD; \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> A_splay x CD\n                    \\<le> 3 *\n                          (\\<phi> CD - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  b < x\n\ngoal (1 subgoal):\n 1. x \\<notin> set_tree B \\<and> x \\<notin> set_tree A", "by(auto)"], ["proof (state)\nthis:\n  x \\<notin> set_tree B \\<and> x \\<notin> set_tree A\n\ngoal (1 subgoal):\n 1. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "hence 1: \"x \\<in> set_tree CD\""], ["proof (prove)\nusing this:\n  x \\<notin> set_tree B \\<and> x \\<notin> set_tree A\n\ngoal (1 subgoal):\n 1. x \\<in> set_tree CD", "using \"14.prems\" \\<open>b<x\\<close> \\<open>a<x\\<close>"], ["proof (prove)\nusing this:\n  x \\<notin> set_tree B \\<and> x \\<notin> set_tree A\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  b < x\n  a < x\n\ngoal (1 subgoal):\n 1. x \\<in> set_tree CD", "by (auto)"], ["proof (state)\nthis:\n  x \\<in> set_tree CD\n\ngoal (1 subgoal):\n 1. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "obtain C c D where sp: \"splay x CD = Node C c D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C c D.\n        splay x CD = \\<langle>C, c, D\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using splay_not_Leaf[OF \\<open>CD \\<noteq> Leaf\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>l x r. splay ?a CD = \\<langle>l, x, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>C c D.\n        splay x CD = \\<langle>C, c, D\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  splay x CD = \\<langle>C, c, D\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a x c D AB C.\n       \\<lbrakk>a < x; c < x; D \\<noteq> \\<langle>\\<rangle>;\n        \\<lbrakk>bst D; \\<langle>l, x, r\\<rangle> \\<in> subtrees D\\<rbrakk>\n        \\<Longrightarrow> A_splay x D\n                          \\<le> 3 *\n                                (\\<phi> D -\n                                 \\<phi> \\<langle>l, x, r\\<rangle>) +\n                                1;\n        bst \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>;\n        \\<langle>l, x, r\\<rangle>\n        \\<in> subtrees\n               \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay x\n                          \\<langle>AB, a, \\<langle>C, c, D\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>AB, a,\n                                  \\<langle>C, c, D\\<rangle>\\<rangle> -\n                                \\<phi> \\<langle>l, x, r\\<rangle>) +\n                               1", "from zig_zig[of CD x D C l r _ b B a A] 14 sp 0"], ["proof (chain)\npicking this:\n  \\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n   real (T_splay x CD) + \\<Phi> D + \\<Phi> C - \\<Phi> CD\n   \\<le> 2 * \\<phi> CD - 3 * \\<phi> \\<langle>l, x, r\\<rangle> + 1;\n   size CD = size D + size C + 1;\n   \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> real (T_splay x CD) +\n                    \\<Phi>\n                     \\<langle>D, ?u,\n                      \\<langle>C, b,\n                       \\<langle>B, a, A\\<rangle>\\<rangle>\\<rangle> -\n                    \\<Phi>\n                     \\<langle>\\<langle>CD, b, B\\<rangle>, a, A\\<rangle>\n                    \\<le> 3 *\n                          (\\<phi>\n                            \\<langle>\\<langle>CD, b, B\\<rangle>, a,\n                             A\\<rangle> -\n                           \\<phi> \\<langle>l, x, r\\<rangle>)\n  a < x\n  b < x\n  CD \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst CD; \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> A_splay x CD\n                    \\<le> 3 *\n                          (\\<phi> CD - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  splay x CD = \\<langle>C, c, D\\<rangle>\n  x \\<notin> set_tree B \\<and> x \\<notin> set_tree A", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n   real (T_splay x CD) + \\<Phi> D + \\<Phi> C - \\<Phi> CD\n   \\<le> 2 * \\<phi> CD - 3 * \\<phi> \\<langle>l, x, r\\<rangle> + 1;\n   size CD = size D + size C + 1;\n   \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> real (T_splay x CD) +\n                    \\<Phi>\n                     \\<langle>D, ?u,\n                      \\<langle>C, b,\n                       \\<langle>B, a, A\\<rangle>\\<rangle>\\<rangle> -\n                    \\<Phi>\n                     \\<langle>\\<langle>CD, b, B\\<rangle>, a, A\\<rangle>\n                    \\<le> 3 *\n                          (\\<phi>\n                            \\<langle>\\<langle>CD, b, B\\<rangle>, a,\n                             A\\<rangle> -\n                           \\<phi> \\<langle>l, x, r\\<rangle>)\n  a < x\n  b < x\n  CD \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>bst CD; \\<langle>l, x, r\\<rangle> \\<in> subtrees CD\\<rbrakk>\n  \\<Longrightarrow> A_splay x CD\n                    \\<le> 3 *\n                          (\\<phi> CD - \\<phi> \\<langle>l, x, r\\<rangle>) +\n                          1\n  bst \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<langle>l, x, r\\<rangle>\n  \\<in> subtrees \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  splay x CD = \\<langle>C, c, D\\<rangle>\n  x \\<notin> set_tree B \\<and> x \\<notin> set_tree A\n\ngoal (1 subgoal):\n 1. A_splay x \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n           \\<phi> \\<langle>l, x, r\\<rangle>) +\n          1", "by(auto simp: A_splay_def size_if_splay algebra_simps)"], ["proof (state)\nthis:\n  A_splay x \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal:\nNo subgoals!", "(* The explicit version:\n  have \"A_splay x ?A = A_splay x ?R + \\<phi> ?B' + \\<phi> ?A' - \\<phi> ?B - \\<phi> ?R' + 1\"\n    using \"14.prems\" 1 sp\n    by(auto simp: A_splay_def size_if_splay algebra_simps split: tree.split)\n  also have \"\\<dots> \\<le> 3 * \\<phi> ?R + \\<phi> ?B' + \\<phi> ?A' - \\<phi> ?B - \\<phi> ?R' - 3 * \\<phi> ?X + 2\"\n    using 14 0 by(auto simp: algebra_simps)\n  also have \"\\<dots> = 2 * \\<phi> rb + \\<phi> ?B' + \\<phi> ?A' - \\<phi> ?B - 3 * \\<phi> ?X + 2\"\n    using sp by(simp add: size_if_splay)\n  also have \"\\<dots> \\<le> \\<phi> ?R + \\<phi> ?B' + \\<phi> ?A' - 3 * \\<phi> ?X + 2\" by(simp)\n  also have \"\\<dots> \\<le> \\<phi> ?B' + 2 * \\<phi> ?A - 3 * \\<phi> ?X + 1\"\n    using sp ld_ld_1_less[of \"size1 ?R\" \"size1 ?A'\"]\n    by(simp add: size_if_splay algebra_simps)\n  also have \"\\<dots> \\<le> 3 * \\<phi> ?A - 3 * \\<phi> ?X + 1\"\n    using sp by(simp add: size_if_splay)\n  finally show ?case by simp\n*)"], ["proof (state)\nthis:\n  A_splay x \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> -\n         \\<phi> \\<langle>l, x, r\\<rangle>) +\n        1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma A_splay_ub2: assumes \"bst t\" \"x : set_tree t\"\nshows \"A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "from assms(2)"], ["proof (chain)\npicking this:\n  x \\<in> set_tree t", "obtain l r where N: \"Node l x r : subtrees t\""], ["proof (prove)\nusing this:\n  x \\<in> set_tree t\n\ngoal (1 subgoal):\n 1. (\\<And>l r.\n        \\<langle>l, x, r\\<rangle> \\<in> subtrees t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis set_treeE)"], ["proof (state)\nthis:\n  \\<langle>l, x, r\\<rangle> \\<in> subtrees t\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "have \"A_splay x t \\<le> 3 * (\\<phi> t - \\<phi>(Node l x r)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - \\<phi> \\<langle>l, x, r\\<rangle>) + 1", "by(rule A_splay_ub[OF assms(1) N])"], ["proof (state)\nthis:\n  A_splay x t \\<le> 3 * (\\<phi> t - \\<phi> \\<langle>l, x, r\\<rangle>) + 1\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "also"], ["proof (state)\nthis:\n  A_splay x t \\<le> 3 * (\\<phi> t - \\<phi> \\<langle>l, x, r\\<rangle>) + 1\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "have \"\\<dots> \\<le> 3 * (\\<phi> t - 1) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * (\\<phi> t - \\<phi> \\<langle>l, x, r\\<rangle>) + 1\n    \\<le> 3 * (\\<phi> t - 1) + 1", "by(simp add: field_simps)"], ["proof (state)\nthis:\n  3 * (\\<phi> t - \\<phi> \\<langle>l, x, r\\<rangle>) + 1\n  \\<le> 3 * (\\<phi> t - 1) + 1\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "finally"], ["proof (chain)\npicking this:\n  A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1", "."], ["proof (state)\nthis:\n  A_splay x t \\<le> 3 * (\\<phi> t - 1) + 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma A_splay_ub3: assumes \"bst t\" shows \"A_splay x t \\<le> 3 * \\<phi> t + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * \\<phi> t + 1", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> A_splay x t \\<le> 3 * \\<phi> t + 1\n 2. \\<not> ?P \\<Longrightarrow> A_splay x t \\<le> 3 * \\<phi> t + 1", "assume \"t = Leaf\""], ["proof (state)\nthis:\n  t = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> A_splay x t \\<le> 3 * \\<phi> t + 1\n 2. \\<not> ?P \\<Longrightarrow> A_splay x t \\<le> 3 * \\<phi> t + 1", "thus ?thesis"], ["proof (prove)\nusing this:\n  t = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * \\<phi> t + 1", "by(simp add: A_splay_def)"], ["proof (state)\nthis:\n  A_splay x t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay x t \\<le> 3 * \\<phi> t + 1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay x t \\<le> 3 * \\<phi> t + 1", "assume \"t \\<noteq> Leaf\""], ["proof (state)\nthis:\n  t \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay x t \\<le> 3 * \\<phi> t + 1", "from ex_in_set_tree[OF this assms]"], ["proof (chain)\npicking this:\n  \\<exists>x'\\<in>set_tree t.\n     splay x' t = splay ?x t \\<and> T_splay x' t = T_splay ?x t", "obtain x' where\n    a': \"x' \\<in> set_tree t\"  \"splay x' t = splay x t\"  \"T_splay x' t = T_splay x t\""], ["proof (prove)\nusing this:\n  \\<exists>x'\\<in>set_tree t.\n     splay x' t = splay ?x t \\<and> T_splay x' t = T_splay ?x t\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>x' \\<in> set_tree t; splay x' t = splay x t;\n         T_splay x' t = T_splay x t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x' \\<in> set_tree t\n  splay x' t = splay x t\n  T_splay x' t = T_splay x t\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay x t \\<le> 3 * \\<phi> t + 1", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * \\<phi> t + 1", "using A_splay_ub2[OF assms a'(1)]"], ["proof (prove)\nusing this:\n  A_splay x' t \\<le> 3 * (\\<phi> t - 1) + 1\n\ngoal (1 subgoal):\n 1. A_splay x t \\<le> 3 * \\<phi> t + 1", "by(simp add: A_splay_def a')"], ["proof (state)\nthis:\n  A_splay x t \\<le> 3 * \\<phi> t + 1\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \"Analysis of insert\""], ["", "lemma amor_insert: assumes \"bst t\"\nshows \"T_insert x t + \\<Phi>(Splay_Tree.insert x t) - \\<Phi> t \\<le> 4 * log 2 (size1 t) + 3\" (is \"?l \\<le> ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. \\<not> ?P \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "assume \"t = Leaf\""], ["proof (state)\nthis:\n  t = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. \\<not> ?P \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "thus ?thesis"], ["proof (prove)\nusing this:\n  t = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "by(simp add: T_insert_def)"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n  \\<le> 4 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "assume \"t \\<noteq> Leaf\""], ["proof (state)\nthis:\n  t \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "then"], ["proof (chain)\npicking this:\n  t \\<noteq> \\<langle>\\<rangle>", "obtain l e r where [simp]: \"splay x t = Node l e r\""], ["proof (prove)\nusing this:\n  t \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>l e r.\n        splay x t = \\<langle>l, e, r\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis tree.exhaust splay_Leaf_iff)"], ["proof (state)\nthis:\n  splay x t = \\<langle>l, e, r\\<rangle>\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?t = \"real(T_splay x t)\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?Plr = \"\\<Phi> l + \\<Phi> r\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?Ps = \"\\<Phi> t\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?slr = \"real(size1 l) + real(size1 r)\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?LR = \"log 2 (1 + ?slr)\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have opt: \"?t + \\<Phi> (splay x t) - ?Ps  \\<le> 3 * log 2 (real (size1 t)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t\n    \\<le> 3 * \\<phi> t + 1", "using A_splay_ub3[OF \\<open>bst t\\<close>, simplified A_splay_def, of x]"], ["proof (prove)\nusing this:\n  real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t\n    \\<le> 3 * \\<phi> t + 1", "by (simp)"], ["proof (state)\nthis:\n  real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "from less_linear[of e x]"], ["proof (chain)\npicking this:\n  e < x \\<or> e = x \\<or> x < e", "show ?thesis"], ["proof (prove)\nusing this:\n  e < x \\<or> e = x \\<or> x < e\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "proof (elim disjE)"], ["proof (state)\ngoal (3 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. e = x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 3. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "assume \"e=x\""], ["proof (state)\nthis:\n  e = x\n\ngoal (3 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. e = x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 3. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have nneg: \"log 2 (1 + real (size t)) \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> log 2 (1 + real (size t))", "by simp"], ["proof (state)\nthis:\n  0 \\<le> log 2 (1 + real (size t))\n\ngoal (3 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. e = x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 3. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "thus ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> log 2 (1 + real (size t))\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "using \\<open>t \\<noteq> Leaf\\<close> opt \\<open>e=x\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> log 2 (1 + real (size t))\n  t \\<noteq> \\<langle>\\<rangle>\n  real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n  e = x\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "apply(simp add: T_insert_def algebra_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<noteq> \\<langle>\\<rangle>;\n     \\<Phi> l +\n     (\\<Phi> r +\n      (real (T_splay x t) + log 2 (real (size l) + (real (size r) + 2))))\n     \\<le> 1 + (\\<Phi> t + 3 * log 2 (1 + real (size t)));\n     e = x\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> l +\n                      (\\<Phi> r +\n                       (real (T_splay x t) +\n                        log 2 (real (size l) + (real (size r) + 2))))\n                      \\<le> \\<Phi> t + (2 + 4 * log 2 (1 + real (size t)))", "using nneg"], ["proof (prove)\nusing this:\n  0 \\<le> log 2 (1 + real (size t))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<noteq> \\<langle>\\<rangle>;\n     \\<Phi> l +\n     (\\<Phi> r +\n      (real (T_splay x t) + log 2 (real (size l) + (real (size r) + 2))))\n     \\<le> 1 + (\\<Phi> t + 3 * log 2 (1 + real (size t)));\n     e = x\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> l +\n                      (\\<Phi> r +\n                       (real (T_splay x t) +\n                        log 2 (real (size l) + (real (size r) + 2))))\n                      \\<le> \\<Phi> t + (2 + 4 * log 2 (1 + real (size t)))", "by arith"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n  \\<le> 4 * \\<phi> t + 3\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?L = \"log 2 (real(size1 l) + 1)\""], ["proof (state)\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "assume \"e < x\""], ["proof (state)\nthis:\n  e < x\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "hence \"e \\<noteq> x\""], ["proof (prove)\nusing this:\n  e < x\n\ngoal (1 subgoal):\n 1. e \\<noteq> x", "by simp"], ["proof (state)\nthis:\n  e \\<noteq> x\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "hence \"?l = (?t + ?Plr - ?Ps) + ?L + ?LR + 1\""], ["proof (prove)\nusing this:\n  e \\<noteq> x\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n    real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n    log 2 (real (size1 l) + 1) +\n    log 2 (1 + (real (size1 l) + real (size1 r))) +\n    1", "using  \\<open>t \\<noteq> Leaf\\<close> \\<open>e<x\\<close>"], ["proof (prove)\nusing this:\n  e \\<noteq> x\n  t \\<noteq> \\<langle>\\<rangle>\n  e < x\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n    real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n    log 2 (real (size1 l) + 1) +\n    log 2 (1 + (real (size1 l) + real (size1 r))) +\n    1", "by(simp add: T_insert_def)"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n  log 2 (real (size1 l) + 1) +\n  log 2 (1 + (real (size1 l) + real (size1 r))) +\n  1\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "also"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n  log 2 (real (size1 l) + 1) +\n  log 2 (1 + (real (size1 l) + real (size1 r))) +\n  1\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have \"?t + ?Plr - ?Ps \\<le> 2 * log 2 ?slr + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1", "using opt size_splay[of x t,symmetric]"], ["proof (prove)\nusing this:\n  real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n  size t = size (splay x t)\n\ngoal (1 subgoal):\n 1. real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1", "by(simp)"], ["proof (state)\nthis:\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n  \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "also"], ["proof (state)\nthis:\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n  \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have \"?L \\<le> log 2 ?slr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size1 l) + 1) \\<le> log 2 (real (size1 l) + real (size1 r))", "by(simp)"], ["proof (state)\nthis:\n  log 2 (real (size1 l) + 1) \\<le> log 2 (real (size1 l) + real (size1 r))\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "also"], ["proof (state)\nthis:\n  log 2 (real (size1 l) + 1) \\<le> log 2 (real (size1 l) + real (size1 r))\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have \"?LR \\<le> log 2 ?slr + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "have \"?LR \\<le> log 2 (2 * ?slr)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (2 * (real (size1 l) + real (size1 r)))", "by (simp add:)"], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (2 * (real (size1 l) + real (size1 r)))\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "also"], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (2 * (real (size1 l) + real (size1 r)))\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "have \"\\<dots> \\<le> log 2 ?slr + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (2 * (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "by (simp add: log_mult del:distrib_left_numeral)"], ["proof (state)\nthis:\n  log 2 (2 * (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "finally"], ["proof (chain)\npicking this:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "."], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (2 subgoals):\n 1. e < x \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3\n 2. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x + log 2 (real (size1 l) + 1) +\n              log 2 (1 + (real (size1 l) + real (size1 r))) +\n              1\n              \\<le> y + log 2 (real (size1 l) + 1) +\n                    log 2 (1 + (real (size1 l) + real (size1 r))) +\n                    1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 + x +\n      log 2 (1 + (real (size1 l) + real (size1 r))) +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 + y +\n            log 2 (1 + (real (size1 l) + real (size1 r))) +\n            1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n      log 2 (real (size1 l) + real (size1 r)) +\n      x +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n            log 2 (real (size1 l) + real (size1 r)) +\n            y +\n            1\\<rbrakk>\n  \\<Longrightarrow> real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) -\n                    \\<Phi> t\n                    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n                          log 2 (real (size1 l) + real (size1 r)) +\n                          (log 2 (real (size1 l) + real (size1 r)) + 1) +\n                          1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x + log 2 (real (size1 l) + 1) +\n              log 2 (1 + (real (size1 l) + real (size1 r))) +\n              1\n              \\<le> y + log 2 (real (size1 l) + 1) +\n                    log 2 (1 + (real (size1 l) + real (size1 r))) +\n                    1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 + x +\n      log 2 (1 + (real (size1 l) + real (size1 r))) +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 + y +\n            log 2 (1 + (real (size1 l) + real (size1 r))) +\n            1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n      log 2 (real (size1 l) + real (size1 r)) +\n      x +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n            log 2 (real (size1 l) + real (size1 r)) +\n            y +\n            1\\<rbrakk>\n  \\<Longrightarrow> real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) -\n                    \\<Phi> t\n                    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n                          log 2 (real (size1 l) + real (size1 r)) +\n                          (log 2 (real (size1 l) + real (size1 r)) + 1) +\n                          1\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "using size_splay[of x t,symmetric]"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x + log 2 (real (size1 l) + 1) +\n              log 2 (1 + (real (size1 l) + real (size1 r))) +\n              1\n              \\<le> y + log 2 (real (size1 l) + 1) +\n                    log 2 (1 + (real (size1 l) + real (size1 r))) +\n                    1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 + x +\n      log 2 (1 + (real (size1 l) + real (size1 r))) +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 + y +\n            log 2 (1 + (real (size1 l) + real (size1 r))) +\n            1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n      log 2 (real (size1 l) + real (size1 r)) +\n      x +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n            log 2 (real (size1 l) + real (size1 r)) +\n            y +\n            1\\<rbrakk>\n  \\<Longrightarrow> real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) -\n                    \\<Phi> t\n                    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n                          log 2 (real (size1 l) + real (size1 r)) +\n                          (log 2 (real (size1 l) + real (size1 r)) + 1) +\n                          1\n  size t = size (splay x t)\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "by (simp)"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n  \\<le> 4 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "let ?R = \"log 2 (2 + real(size r))\""], ["proof (state)\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "assume \"x < e\""], ["proof (state)\nthis:\n  x < e\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "hence \"e \\<noteq> x\""], ["proof (prove)\nusing this:\n  x < e\n\ngoal (1 subgoal):\n 1. e \\<noteq> x", "by simp"], ["proof (state)\nthis:\n  e \\<noteq> x\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "hence \"?l = (?t + ?Plr - ?Ps) + ?R + ?LR + 1\""], ["proof (prove)\nusing this:\n  e \\<noteq> x\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n    real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n    log 2 (2 + real (size r)) +\n    log 2 (1 + (real (size1 l) + real (size1 r))) +\n    1", "using \\<open>t \\<noteq> Leaf\\<close> \\<open>x < e\\<close>"], ["proof (prove)\nusing this:\n  e \\<noteq> x\n  t \\<noteq> \\<langle>\\<rangle>\n  x < e\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n    real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n    log 2 (2 + real (size r)) +\n    log 2 (1 + (real (size1 l) + real (size1 r))) +\n    1", "by(simp add: T_insert_def)"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n  log 2 (2 + real (size r)) +\n  log 2 (1 + (real (size1 l) + real (size1 r))) +\n  1\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "also"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t =\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t +\n  log 2 (2 + real (size r)) +\n  log 2 (1 + (real (size1 l) + real (size1 r))) +\n  1\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have \"?t + ?Plr - ?Ps \\<le> 2 * log 2 ?slr + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1", "using opt size_splay[of x t,symmetric]"], ["proof (prove)\nusing this:\n  real (T_splay x t) + \\<Phi> (splay x t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n  size t = size (splay x t)\n\ngoal (1 subgoal):\n 1. real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1", "by(simp)"], ["proof (state)\nthis:\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n  \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "also"], ["proof (state)\nthis:\n  real (T_splay x t) + (\\<Phi> l + \\<Phi> r) - \\<Phi> t\n  \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have \"?R \\<le> log 2 ?slr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (2 + real (size r)) \\<le> log 2 (real (size1 l) + real (size1 r))", "by(simp)"], ["proof (state)\nthis:\n  log 2 (2 + real (size r)) \\<le> log 2 (real (size1 l) + real (size1 r))\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "also"], ["proof (state)\nthis:\n  log 2 (2 + real (size r)) \\<le> log 2 (real (size1 l) + real (size1 r))\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "have \"?LR \\<le> log 2 ?slr + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "have \"?LR \\<le> log 2 (2 * ?slr)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (2 * (real (size1 l) + real (size1 r)))", "by (simp add:)"], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (2 * (real (size1 l) + real (size1 r)))\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "also"], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (2 * (real (size1 l) + real (size1 r)))\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "have \"\\<dots> \\<le> log 2 ?slr + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (2 * (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "by (simp add: log_mult del:distrib_left_numeral)"], ["proof (state)\nthis:\n  log 2 (2 * (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "finally"], ["proof (chain)\npicking this:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. log 2 (1 + (real (size1 l) + real (size1 r)))\n    \\<le> log 2 (real (size1 l) + real (size1 r)) + 1", "."], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  log 2 (1 + (real (size1 l) + real (size1 r)))\n  \\<le> log 2 (real (size1 l) + real (size1 r)) + 1\n\ngoal (1 subgoal):\n 1. x < e \\<Longrightarrow>\n    real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x + log 2 (2 + real (size r)) +\n              log 2 (1 + (real (size1 l) + real (size1 r))) +\n              1\n              \\<le> y + log 2 (2 + real (size r)) +\n                    log 2 (1 + (real (size1 l) + real (size1 r))) +\n                    1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 + x +\n      log 2 (1 + (real (size1 l) + real (size1 r))) +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 + y +\n            log 2 (1 + (real (size1 l) + real (size1 r))) +\n            1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n      log 2 (real (size1 l) + real (size1 r)) +\n      x +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n            log 2 (real (size1 l) + real (size1 r)) +\n            y +\n            1\\<rbrakk>\n  \\<Longrightarrow> real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) -\n                    \\<Phi> t\n                    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n                          log 2 (real (size1 l) + real (size1 r)) +\n                          (log 2 (real (size1 l) + real (size1 r)) + 1) +\n                          1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x + log 2 (2 + real (size r)) +\n              log 2 (1 + (real (size1 l) + real (size1 r))) +\n              1\n              \\<le> y + log 2 (2 + real (size r)) +\n                    log 2 (1 + (real (size1 l) + real (size1 r))) +\n                    1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 + x +\n      log 2 (1 + (real (size1 l) + real (size1 r))) +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 + y +\n            log 2 (1 + (real (size1 l) + real (size1 r))) +\n            1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n      log 2 (real (size1 l) + real (size1 r)) +\n      x +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n            log 2 (real (size1 l) + real (size1 r)) +\n            y +\n            1\\<rbrakk>\n  \\<Longrightarrow> real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) -\n                    \\<Phi> t\n                    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n                          log 2 (real (size1 l) + real (size1 r)) +\n                          (log 2 (real (size1 l) + real (size1 r)) + 1) +\n                          1\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "using size_splay[of x t, symmetric]"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x + log 2 (2 + real (size r)) +\n              log 2 (1 + (real (size1 l) + real (size1 r))) +\n              1\n              \\<le> y + log 2 (2 + real (size r)) +\n                    log 2 (1 + (real (size1 l) + real (size1 r))) +\n                    1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 + x +\n      log 2 (1 + (real (size1 l) + real (size1 r))) +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 + y +\n            log 2 (1 + (real (size1 l) + real (size1 r))) +\n            1;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n      log 2 (real (size1 l) + real (size1 r)) +\n      x +\n      1\n      \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n            log 2 (real (size1 l) + real (size1 r)) +\n            y +\n            1\\<rbrakk>\n  \\<Longrightarrow> real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) -\n                    \\<Phi> t\n                    \\<le> 2 * log 2 (real (size1 l) + real (size1 r)) + 1 +\n                          log 2 (real (size1 l) + real (size1 r)) +\n                          (log 2 (real (size1 l) + real (size1 r)) + 1) +\n                          1\n  size t = size (splay x t)\n\ngoal (1 subgoal):\n 1. real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n    \\<le> 4 * \\<phi> t + 3", "by simp"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n  \\<le> 4 * \\<phi> t + 3\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (T_insert x t) + \\<Phi> (Splay_Tree.insert x t) - \\<Phi> t\n  \\<le> 4 * \\<phi> t + 3\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \"Analysis of delete\""], ["", "definition A_splay_max :: \"'a::linorder tree \\<Rightarrow> real\" where\n\"A_splay_max t = T_splay_max t + \\<Phi>(splay_max t) - \\<Phi> t\""], ["", "lemma A_splay_max_ub: \"t \\<noteq> Leaf \\<Longrightarrow> A_splay_max t \\<le> 3 * (\\<phi> t - 1) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max t \\<le> 3 * (\\<phi> t - 1) + 1", "proof(induction t rule: splay_max.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>\\<rangle>\n    \\<le> 3 * (\\<phi> \\<langle>\\<rangle> - 1) + 1\n 2. \\<And>A a.\n       \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       A_splay_max \\<langle>A, a, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 3 * (\\<phi> \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> - 1) + 1\n 3. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "case 1"], ["proof (state)\nthis:\n  \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>\\<rangle>\n    \\<le> 3 * (\\<phi> \\<langle>\\<rangle> - 1) + 1\n 2. \\<And>A a.\n       \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       A_splay_max \\<langle>A, a, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 3 * (\\<phi> \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> - 1) + 1\n 3. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "thus ?case"], ["proof (prove)\nusing this:\n  \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>\\<rangle>\n    \\<le> 3 * (\\<phi> \\<langle>\\<rangle> - 1) + 1", "by (simp)"], ["proof (state)\nthis:\n  A_splay_max \\<langle>\\<rangle>\n  \\<le> 3 * (\\<phi> \\<langle>\\<rangle> - 1) + 1\n\ngoal (2 subgoals):\n 1. \\<And>A a.\n       \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       A_splay_max \\<langle>A, a, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 3 * (\\<phi> \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> - 1) + 1\n 2. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A a.\n       \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       A_splay_max \\<langle>A, a, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 3 * (\\<phi> \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> - 1) + 1\n 2. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "case (2 A)"], ["proof (state)\nthis:\n  \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>A a.\n       \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       A_splay_max \\<langle>A, a, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 3 * (\\<phi> \\<langle>A, a, \\<langle>\\<rangle>\\<rangle> - 1) + 1\n 2. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "thus ?case"], ["proof (prove)\nusing this:\n  \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * (\\<phi> \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle> - 1) + 1", "using one_le_log_cancel_iff[of 2 \"size1 A + 1\"]"], ["proof (prove)\nusing this:\n  \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle> \\<noteq> \\<langle>\\<rangle>\n  \\<lbrakk>1 < 2; 0 < real (size1 A + 1)\\<rbrakk>\n  \\<Longrightarrow> (1 \\<le> log 2 (real (size1 A + 1))) =\n                    (2 \\<le> real (size1 A + 1))\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * (\\<phi> \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle> - 1) + 1", "by (simp add: A_splay_max_def del: one_le_log_cancel_iff)"], ["proof (state)\nthis:\n  A_splay_max \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 3 * (\\<phi> \\<langle>A, a_, \\<langle>\\<rangle>\\<rangle> - 1) + 1\n\ngoal (1 subgoal):\n 1. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "case (3 l b rl c rr)"], ["proof (state)\nthis:\n  \\<lbrakk>rr \\<noteq> \\<langle>\\<rangle>;\n   rr \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> A_splay_max rr \\<le> 3 * (\\<phi> rr - 1) + 1\n  \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> \\<noteq>\n  \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A a B b CD.\n       \\<lbrakk>\\<lbrakk>CD \\<noteq> \\<langle>\\<rangle>;\n                 CD \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n                \\<Longrightarrow> A_splay_max CD\n                                  \\<le> 3 * (\\<phi> CD - 1) + 1;\n        \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> A_splay_max\n                          \\<langle>A, a, \\<langle>B, b, CD\\<rangle>\\<rangle>\n                         \\<le> 3 *\n                               (\\<phi>\n                                 \\<langle>A, a,\n                                  \\<langle>B, b, CD\\<rangle>\\<rangle> -\n                                1) +\n                               1", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1\n 2. \\<not> ?P \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "assume \"rr = Leaf\""], ["proof (state)\nthis:\n  rr = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1\n 2. \\<not> ?P \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "thus ?thesis"], ["proof (prove)\nusing this:\n  rr = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "using one_le_log_cancel_iff[of 2 \"1 + size1 rl\"]\n        one_le_log_cancel_iff[of 2 \"1 + size1 l + size1 rl\"]\n        log_le_cancel_iff[of 2 \"size1 l + size1 rl\" \"1 + size1 l + size1 rl\"]"], ["proof (prove)\nusing this:\n  rr = \\<langle>\\<rangle>\n  \\<lbrakk>1 < 2; 0 < real (1 + size1 rl)\\<rbrakk>\n  \\<Longrightarrow> (1 \\<le> log 2 (real (1 + size1 rl))) =\n                    (2 \\<le> real (1 + size1 rl))\n  \\<lbrakk>1 < 2; 0 < real (1 + size1 l + size1 rl)\\<rbrakk>\n  \\<Longrightarrow> (1 \\<le> log 2 (real (1 + size1 l + size1 rl))) =\n                    (2 \\<le> real (1 + size1 l + size1 rl))\n  \\<lbrakk>1 < 2; 0 < real (size1 l + size1 rl);\n   0 < real (1 + size1 l + size1 rl)\\<rbrakk>\n  \\<Longrightarrow> (log 2 (real (size1 l + size1 rl))\n                     \\<le> log 2 (real (1 + size1 l + size1 rl))) =\n                    (real (size1 l + size1 rl)\n                     \\<le> real (1 + size1 l + size1 rl))\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "by (auto simp: A_splay_max_def field_simps\n           simp del: log_le_cancel_iff one_le_log_cancel_iff)"], ["proof (state)\nthis:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n        1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "assume \"rr \\<noteq> Leaf\""], ["proof (state)\nthis:\n  rr \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "then"], ["proof (chain)\npicking this:\n  rr \\<noteq> \\<langle>\\<rangle>", "obtain l' u r' where sp: \"splay_max rr = Node l' u r'\""], ["proof (prove)\nusing this:\n  rr \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>l' u r'.\n        splay_max rr = \\<langle>l', u, r'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using splay_max_Leaf_iff tree.exhaust"], ["proof (prove)\nusing this:\n  rr \\<noteq> \\<langle>\\<rangle>\n  (splay_max ?t = \\<langle>\\<rangle>) = (?t = \\<langle>\\<rangle>)\n  \\<lbrakk>?y = \\<langle>\\<rangle> \\<Longrightarrow> ?P;\n   \\<And>x21 x22 x23.\n      ?y = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (\\<And>l' u r'.\n        splay_max rr = \\<langle>l', u, r'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  splay_max rr = \\<langle>l', u, r'\\<rangle>\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "hence 1: \"size rr = size l' + size r' + 1\""], ["proof (prove)\nusing this:\n  splay_max rr = \\<langle>l', u, r'\\<rangle>\n\ngoal (1 subgoal):\n 1. size rr = size l' + size r' + 1", "using size_splay_max[of rr,symmetric]"], ["proof (prove)\nusing this:\n  splay_max rr = \\<langle>l', u, r'\\<rangle>\n  size rr = size (splay_max rr)\n\ngoal (1 subgoal):\n 1. size rr = size l' + size r' + 1", "by(simp)"], ["proof (state)\nthis:\n  size rr = size l' + size r' + 1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "let ?C = \"Node rl c rr\""], ["proof (state)\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "let ?B = \"Node l b ?C\""], ["proof (state)\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "let ?B' = \"Node l b rl\""], ["proof (state)\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "let ?C' = \"Node ?B' c l'\""], ["proof (state)\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "have \"A_splay_max ?B = A_splay_max rr + \\<phi> ?B' + \\<phi> ?C' - \\<phi> rr - \\<phi> ?C + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> =\n    A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> rr -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> +\n    1", "using \"3.prems\" sp 1"], ["proof (prove)\nusing this:\n  \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> \\<noteq>\n  \\<langle>\\<rangle>\n  splay_max rr = \\<langle>l', u, r'\\<rangle>\n  size rr = size l' + size r' + 1\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> =\n    A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> rr -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> +\n    1", "by(auto simp add: A_splay_max_def)"], ["proof (state)\nthis:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> =\n  A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> rr -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> +\n  1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "also"], ["proof (state)\nthis:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> =\n  A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> rr -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> +\n  1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "have \"\\<dots> \\<le> 3 * (\\<phi> rr - 1) + \\<phi> ?B' + \\<phi> ?C' - \\<phi> rr - \\<phi> ?C + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> rr -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> +\n    1\n    \\<le> 3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n          \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n          \\<phi> rr -\n          \\<phi> \\<langle>rl, c, rr\\<rangle> +\n          2", "using 3 \\<open>rr \\<noteq> Leaf\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>rr \\<noteq> \\<langle>\\<rangle>;\n   rr \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> A_splay_max rr \\<le> 3 * (\\<phi> rr - 1) + 1\n  \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> \\<noteq>\n  \\<langle>\\<rangle>\n  rr \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> rr -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> +\n    1\n    \\<le> 3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n          \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n          \\<phi> rr -\n          \\<phi> \\<langle>rl, c, rr\\<rangle> +\n          2", "by auto"], ["proof (state)\nthis:\n  A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> rr -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> +\n  1\n  \\<le> 3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n        \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n        \\<phi> rr -\n        \\<phi> \\<langle>rl, c, rr\\<rangle> +\n        2\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "also"], ["proof (state)\nthis:\n  A_splay_max rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> rr -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> +\n  1\n  \\<le> 3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n        \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n        \\<phi> rr -\n        \\<phi> \\<langle>rl, c, rr\\<rangle> +\n        2\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "have \"\\<dots> = 2 * \\<phi> rr + \\<phi> ?B' + \\<phi> ?C' - \\<phi> ?C - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> rr -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> +\n    2 =\n    2 * \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> -\n    1", "by simp"], ["proof (state)\nthis:\n  3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> rr -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> +\n  2 =\n  2 * \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> -\n  1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "also"], ["proof (state)\nthis:\n  3 * (\\<phi> rr - 1) + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> rr -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> +\n  2 =\n  2 * \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> -\n  1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "have \"\\<dots> \\<le> \\<phi> rr + \\<phi> ?B' + \\<phi> ?C' - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    \\<phi> \\<langle>rl, c, rr\\<rangle> -\n    1\n    \\<le> \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n          \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n          1", "by simp"], ["proof (state)\nthis:\n  2 * \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> -\n  1\n  \\<le> \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n        \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n        1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "also"], ["proof (state)\nthis:\n  2 * \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  \\<phi> \\<langle>rl, c, rr\\<rangle> -\n  1\n  \\<le> \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n        \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n        1\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "have \"\\<dots> \\<le> 2 * \\<phi> ?B + \\<phi> ?C' - 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    1\n    \\<le> 2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n          \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n          2", "using ld_ld_1_less[of \"size1 ?B'\" \"size1 rr\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < real (size1 \\<langle>l, b, rl\\<rangle>);\n   0 < real (size1 rr)\\<rbrakk>\n  \\<Longrightarrow> 1 + \\<phi> \\<langle>l, b, rl\\<rangle> + \\<phi> rr\n                    < 2 *\n                      log 2\n                       (real (size1 \\<langle>l, b, rl\\<rangle>) +\n                        real (size1 rr))\n\ngoal (1 subgoal):\n 1. \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    1\n    \\<le> 2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n          \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n          2", "by(simp add:)"], ["proof (state)\nthis:\n  \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  1\n  \\<le> 2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n        \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n        2\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "also"], ["proof (state)\nthis:\n  \\<phi> rr + \\<phi> \\<langle>l, b, rl\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  1\n  \\<le> 2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n        \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n        2\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "have \"\\<dots> \\<le> 3 * \\<phi> ?B - 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    2\n    \\<le> 3 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 2", "using 1"], ["proof (prove)\nusing this:\n  size rr = size l' + size r' + 1\n\ngoal (1 subgoal):\n 1. 2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n    \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n    2\n    \\<le> 3 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 2", "by simp"], ["proof (state)\nthis:\n  2 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> +\n  \\<phi> \\<langle>\\<langle>l, b, rl\\<rangle>, c, l'\\<rangle> -\n  2\n  \\<le> 3 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 2\n\ngoal (1 subgoal):\n 1. rr \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "finally"], ["proof (chain)\npicking this:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n  \\<le> 3 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 2", "show ?case"], ["proof (prove)\nusing this:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n  \\<le> 3 * \\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 2\n\ngoal (1 subgoal):\n 1. A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n    \\<le> 3 *\n          (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n          1", "by simp"], ["proof (state)\nthis:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n        1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  A_splay_max \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle>\n  \\<le> 3 *\n        (\\<phi> \\<langle>l, b, \\<langle>rl, c, rr\\<rangle>\\<rangle> - 1) +\n        1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma A_splay_max_ub3: \"A_splay_max t \\<le> 3 * \\<phi> t + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay_max t \\<le> 3 * \\<phi> t + 1", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> A_splay_max t \\<le> 3 * \\<phi> t + 1\n 2. \\<not> ?P \\<Longrightarrow> A_splay_max t \\<le> 3 * \\<phi> t + 1", "assume \"t = Leaf\""], ["proof (state)\nthis:\n  t = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> A_splay_max t \\<le> 3 * \\<phi> t + 1\n 2. \\<not> ?P \\<Longrightarrow> A_splay_max t \\<le> 3 * \\<phi> t + 1", "thus ?thesis"], ["proof (prove)\nusing this:\n  t = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. A_splay_max t \\<le> 3 * \\<phi> t + 1", "by(simp add: A_splay_max_def)"], ["proof (state)\nthis:\n  A_splay_max t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max t \\<le> 3 * \\<phi> t + 1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max t \\<le> 3 * \\<phi> t + 1", "assume \"t \\<noteq> Leaf\""], ["proof (state)\nthis:\n  t \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. t \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    A_splay_max t \\<le> 3 * \\<phi> t + 1", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. A_splay_max t \\<le> 3 * \\<phi> t + 1", "using A_splay_max_ub[OF \\<open>t \\<noteq> Leaf\\<close>]"], ["proof (prove)\nusing this:\n  A_splay_max t \\<le> 3 * (\\<phi> t - 1) + 1\n\ngoal (1 subgoal):\n 1. A_splay_max t \\<le> 3 * \\<phi> t + 1", "by(simp)"], ["proof (state)\nthis:\n  A_splay_max t \\<le> 3 * \\<phi> t + 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma amor_delete: assumes \"bst t\"\nshows \"T_delete a t + \\<Phi>(Splay_Tree.delete a t) - \\<Phi> t \\<le> 6 * log 2 (size1 t) + 3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "proof (cases t)"], ["proof (state)\ngoal (2 subgoals):\n 1. t = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "case Leaf"], ["proof (state)\nthis:\n  t = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. t = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "thus ?thesis"], ["proof (prove)\nusing this:\n  t = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "by(simp add: Splay_Tree.delete_def T_delete_def)"], ["proof (state)\nthis:\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "case [simp]: (Node ls x rs)"], ["proof (state)\nthis:\n  t = \\<langle>ls, x, rs\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "then"], ["proof (chain)\npicking this:\n  t = \\<langle>ls, x, rs\\<rangle>", "obtain l e r where sp[simp]: \"splay a (Node ls x rs) = Node l e r\""], ["proof (prove)\nusing this:\n  t = \\<langle>ls, x, rs\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>l e r.\n        splay a \\<langle>ls, x, rs\\<rangle> =\n        \\<langle>l, e, r\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis tree.exhaust splay_Leaf_iff)"], ["proof (state)\nthis:\n  splay a \\<langle>ls, x, rs\\<rangle> = \\<langle>l, e, r\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "let ?t = \"real(T_splay a t)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "let ?Plr = \"\\<Phi> l + \\<Phi> r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "let ?Ps = \"\\<Phi> t\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "let ?slr = \"real(size1 l) + real(size1 r)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "let ?LR = \"log 2 (1 + ?slr)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "let ?lslr = \"log 2 (real (size ls) + (real (size rs) + 2))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have \"?lslr \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> log 2 (real (size ls) + (real (size rs) + 2))", "by simp"], ["proof (state)\nthis:\n  0 \\<le> log 2 (real (size ls) + (real (size rs) + 2))\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have opt: \"?t + \\<Phi> (splay a t) - ?Ps  \\<le> 3 * log 2 (real (size1 t)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t\n    \\<le> 3 * \\<phi> t + 1", "using A_splay_ub3[OF \\<open>bst t\\<close>, simplified A_splay_def, of a]"], ["proof (prove)\nusing this:\n  real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t\n    \\<le> 3 * \\<phi> t + 1", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       t = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "proof (cases \"e=a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. e = a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. e \\<noteq> a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "case False"], ["proof (state)\nthis:\n  e \\<noteq> a\n\ngoal (2 subgoals):\n 1. e = a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. e \\<noteq> a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "thus ?thesis"], ["proof (prove)\nusing this:\n  e \\<noteq> a\n\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "using opt"], ["proof (prove)\nusing this:\n  e \\<noteq> a\n  real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "apply(simp add: Splay_Tree.delete_def T_delete_def field_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>e \\<noteq> a;\n     \\<Phi> l +\n     (\\<Phi> r +\n      (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n       log 2 (real (size l) + (real (size r) + 2))))\n     \\<le> 1 +\n           (\\<Phi> ls +\n            (\\<Phi> rs +\n             4 * log 2 (real (size ls) + (real (size rs) + 2))))\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> l +\n                      (\\<Phi> r +\n                       (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n                        log 2 (real (size l) + (real (size r) + 2))))\n                      \\<le> \\<Phi> ls +\n                            (\\<Phi> rs +\n                             (2 +\n                              7 *\n                              log 2\n                               (real (size ls) + (real (size rs) + 2))))", "using \\<open>?lslr \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> log 2 (real (size ls) + (real (size rs) + 2))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e \\<noteq> a;\n     \\<Phi> l +\n     (\\<Phi> r +\n      (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n       log 2 (real (size l) + (real (size r) + 2))))\n     \\<le> 1 +\n           (\\<Phi> ls +\n            (\\<Phi> rs +\n             4 * log 2 (real (size ls) + (real (size rs) + 2))))\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> l +\n                      (\\<Phi> r +\n                       (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n                        log 2 (real (size l) + (real (size r) + 2))))\n                      \\<le> \\<Phi> ls +\n                            (\\<Phi> rs +\n                             (2 +\n                              7 *\n                              log 2\n                               (real (size ls) + (real (size rs) + 2))))", "by arith"], ["proof (state)\nthis:\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. e = a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. e = a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "case [simp]: True"], ["proof (state)\nthis:\n  e = a\n\ngoal (1 subgoal):\n 1. e = a \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "proof (cases l)"], ["proof (state)\ngoal (2 subgoals):\n 1. l = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "case Leaf"], ["proof (state)\nthis:\n  l = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. l = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have 1: \"log 2 (real (size r) + 2) \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> log 2 (real (size r) + 2)", "by(simp)"], ["proof (state)\nthis:\n  0 \\<le> log 2 (real (size r) + 2)\n\ngoal (2 subgoals):\n 1. l = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3\n 2. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "using Leaf opt"], ["proof (prove)\nusing this:\n  l = \\<langle>\\<rangle>\n  real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "apply(simp add: Splay_Tree.delete_def T_delete_def field_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>l = \\<langle>\\<rangle>;\n     \\<Phi> r +\n     (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n      log 2 (real (size r) + 2))\n     \\<le> 1 +\n           (\\<Phi> ls +\n            (\\<Phi> rs +\n             4 * log 2 (real (size ls) + (real (size rs) + 2))))\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> r +\n                      real (T_splay a \\<langle>ls, x, rs\\<rangle>)\n                      \\<le> \\<Phi> ls +\n                            (\\<Phi> rs +\n                             (2 +\n                              7 *\n                              log 2\n                               (real (size ls) + (real (size rs) + 2))))", "using 1 \\<open>?lslr \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> log 2 (real (size r) + 2)\n  0 \\<le> log 2 (real (size ls) + (real (size rs) + 2))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>l = \\<langle>\\<rangle>;\n     \\<Phi> r +\n     (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n      log 2 (real (size r) + 2))\n     \\<le> 1 +\n           (\\<Phi> ls +\n            (\\<Phi> rs +\n             4 * log 2 (real (size ls) + (real (size rs) + 2))))\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> r +\n                      real (T_splay a \\<langle>ls, x, rs\\<rangle>)\n                      \\<le> \\<Phi> ls +\n                            (\\<Phi> rs +\n                             (2 +\n                              7 *\n                              log 2\n                               (real (size ls) + (real (size rs) + 2))))", "by arith"], ["proof (state)\nthis:\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "case (Node ll y lr)"], ["proof (state)\nthis:\n  l = \\<langle>ll, y, lr\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "then"], ["proof (chain)\npicking this:\n  l = \\<langle>ll, y, lr\\<rangle>", "obtain l' y' r' where [simp]: \"splay_max (Node ll y lr) = Node l' y' r'\""], ["proof (prove)\nusing this:\n  l = \\<langle>ll, y, lr\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>l' y' r'.\n        splay_max \\<langle>ll, y, lr\\<rangle> =\n        \\<langle>l', y', r'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using splay_max_Leaf_iff tree.exhaust"], ["proof (prove)\nusing this:\n  l = \\<langle>ll, y, lr\\<rangle>\n  (splay_max ?t = \\<langle>\\<rangle>) = (?t = \\<langle>\\<rangle>)\n  \\<lbrakk>?y = \\<langle>\\<rangle> \\<Longrightarrow> ?P;\n   \\<And>x21 x22 x23.\n      ?y = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (\\<And>l' y' r'.\n        splay_max \\<langle>ll, y, lr\\<rangle> =\n        \\<langle>l', y', r'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  splay_max \\<langle>ll, y, lr\\<rangle> = \\<langle>l', y', r'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have \"bst l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bst l", "using bst_splay[OF \\<open>bst t\\<close>, of a]"], ["proof (prove)\nusing this:\n  bst (splay a t)\n\ngoal (1 subgoal):\n 1. bst l", "by simp"], ["proof (state)\nthis:\n  bst l\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have \"\\<Phi> r' \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> \\<Phi> r'", "apply (induction r')"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 \\<le> \\<Phi> \\<langle>\\<rangle>\n 2. \\<And>r'1 x2 r'2.\n       \\<lbrakk>0 \\<le> \\<Phi> r'1; 0 \\<le> \\<Phi> r'2\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<Phi> \\<langle>r'1, x2, r'2\\<rangle>", "by (auto)"], ["proof (state)\nthis:\n  0 \\<le> \\<Phi> r'\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have optm: \"real(T_splay_max l) + \\<Phi> (splay_max l) - \\<Phi> l  \\<le> 3 * \\<phi> l + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_splay_max l) + \\<Phi> (splay_max l) - \\<Phi> l\n    \\<le> 3 * \\<phi> l + 1", "using A_splay_max_ub3[of l, simplified A_splay_max_def]"], ["proof (prove)\nusing this:\n  real (T_splay_max l) + \\<Phi> (splay_max l) - \\<Phi> l\n  \\<le> 3 * \\<phi> l + 1\n\ngoal (1 subgoal):\n 1. real (T_splay_max l) + \\<Phi> (splay_max l) - \\<Phi> l\n    \\<le> 3 * \\<phi> l + 1", "by (simp add: field_simps Node)"], ["proof (state)\nthis:\n  real (T_splay_max l) + \\<Phi> (splay_max l) - \\<Phi> l\n  \\<le> 3 * \\<phi> l + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have 1: \"log 2 (2+(real(size l')+real(size r))) \\<le> log 2 (2+(real(size l)+real(size r)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (2 + (real (size l') + real (size r)))\n    \\<le> log 2 (2 + (real (size l) + real (size r)))", "using size_splay_max[of l] Node"], ["proof (prove)\nusing this:\n  size (splay_max l) = size l\n  l = \\<langle>ll, y, lr\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (2 + (real (size l') + real (size r)))\n    \\<le> log 2 (2 + (real (size l) + real (size r)))", "by simp"], ["proof (state)\nthis:\n  log 2 (2 + (real (size l') + real (size r)))\n  \\<le> log 2 (2 + (real (size l) + real (size r)))\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have 2: \"log 2 (2 + (real (size l') + real (size r'))) \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> log 2 (2 + (real (size l') + real (size r')))", "by simp"], ["proof (state)\nthis:\n  0 \\<le> log 2 (2 + (real (size l') + real (size r')))\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have 3: \"log 2 (size1 l' + size1 r) \\<le> log 2 (size1 l' + size1 r') + log 2 ?slr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size1 l' + size1 r))\n    \\<le> log 2 (real (size1 l' + size1 r')) +\n          log 2 (real (size1 l) + real (size1 r))", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (2 + (real (size l') + real (size r)))\n    \\<le> log 2 (2 + (real (size l') + real (size r'))) +\n          log 2 (2 + (real (size l) + real (size r)))", "using 1 2"], ["proof (prove)\nusing this:\n  log 2 (2 + (real (size l') + real (size r)))\n  \\<le> log 2 (2 + (real (size l) + real (size r)))\n  0 \\<le> log 2 (2 + (real (size l') + real (size r')))\n\ngoal (1 subgoal):\n 1. log 2 (2 + (real (size l') + real (size r)))\n    \\<le> log 2 (2 + (real (size l') + real (size r'))) +\n          log 2 (2 + (real (size l) + real (size r)))", "by arith"], ["proof (state)\nthis:\n  log 2 (real (size1 l' + size1 r))\n  \\<le> log 2 (real (size1 l' + size1 r')) +\n        log 2 (real (size1 l) + real (size1 r))\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "have 4: \"log 2 (real(size ll) + (real(size lr) + 2)) \\<le> ?lslr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size ll) + (real (size lr) + 2))\n    \\<le> log 2 (real (size ls) + (real (size rs) + 2))", "using size_if_splay[OF sp] Node"], ["proof (prove)\nusing this:\n  size \\<langle>ls, x, rs\\<rangle> = size l + size r + 1\n  l = \\<langle>ll, y, lr\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (real (size ll) + (real (size lr) + 2))\n    \\<le> log 2 (real (size ls) + (real (size rs) + 2))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size ll) + (real (size lr) + 2))\n  \\<le> log 2 (real (size ls) + (real (size rs) + 2))\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       l = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n       \\<le> 6 * \\<phi> t + 3", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "using add_mono[OF opt optm] Node 3"], ["proof (prove)\nusing this:\n  real (T_splay a t) + \\<Phi> (splay a t) - \\<Phi> t +\n  (real (T_splay_max l) + \\<Phi> (splay_max l) - \\<Phi> l)\n  \\<le> 3 * \\<phi> t + 1 + (3 * \\<phi> l + 1)\n  l = \\<langle>ll, y, lr\\<rangle>\n  log 2 (real (size1 l' + size1 r))\n  \\<le> log 2 (real (size1 l' + size1 r')) +\n        log 2 (real (size1 l) + real (size1 r))\n\ngoal (1 subgoal):\n 1. real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n    \\<le> 6 * \\<phi> t + 3", "apply(simp add: Splay_Tree.delete_def T_delete_def field_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Phi> l' +\n             (\\<Phi> r' +\n              (\\<Phi> r +\n               (real (T_splay_max \\<langle>ll, y, lr\\<rangle>) +\n                (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n                 (log 2 (real (size l') + (real (size r') + 2)) +\n                  log 2\n                   (real (size ll) +\n                    (real (size lr) + (real (size r) + 3))))))))\n             \\<le> \\<Phi> ls +\n                   (\\<Phi> rs +\n                    (2 +\n                     (3 * log 2 (real (size ll) + (real (size lr) + 2)) +\n                      4 * log 2 (real (size ls) + (real (size rs) + 2)))));\n     l = \\<langle>ll, y, lr\\<rangle>;\n     log 2 (real (size l') + (real (size r) + 2))\n     \\<le> log 2 (real (size l') + (real (size r') + 2)) +\n           log 2\n            (real (size ll) +\n             (real (size lr) + (real (size r) + 3)))\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> l' +\n                      (\\<Phi> r +\n                       (real (T_splay_max \\<langle>ll, y, lr\\<rangle>) +\n                        (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n                         log 2 (real (size l') + (real (size r) + 2)))))\n                      \\<le> \\<Phi> ls +\n                            (\\<Phi> rs +\n                             (2 +\n                              7 *\n                              log 2\n                               (real (size ls) + (real (size rs) + 2))))", "using 4 \\<open>\\<Phi> r' \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  log 2 (real (size ll) + (real (size lr) + 2))\n  \\<le> log 2 (real (size ls) + (real (size rs) + 2))\n  0 \\<le> \\<Phi> r'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Phi> l' +\n             (\\<Phi> r' +\n              (\\<Phi> r +\n               (real (T_splay_max \\<langle>ll, y, lr\\<rangle>) +\n                (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n                 (log 2 (real (size l') + (real (size r') + 2)) +\n                  log 2\n                   (real (size ll) +\n                    (real (size lr) + (real (size r) + 3))))))))\n             \\<le> \\<Phi> ls +\n                   (\\<Phi> rs +\n                    (2 +\n                     (3 * log 2 (real (size ll) + (real (size lr) + 2)) +\n                      4 * log 2 (real (size ls) + (real (size rs) + 2)))));\n     l = \\<langle>ll, y, lr\\<rangle>;\n     log 2 (real (size l') + (real (size r) + 2))\n     \\<le> log 2 (real (size l') + (real (size r') + 2)) +\n           log 2\n            (real (size ll) +\n             (real (size lr) + (real (size r) + 3)))\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> l' +\n                      (\\<Phi> r +\n                       (real (T_splay_max \\<langle>ll, y, lr\\<rangle>) +\n                        (real (T_splay a \\<langle>ls, x, rs\\<rangle>) +\n                         log 2 (real (size l') + (real (size r) + 2)))))\n                      \\<le> \\<Phi> ls +\n                            (\\<Phi> rs +\n                             (2 +\n                              7 *\n                              log 2\n                               (real (size ls) + (real (size rs) + 2))))", "by arith"], ["proof (state)\nthis:\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \"Overall analysis\""], ["", "fun U where\n\"U Empty [] = 1\" |\n\"U (Splay _) [t] = 3 * log 2 (size1 t) + 1\" |\n\"U (Insert _) [t] = 4 * log 2 (size1 t) + 3\" |\n\"U (Delete _) [t] = 6 * log 2 (size1 t) + 3\""], ["", "interpretation Amortized\nwhere arity = arity and exec = exec and inv = bst\nand cost = cost and \\<Phi> = \\<Phi> and U = U"], ["proof (prove)\ngoal (1 subgoal):\n 1. Amortized arity exec bst cost \\<Phi> U", "proof (standard, goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>s. bst s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 3. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (1 ss f)"], ["proof (state)\nthis:\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (3 subgoals):\n 1. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>s. bst s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 3. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. bst (exec f ss)", "proof (cases f)"], ["proof (state)\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x2. f = Splay x2 \\<Longrightarrow> bst (exec f ss)\n 3. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 4. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "case Empty"], ["proof (state)\nthis:\n  f = Empty\n\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x2. f = Splay x2 \\<Longrightarrow> bst (exec f ss)\n 3. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 4. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "thus ?thesis"], ["proof (prove)\nusing this:\n  f = Empty\n\ngoal (1 subgoal):\n 1. bst (exec f ss)", "using 1"], ["proof (prove)\nusing this:\n  f = Empty\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. bst (exec f ss)", "by auto"], ["proof (state)\nthis:\n  bst (exec f ss)\n\ngoal (3 subgoals):\n 1. \\<And>x2. f = Splay x2 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 3. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2. f = Splay x2 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 3. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "case (Splay a)"], ["proof (state)\nthis:\n  f = Splay a\n\ngoal (3 subgoals):\n 1. \\<And>x2. f = Splay x2 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 3. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "then"], ["proof (chain)\npicking this:\n  f = Splay a", "obtain t where \"ss = [t]\" \"bst t\""], ["proof (prove)\nusing this:\n  f = Splay a\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 1"], ["proof (prove)\nusing this:\n  f = Splay a\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [t]\n  bst t\n\ngoal (3 subgoals):\n 1. \\<And>x2. f = Splay x2 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 3. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "with Splay bst_splay[OF \\<open>bst t\\<close>, of a]"], ["proof (chain)\npicking this:\n  f = Splay a\n  bst (splay a t)\n  ss = [t]\n  bst t", "show ?thesis"], ["proof (prove)\nusing this:\n  f = Splay a\n  bst (splay a t)\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. bst (exec f ss)", "by (auto split: tree.split)"], ["proof (state)\nthis:\n  bst (exec f ss)\n\ngoal (2 subgoals):\n 1. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "case (Insert a)"], ["proof (state)\nthis:\n  f = Insert a\n\ngoal (2 subgoals):\n 1. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "then"], ["proof (chain)\npicking this:\n  f = Insert a", "obtain t where \"ss = [t]\" \"bst t\""], ["proof (prove)\nusing this:\n  f = Insert a\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 1"], ["proof (prove)\nusing this:\n  f = Insert a\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [t]\n  bst t\n\ngoal (2 subgoals):\n 1. \\<And>x3. f = Insert x3 \\<Longrightarrow> bst (exec f ss)\n 2. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "with bst_splay[OF \\<open>bst t\\<close>, of a] Insert"], ["proof (chain)\npicking this:\n  bst (splay a t)\n  f = Insert a\n  ss = [t]\n  bst t", "show ?thesis"], ["proof (prove)\nusing this:\n  bst (splay a t)\n  f = Insert a\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. bst (exec f ss)", "by (auto simp: splay_bstL[OF \\<open>bst t\\<close>] splay_bstR[OF \\<open>bst t\\<close>] split: tree.split)"], ["proof (state)\nthis:\n  bst (exec f ss)\n\ngoal (1 subgoal):\n 1. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "case (Delete a)"], ["proof (state)\nthis:\n  f = Delete a\n\ngoal (1 subgoal):\n 1. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "then"], ["proof (chain)\npicking this:\n  f = Delete a", "obtain t where \"ss = [t]\" \"bst t\""], ["proof (prove)\nusing this:\n  f = Delete a\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 1"], ["proof (prove)\nusing this:\n  f = Delete a\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. \\<And>x4. f = Delete x4 \\<Longrightarrow> bst (exec f ss)", "with 1 Delete"], ["proof (chain)\npicking this:\n  Ball (set ss) bst\n  length ss = arity f\n  f = Delete a\n  ss = [t]\n  bst t", "show ?thesis"], ["proof (prove)\nusing this:\n  Ball (set ss) bst\n  length ss = arity f\n  f = Delete a\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. bst (exec f ss)", "by(simp add: bst_delete)"], ["proof (state)\nthis:\n  bst (exec f ss)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  bst (exec f ss)\n\ngoal (2 subgoals):\n 1. \\<And>s. bst s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s. bst s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (2 t)"], ["proof (state)\nthis:\n  bst t\n\ngoal (2 subgoals):\n 1. \\<And>s. bst s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "thus ?case"], ["proof (prove)\nusing this:\n  bst t\n\ngoal (1 subgoal):\n 1. 0 \\<le> \\<Phi> t", "by (induction t) auto"], ["proof (state)\nthis:\n  0 \\<le> \\<Phi> t\n\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (3 ss f)"], ["proof (state)\nthis:\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>Ball (set ss) bst; length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "show ?case (is \"?l \\<le> ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "proof(cases f)"], ["proof (state)\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x2.\n       f = Splay x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 4. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case Empty"], ["proof (state)\nthis:\n  f = Empty\n\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x2.\n       f = Splay x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 4. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  f = Empty\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using 3(2)"], ["proof (prove)\nusing this:\n  f = Empty\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by(simp add: A_splay_def)"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Splay x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Splay x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case (Splay a)"], ["proof (state)\nthis:\n  f = Splay a\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Splay x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Splay a", "obtain t where \"ss = [t]\" \"bst t\""], ["proof (prove)\nusing this:\n  f = Splay a\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Splay a\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [t]\n  bst t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Splay x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using Splay A_splay_ub3[OF \\<open>bst t\\<close>]"], ["proof (prove)\nusing this:\n  ss = [t]\n  bst t\n  f = Splay a\n  A_splay ?x t \\<le> 3 * \\<phi> t + 1\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by(simp add: A_splay_def)"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (2 subgoals):\n 1. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case [simp]: (Insert a)"], ["proof (state)\nthis:\n  f = Insert a\n\ngoal (2 subgoals):\n 1. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Insert a", "obtain t where [simp]: \"ss = [t]\" and \"bst t\""], ["proof (prove)\nusing this:\n  f = Insert a\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Insert a\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [t]\n  bst t\n\ngoal (2 subgoals):\n 1. \\<And>x3.\n       f = Insert x3 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using amor_insert[of t a]"], ["proof (prove)\nusing this:\n  ss = [t]\n  bst t\n  bst t \\<Longrightarrow>\n  real (T_insert a t) + \\<Phi> (Splay_Tree.insert a t) - \\<Phi> t\n  \\<le> 4 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by auto"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (1 subgoal):\n 1. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case [simp]: (Delete a)"], ["proof (state)\nthis:\n  f = Delete a\n\ngoal (1 subgoal):\n 1. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Delete a", "obtain t where [simp]: \"ss = [t]\" and \"bst t\""], ["proof (prove)\nusing this:\n  f = Delete a\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Delete a\n  Ball (set ss) bst\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>ss = [t]; bst t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. \\<And>x4.\n       f = Delete x4 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  ss = [t]\n  bst t\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using amor_delete[of t a]"], ["proof (prove)\nusing this:\n  ss = [t]\n  bst t\n  bst t \\<Longrightarrow>\n  real (T_delete a t) + \\<Phi> (delete a t) - \\<Phi> t\n  \\<le> 6 * \\<phi> t + 3\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by auto"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}