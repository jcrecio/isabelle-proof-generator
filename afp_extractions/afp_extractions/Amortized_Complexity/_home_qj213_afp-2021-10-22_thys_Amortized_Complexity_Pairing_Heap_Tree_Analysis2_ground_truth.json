{"file_name": "/home/qj213/afp-2021-10-22/thys/Amortized_Complexity/Pairing_Heap_Tree_Analysis2.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Amortized_Complexity", "problem_names": ["lemma link_size[simp]: \"size (link hp) = size hp\"", "lemma size_pass\\<^sub>1: \"size (pass\\<^sub>1 hp) = size hp\"", "lemma size_pass\\<^sub>2: \"size (pass\\<^sub>2 hp) = size hp\"", "lemma size_merge: \n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> size (merge h1 h2) = size h1 + size h2\"", "lemma \\<Delta>\\<Phi>_insert: \"is_root hp \\<Longrightarrow> \\<Phi> (insert x hp) - \\<Phi> hp \\<le> log 2  (size hp + 1)\"", "lemma \\<Delta>\\<Phi>_merge:\n  assumes \"h1 = Node hs1 x1 Leaf\" \"h2 = Node hs2 x2 Leaf\" \n  shows \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (size h1 + size h2) + 1\"", "lemma \\<Delta>\\<Phi>_pass1: \"\\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs  \\<le> 2 * log 2 (size hs + 1) - len hs + 2\"", "lemma \\<Delta>\\<Phi>_pass2: \"hs \\<noteq> Leaf \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (size hs)\"", "lemma \\<Delta>\\<Phi>_del_min:\n  \"\\<Phi> (del_min (Node hs x Leaf)) - \\<Phi> (Node hs x Leaf) \n  \\<le> 2 * log 2 (size hs + 1) - len hs + 2\"", "lemma is_root_merge:\n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> is_root (merge h1 h2)\"", "lemma is_root_insert: \"is_root h \\<Longrightarrow> is_root (insert x h)\"", "lemma is_root_del_min:\n  assumes \"is_root h\" shows \"is_root (del_min h)\"", "lemma pass\\<^sub>1_len: \"len (pass\\<^sub>1 h) \\<le> len h\"", "lemma A_del_min: assumes \"is_root h\"\nshows \"T_del_min h + \\<Phi>(del_min h) - \\<Phi> h \\<le> 2 * log 2 (size h + 1) + 5\"", "lemma A_insert: \"is_root h \\<Longrightarrow> T_insert a h + \\<Phi>(insert a h) - \\<Phi> h \\<le> log 2 (size h + 1) + 1\"", "lemma A_merge: assumes \"is_root h1\" \"is_root h2\"\nshows \"T_merge h1 h2 + \\<Phi>(merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (size h1 + size h2 + 1) + 2\""], "translations": [["", "lemma link_size[simp]: \"size (link hp) = size hp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (link hp) = size hp", "by (cases hp rule: link.cases) simp_all"], ["", "lemma size_pass\\<^sub>1: \"size (pass\\<^sub>1 hp) = size hp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (pass\\<^sub>1 hp) = size hp", "by (induct hp rule: pass\\<^sub>1.induct) simp_all"], ["", "lemma size_pass\\<^sub>2: \"size (pass\\<^sub>2 hp) = size hp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (pass\\<^sub>2 hp) = size hp", "by (induct hp rule: pass\\<^sub>2.induct) simp_all"], ["", "lemma size_merge: \n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> size (merge h1 h2) = size h1 + size h2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>is_root h1; is_root h2\\<rbrakk>\n    \\<Longrightarrow> size (merge h1 h2) = size h1 + size h2", "by (simp split: tree.splits)"], ["", "lemma \\<Delta>\\<Phi>_insert: \"is_root hp \\<Longrightarrow> \\<Phi> (insert x hp) - \\<Phi> hp \\<le> log 2  (size hp + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root hp \\<Longrightarrow>\n    \\<Phi> (Pairing_Heap_Tree.insert x hp) - \\<Phi> hp\n    \\<le> log 2 (real (size hp + 1))", "by (simp split: tree.splits)"], ["", "lemma \\<Delta>\\<Phi>_merge:\n  assumes \"h1 = Node hs1 x1 Leaf\" \"h2 = Node hs2 x2 Leaf\" \n  shows \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (size h1 + size h2) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "let ?hs = \"Node hs1 x1 (Node hs2 x2 Leaf)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<Phi> (merge h1 h2) = \\<Phi> (link ?hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) =\n    \\<Phi>\n     (link\n       \\<langle>hs1, x1,\n        \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)", "using assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) =\n    \\<Phi>\n     (link\n       \\<langle>hs1, x1,\n        \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "also"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<dots> = \\<Phi> hs1 + \\<Phi> hs2 + log 2 (size hs1 + size hs2 + 1) + log 2 (size hs1 + size hs2 + 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi>\n     (link\n       \\<langle>hs1, x1,\n        \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size hs1 + size hs2 + 2))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size hs1 + size hs2 + 2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "also"], ["proof (state)\nthis:\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size hs1 + size hs2 + 2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<dots> = \\<Phi> hs1 + \\<Phi> hs2 + log 2 (size hs1 + size hs2 + 1) + log 2 (size h1 + size h2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size hs1 + size hs2 + 2)) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2))", "using assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size hs1 + size hs2 + 2)) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2))", "by simp"], ["proof (state)\nthis:\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size hs1 + size hs2 + 2)) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))", "have \"\\<Phi> (merge h1 h2) = \\<dots>\""], ["proof (prove)\nusing this:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2))", "."], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n   log 2 (size hs1 + size hs2 + 1) + log 2 (size h1 + size h2)\n   - log 2 (size hs1 + 1) - log 2 (size hs2 + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n    log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))", "using assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n    log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n  log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2)) -\n  log 2 (real (size hs1 + 1)) -\n  log 2 (real (size hs2 + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "also"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n  log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2)) -\n  log 2 (real (size hs1 + 1)) -\n  log 2 (real (size hs2 + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<dots> \\<le> log 2 (size h1 + size h2) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "using ld_le_2ld[of \"size hs1\" \"size hs2\"] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> real (size hs1); 0 \\<le> real (size hs2)\\<rbrakk>\n  \\<Longrightarrow> log 2 (1 + real (size hs1) + real (size hs2))\n                    \\<le> 1 + log 2 (1 + real (size hs1)) +\n                          log 2 (1 + real (size hs2))\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2)) -\n  log 2 (real (size hs1 + 1)) -\n  log 2 (real (size hs2 + 1))\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "."], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<Delta>\\<Phi>_pass1: \"\\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs  \\<le> 2 * log 2 (size hs + 1) - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "proof (induction hs rule: pass\\<^sub>1.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "case (1 hs1 x hs2 y hs)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "let ?h = \"Node hs1 x (Node hs2 y hs)\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "let ?n1 = \"size hs1\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "let ?n2 = \"size hs2\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "let ?m = \"size hs\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "have \"\\<Phi> (pass\\<^sub>1 ?h) - \\<Phi> ?h = \\<Phi> (pass\\<^sub>1 hs) + log 2 (?n1+?n2+1) - \\<Phi> hs - log 2 (?n2+?m+1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi>\n     (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> =\n    \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n    \\<Phi> hs -\n    log 2 (real (size hs2 + size hs + 1))", "by (simp add: size_pass\\<^sub>1 algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> =\n  \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n  \\<Phi> hs -\n  log 2 (real (size hs2 + size hs + 1))\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "also"], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> =\n  \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n  \\<Phi> hs -\n  log 2 (real (size hs2 + size hs + 1))\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "have \"\\<dots> \\<le> log 2 (?n1+?n2+1) - log 2 (?n2+?m+1) + 2 * log 2 (?m + 1) - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n    \\<Phi> hs -\n    log 2 (real (size hs2 + size hs + 1))\n    \\<le> log 2 (real (size hs1 + size hs2 + 1)) -\n          log 2 (real (size hs2 + size hs + 1)) +\n          2 * log 2 (real (size hs + 1)) -\n          real (len hs) +\n          2", "using \"1.IH\""], ["proof (prove)\nusing this:\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n    \\<Phi> hs -\n    log 2 (real (size hs2 + size hs + 1))\n    \\<le> log 2 (real (size hs1 + size hs2 + 1)) -\n          log 2 (real (size hs2 + size hs + 1)) +\n          2 * log 2 (real (size hs + 1)) -\n          real (len hs) +\n          2", "by (simp)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n  \\<Phi> hs -\n  log 2 (real (size hs2 + size hs + 1))\n  \\<le> log 2 (real (size hs1 + size hs2 + 1)) -\n        log 2 (real (size hs2 + size hs + 1)) +\n        2 * log 2 (real (size hs + 1)) -\n        real (len hs) +\n        2\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "also"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) + log 2 (real (size hs1 + size hs2 + 1)) -\n  \\<Phi> hs -\n  log 2 (real (size hs2 + size hs + 1))\n  \\<le> log 2 (real (size hs1 + size hs2 + 1)) -\n        log 2 (real (size hs2 + size hs + 1)) +\n        2 * log 2 (real (size hs + 1)) -\n        real (len hs) +\n        2\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "have \"\\<dots> \\<le> 2 * log 2 (?n1+?n2+?m+2) - log 2 (?n2+?m+1) + log 2 (?m + 1) - len hs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs2 + 1)) -\n    log 2 (real (size hs2 + size hs + 1)) +\n    2 * log 2 (real (size hs + 1)) -\n    real (len hs) +\n    2\n    \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n          log 2 (real (size hs2 + size hs + 1)) +\n          log 2 (real (size hs + 1)) -\n          real (len hs)", "using ld_sum_inequality [of \"?n1+?n2+1\" \"?m + 1\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < real (size hs1 + size hs2 + 1);\n   0 < real (size hs + 1)\\<rbrakk>\n  \\<Longrightarrow> log 2 (real (size hs1 + size hs2 + 1)) +\n                    log 2 (real (size hs + 1)) +\n                    2\n                    \\<le> 2 *\n                          log 2\n                           (real (size hs1 + size hs2 + 1) +\n                            real (size hs + 1))\n\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs2 + 1)) -\n    log 2 (real (size hs2 + size hs + 1)) +\n    2 * log 2 (real (size hs + 1)) -\n    real (len hs) +\n    2\n    \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n          log 2 (real (size hs2 + size hs + 1)) +\n          log 2 (real (size hs + 1)) -\n          real (len hs)", "by(simp)"], ["proof (state)\nthis:\n  log 2 (real (size hs1 + size hs2 + 1)) -\n  log 2 (real (size hs2 + size hs + 1)) +\n  2 * log 2 (real (size hs + 1)) -\n  real (len hs) +\n  2\n  \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n        log 2 (real (size hs2 + size hs + 1)) +\n        log 2 (real (size hs + 1)) -\n        real (len hs)\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "also"], ["proof (state)\nthis:\n  log 2 (real (size hs1 + size hs2 + 1)) -\n  log 2 (real (size hs2 + size hs + 1)) +\n  2 * log 2 (real (size hs + 1)) -\n  real (len hs) +\n  2\n  \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n        log 2 (real (size hs2 + size hs + 1)) +\n        log 2 (real (size hs + 1)) -\n        real (len hs)\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "have \"\\<dots> \\<le> 2 * log 2 (?n1+?n2+?m+2) - len hs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n    log 2 (real (size hs2 + size hs + 1)) +\n    log 2 (real (size hs + 1)) -\n    real (len hs)\n    \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n          real (len hs)", "by simp"], ["proof (state)\nthis:\n  2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n  log 2 (real (size hs2 + size hs + 1)) +\n  log 2 (real (size hs + 1)) -\n  real (len hs)\n  \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) - real (len hs)\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "also"], ["proof (state)\nthis:\n  2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) -\n  log 2 (real (size hs2 + size hs + 1)) +\n  log 2 (real (size hs + 1)) -\n  real (len hs)\n  \\<le> 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) - real (len hs)\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "have \"\\<dots> = 2 * log 2 (size ?h) - len ?h + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) - real (len hs) =\n    2 *\n    log 2\n     (real (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>)) -\n    real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n    2", "by simp"], ["proof (state)\nthis:\n  2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) - real (len hs) =\n  2 *\n  log 2\n   (real (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>)) -\n  real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n  2\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "also"], ["proof (state)\nthis:\n  2 * log 2 (real (size hs1 + size hs2 + size hs + 2)) - real (len hs) =\n  2 *\n  log 2\n   (real (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>)) -\n  real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n  2\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "have \"\\<dots> \\<le> 2 * log 2 (size ?h + 1) - len ?h + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 *\n    log 2\n     (real (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>)) -\n    real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> +\n              1)) -\n          real\n           (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n          2", "by simp"], ["proof (state)\nthis:\n  2 *\n  log 2\n   (real (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>)) -\n  real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> +\n            1)) -\n        real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n        2\n\ngoal (3 subgoals):\n 1. \\<And>hsx x hsy y hs.\n       \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n       \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) +\n             2 \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size\n                  \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle> +\n                 1)) -\n             real\n              (len \\<langle>hsx, x, \\<langle>hsy, y, hs\\<rangle>\\<rangle>) +\n             2\n 2. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 3. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "finally"], ["proof (chain)\npicking this:\n  \\<Phi>\n   (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>\n  \\<le> 2 *\n        log 2\n         (real\n           (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> +\n            1)) -\n        real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n        2", "show ?case"], ["proof (prove)\nusing this:\n  \\<Phi>\n   (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>\n  \\<le> 2 *\n        log 2\n         (real\n           (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> +\n            1)) -\n        real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n        2\n\ngoal (1 subgoal):\n 1. \\<Phi>\n     (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>\n    \\<le> 2 *\n          log 2\n           (real\n             (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> +\n              1)) -\n          real\n           (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n          2", "."], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1 \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>\n  \\<le> 2 *\n        log 2\n         (real\n           (size \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle> +\n            1)) -\n        real (len \\<langle>hs1, x, \\<langle>hs2, y, hs\\<rangle>\\<rangle>) +\n        2\n\ngoal (2 subgoals):\n 1. \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> 2 * log 2 (real (size \\<langle>\\<rangle> + 1)) -\n          real (len \\<langle>\\<rangle>) +\n          2\n 2. \\<And>v va.\n       \\<Phi> (pass\\<^sub>1 \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>\n       \\<le> 2 *\n             log 2\n              (real\n                (size \\<langle>v, va, \\<langle>\\<rangle>\\<rangle> + 1)) -\n             real (len \\<langle>v, va, \\<langle>\\<rangle>\\<rangle>) +\n             2", "qed simp_all"], ["", "lemma \\<Delta>\\<Phi>_pass2: \"hs \\<noteq> Leaf \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (size hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs))", "proof (induction hs)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> log 2 (real (size \\<langle>\\<rangle>))\n 2. \\<And>hs1 x2 hs2.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs2 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs2) - \\<Phi> hs2\n        \\<le> log 2 (real (size hs2));\n        \\<langle>hs1, x2, hs2\\<rangle> \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x2, hs2\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x2, hs2\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x2, hs2\\<rangle>))", "case (Node hs1 x hs)"], ["proof (state)\nthis:\n  hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1 \\<le> log 2 (real (size hs1))\n  hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs))\n  \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> log 2 (real (size \\<langle>\\<rangle>))\n 2. \\<And>hs1 x2 hs2.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs2 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs2) - \\<Phi> hs2\n        \\<le> log 2 (real (size hs2));\n        \\<langle>hs1, x2, hs2\\<rangle> \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x2, hs2\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x2, hs2\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x2, hs2\\<rangle>))", "thus ?case"], ["proof (prove)\nusing this:\n  hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1 \\<le> log 2 (real (size hs1))\n  hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs))\n  \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n    \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n    \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))", "proof (cases hs)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "case 1: (Node hs2 y r)"], ["proof (state)\nthis:\n  hs = \\<langle>hs2, y, r\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "let ?h = \"Node hs1 x hs\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "obtain hs3 a where 2: \"pass\\<^sub>2 hs = Node hs3 a Leaf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>hs3 a.\n        pass\\<^sub>2 hs =\n        \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pass\\<^sub>2_struct 1"], ["proof (prove)\nusing this:\n  \\<exists>l a.\n     pass\\<^sub>2 \\<langle>?hs1.0, ?x, ?hs\\<rangle> =\n     \\<langle>l, a, \\<langle>\\<rangle>\\<rangle>\n  hs = \\<langle>hs2, y, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>hs3 a.\n        pass\\<^sub>2 hs =\n        \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  pass\\<^sub>2 hs = \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "hence 3: \"size hs = size \\<dots>\""], ["proof (prove)\nusing this:\n  pass\\<^sub>2 hs = \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. size hs = size \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>", "using size_pass\\<^sub>2"], ["proof (prove)\nusing this:\n  pass\\<^sub>2 hs = \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>\n  size (pass\\<^sub>2 ?hp) = size ?hp\n\ngoal (1 subgoal):\n 1. size hs = size \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>", "by metis"], ["proof (state)\nthis:\n  size hs = size \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "have link: \"\\<Phi>(link(Node hs1 x (pass\\<^sub>2 hs))) - \\<Phi> hs1 - \\<Phi> (pass\\<^sub>2 hs) =\n          log 2 (size hs1 + size hs + 1) + log 2 (size hs1 + size hs) - log 2 (size hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n    \\<Phi> (pass\\<^sub>2 hs) =\n    log 2 (real (size hs1 + size hs + 1)) +\n    log 2 (real (size hs1 + size hs)) -\n    log 2 (real (size hs))", "using 2 3"], ["proof (prove)\nusing this:\n  pass\\<^sub>2 hs = \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>\n  size hs = size \\<langle>hs3, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n    \\<Phi> (pass\\<^sub>2 hs) =\n    log 2 (real (size hs1 + size hs + 1)) +\n    log 2 (real (size hs1 + size hs)) -\n    log 2 (real (size hs))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n  \\<Phi> (pass\\<^sub>2 hs) =\n  log 2 (real (size hs1 + size hs + 1)) +\n  log 2 (real (size hs1 + size hs)) -\n  log 2 (real (size hs))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "have \"\\<Phi> (pass\\<^sub>2 ?h) - \\<Phi> ?h =\n        \\<Phi> (link (Node hs1 x (pass\\<^sub>2 hs))) - \\<Phi> hs1 - \\<Phi> hs - log 2 (size hs1 + size hs + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n    \\<Phi> \\<langle>hs1, x, hs\\<rangle> =\n    \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n    \\<Phi> hs -\n    log 2 (real (size hs1 + size hs + 1))", "by (simp)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, hs\\<rangle> =\n  \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n  \\<Phi> hs -\n  log 2 (real (size hs1 + size hs + 1))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "also"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, hs\\<rangle> =\n  \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n  \\<Phi> hs -\n  log 2 (real (size hs1 + size hs + 1))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "have \"\\<dots> = \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs + log 2 (size hs1 + size hs) - log 2 (size hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n    \\<Phi> hs -\n    log 2 (real (size hs1 + size hs + 1)) =\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs +\n    log 2 (real (size hs1 + size hs)) -\n    log 2 (real (size hs))", "using link"], ["proof (prove)\nusing this:\n  \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n  \\<Phi> (pass\\<^sub>2 hs) =\n  log 2 (real (size hs1 + size hs + 1)) +\n  log 2 (real (size hs1 + size hs)) -\n  log 2 (real (size hs))\n\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n    \\<Phi> hs -\n    log 2 (real (size hs1 + size hs + 1)) =\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs +\n    log 2 (real (size hs1 + size hs)) -\n    log 2 (real (size hs))", "by linarith"], ["proof (state)\nthis:\n  \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n  \\<Phi> hs -\n  log 2 (real (size hs1 + size hs + 1)) =\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs + log 2 (real (size hs1 + size hs)) -\n  log 2 (real (size hs))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "also"], ["proof (state)\nthis:\n  \\<Phi> (link \\<langle>hs1, x, pass\\<^sub>2 hs\\<rangle>) - \\<Phi> hs1 -\n  \\<Phi> hs -\n  log 2 (real (size hs1 + size hs + 1)) =\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs + log 2 (real (size hs1 + size hs)) -\n  log 2 (real (size hs))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "have \"\\<dots> \\<le> log 2 (size hs1 + size hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs +\n    log 2 (real (size hs1 + size hs)) -\n    log 2 (real (size hs))\n    \\<le> log 2 (real (size hs1 + size hs))", "using Node.IH(2) 1"], ["proof (prove)\nusing this:\n  hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs))\n  hs = \\<langle>hs2, y, r\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs +\n    log 2 (real (size hs1 + size hs)) -\n    log 2 (real (size hs))\n    \\<le> log 2 (real (size hs1 + size hs))", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs + log 2 (real (size hs1 + size hs)) -\n  log 2 (real (size hs))\n  \\<le> log 2 (real (size hs1 + size hs))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "also"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs + log 2 (real (size hs1 + size hs)) -\n  log 2 (real (size hs))\n  \\<le> log 2 (real (size hs1 + size hs))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "have \"\\<dots> \\<le> log 2 (size ?h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs))\n    \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))", "using 1"], ["proof (prove)\nusing this:\n  hs = \\<langle>hs2, y, r\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs))\n    \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size hs1 + size hs))\n  \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n        \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        hs = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x, hs\\<rangle>))", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n  \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n  \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n    \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n    \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))", "."], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n  \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n             \\<le> log 2 (real (size hs1));\n     hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs));\n     \\<langle>hs1, x, hs\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     hs = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n                      \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))", "qed simp"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>hs1, x, hs\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, hs\\<rangle>\n  \\<le> log 2 (real (size \\<langle>hs1, x, hs\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> log 2 (real (size \\<langle>\\<rangle>))", "qed simp"], ["", "corollary \\<Delta>\\<Phi>_pass2': \"\\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (size hs + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "assume \"hs = Leaf\""], ["proof (state)\nthis:\n  hs = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "thus ?thesis"], ["proof (prove)\nusing this:\n  hs = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))\n\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "assume \"hs \\<noteq> Leaf\""], ["proof (state)\nthis:\n  hs \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "hence \"log 2 (size hs) \\<le> log 2 (size hs + 1)\""], ["proof (prove)\nusing this:\n  hs \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (real (size hs)) \\<le> log 2 (real (size hs + 1))", "using eq_size_0"], ["proof (prove)\nusing this:\n  hs \\<noteq> \\<langle>\\<rangle>\n  (size ?t = 0) = (?t = \\<langle>\\<rangle>)\n\ngoal (1 subgoal):\n 1. log 2 (real (size hs)) \\<le> log 2 (real (size hs + 1))", "by fastforce"], ["proof (state)\nthis:\n  log 2 (real (size hs)) \\<le> log 2 (real (size hs + 1))\n\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "then"], ["proof (chain)\npicking this:\n  log 2 (real (size hs)) \\<le> log 2 (real (size hs + 1))", "show ?thesis"], ["proof (prove)\nusing this:\n  log 2 (real (size hs)) \\<le> log 2 (real (size hs + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "using \\<Delta>\\<Phi>_pass2[OF \\<open>hs \\<noteq> Leaf\\<close>]"], ["proof (prove)\nusing this:\n  log 2 (real (size hs)) \\<le> log 2 (real (size hs + 1))\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs))\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))", "by linarith"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs + 1))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<Delta>\\<Phi>_del_min:\n  \"\\<Phi> (del_min (Node hs x Leaf)) - \\<Phi> (Node hs x Leaf) \n  \\<le> 2 * log 2 (size hs + 1) - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "have \"\\<Phi> (del_min (Node hs x Leaf)) - \\<Phi> (Node hs x Leaf) =\n        \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - (log 2 (1 + real (size hs)) + \\<Phi> hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle> =\n    \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n    (log 2 (1 + real (size hs)) + \\<Phi> hs)", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle> =\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n  (log 2 (1 + real (size hs)) + \\<Phi> hs)\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "also"], ["proof (state)\nthis:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle> =\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n  (log 2 (1 + real (size hs)) + \\<Phi> hs)\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "have \"\\<dots> \\<le> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n    (log 2 (1 + real (size hs)) + \\<Phi> hs)\n    \\<le> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs", "using \\<Delta>\\<Phi>_pass2' [of \"pass\\<^sub>1 hs\"]"], ["proof (prove)\nusing this:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size (pass\\<^sub>1 hs) + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n    (log 2 (1 + real (size hs)) + \\<Phi> hs)\n    \\<le> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs", "by(simp add: size_pass\\<^sub>1)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n  (log 2 (1 + real (size hs)) + \\<Phi> hs)\n  \\<le> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "also"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) -\n  (log 2 (1 + real (size hs)) + \\<Phi> hs)\n  \\<le> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "have \"\\<dots> \\<le> 2 * log 2 (size hs + 1) - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "by(rule \\<Delta>\\<Phi>_pass1)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2", "."], ["proof (state)\nthis:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 2 * log 2 (real (size hs + 1)) - real (len hs) + 2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma is_root_merge:\n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> is_root (merge h1 h2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>is_root h1; is_root h2\\<rbrakk>\n    \\<Longrightarrow> is_root (merge h1 h2)", "by (simp split: tree.splits)"], ["", "lemma is_root_insert: \"is_root h \\<Longrightarrow> is_root (insert x h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root h \\<Longrightarrow> is_root (Pairing_Heap_Tree.insert x h)", "by (simp split: tree.splits)"], ["", "lemma is_root_del_min:\n  assumes \"is_root h\" shows \"is_root (del_min h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root (del_min h)", "proof (cases h)"], ["proof (state)\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       is_root (del_min h)", "case [simp]: (Node hs1 x hs)"], ["proof (state)\nthis:\n  h = \\<langle>hs1, x, hs\\<rangle>\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       is_root (del_min h)", "have \"hs = Leaf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hs = \\<langle>\\<rangle>", "using assms"], ["proof (prove)\nusing this:\n  is_root h\n\ngoal (1 subgoal):\n 1. hs = \\<langle>\\<rangle>", "by simp"], ["proof (state)\nthis:\n  hs = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       is_root (del_min h)", "thus ?thesis"], ["proof (prove)\nusing this:\n  hs = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. is_root (del_min h)", "proof (cases hs1)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>hs = \\<langle>\\<rangle>; hs1 = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs = \\<langle>\\<rangle>;\n        hs1 = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "case (Node hs2 y hs')"], ["proof (state)\nthis:\n  hs1 = \\<langle>hs2, y, hs'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs = \\<langle>\\<rangle>; hs1 = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs = \\<langle>\\<rangle>;\n        hs1 = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "then"], ["proof (chain)\npicking this:\n  hs1 = \\<langle>hs2, y, hs'\\<rangle>", "obtain la a ra where \"pass\\<^sub>1 hs1 = Node a la ra\""], ["proof (prove)\nusing this:\n  hs1 = \\<langle>hs2, y, hs'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>a la ra.\n        pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pass\\<^sub>1_struct"], ["proof (prove)\nusing this:\n  hs1 = \\<langle>hs2, y, hs'\\<rangle>\n  \\<exists>l a r.\n     pass\\<^sub>1 \\<langle>?hs1.0, ?x, ?hs\\<rangle> =\n     \\<langle>l, a, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>a la ra.\n        pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs = \\<langle>\\<rangle>; hs1 = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs = \\<langle>\\<rangle>;\n        hs1 = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "moreover"], ["proof (state)\nthis:\n  pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs = \\<langle>\\<rangle>; hs1 = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs = \\<langle>\\<rangle>;\n        hs1 = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "obtain lb b where \"pass\\<^sub>2 \\<dots> = Node b lb Leaf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b lb.\n        pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n        \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pass\\<^sub>2_struct"], ["proof (prove)\nusing this:\n  \\<exists>l a.\n     pass\\<^sub>2 \\<langle>?hs1.0, ?x, ?hs\\<rangle> =\n     \\<langle>l, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>b lb.\n        pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n        \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>hs = \\<langle>\\<rangle>; hs1 = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>hs = \\<langle>\\<rangle>;\n        hs1 = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "ultimately"], ["proof (chain)\npicking this:\n  pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle>\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle>\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. is_root (del_min h)", "using assms"], ["proof (prove)\nusing this:\n  pass\\<^sub>1 hs1 = \\<langle>a, la, ra\\<rangle>\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>\n  is_root h\n\ngoal (1 subgoal):\n 1. is_root (del_min h)", "by simp"], ["proof (state)\nthis:\n  is_root (del_min h)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>hs = \\<langle>\\<rangle>; hs1 = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)", "qed simp"], ["proof (state)\nthis:\n  is_root (del_min h)\n\ngoal (1 subgoal):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)", "qed simp"], ["", "lemma pass\\<^sub>1_len: \"len (pass\\<^sub>1 h) \\<le> len h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. len (pass\\<^sub>1 h) \\<le> len h", "by (induct h rule: pass\\<^sub>1.induct) simp_all"], ["", "fun exec :: \"'a :: linorder op \\<Rightarrow> 'a tree list \\<Rightarrow> 'a tree\" where\n\"exec Empty [] = Leaf\" | \n\"exec Del_min [h] = del_min h\" |\n\"exec (Insert x) [h] = insert x h\" |\n\"exec Merge [h1,h2] = merge h1 h2\""], ["", "fun T_pass\\<^sub>1 :: \"'a tree \\<Rightarrow> nat\" where\n\"T_pass\\<^sub>1 (Node _ _ (Node _ _ hs')) = T_pass\\<^sub>1 hs' + 1\" |\n\"T_pass\\<^sub>1 h = 1\""], ["", "fun T_pass\\<^sub>2 :: \"'a tree \\<Rightarrow> nat\" where\n  \"T_pass\\<^sub>2 Leaf = 1\"\n| \"T_pass\\<^sub>2 (Node _ _ hs) = T_pass\\<^sub>2 hs + 1\""], ["", "fun T_del_min :: \"('a::linorder) tree \\<Rightarrow> nat\" where\n\"T_del_min Leaf = 1\" |\n\"T_del_min (Node hs _ _) = T_pass\\<^sub>2 (pass\\<^sub>1 hs) + T_pass\\<^sub>1 hs + 1\""], ["", "fun T_insert :: \"'a \\<Rightarrow> 'a tree \\<Rightarrow> nat\" where\n\"T_insert a h = 1\""], ["", "fun T_merge :: \"'a tree \\<Rightarrow> 'a tree \\<Rightarrow> nat\" where\n\"T_merge h1 h2 = 1\""], ["", "lemma A_del_min: assumes \"is_root h\"\nshows \"T_del_min h + \\<Phi>(del_min h) - \\<Phi> h \\<le> 2 * log 2 (size h + 1) + 5\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5", "proof (cases h)"], ["proof (state)\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 2 * log 2 (real (size h + 1)) + 5", "case [simp]: (Node hs1 x hs)"], ["proof (state)\nthis:\n  h = \\<langle>hs1, x, hs\\<rangle>\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 2 * log 2 (real (size h + 1)) + 5", "have \"T_pass\\<^sub>2 (pass\\<^sub>1 hs1) + real(T_pass\\<^sub>1 hs1) \\<le> real(len hs1) + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_pass\\<^sub>2 (pass\\<^sub>1 hs1)) + real (T_pass\\<^sub>1 hs1)\n    \\<le> real (len hs1) + 2", "by (induct hs1 rule: pass\\<^sub>1.induct) simp_all"], ["proof (state)\nthis:\n  real (T_pass\\<^sub>2 (pass\\<^sub>1 hs1)) + real (T_pass\\<^sub>1 hs1)\n  \\<le> real (len hs1) + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 2 * log 2 (real (size h + 1)) + 5", "moreover"], ["proof (state)\nthis:\n  real (T_pass\\<^sub>2 (pass\\<^sub>1 hs1)) + real (T_pass\\<^sub>1 hs1)\n  \\<le> real (len hs1) + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 2 * log 2 (real (size h + 1)) + 5", "have \"\\<Phi> (del_min h) - \\<Phi> h \\<le> 2 * log 2 (size h + 1) - len hs1 + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "have \"\\<Phi> (del_min h) - \\<Phi> h \\<le> 2 * log 2 (size hs1 + 1) - len hs1 + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2", "using  \\<Delta>\\<Phi>_del_min[of \"hs1\" \"x\"] assms"], ["proof (prove)\nusing this:\n  \\<Phi> (del_min \\<langle>hs1, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs1, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2\n  is_root h\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "also"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "have \"\\<dots> \\<le> 2 * log 2 (size h + 1) - len hs1 + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "by fastforce"], ["proof (state)\nthis:\n  2 * log 2 (real (size hs1 + 1)) - real (len hs1) + 2\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "."], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 2 * log 2 (real (size h + 1)) + 5", "ultimately"], ["proof (chain)\npicking this:\n  real (T_pass\\<^sub>2 (pass\\<^sub>1 hs1)) + real (T_pass\\<^sub>1 hs1)\n  \\<le> real (len hs1) + 2\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2", "show ?thesis"], ["proof (prove)\nusing this:\n  real (T_pass\\<^sub>2 (pass\\<^sub>1 hs1)) + real (T_pass\\<^sub>1 hs1)\n  \\<le> real (len hs1) + 2\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) - real (len hs1) + 2\n\ngoal (1 subgoal):\n 1. real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5", "by(simp)"], ["proof (state)\nthis:\n  real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) + 5\n\ngoal (1 subgoal):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 2 * log 2 (real (size h + 1)) + 5", "qed simp"], ["", "lemma A_insert: \"is_root h \\<Longrightarrow> T_insert a h + \\<Phi>(insert a h) - \\<Phi> h \\<le> log 2 (size h + 1) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root h \\<Longrightarrow>\n    real (T_insert a h) + \\<Phi> (Pairing_Heap_Tree.insert a h) - \\<Phi> h\n    \\<le> log 2 (real (size h + 1)) + 1", "by(drule \\<Delta>\\<Phi>_insert) simp"], ["", "lemma A_merge: assumes \"is_root h1\" \"is_root h2\"\nshows \"T_merge h1 h2 + \\<Phi>(merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (size h1 + size h2 + 1) + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "proof (cases h1)"], ["proof (state)\ngoal (2 subgoals):\n 1. h1 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n 2. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "case Leaf"], ["proof (state)\nthis:\n  h1 = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. h1 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n 2. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "thus ?thesis"], ["proof (prove)\nusing this:\n  h1 = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "by (cases h2) auto"], ["proof (state)\nthis:\n  real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "case h1: Node"], ["proof (state)\nthis:\n  h1 = \\<langle>x21_, x22_, x23_\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "proof (cases h2)"], ["proof (state)\ngoal (2 subgoals):\n 1. h2 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n 2. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "case Leaf"], ["proof (state)\nthis:\n  h2 = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. h2 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n 2. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "thus ?thesis"], ["proof (prove)\nusing this:\n  h2 = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "using h1"], ["proof (prove)\nusing this:\n  h2 = \\<langle>\\<rangle>\n  h1 = \\<langle>x21_, x22_, x23_\\<rangle>\n\ngoal (1 subgoal):\n 1. real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "by simp"], ["proof (state)\nthis:\n  real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "case h2: Node"], ["proof (state)\nthis:\n  h2 = \\<langle>x21_, x22_, x23_\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "have \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (real (size h1 + size h2)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "apply(rule \\<Delta>\\<Phi>_merge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. h1 = \\<langle>?hs1.0, ?x1.0, \\<langle>\\<rangle>\\<rangle>\n 2. h2 = \\<langle>?hs2.0, ?x2.0, \\<langle>\\<rangle>\\<rangle>", "using h1 h2 assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>x21___, x22___, x23___\\<rangle>\n  h2 = \\<langle>x21_, x22_, x23_\\<rangle>\n  is_root h1\n  is_root h2\n\ngoal (2 subgoals):\n 1. h1 = \\<langle>?hs1.0, ?x1.0, \\<langle>\\<rangle>\\<rangle>\n 2. h2 = \\<langle>?hs2.0, ?x2.0, \\<langle>\\<rangle>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "also"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "have \"\\<dots> \\<le> log 2 (size h1 + size h2 + 1) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size h1 + size h2)) + 1\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 1", "by (simp add: h1)"], ["proof (state)\nthis:\n  log 2 (real (size h1 + size h2)) + 1\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n       \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 1\n\ngoal (1 subgoal):\n 1. real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2", "by(simp add: algebra_simps)"], ["proof (state)\nthis:\n  real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (T_merge h1 h2) + \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n\ngoal:\nNo subgoals!", "qed"], ["", "fun cost :: \"'a :: linorder op \\<Rightarrow> 'a tree list \\<Rightarrow> nat\" where\n  \"cost Empty [] = 1\"\n| \"cost Del_min [h] = T_del_min h\"\n| \"cost (Insert a) [h] = T_insert a h\"\n| \"cost Merge [h1,h2] = T_merge h1 h2\""], ["", "fun U :: \"'a :: linorder op \\<Rightarrow> 'a tree list \\<Rightarrow> real\" where\n  \"U Empty [] = 1\"\n| \"U (Insert a) [h] = log 2 (size h + 1) + 1\"\n| \"U Del_min [h] = 2 * log 2 (size h + 1) + 5\"\n| \"U Merge [h1,h2] = log 2 (size h1 + size h2 + 1) + 2\""], ["", "interpretation Amortized\nwhere arity = arity and exec = exec and cost = cost and inv = is_root \nand \\<Phi> = \\<Phi> and U = U"], ["proof (prove)\ngoal (1 subgoal):\n 1. Amortized arity exec is_root cost \\<Phi> U", "proof (standard, goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> is_root (exec f ss)\n 2. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 3. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (1 _ f)"], ["proof (state)\nthis:\n  \\<forall>s\\<in>set ss_. is_root s\n  length ss_ = arity f\n\ngoal (3 subgoals):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> is_root (exec f ss)\n 2. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 3. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "thus ?case"], ["proof (prove)\nusing this:\n  \\<forall>s\\<in>set ss_. is_root s\n  length ss_ = arity f\n\ngoal (1 subgoal):\n 1. is_root (exec f ss_)", "using is_root_insert is_root_del_min is_root_merge"], ["proof (prove)\nusing this:\n  \\<forall>s\\<in>set ss_. is_root s\n  length ss_ = arity f\n  is_root ?h \\<Longrightarrow> is_root (Pairing_Heap_Tree.insert ?x ?h)\n  is_root ?h \\<Longrightarrow> is_root (del_min ?h)\n  \\<lbrakk>is_root ?h1.0; is_root ?h2.0\\<rbrakk>\n  \\<Longrightarrow> is_root (merge ?h1.0 ?h2.0)\n\ngoal (1 subgoal):\n 1. is_root (exec f ss_)", "by (cases f) (auto simp: numeral_eq_Suc)"], ["proof (state)\nthis:\n  is_root (exec f ss_)\n\ngoal (2 subgoals):\n 1. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (2 s)"], ["proof (state)\nthis:\n  is_root s\n\ngoal (2 subgoals):\n 1. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> \\<Phi> s", "by (induct s) simp_all"], ["proof (state)\nthis:\n  0 \\<le> \\<Phi> s\n\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (3 ss f)"], ["proof (state)\nthis:\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "proof (cases f)"], ["proof (state)\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 4. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case Empty"], ["proof (state)\nthis:\n  f = Empty\n\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 4. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "with 3"], ["proof (chain)\npicking this:\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n  f = Empty", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n  f = Empty\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by(auto)"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case Insert"], ["proof (state)\nthis:\n  f = Insert x2_\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Insert x2_", "obtain h where \"ss = [h]\" \"is_root h\""], ["proof (prove)\nusing this:\n  f = Insert x2_\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>ss = [h]; is_root h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Insert x2_\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>ss = [h]; is_root h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [h]\n  is_root h\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  ss = [h]\n  is_root h\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using Insert \\<Delta>\\<Phi>_insert 3"], ["proof (prove)\nusing this:\n  ss = [h]\n  is_root h\n  f = Insert x2_\n  is_root ?hp \\<Longrightarrow>\n  \\<Phi> (Pairing_Heap_Tree.insert ?x ?hp) - \\<Phi> ?hp\n  \\<le> log 2 (real (size ?hp + 1))\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by auto"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case Del_min"], ["proof (state)\nthis:\n  f = Del_min\n\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Del_min", "obtain h where [simp]: \"ss = [h]\""], ["proof (prove)\nusing this:\n  f = Del_min\n\ngoal (1 subgoal):\n 1. (\\<And>h. ss = [h] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Del_min\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>h. ss = [h] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  ss = [h]\n\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using A_del_min[of h] 3 Del_min"], ["proof (prove)\nusing this:\n  is_root h \\<Longrightarrow>\n  real (T_del_min h) + \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 2 * log 2 (real (size h + 1)) + 5\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n  f = Del_min\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by simp"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case Merge"], ["proof (state)\nthis:\n  f = Merge\n\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Merge", "obtain h1 h2 where \"ss = [h1,h2]\" \"is_root h1\" \"is_root h2\""], ["proof (prove)\nusing this:\n  f = Merge\n\ngoal (1 subgoal):\n 1. (\\<And>h1 h2.\n        \\<lbrakk>ss = [h1, h2]; is_root h1; is_root h2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Merge\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>h1 h2.\n        \\<lbrakk>ss = [h1, h2]; is_root h1; is_root h2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: numeral_eq_Suc)"], ["proof (state)\nthis:\n  ss = [h1, h2]\n  is_root h1\n  is_root h2\n\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "with A_merge[of h1 h2] Merge"], ["proof (chain)\npicking this:\n  \\<lbrakk>is_root h1; is_root h2\\<rbrakk>\n  \\<Longrightarrow> real (T_merge h1 h2) + \\<Phi> (merge h1 h2) -\n                    \\<Phi> h1 -\n                    \\<Phi> h2\n                    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n  f = Merge\n  ss = [h1, h2]\n  is_root h1\n  is_root h2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>is_root h1; is_root h2\\<rbrakk>\n  \\<Longrightarrow> real (T_merge h1 h2) + \\<Phi> (merge h1 h2) -\n                    \\<Phi> h1 -\n                    \\<Phi> h2\n                    \\<le> log 2 (real (size h1 + size h2 + 1)) + 2\n  f = Merge\n  ss = [h1, h2]\n  is_root h1\n  is_root h2\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by simp"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}