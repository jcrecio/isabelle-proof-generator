{"file_name": "/home/qj213/afp-2021-10-22/thys/Amortized_Complexity/Pairing_Heap_Tree_Analysis.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Amortized_Complexity", "problem_names": ["lemma link_size[simp]: \"size (link hp) = size hp\"", "lemma size_pass\\<^sub>1: \"size (pass\\<^sub>1 hp) = size hp\"", "lemma size_pass\\<^sub>2: \"size (pass\\<^sub>2 hp) = size hp\"", "lemma size_merge: \n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> size (merge h1 h2) = size h1 + size h2\"", "lemma \\<Delta>\\<Phi>_insert: \"is_root hp \\<Longrightarrow> \\<Phi> (insert x hp) - \\<Phi> hp \\<le> log 2  (size hp + 1)\"", "lemma \\<Delta>\\<Phi>_merge:\n  assumes \"h1 = Node hs1 x1 Leaf\" \"h2 = Node hs2 x2 Leaf\" \n  shows \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (size h1 + size h2) + 1\"", "lemma \\<Delta>\\<Phi>_pass1_ub_pass1: \"hs \\<noteq> Leaf \\<Longrightarrow> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs  \\<le> ub_pass\\<^sub>1 hs\"", "lemma \\<Delta>\\<Phi>_pass1: assumes \"hs \\<noteq> Leaf\"\n  shows \"\\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs \\<le> 2*log 2 (size hs) - len hs + 2\"", "lemma \\<Delta>\\<Phi>_pass2: \"hs \\<noteq> Leaf \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (size hs)\"", "lemma \\<Delta>\\<Phi>_del_min: assumes \"hs \\<noteq> Leaf\"\nshows \"\\<Phi> (del_min (Node hs x Leaf)) - \\<Phi> (Node hs x Leaf) \n  \\<le> 3*log 2 (size hs) - len hs + 2\"", "lemma is_root_merge:\n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> is_root (merge h1 h2)\"", "lemma is_root_insert: \"is_root h \\<Longrightarrow> is_root (insert x h)\"", "lemma is_root_del_min:\n  assumes \"is_root h\" shows \"is_root (del_min h)\"", "lemma pass\\<^sub>1_len: \"len (pass\\<^sub>1 h) \\<le> len h\""], "translations": [["", "lemma link_size[simp]: \"size (link hp) = size hp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (link hp) = size hp", "by (cases hp rule: link.cases) simp_all"], ["", "lemma size_pass\\<^sub>1: \"size (pass\\<^sub>1 hp) = size hp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (pass\\<^sub>1 hp) = size hp", "by (induct hp rule: pass\\<^sub>1.induct) simp_all"], ["", "lemma size_pass\\<^sub>2: \"size (pass\\<^sub>2 hp) = size hp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (pass\\<^sub>2 hp) = size hp", "by (induct hp rule: pass\\<^sub>2.induct) simp_all"], ["", "lemma size_merge: \n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> size (merge h1 h2) = size h1 + size h2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>is_root h1; is_root h2\\<rbrakk>\n    \\<Longrightarrow> size (merge h1 h2) = size h1 + size h2", "by (simp split: tree.splits)"], ["", "lemma \\<Delta>\\<Phi>_insert: \"is_root hp \\<Longrightarrow> \\<Phi> (insert x hp) - \\<Phi> hp \\<le> log 2  (size hp + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root hp \\<Longrightarrow>\n    \\<Phi> (Pairing_Heap_Tree.insert x hp) - \\<Phi> hp\n    \\<le> log 2 (real (size hp + 1))", "by (simp split: tree.splits)"], ["", "lemma \\<Delta>\\<Phi>_merge:\n  assumes \"h1 = Node hs1 x1 Leaf\" \"h2 = Node hs2 x2 Leaf\" \n  shows \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (size h1 + size h2) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "let ?hs = \"Node hs1 x1 (Node hs2 x2 Leaf)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<Phi> (merge h1 h2) = \\<Phi> (link ?hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) =\n    \\<Phi>\n     (link\n       \\<langle>hs1, x1,\n        \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)", "using assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) =\n    \\<Phi>\n     (link\n       \\<langle>hs1, x1,\n        \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "also"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<dots> = \\<Phi> hs1 + \\<Phi> hs2 + log 2 (size hs1 + size hs2 + 1) + log 2 (size hs1 + size hs2 + 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi>\n     (link\n       \\<langle>hs1, x1,\n        \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size hs1 + size hs2 + 2))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size hs1 + size hs2 + 2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "also"], ["proof (state)\nthis:\n  \\<Phi>\n   (link\n     \\<langle>hs1, x1,\n      \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\\<rangle>) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size hs1 + size hs2 + 2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<dots> = \\<Phi> hs1 + \\<Phi> hs2 + log 2 (size hs1 + size hs2 + 1) + log 2 (size h1 + size h2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size hs1 + size hs2 + 2)) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2))", "using assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size hs1 + size hs2 + 2)) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2))", "by simp"], ["proof (state)\nthis:\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size hs1 + size hs2 + 2)) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))", "have \"\\<Phi> (merge h1 h2) = \\<dots>\""], ["proof (prove)\nusing this:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) =\n    \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2))", "."], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) =\n  \\<Phi> hs1 + \\<Phi> hs2 + log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n   log 2 (size hs1 + size hs2 + 1) + log 2 (size h1 + size h2)\n   - log 2 (size hs1 + 1) - log 2 (size hs2 + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n    log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))", "using assms"], ["proof (prove)\nusing this:\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n    log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n  log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2)) -\n  log 2 (real (size hs1 + 1)) -\n  log 2 (real (size hs2 + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "also"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 =\n  log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2)) -\n  log 2 (real (size hs1 + 1)) -\n  log 2 (real (size hs2 + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "have \"\\<dots> \\<le> log 2 (size h1 + size h2) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "using ld_le_2ld[of \"size hs1\" \"size hs2\"] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> real (size hs1); 0 \\<le> real (size hs2)\\<rbrakk>\n  \\<Longrightarrow> log 2 (1 + real (size hs1) + real (size hs2))\n                    \\<le> 1 + log 2 (1 + real (size hs1)) +\n                          log 2 (1 + real (size hs2))\n  h1 = \\<langle>hs1, x1, \\<langle>\\<rangle>\\<rangle>\n  h2 = \\<langle>hs2, x2, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (real (size hs1 + size hs2 + 1)) +\n    log 2 (real (size h1 + size h2)) -\n    log 2 (real (size hs1 + 1)) -\n    log 2 (real (size hs2 + 1))\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  log 2 (real (size hs1 + size hs2 + 1)) +\n  log 2 (real (size h1 + size h2)) -\n  log 2 (real (size hs1 + 1)) -\n  log 2 (real (size hs2 + 1))\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "."], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal:\nNo subgoals!", "qed"], ["", "fun ub_pass\\<^sub>1 :: \"'a tree \\<Rightarrow> real\" where\n  \"ub_pass\\<^sub>1 (Node _ _ Leaf) = 0\"\n| \"ub_pass\\<^sub>1 (Node hs1 _ (Node hs2 _ Leaf)) = 2*log 2 (size hs1 + size hs2 + 2)\" \n| \"ub_pass\\<^sub>1 (Node hs1 _ (Node hs2 _ hs)) = 2*log 2 (size hs1 + size hs2 + size hs + 2) \n    - 2*log 2 (size hs) - 2 + ub_pass\\<^sub>1 hs\""], ["", "lemma \\<Delta>\\<Phi>_pass1_ub_pass1: \"hs \\<noteq> Leaf \\<Longrightarrow> \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs  \\<le> ub_pass\\<^sub>1 hs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs \\<le> ub_pass\\<^sub>1 hs", "proof (induction hs rule: ub_pass\\<^sub>1.induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "case (2 lx x ly y)"], ["proof (state)\nthis:\n  \\<langle>lx, x,\n   \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n  \\<langle>\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "have \"log 2  (size lx + size ly + 1) - log 2  (size ly + 1) \n    \\<le> log 2 (size lx + size ly + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) - log 2 (real (size ly + 1))\n    \\<le> log 2 (real (size lx + size ly + 1))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1)) - log 2 (real (size ly + 1))\n  \\<le> log 2 (real (size lx + size ly + 1))\n\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "also"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1)) - log 2 (real (size ly + 1))\n  \\<le> log 2 (real (size lx + size ly + 1))\n\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "have \"\\<dots> \\<le> log 2 (size lx + size ly + 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1))\n    \\<le> log 2 (real (size lx + size ly + 2))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1))\n  \\<le> log 2 (real (size lx + size ly + 2))\n\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "also"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1))\n  \\<le> log 2 (real (size lx + size ly + 2))\n\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "have \"\\<dots> \\<le> 2*\\<dots>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 2))\n    \\<le> 2 * log 2 (real (size lx + size ly + 2))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 2))\n  \\<le> 2 * log 2 (real (size lx + size ly + 2))\n\ngoal (4 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uw_ hs2 ux_.\n       \\<langle>hs1, uw_,\n        \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1\n          \\<langle>hs1, uw_,\n           \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n       \\<Phi>\n        \\<langle>hs1, uw_,\n         \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1\n              \\<langle>hs1, uw_,\n               \\<langle>hs2, ux_, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n 3. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 4. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "finally"], ["proof (chain)\npicking this:\n  log 2 (real (size lx + size ly + 1)) - log 2 (real (size ly + 1))\n  \\<le> 2 * log 2 (real (size lx + size ly + 2))", "show ?case"], ["proof (prove)\nusing this:\n  log 2 (real (size lx + size ly + 1)) - log 2 (real (size ly + 1))\n  \\<le> 2 * log 2 (real (size lx + size ly + 2))\n\ngoal (1 subgoal):\n 1. \\<Phi>\n     (pass\\<^sub>1\n       \\<langle>lx, x,\n        \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n    \\<Phi>\n     \\<langle>lx, x, \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1\n           \\<langle>lx, x,\n            \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle>", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1\n     \\<langle>lx, x, \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle>) -\n  \\<Phi>\n   \\<langle>lx, x, \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n  \\<le> ub_pass\\<^sub>1\n         \\<langle>lx, x,\n          \\<langle>ly, y, \\<langle>\\<rangle>\\<rangle>\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "case (3 lx x ly y lz z rz)"], ["proof (state)\nthis:\n  \\<langle>lz, z, rz\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>) -\n  \\<Phi> \\<langle>lz, z, rz\\<rangle>\n  \\<le> ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>\n  \\<langle>lx, x,\n   \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n  \\<langle>\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "let ?ry = \"Node lz z rz\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "let ?rx = \"Node ly y ?ry\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "let ?h = \"Node lx x ?rx\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "let ?t =\"log 2 (size lx + size ly + 1) - log 2 (size ly + size ?ry + 1)\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "have \"\\<Phi> (pass\\<^sub>1 ?h) - \\<Phi> ?h \\<le> ?t + ub_pass\\<^sub>1 ?ry\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi>\n     (pass\\<^sub>1\n       \\<langle>lx, x,\n        \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n    \\<Phi>\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n    \\<le> log 2 (real (size lx + size ly + 1)) -\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n          ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>", "using \"3.IH\""], ["proof (prove)\nusing this:\n  \\<langle>lz, z, rz\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>) -\n  \\<Phi> \\<langle>lz, z, rz\\<rangle>\n  \\<le> ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi>\n     (pass\\<^sub>1\n       \\<langle>lx, x,\n        \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n    \\<Phi>\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n    \\<le> log 2 (real (size lx + size ly + 1)) -\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n          ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>", "by (simp add: size_pass\\<^sub>1 algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n  \\<Phi>\n   \\<langle>lx, x,\n    \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n  \\<le> log 2 (real (size lx + size ly + 1)) -\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n        ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n  \\<Phi>\n   \\<langle>lx, x,\n    \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n  \\<le> log 2 (real (size lx + size ly + 1)) -\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n        ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "have \"log 2 (size lx + size ly + 1) + 2 * log 2 (size ?ry) + 2\n    \\<le> 2 * log 2 (size ?h) + log 2 (size ly + size ?ry + 1)\" (is \"?l \\<le> ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "have \"?l \\<le> 2 * log 2 (size lx + size ly + size ?ry + 1) + log 2 (size ?ry)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n          log 2 (real (size \\<langle>lz, z, rz\\<rangle>))", "using ld_sum_inequality [of \"size lx + size ly + 1\" \"size ?ry\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < real (size lx + size ly + 1);\n   0 < real (size \\<langle>lz, z, rz\\<rangle>)\\<rbrakk>\n  \\<Longrightarrow> log 2 (real (size lx + size ly + 1)) +\n                    log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n                    2\n                    \\<le> 2 *\n                          log 2\n                           (real (size lx + size ly + 1) +\n                            real (size \\<langle>lz, z, rz\\<rangle>))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n          log 2 (real (size \\<langle>lz, z, rz\\<rangle>))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n        log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "also"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n        log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "have \"\\<dots> \\<le> 2 * log 2 (size lx + size ly + size ?ry + 2) + log 2 (size ?ry)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 *\n    log 2\n     (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n    log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n    \\<le> 2 *\n          log 2\n           (real\n             (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 2)) +\n          log 2 (real (size \\<langle>lz, z, rz\\<rangle>))", "by simp"], ["proof (state)\nthis:\n  2 *\n  log 2 (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n  log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n  \\<le> 2 *\n        log 2\n         (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 2)) +\n        log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "also"], ["proof (state)\nthis:\n  2 *\n  log 2 (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n  log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n  \\<le> 2 *\n        log 2\n         (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 2)) +\n        log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "have \"\\<dots> \\<le> ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 *\n    log 2\n     (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 2)) +\n    log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "by simp"], ["proof (state)\nthis:\n  2 *\n  log 2 (real (size lx + size ly + size \\<langle>lz, z, rz\\<rangle> + 2)) +\n  log 2 (real (size \\<langle>lz, z, rz\\<rangle>))\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "finally"], ["proof (chain)\npicking this:\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "show ?thesis"], ["proof (prove)\nusing this:\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size ly + 1)) +\n    2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n    2\n    \\<le> 2 *\n          log 2\n           (real\n             (size\n               \\<langle>lx, x,\n                \\<langle>ly, y,\n                 \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n          log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "."], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))\n\ngoal (3 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<And>hs1 uy_ hs2 uz_ v va vb.\n       \\<lbrakk>\\<langle>v, va, vb\\<rangle> \\<noteq>\n                \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>) -\n                \\<Phi> \\<langle>v, va, vb\\<rangle>\n                \\<le> ub_pass\\<^sub>1 \\<langle>v, va, vb\\<rangle>;\n        \\<langle>hs1, uy_,\n         \\<langle>hs2, uz_,\n          \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle> \\<noteq>\n        \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>1\n                            \\<langle>hs1, uy_,\n                             \\<langle>hs2, uz_,\n                              \\<langle>v, va,\n                               vb\\<rangle>\\<rangle>\\<rangle>) -\n                         \\<Phi>\n                          \\<langle>hs1, uy_,\n                           \\<langle>hs2, uz_,\n                            \\<langle>v, va, vb\\<rangle>\\<rangle>\\<rangle>\n                         \\<le> ub_pass\\<^sub>1\n                                \\<langle>hs1, uy_,\n                                 \\<langle>hs2, uz_,\n                                  \\<langle>v, va,\n                                   vb\\<rangle>\\<rangle>\\<rangle>\n 3. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<Phi>\n   (pass\\<^sub>1\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n  \\<Phi>\n   \\<langle>lx, x,\n    \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n  \\<le> log 2 (real (size lx + size ly + 1)) -\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n        ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))", "show ?case"], ["proof (prove)\nusing this:\n  \\<Phi>\n   (pass\\<^sub>1\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n  \\<Phi>\n   \\<langle>lx, x,\n    \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n  \\<le> log 2 (real (size lx + size ly + 1)) -\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1)) +\n        ub_pass\\<^sub>1 \\<langle>lz, z, rz\\<rangle>\n  log 2 (real (size lx + size ly + 1)) +\n  2 * log 2 (real (size \\<langle>lz, z, rz\\<rangle>)) +\n  2\n  \\<le> 2 *\n        log 2\n         (real\n           (size\n             \\<langle>lx, x,\n              \\<langle>ly, y,\n               \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>)) +\n        log 2 (real (size ly + size \\<langle>lz, z, rz\\<rangle> + 1))\n\ngoal (1 subgoal):\n 1. \\<Phi>\n     (pass\\<^sub>1\n       \\<langle>lx, x,\n        \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n    \\<Phi>\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1\n           \\<langle>lx, x,\n            \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<Phi>\n   (pass\\<^sub>1\n     \\<langle>lx, x,\n      \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>) -\n  \\<Phi>\n   \\<langle>lx, x,\n    \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n  \\<le> ub_pass\\<^sub>1\n         \\<langle>lx, x,\n          \\<langle>ly, y, \\<langle>lz, z, rz\\<rangle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>uu_ uv_.\n       \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle> \\<noteq>\n       \\<langle>\\<rangle> \\<Longrightarrow>\n       \\<Phi>\n        (pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>) -\n       \\<Phi> \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n       \\<le> ub_pass\\<^sub>1 \\<langle>uu_, uv_, \\<langle>\\<rangle>\\<rangle>\n 2. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>1 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> ub_pass\\<^sub>1 \\<langle>\\<rangle>", "qed simp_all"], ["", "lemma \\<Delta>\\<Phi>_pass1: assumes \"hs \\<noteq> Leaf\"\n  shows \"\\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs \\<le> 2*log 2 (size hs) - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "from assms"], ["proof (chain)\npicking this:\n  hs \\<noteq> \\<langle>\\<rangle>", "have \"ub_pass\\<^sub>1 hs \\<le> 2*log 2 (size hs) - len hs + 2\""], ["proof (prove)\nusing this:\n  hs \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. ub_pass\\<^sub>1 hs \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "by (induct hs rule: ub_pass\\<^sub>1.induct) (simp_all add: algebra_simps)"], ["proof (state)\nthis:\n  ub_pass\\<^sub>1 hs \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "thus ?thesis"], ["proof (prove)\nusing this:\n  ub_pass\\<^sub>1 hs \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "using \\<Delta>\\<Phi>_pass1_ub_pass1 [OF assms] order_trans"], ["proof (prove)\nusing this:\n  ub_pass\\<^sub>1 hs \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs \\<le> ub_pass\\<^sub>1 hs\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "by blast"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<Delta>\\<Phi>_pass2: \"hs \\<noteq> Leaf \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (size hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 hs) - \\<Phi> hs \\<le> log 2 (real (size hs))", "proof (induction hs)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> log 2 (real (size \\<langle>\\<rangle>))\n 2. \\<And>hs1 x2 hs2.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs2 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs2) - \\<Phi> hs2\n        \\<le> log 2 (real (size hs2));\n        \\<langle>hs1, x2, hs2\\<rangle> \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x2, hs2\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x2, hs2\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x2, hs2\\<rangle>))", "case (Node lx x rx)"], ["proof (state)\nthis:\n  lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx \\<le> log 2 (real (size lx))\n  rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx))\n  \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> log 2 (real (size \\<langle>\\<rangle>))\n 2. \\<And>hs1 x2 hs2.\n       \\<lbrakk>hs1 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 hs1) - \\<Phi> hs1\n                \\<le> log 2 (real (size hs1));\n        hs2 \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 hs2) - \\<Phi> hs2\n        \\<le> log 2 (real (size hs2));\n        \\<langle>hs1, x2, hs2\\<rangle> \\<noteq> \\<langle>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi>\n                          (pass\\<^sub>2 \\<langle>hs1, x2, hs2\\<rangle>) -\n                         \\<Phi> \\<langle>hs1, x2, hs2\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>hs1, x2, hs2\\<rangle>))", "thus ?case"], ["proof (prove)\nusing this:\n  lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx \\<le> log 2 (real (size lx))\n  rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx))\n  \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n    \\<Phi> \\<langle>lx, x, rx\\<rangle>\n    \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))", "proof (cases rx)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "case 1: (Node ly y ry)"], ["proof (state)\nthis:\n  rx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "let ?h = \"Node lx x rx\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "obtain la a where 2: \"pass\\<^sub>2 rx = Node la a Leaf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>la a.\n        pass\\<^sub>2 rx =\n        \\<langle>la, a, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pass\\<^sub>2_struct 1"], ["proof (prove)\nusing this:\n  \\<exists>l a.\n     pass\\<^sub>2 \\<langle>?hs1.0, ?x, ?hs\\<rangle> =\n     \\<langle>l, a, \\<langle>\\<rangle>\\<rangle>\n  rx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>la a.\n        pass\\<^sub>2 rx =\n        \\<langle>la, a, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  pass\\<^sub>2 rx = \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "hence 3: \"size rx = size \\<dots>\""], ["proof (prove)\nusing this:\n  pass\\<^sub>2 rx = \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. size rx = size \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>", "using size_pass\\<^sub>2"], ["proof (prove)\nusing this:\n  pass\\<^sub>2 rx = \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>\n  size (pass\\<^sub>2 ?hp) = size ?hp\n\ngoal (1 subgoal):\n 1. size rx = size \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>", "by metis"], ["proof (state)\nthis:\n  size rx = size \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "have link: \"\\<Phi>(link(Node lx x (pass\\<^sub>2 rx))) - \\<Phi> lx - \\<Phi> (pass\\<^sub>2 rx) =\n          log 2 (size lx + size rx + 1) + log 2 (size lx + size rx) - log 2 (size rx)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n    \\<Phi> (pass\\<^sub>2 rx) =\n    log 2 (real (size lx + size rx + 1)) +\n    log 2 (real (size lx + size rx)) -\n    log 2 (real (size rx))", "using 2 3"], ["proof (prove)\nusing this:\n  pass\\<^sub>2 rx = \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>\n  size rx = size \\<langle>la, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n    \\<Phi> (pass\\<^sub>2 rx) =\n    log 2 (real (size lx + size rx + 1)) +\n    log 2 (real (size lx + size rx)) -\n    log 2 (real (size rx))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n  \\<Phi> (pass\\<^sub>2 rx) =\n  log 2 (real (size lx + size rx + 1)) + log 2 (real (size lx + size rx)) -\n  log 2 (real (size rx))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "have \"\\<Phi> (pass\\<^sub>2 ?h) - \\<Phi> ?h =\n        \\<Phi> (link (Node lx x (pass\\<^sub>2 rx))) - \\<Phi> lx - \\<Phi> rx - log 2 (size lx + size rx + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n    \\<Phi> \\<langle>lx, x, rx\\<rangle> =\n    \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n    \\<Phi> rx -\n    log 2 (real (size lx + size rx + 1))", "by (simp)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, rx\\<rangle> =\n  \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n  \\<Phi> rx -\n  log 2 (real (size lx + size rx + 1))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "also"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, rx\\<rangle> =\n  \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n  \\<Phi> rx -\n  log 2 (real (size lx + size rx + 1))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "have \"\\<dots> = \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx + log 2 (size lx + size rx) - log 2 (size rx)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n    \\<Phi> rx -\n    log 2 (real (size lx + size rx + 1)) =\n    \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx +\n    log 2 (real (size lx + size rx)) -\n    log 2 (real (size rx))", "using link"], ["proof (prove)\nusing this:\n  \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n  \\<Phi> (pass\\<^sub>2 rx) =\n  log 2 (real (size lx + size rx + 1)) + log 2 (real (size lx + size rx)) -\n  log 2 (real (size rx))\n\ngoal (1 subgoal):\n 1. \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n    \\<Phi> rx -\n    log 2 (real (size lx + size rx + 1)) =\n    \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx +\n    log 2 (real (size lx + size rx)) -\n    log 2 (real (size rx))", "by linarith"], ["proof (state)\nthis:\n  \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n  \\<Phi> rx -\n  log 2 (real (size lx + size rx + 1)) =\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx + log 2 (real (size lx + size rx)) -\n  log 2 (real (size rx))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "also"], ["proof (state)\nthis:\n  \\<Phi> (link \\<langle>lx, x, pass\\<^sub>2 rx\\<rangle>) - \\<Phi> lx -\n  \\<Phi> rx -\n  log 2 (real (size lx + size rx + 1)) =\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx + log 2 (real (size lx + size rx)) -\n  log 2 (real (size rx))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "have \"\\<dots> \\<le> log 2 (size lx + size rx)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx +\n    log 2 (real (size lx + size rx)) -\n    log 2 (real (size rx))\n    \\<le> log 2 (real (size lx + size rx))", "using Node.IH 1"], ["proof (prove)\nusing this:\n  lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx \\<le> log 2 (real (size lx))\n  rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx))\n  rx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx +\n    log 2 (real (size lx + size rx)) -\n    log 2 (real (size rx))\n    \\<le> log 2 (real (size lx + size rx))", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx + log 2 (real (size lx + size rx)) -\n  log 2 (real (size rx))\n  \\<le> log 2 (real (size lx + size rx))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "also"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx + log 2 (real (size lx + size rx)) -\n  log 2 (real (size rx))\n  \\<le> log 2 (real (size lx + size rx))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "have \"\\<dots> \\<le> log 2 (size ?h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size rx))\n    \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))", "using 1"], ["proof (prove)\nusing this:\n  rx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (1 subgoal):\n 1. log 2 (real (size lx + size rx))\n    \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))", "by simp"], ["proof (state)\nthis:\n  log 2 (real (size lx + size rx))\n  \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n                \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n                \\<le> log 2 (real (size lx));\n        rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n        \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n        \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n        rx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                         \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                         \\<le> log 2\n                                (real (size \\<langle>lx, x, rx\\<rangle>))", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, rx\\<rangle>\n  \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, rx\\<rangle>\n  \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n    \\<Phi> \\<langle>lx, x, rx\\<rangle>\n    \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))", "."], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, rx\\<rangle>\n  \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n             \\<Phi> (pass\\<^sub>2 lx) - \\<Phi> lx\n             \\<le> log 2 (real (size lx));\n     rx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n     \\<Phi> (pass\\<^sub>2 rx) - \\<Phi> rx \\<le> log 2 (real (size rx));\n     \\<langle>lx, x, rx\\<rangle> \\<noteq> \\<langle>\\<rangle>;\n     rx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n                      \\<Phi> \\<langle>lx, x, rx\\<rangle>\n                      \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))", "qed simp"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 \\<langle>lx, x, rx\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, rx\\<rangle>\n  \\<le> log 2 (real (size \\<langle>lx, x, rx\\<rangle>))\n\ngoal (1 subgoal):\n 1. \\<langle>\\<rangle> \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (pass\\<^sub>2 \\<langle>\\<rangle>) - \\<Phi> \\<langle>\\<rangle>\n    \\<le> log 2 (real (size \\<langle>\\<rangle>))", "qed simp"], ["", "(*\nlemma \\<Delta>\\<Phi>_mergepairs: assumes \"hs \\<noteq> Leaf\"\n  shows \"\\<Phi> (merge_pairs hs) - \\<Phi> hs \\<le> 3 * log 2 (size hs) - len hs + 2\"\nproof -\n  have \"pass\\<^sub>1 hs \\<noteq> Leaf\" by (metis assms eq_size_0 size_pass\\<^sub>1)\n  with assms \\<Delta>\\<Phi>_pass1[of hs] \\<Delta>\\<Phi>_pass2[of \"pass\\<^sub>1 hs\"]\n  show ?thesis by (auto simp add: size_pass\\<^sub>1 pass12_merge_pairs)\nqed\n*)"], ["", "lemma \\<Delta>\\<Phi>_del_min: assumes \"hs \\<noteq> Leaf\"\nshows \"\\<Phi> (del_min (Node hs x Leaf)) - \\<Phi> (Node hs x Leaf) \n  \\<le> 3*log 2 (size hs) - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "let ?h = \"Node hs x Leaf\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "let ?\\<Delta>\\<Phi>\\<^sub>1 = \"\\<Phi> hs - \\<Phi> ?h\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "let ?\\<Delta>\\<Phi>\\<^sub>2 = \"\\<Phi>(pass\\<^sub>2(pass\\<^sub>1 hs)) - \\<Phi> hs\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "let ?\\<Delta>\\<Phi> = \"\\<Phi> (del_min ?h) - \\<Phi> ?h\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "have \"\\<Phi>(pass\\<^sub>2(pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs) \\<le> log 2  (size hs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n    \\<le> log 2 (real (size hs))", "using \\<Delta>\\<Phi>_pass2 [of \"pass\\<^sub>1 hs\"] assms"], ["proof (prove)\nusing this:\n  pass\\<^sub>1 hs \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size (pass\\<^sub>1 hs)))\n  hs \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n    \\<le> log 2 (real (size hs))", "by(metis eq_size_0 size_pass\\<^sub>1)"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size hs))\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "moreover"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size hs))\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "have \"\\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs \\<le>  2*\\<dots> - len hs + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n    \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2", "by(rule \\<Delta>\\<Phi>_pass1[OF assms])"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "moreover"], ["proof (state)\nthis:\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "have \"?\\<Delta>\\<Phi> \\<le> ?\\<Delta>\\<Phi>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> hs", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> hs\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "ultimately"], ["proof (chain)\npicking this:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size hs))\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> hs", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size hs))\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> hs\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "using assms"], ["proof (prove)\nusing this:\n  \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> (pass\\<^sub>1 hs)\n  \\<le> log 2 (real (size hs))\n  \\<Phi> (pass\\<^sub>1 hs) - \\<Phi> hs\n  \\<le> 2 * log 2 (real (size hs)) - real (len hs) + 2\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> \\<Phi> (pass\\<^sub>2 (pass\\<^sub>1 hs)) - \\<Phi> hs\n  hs \\<noteq> \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n    \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n    \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2", "by linarith"], ["proof (state)\nthis:\n  \\<Phi> (del_min \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>hs, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 3 * log 2 (real (size hs)) - real (len hs) + 2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma is_root_merge:\n  \"is_root h1 \\<Longrightarrow> is_root h2 \\<Longrightarrow> is_root (merge h1 h2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>is_root h1; is_root h2\\<rbrakk>\n    \\<Longrightarrow> is_root (merge h1 h2)", "by (simp split: tree.splits)"], ["", "lemma is_root_insert: \"is_root h \\<Longrightarrow> is_root (insert x h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root h \\<Longrightarrow> is_root (Pairing_Heap_Tree.insert x h)", "by (simp split: tree.splits)"], ["", "lemma is_root_del_min:\n  assumes \"is_root h\" shows \"is_root (del_min h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_root (del_min h)", "proof (cases h)"], ["proof (state)\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       is_root (del_min h)", "case [simp]: (Node lx x rx)"], ["proof (state)\nthis:\n  h = \\<langle>lx, x, rx\\<rangle>\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       is_root (del_min h)", "have \"rx = Leaf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rx = \\<langle>\\<rangle>", "using assms"], ["proof (prove)\nusing this:\n  is_root h\n\ngoal (1 subgoal):\n 1. rx = \\<langle>\\<rangle>", "by simp"], ["proof (state)\nthis:\n  rx = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       is_root (del_min h)", "thus ?thesis"], ["proof (prove)\nusing this:\n  rx = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. is_root (del_min h)", "proof (cases lx)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>rx = \\<langle>\\<rangle>; lx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>rx = \\<langle>\\<rangle>;\n        lx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "case (Node ly y ry)"], ["proof (state)\nthis:\n  lx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>rx = \\<langle>\\<rangle>; lx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>rx = \\<langle>\\<rangle>;\n        lx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "then"], ["proof (chain)\npicking this:\n  lx = \\<langle>ly, y, ry\\<rangle>", "obtain la a ra where \"pass\\<^sub>1 lx = Node a la ra\""], ["proof (prove)\nusing this:\n  lx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>a la ra.\n        pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pass\\<^sub>1_struct"], ["proof (prove)\nusing this:\n  lx = \\<langle>ly, y, ry\\<rangle>\n  \\<exists>l a r.\n     pass\\<^sub>1 \\<langle>?hs1.0, ?x, ?hs\\<rangle> =\n     \\<langle>l, a, r\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>a la ra.\n        pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>rx = \\<langle>\\<rangle>; lx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>rx = \\<langle>\\<rangle>;\n        lx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "moreover"], ["proof (state)\nthis:\n  pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>rx = \\<langle>\\<rangle>; lx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>rx = \\<langle>\\<rangle>;\n        lx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "obtain lb b where \"pass\\<^sub>2 \\<dots> = Node b lb Leaf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b lb.\n        pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n        \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pass\\<^sub>2_struct"], ["proof (prove)\nusing this:\n  \\<exists>l a.\n     pass\\<^sub>2 \\<langle>?hs1.0, ?x, ?hs\\<rangle> =\n     \\<langle>l, a, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>b lb.\n        pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n        \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>rx = \\<langle>\\<rangle>; lx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)\n 2. \\<And>x21 x22 x23.\n       \\<lbrakk>rx = \\<langle>\\<rangle>;\n        lx = \\<langle>x21, x22, x23\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> is_root (del_min h)", "ultimately"], ["proof (chain)\npicking this:\n  pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle>\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle>\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>\n\ngoal (1 subgoal):\n 1. is_root (del_min h)", "using assms"], ["proof (prove)\nusing this:\n  pass\\<^sub>1 lx = \\<langle>a, la, ra\\<rangle>\n  pass\\<^sub>2 \\<langle>a, la, ra\\<rangle> =\n  \\<langle>b, lb, \\<langle>\\<rangle>\\<rangle>\n  is_root h\n\ngoal (1 subgoal):\n 1. is_root (del_min h)", "by simp"], ["proof (state)\nthis:\n  is_root (del_min h)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>rx = \\<langle>\\<rangle>; lx = \\<langle>\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> is_root (del_min h)", "qed simp"], ["proof (state)\nthis:\n  is_root (del_min h)\n\ngoal (1 subgoal):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow> is_root (del_min h)", "qed simp"], ["", "lemma pass\\<^sub>1_len: \"len (pass\\<^sub>1 h) \\<le> len h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. len (pass\\<^sub>1 h) \\<le> len h", "by (induct h rule: pass\\<^sub>1.induct) simp_all"], ["", "fun exec :: \"'a :: linorder op \\<Rightarrow> 'a tree list \\<Rightarrow> 'a tree\" where\n\"exec Empty [] = Leaf\" | \n\"exec Del_min [h] = del_min h\" |\n\"exec (Insert x) [h] = insert x h\" |\n\"exec Merge [h1,h2] = merge h1 h2\""], ["", "fun T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 :: \"'a tree \\<Rightarrow> nat\" where\n  \"T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 Leaf = 1\"\n| \"T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 (Node _ _ Leaf) = 1\"\n| \"T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 (Node _ _ (Node _ _ ry)) = T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 ry + 1\""], ["", "fun T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 :: \"'a tree \\<Rightarrow> nat\" where\n  \"T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 Leaf = 1\"\n| \"T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 (Node _ _ rx) = T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 rx + 1\""], ["", "fun cost :: \"'a :: linorder op \\<Rightarrow> 'a tree list \\<Rightarrow> nat\" where\n  \"cost Empty [] = 1\"\n| \"cost Del_min [Leaf] = 1\"\n| \"cost Del_min [Node lx _  _] = T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 (pass\\<^sub>1 lx) + T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 lx\"\n| \"cost (Insert a) _ = 1\"\n| \"cost Merge _ = 1\""], ["", "fun U :: \"'a :: linorder op \\<Rightarrow> 'a tree list \\<Rightarrow> real\" where\n  \"U Empty [] = 1\"\n| \"U (Insert a) [h] = log 2 (size h + 1) + 1\"\n| \"U Del_min [h] = 3*log 2 (size h + 1) + 4\"\n| \"U Merge [h1,h2] = log 2 (size h1 + size h2 + 1) + 2\""], ["", "interpretation Amortized\nwhere arity = arity and exec = exec and cost = cost and inv = is_root \nand \\<Phi> = \\<Phi> and U = U"], ["proof (prove)\ngoal (1 subgoal):\n 1. Amortized arity exec is_root cost \\<Phi> U", "proof (standard, goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> is_root (exec f ss)\n 2. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 3. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (1 _ f)"], ["proof (state)\nthis:\n  \\<forall>s\\<in>set ss_. is_root s\n  length ss_ = arity f\n\ngoal (3 subgoals):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> is_root (exec f ss)\n 2. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 3. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "thus ?case"], ["proof (prove)\nusing this:\n  \\<forall>s\\<in>set ss_. is_root s\n  length ss_ = arity f\n\ngoal (1 subgoal):\n 1. is_root (exec f ss_)", "using is_root_insert is_root_del_min is_root_merge"], ["proof (prove)\nusing this:\n  \\<forall>s\\<in>set ss_. is_root s\n  length ss_ = arity f\n  is_root ?h \\<Longrightarrow> is_root (Pairing_Heap_Tree.insert ?x ?h)\n  is_root ?h \\<Longrightarrow> is_root (del_min ?h)\n  \\<lbrakk>is_root ?h1.0; is_root ?h2.0\\<rbrakk>\n  \\<Longrightarrow> is_root (merge ?h1.0 ?h2.0)\n\ngoal (1 subgoal):\n 1. is_root (exec f ss_)", "by (cases f) (auto simp: numeral_eq_Suc)"], ["proof (state)\nthis:\n  is_root (exec f ss_)\n\ngoal (2 subgoals):\n 1. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (2 s)"], ["proof (state)\nthis:\n  is_root s\n\ngoal (2 subgoals):\n 1. \\<And>s. is_root s \\<Longrightarrow> 0 \\<le> \\<Phi> s\n 2. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> \\<Phi> s", "by (induct s) simp_all"], ["proof (state)\nthis:\n  0 \\<le> \\<Phi> s\n\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "case (3 ss f)"], ["proof (state)\nthis:\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. \\<And>ss f.\n       \\<lbrakk>\\<forall>s\\<in>set ss. is_root s;\n        length ss = arity f\\<rbrakk>\n       \\<Longrightarrow> real (cost f ss) + \\<Phi> (exec f ss) -\n                         sum_list (map \\<Phi> ss)\n                         \\<le> U f ss", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "proof (cases f)"], ["proof (state)\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 4. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case Empty"], ["proof (state)\nthis:\n  f = Empty\n\ngoal (4 subgoals):\n 1. f = Empty \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 3. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 4. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "with 3"], ["proof (chain)\npicking this:\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n  f = Empty", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n  f = Empty\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by(auto)"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case (Insert x)"], ["proof (state)\nthis:\n  f = Insert x\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Insert x", "obtain h where \"ss = [h]\" \"is_root h\""], ["proof (prove)\nusing this:\n  f = Insert x\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>ss = [h]; is_root h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Insert x\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>ss = [h]; is_root h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ss = [h]\n  is_root h\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       f = Insert x2 \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss\n 2. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 3. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  ss = [h]\n  is_root h\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using Insert \\<Delta>\\<Phi>_insert 3"], ["proof (prove)\nusing this:\n  ss = [h]\n  is_root h\n  f = Insert x\n  is_root ?hp \\<Longrightarrow>\n  \\<Phi> (Pairing_Heap_Tree.insert ?x ?hp) - \\<Phi> ?hp\n  \\<le> log 2 (real (size ?hp + 1))\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by auto"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case [simp]: (Del_min)"], ["proof (state)\nthis:\n  f = Del_min\n\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Del_min", "obtain h where [simp]: \"ss = [h]\""], ["proof (prove)\nusing this:\n  f = Del_min\n\ngoal (1 subgoal):\n 1. (\\<And>h. ss = [h] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Del_min\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>h. ss = [h] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  ss = [h]\n\ngoal (2 subgoals):\n 1. f = Del_min \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "proof (cases h)"], ["proof (state)\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case [simp]: (Node lx x rx)"], ["proof (state)\nthis:\n  h = \\<langle>lx, x, rx\\<rangle>\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "have \"T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 (pass\\<^sub>1 lx) + T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 lx \\<le> len lx + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 (pass\\<^sub>1 lx) +\n    T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 lx\n    \\<le> len lx + 2", "by (induct lx rule: pass\\<^sub>1.induct) simp_all"], ["proof (state)\nthis:\n  T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 (pass\\<^sub>1 lx) +\n  T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 lx\n  \\<le> len lx + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "hence \"cost f ss \\<le> \\<dots>\""], ["proof (prove)\nusing this:\n  T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>2 (pass\\<^sub>1 lx) +\n  T\\<^sub>p\\<^sub>a\\<^sub>s\\<^sub>s\\<^sub>1 lx\n  \\<le> len lx + 2\n\ngoal (1 subgoal):\n 1. cost f ss \\<le> len lx + 2", "by simp"], ["proof (state)\nthis:\n  cost f ss \\<le> len lx + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "moreover"], ["proof (state)\nthis:\n  cost f ss \\<le> len lx + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "have \"\\<Phi> (del_min h) - \\<Phi> h \\<le> 3*log 2 (size h + 1) - len lx + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "proof (cases lx)"], ["proof (state)\ngoal (2 subgoals):\n 1. lx = \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n 2. \\<And>x21 x22 x23.\n       lx = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "case [simp]: (Node ly y ry)"], ["proof (state)\nthis:\n  lx = \\<langle>ly, y, ry\\<rangle>\n\ngoal (2 subgoals):\n 1. lx = \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n 2. \\<And>x21 x22 x23.\n       lx = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "have \"\\<Phi> (del_min h) - \\<Phi> h \\<le> 3*log 2 (size lx) - len lx + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size lx)) - real (len lx) + 2", "using  \\<Delta>\\<Phi>_del_min[of \"lx\" \"x\"] 3"], ["proof (prove)\nusing this:\n  lx \\<noteq> \\<langle>\\<rangle> \\<Longrightarrow>\n  \\<Phi> (del_min \\<langle>lx, x, \\<langle>\\<rangle>\\<rangle>) -\n  \\<Phi> \\<langle>lx, x, \\<langle>\\<rangle>\\<rangle>\n  \\<le> 3 * log 2 (real (size lx)) - real (len lx) + 2\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size lx)) - real (len lx) + 2", "by simp"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size lx)) - real (len lx) + 2\n\ngoal (2 subgoals):\n 1. lx = \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n 2. \\<And>x21 x22 x23.\n       lx = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "also"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size lx)) - real (len lx) + 2\n\ngoal (2 subgoals):\n 1. lx = \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n 2. \\<And>x21 x22 x23.\n       lx = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "have \"\\<dots> \\<le> 3*log 2 (size h + 1) - len lx + 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * log 2 (real (size lx)) - real (len lx) + 2\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "by fastforce"], ["proof (state)\nthis:\n  3 * log 2 (real (size lx)) - real (len lx) + 2\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n\ngoal (2 subgoals):\n 1. lx = \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n 2. \\<And>x21 x22 x23.\n       lx = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       \\<Phi> (del_min h) - \\<Phi> h\n       \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n\ngoal (1 subgoal):\n 1. \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "by blast"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n\ngoal (1 subgoal):\n 1. lx = \\<langle>\\<rangle> \\<Longrightarrow>\n    \\<Phi> (del_min h) - \\<Phi> h\n    \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "qed (insert 3, simp)"], ["proof (state)\nthis:\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n\ngoal (2 subgoals):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "ultimately"], ["proof (chain)\npicking this:\n  cost f ss \\<le> len lx + 2\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2", "show ?thesis"], ["proof (prove)\nusing this:\n  cost f ss \\<le> len lx + 2\n  \\<Phi> (del_min h) - \\<Phi> h\n  \\<le> 3 * log 2 (real (size h + 1)) - real (len lx) + 2\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by auto"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (1 subgoal):\n 1. h = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "qed simp"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "case [simp]: Merge"], ["proof (state)\nthis:\n  f = Merge\n\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "then"], ["proof (chain)\npicking this:\n  f = Merge", "obtain h1 h2 where [simp]: \"ss = [h1,h2]\" and 1: \"is_root h1\" \"is_root h2\""], ["proof (prove)\nusing this:\n  f = Merge\n\ngoal (1 subgoal):\n 1. (\\<And>h1 h2.\n        \\<lbrakk>ss = [h1, h2]; is_root h1; is_root h2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3"], ["proof (prove)\nusing this:\n  f = Merge\n  \\<forall>s\\<in>set ss. is_root s\n  length ss = arity f\n\ngoal (1 subgoal):\n 1. (\\<And>h1 h2.\n        \\<lbrakk>ss = [h1, h2]; is_root h1; is_root h2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: numeral_eq_Suc)"], ["proof (state)\nthis:\n  ss = [h1, h2]\n  is_root h1\n  is_root h2\n\ngoal (1 subgoal):\n 1. f = Merge \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "proof (cases h1)"], ["proof (state)\ngoal (2 subgoals):\n 1. h1 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case Leaf"], ["proof (state)\nthis:\n  h1 = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. h1 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  h1 = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by (cases h2) auto"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case h1: Node"], ["proof (state)\nthis:\n  h1 = \\<langle>x21_, x22_, x23_\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h1 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "proof (cases h2)"], ["proof (state)\ngoal (2 subgoals):\n 1. h2 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case Leaf"], ["proof (state)\nthis:\n  h2 = \\<langle>\\<rangle>\n\ngoal (2 subgoals):\n 1. h2 = \\<langle>\\<rangle> \\<Longrightarrow>\n    real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss\n 2. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "thus ?thesis"], ["proof (prove)\nusing this:\n  h2 = \\<langle>\\<rangle>\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "using h1"], ["proof (prove)\nusing this:\n  h2 = \\<langle>\\<rangle>\n  h1 = \\<langle>x21_, x22_, x23_\\<rangle>\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by simp"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "case h2: Node"], ["proof (state)\nthis:\n  h2 = \\<langle>x21_, x22_, x23_\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "have \"\\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2 \\<le> log 2 (real (size h1 + size h2)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n    \\<le> log 2 (real (size h1 + size h2)) + 1", "apply(rule \\<Delta>\\<Phi>_merge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. h1 = \\<langle>?hs1.0, ?x1.0, \\<langle>\\<rangle>\\<rangle>\n 2. h2 = \\<langle>?hs2.0, ?x2.0, \\<langle>\\<rangle>\\<rangle>", "using h1 h2 1"], ["proof (prove)\nusing this:\n  h1 = \\<langle>x21___, x22___, x23___\\<rangle>\n  h2 = \\<langle>x21_, x22_, x23_\\<rangle>\n  is_root h1\n  is_root h2\n\ngoal (2 subgoals):\n 1. h1 = \\<langle>?hs1.0, ?x1.0, \\<langle>\\<rangle>\\<rangle>\n 2. h2 = \\<langle>?hs2.0, ?x2.0, \\<langle>\\<rangle>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "also"], ["proof (state)\nthis:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2)) + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "have \"\\<dots> \\<le> log 2 (size h1 + size h2 + 1) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (real (size h1 + size h2)) + 1\n    \\<le> log 2 (real (size h1 + size h2 + 1)) + 1", "by (simp add: h1)"], ["proof (state)\nthis:\n  log 2 (real (size h1 + size h2)) + 1\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 1\n\ngoal (1 subgoal):\n 1. \\<And>x21 x22 x23.\n       h2 = \\<langle>x21, x22, x23\\<rangle> \\<Longrightarrow>\n       real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n       \\<le> U f ss", "finally"], ["proof (chain)\npicking this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Phi> (merge h1 h2) - \\<Phi> h1 - \\<Phi> h2\n  \\<le> log 2 (real (size h1 + size h2 + 1)) + 1\n\ngoal (1 subgoal):\n 1. real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n    \\<le> U f ss", "by(simp add: algebra_simps)"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (cost f ss) + \\<Phi> (exec f ss) - sum_list (map \\<Phi> ss)\n  \\<le> U f ss\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}