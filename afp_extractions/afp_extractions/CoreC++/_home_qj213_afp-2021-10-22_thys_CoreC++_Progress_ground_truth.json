{"file_name": "/home/qj213/afp-2021-10-22/thys/CoreC++/Progress.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/CoreC++", "problem_names": ["lemma final_refE:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Class C; final e;\n    \\<And>r. e = ref r \\<Longrightarrow> Q;\n    \\<And>r. e = Throw r \\<Longrightarrow> Q \\<rbrakk> \\<Longrightarrow> Q\"", "lemma finalRefE:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; final e;\n  e = null \\<Longrightarrow> Q;\n  \\<And>r. e = ref r \\<Longrightarrow> Q;\n  \\<And>r. e = Throw r \\<Longrightarrow> Q\\<rbrakk> \\<Longrightarrow> Q\"", "lemma subE:\n  \"\\<lbrakk> P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk> T = T'; \\<forall>C. T \\<noteq> Class C \\<rbrakk> \\<Longrightarrow> Q;\n     \\<And>C D. \\<lbrakk> T = Class C; T' = Class D; P \\<turnstile> Path C to D unique \\<rbrakk> \\<Longrightarrow> Q;\n     \\<And>C. \\<lbrakk> T = NT; T' = Class C \\<rbrakk> \\<Longrightarrow> Q \\<rbrakk> \\<Longrightarrow> Q\"", "lemma assumes wf:\"wf_prog wf_md P\"\n  and typeof:\" P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T'\"\n  and type:\"is_type P T\"\nshows sub_casts:\"P \\<turnstile> T' \\<le> T \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'\"", "lemmas WTrt'_induct = WTrt'_WTrts'.induct [split_format (complete)]\n  and WTrt'_inducts = WTrt'_WTrts'.inducts [split_format (complete)]", "lemma [iff]: \"P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 :' T\\<^sub>2 = (\\<exists>T\\<^sub>1. P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1 \\<and> P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2)\"", "lemma [iff]: \"P,E,h \\<turnstile> Val v :' T = (P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T)\"", "lemma [iff]: \"P,E,h \\<turnstile> Var V :' T = (E V = Some T)\"", "lemma wt_wt': \"P,E,h \\<turnstile> e : T \\<Longrightarrow> P,E,h \\<turnstile> e :' T\"\nand wts_wts': \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:'] Ts\"", "lemma wt'_wt: \"P,E,h \\<turnstile> e :' T \\<Longrightarrow> P,E,h \\<turnstile> e : T\"\nand wts'_wts: \"P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:] Ts\"", "lemmas WTrt_inducts2 = WTrt'_inducts [unfolded wt'_iff_wt wts'_iff_wts,\n  case_names WTrtNew WTrtDynCast WTrtStaticCast WTrtVal WTrtVar WTrtBinOp \n  WTrtLAss WTrtFAcc WTrtFAccNT WTrtFAss WTrtFAssNT WTrtCall WTrtStaticCall WTrtCallNT \n  WTrtInitBlock WTrtBlock WTrtSeq WTrtCond WTrtWhile WTrtThrow \n  WTrtNil WTrtCons, consumes 1]", "lemma mdc_leq_dyn_type:\n\"P,E,h \\<turnstile> e : T \\<Longrightarrow> \n  \\<forall>C a Cs D S. T = Class C \\<and> e = ref(a,Cs) \\<and> h a = Some(D,S) \\<longrightarrow> P \\<turnstile> D \\<preceq>\\<^sup>* C\"\nand \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n  \\<forall>T Ts' e es' C a Cs D S. Ts = T#Ts' \\<and> es = e#es' \\<and> \n                           T = Class C \\<and> e = ref(a,Cs) \\<and> h a = Some(D,S)\n      \\<longrightarrow> P \\<turnstile> D \\<preceq>\\<^sup>* C\"", "lemma appendPath_append_last:\n  assumes notempty:\"Ds \\<noteq> []\" \n  shows\"(Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = (Cs @\\<^sub>p Ds)\"", "theorem assumes wf: \"wwf_prog P\"\nshows progress: \"P,E,h \\<turnstile> e : T \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s'. P,E \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>)\"\nand \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es \\<rbrakk> \\<Longrightarrow> \\<exists>es' s'. P,E \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>)\""], "translations": [["", "lemma final_refE:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Class C; final e;\n    \\<And>r. e = ref r \\<Longrightarrow> Q;\n    \\<And>r. e = Throw r \\<Longrightarrow> Q \\<rbrakk> \\<Longrightarrow> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : Class C; final e;\n     \\<And>r. e = ref r \\<Longrightarrow> Q;\n     \\<And>r. e = Throw r \\<Longrightarrow> Q\\<rbrakk>\n    \\<Longrightarrow> Q", "by (simp add:final_def,auto,case_tac v,auto)"], ["", "lemma finalRefE:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; final e;\n  e = null \\<Longrightarrow> Q;\n  \\<And>r. e = ref r \\<Longrightarrow> Q;\n  \\<And>r. e = Throw r \\<Longrightarrow> Q\\<rbrakk> \\<Longrightarrow> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> Q; \\<And>r. e = ref r \\<Longrightarrow> Q;\n     \\<And>r. e = Throw r \\<Longrightarrow> Q\\<rbrakk>\n    \\<Longrightarrow> Q", "apply (cases T)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> Q; \\<And>r. e = ref r \\<Longrightarrow> Q;\n     \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Void\\<rbrakk>\n    \\<Longrightarrow> Q\n 2. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> Q; \\<And>r. e = ref r \\<Longrightarrow> Q;\n     \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Boolean\\<rbrakk>\n    \\<Longrightarrow> Q\n 3. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> Q; \\<And>r. e = ref r \\<Longrightarrow> Q;\n     \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Integer\\<rbrakk>\n    \\<Longrightarrow> Q\n 4. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> Q; \\<And>r. e = ref r \\<Longrightarrow> Q;\n     \\<And>r. e = Throw r \\<Longrightarrow> Q; T = NT\\<rbrakk>\n    \\<Longrightarrow> Q\n 5. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply (simp add:is_refT_def)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : NT; final e;\n     e = null \\<Longrightarrow> Q;\n     \\<And>a b. e = ref (a, b) \\<Longrightarrow> Q;\n     \\<And>a b. e = Throw (a, b) \\<Longrightarrow> Q; T = NT\\<rbrakk>\n    \\<Longrightarrow> Q\n 2. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply (simp add:final_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : NT;\n     (\\<exists>v. e = Val v) \\<or> (\\<exists>a b. e = Throw (a, b));\n     e = null \\<Longrightarrow> Q;\n     \\<And>a b. e = ref (a, b) \\<Longrightarrow> Q;\n     \\<And>a b. e = Throw (a, b) \\<Longrightarrow> Q; T = NT\\<rbrakk>\n    \\<Longrightarrow> Q\n 2. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply (erule disjE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : NT; e = null \\<Longrightarrow> Q;\n     \\<And>a b. e = ref (a, b) \\<Longrightarrow> Q;\n     \\<And>a b. e = Throw (a, b) \\<Longrightarrow> Q; T = NT;\n     \\<exists>v. e = Val v\\<rbrakk>\n    \\<Longrightarrow> Q\n 2. \\<lbrakk>P,E,h \\<turnstile> e : NT; e = null \\<Longrightarrow> Q;\n     \\<And>a b. e = ref (a, b) \\<Longrightarrow> Q;\n     \\<And>a b. e = Throw (a, b) \\<Longrightarrow> Q; T = NT;\n     \\<exists>a b. e = Throw (a, b)\\<rbrakk>\n    \\<Longrightarrow> Q\n 3. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply clarsimp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : NT; e = null \\<Longrightarrow> Q;\n     \\<And>a b. e = ref (a, b) \\<Longrightarrow> Q;\n     \\<And>a b. e = Throw (a, b) \\<Longrightarrow> Q; T = NT;\n     \\<exists>a b. e = Throw (a, b)\\<rbrakk>\n    \\<Longrightarrow> Q\n 2. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply (erule exE)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT; e = null \\<Longrightarrow> Q;\n        \\<And>a b. e = ref (a, b) \\<Longrightarrow> Q;\n        \\<And>a b. e = Throw (a, b) \\<Longrightarrow> Q; T = NT;\n        e = Throw (a, b)\\<rbrakk>\n       \\<Longrightarrow> Q\n 2. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n        e = null \\<Longrightarrow> Q;\n        \\<And>r. e = ref r \\<Longrightarrow> Q;\n        \\<And>r. e = Throw r \\<Longrightarrow> Q; T = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply (auto simp:final_def is_refT_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x5 v.\n       \\<lbrakk>v = Null \\<Longrightarrow> Q;\n        \\<And>a b. v = Ref (a, b) \\<Longrightarrow> Q; T = Class x5;\n        e = Val v;\n        P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n        \\<lfloor>Class x5\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> Q", "apply (case_tac v)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x5 v.\n       \\<lbrakk>v = Null \\<Longrightarrow> Q;\n        \\<And>a b. v = Ref (a, b) \\<Longrightarrow> Q; T = Class x5;\n        e = Val v;\n        P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n        \\<lfloor>Class x5\\<rfloor>;\n        v = Unit\\<rbrakk>\n       \\<Longrightarrow> Q\n 2. \\<And>x5 v.\n       \\<lbrakk>v = Null \\<Longrightarrow> Q;\n        \\<And>a b. v = Ref (a, b) \\<Longrightarrow> Q; T = Class x5;\n        e = Val v;\n        P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n        \\<lfloor>Class x5\\<rfloor>;\n        v = Null\\<rbrakk>\n       \\<Longrightarrow> Q\n 3. \\<And>x5 v x3.\n       \\<lbrakk>v = Null \\<Longrightarrow> Q;\n        \\<And>a b. v = Ref (a, b) \\<Longrightarrow> Q; T = Class x5;\n        e = Val v;\n        P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n        \\<lfloor>Class x5\\<rfloor>;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> Q\n 4. \\<And>x5 v x4.\n       \\<lbrakk>v = Null \\<Longrightarrow> Q;\n        \\<And>a b. v = Ref (a, b) \\<Longrightarrow> Q; T = Class x5;\n        e = Val v;\n        P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n        \\<lfloor>Class x5\\<rfloor>;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> Q\n 5. \\<And>x5 v x5a.\n       \\<lbrakk>v = Null \\<Longrightarrow> Q;\n        \\<And>a b. v = Ref (a, b) \\<Longrightarrow> Q; T = Class x5;\n        e = Val v;\n        P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n        \\<lfloor>Class x5\\<rfloor>;\n        v = Ref x5a\\<rbrakk>\n       \\<Longrightarrow> Q", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma subE:\n  \"\\<lbrakk> P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk> T = T'; \\<forall>C. T \\<noteq> Class C \\<rbrakk> \\<Longrightarrow> Q;\n     \\<And>C D. \\<lbrakk> T = Class C; T' = Class D; P \\<turnstile> Path C to D unique \\<rbrakk> \\<Longrightarrow> Q;\n     \\<And>C. \\<lbrakk> T = NT; T' = Class C \\<rbrakk> \\<Longrightarrow> Q \\<rbrakk> \\<Longrightarrow> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk>T = T'; \\<forall>C. T \\<noteq> Class C\\<rbrakk>\n     \\<Longrightarrow> Q;\n     \\<And>C D.\n        \\<lbrakk>T = Class C; T' = Class D;\n         P \\<turnstile> Path C to D unique\\<rbrakk>\n        \\<Longrightarrow> Q;\n     \\<And>C.\n        \\<lbrakk>T = NT; T' = Class C\\<rbrakk> \\<Longrightarrow> Q\\<rbrakk>\n    \\<Longrightarrow> Q", "apply(cases T')"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk>T = T'; \\<forall>C. T \\<noteq> Class C\\<rbrakk>\n     \\<Longrightarrow> Q;\n     \\<And>C D.\n        \\<lbrakk>T = Class C; T' = Class D;\n         P \\<turnstile> Path C to D unique\\<rbrakk>\n        \\<Longrightarrow> Q;\n     \\<And>C. \\<lbrakk>T = NT; T' = Class C\\<rbrakk> \\<Longrightarrow> Q;\n     T' = Void\\<rbrakk>\n    \\<Longrightarrow> Q\n 2. \\<lbrakk>P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk>T = T'; \\<forall>C. T \\<noteq> Class C\\<rbrakk>\n     \\<Longrightarrow> Q;\n     \\<And>C D.\n        \\<lbrakk>T = Class C; T' = Class D;\n         P \\<turnstile> Path C to D unique\\<rbrakk>\n        \\<Longrightarrow> Q;\n     \\<And>C. \\<lbrakk>T = NT; T' = Class C\\<rbrakk> \\<Longrightarrow> Q;\n     T' = Boolean\\<rbrakk>\n    \\<Longrightarrow> Q\n 3. \\<lbrakk>P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk>T = T'; \\<forall>C. T \\<noteq> Class C\\<rbrakk>\n     \\<Longrightarrow> Q;\n     \\<And>C D.\n        \\<lbrakk>T = Class C; T' = Class D;\n         P \\<turnstile> Path C to D unique\\<rbrakk>\n        \\<Longrightarrow> Q;\n     \\<And>C. \\<lbrakk>T = NT; T' = Class C\\<rbrakk> \\<Longrightarrow> Q;\n     T' = Integer\\<rbrakk>\n    \\<Longrightarrow> Q\n 4. \\<lbrakk>P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n     \\<lbrakk>T = T'; \\<forall>C. T \\<noteq> Class C\\<rbrakk>\n     \\<Longrightarrow> Q;\n     \\<And>C D.\n        \\<lbrakk>T = Class C; T' = Class D;\n         P \\<turnstile> Path C to D unique\\<rbrakk>\n        \\<Longrightarrow> Q;\n     \\<And>C. \\<lbrakk>T = NT; T' = Class C\\<rbrakk> \\<Longrightarrow> Q;\n     T' = NT\\<rbrakk>\n    \\<Longrightarrow> Q\n 5. \\<And>x5.\n       \\<lbrakk>P \\<turnstile> T \\<le> T'; is_type P T'; wf_prog wf_md P;\n        \\<lbrakk>T = T'; \\<forall>C. T \\<noteq> Class C\\<rbrakk>\n        \\<Longrightarrow> Q;\n        \\<And>C D.\n           \\<lbrakk>T = Class C; T' = Class D;\n            P \\<turnstile> Path C to D unique\\<rbrakk>\n           \\<Longrightarrow> Q;\n        \\<And>C. \\<lbrakk>T = NT; T' = Class C\\<rbrakk> \\<Longrightarrow> Q;\n        T' = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x5.\n       \\<lbrakk>P \\<turnstile> T \\<le> Class x5; is_class P x5;\n        wf_prog wf_md P;\n        \\<And>C D.\n           \\<lbrakk>T = Class C; x5 = D;\n            P \\<turnstile> Path C to D unique\\<rbrakk>\n           \\<Longrightarrow> Q;\n        \\<And>C. \\<lbrakk>T = NT; x5 = C\\<rbrakk> \\<Longrightarrow> Q;\n        T' = Class x5\\<rbrakk>\n       \\<Longrightarrow> Q", "apply(drule_tac T = \"T\" in widen_Class)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x5.\n       \\<lbrakk>P \\<turnstile> T \\<le> Class x5; is_class P x5;\n        \\<And>C D.\n           \\<lbrakk>T = Class C; x5 = D;\n            P \\<turnstile> Path C to D unique\\<rbrakk>\n           \\<Longrightarrow> Q;\n        \\<And>C. \\<lbrakk>T = NT; x5 = C\\<rbrakk> \\<Longrightarrow> Q;\n        T' = Class x5\\<rbrakk>\n       \\<Longrightarrow> is_class P (?C3 x5)\n 2. \\<And>x5.\n       \\<lbrakk>P \\<turnstile> T \\<le> Class x5; is_class P x5;\n        \\<And>C D.\n           \\<lbrakk>T = Class C; x5 = D;\n            P \\<turnstile> Path C to D unique\\<rbrakk>\n           \\<Longrightarrow> Q;\n        \\<And>C. \\<lbrakk>T = NT; x5 = C\\<rbrakk> \\<Longrightarrow> Q;\n        T' = Class x5;\n        P \\<turnstile> T \\<le> Class (?C3 x5) =\n        (T = NT \\<or>\n         (\\<exists>D.\n             T = Class D \\<and>\n             P \\<turnstile> Path D to ?C3 x5 unique))\\<rbrakk>\n       \\<Longrightarrow> Q", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma assumes wf:\"wf_prog wf_md P\"\n  and typeof:\" P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T'\"\n  and type:\"is_type P T\"\nshows sub_casts:\"P \\<turnstile> T' \\<le> T \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n    \\<exists>v'. P \\<turnstile> T casts v to v'", "proof(erule subE)"], ["proof (state)\ngoal (5 subgoals):\n 1. is_type P T\n 2. wf_prog ?wf_md P\n 3. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 4. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 5. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "from type"], ["proof (chain)\npicking this:\n  is_type P T", "show \"is_type P T\""], ["proof (prove)\nusing this:\n  is_type P T\n\ngoal (1 subgoal):\n 1. is_type P T", "."], ["proof (state)\nthis:\n  is_type P T\n\ngoal (4 subgoals):\n 1. wf_prog ?wf_md P\n 2. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 3. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 4. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. wf_prog ?wf_md P\n 2. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 3. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 4. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "from wf"], ["proof (chain)\npicking this:\n  wf_prog wf_md P", "show \"wf_prog wf_md P\""], ["proof (prove)\nusing this:\n  wf_prog wf_md P\n\ngoal (1 subgoal):\n 1. wf_prog wf_md P", "."], ["proof (state)\nthis:\n  wf_prog wf_md P\n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "assume \"T' = T\" and \"\\<forall>C. T' \\<noteq> Class C\""], ["proof (state)\nthis:\n  T' = T\n  \\<forall>C. T' \\<noteq> Class C\n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "thus \"\\<exists>v'. P \\<turnstile> T casts v to v'\""], ["proof (prove)\nusing this:\n  T' = T\n  \\<forall>C. T' \\<noteq> Class C\n\ngoal (1 subgoal):\n 1. \\<exists>v'. P \\<turnstile> T casts v to v'", "by(fastforce intro:casts_prim)"], ["proof (state)\nthis:\n  \\<exists>v'. P \\<turnstile> T casts v to v' \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "fix C D"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "assume T':\"T' = Class C\" and T:\"T = Class D\"\n    and path_unique:\"P \\<turnstile> Path C to D unique\""], ["proof (state)\nthis:\n  T' = Class C\n  T = Class D\n  P \\<turnstile> Path C to D unique\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "from T' typeof"], ["proof (chain)\npicking this:\n  T' = Class C\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>", "obtain a Cs where v:\"v = Ref(a,Cs)\" and last:\"last Cs = C\""], ["proof (prove)\nusing this:\n  T' = Class C\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs.\n        \\<lbrakk>v = Ref (a, Cs); last Cs = C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto dest!:typeof_Class_Subo)"], ["proof (state)\nthis:\n  v = Ref (a, Cs)\n  last Cs = C\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "from last path_unique"], ["proof (chain)\npicking this:\n  last Cs = C\n  P \\<turnstile> Path C to D unique", "obtain Cs' where \"P \\<turnstile> Path last Cs to D via Cs'\""], ["proof (prove)\nusing this:\n  last Cs = C\n  P \\<turnstile> Path C to D unique\n\ngoal (1 subgoal):\n 1. (\\<And>Cs'.\n        P \\<turnstile> Path last Cs to D via Cs'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto simp:path_unique_def path_via_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path last Cs to D via Cs' \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "hence \"P \\<turnstile> Class D casts Ref(a,Cs) to Ref(a,Cs@\\<^sub>pCs')\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path last Cs to D via Cs' \n\ngoal (1 subgoal):\n 1. P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs')", "by -(rule casts_ref,simp_all)"], ["proof (state)\nthis:\n  P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs') \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v' \n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "with T v"], ["proof (chain)\npicking this:\n  T = Class D\n  v = Ref (a, Cs)\n  P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs')", "show \"\\<exists>v'. P \\<turnstile> T casts v to v'\""], ["proof (prove)\nusing this:\n  T = Class D\n  v = Ref (a, Cs)\n  P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs') \n\ngoal (1 subgoal):\n 1. \\<exists>v'. P \\<turnstile> T casts v to v'", "by auto"], ["proof (state)\nthis:\n  \\<exists>v'. P \\<turnstile> T casts v to v' \n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "fix C"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "assume \"T' = NT\" and T:\"T = Class C\""], ["proof (state)\nthis:\n  T' = NT\n  T = Class C\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "with typeof"], ["proof (chain)\npicking this:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n  T' = NT\n  T = Class C", "have \"v = Null\""], ["proof (prove)\nusing this:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n  T' = NT\n  T = Class C\n\ngoal (1 subgoal):\n 1. v = Null", "by simp"], ["proof (state)\nthis:\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v'. P \\<turnstile> T casts v to v'", "with T"], ["proof (chain)\npicking this:\n  T = Class C\n  v = Null", "show \"\\<exists>v'. P \\<turnstile> T casts v to v'\""], ["proof (prove)\nusing this:\n  T = Class C\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<exists>v'. P \\<turnstile> T casts v to v'", "by(fastforce intro:casts_null)"], ["proof (state)\nthis:\n  \\<exists>v'. P \\<turnstile> T casts v to v' \n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Derivation of new induction scheme for well typing:\\<close>"], ["", "inductive\n  WTrt' :: \"[prog,env,heap,expr,     ty     ] \\<Rightarrow> bool\"\n        (\"_,_,_ \\<turnstile> _ :'' _\"   [51,51,51]50)\n  and WTrts':: \"[prog,env,heap,expr list,ty list] \\<Rightarrow> bool\"\n        (\"_,_,_ \\<turnstile> _ [:''] _\" [51,51,51]50)\n  for P :: prog\nwhere\n  \"is_class P C \\<Longrightarrow>  P,E,h \\<turnstile> new C :' Class C\"\n| \"\\<lbrakk>is_class P C; P,E,h \\<turnstile> e :' T; is_refT T\\<rbrakk> \n   \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\"\n| \"\\<lbrakk>is_class P C; P,E,h \\<turnstile> e :' T; is_refT T\\<rbrakk> \n   \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e :' Class C\"\n| \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T \\<Longrightarrow> P,E,h \\<turnstile> Val v :' T\"\n| \"E V = Some T  \\<Longrightarrow>  P,E,h \\<turnstile> Var V :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n    case bop of Eq \\<Rightarrow> T = Boolean\n    | Add \\<Rightarrow> T\\<^sub>1 = Integer \\<and> T\\<^sub>2 = Integer \\<and> T = Integer \\<rbrakk>\n   \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> e :' T' \\<^cancel>\\<open>V \\<noteq> This\\<close>; P \\<turnstile> T' \\<le> T \\<rbrakk>\n   \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' T\"\n| \"\\<lbrakk>P,E,h \\<turnstile> e :' Class C; Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk> \n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\"\n| \"P,E,h \\<turnstile> e :' NT \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\"\n| \"\\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Class C; Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n    P,E,h \\<turnstile> e\\<^sub>2 :' T'; P \\<turnstile> T' \\<le> T \\<rbrakk> \n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs}:=e\\<^sub>2 :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1:'NT; P,E,h \\<turnstile> e\\<^sub>2 :' T'; P \\<turnstile> T' \\<le> T \\<rbrakk> \n   \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs}:=e\\<^sub>2 :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Class C;  P \\<turnstile> C has least M = (Ts,T,m) via Cs;\n    P,E,h \\<turnstile> es [:'] Ts'; P \\<turnstile> Ts' [\\<le>] Ts \\<rbrakk>\n    \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>M(es) :' T\" \n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Class C'; P \\<turnstile> Path C' to C unique;\n    P \\<turnstile> C has least M = (Ts,T,m) via Cs; \n    P,E,h \\<turnstile> es [:'] Ts'; P \\<turnstile> Ts' [\\<le>] Ts \\<rbrakk>\n    \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>(C::)M(es) :' T\"\n| \"\\<lbrakk>P,E,h \\<turnstile> e :' NT; P,E,h \\<turnstile> es [:'] Ts\\<rbrakk> \\<Longrightarrow> P,E,h \\<turnstile> Call e Copt M es :' T\"\n| \"\\<lbrakk> P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T'; P,E(V\\<mapsto>T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2; P \\<turnstile> T' \\<le> T; is_type P T \\<rbrakk>\n   \\<Longrightarrow>  P,E,h \\<turnstile> {V:T := Val v; e\\<^sub>2} :' T\\<^sub>2\"\n| \"\\<lbrakk> P,E(V\\<mapsto>T),h \\<turnstile> e :' T'; \\<not> assigned V e; is_type P T \\<rbrakk>\n   \\<Longrightarrow>  P,E,h \\<turnstile> {V:T; e} :' T'\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1; P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2 \\<rbrakk>  \\<Longrightarrow>  P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 :' T\\<^sub>2\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Boolean;  P,E,h \\<turnstile> e\\<^sub>1:' T;  P,E,h \\<turnstile> e\\<^sub>2:' T \\<rbrakk>\n   \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Boolean;  P,E,h \\<turnstile> c:' T \\<rbrakk>\n   \\<Longrightarrow>  P,E,h \\<turnstile> while(e) c :' Void\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' T'; is_refT T'\\<rbrakk>  \\<Longrightarrow>  P,E,h \\<turnstile> throw e :' T\"\n\n| \"P,E,h \\<turnstile> [] [:'] []\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' T;  P,E,h \\<turnstile> es [:'] Ts \\<rbrakk> \\<Longrightarrow>  P,E,h \\<turnstile> e#es [:'] T#Ts\""], ["", "lemmas WTrt'_induct = WTrt'_WTrts'.induct [split_format (complete)]\n  and WTrt'_inducts = WTrt'_WTrts'.inducts [split_format (complete)]"], ["", "inductive_cases WTrt'_elim_cases[elim!]:\n  \"P,E,h \\<turnstile> V :=e :' T\""], ["", "text\\<open>... and some easy consequences:\\<close>"], ["", "lemma [iff]: \"P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 :' T\\<^sub>2 = (\\<exists>T\\<^sub>1. P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1 \\<and> P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2) =\n    (\\<exists>T\\<^sub>1.\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2)", "apply(rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2 \\<Longrightarrow>\n    \\<exists>T\\<^sub>1.\n       P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n       P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\n 2. \\<exists>T\\<^sub>1.\n       P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n       P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2 \\<Longrightarrow>\n    P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2", "apply (auto elim: WTrt'.cases intro!:WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [iff]: \"P,E,h \\<turnstile> Val v :' T = (P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> Val v :' T) =\n    (P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>)", "apply(rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. P,E,h \\<turnstile> Val v :' T \\<Longrightarrow>\n    P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n 2. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n    \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n    P,E,h \\<turnstile> Val v :' T", "apply (auto elim: WTrt'.cases intro!:WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [iff]: \"P,E,h \\<turnstile> Var V :' T = (E V = Some T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> Var V :' T) = (E V = \\<lfloor>T\\<rfloor>)", "apply(rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. P,E,h \\<turnstile> Var V :' T \\<Longrightarrow>\n    E V = \\<lfloor>T\\<rfloor>\n 2. E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n    P,E,h \\<turnstile> Var V :' T", "apply (auto elim: WTrt'.cases intro!:WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma wt_wt': \"P,E,h \\<turnstile> e : T \\<Longrightarrow> P,E,h \\<turnstile> e :' T\"\nand wts_wts': \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:'] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     P,E,h \\<turnstile> e :' T) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:'] Ts)", "proof (induct rule:WTrt_inducts)"], ["proof (state)\ngoal (21 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 2. \\<And>E h e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 3. \\<And>E h e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e :' Class C\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 :' T\n 7. \\<And>E V T h e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' T\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C; Cs \\<noteq> [];\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> e :' NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 :' Class C; Cs \\<noteq> [];\n         P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         P,E,h \\<turnstile> e\\<^sub>2 :' T';\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 :' T\nA total of 21 subgoals...", "case (WTrtBlock E V T h e T')"], ["proof (state)\nthis:\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  P,E(V \\<mapsto> T),h \\<turnstile> e :' T'\n  is_type P T\n\ngoal (21 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 2. \\<And>E h e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 3. \\<And>E h e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e :' Class C\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 :' T\n 7. \\<And>E V T h e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' T\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C; Cs \\<noteq> [];\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> e :' NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 :' Class C; Cs \\<noteq> [];\n         P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         P,E,h \\<turnstile> e\\<^sub>2 :' T';\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 :' T\nA total of 21 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  P,E(V \\<mapsto> T),h \\<turnstile> e :' T'\n  is_type P T\n\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> {V:T; e} :' T'", "apply(case_tac \"assigned V e\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n     P,E(V \\<mapsto> T),h \\<turnstile> e :' T'; is_type P T;\n     assigned V e\\<rbrakk>\n    \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'\n 2. \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n     P,E(V \\<mapsto> T),h \\<turnstile> e :' T'; is_type P T;\n     \\<not> assigned V e\\<rbrakk>\n    \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'", "apply(auto intro:WTrt'_WTrts'.intros \n          simp add:fun_upd_same assigned_def simp del:fun_upd_apply)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> {V:T; e} :' T'\n\ngoal (20 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 2. \\<And>E h e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 3. \\<And>E h e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e :' Class C\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 :' T\n 7. \\<And>E V T h e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' T\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C; Cs \\<noteq> [];\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> e :' NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} :' T\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 :' Class C; Cs \\<noteq> [];\n         P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         P,E,h \\<turnstile> e\\<^sub>2 :' T';\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 :' T\nA total of 20 subgoals...", "qed(auto intro:WTrt'_WTrts'.intros simp del:fun_upd_apply)"], ["", "lemma wt'_wt: \"P,E,h \\<turnstile> e :' T \\<Longrightarrow> P,E,h \\<turnstile> e : T\"\nand wts'_wts: \"P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e :' T \\<Longrightarrow>\n     P,E,h \\<turnstile> e : T) &&&\n    (P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:] Ts)", "apply (induct rule:WTrt'_inducts)"], ["proof (prove)\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e :' T;\n        P,E,h \\<turnstile> e : T; is_refT T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e :' T;\n        P,E,h \\<turnstile> e : T; is_refT T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> Var V : T;\n        P,E,h \\<turnstile> e :' T'; P,E,h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e :' Class C;\n        P,E,h \\<turnstile> e : Class C; Cs \\<noteq> [];\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e :' NT;\n        P,E,h \\<turnstile> e : NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 : Class C; Cs \\<noteq> [];\n         P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 :' T';\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\nA total of 22 subgoals...", "apply (fastforce intro: WTrt_WTrts.intros)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "corollary wt'_iff_wt: \"(P,E,h \\<turnstile> e :' T) = (P,E,h \\<turnstile> e : T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e :' T) = (P,E,h \\<turnstile> e : T)", "by(blast intro:wt_wt' wt'_wt)"], ["", "corollary wts'_iff_wts: \"(P,E,h \\<turnstile> es [:'] Ts) = (P,E,h \\<turnstile> es [:] Ts)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> es [:'] Ts) = (P,E,h \\<turnstile> es [:] Ts)", "by(blast intro:wts_wts' wts'_wts)"], ["", "lemmas WTrt_inducts2 = WTrt'_inducts [unfolded wt'_iff_wt wts'_iff_wts,\n  case_names WTrtNew WTrtDynCast WTrtStaticCast WTrtVal WTrtVar WTrtBinOp \n  WTrtLAss WTrtFAcc WTrtFAccNT WTrtFAss WTrtFAssNT WTrtCall WTrtStaticCall WTrtCallNT \n  WTrtInitBlock WTrtBlock WTrtSeq WTrtCond WTrtWhile WTrtThrow \n  WTrtNil WTrtCons, consumes 1]"], ["", "subsection\\<open>The theorem \\<open>progress\\<close>\\<close>"], ["", "lemma mdc_leq_dyn_type:\n\"P,E,h \\<turnstile> e : T \\<Longrightarrow> \n  \\<forall>C a Cs D S. T = Class C \\<and> e = ref(a,Cs) \\<and> h a = Some(D,S) \\<longrightarrow> P \\<turnstile> D \\<preceq>\\<^sup>* C\"\nand \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n  \\<forall>T Ts' e es' C a Cs D S. Ts = T#Ts' \\<and> es = e#es' \\<and> \n                           T = Class C \\<and> e = ref(a,Cs) \\<and> h a = Some(D,S)\n      \\<longrightarrow> P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     \\<forall>C a Cs D S.\n        T = Class C \\<and>\n        e = ref (a, Cs) \\<and>\n        h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n        P \\<turnstile> D \\<preceq>\\<^sup>* C) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     \\<forall>T Ts' e es' C a Cs D S.\n        Ts = T # Ts' \\<and>\n        es = e # es' \\<and>\n        T = Class C \\<and>\n        e = ref (a, Cs) \\<and>\n        h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n        P \\<turnstile> D \\<preceq>\\<^sup>* C)", "proof (induct rule:WTrt_inducts2)"], ["proof (state)\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "case (WTrtVal h v T E)"], ["proof (state)\nthis:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "have type:\"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>", "by fact"], ["proof (state)\nthis:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "{"], ["proof (state)\nthis:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "fix C a Cs D S"], ["proof (state)\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "assume \"T = Class C\" and \"Val v = ref(a,Cs)\" and \"h a = Some(D,S)\""], ["proof (state)\nthis:\n  T = Class C\n  Val v = ref (a, Cs)\n  h a = \\<lfloor>(D, S)\\<rfloor>\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "with type"], ["proof (chain)\npicking this:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n  T = Class C\n  Val v = ref (a, Cs)\n  h a = \\<lfloor>(D, S)\\<rfloor>", "have \"Subobjs P D Cs\" and \"C = last Cs\""], ["proof (prove)\nusing this:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n  T = Class C\n  Val v = ref (a, Cs)\n  h a = \\<lfloor>(D, S)\\<rfloor>\n\ngoal (1 subgoal):\n 1. Subobjs P D Cs &&& C = last Cs", "by (auto split:if_split_asm)"], ["proof (state)\nthis:\n  Subobjs P D Cs\n  C = last Cs\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "hence \"P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (prove)\nusing this:\n  Subobjs P D Cs\n  C = last Cs\n\ngoal (1 subgoal):\n 1. P \\<turnstile> D \\<preceq>\\<^sup>* C", "by simp (rule Subobjs_subclass)"], ["proof (state)\nthis:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>T = Class ?C2; Val v = ref (?a2, ?Cs2);\n   h ?a2 = \\<lfloor>(?D2, ?S2)\\<rfloor>\\<rbrakk>\n  \\<Longrightarrow> P \\<turnstile> ?D2 \\<preceq>\\<^sup>* ?C2\n\ngoal (22 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>h v T E.\n       P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n       \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Val v = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<forall>Ca a Cs D S.\n            Class C = Class Ca \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 22 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>T = Class ?C2; Val v = ref (?a2, ?Cs2);\n   h ?a2 = \\<lfloor>(?D2, ?S2)\\<rfloor>\\<rbrakk>\n  \\<Longrightarrow> P \\<turnstile> ?D2 \\<preceq>\\<^sup>* ?C2\n\ngoal (1 subgoal):\n 1. \\<forall>C a Cs D S.\n       T = Class C \\<and>\n       Val v = ref (a, Cs) \\<and>\n       h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n       P \\<turnstile> D \\<preceq>\\<^sup>* C", "by blast"], ["proof (state)\nthis:\n  \\<forall>C a Cs D S.\n     T = Class C \\<and>\n     Val v = ref (a, Cs) \\<and>\n     h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n     P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (21 subgoals):\n 1. \\<And>C E h.\n       is_class P C \\<Longrightarrow>\n       \\<forall>Ca a Cs D S.\n          Class C = Class Ca \\<and>\n          new C = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 2. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            Cast C e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 3. \\<And>C E h e T.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        is_refT T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>Ca a Cs D S.\n                            Class C = Class Ca \\<and>\n                            \\<lparr>C\\<rparr>e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* Ca\n 4. \\<And>E V T h.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       \\<forall>C a Cs D S.\n          T = Class C \\<and>\n          Var V = ref (a, Cs) \\<and>\n          h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n          P \\<turnstile> D \\<preceq>\\<^sup>* C\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<forall>C a Cs D S.\n           T\\<^sub>1 = Class C \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<forall>C a Cs D S.\n           T\\<^sub>2 = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 =\n                            ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 6. \\<And>E h V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<forall>C a Cs D S.\n           T = Class C \\<and>\n           Var V = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,h \\<turnstile> e : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Cs D S.\n                            T = Class C \\<and>\n                            V:=e = ref (a, Cs) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 7. \\<And>E h e C Cs F T.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 8. \\<And>E h e F Cs T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<forall>C a Cs D S.\n           NT = Class C \\<and>\n           e = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<bullet>F{Cs} = ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<forall>Ca a Cs D S.\n           Class C = Class Ca \\<and>\n           e\\<^sub>1 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* Ca;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<forall>C a Cs D S.\n           T' = Class C \\<and>\n           e\\<^sub>2 = ref (a, Cs) \\<and>\n           h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n           P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> \\<forall>C a Csa D S.\n                            T = Class C \\<and>\n                            e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                            ref (a, Csa) \\<and>\n                            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                            P \\<turnstile> D \\<preceq>\\<^sup>* C\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<forall>C a Cs D S.\n            NT = Class C \\<and>\n            e\\<^sub>1 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<forall>C a Cs D S.\n            T' = Class C \\<and>\n            e\\<^sub>2 = ref (a, Cs) \\<and>\n            h a = \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n            P \\<turnstile> D \\<preceq>\\<^sup>* C;\n         P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> \\<forall>C a Csa D S.\n                             T = Class C \\<and>\n                             e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 =\n                             ref (a, Csa) \\<and>\n                             h a =\n                             \\<lfloor>(D, S)\\<rfloor> \\<longrightarrow>\n                             P \\<turnstile> D \\<preceq>\\<^sup>* C\nA total of 21 subgoals...", "qed auto"], ["", "lemma appendPath_append_last:\n  assumes notempty:\"Ds \\<noteq> []\" \n  shows\"(Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = (Cs @\\<^sub>p Ds)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = Cs @\\<^sub>p Ds", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = Cs @\\<^sub>p Ds", "have \"last Cs = hd Ds \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\""], ["proof (prove)\ngoal (1 subgoal):\n 1. last Cs = hd Ds \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "proof(cases \"tl Ds = []\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds = []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n 2. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "case True"], ["proof (state)\nthis:\n  tl Ds = []\n\ngoal (2 subgoals):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds = []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n 2. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "assume last:\"last Cs = hd Ds\""], ["proof (state)\nthis:\n  last Cs = hd Ds\n\ngoal (2 subgoals):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds = []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n 2. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "with True notempty"], ["proof (chain)\npicking this:\n  tl Ds = []\n  Ds \\<noteq> []\n  last Cs = hd Ds", "have \"Ds = [last Cs]\""], ["proof (prove)\nusing this:\n  tl Ds = []\n  Ds \\<noteq> []\n  last Cs = hd Ds\n\ngoal (1 subgoal):\n 1. Ds = [last Cs]", "by (fastforce dest:hd_Cons_tl)"], ["proof (state)\nthis:\n  Ds = [last Cs]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds = []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n 2. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "hence \"last Ds = last Cs\""], ["proof (prove)\nusing this:\n  Ds = [last Cs]\n\ngoal (1 subgoal):\n 1. last Ds = last Cs", "by simp"], ["proof (state)\nthis:\n  last Ds = last Cs\n\ngoal (2 subgoals):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds = []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n 2. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "with True"], ["proof (chain)\npicking this:\n  tl Ds = []\n  last Ds = last Cs", "show ?thesis"], ["proof (prove)\nusing this:\n  tl Ds = []\n  last Ds = last Cs\n\ngoal (1 subgoal):\n 1. last (Cs @ tl Ds) = last Ds", "by simp"], ["proof (state)\nthis:\n  last (Cs @ tl Ds) = last Ds\n\ngoal (1 subgoal):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "case False"], ["proof (state)\nthis:\n  tl Ds \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "assume last:\"last Cs = hd Ds\""], ["proof (state)\nthis:\n  last Cs = hd Ds\n\ngoal (1 subgoal):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "from notempty False"], ["proof (chain)\npicking this:\n  Ds \\<noteq> []\n  tl Ds \\<noteq> []", "have \"last (tl Ds) = last Ds\""], ["proof (prove)\nusing this:\n  Ds \\<noteq> []\n  tl Ds \\<noteq> []\n\ngoal (1 subgoal):\n 1. last (tl Ds) = last Ds", "by -(drule hd_Cons_tl,drule_tac x=\"hd Ds\" in last_ConsR,simp)"], ["proof (state)\nthis:\n  last (tl Ds) = last Ds\n\ngoal (1 subgoal):\n 1. \\<lbrakk>last Cs = hd Ds; tl Ds \\<noteq> []\\<rbrakk>\n    \\<Longrightarrow> last (Cs @ tl Ds) = last Ds", "with False"], ["proof (chain)\npicking this:\n  tl Ds \\<noteq> []\n  last (tl Ds) = last Ds", "show ?thesis"], ["proof (prove)\nusing this:\n  tl Ds \\<noteq> []\n  last (tl Ds) = last Ds\n\ngoal (1 subgoal):\n 1. last (Cs @ tl Ds) = last Ds", "by simp"], ["proof (state)\nthis:\n  last (Cs @ tl Ds) = last Ds\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  last Cs = hd Ds \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n\ngoal (1 subgoal):\n 1. (Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = Cs @\\<^sub>p Ds", "thus ?thesis"], ["proof (prove)\nusing this:\n  last Cs = hd Ds \\<Longrightarrow> last (Cs @ tl Ds) = last Ds\n\ngoal (1 subgoal):\n 1. (Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = Cs @\\<^sub>p Ds", "by(simp add:appendPath_def)"], ["proof (state)\nthis:\n  (Cs @\\<^sub>p Ds) @\\<^sub>p [last Ds] = Cs @\\<^sub>p Ds\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem assumes wf: \"wwf_prog P\"\nshows progress: \"P,E,h \\<turnstile> e : T \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s'. P,E \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>)\"\nand \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es \\<rbrakk> \\<Longrightarrow> \\<exists>es' s'. P,E \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     (\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P,E \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>)) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     (\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P,E \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>))", "proof (induct rule:WTrt_inducts2)"], ["proof (state)\ngoal (22 subgoals):\n 1. \\<And>C E h l.\n       \\<lbrakk>is_class P C; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (new C) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (new C)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>new C,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "case (WTrtNew C E h)"], ["proof (state)\nthis:\n  is_class P C\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n\ngoal (22 subgoals):\n 1. \\<And>C E h l.\n       \\<lbrakk>is_class P C; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (new C) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (new C)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>new C,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<exists>a. h a = None\""], ["proof (state)\nthis:\n  \\<exists>a. h a = None\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtNew"], ["proof (chain)\npicking this:\n  is_class P C\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n  \\<exists>a. h a = None", "show ?thesis"], ["proof (prove)\nusing this:\n  is_class P C\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n  \\<exists>a. h a = None\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce del:exE intro!:RedNew simp:new_Addr_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<nexists>a. h a = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>a. h a = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not>(\\<exists>a. h a = None)\""], ["proof (state)\nthis:\n  \\<nexists>a. h a = None\n\ngoal (1 subgoal):\n 1. \\<nexists>a. h a = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtNew"], ["proof (chain)\npicking this:\n  is_class P C\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n  \\<nexists>a. h a = None", "show ?thesis"], ["proof (prove)\nusing this:\n  is_class P C\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n  \\<nexists>a. h a = None\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedNewFail simp add:new_Addr_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>new C,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (21 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "next"], ["proof (state)\ngoal (21 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "case (WTrtDynCast C E h e T)"], ["proof (state)\nthis:\n  is_class P C\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Cast C e)\n\ngoal (21 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "have wte: \"P,E,h \\<turnstile> e : T\" and refT: \"is_refT T\" and \"class\": \"is_class P C\"\n    and IH: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s'. P,E \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n    and D: \"\\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\" \n    and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"P \\<turnstile> E \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T &&& is_refT T &&& is_class P C) &&&\n    ((\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P,E \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>) &&&\n     \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>) &&&\n    P \\<turnstile> h \\<surd> &&& P \\<turnstile> E \\<surd>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  is_class P C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n\ngoal (21 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (21 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Cast C e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte refT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalRefE)"], ["proof (state)\ngoal (3 subgoals):\n 1. e = null \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 3. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = null\""], ["proof (state)\nthis:\n  e = null\n\ngoal (3 subgoals):\n 1. e = null \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 3. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  e = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedDynCastNull)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = ref r\""], ["proof (state)\nthis:\n  e = ref r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = ref r", "obtain a Cs where ref:\"e = ref(a,Cs)\""], ["proof (prove)\nusing this:\n  e = ref r\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs. e = ref (a, Cs) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases r) auto"], ["proof (state)\nthis:\n  e = ref (a, Cs)\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  e = ref (a, Cs)", "obtain D S where h:\"h a = Some(D,S)\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  e = ref (a, Cs)\n\ngoal (1 subgoal):\n 1. (\\<And>D S.\n        h a = \\<lfloor>(D, S)\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (cases \"P \\<turnstile> Path D to C unique\")"], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  P \\<turnstile> Path D to C unique\n\ngoal (2 subgoals):\n 1. P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path D to C unique", "obtain Cs' where path:\"P \\<turnstile> Path D to C via Cs'\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path D to C unique\n\ngoal (1 subgoal):\n 1. (\\<And>Cs'.\n        P \\<turnstile> Path D to C via Cs'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (fastforce simp:path_via_def path_unique_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path D to C via Cs' \n\ngoal (2 subgoals):\n 1. P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path D to C via Cs'", "obtain Ds where \"Ds = appendPath Cs Cs'\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path D to C via Cs' \n\ngoal (1 subgoal):\n 1. (\\<And>Ds.\n        Ds = Cs @\\<^sub>p Cs' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  Ds = Cs @\\<^sub>p Cs'\n\ngoal (2 subgoals):\n 1. P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with h path True ref"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  P \\<turnstile> Path D to C via Cs' \n  P \\<turnstile> Path D to C unique\n  e = ref (a, Cs)\n  Ds = Cs @\\<^sub>p Cs'", "show ?thesis"], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  P \\<turnstile> Path D to C via Cs' \n  P \\<turnstile> Path D to C unique\n  e = ref (a, Cs)\n  Ds = Cs @\\<^sub>p Cs'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce intro:RedDynCast)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> P \\<turnstile> Path D to C unique\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence path_not_unique:\"\\<not> P \\<turnstile> Path D to C unique\""], ["proof (prove)\nusing this:\n  \\<not> P \\<turnstile> Path D to C unique\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path D to C unique", "."], ["proof (state)\nthis:\n  \\<not> P \\<turnstile> Path D to C unique\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path D to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof(cases \"P \\<turnstile> Path last Cs to C unique\")"], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  P \\<turnstile> Path last Cs to C unique\n\ngoal (2 subgoals):\n 1. P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path last Cs to C unique", "obtain Cs' where \"P \\<turnstile> Path last Cs to C via Cs'\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path last Cs to C unique\n\ngoal (1 subgoal):\n 1. (\\<And>Cs'.\n        P \\<turnstile> Path last Cs to C via Cs'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto simp:path_via_def path_unique_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path last Cs to C via Cs' \n\ngoal (2 subgoals):\n 1. P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with True ref"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path last Cs to C unique\n  e = ref (a, Cs)\n  P \\<turnstile> Path last Cs to C via Cs'", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> Path last Cs to C unique\n  e = ref (a, Cs)\n  P \\<turnstile> Path last Cs to C via Cs' \n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedStaticUpDynCast)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> P \\<turnstile> Path last Cs to C unique\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence path_not_unique':\"\\<not> P \\<turnstile> Path last Cs to C unique\""], ["proof (prove)\nusing this:\n  \\<not> P \\<turnstile> Path last Cs to C unique\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path last Cs to C unique", "."], ["proof (state)\nthis:\n  \\<not> P \\<turnstile> Path last Cs to C unique\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> Path last Cs to C unique \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> P \\<turnstile> Path last Cs to C unique\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof(cases \"C \\<notin> set Cs\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     \\<not> C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> C \\<notin> set Cs\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     \\<not> C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<not> C \\<notin> set Cs", "obtain Ds Ds' where \"Cs = Ds@[C]@Ds'\""], ["proof (prove)\nusing this:\n  \\<not> C \\<notin> set Cs\n\ngoal (1 subgoal):\n 1. (\\<And>Ds Ds'.\n        Cs = Ds @ [C] @ Ds' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp:in_set_conv_decomp)"], ["proof (state)\nthis:\n  Cs = Ds @ [C] @ Ds'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     \\<not> C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "with ref"], ["proof (chain)\npicking this:\n  e = ref (a, Cs)\n  Cs = Ds @ [C] @ Ds'", "show ?thesis"], ["proof (prove)\nusing this:\n  e = ref (a, Cs)\n  Cs = Ds @ [C] @ Ds'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedStaticDownDynCast)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  C \\<notin> set Cs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> P \\<turnstile> Path last Cs to C unique;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>Cast C e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "with path_not_unique path_not_unique' h ref"], ["proof (chain)\npicking this:\n  \\<not> P \\<turnstile> Path D to C unique\n  \\<not> P \\<turnstile> Path last Cs to C unique\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  e = ref (a, Cs)\n  C \\<notin> set Cs", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> P \\<turnstile> Path D to C unique\n  \\<not> P \\<turnstile> Path last Cs to C unique\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  e = ref (a, Cs)\n  C \\<notin> set Cs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce intro:RedDynCastFail)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(blast intro!:red_reds.DynCastThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume nf: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from IH[OF hconf envconf De nf]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (blast intro:DynCastRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (20 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e None M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e None M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "next"], ["proof (state)\ngoal (20 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e None M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e None M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "case (WTrtStaticCast C E h e T)"], ["proof (state)\nthis:\n  is_class P C\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (\\<lparr>C\\<rparr>e)\n\ngoal (20 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e None M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e None M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "have wte: \"P,E,h \\<turnstile> e : T\" and refT: \"is_refT T\" and \"class\": \"is_class P C\"\n   and IH: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s'. P,E \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>\" \n    and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"P \\<turnstile> E \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T &&& is_refT T &&& is_class P C) &&&\n    ((\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P,E \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>) &&&\n     \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>) &&&\n    P \\<turnstile> h \\<surd> &&& P \\<turnstile> E \\<surd>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  is_class P C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n\ngoal (20 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e None M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e None M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (20 subgoals):\n 1. \\<And>C E h e T l.\n       \\<lbrakk>is_class P C; P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (\\<lparr>C\\<rparr>e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (\\<lparr>C\\<rparr>e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e None M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e None M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte refT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalRefE)"], ["proof (state)\ngoal (3 subgoals):\n 1. e = null \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 3. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = null\""], ["proof (state)\nthis:\n  e = null\n\ngoal (3 subgoals):\n 1. e = null \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 3. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with \"class\""], ["proof (chain)\npicking this:\n  is_class P C\n  e = null", "show ?case"], ["proof (prove)\nusing this:\n  is_class P C\n  e = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedStaticCastNull)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = ref r\""], ["proof (state)\nthis:\n  e = ref r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = ref r", "obtain a Cs where ref:\"e = ref(a,Cs)\""], ["proof (prove)\nusing this:\n  e = ref r\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs. e = ref (a, Cs) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases r) auto"], ["proof (state)\nthis:\n  e = ref (a, Cs)\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with wte wf"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  wwf_prog P\n  e = ref (a, Cs)", "have \"class\":\"is_class P (last Cs)\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  wwf_prog P\n  e = ref (a, Cs)\n\ngoal (1 subgoal):\n 1. is_class P (last Cs)", "by (auto intro:Subobj_last_isClass split:if_split_asm)"], ["proof (state)\nthis:\n  is_class P (last Cs)\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof(cases \"P \\<turnstile> (last Cs) \\<preceq>\\<^sup>* C\")"], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<turnstile> last Cs \\<preceq>\\<^sup>* C \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  P \\<turnstile> last Cs \\<preceq>\\<^sup>* C\n\ngoal (2 subgoals):\n 1. P \\<turnstile> last Cs \\<preceq>\\<^sup>* C \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with \"class\" wf"], ["proof (chain)\npicking this:\n  is_class P (last Cs)\n  wwf_prog P\n  P \\<turnstile> last Cs \\<preceq>\\<^sup>* C", "obtain Cs'  where \"P \\<turnstile> Path last Cs to C via Cs'\""], ["proof (prove)\nusing this:\n  is_class P (last Cs)\n  wwf_prog P\n  P \\<turnstile> last Cs \\<preceq>\\<^sup>* C\n\ngoal (1 subgoal):\n 1. (\\<And>Cs'.\n        P \\<turnstile> Path last Cs to C via Cs'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest:leq_implies_path)"], ["proof (state)\nthis:\n  P \\<turnstile> Path last Cs to C via Cs' \n\ngoal (2 subgoals):\n 1. P \\<turnstile> last Cs \\<preceq>\\<^sup>* C \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with True ref"], ["proof (chain)\npicking this:\n  P \\<turnstile> last Cs \\<preceq>\\<^sup>* C\n  e = ref (a, Cs)\n  P \\<turnstile> Path last Cs to C via Cs'", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> last Cs \\<preceq>\\<^sup>* C\n  e = ref (a, Cs)\n  P \\<turnstile> Path last Cs to C via Cs' \n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedStaticUpCast)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  (last Cs, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have notleq:\"\\<not> P \\<turnstile> last Cs \\<preceq>\\<^sup>* C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>*", "by fact"], ["proof (state)\nthis:\n  (last Cs, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (last Cs, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  (last Cs, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof(cases \"C \\<notin> set Cs\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     \\<not> C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> C \\<notin> set Cs\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     \\<not> C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<not> C \\<notin> set Cs", "obtain Ds Ds' where \"Cs = Ds@[C]@Ds'\""], ["proof (prove)\nusing this:\n  \\<not> C \\<notin> set Cs\n\ngoal (1 subgoal):\n 1. (\\<And>Ds Ds'.\n        Cs = Ds @ [C] @ Ds' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp:in_set_conv_decomp)"], ["proof (state)\nthis:\n  Cs = Ds @ [C] @ Ds'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     \\<not> C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "with ref"], ["proof (chain)\npicking this:\n  e = ref (a, Cs)\n  Cs = Ds @ [C] @ Ds'", "show ?thesis"], ["proof (prove)\nusing this:\n  e = ref (a, Cs)\n  Cs = Ds @ [C] @ Ds'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedStaticDownCast)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  C \\<notin> set Cs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(last Cs, C) \\<notin> (subcls1 P)\\<^sup>*;\n     C \\<notin> set Cs\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>", "with ref notleq"], ["proof (chain)\npicking this:\n  e = ref (a, Cs)\n  (last Cs, C) \\<notin> (subcls1 P)\\<^sup>*\n  C \\<notin> set Cs", "show ?thesis"], ["proof (prove)\nusing this:\n  e = ref (a, Cs)\n  (last Cs, C) \\<notin> (subcls1 P)\\<^sup>*\n  C \\<notin> set Cs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce intro:RedStaticCastFail)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(blast intro!:red_reds.StaticCastThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume nf: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from IH[OF hconf envconf De nf]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (blast intro:StaticCastRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>\\<lparr>C\\<rparr>e,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (19 subgoals):\n 1. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> Path C' to C unique;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e\n                  \\<lfloor>C\\<rfloor> M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "next"], ["proof (state)\ngoal (19 subgoals):\n 1. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> Path C' to C unique;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e\n                  \\<lfloor>C\\<rfloor> M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "case WTrtVal"], ["proof (state)\nthis:\n  P \\<turnstile> typeof\\<^bsub>h_\\<^esub> v_ = \\<lfloor>T_\\<rfloor>\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D> (Val v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Val v_)\n\ngoal (19 subgoals):\n 1. \\<And>h v T E l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Val v,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> Path C' to C unique;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e\n                  \\<lfloor>C\\<rfloor> M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> typeof\\<^bsub>h_\\<^esub> v_ = \\<lfloor>T_\\<rfloor>\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D> (Val v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Val v_)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E_ \\<turnstile> \\<langle>Val v_,(h_, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "by(simp add:final_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E_ \\<turnstile> \\<langle>Val v_,(h_, l)\\<rangle> \\<rightarrow>\n                       \\<langle>e',s'\\<rangle>\n\ngoal (18 subgoals):\n 1. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e es Ts Copt M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e Copt M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e Copt M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "next"], ["proof (state)\ngoal (18 subgoals):\n 1. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e es Ts Copt M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e Copt M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e Copt M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "case WTrtVar"], ["proof (state)\nthis:\n  E_ V_ = \\<lfloor>T_\\<rfloor>\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D> (Var V_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Var V_)\n\ngoal (18 subgoals):\n 1. \\<And>E V T h l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Var V,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e es Ts Copt M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (Call e Copt M es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>Call e Copt M es,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  E_ V_ = \\<lfloor>T_\\<rfloor>\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D> (Var V_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Var V_)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E_ \\<turnstile> \\<langle>Var V_,(h_, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedVar simp:hyper_isin_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E_ \\<turnstile> \\<langle>Var V_,(h_, l)\\<rangle> \\<rightarrow>\n                       \\<langle>e',s'\\<rangle>\n\ngoal (17 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                 \\<lfloor>T'\\<rfloor>;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n         e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "next"], ["proof (state)\ngoal (17 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                 \\<lfloor>T'\\<rfloor>;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n         e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "case (WTrtBinOp E h e1 T1 e2 T2 bop T')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (17 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                 \\<lfloor>T'\\<rfloor>;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n         e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "have bop:\"case bop of Eq \\<Rightarrow> T' = Boolean\n                      | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\"\n    and wte1:\"P,E,h \\<turnstile> e1 : T1\" and wte2:\"P,E,h \\<turnstile> e2 : T2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. case bop of Eq \\<Rightarrow> T' = Boolean\n    | Add \\<Rightarrow>\n        T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer &&&\n    P,E,h \\<turnstile> e1 : T1 &&& P,E,h \\<turnstile> e2 : T2", "by fact+"], ["proof (state)\nthis:\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P,E,h \\<turnstile> e1 : T1\n  P,E,h \\<turnstile> e2 : T2\n\ngoal (17 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                 \\<lfloor>T'\\<rfloor>;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n         e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v1"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume e1 [simp]:\"e1 = Val v1\""], ["proof (state)\nthis:\n  e1 = Val v1\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e2\""], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume e2 [simp]:\"e2 = Val v2\""], ["proof (state)\nthis:\n  e2 = Val v2\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (cases bop)"], ["proof (state)\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"bop = Eq\""], ["proof (state)\nthis:\n  bop = Eq\n\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  bop = Eq\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "using WTrtBinOp"], ["proof (prove)\nusing this:\n  bop = Eq\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedBinOp)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume Add:\"bop = Add\""], ["proof (state)\nthis:\n  bop = Add\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with e1 e2 wte1 wte2 bop"], ["proof (chain)\npicking this:\n  e1 = Val v1\n  e2 = Val v2\n  P,E,h \\<turnstile> e1 : T1\n  P,E,h \\<turnstile> e2 : T2\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  bop = Add", "obtain i1 i2 \n              where \"v1 = Intg i1\" and \"v2 = Intg i2\""], ["proof (prove)\nusing this:\n  e1 = Val v1\n  e2 = Val v2\n  P,E,h \\<turnstile> e1 : T1\n  P,E,h \\<turnstile> e2 : T2\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  bop = Add\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>v1 = Intg i1; v2 = Intg i2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto dest!:typeof_Integer)"], ["proof (state)\nthis:\n  v1 = Intg i1\n  v2 = Intg i2\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with Add"], ["proof (chain)\npicking this:\n  bop = Add\n  v1 = Intg i1\n  v2 = Intg i2", "obtain v where \"binop(bop,v1,v2) = Some v\""], ["proof (prove)\nusing this:\n  bop = Add\n  v1 = Intg i1\n  v2 = Intg i2\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        binop (bop, v1, v2) = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  binop (bop, v1, v2) = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with e1 e2"], ["proof (chain)\npicking this:\n  e1 = Val v1\n  e2 = Val v2\n  binop (bop, v1, v2) = \\<lfloor>v\\<rfloor>", "show ?thesis"], ["proof (prove)\nusing this:\n  e1 = Val v1\n  e2 = Val v2\n  binop (bop, v1, v2) = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce intro:RedBinOp)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e2 = Throw a\""], ["proof (state)\nthis:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(auto intro:red_reds.BinOpThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e2\""], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtBinOp"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro!:BinOpRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e1 = Throw r\""], ["proof (state)\nthis:\n  e1 = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro:red_reds.BinOpThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtBinOp"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  case bop of Eq \\<Rightarrow> T' = Boolean\n  | Add \\<Rightarrow> T1 = Integer \\<and> T2 = Integer \\<and> T' = Integer\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro:BinOpRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (16 subgoals):\n 1. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T h e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; e},\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "next"], ["proof (state)\ngoal (16 subgoals):\n 1. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T h e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; e},\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "case (WTrtLAss E h V T e T')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>Var V,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n\ngoal (16 subgoals):\n 1. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T h e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; e},\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "have wte:\"P,E,h \\<turnstile> e : T'\"\n    and wtvar:\"P,E,h \\<turnstile> Var V : T\"\n    and sub:\"P \\<turnstile> T' \\<le> T\"\n    and envconf:\"P \\<turnstile> E \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T' &&& P,E,h \\<turnstile> Var V : T) &&&\n    P \\<turnstile> T' \\<le> T &&& P \\<turnstile> E \\<surd>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> E \\<surd>\n\ngoal (16 subgoals):\n 1. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T h e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; e},\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "from envconf wtvar"], ["proof (chain)\npicking this:\n  P \\<turnstile> E \\<surd>\n  P,E,h \\<turnstile> Var V : T", "have type:\"is_type P T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> E \\<surd>\n  P,E,h \\<turnstile> Var V : T\n\ngoal (1 subgoal):\n 1. is_type P T", "by(auto simp:envconf_def)"], ["proof (state)\nthis:\n  is_type P T\n\ngoal (16 subgoals):\n 1. \\<And>E h V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>Var V,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T h e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>;\n             P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                 T) \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n         P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>{V:T; e},\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume fin:\"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from fin"], ["proof (chain)\npicking this:\n  final e", "show ?case"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume e:\"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from sub type wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> T' \\<le> T\n  is_type P T\n  wwf_prog P", "show ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> T' \\<le> T\n  is_type P T\n  wwf_prog P\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof(rule subE)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>V:=e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "assume eq:\"T' = T\" and \"\\<forall>C. T' \\<noteq> Class C\""], ["proof (state)\nthis:\n  T' = T\n  \\<forall>C. T' \\<noteq> Class C\n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>V:=e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "hence \"P \\<turnstile> T casts v to v\""], ["proof (prove)\nusing this:\n  T' = T\n  \\<forall>C. T' \\<noteq> Class C\n\ngoal (1 subgoal):\n 1. P \\<turnstile> T casts v to v", "by simp(rule casts_prim)"], ["proof (state)\nthis:\n  P \\<turnstile> T casts v to v \n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>V:=e,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with wte wtvar eq e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  T' = T\n  e = Val v\n  P \\<turnstile> T casts v to v", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  T' = T\n  e = Val v\n  P \\<turnstile> T casts v to v \n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(auto intro!:RedLAss)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "fix C D"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "assume T':\"T' = Class C\" and T:\"T = Class D\"\n          and path_unique:\"P \\<turnstile> Path C to D unique\""], ["proof (state)\nthis:\n  T' = Class C\n  T = Class D\n  P \\<turnstile> Path C to D unique\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "from wte e T'"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  e = Val v\n  T' = Class C", "obtain a Cs where ref:\"e = ref(a,Cs)\"\n          and last:\"last Cs = C\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  e = Val v\n  T' = Class C\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs.\n        \\<lbrakk>e = ref (a, Cs); last Cs = C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto dest!:typeof_Class_Subo)"], ["proof (state)\nthis:\n  e = ref (a, Cs)\n  last Cs = C\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "from path_unique"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path C to D unique", "obtain Cs' where path_via:\"P \\<turnstile> Path C to D via Cs'\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path C to D unique\n\ngoal (1 subgoal):\n 1. (\\<And>Cs'.\n        P \\<turnstile> Path C to D via Cs'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto simp:path_unique_def path_via_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path C to D via Cs' \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with last"], ["proof (chain)\npicking this:\n  last Cs = C\n  P \\<turnstile> Path C to D via Cs'", "have \"P \\<turnstile> Class D casts Ref(a,Cs) to Ref(a,Cs@\\<^sub>pCs')\""], ["proof (prove)\nusing this:\n  last Cs = C\n  P \\<turnstile> Path C to D via Cs' \n\ngoal (1 subgoal):\n 1. P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs')", "by (fastforce intro:casts_ref simp:path_via_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs') \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with wte wtvar T ref"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  T = Class D\n  e = ref (a, Cs)\n  P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs')", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  T = Class D\n  e = ref (a, Cs)\n  P \\<turnstile> Class D casts Ref (a, Cs) to Ref (a, Cs @\\<^sub>p Cs') \n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(auto intro!:RedLAss)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "fix C"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "assume T':\"T' = NT\" and T:\"T = Class C\""], ["proof (state)\nthis:\n  T' = NT\n  T = Class C\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with wte e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  e = Val v\n  T' = NT\n  T = Class C", "have null:\"e = null\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  e = Val v\n  T' = NT\n  T = Class C\n\ngoal (1 subgoal):\n 1. e = null", "by auto"], ["proof (state)\nthis:\n  e = null\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "have \"P \\<turnstile> Class C casts Null to Null\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> Class C casts Null to Null", "by -(rule casts_null)"], ["proof (state)\nthis:\n  P \\<turnstile> Class C casts Null to Null \n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>V:=e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with wte wtvar T null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  T = Class C\n  e = null\n  P \\<turnstile> Class C casts Null to Null", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  P,E,h \\<turnstile> Var V : T\n  T = Class C\n  e = null\n  P \\<turnstile> Class C casts Null to Null \n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(auto intro!:RedLAss)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.LAssThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtLAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>Var V,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>Var V,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro:LAssRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (15 subgoals):\n 1. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1;;\n         e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "next"], ["proof (state)\ngoal (15 subgoals):\n 1. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1;;\n         e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "case (WTrtFAcc E h e C Cs F T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n\ngoal (15 subgoals):\n 1. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1;;\n         e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "have wte: \"P,E,h \\<turnstile> e : Class C\" \n    and field: \"P \\<turnstile> C has least F:T via Cs\"\n    and notemptyCs:\"Cs \\<noteq> []\"\n    and hconf: \"P \\<turnstile> h \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : Class C &&&\n     P \\<turnstile> C has least F:T via Cs) &&&\n    Cs \\<noteq> [] &&& P \\<turnstile> h \\<surd>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P \\<turnstile> C has least F:T via Cs\n  Cs \\<noteq> []\n  P \\<turnstile> h \\<surd>\n\ngoal (15 subgoals):\n 1. \\<And>E h e C Cs F T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>e\\<^sub>1;;\n         e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule final_refE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume e: \"e = ref r\""], ["proof (state)\nthis:\n  e = ref r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = ref r", "obtain a Cs' where ref:\"e = ref(a,Cs')\""], ["proof (prove)\nusing this:\n  e = ref r\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs'.\n        e = ref (a, Cs') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases r) auto"], ["proof (state)\nthis:\n  e = ref (a, Cs')\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  e = ref (a, Cs')", "obtain D S where h:\"h a = Some(D,S)\" and suboD:\"Subobjs P D Cs'\"\n        and last:\"last Cs' = C\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  e = ref (a, Cs')\n\ngoal (1 subgoal):\n 1. (\\<And>D S.\n        \\<lbrakk>h a = \\<lfloor>(D, S)\\<rfloor>; Subobjs P D Cs';\n         last Cs' = C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce split:if_split_asm)"], ["proof (state)\nthis:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Cs'\n  last Cs' = C\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from field"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least F:T via Cs", "obtain Bs fs ms\n        where \"class\": \"class P (last Cs) = Some(Bs,fs,ms)\"\n        and fs:\"map_of fs F = Some T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least F:T via Cs\n\ngoal (1 subgoal):\n 1. (\\<And>Bs fs ms.\n        \\<lbrakk>class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>;\n         map_of fs F = \\<lfloor>T\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce simp:LeastFieldDecl_def FieldDecls_def)"], ["proof (state)\nthis:\n  class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  map_of fs F = \\<lfloor>T\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "obtain Ds where Ds:\"Ds = Cs'@\\<^sub>pCs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Ds.\n        Ds = Cs' @\\<^sub>p Cs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  Ds = Cs' @\\<^sub>p Cs\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with notemptyCs \"class\""], ["proof (chain)\npicking this:\n  Cs \\<noteq> []\n  class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Ds = Cs' @\\<^sub>p Cs", "have class':\"class P (last Ds) = Some(Bs,fs,ms)\""], ["proof (prove)\nusing this:\n  Cs \\<noteq> []\n  class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Ds = Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>", "by (drule_tac Cs'=\"Cs'\" in appendPath_last) simp"], ["proof (state)\nthis:\n  class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from field suboD last Ds wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least F:T via Cs\n  Subobjs P D Cs'\n  last Cs' = C\n  Ds = Cs' @\\<^sub>p Cs\n  wwf_prog P", "have subo:\"Subobjs P D Ds\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least F:T via Cs\n  Subobjs P D Cs'\n  last Cs' = C\n  Ds = Cs' @\\<^sub>p Cs\n  wwf_prog P\n\ngoal (1 subgoal):\n 1. Subobjs P D Ds", "by(fastforce intro:Subobjs_appendPath simp:LeastFieldDecl_def FieldDecls_def)"], ["proof (state)\nthis:\n  Subobjs P D Ds\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with hconf h"], ["proof (chain)\npicking this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Ds", "have \"P,h \\<turnstile> (D,S) \\<surd>\""], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Ds\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (D, S) \\<surd>", "by (auto simp:hconf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> (D, S) \\<surd>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with class' subo"], ["proof (chain)\npicking this:\n  class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Subobjs P D Ds\n  P,h \\<turnstile> (D, S) \\<surd>", "obtain fs' where S:\"(Ds,fs') \\<in> S\"\n        and \"P,h \\<turnstile> fs' (:\\<le>) map_of fs\""], ["proof (prove)\nusing this:\n  class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Subobjs P D Ds\n  P,h \\<turnstile> (D, S) \\<surd>\n\ngoal (1 subgoal):\n 1. (\\<And>fs'.\n        \\<lbrakk>(Ds, fs') \\<in> S;\n         P,h \\<turnstile> fs' (:\\<le>) map_of fs\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "apply (auto simp:oconf_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>fs'.\n                \\<lbrakk>(Ds, fs') \\<in> S;\n                 P,h \\<turnstile> fs' (:\\<le>) map_of fs\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>; Subobjs P D Ds;\n     \\<forall>Cs.\n        Subobjs P D Cs \\<longrightarrow> (\\<exists>!fs'. (Cs, fs') \\<in> S);\n     \\<forall>Cs fs'.\n        (Cs, fs') \\<in> S \\<longrightarrow>\n        Subobjs P D Cs \\<and>\n        (\\<exists>fs.\n            (\\<exists>Bs ms.\n                class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>) \\<and>\n            P,h \\<turnstile> fs' (:\\<le>) map_of fs)\\<rbrakk>\n    \\<Longrightarrow> thesis", "apply (erule_tac x=\"Ds\" in allE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>fs'.\n                \\<lbrakk>(Ds, fs') \\<in> S;\n                 P,h \\<turnstile> fs' (:\\<le>) map_of fs\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>; Subobjs P D Ds;\n     \\<forall>Cs fs'.\n        (Cs, fs') \\<in> S \\<longrightarrow>\n        Subobjs P D Cs \\<and>\n        (\\<exists>fs.\n            (\\<exists>Bs ms.\n                class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>) \\<and>\n            P,h \\<turnstile> fs' (:\\<le>) map_of fs);\n     Subobjs P D Ds \\<longrightarrow>\n     (\\<exists>!fs'. (Ds, fs') \\<in> S)\\<rbrakk>\n    \\<Longrightarrow> thesis", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>fs'.\n       \\<lbrakk>\\<And>fs'.\n                   \\<lbrakk>(Ds, fs') \\<in> S;\n                    P,h \\<turnstile> fs' (:\\<le>) map_of fs\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>;\n        \\<forall>Cs fs'.\n           (Cs, fs') \\<in> S \\<longrightarrow>\n           Subobjs P D Cs \\<and>\n           (\\<exists>fs.\n               (\\<exists>Bs ms.\n                   class P (last Cs) =\n                   \\<lfloor>(Bs, fs, ms)\\<rfloor>) \\<and>\n               P,h \\<turnstile> fs' (:\\<le>) map_of fs);\n        (Ds, fs') \\<in> S;\n        \\<forall>y y'.\n           (Ds, y) \\<in> S \\<and> (Ds, y') \\<in> S \\<longrightarrow>\n           y = y'\\<rbrakk>\n       \\<Longrightarrow> thesis", "apply (erule_tac x=\"Ds\" in allE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>fs'.\n       \\<lbrakk>\\<And>fs'.\n                   \\<lbrakk>(Ds, fs') \\<in> S;\n                    P,h \\<turnstile> fs' (:\\<le>) map_of fs\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>;\n        (Ds, fs') \\<in> S;\n        \\<forall>y y'.\n           (Ds, y) \\<in> S \\<and> (Ds, y') \\<in> S \\<longrightarrow> y = y';\n        \\<forall>fs'.\n           (Ds, fs') \\<in> S \\<longrightarrow>\n           Subobjs P D Ds \\<and>\n           (\\<exists>fs.\n               (\\<exists>Bs ms.\n                   class P (last Ds) =\n                   \\<lfloor>(Bs, fs, ms)\\<rfloor>) \\<and>\n               P,h \\<turnstile> fs' (:\\<le>) map_of fs)\\<rbrakk>\n       \\<Longrightarrow> thesis", "apply (erule_tac x=\"fs'\" in allE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>fs'.\n       \\<lbrakk>\\<And>fs'.\n                   \\<lbrakk>(Ds, fs') \\<in> S;\n                    P,h \\<turnstile> fs' (:\\<le>) map_of fs\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>;\n        (Ds, fs') \\<in> S;\n        \\<forall>fs'.\n           (Ds, fs') \\<in> S \\<longrightarrow>\n           Subobjs P D Ds \\<and>\n           (\\<exists>fs.\n               (\\<exists>Bs ms.\n                   class P (last Ds) =\n                   \\<lfloor>(Bs, fs, ms)\\<rfloor>) \\<and>\n               P,h \\<turnstile> fs' (:\\<le>) map_of fs);\n        \\<forall>y'.\n           (Ds, fs') \\<in> S \\<and> (Ds, y') \\<in> S \\<longrightarrow>\n           fs' = y'\\<rbrakk>\n       \\<Longrightarrow> thesis", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (Ds, fs') \\<in> S\n  P,h \\<turnstile> fs' (:\\<le>) map_of fs\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with fs"], ["proof (chain)\npicking this:\n  map_of fs F = \\<lfloor>T\\<rfloor>\n  (Ds, fs') \\<in> S\n  P,h \\<turnstile> fs' (:\\<le>) map_of fs", "obtain v where \"fs' F = Some v\""], ["proof (prove)\nusing this:\n  map_of fs F = \\<lfloor>T\\<rfloor>\n  (Ds, fs') \\<in> S\n  P,h \\<turnstile> fs' (:\\<le>) map_of fs\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        fs' F = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (fastforce simp:fconf_def)"], ["proof (state)\nthis:\n  fs' F = \\<lfloor>v\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with h last Ds S"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  Ds = Cs' @\\<^sub>p Cs\n  (Ds, fs') \\<in> S\n  fs' F = \\<lfloor>v\\<rfloor>", "have \"P,E \\<turnstile> \\<langle>(ref (a,Cs'))\\<bullet>F{Cs}, (h,l)\\<rangle> \\<rightarrow> \\<langle>Val v,(h,l)\\<rangle>\""], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  Ds = Cs' @\\<^sub>p Cs\n  (Ds, fs') \\<in> S\n  fs' F = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs},\n                      (h, l)\\<rangle> \\<rightarrow>\n                     \\<langle>Val v,(h, l)\\<rangle>", "by (fastforce intro:RedFAcc)"], ["proof (state)\nthis:\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs},\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v,(h, l)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with ref"], ["proof (chain)\npicking this:\n  e = ref (a, Cs')\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs},\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v,(h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e = ref (a, Cs')\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs},\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.FAccThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAcc"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro!:FAccRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (14 subgoals):\n 1. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n         else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "next"], ["proof (state)\ngoal (14 subgoals):\n 1. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n         else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "case (WTrtFAccNT E h e F Cs T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n\ngoal (14 subgoals):\n 1. \\<And>E h e F Cs T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{Cs})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>1,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e\\<^sub>2,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n         else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\"  \\<comment> \\<open>@{term e} is @{term null} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def intro: RedFAccNull red_reds.FAccThrow \n                  dest!:typeof_NT)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>@{term e} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<bullet>F{Cs}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{Cs})\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro:FAccRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<bullet>F{Cs},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (13 subgoals):\n 1. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>c,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>while (e) c,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "next"], ["proof (state)\ngoal (13 subgoals):\n 1. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>c,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>while (e) c,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "case (WTrtFAss E h e\\<^sub>1 C Cs F T e\\<^sub>2 T')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n\ngoal (13 subgoals):\n 1. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>c,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>while (e) c,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "have wte1:\"P,E,h \\<turnstile> e\\<^sub>1 : Class C\"\n    and wte2:\"P,E,h \\<turnstile> e\\<^sub>2 : T'\"\n    and field:\"P \\<turnstile> C has least F:T via Cs\" \n    and notemptyCs:\"Cs \\<noteq> []\"\n    and sub:\"P \\<turnstile> T' \\<le> T\"\n    and hconf:\"P \\<turnstile> h \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e\\<^sub>1 : Class C &&&\n     P,E,h \\<turnstile> e\\<^sub>2 : T' &&&\n     P \\<turnstile> C has least F:T via Cs) &&&\n    Cs \\<noteq> [] &&&\n    P \\<turnstile> T' \\<le> T &&& P \\<turnstile> h \\<surd>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  P \\<turnstile> C has least F:T via Cs\n  Cs \\<noteq> []\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n\ngoal (13 subgoals):\n 1. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>c,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>while (e) c,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "from field wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least F:T via Cs\n  wwf_prog P", "have type:\"is_type P T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least F:T via Cs\n  wwf_prog P\n\ngoal (1 subgoal):\n 1. is_type P T", "by(rule least_field_is_type)"], ["proof (state)\nthis:\n  is_type P T\n\ngoal (13 subgoals):\n 1. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>c,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>while (e) c,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>1\""], ["proof (state)\nthis:\n  final e\\<^sub>1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  final e\\<^sub>1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule final_refE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e\\<^sub>1 = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e\\<^sub>1 = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume e1: \"e\\<^sub>1 = ref r\""], ["proof (state)\nthis:\n  e\\<^sub>1 = ref r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e\\<^sub>1 = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>2\""], ["proof (state)\nthis:\n  final e\\<^sub>2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume e2:\"e\\<^sub>2 = Val v\""], ["proof (state)\nthis:\n  e\\<^sub>2 = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from e1"], ["proof (chain)\npicking this:\n  e\\<^sub>1 = ref r", "obtain a Cs' where ref:\"e\\<^sub>1 = ref(a,Cs')\""], ["proof (prove)\nusing this:\n  e\\<^sub>1 = ref r\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs'.\n        e\\<^sub>1 = ref (a, Cs') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases r) auto"], ["proof (state)\nthis:\n  e\\<^sub>1 = ref (a, Cs')\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with wte1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  e\\<^sub>1 = ref (a, Cs')", "obtain D S where h:\"h a = Some(D,S)\" \n            and suboD:\"Subobjs P D Cs'\" and last:\"last Cs' = C\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  e\\<^sub>1 = ref (a, Cs')\n\ngoal (1 subgoal):\n 1. (\\<And>D S.\n        \\<lbrakk>h a = \\<lfloor>(D, S)\\<rfloor>; Subobjs P D Cs';\n         last Cs' = C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce split:if_split_asm)"], ["proof (state)\nthis:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Cs'\n  last Cs' = C\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from field"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least F:T via Cs", "obtain Bs fs ms\n            where \"class\": \"class P (last Cs) = Some(Bs,fs,ms)\"\n            and fs:\"map_of fs F = Some T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least F:T via Cs\n\ngoal (1 subgoal):\n 1. (\\<And>Bs fs ms.\n        \\<lbrakk>class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>;\n         map_of fs F = \\<lfloor>T\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce simp:LeastFieldDecl_def FieldDecls_def)"], ["proof (state)\nthis:\n  class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  map_of fs F = \\<lfloor>T\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "obtain Ds where Ds:\"Ds = Cs'@\\<^sub>pCs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Ds.\n        Ds = Cs' @\\<^sub>p Cs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  Ds = Cs' @\\<^sub>p Cs\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with notemptyCs \"class\""], ["proof (chain)\npicking this:\n  Cs \\<noteq> []\n  class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Ds = Cs' @\\<^sub>p Cs", "have class':\"class P (last Ds) = Some(Bs,fs,ms)\""], ["proof (prove)\nusing this:\n  Cs \\<noteq> []\n  class P (last Cs) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Ds = Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>", "by (drule_tac Cs'=\"Cs'\" in appendPath_last) simp"], ["proof (state)\nthis:\n  class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from field suboD last Ds wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least F:T via Cs\n  Subobjs P D Cs'\n  last Cs' = C\n  Ds = Cs' @\\<^sub>p Cs\n  wwf_prog P", "have subo:\"Subobjs P D Ds\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least F:T via Cs\n  Subobjs P D Cs'\n  last Cs' = C\n  Ds = Cs' @\\<^sub>p Cs\n  wwf_prog P\n\ngoal (1 subgoal):\n 1. Subobjs P D Ds", "by(fastforce intro:Subobjs_appendPath \n              simp:LeastFieldDecl_def FieldDecls_def)"], ["proof (state)\nthis:\n  Subobjs P D Ds\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with hconf h"], ["proof (chain)\npicking this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Ds", "have \"P,h \\<turnstile> (D,S) \\<surd>\""], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Ds\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (D, S) \\<surd>", "by (auto simp:hconf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> (D, S) \\<surd>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with class' subo"], ["proof (chain)\npicking this:\n  class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Subobjs P D Ds\n  P,h \\<turnstile> (D, S) \\<surd>", "obtain fs' where S:\"(Ds,fs') \\<in> S\""], ["proof (prove)\nusing this:\n  class P (last Ds) = \\<lfloor>(Bs, fs, ms)\\<rfloor>\n  Subobjs P D Ds\n  P,h \\<turnstile> (D, S) \\<surd>\n\ngoal (1 subgoal):\n 1. (\\<And>fs'.\n        (Ds, fs') \\<in> S \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp:oconf_def)"], ["proof (state)\nthis:\n  (Ds, fs') \\<in> S\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e\\<^sub>2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "from sub type wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> T' \\<le> T\n  is_type P T\n  wwf_prog P", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> T' \\<le> T\n  is_type P T\n  wwf_prog P\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof(rule subE)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "assume eq:\"T' = T\" and \"\\<forall>C. T' \\<noteq> Class C\""], ["proof (state)\nthis:\n  T' = T\n  \\<forall>C. T' \\<noteq> Class C\n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "hence \"P \\<turnstile> T casts v to v\""], ["proof (prove)\nusing this:\n  T' = T\n  \\<forall>C. T' \\<noteq> Class C\n\ngoal (1 subgoal):\n 1. P \\<turnstile> T casts v to v", "by simp(rule casts_prim)"], ["proof (state)\nthis:\n  P \\<turnstile> T casts v to v \n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with h last field Ds notemptyCs S eq"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  P \\<turnstile> C has least F:T via Cs\n  Ds = Cs' @\\<^sub>p Cs\n  Cs \\<noteq> []\n  (Ds, fs') \\<in> S\n  T' = T\n  P \\<turnstile> T casts v to v", "have \"P,E \\<turnstile> \\<langle>(ref (a,Cs'))\\<bullet>F{Cs}:=(Val v), (h,l)\\<rangle> \\<rightarrow> \n              \\<langle>Val v, (h(a \\<mapsto> (D,insert (Ds,fs'(F\\<mapsto>v)) (S -  {(Ds,fs')}))),l)\\<rangle>\""], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  P \\<turnstile> C has least F:T via Cs\n  Ds = Cs' @\\<^sub>p Cs\n  Cs \\<noteq> []\n  (Ds, fs') \\<in> S\n  T' = T\n  P \\<turnstile> T casts v to v \n\ngoal (1 subgoal):\n 1. P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                      (h, l)\\<rangle> \\<rightarrow>\n                     \\<langle>Val v,\n                      (h(a \\<mapsto>\n                       (D, insert (Ds, fs'(F \\<mapsto> v))\n                            (S - {(Ds, fs')}))),\n                       l)\\<rangle>", "by (fastforce intro:RedFAss)"], ["proof (state)\nthis:\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v,\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>T' = T; \\<forall>C. T' \\<noteq> Class C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n     (h, l)\\<rangle> \\<rightarrow>\n    \\<langle>e',s'\\<rangle>\n 2. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with ref e2"], ["proof (chain)\npicking this:\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v,\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v,\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "fix C' D'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "assume T':\"T' = Class C'\" and T:\"T = Class D'\"\n            and path_unique:\"P \\<turnstile> Path C' to D' unique\""], ["proof (state)\nthis:\n  T' = Class C'\n  T = Class D'\n  P \\<turnstile> Path C' to D' unique\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "from wte2 e2 T'"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  e\\<^sub>2 = Val v\n  T' = Class C'", "obtain a' Cs'' where ref2:\"e\\<^sub>2 = ref(a',Cs'')\"\n              and last':\"last Cs'' = C'\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  e\\<^sub>2 = Val v\n  T' = Class C'\n\ngoal (1 subgoal):\n 1. (\\<And>a' Cs''.\n        \\<lbrakk>e\\<^sub>2 = ref (a', Cs''); last Cs'' = C'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto dest!:typeof_Class_Subo)"], ["proof (state)\nthis:\n  e\\<^sub>2 = ref (a', Cs'')\n  last Cs'' = C'\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "from path_unique"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path C' to D' unique", "obtain Ds' where \"P \\<turnstile> Path C' to D' via Ds'\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path C' to D' unique\n\ngoal (1 subgoal):\n 1. (\\<And>Ds'.\n        P \\<turnstile> Path C' to D' via Ds'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto simp:path_via_def path_unique_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path C' to D' via Ds' \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with last'"], ["proof (chain)\npicking this:\n  last Cs'' = C'\n  P \\<turnstile> Path C' to D' via Ds'", "have casts:\"P \\<turnstile> Class D' casts Ref(a',Cs'') to Ref(a',Cs''@\\<^sub>pDs')\""], ["proof (prove)\nusing this:\n  last Cs'' = C'\n  P \\<turnstile> Path C' to D' via Ds' \n\ngoal (1 subgoal):\n 1. P \\<turnstile> Class\n                    D' casts Ref (a', Cs'') to Ref (a', Cs'' @\\<^sub>p Ds')", "by (fastforce intro:casts_ref simp:path_via_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Class\n                  D' casts Ref (a', Cs'') to Ref (a', Cs'' @\\<^sub>p Ds') \n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "obtain v' where \"v' = Ref(a',Cs''@\\<^sub>pDs')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        v' = Ref (a', Cs'' @\\<^sub>p Ds') \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  v' = Ref (a', Cs'' @\\<^sub>p Ds')\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with h last field Ds notemptyCs S ref e2 ref2 T casts"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  P \\<turnstile> C has least F:T via Cs\n  Ds = Cs' @\\<^sub>p Cs\n  Cs \\<noteq> []\n  (Ds, fs') \\<in> S\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  e\\<^sub>2 = ref (a', Cs'')\n  T = Class D'\n  P \\<turnstile> Class\n                  D' casts Ref (a', Cs'') to Ref (a', Cs'' @\\<^sub>p Ds') \n  v' = Ref (a', Cs'' @\\<^sub>p Ds')", "have \"P,E \\<turnstile> \\<langle>(ref (a,Cs'))\\<bullet>F{Cs}:=(Val v), (h,l)\\<rangle> \\<rightarrow> \n                        \\<langle>Val v',(h(a \\<mapsto> (D,insert (Ds,fs'(F\\<mapsto>v'))(S-{(Ds,fs')}))),l)\\<rangle>\""], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  P \\<turnstile> C has least F:T via Cs\n  Ds = Cs' @\\<^sub>p Cs\n  Cs \\<noteq> []\n  (Ds, fs') \\<in> S\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  e\\<^sub>2 = ref (a', Cs'')\n  T = Class D'\n  P \\<turnstile> Class\n                  D' casts Ref (a', Cs'') to Ref (a', Cs'' @\\<^sub>p Ds') \n  v' = Ref (a', Cs'' @\\<^sub>p Ds')\n\ngoal (1 subgoal):\n 1. P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                      (h, l)\\<rangle> \\<rightarrow>\n                     \\<langle>Val v',\n                      (h(a \\<mapsto>\n                       (D, insert (Ds, fs'(F \\<mapsto> v'))\n                            (S - {(Ds, fs')}))),\n                       l)\\<rangle>", "by (fastforce intro:RedFAss)"], ["proof (state)\nthis:\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v',\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v'))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>C D.\n       \\<lbrakk>T' = Class C; T = Class D;\n        P \\<turnstile> Path C to D unique\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with ref e2"], ["proof (chain)\npicking this:\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v',\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v'))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v',\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v'))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "fix C'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "assume T':\"T' = NT\" and T:\"T = Class C'\""], ["proof (state)\nthis:\n  T' = NT\n  T = Class C'\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "from e2 wte2 T'"], ["proof (chain)\npicking this:\n  e\\<^sub>2 = Val v\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  T' = NT", "have null:\"e\\<^sub>2 = null\""], ["proof (prove)\nusing this:\n  e\\<^sub>2 = Val v\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  T' = NT\n\ngoal (1 subgoal):\n 1. e\\<^sub>2 = null", "by auto"], ["proof (state)\nthis:\n  e\\<^sub>2 = null\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "have casts:\"P \\<turnstile> Class C' casts Null to Null\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> Class C' casts Null to Null", "by -(rule casts_null)"], ["proof (state)\nthis:\n  P \\<turnstile> Class C' casts Null to Null \n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "obtain v' where \"v' = Null\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v'. v' = Null \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  v' = Null\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with h last field Ds notemptyCs S ref e2 null T casts"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  P \\<turnstile> C has least F:T via Cs\n  Ds = Cs' @\\<^sub>p Cs\n  Cs \\<noteq> []\n  (Ds, fs') \\<in> S\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  e\\<^sub>2 = null\n  T = Class C'\n  P \\<turnstile> Class C' casts Null to Null \n  v' = Null", "have \"P,E \\<turnstile> \\<langle>(ref (a,Cs'))\\<bullet>F{Cs}:=(Val v), (h,l)\\<rangle> \\<rightarrow> \n                  \\<langle>Val v', (h(a \\<mapsto> (D,insert (Ds,fs'(F\\<mapsto>v')) (S -  {(Ds,fs')}))),l)\\<rangle>\""], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  last Cs' = C\n  P \\<turnstile> C has least F:T via Cs\n  Ds = Cs' @\\<^sub>p Cs\n  Cs \\<noteq> []\n  (Ds, fs') \\<in> S\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  e\\<^sub>2 = null\n  T = Class C'\n  P \\<turnstile> Class C' casts Null to Null \n  v' = Null\n\ngoal (1 subgoal):\n 1. P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                      (h, l)\\<rangle> \\<rightarrow>\n                     \\<langle>Val v',\n                      (h(a \\<mapsto>\n                       (D, insert (Ds, fs'(F \\<mapsto> v'))\n                            (S - {(Ds, fs')}))),\n                       l)\\<rangle>", "by (fastforce intro:RedFAss)"], ["proof (state)\nthis:\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v',\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v'))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>T' = NT; T = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>", "with ref e2"], ["proof (chain)\npicking this:\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v',\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v'))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>1 = ref (a, Cs')\n  e\\<^sub>2 = Val v\n  P,E \\<turnstile> \\<langle>ref (a, Cs')\\<bullet>F{Cs} := Val v,\n                    (h, l)\\<rangle> \\<rightarrow>\n                   \\<langle>Val v',\n                    (h(a \\<mapsto>\n                     (D, insert (Ds, fs'(F \\<mapsto> v'))\n                          (S - {(Ds, fs')}))),\n                     l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e\\<^sub>2 = Throw r\""], ["proof (state)\nthis:\n  e\\<^sub>2 = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>2 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>2 = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "using e1"], ["proof (prove)\nusing this:\n  e\\<^sub>2 = Throw r\n  e\\<^sub>1 = ref r__\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.FAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>2\""], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAss e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  e\\<^sub>1 = ref r\n  \\<not> final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  e\\<^sub>1 = ref r\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro!:FAssRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e\\<^sub>1 = Throw r\""], ["proof (state)\nthis:\n  e\\<^sub>1 = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e\\<^sub>1 = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>1 = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.FAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>1\""], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  Cs \\<noteq> []\n  P \\<turnstile> C has least F:T via Cs\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (blast intro!:FAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (12 subgoals):\n 1. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e T' T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>throw e,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "next"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e T' T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>throw e,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "case (WTrtFAssNT E h e\\<^sub>1 e\\<^sub>2 T' T F Cs)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n\ngoal (12 subgoals):\n 1. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h e T' T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P,E \\<turnstile> \\<langle>throw e,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume e1: \"final e\\<^sub>1\"  \\<comment> \\<open>@{term e\\<^sub>1} is @{term null} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\\<^sub>1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>2\"  \\<comment> \\<open>@{term e\\<^sub>2} is @{term Val} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\\<^sub>2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAssNT e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  final e\\<^sub>1\n  final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  final e\\<^sub>1\n  final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def intro:RedFAssNull red_reds.FAssThrow1 \n                                         red_reds.FAssThrow2 dest!:typeof_NT)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume  \"\\<not> final e\\<^sub>2\" \\<comment> \\<open>@{term e\\<^sub>2} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAssNT e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  final e\\<^sub>1\n  \\<not> final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  final e\\<^sub>1\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce simp:final_def intro!:red_reds.FAssRed2 red_reds.FAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>1\" \\<comment> \\<open>@{term e\\<^sub>1} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtFAssNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce intro:FAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (11 subgoals):\n 1. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h l.\n        \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>[],\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "next"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h l.\n        \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>[],\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "case (WTrtCall E h e C M Ts T pns body Cs es Ts')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e None M es)\n\ngoal (11 subgoals):\n 1. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h l.\n        \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>[],\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "have wte: \"P,E,h \\<turnstile> e : Class C\"\n    and \"method\":\"P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\"\n    and wtes: \"P,E,h \\<turnstile> es [:] Ts'\"and sub: \"P \\<turnstile> Ts' [\\<le>] Ts\"\n    and IHes: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n             \\<Longrightarrow> \\<exists>es' s'. P,E \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>\"\n    and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"P \\<turnstile> E \\<surd>\" \n    and D: \"\\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((P,E,h \\<turnstile> e : Class C &&&\n      P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs) &&&\n     P,E,h \\<turnstile> es [:] Ts' &&& P \\<turnstile> Ts' [\\<le>] Ts) &&&\n    ((\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P,E \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>) &&&\n     P \\<turnstile> h \\<surd>) &&&\n    P \\<turnstile> E \\<surd> &&&\n    \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n\ngoal (11 subgoals):\n 1. \\<And>E h e C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e None M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e None M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 10. \\<And>E h l.\n        \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>[],\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume final:\"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule final_refE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume ref: \"e = ref r\""], ["proof (state)\nthis:\n  e = ref r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume es: \"\\<exists>vs. es = map Val vs\""], ["proof (state)\nthis:\n  \\<exists>vs. es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from ref"], ["proof (chain)\npicking this:\n  e = ref r", "obtain a Cs' where ref:\"e = ref(a,Cs')\""], ["proof (prove)\nusing this:\n  e = ref r\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs'.\n        e = ref (a, Cs') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases r) auto"], ["proof (state)\nthis:\n  e = ref (a, Cs')\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  e = ref (a, Cs')", "obtain D S where h:\"h a = Some(D,S)\" and suboD:\"Subobjs P D Cs'\"\n          and last:\"last Cs' = C\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  e = ref (a, Cs')\n\ngoal (1 subgoal):\n 1. (\\<And>D S.\n        \\<lbrakk>h a = \\<lfloor>(D, S)\\<rfloor>; Subobjs P D Cs';\n         last Cs' = C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce split:if_split_asm)"], ["proof (state)\nthis:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  Subobjs P D Cs'\n  last Cs' = C\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from wte ref h"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  e = ref (a, Cs')\n  h a = \\<lfloor>(D, S)\\<rfloor>", "have subcls:\"P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  e = ref (a, Cs')\n  h a = \\<lfloor>(D, S)\\<rfloor>\n\ngoal (1 subgoal):\n 1. P \\<turnstile> D \\<preceq>\\<^sup>* C", "by -(drule mdc_leq_dyn_type,auto)"], ["proof (state)\nthis:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from \"method\""], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs", "have has:\"P \\<turnstile> C has M = (Ts,T,pns,body) via Cs\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n\ngoal (1 subgoal):\n 1. P \\<turnstile> C has M = (Ts, T, pns, body) via Cs", "by(rule has_least_method_has_method)"], ["proof (state)\nthis:\n  P \\<turnstile> C has M = (Ts, T, pns, body) via Cs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from es"], ["proof (chain)\npicking this:\n  \\<exists>vs. es = map Val vs", "obtain vs where vs:\"es = map Val vs\""], ["proof (prove)\nusing this:\n  \\<exists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. (\\<And>vs. es = map Val vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "obtain Cs'' Ts'' T' pns' body' where \n          ass:\"P \\<turnstile> (D,Cs'@\\<^sub>pCs) selects M = (Ts'',T',pns',body') via Cs'' \\<and>\n           length Ts'' = length pns' \\<and> length vs = length pns' \\<and> P \\<turnstile> T' \\<le> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Ts'' T' pns' body' Cs''.\n        P \\<turnstile> (D,Cs' @\\<^sub>p\n                          Cs) selects M = (Ts'', T', pns',\n     body') via Cs'' \\<and>\n        length Ts'' = length pns' \\<and>\n        length vs = length pns' \\<and>\n        P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof (cases \"\\<exists>Ts'' T' pns' body' Ds. P \\<turnstile> D has least M = (Ts'',T',pns',body') via Ds\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  \\<exists>Ts'' T' pns' body' Ds.\n     P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  \\<exists>Ts'' T' pns' body' Ds.\n     P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds", "obtain Ts'' T' pns' body' Cs'' \n            where least:\"P \\<turnstile> D has least M = (Ts'',T',pns',body') via Cs''\""], ["proof (prove)\nusing this:\n  \\<exists>Ts'' T' pns' body' Ds.\n     P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n\ngoal (1 subgoal):\n 1. (\\<And>Ts'' T' pns' body' Cs''.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Cs'' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  P \\<turnstile> D has least M = (Ts'', T', pns', body') via Cs''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "hence select:\"P \\<turnstile> (D,Cs'@\\<^sub>pCs) selects M = (Ts'',T',pns',body') via Cs''\""], ["proof (prove)\nusing this:\n  P \\<turnstile> D has least M = (Ts'', T', pns', body') via Cs''\n\ngoal (1 subgoal):\n 1. P \\<turnstile> (D,Cs' @\\<^sub>p\n                      Cs) selects M = (Ts'', T', pns', body') via Cs''", "by(rule dyn_unique)"], ["proof (state)\nthis:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from subcls least wf has"], ["proof (chain)\npicking this:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n  P \\<turnstile> D has least M = (Ts'', T', pns', body') via Cs''\n  wwf_prog P\n  P \\<turnstile> C has M = (Ts, T, pns, body) via Cs", "have \"Ts = Ts''\" and leq:\"P \\<turnstile> T' \\<le> T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n  P \\<turnstile> D has least M = (Ts'', T', pns', body') via Cs''\n  wwf_prog P\n  P \\<turnstile> C has M = (Ts, T, pns, body) via Cs\n\ngoal (1 subgoal):\n 1. Ts = Ts'' &&& P \\<turnstile> T' \\<le> T", "by -(drule leq_method_subtypes,simp_all,blast)+"], ["proof (state)\nthis:\n  Ts = Ts''\n  P \\<turnstile> T' \\<le> T\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "hence \"length Ts = length Ts''\""], ["proof (prove)\nusing this:\n  Ts = Ts''\n  P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. length Ts = length Ts''", "by (simp add:list_all2_iff)"], ["proof (state)\nthis:\n  length Ts = length Ts''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with sub"], ["proof (chain)\npicking this:\n  P \\<turnstile> Ts' [\\<le>] Ts\n  length Ts = length Ts''", "have \"length Ts' = length Ts''\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Ts' [\\<le>] Ts\n  length Ts = length Ts''\n\ngoal (1 subgoal):\n 1. length Ts' = length Ts''", "by (simp add:list_all2_iff)"], ["proof (state)\nthis:\n  length Ts' = length Ts''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with WTrts_same_length[OF wtes] vs"], ["proof (chain)\npicking this:\n  length es = length Ts'\n  es = map Val vs\n  length Ts' = length Ts''", "have length:\"length vs = length Ts''\""], ["proof (prove)\nusing this:\n  length es = length Ts'\n  es = map Val vs\n  length Ts' = length Ts''\n\ngoal (1 subgoal):\n 1. length vs = length Ts''", "by simp"], ["proof (state)\nthis:\n  length vs = length Ts''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from has_least_wf_mdecl[OF wf least]"], ["proof (chain)\npicking this:\n  wf_mdecl wwf_mdecl P (last Cs'') (M, Ts'', T', pns', body')", "have lengthParams:\"length Ts'' = length pns'\""], ["proof (prove)\nusing this:\n  wf_mdecl wwf_mdecl P (last Cs'') (M, Ts'', T', pns', body')\n\ngoal (1 subgoal):\n 1. length Ts'' = length pns'", "by (simp add:wf_mdecl_def)"], ["proof (state)\nthis:\n  length Ts'' = length pns'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with length"], ["proof (chain)\npicking this:\n  length vs = length Ts''\n  length Ts'' = length pns'", "have \"length vs = length pns'\""], ["proof (prove)\nusing this:\n  length vs = length Ts''\n  length Ts'' = length pns'\n\ngoal (1 subgoal):\n 1. length vs = length pns'", "by simp"], ["proof (state)\nthis:\n  length vs = length pns'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<exists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with select lengthParams leq"], ["proof (chain)\npicking this:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n  length Ts'' = length pns'\n  P \\<turnstile> T' \\<le> T\n  length vs = length pns'", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n  length Ts'' = length pns'\n  P \\<turnstile> T' \\<le> T\n  length vs = length pns'\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n  length Ts'' = length pns'\n  P \\<turnstile> T' \\<le> T\n  length vs = length pns'\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (?Ts'', ?T', ?pns',\n                                     ?body') via ?Cs'' \\<and>\n  length ?Ts'' = length ?pns' \\<and>\n  length vs = length ?pns' \\<and>\n  P \\<turnstile> ?T' \\<le> T \\<Longrightarrow>\n  thesis\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  \\<nexists>Ts'' T' pns' body' Ds.\n     P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "hence non_dyn:\"\\<forall>Ts'' T' pns' body' Ds. \n              \\<not> P \\<turnstile> D has least M = (Ts'',T',pns',body') via Ds\""], ["proof (prove)\nusing this:\n  \\<nexists>Ts'' T' pns' body' Ds.\n     P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n\ngoal (1 subgoal):\n 1. \\<forall>Ts'' T' pns' body' Ds.\n       \\<not> P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds", "by auto"], ["proof (state)\nthis:\n  \\<forall>Ts'' T' pns' body' Ds.\n     \\<not> P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from suboD last"], ["proof (chain)\npicking this:\n  Subobjs P D Cs'\n  last Cs' = C", "have path:\"P \\<turnstile> Path D to C via Cs'\""], ["proof (prove)\nusing this:\n  Subobjs P D Cs'\n  last Cs' = C\n\ngoal (1 subgoal):\n 1. P \\<turnstile> Path D to C via Cs'", "by(simp add:path_via_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path D to C via Cs' \n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from \"method\""], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs", "have notempty:\"Cs \\<noteq> []\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n\ngoal (1 subgoal):\n 1. Cs \\<noteq> []", "by(fastforce intro!:Subobjs_nonempty \n                        simp:LeastMethodDef_def MethodDefs_def)"], ["proof (state)\nthis:\n  Cs \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from suboD"], ["proof (chain)\npicking this:\n  Subobjs P D Cs'", "have \"class\": \"is_class P D\""], ["proof (prove)\nusing this:\n  Subobjs P D Cs'\n\ngoal (1 subgoal):\n 1. is_class P D", "by(rule Subobjs_isClass)"], ["proof (state)\nthis:\n  is_class P D\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from suboD last"], ["proof (chain)\npicking this:\n  Subobjs P D Cs'\n  last Cs' = C", "have path:\"P \\<turnstile> Path D to C via Cs'\""], ["proof (prove)\nusing this:\n  Subobjs P D Cs'\n  last Cs' = C\n\ngoal (1 subgoal):\n 1. P \\<turnstile> Path D to C via Cs'", "by(simp add:path_via_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path D to C via Cs' \n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with \"method\" wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  wwf_prog P\n  P \\<turnstile> Path D to C via Cs'", "have \"P \\<turnstile> D has M = (Ts,T,pns,body) via Cs'@\\<^sub>pCs\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  wwf_prog P\n  P \\<turnstile> Path D to C via Cs' \n\ngoal (1 subgoal):\n 1. P \\<turnstile> D has M = (Ts, T, pns, body) via Cs' @\\<^sub>p Cs", "by(auto intro:has_path_has has_least_method_has_method)"], ["proof (state)\nthis:\n  P \\<turnstile> D has M = (Ts, T, pns, body) via Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with \"class\" wf"], ["proof (chain)\npicking this:\n  is_class P D\n  wwf_prog P\n  P \\<turnstile> D has M = (Ts, T, pns, body) via Cs' @\\<^sub>p Cs", "obtain Cs'' Ts'' T' pns' body' where overrider:\n            \"P \\<turnstile> (D,Cs'@\\<^sub>pCs) has overrider M = (Ts'',T',pns',body') via Cs''\""], ["proof (prove)\nusing this:\n  is_class P D\n  wwf_prog P\n  P \\<turnstile> D has M = (Ts, T, pns, body) via Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. (\\<And>Ts'' T' pns' body' Cs''.\n        P \\<turnstile> (D, Cs' @\\<^sub>p\n                           Cs) has overrider M = (Ts'', T', pns',\n            body') via Cs'' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto dest!:class_wf simp:is_class_def wf_cdecl_def,blast)"], ["proof (state)\nthis:\n  P \\<turnstile> (D, Cs' @\\<^sub>p\n                     Cs) has overrider M = (Ts'', T', pns', body') via Cs''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with non_dyn"], ["proof (chain)\npicking this:\n  \\<forall>Ts'' T' pns' body' Ds.\n     \\<not> P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n  P \\<turnstile> (D, Cs' @\\<^sub>p\n                     Cs) has overrider M = (Ts'', T', pns', body') via Cs''", "have select:\"P \\<turnstile> (D,Cs'@\\<^sub>pCs) selects M = (Ts'',T',pns',body') via Cs''\""], ["proof (prove)\nusing this:\n  \\<forall>Ts'' T' pns' body' Ds.\n     \\<not> P \\<turnstile> D has least M = (Ts'', T', pns', body') via Ds\n  P \\<turnstile> (D, Cs' @\\<^sub>p\n                     Cs) has overrider M = (Ts'', T', pns', body') via Cs''\n\ngoal (1 subgoal):\n 1. P \\<turnstile> (D,Cs' @\\<^sub>p\n                      Cs) selects M = (Ts'', T', pns', body') via Cs''", "by-(rule dyn_ambiguous,simp_all)"], ["proof (state)\nthis:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from notempty"], ["proof (chain)\npicking this:\n  Cs \\<noteq> []", "have eq:\"(Cs' @\\<^sub>p Cs) @\\<^sub>p [last Cs] = (Cs' @\\<^sub>p Cs)\""], ["proof (prove)\nusing this:\n  Cs \\<noteq> []\n\ngoal (1 subgoal):\n 1. (Cs' @\\<^sub>p Cs) @\\<^sub>p [last Cs] = Cs' @\\<^sub>p Cs", "by(rule appendPath_append_last)"], ["proof (state)\nthis:\n  (Cs' @\\<^sub>p Cs) @\\<^sub>p [last Cs] = Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from \"method\" wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  wwf_prog P", "have \"P \\<turnstile> last Cs has least M = (Ts,T,pns,body) via [last Cs]\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  wwf_prog P\n\ngoal (1 subgoal):\n 1. P \\<turnstile> last Cs has least M = (Ts, T, pns, body) via [last Cs]", "by(auto dest:Subobj_last_isClass intro:Subobjs_Base subobjs_rel\n                    simp:LeastMethodDef_def MethodDefs_def)"], ["proof (state)\nthis:\n  P \\<turnstile> last Cs has least M = (Ts, T, pns, body) via [last Cs]\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with notempty"], ["proof (chain)\npicking this:\n  Cs \\<noteq> []\n  P \\<turnstile> last Cs has least M = (Ts, T, pns, body) via [last Cs]", "have \"P \\<turnstile> last(Cs'@\\<^sub>pCs) has least M = (Ts,T,pns,body) via [last Cs]\""], ["proof (prove)\nusing this:\n  Cs \\<noteq> []\n  P \\<turnstile> last Cs has least M = (Ts, T, pns, body) via [last Cs]\n\ngoal (1 subgoal):\n 1. P \\<turnstile> last\n                    (Cs' @\\<^sub>p\n                     Cs) has least M = (Ts, T, pns, body) via [last Cs]", "by -(drule_tac Cs'=\"Cs'\" in appendPath_last,simp)"], ["proof (state)\nthis:\n  P \\<turnstile> last\n                  (Cs' @\\<^sub>p\n                   Cs) has least M = (Ts, T, pns, body) via [last Cs]\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with overrider wf eq"], ["proof (chain)\npicking this:\n  P \\<turnstile> (D, Cs' @\\<^sub>p\n                     Cs) has overrider M = (Ts'', T', pns', body') via Cs''\n  wwf_prog P\n  (Cs' @\\<^sub>p Cs) @\\<^sub>p [last Cs] = Cs' @\\<^sub>p Cs\n  P \\<turnstile> last\n                  (Cs' @\\<^sub>p\n                   Cs) has least M = (Ts, T, pns, body) via [last Cs]", "have \"(Cs'',(Ts'',T',pns',body')) \\<in> MinimalMethodDefs P D M\"\n            and \"P,D \\<turnstile> Cs'' \\<sqsubseteq> Cs'@\\<^sub>pCs\""], ["proof (prove)\nusing this:\n  P \\<turnstile> (D, Cs' @\\<^sub>p\n                     Cs) has overrider M = (Ts'', T', pns', body') via Cs''\n  wwf_prog P\n  (Cs' @\\<^sub>p Cs) @\\<^sub>p [last Cs] = Cs' @\\<^sub>p Cs\n  P \\<turnstile> last\n                  (Cs' @\\<^sub>p\n                   Cs) has least M = (Ts, T, pns, body) via [last Cs]\n\ngoal (1 subgoal):\n 1. (Cs'', Ts'', T', pns', body') \\<in> MinimalMethodDefs P D M &&&\n    P,D \\<turnstile> Cs'' \\<sqsubseteq> Cs' @\\<^sub>p Cs", "by(auto simp:FinalOverriderMethodDef_def OverriderMethodDefs_def)\n              (drule wf_sees_method_fun,auto)"], ["proof (state)\nthis:\n  (Cs'', Ts'', T', pns', body') \\<in> MinimalMethodDefs P D M\n  P,D \\<turnstile> Cs'' \\<sqsubseteq> Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with subcls wf notempty has path"], ["proof (chain)\npicking this:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n  wwf_prog P\n  Cs \\<noteq> []\n  P \\<turnstile> C has M = (Ts, T, pns, body) via Cs\n  P \\<turnstile> Path D to C via Cs' \n  (Cs'', Ts'', T', pns', body') \\<in> MinimalMethodDefs P D M\n  P,D \\<turnstile> Cs'' \\<sqsubseteq> Cs' @\\<^sub>p Cs", "have \"Ts = Ts''\" and leq:\"P \\<turnstile> T' \\<le> T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n  wwf_prog P\n  Cs \\<noteq> []\n  P \\<turnstile> C has M = (Ts, T, pns, body) via Cs\n  P \\<turnstile> Path D to C via Cs' \n  (Cs'', Ts'', T', pns', body') \\<in> MinimalMethodDefs P D M\n  P,D \\<turnstile> Cs'' \\<sqsubseteq> Cs' @\\<^sub>p Cs\n\ngoal (1 subgoal):\n 1. Ts = Ts'' &&& P \\<turnstile> T' \\<le> T", "by -(drule leq_methods_subtypes,simp_all,blast)+"], ["proof (state)\nthis:\n  Ts = Ts''\n  P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "hence \"length Ts = length Ts''\""], ["proof (prove)\nusing this:\n  Ts = Ts''\n  P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. length Ts = length Ts''", "by (simp add:list_all2_iff)"], ["proof (state)\nthis:\n  length Ts = length Ts''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with sub"], ["proof (chain)\npicking this:\n  P \\<turnstile> Ts' [\\<le>] Ts\n  length Ts = length Ts''", "have \"length Ts' = length Ts''\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Ts' [\\<le>] Ts\n  length Ts = length Ts''\n\ngoal (1 subgoal):\n 1. length Ts' = length Ts''", "by (simp add:list_all2_iff)"], ["proof (state)\nthis:\n  length Ts' = length Ts''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with WTrts_same_length[OF wtes] vs"], ["proof (chain)\npicking this:\n  length es = length Ts'\n  es = map Val vs\n  length Ts' = length Ts''", "have length:\"length vs = length Ts''\""], ["proof (prove)\nusing this:\n  length es = length Ts'\n  es = map Val vs\n  length Ts' = length Ts''\n\ngoal (1 subgoal):\n 1. length vs = length Ts''", "by simp"], ["proof (state)\nthis:\n  length vs = length Ts''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "from select_method_wf_mdecl[OF wf select]"], ["proof (chain)\npicking this:\n  wf_mdecl wwf_mdecl P (last Cs'') (M, Ts'', T', pns', body')", "have lengthParams:\"length Ts'' = length pns'\""], ["proof (prove)\nusing this:\n  wf_mdecl wwf_mdecl P (last Cs'') (M, Ts'', T', pns', body')\n\ngoal (1 subgoal):\n 1. length Ts'' = length pns'", "by (simp add:wf_mdecl_def)"], ["proof (state)\nthis:\n  length Ts'' = length pns'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with length"], ["proof (chain)\npicking this:\n  length vs = length Ts''\n  length Ts'' = length pns'", "have \"length vs = length pns'\""], ["proof (prove)\nusing this:\n  length vs = length Ts''\n  length Ts'' = length pns'\n\ngoal (1 subgoal):\n 1. length vs = length pns'", "by simp"], ["proof (state)\nthis:\n  length vs = length pns'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>Ts'' T' pns' body' Cs''.\n                P \\<turnstile> (D,Cs' @\\<^sub>p\n                                  Cs) selects M = (Ts'', T', pns',\n             body') via Cs'' \\<and>\n                length Ts'' = length pns' \\<and>\n                length vs = length pns' \\<and>\n                P \\<turnstile> T' \\<le> T \\<Longrightarrow>\n                thesis;\n     \\<nexists>Ts'' T' pns' body' Ds.\n        P \\<turnstile> D has least M = (Ts'', T', pns',\n  body') via Ds\\<rbrakk>\n    \\<Longrightarrow> thesis", "with select lengthParams leq"], ["proof (chain)\npicking this:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n  length Ts'' = length pns'\n  P \\<turnstile> T' \\<le> T\n  length vs = length pns'", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n  length Ts'' = length pns'\n  P \\<turnstile> T' \\<le> T\n  length vs = length pns'\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs''\n  length Ts'' = length pns'\n  P \\<turnstile> T' \\<le> T\n  length vs = length pns'\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (?Ts'', ?T', ?pns',\n                                     ?body') via ?Cs'' \\<and>\n  length ?Ts'' = length ?pns' \\<and>\n  length vs = length ?pns' \\<and>\n  P \\<turnstile> ?T' \\<le> T \\<Longrightarrow>\n  thesis\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs'' \\<and>\n  length Ts'' = length pns' \\<and>\n  length vs = length pns' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "obtain new_body where \"case T of Class D \\<Rightarrow> \n           new_body = \\<lparr>D\\<rparr>blocks(this#pns',Class(last Cs'')#Ts'',Ref(a,Cs'')#vs,body')\n    | _ \\<Rightarrow> new_body = blocks(this#pns',Class(last Cs'')#Ts'',Ref(a,Cs'')#vs,body')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>new_body.\n        case T of\n        Class D \\<Rightarrow>\n          new_body =\n          \\<lparr>D\\<rparr>blocks\n                            (this # pns', Class (last Cs'') # Ts'',\n                             Ref (a, Cs'') # vs, body')\n        | _ \\<Rightarrow>\n            new_body =\n            blocks\n             (this # pns', Class (last Cs'') # Ts'', Ref (a, Cs'') # vs,\n              body') \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(cases T) auto"], ["proof (state)\nthis:\n  case T of\n  Class D \\<Rightarrow>\n    new_body =\n    \\<lparr>D\\<rparr>blocks\n                      (this # pns', Class (last Cs'') # Ts'',\n                       Ref (a, Cs'') # vs, body')\n  | _ \\<Rightarrow>\n      new_body =\n      blocks\n       (this # pns', Class (last Cs'') # Ts'', Ref (a, Cs'') # vs, body')\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with h \"method\" last ass ref vs"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  last Cs' = C\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs'' \\<and>\n  length Ts'' = length pns' \\<and>\n  length vs = length pns' \\<and> P \\<turnstile> T' \\<le> T\n  e = ref (a, Cs')\n  es = map Val vs\n  case T of\n  Class D \\<Rightarrow>\n    new_body =\n    \\<lparr>D\\<rparr>blocks\n                      (this # pns', Class (last Cs'') # Ts'',\n                       Ref (a, Cs'') # vs, body')\n  | _ \\<Rightarrow>\n      new_body =\n      blocks\n       (this # pns', Class (last Cs'') # Ts'', Ref (a, Cs'') # vs, body')", "show ?thesis"], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(D, S)\\<rfloor>\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  last Cs' = C\n  P \\<turnstile> (D,Cs' @\\<^sub>p\n                    Cs) selects M = (Ts'', T', pns', body') via Cs'' \\<and>\n  length Ts'' = length pns' \\<and>\n  length vs = length pns' \\<and> P \\<turnstile> T' \\<le> T\n  e = ref (a, Cs')\n  es = map Val vs\n  case T of\n  Class D \\<Rightarrow>\n    new_body =\n    \\<lparr>D\\<rparr>blocks\n                      (this # pns', Class (last Cs'') # Ts'',\n                       Ref (a, Cs'') # vs, body')\n  | _ \\<Rightarrow>\n      new_body =\n      blocks\n       (this # pns', Class (last Cs'') # Ts'', Ref (a, Cs'') # vs, body')\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (auto intro!:exI RedCall)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not>(\\<exists>vs. es = map Val vs)\""], ["proof (state)\nthis:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence not_all_Val: \"\\<not>(\\<forall>e \\<in> set es. \\<exists>v. e = Val v)\""], ["proof (prove)\nusing this:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "by(simp add:ex_map_conv)"], ["proof (state)\nthis:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?ves = \"takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?rest = \"dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?ex = \"hd ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?rst = \"tl ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from not_all_Val"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "have nonempty: \"?rest \\<noteq> []\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "by auto"], ["proof (state)\nthis:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence es: \"es = ?ves @ ?ex # ?rst\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. es =\n    takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)", "by simp"], ["proof (state)\nthis:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have \"\\<forall>e \\<in> set ?ves. \\<exists>v. e = Val v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n       \\<exists>v. e = Val v", "by(fastforce dest:set_takeWhileD)"], ["proof (state)\nthis:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v", "obtain vs where ves: \"?ves = map Val vs\""], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ex_map_conv"], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n  (\\<exists>xs. ?ys = map ?f xs) =\n  (\\<forall>y\\<in>set ?ys. \\<exists>x. y = ?f x)\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final ?ex\""], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from nonempty"], ["proof (chain)\npicking this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "have \"\\<not>(\\<exists>v. ?ex = Val v)\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>v.\n       hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "by(auto simp:neq_Nil_conv simp del:dropWhile_eq_Nil_conv)\n              (simp add:dropWhile_eq_Cons_conv)"], ["proof (state)\nthis:\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "obtain r' where ex_Throw: \"?ex = Throw r'\""], ["proof (prove)\nusing this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>r'.\n        hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) =\n        Throw r' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fast elim!:finalE)"], ["proof (state)\nthis:\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw r'\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "using ref es ex_Throw ves"], ["proof (prove)\nusing this:\n  e = ref r\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw r'\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final ?ex\""], ["proof (state)\nthis:\n  \\<not> final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have \"finals es = finals(?ves @ ?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using es"], ["proof (prove)\nusing this:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by(rule arg_cong)"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "also"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have \"\\<dots> = finals(?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using ves"], ["proof (prove)\nusing this:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by simp"], ["proof (state)\nthis:\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "finally"], ["proof (chain)\npicking this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "have \"finals es = finals(?ex # ?rst)\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "."], ["proof (state)\nthis:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence \"\\<not> finals es\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_finals_ConsI[OF not_fin]"], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<not> finals\n          (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) # ?es)\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by blast"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "using ref D IHes[OF hconf envconf]"], ["proof (prove)\nusing this:\n  \\<not> finals es\n  e = ref r\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro!:CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e None M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with WTrtCall.prems"], ["proof (chain)\npicking this:\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e None M es)\n  e = Throw r", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e None M es)\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fast intro!:red_reds.CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCall"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e None M es)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e None M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e None M es)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e None M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (blast intro!:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e None M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (10 subgoals):\n 1. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 10. \\<And>E h e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>e # es,\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 10. \\<And>E h e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>e # es,\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>", "case (WTrtStaticCall E h e C' C M Ts T pns body Cs es Ts')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> Path C' to C unique\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\n\ngoal (10 subgoals):\n 1. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 10. \\<And>E h e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>e # es,\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>", "have wte: \"P,E,h \\<turnstile> e : Class C'\"\n    and path_unique:\"P \\<turnstile> Path C' to C unique\"\n    and \"method\":\"P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\"\n    and wtes: \"P,E,h \\<turnstile> es [:] Ts'\"and sub: \"P \\<turnstile> Ts' [\\<le>] Ts\"\n    and IHes: \"\\<And>l.\n              \\<lbrakk>P \\<turnstile> h \\<surd>; envconf P E; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n              \\<Longrightarrow> \\<exists>es' s'. P,E \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>\"\n    and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"envconf P E\"\n    and D: \"\\<D> (e\\<bullet>(C::)M(es)) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((P,E,h \\<turnstile> e : Class C' &&&\n      P \\<turnstile> Path C' to C unique) &&&\n     P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs &&&\n     P,E,h \\<turnstile> es [:] Ts') &&&\n    (P \\<turnstile> Ts' [\\<le>] Ts &&&\n     (\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P,E \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>)) &&&\n    P \\<turnstile> h \\<surd> &&&\n    P \\<turnstile> E \\<surd> &&&\n    \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C'\n  P \\<turnstile> Path C' to C unique\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n\ngoal (10 subgoals):\n 1. \\<And>E h e C' C M Ts T a b Cs es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e\n                 \\<lfloor>C\\<rfloor> M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 9. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 10. \\<And>E h e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P,E \\<turnstile> \\<langle>e,\n             (h, l)\\<rangle> \\<rightarrow>\n            \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n             \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P,E \\<turnstile> \\<langle>es,\n             (h, l)\\<rangle> [\\<rightarrow>]\n            \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P,E \\<turnstile> \\<langle>e # es,\n         (h, l)\\<rangle> [\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume final:\"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C'\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C'\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule final_refE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume ref: \"e = ref r\""], ["proof (state)\nthis:\n  e = ref r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       e = ref r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume es: \"\\<exists>vs. es = map Val vs\""], ["proof (state)\nthis:\n  \\<exists>vs. es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from ref"], ["proof (chain)\npicking this:\n  e = ref r", "obtain a Cs' where ref:\"e = ref(a,Cs')\""], ["proof (prove)\nusing this:\n  e = ref r\n\ngoal (1 subgoal):\n 1. (\\<And>a Cs'.\n        e = ref (a, Cs') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases r) auto"], ["proof (state)\nthis:\n  e = ref (a, Cs')\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C'\n  e = ref (a, Cs')", "have last:\"last Cs' = C'\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C'\n  e = ref (a, Cs')\n\ngoal (1 subgoal):\n 1. last Cs' = C'", "by (fastforce split:if_split_asm)"], ["proof (state)\nthis:\n  last Cs' = C'\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with path_unique"], ["proof (chain)\npicking this:\n  P \\<turnstile> Path C' to C unique\n  last Cs' = C'", "obtain Cs''\n          where path_via:\"P \\<turnstile> Path (last Cs') to C via Cs''\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Path C' to C unique\n  last Cs' = C'\n\ngoal (1 subgoal):\n 1. (\\<And>Cs''.\n        P \\<turnstile> Path last Cs' to C via Cs''  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add:path_via_def path_unique_def)"], ["proof (state)\nthis:\n  P \\<turnstile> Path last Cs' to C via Cs'' \n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "obtain Ds where Ds:\"Ds = (Cs'@\\<^sub>pCs'')@\\<^sub>pCs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Ds.\n        Ds = (Cs' @\\<^sub>p Cs'') @\\<^sub>p Cs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  Ds = (Cs' @\\<^sub>p Cs'') @\\<^sub>p Cs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from es"], ["proof (chain)\npicking this:\n  \\<exists>vs. es = map Val vs", "obtain vs where vs:\"es = map Val vs\""], ["proof (prove)\nusing this:\n  \\<exists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. (\\<And>vs. es = map Val vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from sub"], ["proof (chain)\npicking this:\n  P \\<turnstile> Ts' [\\<le>] Ts", "have \"length Ts' = length Ts\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (1 subgoal):\n 1. length Ts' = length Ts", "by (simp add:list_all2_iff)"], ["proof (state)\nthis:\n  length Ts' = length Ts\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrts_same_length[OF wtes] vs"], ["proof (chain)\npicking this:\n  length es = length Ts'\n  es = map Val vs\n  length Ts' = length Ts", "have length:\"length vs = length Ts\""], ["proof (prove)\nusing this:\n  length es = length Ts'\n  es = map Val vs\n  length Ts' = length Ts\n\ngoal (1 subgoal):\n 1. length vs = length Ts", "by simp"], ["proof (state)\nthis:\n  length vs = length Ts\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from has_least_wf_mdecl[OF wf \"method\"]"], ["proof (chain)\npicking this:\n  wf_mdecl wwf_mdecl P (last Cs) (M, Ts, T, pns, body)", "have lengthParams:\"length Ts = length pns\""], ["proof (prove)\nusing this:\n  wf_mdecl wwf_mdecl P (last Cs) (M, Ts, T, pns, body)\n\ngoal (1 subgoal):\n 1. length Ts = length pns", "by (simp add:wf_mdecl_def)"], ["proof (state)\nthis:\n  length Ts = length pns\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with \"method\" last path_unique path_via Ds length ref vs"], ["proof (chain)\npicking this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  last Cs' = C'\n  P \\<turnstile> Path C' to C unique\n  P \\<turnstile> Path last Cs' to C via Cs'' \n  Ds = (Cs' @\\<^sub>p Cs'') @\\<^sub>p Cs\n  length vs = length Ts\n  e = ref (a, Cs')\n  es = map Val vs\n  length Ts = length pns", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  last Cs' = C'\n  P \\<turnstile> Path C' to C unique\n  P \\<turnstile> Path last Cs' to C via Cs'' \n  Ds = (Cs' @\\<^sub>p Cs'') @\\<^sub>p Cs\n  length vs = length Ts\n  e = ref (a, Cs')\n  es = map Val vs\n  length Ts = length pns\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (auto intro!:exI RedStaticCall)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not>(\\<exists>vs. es = map Val vs)\""], ["proof (state)\nthis:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence not_all_Val: \"\\<not>(\\<forall>e \\<in> set es. \\<exists>v. e = Val v)\""], ["proof (prove)\nusing this:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "by(simp add:ex_map_conv)"], ["proof (state)\nthis:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?ves = \"takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?rest = \"dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?ex = \"hd ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "let ?rst = \"tl ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from not_all_Val"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "have nonempty: \"?rest \\<noteq> []\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "by auto"], ["proof (state)\nthis:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence es: \"es = ?ves @ ?ex # ?rst\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. es =\n    takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)", "by simp"], ["proof (state)\nthis:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have \"\\<forall>e \\<in> set ?ves. \\<exists>v. e = Val v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n       \\<exists>v. e = Val v", "by(fastforce dest:set_takeWhileD)"], ["proof (state)\nthis:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v", "obtain vs where ves: \"?ves = map Val vs\""], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ex_map_conv"], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n  (\\<exists>xs. ?ys = map ?f xs) =\n  (\\<forall>y\\<in>set ?ys. \\<exists>x. y = ?f x)\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final ?ex\""], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from nonempty"], ["proof (chain)\npicking this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "have \"\\<not>(\\<exists>v. ?ex = Val v)\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>v.\n       hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "by(auto simp:neq_Nil_conv simp del:dropWhile_eq_Nil_conv)\n              (simp add:dropWhile_eq_Cons_conv)"], ["proof (state)\nthis:\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "obtain r' where ex_Throw: \"?ex = Throw r'\""], ["proof (prove)\nusing this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>r'.\n        hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) =\n        Throw r' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fast elim!:finalE)"], ["proof (state)\nthis:\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw r'\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "using ref es ex_Throw ves"], ["proof (prove)\nusing this:\n  e = ref r\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw r'\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final ?ex\""], ["proof (state)\nthis:\n  \\<not> final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have \"finals es = finals(?ves @ ?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using es"], ["proof (prove)\nusing this:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by(rule arg_cong)"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "also"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have \"\\<dots> = finals(?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using ves"], ["proof (prove)\nusing this:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by simp"], ["proof (state)\nthis:\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "finally"], ["proof (chain)\npicking this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "have \"finals es = finals(?ex # ?rst)\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "."], ["proof (state)\nthis:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence \"\\<not> finals es\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_finals_ConsI[OF not_fin]"], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<not> finals\n          (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) # ?es)\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by blast"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "using ref D IHes[OF hconf envconf]"], ["proof (prove)\nusing this:\n  \\<not> finals es\n  e = ref r\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro!:CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with WTrtStaticCall.prems"], ["proof (chain)\npicking this:\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\n  e = Throw r", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fast intro!:red_reds.CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtStaticCall"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> Path C' to C unique\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> Path C' to C unique\n  P \\<turnstile> C has least M = (Ts, T, pns, body) via Cs\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e \\<lfloor>C\\<rfloor> M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e \\<lfloor>C\\<rfloor> M es)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (blast intro!:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e \\<lfloor>C\\<rfloor> M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (9 subgoals):\n 1. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 9. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 9. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtCallNT E h e es Ts Copt M T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n\ngoal (9 subgoals):\n 1. \\<And>E h e es Ts Copt M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Call e Copt M es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>Call e Copt M es,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 8. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 9. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume e: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "hence \"e = null\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. e = null", "using WTrtCallNT"], ["proof (prove)\nusing this:\n  e = Val v\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n\ngoal (1 subgoal):\n 1. e = null", "by simp"], ["proof (state)\nthis:\n  e = null\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "have ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"finals es\""], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "fix vs"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"es = map Val vs\""], ["proof (state)\nthis:\n  es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCallNT e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Val v\n  es = map Val vs", "have ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Val v\n  es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedCallNull dest!:typeof_NT)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "fix vs a es'"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"es = map Val vs @ Throw a # es'\""], ["proof (state)\nthis:\n  es = map Val vs @ Throw a # es'\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCallNT e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Val v\n  es = map Val vs @ Throw a # es'", "have ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Val v\n  es = map Val vs @ Throw a # es'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  es = map Val ?vs2 @ Throw ?a2 # ?es'2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  finals es\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n  es = map Val ?vs2 @ Throw ?a2 # ?es'2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  finals es\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n  es = map Val ?vs2 @ Throw ?a2 # ?es'2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce simp:finals_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> finals es\" \\<comment> \\<open>@{term es} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCallNT e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Val v\n  \\<not> finals es", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Val v\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCallNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Throw r", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  e = Throw ?r2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final e\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n  e = Throw ?r2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  final e\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n  e = Throw ?r2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>@{term e} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCallNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (Call e Copt M es) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Call e Copt M es)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>Call e Copt M es,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by (fastforce intro:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>Call e Copt M es,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (8 subgoals):\n 1. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 8. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 8. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtInitBlock h v T' E V T e\\<^sub>2 T\\<^sub>2)"], ["proof (state)\nthis:\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n  P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>P \\<turnstile> h \\<surd>;\n   P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                       T) \\<turnstile> \\<langle>e\\<^sub>2,\n  (h, ?l)\\<rangle> \\<rightarrow>\n \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  is_type P T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\n  \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\n\ngoal (8 subgoals):\n 1. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 8. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "have IH2: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E(V \\<mapsto> T) \\<surd>; \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n                  \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto> T) \\<turnstile> \\<langle>e\\<^sub>2,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n    and typeof:\"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T'\"\n    and type:\"is_type P T\" and sub:\"P \\<turnstile> T' \\<le> T\"\n    and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"P \\<turnstile> E \\<surd>\"\n    and D: \"\\<D> {V:T := Val v; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>;\n          P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n          \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n          \\<not> final e\\<^sub>2\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                              T) \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>) &&&\n     P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> &&&\n     is_type P T) &&&\n    (P \\<turnstile> T' \\<le> T &&& P \\<turnstile> h \\<surd>) &&&\n    P \\<turnstile> E \\<surd> &&&\n    \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>P \\<turnstile> h \\<surd>;\n   P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                       T) \\<turnstile> \\<langle>e\\<^sub>2,\n  (h, ?l)\\<rangle> \\<rightarrow>\n \\<langle>e',s'\\<rangle>\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n  is_type P T\n  P \\<turnstile> T' \\<le> T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\n\ngoal (8 subgoals):\n 1. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 8. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "from wf typeof type sub"], ["proof (chain)\npicking this:\n  wwf_prog P\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n  is_type P T\n  P \\<turnstile> T' \\<le> T", "obtain v' where casts:\"P \\<turnstile> T casts v to v'\""], ["proof (prove)\nusing this:\n  wwf_prog P\n  P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor>\n  is_type P T\n  P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        P \\<turnstile> T casts v to v'  \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto dest:sub_casts)"], ["proof (state)\nthis:\n  P \\<turnstile> T casts v to v' \n\ngoal (8 subgoals):\n 1. \\<And>h v T' E V T e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T'\\<rfloor>;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; V:=Val v;;\n        e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 7. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 8. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume fin:\"final e\\<^sub>2\""], ["proof (state)\nthis:\n  final e\\<^sub>2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with casts"], ["proof (chain)\npicking this:\n  P \\<turnstile> T casts v to v' \n  final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> T casts v to v' \n  final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce elim:finalE intro:RedInitBlock red_reds.InitBlockThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume not_fin2: \"\\<not> final e\\<^sub>2\""], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from D"], ["proof (chain)\npicking this:\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>", "have D2: \"\\<D> e\\<^sub>2 \\<lfloor>dom(l(V\\<mapsto>v'))\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e\\<^sub>2 \\<lfloor>dom (l(V \\<mapsto> v'))\\<rfloor>", "by (auto simp:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> e\\<^sub>2 \\<lfloor>dom (l(V \\<mapsto> v'))\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from envconf type"], ["proof (chain)\npicking this:\n  P \\<turnstile> E \\<surd>\n  is_type P T", "have \"P \\<turnstile> E(V \\<mapsto> T) \\<surd>\""], ["proof (prove)\nusing this:\n  P \\<turnstile> E \\<surd>\n  is_type P T\n\ngoal (1 subgoal):\n 1. P \\<turnstile> E(V \\<mapsto> T) \\<surd>", "by(auto simp:envconf_def)"], ["proof (state)\nthis:\n  P \\<turnstile> E(V \\<mapsto> T) \\<surd>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from IH2[OF hconf this D2 not_fin2]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'. P,E(V \\<mapsto>\n     T) \\<turnstile> \\<langle>e\\<^sub>2,\n                      (h, l(V \\<mapsto> v'))\\<rangle> \\<rightarrow>\n                     \\<langle>e',s'\\<rangle>", "obtain h' l' e' where red2: \"P,E(V \\<mapsto> T) \\<turnstile> \\<langle>e\\<^sub>2,(h, l(V\\<mapsto>v'))\\<rangle> \\<rightarrow> \\<langle>e',(h', l')\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>e' s'. P,E(V \\<mapsto>\n     T) \\<turnstile> \\<langle>e\\<^sub>2,\n                      (h, l(V \\<mapsto> v'))\\<rangle> \\<rightarrow>\n                     \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>e' h' l'.\n        P,E(V \\<mapsto>\n        T) \\<turnstile> \\<langle>e\\<^sub>2,\n                         (h, l(V \\<mapsto> v'))\\<rangle> \\<rightarrow>\n                        \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e\\<^sub>2,\n                   (h, l(V \\<mapsto> v'))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from red_lcl_incr[OF red2]"], ["proof (chain)\npicking this:\n  dom (l(V \\<mapsto> v')) \\<subseteq> dom l'", "have \"V \\<in> dom l'\""], ["proof (prove)\nusing this:\n  dom (l(V \\<mapsto> v')) \\<subseteq> dom l'\n\ngoal (1 subgoal):\n 1. V \\<in> dom l'", "by auto"], ["proof (state)\nthis:\n  V \\<in> dom l'\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with red2 casts"], ["proof (chain)\npicking this:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e\\<^sub>2,\n                   (h, l(V \\<mapsto> v'))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n  P \\<turnstile> T casts v to v' \n  V \\<in> dom l'", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e\\<^sub>2,\n                   (h, l(V \\<mapsto> v'))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n  P \\<turnstile> T casts v to v' \n  V \\<in> dom l'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce intro:InitBlockRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (7 subgoals):\n 1. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 7. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 7. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtBlock E V T h e T')"], ["proof (state)\nthis:\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>;\n   P \\<turnstile> E(V \\<mapsto> T) \\<surd>; \\<D> e \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                       T) \\<turnstile> \\<langle>e,\n  (h, ?l)\\<rangle> \\<rightarrow>\n \\<langle>e',s'\\<rangle>\n  \\<not> assigned V e\n  is_type P T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\n  \\<not> final {V:T; e}\n\ngoal (7 subgoals):\n 1. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 7. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "have IH: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E(V \\<mapsto> T) \\<surd>; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto> T) \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and unass: \"\\<not> assigned V e\" and type:\"is_type P T\"\n   and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"P \\<turnstile> E \\<surd>\" \n    and D: \"\\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>;\n          P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n          \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                              T) \\<turnstile> \\<langle>e,\n         (h, l)\\<rangle> \\<rightarrow>\n        \\<langle>e',s'\\<rangle>) &&&\n     \\<not> assigned V e &&& is_type P T) &&&\n    P \\<turnstile> h \\<surd> &&&\n    P \\<turnstile> E \\<surd> &&& \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>P \\<turnstile> h \\<surd>;\n   P \\<turnstile> E(V \\<mapsto> T) \\<surd>; \\<D> e \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                       T) \\<turnstile> \\<langle>e,\n  (h, ?l)\\<rangle> \\<rightarrow>\n \\<langle>e',s'\\<rangle>\n  \\<not> assigned V e\n  is_type P T\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\n\ngoal (7 subgoals):\n 1. \\<And>E V T h e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>;\n            P \\<turnstile> E(V \\<mapsto> T) \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'. P,E(V \\<mapsto>\n                                T) \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; is_type P T; P \\<turnstile> h \\<surd>;\n        P \\<turnstile> E \\<surd>; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>{V:T; e},\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 6. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 7. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with type"], ["proof (chain)\npicking this:\n  is_type P T\n  e = Val v", "show ?thesis"], ["proof (prove)\nusing this:\n  is_type P T\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fast intro:RedBlock)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with type"], ["proof (chain)\npicking this:\n  is_type P T\n  e = Throw r", "show ?thesis"], ["proof (prove)\nusing this:\n  is_type P T\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fast intro:red_reds.BlockThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from D"], ["proof (chain)\npicking this:\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom(l(V:=None))\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom (l(V := None))\\<rfloor>", "by(simp add:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom (l(V := None))\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from envconf type"], ["proof (chain)\npicking this:\n  P \\<turnstile> E \\<surd>\n  is_type P T", "have \"P \\<turnstile> E(V \\<mapsto> T) \\<surd>\""], ["proof (prove)\nusing this:\n  P \\<turnstile> E \\<surd>\n  is_type P T\n\ngoal (1 subgoal):\n 1. P \\<turnstile> E(V \\<mapsto> T) \\<surd>", "by(auto simp:envconf_def)"], ["proof (state)\nthis:\n  P \\<turnstile> E(V \\<mapsto> T) \\<surd>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "from IH[OF hconf this De not_fin]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'. P,E(V \\<mapsto>\n     T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                     \\<langle>e',s'\\<rangle>", "obtain h' l' e' where red: \"P,E(V \\<mapsto> T) \\<turnstile> \\<langle>e,(h,l(V:=None))\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>e' s'. P,E(V \\<mapsto>\n     T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                     \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>e' h' l'.\n        P,E(V \\<mapsto>\n        T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                        \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (cases \"l' V\")"], ["proof (state)\ngoal (2 subgoals):\n 1. l' V = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"l' V = None\""], ["proof (state)\nthis:\n  l' V = None\n\ngoal (2 subgoals):\n 1. l' V = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with red unass"], ["proof (chain)\npicking this:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  l' V = None", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  l' V = None\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(blast intro: BlockRedNone)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"l' V = Some v\""], ["proof (state)\nthis:\n  l' V = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "with red unass type"], ["proof (chain)\npicking this:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  is_type P T\n  l' V = \\<lfloor>v\\<rfloor>", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E(V \\<mapsto>\n  T) \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                  \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  is_type P T\n  l' V = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(blast intro: BlockRedSome)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 6. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 6. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtSeq E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1;; e\\<^sub>2)\n\ngoal (6 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 5. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 6. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>1\""], ["proof (state)\nthis:\n  final e\\<^sub>1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fast elim:finalE intro:intro:RedSeq red_reds.SeqThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>1\""], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtSeq"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1;; e\\<^sub>2)\n  \\<not> final e\\<^sub>1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1;; e\\<^sub>2)\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (blast intro:SeqRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (5 subgoals):\n 1. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 5. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 5. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtCond E h e e\\<^sub>1 T e\\<^sub>2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>1 : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\n\ngoal (5 subgoals):\n 1. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 5. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "have wt: \"P,E,h \\<turnstile> e : Boolean\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : Boolean", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Boolean\n\ngoal (5 subgoals):\n 1. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>1,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e\\<^sub>2,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1\n        else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 4. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 5. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume val: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = Val v", "obtain b where v: \"v = Bool b\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>b. v = Bool b \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using wt"], ["proof (prove)\nusing this:\n  e = Val v\n  P,E,h \\<turnstile> e : Boolean\n\ngoal (1 subgoal):\n 1. (\\<And>b. v = Bool b \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (fastforce dest:typeof_Boolean)"], ["proof (state)\nthis:\n  v = Bool b\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof (cases b)"], ["proof (state)\ngoal (2 subgoals):\n 1. b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  b\n\ngoal (2 subgoals):\n 1. b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with val v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Bool b\n  b", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Bool b\n  b\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(auto intro:RedCondT)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> b\n\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with val v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Bool b\n  \\<not> b", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Bool b\n  \\<not> b\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(auto intro:RedCondF)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>e' s'.\n          P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                            (h, l)\\<rangle> \\<rightarrow>\n                           \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fast intro:red_reds.CondThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtCond"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>1 : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>1 : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>1,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e\\<^sub>2,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                         (h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (fast intro:CondRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 4. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 4. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case WTrtWhile"], ["proof (state)\nthis:\n  P,E_,h_ \\<turnstile> e_ : Boolean\n  \\<lbrakk>P \\<turnstile> h_ \\<surd>; P \\<turnstile> E_ \\<surd>;\n   \\<D> e_ \\<lfloor>dom ?l\\<rfloor>; \\<not> final e_\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E_ \\<turnstile> \\<langle>e_,\n    (h_, ?l)\\<rangle> \\<rightarrow>\n   \\<langle>e',s'\\<rangle>\n  P,E_,h_ \\<turnstile> c_ : T_\n  \\<lbrakk>P \\<turnstile> h_ \\<surd>; P \\<turnstile> E_ \\<surd>;\n   \\<D> c_ \\<lfloor>dom ?l\\<rfloor>; \\<not> final c_\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E_ \\<turnstile> \\<langle>c_,\n    (h_, ?l)\\<rangle> \\<rightarrow>\n   \\<langle>e',s'\\<rangle>\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D> (while (e_) c_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (while (e_) c_)\n\ngoal (4 subgoals):\n 1. \\<And>E h e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>c,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>while (e) c,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 3. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 4. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E_ \\<turnstile> \\<langle>while (e_) c_,\n                          (h_, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "by(fast intro:RedWhile)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E_ \\<turnstile> \\<langle>while (e_) c_,(h_, l)\\<rangle> \\<rightarrow>\n                       \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 3. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 3. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtThrow E h e T' T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T'\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n\ngoal (3 subgoals):\n 1. \\<And>E h e T' T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        is_refT T'; P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P,E \\<turnstile> \\<langle>throw e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>\n 2. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 3. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"final e\" \\<comment> \\<open>Then @{term e} must be @{term throw} or @{term null}\\<close>"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtThrow"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T'\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T'\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def is_refT_def\n                  intro:red_reds.ThrowThrow red_reds.RedThrowNull\n                  dest!:typeof_NT typeof_Class_Subo)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>Then @{term e} must reduce\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "with WTrtThrow"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T'\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  is_refT T'\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                        \\<langle>e',s'\\<rangle>", "by simp (blast intro:ThrowRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 2. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 2. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case WTrtNil"], ["proof (state)\nthis:\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D>s [] \\<lfloor>dom l\\<rfloor>\n  \\<not> finals []\n\ngoal (2 subgoals):\n 1. \\<And>E h l.\n       \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>[],\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>\n 2. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> h_ \\<surd>\n  P \\<turnstile> E_ \\<surd>\n  \\<D>s [] \\<lfloor>dom l\\<rfloor>\n  \\<not> finals []\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E_ \\<turnstile> \\<langle>[],(h_, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P,E_ \\<turnstile> \\<langle>[],(h_, l)\\<rangle> [\\<rightarrow>]\n                       \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "case (WTrtCons E h e T es Ts)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "have IHe: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s'. P,E \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and IHes: \"\\<And>l. \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n             \\<Longrightarrow> \\<exists>es' s'. P,E \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>\"\n   and hconf: \"P \\<turnstile> h \\<surd>\" and envconf:\"P \\<turnstile> E \\<surd>\"\n    and D: \"\\<D>s (e#es) \\<lfloor>dom l\\<rfloor>\"\n   and not_fins: \"\\<not> finals(e # es)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P,E \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>) &&&\n     (\\<And>l.\n         \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n          \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P,E \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>) &&&\n     P \\<turnstile> h \\<surd>) &&&\n    P \\<turnstile> E \\<surd> &&&\n    \\<D>s (e # es) \\<lfloor>dom l\\<rfloor> &&& \\<not> finals (e # es)", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P,E \\<turnstile> \\<langle>e,\n   (h, ?l)\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>\n  \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n   \\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P,E \\<turnstile> \\<langle>es,\n   (h, ?l)\\<rangle> [\\<rightarrow>]\n  \\<langle>es',s'\\<rangle>\n  P \\<turnstile> h \\<surd>\n  P \\<turnstile> E \\<surd>\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\" and Des: \"\\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor> &&&\n    \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)", "using D"], ["proof (prove)\nusing this:\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor> &&&\n    \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\n\ngoal (1 subgoal):\n 1. \\<And>E h e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P,E \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> \\<rightarrow>\n           \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n            \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P,E \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> h \\<surd>; P \\<turnstile> E \\<surd>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P,E \\<turnstile> \\<langle>e # es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "assume e: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "hence Des': \"\\<D>s es \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<D>s es \\<lfloor>dom l\\<rfloor>", "using De Des"], ["proof (prove)\nusing this:\n  e = Val v\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\n\ngoal (1 subgoal):\n 1. \\<D>s es \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D>s es \\<lfloor>dom l\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "have not_fins_tl: \"\\<not> finals es\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_fins e"], ["proof (prove)\nusing this:\n  \\<not> finals (e # es)\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by simp"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>\n 2. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "using e IHes[OF hconf envconf Des' not_fins_tl]"], ["proof (prove)\nusing this:\n  e = Val v\n  \\<exists>es' s'.\n     P,E \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "by (blast intro!:ListRed2)"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "assume \"e = Throw r\""], ["proof (state)\nthis:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "hence False"], ["proof (prove)\nusing this:\n  e = Throw r\n\ngoal (1 subgoal):\n 1. False", "using not_fins"], ["proof (prove)\nusing this:\n  e = Throw r\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       e = Throw r \\<Longrightarrow>\n       \\<exists>es' s'.\n          P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                           \\<langle>es',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", ".."], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "from IHe[OF hconf envconf De this]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>e' s'.\n     P,E \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                        \\<langle>es',s'\\<rangle>", "by(fast intro!:ListRed1)"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P,E \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}