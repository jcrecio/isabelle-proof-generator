{"file_name": "/home/qj213/afp-2021-10-22/thys/CoreC++/WellTypeRT.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/CoreC++", "problem_names": ["lemma type_eq_type: \"typeof v = Some T \\<Longrightarrow> P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T\"", "lemma typeof_Void [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some Void \\<Longrightarrow> v = Unit\"", "lemma typeof_NT [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some NT \\<Longrightarrow> v = Null\"", "lemma typeof_Boolean [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some Boolean \\<Longrightarrow> \\<exists>b. v = Bool b\"", "lemma typeof_Integer [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some Integer \\<Longrightarrow> \\<exists>i. v = Intg i\"", "lemma typeof_Class_Subo: \n\"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some (Class C) \\<Longrightarrow> \n\\<exists>a Cs D S. v = Ref(a,Cs) \\<and> h a = Some(D,S) \\<and> Subobjs P D Cs \\<and> last Cs = C\"", "lemmas WTrt_induct = WTrt_WTrts.induct [split_format (complete)]\n  and WTrt_inducts = WTrt_WTrts.inducts [split_format (complete)]", "lemma [simp]: \"\\<forall>Ts. (P,E,h \\<turnstile> es\\<^sub>1 @ es\\<^sub>2 [:] Ts) =\n  (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2. Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and> P,E,h \\<turnstile> es\\<^sub>1 [:] Ts\\<^sub>1 & P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)\"", "lemma WTrts_Val[simp]:\n \"\\<And>Ts. (P,E,h \\<turnstile> map Val vs [:] Ts) = (map (\\<lambda>v. (P \\<turnstile> typeof\\<^bsub>h\\<^esub>) v) vs = map Some Ts)\"", "lemma WTrts_same_length: \"\\<And>Ts. P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> length es = length Ts\"", "lemma WTrt_env_mono:\n  \"P,E,h \\<turnstile> e : T \\<Longrightarrow> (\\<And>E'. E \\<subseteq>\\<^sub>m E' \\<Longrightarrow> P,E',h \\<turnstile> e : T)\" and\n  \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> (\\<And>E'. E \\<subseteq>\\<^sub>m E' \\<Longrightarrow> P,E',h \\<turnstile> es [:] Ts)\"", "lemma WT_implies_WTrt: \"P,E \\<turnstile> e :: T \\<Longrightarrow> P,E,h \\<turnstile> e : T\"\nand WTs_implies_WTrts: \"P,E \\<turnstile> es [::] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:] Ts\""], "translations": [["", "lemma type_eq_type: \"typeof v = Some T \\<Longrightarrow> P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. typeof v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n    P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>", "by(induct v)auto"], ["", "lemma typeof_Void [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some Void \\<Longrightarrow> v = Unit\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n    \\<lfloor>Void\\<rfloor> \\<Longrightarrow>\n    v = Unit", "by(induct v,auto split:if_split_asm)"], ["", "lemma typeof_NT [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some NT \\<Longrightarrow> v = Null\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n    \\<lfloor>NT\\<rfloor> \\<Longrightarrow>\n    v = Null", "by(induct v,auto split:if_split_asm)"], ["", "lemma typeof_Boolean [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some Boolean \\<Longrightarrow> \\<exists>b. v = Bool b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n    \\<lfloor>Boolean\\<rfloor> \\<Longrightarrow>\n    \\<exists>b. v = Bool b", "by(induct v,auto split:if_split_asm)"], ["", "lemma typeof_Integer [simp]: \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some Integer \\<Longrightarrow> \\<exists>i. v = Intg i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n    \\<lfloor>Integer\\<rfloor> \\<Longrightarrow>\n    \\<exists>i. v = Intg i", "by(induct v,auto split:if_split_asm)"], ["", "lemma typeof_Class_Subo: \n\"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some (Class C) \\<Longrightarrow> \n\\<exists>a Cs D S. v = Ref(a,Cs) \\<and> h a = Some(D,S) \\<and> Subobjs P D Cs \\<and> last Cs = C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n    \\<lfloor>Class C\\<rfloor> \\<Longrightarrow>\n    \\<exists>a Cs D S.\n       v = Ref (a, Cs) \\<and>\n       h a = \\<lfloor>(D, S)\\<rfloor> \\<and>\n       Subobjs P D Cs \\<and> last Cs = C", "by(induct v,auto split:if_split_asm)"], ["", "subsection \\<open>The rules\\<close>"], ["", "inductive\n  WTrt :: \"[prog,env,heap,expr,     ty     ] \\<Rightarrow> bool\"\n        (\"_,_,_ \\<turnstile> _ : _\"   [51,51,51]50)\n  and WTrts :: \"[prog,env,heap,expr list,ty list] \\<Rightarrow> bool\"\n        (\"_,_,_ \\<turnstile> _ [:] _\" [51,51,51]50)\n  for P :: prog\nwhere\n  \n  WTrtNew:\n  \"is_class P C  \\<Longrightarrow> \n  P,E,h \\<turnstile> new C : Class C\"\n\n| WTrtDynCast:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; is_class P C \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\"\n\n| WTrtStaticCast:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; is_class P C \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\"\n\n| WTrtVal:\n  \"P \\<turnstile> typeof\\<^bsub>h\\<^esub> v = Some T \\<Longrightarrow>\n  P,E,h \\<turnstile> Val v : T\"\n\n| WTrtVar:\n  \"E V = Some T \\<Longrightarrow>\n  P,E,h \\<turnstile> Var V : T\"\n\n| WTrtBinOp:\n  \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n     case bop of Eq \\<Rightarrow> T = Boolean\n               | Add \\<Rightarrow> T\\<^sub>1 = Integer \\<and> T\\<^sub>2 = Integer \\<and> T = Integer \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\"\n\n| WTrtLAss:\n  \"\\<lbrakk> E V = Some T;  P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\"\n\n| WTrtFAcc:\n\"\\<lbrakk>P,E,h \\<turnstile> e : Class C; Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\"\n\n| WTrtFAccNT:\n  \"P,E,h \\<turnstile> e : NT \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\"\n\n| WTrtFAss:\n\"\\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C; Cs \\<noteq> [];\n  P \\<turnstile> C has least F:T via Cs; P,E,h \\<turnstile> e\\<^sub>2 : T'; P \\<turnstile> T' \\<le> T \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs}:=e\\<^sub>2 : T\"\n\n| WTrtFAssNT:\n  \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 : NT; P,E,h \\<turnstile> e\\<^sub>2 : T'; P \\<turnstile> T' \\<le> T \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs}:=e\\<^sub>2 : T\"\n\n| WTrtCall:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Class C;  P \\<turnstile> C has least M = (Ts,T,m) via Cs;\n     P,E,h \\<turnstile> es [:] Ts'; P \\<turnstile> Ts' [\\<le>] Ts \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>M(es) : T\" \n\n| WTrtStaticCall:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n     P \\<turnstile> C has least M = (Ts,T,m) via Cs; \n     P,E,h \\<turnstile> es [:] Ts'; P \\<turnstile> Ts' [\\<le>] Ts \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>(C::)M(es) : T\"\n\n| WTrtCallNT:\n  \"\\<lbrakk>P,E,h \\<turnstile> e : NT; P,E,h \\<turnstile> es [:] Ts\\<rbrakk> \\<Longrightarrow> P,E,h \\<turnstile> Call e Copt M es : T\"\n\n| WTrtBlock:\n  \"\\<lbrakk>P,E(V\\<mapsto>T),h \\<turnstile> e : T'; is_type P T\\<rbrakk> \\<Longrightarrow> \n  P,E,h \\<turnstile> {V:T; e} : T'\"\n\n| WTrtSeq:\n  \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2 \\<rbrakk>  \\<Longrightarrow>  P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 : T\\<^sub>2\"\n\n| WTrtCond:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Boolean;  P,E,h \\<turnstile> e\\<^sub>1 : T;  P,E,h \\<turnstile> e\\<^sub>2 : T \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\"\n\n| WTrtWhile:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Boolean;  P,E,h \\<turnstile> c : T \\<rbrakk>\n  \\<Longrightarrow>  P,E,h \\<turnstile> while(e) c : Void\"\n\n| WTrtThrow:\n  \"\\<lbrakk>P,E,h \\<turnstile> e : T'; is_refT T'\\<rbrakk>  \n \\<Longrightarrow>  P,E,h \\<turnstile> throw e : T\"\n\n\n| WTrtNil:\n\"P,E,h \\<turnstile> [] [:] []\"\n\n| WTrtCons:\n \"\\<lbrakk> P,E,h \\<turnstile> e : T;  P,E,h \\<turnstile> es [:] Ts \\<rbrakk> \\<Longrightarrow>  P,E,h \\<turnstile> e#es [:] T#Ts\""], ["", "declare\n  WTrt_WTrts.intros[intro!]\n  WTrtNil[iff]"], ["", "declare\n  WTrtFAcc[rule del] WTrtFAccNT[rule del]\n  WTrtFAss[rule del] WTrtFAssNT[rule del]\n  WTrtCall[rule del] WTrtCallNT[rule del]"], ["", "lemmas WTrt_induct = WTrt_WTrts.induct [split_format (complete)]\n  and WTrt_inducts = WTrt_WTrts.inducts [split_format (complete)]"], ["", "subsection\\<open>Easy consequences\\<close>"], ["", "inductive_simps [iff]:\n  \"P,E,h \\<turnstile> [] [:] Ts\"\n  \"P,E,h \\<turnstile> e#es [:] T#Ts\"\n  \"P,E,h \\<turnstile> (e#es) [:] Ts\"\n  \"P,E,h \\<turnstile> Val v : T\"\n  \"P,E,h \\<turnstile> Var V : T\"\n  \"P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 : T\\<^sub>2\"\n  \"P,E,h \\<turnstile> {V:T; e} : T'\""], ["", "lemma [simp]: \"\\<forall>Ts. (P,E,h \\<turnstile> es\\<^sub>1 @ es\\<^sub>2 [:] Ts) =\n  (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2. Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and> P,E,h \\<turnstile> es\\<^sub>1 [:] Ts\\<^sub>1 & P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>Ts.\n       (P,E,h \\<turnstile> es\\<^sub>1 @ es\\<^sub>2 [:] Ts) =\n       (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n           Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n           P,E,h \\<turnstile> es\\<^sub>1 [:] Ts\\<^sub>1 \\<and>\n           P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply(induct_tac es\\<^sub>1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<forall>Ts.\n       (P,E,h \\<turnstile> [] @ es\\<^sub>2 [:] Ts) =\n       (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n           Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n           P,E,h \\<turnstile> [] [:] Ts\\<^sub>1 \\<and>\n           P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)\n 2. \\<And>a list.\n       \\<forall>Ts.\n          (P,E,h \\<turnstile> list @ es\\<^sub>2 [:] Ts) =\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2) \\<Longrightarrow>\n       \\<forall>Ts.\n          (P,E,h \\<turnstile> (a # list) @ es\\<^sub>2 [:] Ts) =\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> a # list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a list.\n       \\<forall>Ts.\n          (P,E,h \\<turnstile> list @ es\\<^sub>2 [:] Ts) =\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2) \\<Longrightarrow>\n       \\<forall>Ts.\n          (P,E,h \\<turnstile> (a # list) @ es\\<^sub>2 [:] Ts) =\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> a # list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a list Ts.\n       \\<forall>Ts.\n          (P,E,h \\<turnstile> list @ es\\<^sub>2 [:] Ts) =\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2) \\<Longrightarrow>\n       (\\<exists>T Tsa.\n           Ts = T # Tsa \\<and>\n           P,E,h \\<turnstile> a : T \\<and>\n           (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n               Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n               P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n               P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)) =\n       (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n           Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n           (\\<exists>T Ts.\n               Ts\\<^sub>1 = T # Ts \\<and>\n               P,E,h \\<turnstile> a : T \\<and>\n               P,E,h \\<turnstile> list [:] Ts) \\<and>\n           P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply(erule thin_rl)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a list Ts.\n       (\\<exists>T Tsa.\n           Ts = T # Tsa \\<and>\n           P,E,h \\<turnstile> a : T \\<and>\n           (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n               Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n               P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n               P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)) =\n       (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n           Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n           (\\<exists>T Ts.\n               Ts\\<^sub>1 = T # Ts \\<and>\n               P,E,h \\<turnstile> a : T \\<and>\n               P,E,h \\<turnstile> list [:] Ts) \\<and>\n           P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply (rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a list Ts.\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2) \\<Longrightarrow>\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\n 2. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply clarsimp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ts\\<^sub>1' Ts\\<^sub>2'.\n                            T # Ts\\<^sub>1 @ Ts\\<^sub>2 =\n                            Ts\\<^sub>1' @ Ts\\<^sub>2' \\<and>\n                            (\\<exists>T Ts.\n                                Ts\\<^sub>1' = T # Ts \\<and>\n                                P,E,h \\<turnstile> a : T \\<and>\n                                P,E,h \\<turnstile> list [:] Ts) \\<and>\n                            P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2'\n 2. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply(rule exI)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> T # Ts\\<^sub>1 @ Ts\\<^sub>2 =\n                         ?Ts\\<^sub>119 a list T Ts\\<^sub>1 Ts\\<^sub>2 @\n                         ?Ts\\<^sub>221 a list T Ts\\<^sub>1 Ts\\<^sub>2 \\<and>\n                         (\\<exists>Ta Ts.\n                             ?Ts\\<^sub>119 a list T Ts\\<^sub>1 Ts\\<^sub>2 =\n                             Ta # Ts \\<and>\n                             P,E,h \\<turnstile> a : Ta \\<and>\n                             P,E,h \\<turnstile> list [:] Ts) \\<and>\n                         P,E,h \\<turnstile> es\\<^sub>2 [:] ?Ts\\<^sub>221 a\n                      list T Ts\\<^sub>1 Ts\\<^sub>2\n 2. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply(rule conjI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> T # Ts\\<^sub>1 @ Ts\\<^sub>2 =\n                         ?Ts\\<^sub>119 a list T Ts\\<^sub>1 Ts\\<^sub>2 @\n                         ?Ts\\<^sub>221 a list T Ts\\<^sub>1 Ts\\<^sub>2\n 2. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>Ta Ts.\n                             ?Ts\\<^sub>119 a list T Ts\\<^sub>1 Ts\\<^sub>2 =\n                             Ta # Ts \\<and>\n                             P,E,h \\<turnstile> a : Ta \\<and>\n                             P,E,h \\<turnstile> list [:] Ts) \\<and>\n                         P,E,h \\<turnstile> es\\<^sub>2 [:] ?Ts\\<^sub>221 a\n                      list T Ts\\<^sub>1 Ts\\<^sub>2\n 3. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "prefer 2"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>Ta Ts.\n                             ?Ts\\<^sub>119 a list T Ts\\<^sub>1 Ts\\<^sub>2 =\n                             Ta # Ts \\<and>\n                             P,E,h \\<turnstile> a : Ta \\<and>\n                             P,E,h \\<turnstile> list [:] Ts) \\<and>\n                         P,E,h \\<turnstile> es\\<^sub>2 [:] ?Ts\\<^sub>221 a\n                      list T Ts\\<^sub>1 Ts\\<^sub>2\n 2. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> T # Ts\\<^sub>1 @ Ts\\<^sub>2 =\n                         ?Ts\\<^sub>119 a list T Ts\\<^sub>1 Ts\\<^sub>2 @\n                         ?Ts\\<^sub>221 a list T Ts\\<^sub>1 Ts\\<^sub>2\n 3. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a list T Ts\\<^sub>1 Ts\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> a : T;\n        P,E,h \\<turnstile> list [:] Ts\\<^sub>1;\n        P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> T # Ts\\<^sub>1 @ Ts\\<^sub>2 =\n                         (T # Ts\\<^sub>1) @ Ts\\<^sub>2\n 2. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a list Ts.\n       \\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n          Ts = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n          (\\<exists>T Ts.\n              Ts\\<^sub>1 = T # Ts \\<and>\n              P,E,h \\<turnstile> a : T \\<and>\n              P,E,h \\<turnstile> list [:] Ts) \\<and>\n          P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2 \\<Longrightarrow>\n       \\<exists>T Tsa.\n          Ts = T # Tsa \\<and>\n          P,E,h \\<turnstile> a : T \\<and>\n          (\\<exists>Ts\\<^sub>1 Ts\\<^sub>2.\n              Tsa = Ts\\<^sub>1 @ Ts\\<^sub>2 \\<and>\n              P,E,h \\<turnstile> list [:] Ts\\<^sub>1 \\<and>\n              P,E,h \\<turnstile> es\\<^sub>2 [:] Ts\\<^sub>2)", "apply fastforce"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "inductive_cases WTrt_elim_cases[elim!]:\n  \"P,E,h \\<turnstile> new C : T\"\n  \"P,E,h \\<turnstile> Cast C e : T\"\n  \"P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : T\"\n  \"P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\"\n  \"P,E,h \\<turnstile> V:=e : T\"\n  \"P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\"\n  \"P,E,h \\<turnstile> e\\<bullet>F{Cs} := v : T\"\n  \"P,E,h \\<turnstile> e\\<bullet>M(es) : T\"\n  \"P,E,h \\<turnstile> e\\<bullet>(C::)M(es) : T\"\n  \"P,E,h \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\"\n  \"P,E,h \\<turnstile> while(e) c : T\"\n  \"P,E,h \\<turnstile> throw e : T\""], ["", "subsection\\<open>Some interesting lemmas\\<close>"], ["", "lemma WTrts_Val[simp]:\n \"\\<And>Ts. (P,E,h \\<turnstile> map Val vs [:] Ts) = (map (\\<lambda>v. (P \\<turnstile> typeof\\<^bsub>h\\<^esub>) v) vs = map Some Ts)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       (P,E,h \\<turnstile> map Val vs [:] Ts) =\n       (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> vs = map Some Ts)", "apply(induct vs)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>Ts.\n       (P,E,h \\<turnstile> map Val [] [:] Ts) =\n       (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> [] = map Some Ts)\n 2. \\<And>a vs Ts.\n       (\\<And>Ts.\n           (P,E,h \\<turnstile> map Val vs [:] Ts) =\n           (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> vs =\n            map Some Ts)) \\<Longrightarrow>\n       (P,E,h \\<turnstile> map Val (a # vs) [:] Ts) =\n       (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> (a # vs) = map Some Ts)", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a vs Ts.\n       (\\<And>Ts.\n           (P,E,h \\<turnstile> map Val vs [:] Ts) =\n           (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> vs =\n            map Some Ts)) \\<Longrightarrow>\n       (P,E,h \\<turnstile> map Val (a # vs) [:] Ts) =\n       (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> (a # vs) = map Some Ts)", "apply(case_tac Ts)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a vs Ts.\n       \\<lbrakk>\\<And>Ts.\n                   (P,E,h \\<turnstile> map Val vs [:] Ts) =\n                   (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> vs =\n                    map Some Ts);\n        Ts = []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> map Val (a # vs) [:] Ts) =\n                         (map P \\<turnstile> typeof\\<^bsub>h\\<^esub>\n                           (a # vs) =\n                          map Some Ts)\n 2. \\<And>a vs Ts aa list.\n       \\<lbrakk>\\<And>Ts.\n                   (P,E,h \\<turnstile> map Val vs [:] Ts) =\n                   (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> vs =\n                    map Some Ts);\n        Ts = aa # list\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> map Val (a # vs) [:] Ts) =\n                         (map P \\<turnstile> typeof\\<^bsub>h\\<^esub>\n                           (a # vs) =\n                          map Some Ts)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a vs Ts aa list.\n       \\<lbrakk>\\<And>Ts.\n                   (P,E,h \\<turnstile> map Val vs [:] Ts) =\n                   (map P \\<turnstile> typeof\\<^bsub>h\\<^esub> vs =\n                    map Some Ts);\n        Ts = aa # list\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> map Val (a # vs) [:] Ts) =\n                         (map P \\<turnstile> typeof\\<^bsub>h\\<^esub>\n                           (a # vs) =\n                          map Some Ts)", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma WTrts_same_length: \"\\<And>Ts. P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> length es = length Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> length es = length Ts", "by(induct es type:list)auto"], ["", "lemma WTrt_env_mono:\n  \"P,E,h \\<turnstile> e : T \\<Longrightarrow> (\\<And>E'. E \\<subseteq>\\<^sub>m E' \\<Longrightarrow> P,E',h \\<turnstile> e : T)\" and\n  \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> (\\<And>E'. E \\<subseteq>\\<^sub>m E' \\<Longrightarrow> P,E',h \\<turnstile> es [:] Ts)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     (\\<And>E'.\n         E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n         P,E',h \\<turnstile> e : T)) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     (\\<And>E'.\n         E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n         P,E',h \\<turnstile> es [:] Ts))", "apply(induct rule: WTrt_inducts)"], ["proof (prove)\ngoal (21 subgoals):\n 1. \\<And>C E h E'.\n       \\<lbrakk>is_class P C; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> new C : Class C\n 2. \\<And>E h e T C E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        is_refT T; is_class P C; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Cast C e : Class C\n 3. \\<And>E h e T C E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        is_refT T; is_class P C; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>h v T E E'.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Val v : T\n 5. \\<And>E V T h E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Var V : T\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 7. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 8. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 9. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 10. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n         Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>2 : T';\n         P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\nA total of 21 subgoals...", "apply(simp add: WTrtNew)"], ["proof (prove)\ngoal (20 subgoals):\n 1. \\<And>E h e T C E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        is_refT T; is_class P C; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Cast C e : Class C\n 2. \\<And>E h e T C E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        is_refT T; is_class P C; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 3. \\<And>h v T E E'.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Val v : T\n 4. \\<And>E V T h E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Var V : T\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 6. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 7. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 8. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 9. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 10. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>1 : NT;\n         P,E,h \\<turnstile> e\\<^sub>2 : T';\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>2 : T';\n         P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\nA total of 20 subgoals...", "apply(fastforce simp: WTrtDynCast)"], ["proof (prove)\ngoal (19 subgoals):\n 1. \\<And>E h e T C E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        is_refT T; is_class P C; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 2. \\<And>h v T E E'.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Val v : T\n 3. \\<And>E V T h E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Var V : T\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 5. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 6. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 7. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 8. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 9. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 10. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : Class C;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\nA total of 19 subgoals...", "apply(fastforce simp: WTrtStaticCast)"], ["proof (prove)\ngoal (18 subgoals):\n 1. \\<And>h v T E E'.\n       \\<lbrakk>P \\<turnstile> typeof\\<^bsub>h\\<^esub> v =\n                \\<lfloor>T\\<rfloor>;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Val v : T\n 2. \\<And>E V T h E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Var V : T\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 4. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 5. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 6. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 7. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 8. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 9. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 10. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : Class C';\n         P \\<turnstile> Path C' to C unique;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n         es : T\nA total of 18 subgoals...", "apply(fastforce simp: WTrtVal)"], ["proof (prove)\ngoal (17 subgoals):\n 1. \\<And>E V T h E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Var V : T\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 3. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 4. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 5. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 6. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 7. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 8. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 9. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 10. \\<And>E h e es Ts Copt M T E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : NT;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> es [:] Ts;\n         E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\nA total of 17 subgoals...", "apply(simp add: WTrtVar map_le_def dom_def)"], ["proof (prove)\ngoal (16 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of Eq \\<Rightarrow> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 2. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 3. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 4. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 5. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 6. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 7. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 8. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 9. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 10. \\<And>E V T h e T' E'.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>E'.\n            E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : T';\n         is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\nA total of 16 subgoals...", "apply(fastforce simp add: WTrtBinOp)"], ["proof (prove)\ngoal (15 subgoals):\n 1. \\<And>E V T h e T' E'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> V:=e : T\n 2. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 3. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 4. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 5. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 6. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 7. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 8. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 9. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 10. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                          e\\<^sub>2 : T\\<^sub>2\nA total of 15 subgoals...", "apply (force simp:map_le_def)"], ["proof (prove)\ngoal (14 subgoals):\n 1. \\<And>E h e C Cs F T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 2. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 3. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 4. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 5. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 6. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 7. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 8. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 9. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 10. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : Boolean;\n         P,E,h \\<turnstile> e\\<^sub>1 : T;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>1 : T;\n         P,E,h \\<turnstile> e\\<^sub>2 : T;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e\\<^sub>2 : T;\n         E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                          else e\\<^sub>2 : T\nA total of 14 subgoals...", "apply(fastforce simp: WTrtFAcc)"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>E h e F Cs T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<bullet>F{Cs} : T\n 2. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 3. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 4. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 5. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 6. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 7. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 8. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 9. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 10. \\<And>E h e c T E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : Boolean;\n         P,E,h \\<turnstile> c : T;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> c : T;\n         E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\nA total of 13 subgoals...", "apply(simp add: WTrtFAccNT)"], ["proof (prove)\ngoal (12 subgoals):\n 1. \\<And>E h e\\<^sub>1 C Cs F T e\\<^sub>2 T' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : Class C;\n        Cs \\<noteq> []; P \\<turnstile> C has least F:T via Cs;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 2. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 3. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 4. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 5. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 6. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 7. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 8. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 9. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 10. \\<And>E h e T' T E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : T';\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : T';\n         is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\nA total of 12 subgoals...", "apply(fastforce simp: WTrtFAss)"], ["proof (prove)\ngoal (11 subgoals):\n 1. \\<And>E h e\\<^sub>1 e\\<^sub>2 T' T F Cs E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 2. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 3. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 4. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 5. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 6. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 7. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 8. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 9. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 10. \\<And>E h E'.\n        E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n        P,E',h \\<turnstile> [] [:] []\nA total of 11 subgoals...", "apply(fastforce simp: WTrtFAssNT)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>E h e C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e None M es : T\n 2. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 3. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 4. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 5. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 6. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 7. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 8. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 9. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 10. \\<And>E h e T es Ts E'.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> e : T;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>E'.\n            E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n            P,E',h \\<turnstile> es [:] Ts;\n         E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n        \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: WTrtCall)"], ["proof (prove)\ngoal (9 subgoals):\n 1. \\<And>E h e C' C M Ts T a b Cs es Ts' E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Class C';\n        P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\n 2. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 3. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 4. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 5. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 6. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 7. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 8. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 9. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: WTrtStaticCall)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>E h e es Ts Copt M T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> Call e Copt M es : T\n 2. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 3. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 4. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 5. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 6. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 7. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 8. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: WTrtCallNT)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>E V T h e T' E'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>E'.\n           E(V \\<mapsto> T) \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_type P T; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> {V:T; e} : T'\n 2. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 3. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 4. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 5. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 6. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 7. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: map_le_def)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>E h e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 2. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 3. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 4. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 5. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 6. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>E h e e\\<^sub>1 T e\\<^sub>2 E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> e\\<^sub>1 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>1 : T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e\\<^sub>2 : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 2. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 3. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 4. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 5. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: WTrtCond)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>E h e c T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : Boolean;\n        P,E,h \\<turnstile> c : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> c : T;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> while (e) c : Void\n 2. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 3. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 4. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: WTrtWhile)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>E h e T' T E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T';\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T';\n        is_refT T'; E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> throw e : T\n 2. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 3. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(fastforce simp: WTrtThrow)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>E h E'.\n       E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n       P,E',h \\<turnstile> [] [:] []\n 2. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(simp add: WTrtNil)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>E h e T es Ts E'.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> e : T;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>E'.\n           E \\<subseteq>\\<^sub>m E' \\<Longrightarrow>\n           P,E',h \\<turnstile> es [:] Ts;\n        E \\<subseteq>\\<^sub>m E'\\<rbrakk>\n       \\<Longrightarrow> P,E',h \\<turnstile> e # es [:] T # Ts", "apply(simp add: WTrtCons)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma WT_implies_WTrt: \"P,E \\<turnstile> e :: T \\<Longrightarrow> P,E,h \\<turnstile> e : T\"\nand WTs_implies_WTrts: \"P,E \\<turnstile> es [::] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E \\<turnstile> e :: T \\<Longrightarrow> P,E,h \\<turnstile> e : T) &&&\n    (P,E \\<turnstile> es [::] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:] Ts)", "proof(induct rule: WT_WTs_inducts)"], ["proof (state)\ngoal (18 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>v T E.\n       typeof v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 5. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of\n        Eq \\<Rightarrow> T\\<^sub>1 = T\\<^sub>2 \\<and> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 7. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 8. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 9. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 10. \\<And>E e C' C M Ts T a b Cs es Ts'.\n        \\<lbrakk>P,E \\<turnstile> e :: Class C';\n         P,E,h \\<turnstile> e : Class C';\n         P \\<turnstile> Path C' to C unique;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\nA total of 18 subgoals...", "case WTVal"], ["proof (state)\nthis:\n  typeof v_ = \\<lfloor>T_\\<rfloor>\n\ngoal (18 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>v T E.\n       typeof v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 5. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of\n        Eq \\<Rightarrow> T\\<^sub>1 = T\\<^sub>2 \\<and> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 7. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 8. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 9. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 10. \\<And>E e C' C M Ts T a b Cs es Ts'.\n        \\<lbrakk>P,E \\<turnstile> e :: Class C';\n         P,E,h \\<turnstile> e : Class C';\n         P \\<turnstile> Path C' to C unique;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n        es : T\nA total of 18 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  typeof v_ = \\<lfloor>T_\\<rfloor>\n\ngoal (1 subgoal):\n 1. P,E_,h \\<turnstile> Val v_ : T_", "by (fastforce dest:type_eq_type)"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> Val v_ : T_\n\ngoal (17 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of\n        Eq \\<Rightarrow> T\\<^sub>1 = T\\<^sub>2 \\<and> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 6. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 7. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 8. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 9. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 10. \\<And>E e C M Ts T a b Cs es Ts'.\n        \\<lbrakk>P,E \\<turnstile> e :: Class C;\n         P,E,h \\<turnstile> e : Class C;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\nA total of 17 subgoals...", "next"], ["proof (state)\ngoal (17 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of\n        Eq \\<Rightarrow> T\\<^sub>1 = T\\<^sub>2 \\<and> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 6. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 7. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 8. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 9. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 10. \\<And>E e C M Ts T a b Cs es Ts'.\n        \\<lbrakk>P,E \\<turnstile> e :: Class C;\n         P,E,h \\<turnstile> e : Class C;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\nA total of 17 subgoals...", "case WTBinOp"], ["proof (state)\nthis:\n  P,E_ \\<turnstile> e\\<^sub>1_ :: T\\<^sub>1_\n  P,E_,h \\<turnstile> e\\<^sub>1_ : T\\<^sub>1_\n  P,E_ \\<turnstile> e\\<^sub>2_ :: T\\<^sub>2_\n  P,E_,h \\<turnstile> e\\<^sub>2_ : T\\<^sub>2_\n  case bop_ of Eq \\<Rightarrow> T\\<^sub>1_ = T\\<^sub>2_ \\<and> T_ = Boolean\n  | Add \\<Rightarrow>\n      T\\<^sub>1_ = Integer \\<and> T\\<^sub>2_ = Integer \\<and> T_ = Integer\n\ngoal (17 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 bop T.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        case bop of\n        Eq \\<Rightarrow> T\\<^sub>1 = T\\<^sub>2 \\<and> T = Boolean\n        | Add \\<Rightarrow>\n            T\\<^sub>1 = Integer \\<and>\n            T\\<^sub>2 = Integer \\<and> T = Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 6. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 7. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 8. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 9. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 10. \\<And>E e C M Ts T a b Cs es Ts'.\n        \\<lbrakk>P,E \\<turnstile> e :: Class C;\n         P,E,h \\<turnstile> e : Class C;\n         P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n         P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\nA total of 17 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E_ \\<turnstile> e\\<^sub>1_ :: T\\<^sub>1_\n  P,E_,h \\<turnstile> e\\<^sub>1_ : T\\<^sub>1_\n  P,E_ \\<turnstile> e\\<^sub>2_ :: T\\<^sub>2_\n  P,E_,h \\<turnstile> e\\<^sub>2_ : T\\<^sub>2_\n  case bop_ of Eq \\<Rightarrow> T\\<^sub>1_ = T\\<^sub>2_ \\<and> T_ = Boolean\n  | Add \\<Rightarrow>\n      T\\<^sub>1_ = Integer \\<and> T\\<^sub>2_ = Integer \\<and> T_ = Integer\n\ngoal (1 subgoal):\n 1. P,E_,h \\<turnstile> e\\<^sub>1_ \\<guillemotleft>bop_\\<guillemotright> e\\<^sub>2_ : T_", "by (fastforce split:bop.splits)"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> e\\<^sub>1_ \\<guillemotleft>bop_\\<guillemotright> e\\<^sub>2_ : T_\n\ngoal (16 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 7. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 8. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 9. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 10. \\<And>T E V e T'.\n        \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n         P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\nA total of 16 subgoals...", "next"], ["proof (state)\ngoal (16 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 7. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 8. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 9. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 10. \\<And>T E V e T'.\n        \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n         P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\nA total of 16 subgoals...", "case WTFAcc"], ["proof (state)\nthis:\n  P,E_ \\<turnstile> e_ :: Class C_\n  P,E_,h \\<turnstile> e_ : Class C_\n  P \\<turnstile> C_ has least F_:T_ via Cs_\n\ngoal (16 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C F T Cs.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least F:T via Cs\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{Cs} : T\n 7. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 8. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 9. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 10. \\<And>T E V e T'.\n        \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n         P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\nA total of 16 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E_ \\<turnstile> e_ :: Class C_\n  P,E_,h \\<turnstile> e_ : Class C_\n  P \\<turnstile> C_ has least F_:T_ via Cs_\n\ngoal (1 subgoal):\n 1. P,E_,h \\<turnstile> e_\\<bullet>F_{Cs_} : T_", "by(fastforce intro!:WTrtFAcc dest:Subobjs_nonempty \n                  simp:LeastFieldDecl_def FieldDecls_def)"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> e_\\<bullet>F_{Cs_} : T_\n\ngoal (15 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 7. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 8. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 9. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                          e\\<^sub>2 : T\\<^sub>2\nA total of 15 subgoals...", "next"], ["proof (state)\ngoal (15 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 7. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 8. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 9. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                          e\\<^sub>2 : T\\<^sub>2\nA total of 15 subgoals...", "case WTFAss"], ["proof (state)\nthis:\n  P,E_ \\<turnstile> e\\<^sub>1_ :: Class C_\n  P,E_,h \\<turnstile> e\\<^sub>1_ : Class C_\n  P \\<turnstile> C_ has least F_:T_ via Cs_\n  P,E_ \\<turnstile> e\\<^sub>2_ :: T'_\n  P,E_,h \\<turnstile> e\\<^sub>2_ : T'_\n  P \\<turnstile> T'_ \\<le> T_\n\ngoal (15 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e\\<^sub>1 C F T Cs e\\<^sub>2 T'.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: Class C;\n        P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        P \\<turnstile> C has least F:T via Cs;\n        P,E \\<turnstile> e\\<^sub>2 :: T'; P,E,h \\<turnstile> e\\<^sub>2 : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{Cs} := e\\<^sub>2 : T\n 7. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 8. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 9. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                          e\\<^sub>2 : T\\<^sub>2\nA total of 15 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E_ \\<turnstile> e\\<^sub>1_ :: Class C_\n  P,E_,h \\<turnstile> e\\<^sub>1_ : Class C_\n  P \\<turnstile> C_ has least F_:T_ via Cs_\n  P,E_ \\<turnstile> e\\<^sub>2_ :: T'_\n  P,E_,h \\<turnstile> e\\<^sub>2_ : T'_\n  P \\<turnstile> T'_ \\<le> T_\n\ngoal (1 subgoal):\n 1. P,E_,h \\<turnstile> e\\<^sub>1_\\<bullet>F_{Cs_} := e\\<^sub>2_ : T_", "by(fastforce intro!:WTrtFAss dest:Subobjs_nonempty\n                  simp:LeastFieldDecl_def FieldDecls_def)"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> e\\<^sub>1_\\<bullet>F_{Cs_} := e\\<^sub>2_ : T_\n\ngoal (14 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 7. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 8. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 10. \\<And>E e e\\<^sub>1 T e\\<^sub>2.\n        \\<lbrakk>P,E \\<turnstile> e :: Boolean;\n         P,E,h \\<turnstile> e : Boolean; P,E \\<turnstile> e\\<^sub>1 :: T;\n         P,E,h \\<turnstile> e\\<^sub>1 : T; P,E \\<turnstile> e\\<^sub>2 :: T;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1\n                          else e\\<^sub>2 : T\nA total of 14 subgoals...", "next"], ["proof (state)\ngoal (14 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 7. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 8. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 10. \\<And>E e e\\<^sub>1 T e\\<^sub>2.\n        \\<lbrakk>P,E \\<turnstile> e :: Boolean;\n         P,E,h \\<turnstile> e : Boolean; P,E \\<turnstile> e\\<^sub>1 :: T;\n         P,E,h \\<turnstile> e\\<^sub>1 : T; P,E \\<turnstile> e\\<^sub>2 :: T;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1\n                          else e\\<^sub>2 : T\nA total of 14 subgoals...", "case WTCall"], ["proof (state)\nthis:\n  P,E_ \\<turnstile> e_ :: Class C_\n  P,E_,h \\<turnstile> e_ : Class C_\n  P \\<turnstile> C_ has least M_ = (Ts_, T_, a_, b_) via Cs_\n  P,E_ \\<turnstile> es_ [::] Ts'_\n  P,E_,h \\<turnstile> es_ [:] Ts'_\n  P \\<turnstile> Ts'_ [\\<le>] Ts_\n\ngoal (14 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 7. \\<And>E e C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e None M es : T\n 8. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 10. \\<And>E e e\\<^sub>1 T e\\<^sub>2.\n        \\<lbrakk>P,E \\<turnstile> e :: Boolean;\n         P,E,h \\<turnstile> e : Boolean; P,E \\<turnstile> e\\<^sub>1 :: T;\n         P,E,h \\<turnstile> e\\<^sub>1 : T; P,E \\<turnstile> e\\<^sub>2 :: T;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1\n                          else e\\<^sub>2 : T\nA total of 14 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E_ \\<turnstile> e_ :: Class C_\n  P,E_,h \\<turnstile> e_ : Class C_\n  P \\<turnstile> C_ has least M_ = (Ts_, T_, a_, b_) via Cs_\n  P,E_ \\<turnstile> es_ [::] Ts'_\n  P,E_,h \\<turnstile> es_ [:] Ts'_\n  P \\<turnstile> Ts'_ [\\<le>] Ts_\n\ngoal (1 subgoal):\n 1. P,E_,h \\<turnstile> Call e_ None M_ es_ : T_", "by (fastforce intro:WTrtCall)"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> Call e_ None M_ es_ : T_\n\ngoal (13 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        (\\<forall>Cs. \\<not> P \\<turnstile> Path D to C via Cs )\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>E e D C.\n       \\<lbrakk>P,E \\<turnstile> e :: Class D;\n        P,E,h \\<turnstile> e : Class D; is_class P C;\n        P \\<turnstile> Path D to C unique \\<or>\n        P \\<turnstile> C \\<preceq>\\<^sup>* D \\<and>\n        (\\<forall>Cs.\n            P \\<turnstile> Path C to D via Cs  \\<longrightarrow>\n            Subobjs\\<^sub>R P C Cs)\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> \\<lparr>C\\<rparr>e : Class C\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V : T\n 5. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E \\<turnstile> e :: T';\n        P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : T\n 6. \\<And>E e C' C M Ts T a b Cs es Ts'.\n       \\<lbrakk>P,E \\<turnstile> e :: Class C';\n        P,E,h \\<turnstile> e : Class C'; P \\<turnstile> Path C' to C unique;\n        P \\<turnstile> C has least M = (Ts, T, a, b) via Cs;\n        P,E \\<turnstile> es [::] Ts'; P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Call e \\<lfloor>C\\<rfloor> M\n       es : T\n 7. \\<And>T E V e T'.\n       \\<lbrakk>is_type P T; P,E(V \\<mapsto> T) \\<turnstile> e :: T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} : T'\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E \\<turnstile> e\\<^sub>1 :: T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E \\<turnstile> e\\<^sub>2 :: T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1;;\n                         e\\<^sub>2 : T\\<^sub>2\n 9. \\<And>E e e\\<^sub>1 T e\\<^sub>2.\n       \\<lbrakk>P,E \\<turnstile> e :: Boolean;\n        P,E,h \\<turnstile> e : Boolean; P,E \\<turnstile> e\\<^sub>1 :: T;\n        P,E,h \\<turnstile> e\\<^sub>1 : T; P,E \\<turnstile> e\\<^sub>2 :: T;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1\n                         else e\\<^sub>2 : T\n 10. \\<And>E e c T.\n        \\<lbrakk>P,E \\<turnstile> e :: Boolean;\n         P,E,h \\<turnstile> e : Boolean; P,E \\<turnstile> c :: T;\n         P,E,h \\<turnstile> c : T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> while (e) c : Void\nA total of 13 subgoals...", "qed (auto simp del:fun_upd_apply)"], ["", "end"]]}