{"file_name": "/home/qj213/afp-2021-10-22/thys/Poincare_Disc/Poincare_Lines_Ideal_Points.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Poincare_Disc", "problem_names": ["lemma calc_ideal_point_1_unit:\n  assumes \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\"\n  shows \"z1 * cnj z1 = z2 * cnj z2\"", "lemma calc_ideal_point_2_unit:\n  assumes \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\"\n  shows \"z1 * cnj z1 = z2 * cnj z2\"", "lemma calc_ideal_points_on_unit_circle:\n  shows \"\\<forall> z \\<in> calc_ideal_points H. z \\<in> circline_set unit_circle\"", "lemma calc_ideal_point1_sq:\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\"", "lemma calc_ideal_point2_sq:\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\"", "lemma calc_ideal_point1_mix:\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2 \"", "lemma calc_ideal_point2_mix:\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2 \"", "lemma calc_ideal_point1_on_circline:\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"A*z1*cnj z1 + B*cnj z1*z2 + cnj B*z1*cnj z2 + A*z2*cnj z2 = 0\" (is \"?lhs = 0\")", "lemma calc_ideal_point2_on_circline:\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"A*z1*cnj z1 + B*cnj z1*z2 + cnj B*z1*cnj z2 + A*z2*cnj z2 = 0\" (is \"?lhs = 0\")", "lemma calc_ideal_points_on_circline:\n  assumes \"is_poincare_line H\"\n  shows \"\\<forall> z \\<in> calc_ideal_points H. z \\<in> circline_set H\"", "lemma calc_ideal_points_cvec_different [simp]:\n  assumes \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\" \"is_real A\"\n  shows \"\\<not> (calc_ideal_point1_cvec A B \\<approx>\\<^sub>v calc_ideal_point2_cvec A B)\"", "lemma calc_ideal_points_different:\n  assumes \"is_poincare_line H\"\n  shows  \"\\<exists> i1 \\<in> (calc_ideal_points H). \\<exists> i2 \\<in> (calc_ideal_points H). i1 \\<noteq> i2\"", "lemma two_calc_ideal_points [simp]:\n  assumes \"is_poincare_line H\"                \n  shows \"card (calc_ideal_points H) = 2\"", "lemma ideal_points_on_unit_circle:\n  shows \"\\<forall> z \\<in> ideal_points H. z \\<in> circline_set unit_circle\"", "lemma ideal_points_on_circline:\n  shows \"\\<forall> z \\<in> ideal_points H. z \\<in> circline_set H\"", "lemma two_ideal_points:\n  assumes \"is_poincare_line H\"\n  shows \"card (ideal_points H) = 2\"", "lemma ideal_points_unique:\n  assumes \"is_poincare_line H\"\n  shows \"ideal_points H = calc_ideal_points H\"", "lemma obtain_ideal_points:\n  assumes \"is_poincare_line H\"\n  obtains i1 i2 where \"i1 \\<noteq> i2\" \"ideal_points H = {i1, i2}\"", "lemma ideal_points_different:\n  assumes \"u \\<in> unit_disc\" \"v \\<in> unit_disc\" \"u \\<noteq> v\"\n  assumes \"ideal_points (poincare_line u v) = {i1, i2}\"\n  shows \"i1 \\<noteq> i2\" \"u \\<noteq> i1\" \"u \\<noteq> i2\" \"v \\<noteq> i1\" \"v \\<noteq> i2\"", "lemma ideal_points_line_unique:        \n  assumes \"is_poincare_line H\" \"ideal_points H = {i1, i2}\"\n  shows \"H = poincare_line i1 i2\"", "lemma ideal_points_x_axis\n  [simp]: \"ideal_points x_axis = {of_complex (-1), of_complex 1}\"", "lemma ideal_points_proportional:\n  assumes \"is_poincare_line H\" \"ideal_points H = {i1, i2}\" \"to_complex i1 = cor k * to_complex i2\"\n  shows \"0\\<^sub>h \\<in> circline_set H\"", "lemma ideal_points_moebius_circline [simp]:\n  assumes  \"unit_circle_fix M\" \"is_poincare_line H\"\n  shows \"ideal_points (moebius_circline M H) = (moebius_pt M) ` (ideal_points H)\" (is \"?I' = ?M ` ?I\")", "lemma ideal_points_poincare_line_moebius [simp]:\n  assumes \"unit_disc_fix M\"  \"u \\<in> unit_disc\" \"v \\<in> unit_disc\" \"u \\<noteq> v\"\n  assumes \"ideal_points (poincare_line u v) = {i1, i2}\"\n  shows \"ideal_points (poincare_line (moebius_pt M u) (moebius_pt M v)) = {moebius_pt M i1, moebius_pt M i2}\"", "lemma ideal_points_conjugate [simp]:\n  assumes \"is_poincare_line H\"\n  shows \"ideal_points (conjugate_circline H) = conjugate ` (ideal_points H)\" (is \"?I' = ?M ` ?I\")", "lemma ideal_points_poincare_line_conjugate [simp]:\n  assumes\"u \\<in> unit_disc\" \"v \\<in> unit_disc\" \"u \\<noteq> v\"\n  assumes \"ideal_points (poincare_line u v) = {i1, i2}\"\n  shows \"ideal_points (poincare_line (conjugate u) (conjugate v)) = {conjugate i1, conjugate i2}\""], "translations": [["", "lemma calc_ideal_point_1_unit:\n  assumes \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\"\n  shows \"z1 * cnj z1 = z2 * cnj z2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "let ?discr = \"Re ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"?discr > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "using assms"], ["proof (prove)\nusing this:\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point1_cvec A B\n\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "by (simp add: cmod_power2)"], ["proof (state)\nthis:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"(B*(-A - \\<i>*sqrt(?discr))) * cnj (B*(-A - \\<i>*sqrt(?discr))) = (B * cnj B) * (A\\<^sup>2 + cor (abs ?discr))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B *\n    (- A -\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    cnj (B *\n         (- A -\n          \\<i> *\n          cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n    B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)", "using \\<open>is_real A\\<close> eq_cnj_iff_real[of A]"], ["proof (prove)\nusing this:\n  is_real A\n  (cnj A = A) = is_real A\n\ngoal (1 subgoal):\n 1. B *\n    (- A -\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    cnj (B *\n         (- A -\n          \\<i> *\n          cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n    B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)", "by (simp add: field_simps power2_eq_square)"], ["proof (state)\nthis:\n  B *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A -\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  B * cnj B *\n  (A\\<^sup>2 + cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "also"], ["proof (state)\nthis:\n  B *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A -\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  B * cnj B *\n  (A\\<^sup>2 + cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"... = (B * cnj B) * (cmod B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "using \\<open>?discr > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "using assms"], ["proof (prove)\nusing this:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point1_cvec A B\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "using complex_of_real_Re[of \"(cmod B)\\<^sup>2 - (Re A)\\<^sup>2\"] complex_of_real_Re[of A] \\<open>is_real A\\<close>"], ["proof (prove)\nusing this:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)) \\<Longrightarrow>\n  cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))) =\n  cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  B * cnj B *\n  (A\\<^sup>2 +\n   cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n  B * cnj B * cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "also"], ["proof (state)\nthis:\n  B * cnj B *\n  (A\\<^sup>2 +\n   cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n  B * cnj B * cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"... = (cmod B)\\<^sup>2 * cnj ((cmod B)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj B * cor ((cmod B)\\<^sup>2) =\n    cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))", "using complex_cnj_complex_of_real complex_mult_cnj_cmod"], ["proof (prove)\nusing this:\n  cnj (cor ?x) = cor ?x\n  ?z * cnj ?z = cor ((cmod ?z)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. B * cnj B * cor ((cmod B)\\<^sup>2) =\n    cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))", "by presburger"], ["proof (state)\nthis:\n  B * cnj B * cor ((cmod B)\\<^sup>2) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "finally"], ["proof (chain)\npicking this:\n  B *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A -\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))", "show ?thesis"], ["proof (prove)\nusing this:\n  B *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A -\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "using assms"], ["proof (prove)\nusing this:\n  B *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A -\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point1_cvec A B\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "by simp"], ["proof (state)\nthis:\n  z1 * cnj z1 = z2 * cnj z2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_point_2_unit:\n  assumes \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\"\n  shows \"z1 * cnj z1 = z2 * cnj z2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "let ?discr = \"Re ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"?discr > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "using assms"], ["proof (prove)\nusing this:\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point2_cvec A B\n\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "by (simp add: cmod_power2)"], ["proof (state)\nthis:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"(B*(-A + \\<i>*sqrt(?discr))) * cnj (B*(-A + \\<i>*sqrt(?discr))) = (B * cnj B) * (A\\<^sup>2 + cor (abs ?discr))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    cnj (B *\n         (- A +\n          \\<i> *\n          cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n    B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)", "using \\<open>is_real A\\<close> eq_cnj_iff_real[of A]"], ["proof (prove)\nusing this:\n  is_real A\n  (cnj A = A) = is_real A\n\ngoal (1 subgoal):\n 1. B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    cnj (B *\n         (- A +\n          \\<i> *\n          cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n    B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)", "by (simp add: field_simps power2_eq_square)"], ["proof (state)\nthis:\n  B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A +\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  B * cnj B *\n  (A\\<^sup>2 + cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "also"], ["proof (state)\nthis:\n  B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A +\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  B * cnj B *\n  (A\\<^sup>2 + cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"... = (B * cnj B) * (cmod B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "using \\<open>?discr > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "using assms"], ["proof (prove)\nusing this:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point2_cvec A B\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "using complex_of_real_Re[of \"(cmod B)\\<^sup>2 - (Re A)\\<^sup>2\"] complex_of_real_Re[of A] \\<open>is_real A\\<close>"], ["proof (prove)\nusing this:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)) \\<Longrightarrow>\n  cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))) =\n  cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (A\\<^sup>2 +\n     cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n    B * cnj B * cor ((cmod B)\\<^sup>2)", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  B * cnj B *\n  (A\\<^sup>2 +\n   cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n  B * cnj B * cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "also"], ["proof (state)\nthis:\n  B * cnj B *\n  (A\\<^sup>2 +\n   cor \\<bar>Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\\<bar>) =\n  B * cnj B * cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "have \"... = (cmod B)\\<^sup>2 * cnj ((cmod B)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj B * cor ((cmod B)\\<^sup>2) =\n    cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))", "using complex_cnj_complex_of_real complex_mult_cnj_cmod"], ["proof (prove)\nusing this:\n  cnj (cor ?x) = cor ?x\n  ?z * cnj ?z = cor ((cmod ?z)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. B * cnj B * cor ((cmod B)\\<^sup>2) =\n    cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))", "by presburger"], ["proof (state)\nthis:\n  B * cnj B * cor ((cmod B)\\<^sup>2) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "finally"], ["proof (chain)\npicking this:\n  B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A +\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))", "show ?thesis"], ["proof (prove)\nusing this:\n  B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A +\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "using assms"], ["proof (prove)\nusing this:\n  B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  cnj (B *\n       (- A +\n        \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))) =\n  cor ((cmod B)\\<^sup>2) * cnj (cor ((cmod B)\\<^sup>2))\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (z1, z2) = calc_ideal_point2_cvec A B\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = z2 * cnj z2", "by simp"], ["proof (state)\nthis:\n  z1 * cnj z1 = z2 * cnj z2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_points_on_unit_circle:\n  shows \"\\<forall> z \\<in> calc_ideal_points H. z \\<in> circline_set unit_circle\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set unit_circle", "unfolding circline_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>calc_ideal_points H.\n       z \\<in> Collect (on_circline unit_circle)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>calc_ideal_points H. on_circline unit_circle z", "proof (transfer, transfer)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H.\n       hermitean H \\<and> H \\<noteq> mat_zero \\<Longrightarrow>\n       Ball (calc_ideal_points_cmat_cvec H)\n        (on_circline_cmat_cvec unit_circle_cmat)", "fix H"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H.\n       hermitean H \\<and> H \\<noteq> mat_zero \\<Longrightarrow>\n       Ball (calc_ideal_points_cmat_cvec H)\n        (on_circline_cmat_cvec unit_circle_cmat)", "assume hh: \"hermitean H \\<and> H \\<noteq> mat_zero\""], ["proof (state)\nthis:\n  hermitean H \\<and> H \\<noteq> mat_zero\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       hermitean H \\<and> H \\<noteq> mat_zero \\<Longrightarrow>\n       Ball (calc_ideal_points_cmat_cvec H)\n        (on_circline_cmat_cvec unit_circle_cmat)", "obtain A B C D where *: \"H = (A, B, C, D)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A B C D.\n        H = (A, B, C, D) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases H, auto)"], ["proof (state)\nthis:\n  H = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       hermitean H \\<and> H \\<noteq> mat_zero \\<Longrightarrow>\n       Ball (calc_ideal_points_cmat_cvec H)\n        (on_circline_cmat_cvec unit_circle_cmat)", "have \"\\<forall> (z1, z2) \\<in> calc_ideal_points_cmat_cvec H. z1 * cnj z1 = z2 * cnj z2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       z1 * cnj z1 = z2 * cnj z2", "using hermitean_elems[of A B C D]"], ["proof (prove)\nusing this:\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       z1 * cnj z1 = z2 * cnj z2", "unfolding calc_ideal_points_cmat_cvec_def"], ["proof (prove)\nusing this:\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\n             \\<in>if is_poincare_line_cmat H\n                  then let (A, B, C, D) = H\n                       in {calc_ideal_point1_cvec A B,\n                           calc_ideal_point2_cvec A B}\n                  else {(- 1, 1), (1, 1)}.\n       z1 * cnj z1 = z2 * cnj z2", "using calc_ideal_point_1_unit[of A B]"], ["proof (prove)\nusing this:\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n  \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n   (?z1.0, ?z2.0) = calc_ideal_point1_cvec A B\\<rbrakk>\n  \\<Longrightarrow> ?z1.0 * cnj ?z1.0 = ?z2.0 * cnj ?z2.0\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\n             \\<in>if is_poincare_line_cmat H\n                  then let (A, B, C, D) = H\n                       in {calc_ideal_point1_cvec A B,\n                           calc_ideal_point2_cvec A B}\n                  else {(- 1, 1), (1, 1)}.\n       z1 * cnj z1 = z2 * cnj z2", "using calc_ideal_point_2_unit[of A B]"], ["proof (prove)\nusing this:\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n  \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n   (?z1.0, ?z2.0) = calc_ideal_point1_cvec A B\\<rbrakk>\n  \\<Longrightarrow> ?z1.0 * cnj ?z1.0 = ?z2.0 * cnj ?z2.0\n  \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n   (?z1.0, ?z2.0) = calc_ideal_point2_cvec A B\\<rbrakk>\n  \\<Longrightarrow> ?z1.0 * cnj ?z1.0 = ?z2.0 * cnj ?z2.0\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\n             \\<in>if is_poincare_line_cmat H\n                  then let (A, B, C, D) = H\n                       in {calc_ideal_point1_cvec A B,\n                           calc_ideal_point2_cvec A B}\n                  else {(- 1, 1), (1, 1)}.\n       z1 * cnj z1 = z2 * cnj z2", "using hh *"], ["proof (prove)\nusing this:\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n  \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n   (?z1.0, ?z2.0) = calc_ideal_point1_cvec A B\\<rbrakk>\n  \\<Longrightarrow> ?z1.0 * cnj ?z1.0 = ?z2.0 * cnj ?z2.0\n  \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n   (?z1.0, ?z2.0) = calc_ideal_point2_cvec A B\\<rbrakk>\n  \\<Longrightarrow> ?z1.0 * cnj ?z1.0 = ?z2.0 * cnj ?z2.0\n  hermitean H \\<and> H \\<noteq> mat_zero\n  H = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\n             \\<in>if is_poincare_line_cmat H\n                  then let (A, B, C, D) = H\n                       in {calc_ideal_point1_cvec A B,\n                           calc_ideal_point2_cvec A B}\n                  else {(- 1, 1), (1, 1)}.\n       z1 * cnj z1 = z2 * cnj z2", "apply (cases \"calc_ideal_point1_cvec A B\", cases \"calc_ideal_point2_cvec A B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>hermitean (A, B, C, D) \\<Longrightarrow> is_real A;\n        hermitean (A, B, C, D) \\<Longrightarrow> is_real D;\n        hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C;\n        hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C;\n        \\<And>z1 z2.\n           \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n            (z1, z2) = calc_ideal_point1_cvec A B\\<rbrakk>\n           \\<Longrightarrow> z1 * cnj z1 = z2 * cnj z2;\n        \\<And>z1 z2.\n           \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n            (z1, z2) = calc_ideal_point2_cvec A B\\<rbrakk>\n           \\<Longrightarrow> z1 * cnj z1 = z2 * cnj z2;\n        hermitean H \\<and> H \\<noteq> mat_zero; H = (A, B, C, D);\n        calc_ideal_point1_cvec A B = (a, b);\n        hermitean (A, B, C, D) \\<Longrightarrow> is_real A;\n        hermitean (A, B, C, D) \\<Longrightarrow> is_real D;\n        hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C;\n        hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C;\n        \\<And>z1 z2.\n           \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n            (z1, z2) = calc_ideal_point1_cvec A B\\<rbrakk>\n           \\<Longrightarrow> z1 * cnj z1 = z2 * cnj z2;\n        \\<And>z1 z2.\n           \\<lbrakk>is_real A; (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2;\n            (z1, z2) = calc_ideal_point2_cvec A B\\<rbrakk>\n           \\<Longrightarrow> z1 * cnj z1 = z2 * cnj z2;\n        hermitean H \\<and> H \\<noteq> mat_zero; H = (A, B, C, D);\n        calc_ideal_point2_cvec A B = (aa, ba)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(z1, z2)\n                                  \\<in>if is_poincare_line_cmat H\n then let (A, B, C, D) = H\n      in {calc_ideal_point1_cvec A B, calc_ideal_point2_cvec A B}\n else {(- 1, 1), (1, 1)}.\n                            z1 * cnj z1 = z2 * cnj z2", "apply (auto simp add: Let_def simp del: calc_ideal_point1_cvec_def calc_ideal_point2_cvec_def)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n     z1 * cnj z1 = z2 * cnj z2\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       hermitean H \\<and> H \\<noteq> mat_zero \\<Longrightarrow>\n       Ball (calc_ideal_points_cmat_cvec H)\n        (on_circline_cmat_cvec unit_circle_cmat)", "thus \"Ball (calc_ideal_points_cmat_cvec H) (on_circline_cmat_cvec unit_circle_cmat)\""], ["proof (prove)\nusing this:\n  \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n     z1 * cnj z1 = z2 * cnj z2\n\ngoal (1 subgoal):\n 1. Ball (calc_ideal_points_cmat_cvec H)\n     (on_circline_cmat_cvec unit_circle_cmat)", "using on_circline_cmat_cvec_unit"], ["proof (prove)\nusing this:\n  \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n     z1 * cnj z1 = z2 * cnj z2\n  on_circline_cmat_cvec unit_circle_cmat (?z1.0, ?z2.0) =\n  (?z1.0 * cnj ?z1.0 = ?z2.0 * cnj ?z2.0)\n\ngoal (1 subgoal):\n 1. Ball (calc_ideal_points_cmat_cvec H)\n     (on_circline_cmat_cvec unit_circle_cmat)", "by (auto simp del: on_circline_cmat_cvec_def calc_ideal_points_cmat_cvec_def)"], ["proof (state)\nthis:\n  Ball (calc_ideal_points_cmat_cvec H)\n   (on_circline_cmat_cvec unit_circle_cmat)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Calculated ideal points are on the h-line\\<close>"], ["", "lemma calc_ideal_point1_sq:\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "let ?discr = \"Re ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"?discr > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "by (simp add: cmod_power2)"], ["proof (state)\nthis:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"z1 * cnj z1 = (B * cnj B) * (-A + \\<i>*sqrt(?discr))*(-A - \\<i>*sqrt(?discr))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 * cnj z1 =\n    B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))", "using assms eq_cnj_iff_real[of A]"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (cnj A = A) = is_real A\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 =\n    B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))", "by (simp)"], ["proof (state)\nthis:\n  z1 * cnj z1 =\n  B * cnj B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "also"], ["proof (state)\nthis:\n  z1 * cnj z1 =\n  B * cnj B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"... = (B * cnj B) * (A\\<^sup>2 + ?discr)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A -\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) =\n    B * cnj B *\n    (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))", "using complex_of_real_Re[of A] \\<open>is_real A\\<close> \\<open>?discr > 0\\<close>"], ["proof (prove)\nusing this:\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A -\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) =\n    B * cnj B *\n    (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))", "by (simp add: power2_eq_square field_simps)"], ["proof (state)\nthis:\n  B * cnj B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))", "have \"z1 * cnj z1 = (B * cnj B)\\<^sup>2\""], ["proof (prove)\nusing this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = (B * cnj B)\\<^sup>2", "using complex_of_real_Re[of \"(cmod B)\\<^sup>2 - (Re A)\\<^sup>2\"] complex_of_real_Re[of A] \\<open>is_real A\\<close>"], ["proof (prove)\nusing this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n  is_real (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)) \\<Longrightarrow>\n  cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))) =\n  cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = (B * cnj B)\\<^sup>2", "using complex_mult_cnj_cmod[of B]"], ["proof (prove)\nusing this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n  is_real (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)) \\<Longrightarrow>\n  cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))) =\n  cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n  B * cnj B = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = (B * cnj B)\\<^sup>2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"z2 * cnj z2 = (B * cnj B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z2 * cnj z2 = (B * cnj B)\\<^sup>2", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z2 * cnj z2 = (B * cnj B)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  z2 * cnj z2 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n  z2 * cnj z2 = (B * cnj B)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n  z2 * cnj z2 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_point2_sq:\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "let ?discr = \"Re ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"?discr > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. 0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))", "by (simp add: cmod_power2)"], ["proof (state)\nthis:\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"z1 * cnj z1 = (B * cnj B) * (-A + \\<i>*sqrt(?discr))*(-A - \\<i>*sqrt(?discr))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 * cnj z1 =\n    B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))", "using assms eq_cnj_iff_real[of A]"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (cnj A = A) = is_real A\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 =\n    B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))", "by simp"], ["proof (state)\nthis:\n  z1 * cnj z1 =\n  B * cnj B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "also"], ["proof (state)\nthis:\n  z1 * cnj z1 =\n  B * cnj B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"... = (B * cnj B) * (A\\<^sup>2 + ?discr)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A -\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) =\n    B * cnj B *\n    (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))", "using complex_of_real_Re[of A] \\<open>is_real A\\<close> \\<open>?discr > 0\\<close>"], ["proof (prove)\nusing this:\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n  0 < Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. B * cnj B *\n    (- A +\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n    (- A -\n     \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) =\n    B * cnj B *\n    (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))", "by (simp add: power2_eq_square field_simps)"], ["proof (state)\nthis:\n  B * cnj B *\n  (- A + \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) *\n  (- A - \\<i> * cor (sqrt (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))) =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))", "have \"z1 * cnj z1 = (B * cnj B)\\<^sup>2\""], ["proof (prove)\nusing this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = (B * cnj B)\\<^sup>2", "using complex_of_real_Re[of \"(cmod B)\\<^sup>2 - (Re A)\\<^sup>2\"] complex_of_real_Re[of A] \\<open>is_real A\\<close>"], ["proof (prove)\nusing this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n  is_real (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)) \\<Longrightarrow>\n  cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))) =\n  cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = (B * cnj B)\\<^sup>2", "using complex_mult_cnj_cmod[of B]"], ["proof (prove)\nusing this:\n  z1 * cnj z1 =\n  B * cnj B *\n  (A\\<^sup>2 + cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))))\n  is_real (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)) \\<Longrightarrow>\n  cor (Re (cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2))) =\n  cor ((cmod B)\\<^sup>2 - (Re A)\\<^sup>2)\n  is_real A \\<Longrightarrow> cor (Re A) = A\n  is_real A\n  B * cnj B = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 = (B * cnj B)\\<^sup>2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "have \"z2 * cnj z2 = (B * cnj B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z2 * cnj z2 = (B * cnj B)\\<^sup>2", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z2 * cnj z2 = (B * cnj B)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  z2 * cnj z2 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n  z2 * cnj z2 = (B * cnj B)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  z1 * cnj z1 = (B * cnj B)\\<^sup>2\n  z2 * cnj z2 = (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_point1_mix:\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2 \""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "have \"B*cnj z1 + cnj B*z1 = -2*A*B*cnj B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B", "using assms eq_cnj_iff_real[of A]"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (cnj A = A) = is_real A\n\ngoal (1 subgoal):\n 1. B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B", "by (simp, simp add: field_simps)"], ["proof (state)\nthis:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "have \"cnj z2 = z2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj z2 = z2", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. cnj z2 = z2", "by simp"], ["proof (state)\nthis:\n  cnj z2 = z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "hence \"B*cnj z1*z2 + cnj B*z1*cnj z2 = (B*cnj z1 + cnj B*z1)*z2\""], ["proof (prove)\nusing this:\n  cnj z2 = z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2", "have \"B*cnj z1*z2 + cnj B*z1*cnj z2 = -2*A*(B* cnj B)*z2\""], ["proof (prove)\nusing this:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B) * z2", "by simp"], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "also"], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "have \"\\<dots> = -2*A*(B * cnj B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2", "using complex_mult_cnj_cmod[of B]"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point1_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  B * cnj B = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "."], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_point2_mix:\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2 \""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "have \"B*cnj z1 + cnj B*z1 = -2*A*B*cnj B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B", "using assms eq_cnj_iff_real[of A]"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  (cnj A = A) = is_real A\n\ngoal (1 subgoal):\n 1. B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B", "by (simp, simp add: field_simps)"], ["proof (state)\nthis:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "have \"cnj z2 = z2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cnj z2 = z2", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. cnj z2 = z2", "by simp"], ["proof (state)\nthis:\n  cnj z2 = z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "hence \"B*cnj z1*z2 + cnj B*z1*cnj z2 = (B*cnj z1 + cnj B*z1)*z2\""], ["proof (prove)\nusing this:\n  cnj z2 = z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2", "have \"B*cnj z1*z2 + cnj B*z1*cnj z2 = -2*A*(B* cnj B)*z2\""], ["proof (prove)\nusing this:\n  B * cnj z1 + cnj B * z1 = - 2 * A * B * cnj B\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = (B * cnj z1 + cnj B * z1) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B) * z2", "by simp"], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "also"], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B) * z2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "have \"\\<dots> = -2*A*(B * cnj B)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2", "using assms"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2", "using complex_mult_cnj_cmod[of B]"], ["proof (prove)\nusing this:\n  (z1, z2) = calc_ideal_point2_cvec A B\n  is_real A\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  B * cnj B = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  - 2 * A * (B * cnj B) * z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2", "."], ["proof (state)\nthis:\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_point1_on_circline:\n  assumes \"(z1, z2) = calc_ideal_point1_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"A*z1*cnj z1 + B*cnj z1*z2 + cnj B*z1*cnj z2 + A*z2*cnj z2 = 0\" (is \"?lhs = 0\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "have \"?lhs = A * (z1 * cnj z1 + z2 * cnj z2) + (B * cnj z1 * z2 + cnj B * z1 * cnj z2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2)", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  A * (z1 * cnj z1 + z2 * cnj z2) + (B * cnj z1 * z2 + cnj B * z1 * cnj z2)\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "also"], ["proof (state)\nthis:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  A * (z1 * cnj z1 + z2 * cnj z2) + (B * cnj z1 * z2 + cnj B * z1 * cnj z2)\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "have \"... = 2*A*(B*cnj B)\\<^sup>2 + (-2*A*(B*cnj B)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n    2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "using calc_ideal_point1_sq[OF assms]"], ["proof (prove)\nusing this:\n  z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n    2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "using calc_ideal_point1_mix[OF assms]"], ["proof (prove)\nusing this:\n  z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n    2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  A * (z1 * cnj z1 + z2 * cnj z2) +\n  (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n  2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "finally"], ["proof (chain)\npicking this:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "by simp"], ["proof (state)\nthis:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_point2_on_circline:\n  assumes \"(z1, z2) = calc_ideal_point2_cvec A B\" \"is_real A\" \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\"\n  shows \"A*z1*cnj z1 + B*cnj z1*z2 + cnj B*z1*cnj z2 + A*z2*cnj z2 = 0\" (is \"?lhs = 0\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "have \"?lhs = A * (z1 * cnj z1 + z2 * cnj z2) + (B * cnj z1 * z2 + cnj B * z1 * cnj z2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2)", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  A * (z1 * cnj z1 + z2 * cnj z2) + (B * cnj z1 * z2 + cnj B * z1 * cnj z2)\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "also"], ["proof (state)\nthis:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  A * (z1 * cnj z1 + z2 * cnj z2) + (B * cnj z1 * z2 + cnj B * z1 * cnj z2)\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "have \"... = 2*A*(B*cnj B)\\<^sup>2 + (-2*A*(B*cnj B)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n    2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "using calc_ideal_point2_sq[OF assms]"], ["proof (prove)\nusing this:\n  z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n    2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "using calc_ideal_point2_mix[OF assms]"], ["proof (prove)\nusing this:\n  z1 * cnj z1 + z2 * cnj z2 = 2 * (B * cnj B)\\<^sup>2\n  B * cnj z1 * z2 + cnj B * z1 * cnj z2 = - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * (z1 * cnj z1 + z2 * cnj z2) +\n    (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n    2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  A * (z1 * cnj z1 + z2 * cnj z2) +\n  (B * cnj z1 * z2 + cnj B * z1 * cnj z2) =\n  2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "finally"], ["proof (chain)\npicking this:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  2 * A * (B * cnj B)\\<^sup>2 + - 2 * A * (B * cnj B)\\<^sup>2\n\ngoal (1 subgoal):\n 1. A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n    A * z2 * cnj z2 =\n    0", "by simp"], ["proof (state)\nthis:\n  A * z1 * cnj z1 + B * cnj z1 * z2 + cnj B * z1 * cnj z2 +\n  A * z2 * cnj z2 =\n  0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma calc_ideal_points_on_circline:\n  assumes \"is_poincare_line H\"\n  shows \"\\<forall> z \\<in> calc_ideal_points H. z \\<in> circline_set H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H", "using assms"], ["proof (prove)\nusing this:\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H", "unfolding circline_set_def"], ["proof (prove)\nusing this:\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>calc_ideal_points H. z \\<in> Collect (on_circline H)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. is_poincare_line H \\<Longrightarrow>\n    \\<forall>z\\<in>calc_ideal_points H. on_circline H z", "proof (transfer, transfer)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "fix H"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "assume hh: \"hermitean H \\<and> H \\<noteq> mat_zero\""], ["proof (state)\nthis:\n  hermitean H \\<and> H \\<noteq> mat_zero\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "obtain A B C D where *: \"H = (A, B, C, D)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A B C D.\n        H = (A, B, C, D) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases H, auto)"], ["proof (state)\nthis:\n  H = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "obtain z11 z12 z21 z22 where **: \"(z11, z12) = calc_ideal_point1_cvec A B\" \"(z21, z22) = calc_ideal_point2_cvec A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z11 z12 z21 z22.\n        \\<lbrakk>(z11, z12) = calc_ideal_point1_cvec A B;\n         (z21, z22) = calc_ideal_point2_cvec A B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases \"calc_ideal_point1_cvec A B\", cases \"calc_ideal_point2_cvec A B\") auto"], ["proof (state)\nthis:\n  (z11, z12) = calc_ideal_point1_cvec A B\n  (z21, z22) = calc_ideal_point2_cvec A B\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "assume \"is_poincare_line_cmat H\""], ["proof (state)\nthis:\n  is_poincare_line_cmat H\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "hence \"\\<forall> (z1, z2) \\<in> calc_ideal_points_cmat_cvec H. A*z1*cnj z1 + B*cnj z1*z2 + C*z1*cnj z2 + D*z2*cnj z2 = 0\""], ["proof (prove)\nusing this:\n  is_poincare_line_cmat H\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 +\n       D * z2 * cnj z2 =\n       0", "using * ** hh"], ["proof (prove)\nusing this:\n  is_poincare_line_cmat H\n  H = (A, B, C, D)\n  (z11, z12) = calc_ideal_point1_cvec A B\n  (z21, z22) = calc_ideal_point2_cvec A B\n  hermitean H \\<and> H \\<noteq> mat_zero\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 +\n       D * z2 * cnj z2 =\n       0", "using hermitean_elems[of A B C D]"], ["proof (prove)\nusing this:\n  is_poincare_line_cmat H\n  H = (A, B, C, D)\n  (z11, z12) = calc_ideal_point1_cvec A B\n  (z21, z22) = calc_ideal_point2_cvec A B\n  hermitean H \\<and> H \\<noteq> mat_zero\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 +\n       D * z2 * cnj z2 =\n       0", "using calc_ideal_point1_on_circline[of z11 z12 A B]"], ["proof (prove)\nusing this:\n  is_poincare_line_cmat H\n  H = (A, B, C, D)\n  (z11, z12) = calc_ideal_point1_cvec A B\n  (z21, z22) = calc_ideal_point2_cvec A B\n  hermitean H \\<and> H \\<noteq> mat_zero\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n  \\<lbrakk>(z11, z12) = calc_ideal_point1_cvec A B; is_real A;\n   (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\\<rbrakk>\n  \\<Longrightarrow> A * z11 * cnj z11 + B * cnj z11 * z12 +\n                    cnj B * z11 * cnj z12 +\n                    A * z12 * cnj z12 =\n                    0\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 +\n       D * z2 * cnj z2 =\n       0", "using calc_ideal_point2_on_circline[of z21 z22 A B]"], ["proof (prove)\nusing this:\n  is_poincare_line_cmat H\n  H = (A, B, C, D)\n  (z11, z12) = calc_ideal_point1_cvec A B\n  (z21, z22) = calc_ideal_point2_cvec A B\n  hermitean H \\<and> H \\<noteq> mat_zero\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real A\n  hermitean (A, B, C, D) \\<Longrightarrow> is_real D\n  hermitean (A, B, C, D) \\<Longrightarrow> B = cnj C\n  hermitean (A, B, C, D) \\<Longrightarrow> cnj B = C\n  \\<lbrakk>(z11, z12) = calc_ideal_point1_cvec A B; is_real A;\n   (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\\<rbrakk>\n  \\<Longrightarrow> A * z11 * cnj z11 + B * cnj z11 * z12 +\n                    cnj B * z11 * cnj z12 +\n                    A * z12 * cnj z12 =\n                    0\n  \\<lbrakk>(z21, z22) = calc_ideal_point2_cvec A B; is_real A;\n   (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\\<rbrakk>\n  \\<Longrightarrow> A * z21 * cnj z21 + B * cnj z21 * z22 +\n                    cnj B * z21 * cnj z22 +\n                    A * z22 * cnj z22 =\n                    0\n\ngoal (1 subgoal):\n 1. \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n       A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 +\n       D * z2 * cnj z2 =\n       0", "by (auto simp del: calc_ideal_point1_cvec_def calc_ideal_point2_cvec_def)"], ["proof (state)\nthis:\n  \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n     A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 + D * z2 * cnj z2 =\n     0\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H\\<rbrakk>\n       \\<Longrightarrow> Ball (calc_ideal_points_cmat_cvec H)\n                          (on_circline_cmat_cvec H)", "thus \"Ball (calc_ideal_points_cmat_cvec H) (on_circline_cmat_cvec H)\""], ["proof (prove)\nusing this:\n  \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n     A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 + D * z2 * cnj z2 =\n     0\n\ngoal (1 subgoal):\n 1. Ball (calc_ideal_points_cmat_cvec H) (on_circline_cmat_cvec H)", "using on_circline_cmat_cvec_circline_equation *"], ["proof (prove)\nusing this:\n  \\<forall>(z1, z2)\\<in>calc_ideal_points_cmat_cvec H.\n     A * z1 * cnj z1 + B * cnj z1 * z2 + C * z1 * cnj z2 + D * z2 * cnj z2 =\n     0\n  on_circline_cmat_cvec (?A, ?B, ?C, ?D) (?z1.0, ?z2.0) =\n  circline_equation ?A ?B ?C ?D ?z1.0 ?z2.0\n  H = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. Ball (calc_ideal_points_cmat_cvec H) (on_circline_cmat_cvec H)", "by (auto simp del: on_circline_cmat_cvec_def calc_ideal_points_cmat_cvec_def simp add: field_simps)"], ["proof (state)\nthis:\n  Ball (calc_ideal_points_cmat_cvec H) (on_circline_cmat_cvec H)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Calculated ideal points of an h-line are different\\<close>"], ["", "lemma calc_ideal_points_cvec_different [simp]:\n  assumes \"(cmod B)\\<^sup>2 > (cmod A)\\<^sup>2\" \"is_real A\"\n  shows \"\\<not> (calc_ideal_point1_cvec A B \\<approx>\\<^sub>v calc_ideal_point2_cvec A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n           calc_ideal_point2_cvec A B", "using assms"], ["proof (prove)\nusing this:\n  (cmod A)\\<^sup>2 < (cmod B)\\<^sup>2\n  is_real A\n\ngoal (1 subgoal):\n 1. \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n           calc_ideal_point2_cvec A B", "by (auto) (auto simp add: cmod_def)"], ["", "lemma calc_ideal_points_different:\n  assumes \"is_poincare_line H\"\n  shows  \"\\<exists> i1 \\<in> (calc_ideal_points H). \\<exists> i2 \\<in> (calc_ideal_points H). i1 \\<noteq> i2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i1\\<in>calc_ideal_points H.\n       \\<exists>i2\\<in>calc_ideal_points H. i1 \\<noteq> i2", "using assms"], ["proof (prove)\nusing this:\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. \\<exists>i1\\<in>calc_ideal_points H.\n       \\<exists>i2\\<in>calc_ideal_points H. i1 \\<noteq> i2", "proof (transfer, transfer)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H Ha.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H; is_poincare_line_clmat Ha\\<rbrakk>\n       \\<Longrightarrow> \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n                            \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n                               \\<not> i1 \\<approx>\\<^sub>v i2", "fix H"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H Ha.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H; is_poincare_line_clmat Ha\\<rbrakk>\n       \\<Longrightarrow> \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n                            \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n                               \\<not> i1 \\<approx>\\<^sub>v i2", "assume hh: \"hermitean H \\<and> H \\<noteq> mat_zero\" \"is_poincare_line_cmat H\""], ["proof (state)\nthis:\n  hermitean H \\<and> H \\<noteq> mat_zero\n  is_poincare_line_cmat H\n\ngoal (1 subgoal):\n 1. \\<And>H Ha.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H; is_poincare_line_clmat Ha\\<rbrakk>\n       \\<Longrightarrow> \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n                            \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n                               \\<not> i1 \\<approx>\\<^sub>v i2", "obtain A B C D where *: \"H = (A, B, C, D)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A B C D.\n        H = (A, B, C, D) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases H, auto)"], ["proof (state)\nthis:\n  H = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<And>H Ha.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H; is_poincare_line_clmat Ha\\<rbrakk>\n       \\<Longrightarrow> \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n                            \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n                               \\<not> i1 \\<approx>\\<^sub>v i2", "hence \"is_real A\""], ["proof (prove)\nusing this:\n  H = (A, B, C, D)\n\ngoal (1 subgoal):\n 1. is_real A", "using hh hermitean_elems"], ["proof (prove)\nusing this:\n  H = (A, B, C, D)\n  hermitean H \\<and> H \\<noteq> mat_zero\n  is_poincare_line_cmat H\n  hermitean (?A, ?B, ?C, ?D) \\<Longrightarrow> is_real ?A\n  hermitean (?A, ?B, ?C, ?D) \\<Longrightarrow> is_real ?D\n  hermitean (?A, ?B, ?C, ?D) \\<Longrightarrow> ?B = cnj ?C\n  hermitean (?A, ?B, ?C, ?D) \\<Longrightarrow> cnj ?B = ?C\n\ngoal (1 subgoal):\n 1. is_real A", "by auto"], ["proof (state)\nthis:\n  is_real A\n\ngoal (1 subgoal):\n 1. \\<And>H Ha.\n       \\<lbrakk>hermitean H \\<and> H \\<noteq> mat_zero;\n        is_poincare_line_cmat H; is_poincare_line_clmat Ha\\<rbrakk>\n       \\<Longrightarrow> \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n                            \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n                               \\<not> i1 \\<approx>\\<^sub>v i2", "thus \"\\<exists>i1\\<in>calc_ideal_points_cmat_cvec H. \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H. \\<not> i1 \\<approx>\\<^sub>v i2\""], ["proof (prove)\nusing this:\n  is_real A\n\ngoal (1 subgoal):\n 1. \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n       \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n          \\<not> i1 \\<approx>\\<^sub>v i2", "using * hh calc_ideal_points_cvec_different[of A B]"], ["proof (prove)\nusing this:\n  is_real A\n  H = (A, B, C, D)\n  hermitean H \\<and> H \\<noteq> mat_zero\n  is_poincare_line_cmat H\n  \\<lbrakk>(cmod A)\\<^sup>2 < (cmod B)\\<^sup>2; is_real A\\<rbrakk>\n  \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                           calc_ideal_point2_cvec A B\n\ngoal (1 subgoal):\n 1. \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n       \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n          \\<not> i1 \\<approx>\\<^sub>v i2", "apply (rule_tac x=\"calc_ideal_point1_cvec A B\" in bexI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>is_real A; H = (A, B, C, D);\n     hermitean H \\<and> H \\<noteq> mat_zero; is_poincare_line_cmat H;\n     \\<lbrakk>(cmod A)\\<^sup>2 < (cmod B)\\<^sup>2; is_real A\\<rbrakk>\n     \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                              calc_ideal_point2_cvec A B\\<rbrakk>\n    \\<Longrightarrow> \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n                         \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                                i2\n 2. \\<lbrakk>is_real A; H = (A, B, C, D);\n     hermitean H \\<and> H \\<noteq> mat_zero; is_poincare_line_cmat H;\n     \\<lbrakk>(cmod A)\\<^sup>2 < (cmod B)\\<^sup>2; is_real A\\<rbrakk>\n     \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                              calc_ideal_point2_cvec A B\\<rbrakk>\n    \\<Longrightarrow> calc_ideal_point1_cvec A B\n                      \\<in> calc_ideal_points_cmat_cvec H", "apply (rule_tac x=\"calc_ideal_point2_cvec A B\" in bexI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>is_real A; H = (A, B, C, D);\n     hermitean H \\<and> H \\<noteq> mat_zero; is_poincare_line_cmat H;\n     \\<lbrakk>(cmod A)\\<^sup>2 < (cmod B)\\<^sup>2; is_real A\\<rbrakk>\n     \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                              calc_ideal_point2_cvec A B\\<rbrakk>\n    \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                             calc_ideal_point2_cvec A B\n 2. \\<lbrakk>is_real A; H = (A, B, C, D);\n     hermitean H \\<and> H \\<noteq> mat_zero; is_poincare_line_cmat H;\n     \\<lbrakk>(cmod A)\\<^sup>2 < (cmod B)\\<^sup>2; is_real A\\<rbrakk>\n     \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                              calc_ideal_point2_cvec A B\\<rbrakk>\n    \\<Longrightarrow> calc_ideal_point2_cvec A B\n                      \\<in> calc_ideal_points_cmat_cvec H\n 3. \\<lbrakk>is_real A; H = (A, B, C, D);\n     hermitean H \\<and> H \\<noteq> mat_zero; is_poincare_line_cmat H;\n     \\<lbrakk>(cmod A)\\<^sup>2 < (cmod B)\\<^sup>2; is_real A\\<rbrakk>\n     \\<Longrightarrow> \\<not> calc_ideal_point1_cvec A B \\<approx>\\<^sub>v\n                              calc_ideal_point2_cvec A B\\<rbrakk>\n    \\<Longrightarrow> calc_ideal_point1_cvec A B\n                      \\<in> calc_ideal_points_cmat_cvec H", "by auto"], ["proof (state)\nthis:\n  \\<exists>i1\\<in>calc_ideal_points_cmat_cvec H.\n     \\<exists>i2\\<in>calc_ideal_points_cmat_cvec H.\n        \\<not> i1 \\<approx>\\<^sub>v i2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma two_calc_ideal_points [simp]:\n  assumes \"is_poincare_line H\"                \n  shows \"card (calc_ideal_points H) = 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "have  \"\\<exists> x \\<in> calc_ideal_points H. \\<exists> y \\<in> calc_ideal_points H. \\<forall> z \\<in> calc_ideal_points H. z = x \\<or> z = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>calc_ideal_points H.\n       \\<exists>y\\<in>calc_ideal_points H.\n          \\<forall>z\\<in>calc_ideal_points H. z = x \\<or> z = y", "by (transfer, transfer, case_tac H, simp del: calc_ideal_point1_cvec_def calc_ideal_point2_cvec_def)"], ["proof (state)\nthis:\n  \\<exists>x\\<in>calc_ideal_points H.\n     \\<exists>y\\<in>calc_ideal_points H.\n        \\<forall>z\\<in>calc_ideal_points H. z = x \\<or> z = y\n\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "then"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>calc_ideal_points H.\n     \\<exists>y\\<in>calc_ideal_points H.\n        \\<forall>z\\<in>calc_ideal_points H. z = x \\<or> z = y", "obtain x y where *: \"calc_ideal_points H = {x, y}\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>calc_ideal_points H.\n     \\<exists>y\\<in>calc_ideal_points H.\n        \\<forall>z\\<in>calc_ideal_points H. z = x \\<or> z = y\n\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        calc_ideal_points H = {x, y} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  calc_ideal_points H = {x, y}\n\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "moreover"], ["proof (state)\nthis:\n  calc_ideal_points H = {x, y}\n\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "have \"x \\<noteq> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<noteq> y", "using calc_ideal_points_different[OF assms] *"], ["proof (prove)\nusing this:\n  \\<exists>i1\\<in>calc_ideal_points H.\n     \\<exists>i2\\<in>calc_ideal_points H. i1 \\<noteq> i2\n  calc_ideal_points H = {x, y}\n\ngoal (1 subgoal):\n 1. x \\<noteq> y", "by auto"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "ultimately"], ["proof (chain)\npicking this:\n  calc_ideal_points H = {x, y}\n  x \\<noteq> y", "show ?thesis"], ["proof (prove)\nusing this:\n  calc_ideal_points H = {x, y}\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. card (calc_ideal_points H) = 2", "by auto"], ["proof (state)\nthis:\n  card (calc_ideal_points H) = 2\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Ideal points\\<close>"], ["", "text \\<open>Next we give a genuine definition of ideal points -- these are the intersections of the h-line with the unit circle\\<close>"], ["", "definition ideal_points :: \"circline \\<Rightarrow> complex_homo set\" where\n  \"ideal_points H = circline_intersection H unit_circle\""], ["", "text \\<open>Ideal points are on the unit circle and on the h-line\\<close>"], ["", "lemma ideal_points_on_unit_circle:\n  shows \"\\<forall> z \\<in> ideal_points H. z \\<in> circline_set unit_circle\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>ideal_points H. z \\<in> circline_set unit_circle", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>{z. on_circline H z \\<and> on_circline unit_circle z}.\n       z \\<in> Collect (on_circline unit_circle)", "by simp"], ["", "lemma ideal_points_on_circline:\n  shows \"\\<forall> z \\<in> ideal_points H. z \\<in> circline_set H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>ideal_points H. z \\<in> circline_set H", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z\\<in>{z. on_circline H z \\<and> on_circline unit_circle z}.\n       z \\<in> Collect (on_circline H)", "by simp"], ["", "text \\<open>For each h-line there are exactly two ideal points\\<close>"], ["", "lemma two_ideal_points:\n  assumes \"is_poincare_line H\"\n  shows \"card (ideal_points H) = 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (ideal_points H) = 2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. card (ideal_points H) = 2", "have \"H \\<noteq> unit_circle\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H \\<noteq> unit_circle", "using assms not_is_poincare_line_unit_circle"], ["proof (prove)\nusing this:\n  is_poincare_line H\n  \\<not> is_poincare_line unit_circle\n\ngoal (1 subgoal):\n 1. H \\<noteq> unit_circle", "by auto"], ["proof (state)\nthis:\n  H \\<noteq> unit_circle\n\ngoal (1 subgoal):\n 1. card (ideal_points H) = 2", "let ?int = \"circline_intersection H unit_circle\""], ["proof (state)\ngoal (1 subgoal):\n 1. card (ideal_points H) = 2", "obtain i1 i2 where \"i1 \\<in> ?int\" \"i2 \\<in> ?int\" \"i1 \\<noteq> i2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<in> circline_intersection H unit_circle;\n         i2 \\<in> circline_intersection H unit_circle;\n         i1 \\<noteq> i2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using calc_ideal_points_on_circline[OF assms]"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<in> circline_intersection H unit_circle;\n         i2 \\<in> circline_intersection H unit_circle;\n         i1 \\<noteq> i2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using calc_ideal_points_on_unit_circle[of H]"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set unit_circle\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<in> circline_intersection H unit_circle;\n         i2 \\<in> circline_intersection H unit_circle;\n         i1 \\<noteq> i2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using calc_ideal_points_different[OF assms]"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set unit_circle\n  \\<exists>i1\\<in>calc_ideal_points H.\n     \\<exists>i2\\<in>calc_ideal_points H. i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<in> circline_intersection H unit_circle;\n         i2 \\<in> circline_intersection H unit_circle;\n         i1 \\<noteq> i2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding circline_intersection_def circline_set_def"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> Collect (on_circline H)\n  \\<forall>z\\<in>calc_ideal_points H.\n     z \\<in> Collect (on_circline unit_circle)\n  \\<exists>i1\\<in>calc_ideal_points H.\n     \\<exists>i2\\<in>calc_ideal_points H. i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<in> {z. on_circline H z \\<and>\n                              on_circline unit_circle z};\n         i2 \\<in> {z. on_circline H z \\<and> on_circline unit_circle z};\n         i1 \\<noteq> i2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i1 \\<in> circline_intersection H unit_circle\n  i2 \\<in> circline_intersection H unit_circle\n  i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. card (ideal_points H) = 2", "thus ?thesis"], ["proof (prove)\nusing this:\n  i1 \\<in> circline_intersection H unit_circle\n  i2 \\<in> circline_intersection H unit_circle\n  i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. card (ideal_points H) = 2", "unfolding ideal_points_def"], ["proof (prove)\nusing this:\n  i1 \\<in> circline_intersection H unit_circle\n  i2 \\<in> circline_intersection H unit_circle\n  i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. card (circline_intersection H unit_circle) = 2", "using circline_intersection_at_most_2_points[OF \\<open>H \\<noteq> unit_circle\\<close>]"], ["proof (prove)\nusing this:\n  i1 \\<in> circline_intersection H unit_circle\n  i2 \\<in> circline_intersection H unit_circle\n  i1 \\<noteq> i2\n  finite (circline_intersection H unit_circle) \\<and>\n  card (circline_intersection H unit_circle) \\<le> 2\n\ngoal (1 subgoal):\n 1. card (circline_intersection H unit_circle) = 2", "using card_geq_2_iff_contains_2_elems[of ?int]"], ["proof (prove)\nusing this:\n  i1 \\<in> circline_intersection H unit_circle\n  i2 \\<in> circline_intersection H unit_circle\n  i1 \\<noteq> i2\n  finite (circline_intersection H unit_circle) \\<and>\n  card (circline_intersection H unit_circle) \\<le> 2\n  (2 \\<le> card (circline_intersection H unit_circle)) =\n  (finite (circline_intersection H unit_circle) \\<and>\n   (\\<exists>x y.\n       x \\<noteq> y \\<and>\n       x \\<in> circline_intersection H unit_circle \\<and>\n       y \\<in> circline_intersection H unit_circle))\n\ngoal (1 subgoal):\n 1. card (circline_intersection H unit_circle) = 2", "by auto"], ["proof (state)\nthis:\n  card (ideal_points H) = 2\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>They are exactly the two points that our calculation finds\\<close>"], ["", "lemma ideal_points_unique:\n  assumes \"is_poincare_line H\"\n  shows \"ideal_points H = calc_ideal_points H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "have \"calc_ideal_points H \\<subseteq> ideal_points H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. calc_ideal_points H \\<subseteq> ideal_points H", "using calc_ideal_points_on_circline[OF assms]"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H\n\ngoal (1 subgoal):\n 1. calc_ideal_points H \\<subseteq> ideal_points H", "using calc_ideal_points_on_unit_circle[of H]"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set H\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> circline_set unit_circle\n\ngoal (1 subgoal):\n 1. calc_ideal_points H \\<subseteq> ideal_points H", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\nusing this:\n  \\<forall>z\\<in>calc_ideal_points H. z \\<in> Collect (on_circline H)\n  \\<forall>z\\<in>calc_ideal_points H.\n     z \\<in> Collect (on_circline unit_circle)\n\ngoal (1 subgoal):\n 1. calc_ideal_points H\n    \\<subseteq> {z. on_circline H z \\<and> on_circline unit_circle z}", "by auto"], ["proof (state)\nthis:\n  calc_ideal_points H \\<subseteq> ideal_points H\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "moreover"], ["proof (state)\nthis:\n  calc_ideal_points H \\<subseteq> ideal_points H\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "have \"H \\<noteq> unit_circle\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H \\<noteq> unit_circle", "using not_is_poincare_line_unit_circle assms"], ["proof (prove)\nusing this:\n  \\<not> is_poincare_line unit_circle\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. H \\<noteq> unit_circle", "by auto"], ["proof (state)\nthis:\n  H \\<noteq> unit_circle\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "hence \"finite (ideal_points H)\""], ["proof (prove)\nusing this:\n  H \\<noteq> unit_circle\n\ngoal (1 subgoal):\n 1. finite (ideal_points H)", "using circline_intersection_at_most_2_points[of H unit_circle]"], ["proof (prove)\nusing this:\n  H \\<noteq> unit_circle\n  H \\<noteq> unit_circle \\<Longrightarrow>\n  finite (circline_intersection H unit_circle) \\<and>\n  card (circline_intersection H unit_circle) \\<le> 2\n\ngoal (1 subgoal):\n 1. finite (ideal_points H)", "unfolding ideal_points_def"], ["proof (prove)\nusing this:\n  H \\<noteq> unit_circle\n  H \\<noteq> unit_circle \\<Longrightarrow>\n  finite (circline_intersection H unit_circle) \\<and>\n  card (circline_intersection H unit_circle) \\<le> 2\n\ngoal (1 subgoal):\n 1. finite (circline_intersection H unit_circle)", "by auto"], ["proof (state)\nthis:\n  finite (ideal_points H)\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "ultimately"], ["proof (chain)\npicking this:\n  calc_ideal_points H \\<subseteq> ideal_points H\n  finite (ideal_points H)", "show ?thesis"], ["proof (prove)\nusing this:\n  calc_ideal_points H \\<subseteq> ideal_points H\n  finite (ideal_points H)\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "using card_subset_eq[of \"ideal_points H\" \"calc_ideal_points H\"]"], ["proof (prove)\nusing this:\n  calc_ideal_points H \\<subseteq> ideal_points H\n  finite (ideal_points H)\n  \\<lbrakk>finite (ideal_points H);\n   calc_ideal_points H \\<subseteq> ideal_points H;\n   card (calc_ideal_points H) = card (ideal_points H)\\<rbrakk>\n  \\<Longrightarrow> calc_ideal_points H = ideal_points H\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "using two_calc_ideal_points[OF assms]"], ["proof (prove)\nusing this:\n  calc_ideal_points H \\<subseteq> ideal_points H\n  finite (ideal_points H)\n  \\<lbrakk>finite (ideal_points H);\n   calc_ideal_points H \\<subseteq> ideal_points H;\n   card (calc_ideal_points H) = card (ideal_points H)\\<rbrakk>\n  \\<Longrightarrow> calc_ideal_points H = ideal_points H\n  card (calc_ideal_points H) = 2\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "using two_ideal_points[OF assms]"], ["proof (prove)\nusing this:\n  calc_ideal_points H \\<subseteq> ideal_points H\n  finite (ideal_points H)\n  \\<lbrakk>finite (ideal_points H);\n   calc_ideal_points H \\<subseteq> ideal_points H;\n   card (calc_ideal_points H) = card (ideal_points H)\\<rbrakk>\n  \\<Longrightarrow> calc_ideal_points H = ideal_points H\n  card (calc_ideal_points H) = 2\n  card (ideal_points H) = 2\n\ngoal (1 subgoal):\n 1. ideal_points H = calc_ideal_points H", "by auto"], ["proof (state)\nthis:\n  ideal_points H = calc_ideal_points H\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>For each h-line we can obtain two different ideal points\\<close>"], ["", "lemma obtain_ideal_points:\n  assumes \"is_poincare_line H\"\n  obtains i1 i2 where \"i1 \\<noteq> i2\" \"ideal_points H = {i1, i2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<noteq> i2; ideal_points H = {i1, i2}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using two_ideal_points[OF assms] card_eq_2_iff_doubleton[of \"ideal_points H\"]"], ["proof (prove)\nusing this:\n  card (ideal_points H) = 2\n  (card (ideal_points H) = 2) =\n  (\\<exists>x y. x \\<noteq> y \\<and> ideal_points H = {x, y})\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<noteq> i2; ideal_points H = {i1, i2}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "text \\<open>Ideal points of each h-line constructed from two points in the disc are different than those two points\\<close>"], ["", "lemma ideal_points_different:\n  assumes \"u \\<in> unit_disc\" \"v \\<in> unit_disc\" \"u \\<noteq> v\"\n  assumes \"ideal_points (poincare_line u v) = {i1, i2}\"\n  shows \"i1 \\<noteq> i2\" \"u \\<noteq> i1\" \"u \\<noteq> i2\" \"v \\<noteq> i1\" \"v \\<noteq> i2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (i1 \\<noteq> i2 &&& u \\<noteq> i1) &&&\n    u \\<noteq> i2 &&& v \\<noteq> i1 &&& v \\<noteq> i2", "proof-"], ["proof (state)\ngoal (5 subgoals):\n 1. i1 \\<noteq> i2\n 2. u \\<noteq> i1\n 3. u \\<noteq> i2\n 4. v \\<noteq> i1\n 5. v \\<noteq> i2", "have \"i1 \\<in> ocircline_set ounit_circle\" \"i2 \\<in> ocircline_set ounit_circle\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i1 \\<in> ocircline_set ounit_circle &&&\n    i2 \\<in> ocircline_set ounit_circle", "using assms(3) assms(4) ideal_points_on_unit_circle is_poincare_line_poincare_line"], ["proof (prove)\nusing this:\n  u \\<noteq> v\n  ideal_points (poincare_line u v) = {i1, i2}\n  \\<forall>z\\<in>ideal_points ?H. z \\<in> circline_set unit_circle\n  ?z \\<noteq> ?w \\<Longrightarrow> is_poincare_line (poincare_line ?z ?w)\n\ngoal (1 subgoal):\n 1. i1 \\<in> ocircline_set ounit_circle &&&\n    i2 \\<in> ocircline_set ounit_circle", "by fastforce+"], ["proof (state)\nthis:\n  i1 \\<in> ocircline_set ounit_circle\n  i2 \\<in> ocircline_set ounit_circle\n\ngoal (5 subgoals):\n 1. i1 \\<noteq> i2\n 2. u \\<noteq> i1\n 3. u \\<noteq> i2\n 4. v \\<noteq> i1\n 5. v \\<noteq> i2", "thus \"u \\<noteq> i1\" \"u \\<noteq> i2\" \"v \\<noteq> i1\" \"v \\<noteq> i2\""], ["proof (prove)\nusing this:\n  i1 \\<in> ocircline_set ounit_circle\n  i2 \\<in> ocircline_set ounit_circle\n\ngoal (1 subgoal):\n 1. (u \\<noteq> i1 &&& u \\<noteq> i2) &&& v \\<noteq> i1 &&& v \\<noteq> i2", "using assms(1-2)"], ["proof (prove)\nusing this:\n  i1 \\<in> ocircline_set ounit_circle\n  i2 \\<in> ocircline_set ounit_circle\n  u \\<in> unit_disc\n  v \\<in> unit_disc\n\ngoal (1 subgoal):\n 1. (u \\<noteq> i1 &&& u \\<noteq> i2) &&& v \\<noteq> i1 &&& v \\<noteq> i2", "using disc_inter_ocircline_set[of ounit_circle]"], ["proof (prove)\nusing this:\n  i1 \\<in> ocircline_set ounit_circle\n  i2 \\<in> ocircline_set ounit_circle\n  u \\<in> unit_disc\n  v \\<in> unit_disc\n  disc ounit_circle \\<inter> ocircline_set ounit_circle = {}\n\ngoal (1 subgoal):\n 1. (u \\<noteq> i1 &&& u \\<noteq> i2) &&& v \\<noteq> i1 &&& v \\<noteq> i2", "unfolding unit_disc_def"], ["proof (prove)\nusing this:\n  i1 \\<in> ocircline_set ounit_circle\n  i2 \\<in> ocircline_set ounit_circle\n  u \\<in> disc ounit_circle\n  v \\<in> disc ounit_circle\n  disc ounit_circle \\<inter> ocircline_set ounit_circle = {}\n\ngoal (1 subgoal):\n 1. (u \\<noteq> i1 &&& u \\<noteq> i2) &&& v \\<noteq> i1 &&& v \\<noteq> i2", "by auto"], ["proof (state)\nthis:\n  u \\<noteq> i1\n  u \\<noteq> i2\n  v \\<noteq> i1\n  v \\<noteq> i2\n\ngoal (1 subgoal):\n 1. i1 \\<noteq> i2", "show \"i1 \\<noteq> i2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i1 \\<noteq> i2", "using assms"], ["proof (prove)\nusing this:\n  u \\<in> unit_disc\n  v \\<in> unit_disc\n  u \\<noteq> v\n  ideal_points (poincare_line u v) = {i1, i2}\n\ngoal (1 subgoal):\n 1. i1 \\<noteq> i2", "by (metis doubleton_eq_iff is_poincare_line_poincare_line obtain_ideal_points)"], ["proof (state)\nthis:\n  i1 \\<noteq> i2\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>H-line is uniquely determined by its ideal points\\<close>"], ["", "lemma ideal_points_line_unique:        \n  assumes \"is_poincare_line H\" \"ideal_points H = {i1, i2}\"\n  shows \"H = poincare_line i1 i2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H = poincare_line i1 i2", "by (smt assms(1) assms(2) calc_ideal_points_on_unit_circle circline_set_def ex_poincare_line_points ideal_points_different(1) ideal_points_on_circline ideal_points_unique insertI1 insert_commute inversion_unit_circle mem_Collect_eq unique_poincare_line_general)"], ["", "text \\<open>Ideal points of some special h-lines\\<close>"], ["", "text\\<open>Ideal points of @{term x_axis}\\<close>"], ["", "lemma ideal_points_x_axis\n  [simp]: \"ideal_points x_axis = {of_complex (-1), of_complex 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal_points x_axis = {of_complex (- 1), of_complex 1}", "proof (subst ideal_points_unique, simp)"], ["proof (state)\ngoal (1 subgoal):\n 1. calc_ideal_points x_axis = {of_complex (- 1), of_complex 1}", "have \"calc_ideal_points_clmat_hcoords x_axis_clmat = {of_complex_hcoords (- 1), of_complex_hcoords 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. calc_ideal_points_clmat_hcoords x_axis_clmat =\n    {of_complex_hcoords (- 1), of_complex_hcoords 1}", "by transfer auto"], ["proof (state)\nthis:\n  calc_ideal_points_clmat_hcoords x_axis_clmat =\n  {of_complex_hcoords (- 1), of_complex_hcoords 1}\n\ngoal (1 subgoal):\n 1. calc_ideal_points x_axis = {of_complex (- 1), of_complex 1}", "thus \"calc_ideal_points x_axis = {of_complex (- 1), of_complex 1}\""], ["proof (prove)\nusing this:\n  calc_ideal_points_clmat_hcoords x_axis_clmat =\n  {of_complex_hcoords (- 1), of_complex_hcoords 1}\n\ngoal (1 subgoal):\n 1. calc_ideal_points x_axis = {of_complex (- 1), of_complex 1}", "by (simp add: calc_ideal_points.abs_eq of_complex.abs_eq x_axis_def)"], ["proof (state)\nthis:\n  calc_ideal_points x_axis = {of_complex (- 1), of_complex 1}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Ideal points are proportional vectors only if h-line is a line segment passing trough zero\\<close>"], ["", "lemma ideal_points_proportional:\n  assumes \"is_poincare_line H\" \"ideal_points H = {i1, i2}\" \"to_complex i1 = cor k * to_complex i2\"\n  shows \"0\\<^sub>h \\<in> circline_set H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "have \"i1 \\<noteq> i2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i1 \\<noteq> i2", "using \\<open>ideal_points H = {i1, i2}\\<close>"], ["proof (prove)\nusing this:\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. i1 \\<noteq> i2", "using \\<open>is_poincare_line H\\<close> ex_poincare_line_points ideal_points_different(1)"], ["proof (prove)\nusing this:\n  ideal_points H = {i1, i2}\n  is_poincare_line H\n  is_poincare_line ?H \\<Longrightarrow>\n  \\<exists>u v.\n     u \\<in> unit_disc \\<and>\n     v \\<in> unit_disc \\<and> u \\<noteq> v \\<and> ?H = poincare_line u v\n  \\<lbrakk>?u \\<in> unit_disc; ?v \\<in> unit_disc; ?u \\<noteq> ?v;\n   ideal_points (poincare_line ?u ?v) = {?i1.0, ?i2.0}\\<rbrakk>\n  \\<Longrightarrow> ?i1.0 \\<noteq> ?i2.0\n\ngoal (1 subgoal):\n 1. i1 \\<noteq> i2", "by blast"], ["proof (state)\nthis:\n  i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "have \"i1 \\<in> circline_set unit_circle\" \"i2 \\<in> circline_set unit_circle\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i1 \\<in> circline_set unit_circle &&& i2 \\<in> circline_set unit_circle", "using assms calc_ideal_points_on_unit_circle ideal_points_unique"], ["proof (prove)\nusing this:\n  is_poincare_line H\n  ideal_points H = {i1, i2}\n  to_complex i1 = cor k * to_complex i2\n  \\<forall>z\\<in>calc_ideal_points ?H. z \\<in> circline_set unit_circle\n  is_poincare_line ?H \\<Longrightarrow>\n  ideal_points ?H = calc_ideal_points ?H\n\ngoal (1 subgoal):\n 1. i1 \\<in> circline_set unit_circle &&& i2 \\<in> circline_set unit_circle", "by blast+"], ["proof (state)\nthis:\n  i1 \\<in> circline_set unit_circle\n  i2 \\<in> circline_set unit_circle\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "hence \"cmod (cor k) = 1\""], ["proof (prove)\nusing this:\n  i1 \\<in> circline_set unit_circle\n  i2 \\<in> circline_set unit_circle\n\ngoal (1 subgoal):\n 1. cmod (cor k) = 1", "using \\<open>to_complex i1 = cor k * to_complex i2\\<close>"], ["proof (prove)\nusing this:\n  i1 \\<in> circline_set unit_circle\n  i2 \\<in> circline_set unit_circle\n  to_complex i1 = cor k * to_complex i2\n\ngoal (1 subgoal):\n 1. cmod (cor k) = 1", "by (metis (mono_tags, lifting) circline_set_unit_circle imageE mem_Collect_eq mult.right_neutral norm_mult to_complex_of_complex unit_circle_set_def)"], ["proof (state)\nthis:\n  cmod (cor k) = 1\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "hence \"k = -1\""], ["proof (prove)\nusing this:\n  cmod (cor k) = 1\n\ngoal (1 subgoal):\n 1. k = - 1", "using \\<open>to_complex i1 = cor k * to_complex i2\\<close> \\<open>i1 \\<noteq> i2\\<close>"], ["proof (prove)\nusing this:\n  cmod (cor k) = 1\n  to_complex i1 = cor k * to_complex i2\n  i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. k = - 1", "using \\<open>i1 \\<in> circline_set unit_circle\\<close> \\<open>i2 \\<in> circline_set unit_circle\\<close>"], ["proof (prove)\nusing this:\n  cmod (cor k) = 1\n  to_complex i1 = cor k * to_complex i2\n  i1 \\<noteq> i2\n  i1 \\<in> circline_set unit_circle\n  i2 \\<in> circline_set unit_circle\n\ngoal (1 subgoal):\n 1. k = - 1", "by (metis (no_types, lifting) circline_set_unit_circle complex_cnj_complex_of_real complex_mult_cnj_cmod cor_neg_one imageE mult_cancel_right2 norm_one of_real_eq_iff square_eq_1_iff to_complex_of_complex)"], ["proof (state)\nthis:\n  k = - 1\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "have \"\\<forall> i1 \\<in> calc_ideal_points H. \\<forall> i2 \\<in> calc_ideal_points H. is_poincare_line H \\<and> i1 \\<noteq> i2 \\<and> to_complex i1 = - to_complex i2 \\<longrightarrow> \n           0\\<^sub>h \\<in> circline_set H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i1\\<in>calc_ideal_points H.\n       \\<forall>i2\\<in>calc_ideal_points H.\n          is_poincare_line H \\<and>\n          i1 \\<noteq> i2 \\<and>\n          to_complex i1 = - to_complex i2 \\<longrightarrow>\n          0\\<^sub>h \\<in> circline_set H", "unfolding circline_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i1\\<in>calc_ideal_points H.\n       \\<forall>i2\\<in>calc_ideal_points H.\n          is_poincare_line H \\<and>\n          i1 \\<noteq> i2 \\<and>\n          to_complex i1 = - to_complex i2 \\<longrightarrow>\n          0\\<^sub>h \\<in> Collect (on_circline H)", "proof (simp, transfer, transfer, safe)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "fix A B C D i11 i12 i21 i22 k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "assume H:\"hermitean (A, B, C, D)\" \"(A, B, C, D) \\<noteq> mat_zero\""], ["proof (state)\nthis:\n  hermitean (A, B, C, D)\n  (A, B, C, D) \\<noteq> mat_zero\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "assume line: \"is_poincare_line_cmat (A, B, C, D)\""], ["proof (state)\nthis:\n  is_poincare_line_cmat (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "assume i1: \"(i11, i12) \\<in> calc_ideal_points_cmat_cvec (A, B, C, D)\""], ["proof (state)\nthis:\n  (i11, i12) \\<in> calc_ideal_points_cmat_cvec (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "assume i2:\"(i21, i22) \\<in> calc_ideal_points_cmat_cvec (A, B, C, D)\""], ["proof (state)\nthis:\n  (i21, i22) \\<in> calc_ideal_points_cmat_cvec (A, B, C, D)\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "assume \"\\<not> (i11, i12) \\<approx>\\<^sub>v (i21, i22)\""], ["proof (state)\nthis:\n  \\<not> (i11, i12) \\<approx>\\<^sub>v (i21, i22)\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "assume opposite: \"to_complex_cvec (i11, i12) = - to_complex_cvec (i21, i22)\""], ["proof (state)\nthis:\n  to_complex_cvec (i11, i12) = - to_complex_cvec (i21, i22)\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "let ?discr =  \"sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "let ?den = \"(cmod B)\\<^sup>2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "let ?i1 = \"B * (- D - \\<i> * ?discr)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "let ?i2 = \"B * (- D + \\<i> * ?discr)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "have \"i11 = ?i1 \\<or> i11 = ?i2\" \"i12 = ?den\"\n      \"i21 = ?i1 \\<or> i21 = ?i2\" \"i22 = ?den\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (i11 =\n     B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n     i11 =\n     B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) &&&\n     i12 = cor ((cmod B)\\<^sup>2)) &&&\n    i21 =\n    B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n    i21 =\n    B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) &&&\n    i22 = cor ((cmod B)\\<^sup>2)", "using i1 i2 H line"], ["proof (prove)\nusing this:\n  (i11, i12) \\<in> calc_ideal_points_cmat_cvec (A, B, C, D)\n  (i21, i22) \\<in> calc_ideal_points_cmat_cvec (A, B, C, D)\n  hermitean (A, B, C, D)\n  (A, B, C, D) \\<noteq> mat_zero\n  is_poincare_line_cmat (A, B, C, D)\n\ngoal (1 subgoal):\n 1. (i11 =\n     B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n     i11 =\n     B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) &&&\n     i12 = cor ((cmod B)\\<^sup>2)) &&&\n    i21 =\n    B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n    i21 =\n    B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) &&&\n    i22 = cor ((cmod B)\\<^sup>2)", "by (auto split: if_split_asm)"], ["proof (state)\nthis:\n  i11 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i11 = B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n  i12 = cor ((cmod B)\\<^sup>2)\n  i21 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i21 = B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n  i22 = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "hence i: \"i11 = ?i1 \\<and> i21 = ?i2 \\<or> i11 = ?i2 \\<and> i21 = ?i1\""], ["proof (prove)\nusing this:\n  i11 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i11 = B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n  i12 = cor ((cmod B)\\<^sup>2)\n  i21 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i21 = B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n  i22 = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. i11 =\n    B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n    i21 =\n    B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n    i11 =\n    B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n    i21 = B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))", "using \\<open>\\<not> (i11, i12) \\<approx>\\<^sub>v (i21, i22)\\<close>"], ["proof (prove)\nusing this:\n  i11 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i11 = B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n  i12 = cor ((cmod B)\\<^sup>2)\n  i21 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i21 = B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n  i22 = cor ((cmod B)\\<^sup>2)\n  \\<not> (i11, i12) \\<approx>\\<^sub>v (i21, i22)\n\ngoal (1 subgoal):\n 1. i11 =\n    B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n    i21 =\n    B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n    i11 =\n    B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n    i21 = B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))", "by auto"], ["proof (state)\nthis:\n  i11 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n  i21 =\n  B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i11 =\n  B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n  i21 = B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "have \"?den \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (cmod B)\\<^sup>2 \\<noteq> 0", "using line"], ["proof (prove)\nusing this:\n  is_poincare_line_cmat (A, B, C, D)\n\ngoal (1 subgoal):\n 1. (cmod B)\\<^sup>2 \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  (cmod B)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "hence \"i11 = - i21\""], ["proof (prove)\nusing this:\n  (cmod B)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i11 = - i21", "using opposite \\<open>i12 = ?den\\<close> \\<open>i22 = ?den\\<close>"], ["proof (prove)\nusing this:\n  (cmod B)\\<^sup>2 \\<noteq> 0\n  to_complex_cvec (i11, i12) = - to_complex_cvec (i21, i22)\n  i12 = cor ((cmod B)\\<^sup>2)\n  i22 = cor ((cmod B)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. i11 = - i21", "by (simp add: nonzero_neg_divide_eq_eq2)"], ["proof (state)\nthis:\n  i11 = - i21\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "hence \"?i1 = - ?i2\""], ["proof (prove)\nusing this:\n  i11 = - i21\n\ngoal (1 subgoal):\n 1. B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) =\n    - (B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))))", "using i"], ["proof (prove)\nusing this:\n  i11 = - i21\n  i11 =\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n  i21 =\n  B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<or>\n  i11 =\n  B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) \\<and>\n  i21 = B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2)))\n\ngoal (1 subgoal):\n 1. B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) =\n    - (B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))))", "by (metis add.inverse_inverse)"], ["proof (state)\nthis:\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) =\n  - (B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "hence \"D = 0\""], ["proof (prove)\nusing this:\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) =\n  - (B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. D = 0", "using \\<open>?den \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  B * (- D - \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))) =\n  - (B * (- D + \\<i> * cor (sqrt ((cmod B)\\<^sup>2 - (Re D)\\<^sup>2))))\n  (cmod B)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. D = 0", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  D = 0\n\ngoal (1 subgoal):\n 1. \\<And>a aa ab b ac ba ad bb.\n       \\<lbrakk>hermitean (a, aa, ab, b); (a, aa, ab, b) \\<noteq> mat_zero;\n        is_poincare_line_cmat (a, aa, ab, b);\n        (ac, ba) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        (ad, bb) \\<in> calc_ideal_points_cmat_cvec (a, aa, ab, b);\n        \\<not> (ac, ba) \\<approx>\\<^sub>v (ad, bb);\n        to_complex_cvec (ac, ba) = - to_complex_cvec (ad, bb)\\<rbrakk>\n       \\<Longrightarrow> on_circline_cmat_cvec (a, aa, ab, b) 0\\<^sub>v", "thus \"on_circline_cmat_cvec (A, B, C, D) 0\\<^sub>v\""], ["proof (prove)\nusing this:\n  D = 0\n\ngoal (1 subgoal):\n 1. on_circline_cmat_cvec (A, B, C, D) 0\\<^sub>v", "by (simp add: vec_cnj_def)"], ["proof (state)\nthis:\n  on_circline_cmat_cvec (A, B, C, D) 0\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i1\\<in>calc_ideal_points H.\n     \\<forall>i2\\<in>calc_ideal_points H.\n        is_poincare_line H \\<and>\n        i1 \\<noteq> i2 \\<and>\n        to_complex i1 = - to_complex i2 \\<longrightarrow>\n        0\\<^sub>h \\<in> circline_set H\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>i1\\<in>calc_ideal_points H.\n     \\<forall>i2\\<in>calc_ideal_points H.\n        is_poincare_line H \\<and>\n        i1 \\<noteq> i2 \\<and>\n        to_complex i1 = - to_complex i2 \\<longrightarrow>\n        0\\<^sub>h \\<in> circline_set H\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "using assms \\<open>k = -1\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>i1\\<in>calc_ideal_points H.\n     \\<forall>i2\\<in>calc_ideal_points H.\n        is_poincare_line H \\<and>\n        i1 \\<noteq> i2 \\<and>\n        to_complex i1 = - to_complex i2 \\<longrightarrow>\n        0\\<^sub>h \\<in> circline_set H\n  is_poincare_line H\n  ideal_points H = {i1, i2}\n  to_complex i1 = cor k * to_complex i2\n  k = - 1\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "using calc_ideal_points_different ideal_points_unique"], ["proof (prove)\nusing this:\n  \\<forall>i1\\<in>calc_ideal_points H.\n     \\<forall>i2\\<in>calc_ideal_points H.\n        is_poincare_line H \\<and>\n        i1 \\<noteq> i2 \\<and>\n        to_complex i1 = - to_complex i2 \\<longrightarrow>\n        0\\<^sub>h \\<in> circline_set H\n  is_poincare_line H\n  ideal_points H = {i1, i2}\n  to_complex i1 = cor k * to_complex i2\n  k = - 1\n  is_poincare_line ?H \\<Longrightarrow>\n  \\<exists>i1\\<in>calc_ideal_points ?H.\n     \\<exists>i2\\<in>calc_ideal_points ?H. i1 \\<noteq> i2\n  is_poincare_line ?H \\<Longrightarrow>\n  ideal_points ?H = calc_ideal_points ?H\n\ngoal (1 subgoal):\n 1. 0\\<^sub>h \\<in> circline_set H", "by fastforce"], ["proof (state)\nthis:\n  0\\<^sub>h \\<in> circline_set H\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Transformations of ideal points\\<close>"], ["", "text \\<open>M?bius transformations that fix the unit disc when acting on h-lines map their ideal points to ideal points.\\<close>"], ["", "lemma ideal_points_moebius_circline [simp]:\n  assumes  \"unit_circle_fix M\" \"is_poincare_line H\"\n  shows \"ideal_points (moebius_circline M H) = (moebius_pt M) ` (ideal_points H)\" (is \"?I' = ?M ` ?I\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "obtain i1 i2 where *: \"i1 \\<noteq> i2\" \"?I = {i1, i2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<noteq> i2; ideal_points H = {i1, i2}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(2)"], ["proof (prove)\nusing this:\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<noteq> i2; ideal_points H = {i1, i2}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule obtain_ideal_points)"], ["proof (state)\nthis:\n  i1 \\<noteq> i2\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "let ?Mi1 = \"?M i1\" and ?Mi2 = \"?M i2\""], ["proof (state)\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "have \"?Mi1 \\<in> ?M ` (circline_set H)\"\n       \"?Mi2 \\<in> ?M ` (circline_set H)\"\n       \"?Mi1 \\<in> ?M ` (circline_set unit_circle)\"\n       \"?Mi2 \\<in> ?M ` (circline_set unit_circle)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (moebius_pt M i1 \\<in> moebius_pt M ` circline_set H &&&\n     moebius_pt M i2 \\<in> moebius_pt M ` circline_set H) &&&\n    moebius_pt M i1 \\<in> moebius_pt M ` circline_set unit_circle &&&\n    moebius_pt M i2 \\<in> moebius_pt M ` circline_set unit_circle", "using *"], ["proof (prove)\nusing this:\n  i1 \\<noteq> i2\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. (moebius_pt M i1 \\<in> moebius_pt M ` circline_set H &&&\n     moebius_pt M i2 \\<in> moebius_pt M ` circline_set H) &&&\n    moebius_pt M i1 \\<in> moebius_pt M ` circline_set unit_circle &&&\n    moebius_pt M i2 \\<in> moebius_pt M ` circline_set unit_circle", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\nusing this:\n  i1 \\<noteq> i2\n  {z. on_circline H z \\<and> on_circline unit_circle z} = {i1, i2}\n\ngoal (1 subgoal):\n 1. (moebius_pt M i1 \\<in> moebius_pt M ` Collect (on_circline H) &&&\n     moebius_pt M i2 \\<in> moebius_pt M ` Collect (on_circline H)) &&&\n    moebius_pt M i1\n    \\<in> moebius_pt M ` Collect (on_circline unit_circle) &&&\n    moebius_pt M i2 \\<in> moebius_pt M ` Collect (on_circline unit_circle)", "by blast+"], ["proof (state)\nthis:\n  moebius_pt M i1 \\<in> moebius_pt M ` circline_set H\n  moebius_pt M i2 \\<in> moebius_pt M ` circline_set H\n  moebius_pt M i1 \\<in> moebius_pt M ` circline_set unit_circle\n  moebius_pt M i2 \\<in> moebius_pt M ` circline_set unit_circle\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "hence \"?Mi1 \\<in> ?I'\"\n        \"?Mi2 \\<in> ?I'\""], ["proof (prove)\nusing this:\n  moebius_pt M i1 \\<in> moebius_pt M ` circline_set H\n  moebius_pt M i2 \\<in> moebius_pt M ` circline_set H\n  moebius_pt M i1 \\<in> moebius_pt M ` circline_set unit_circle\n  moebius_pt M i2 \\<in> moebius_pt M ` circline_set unit_circle\n\ngoal (1 subgoal):\n 1. moebius_pt M i1 \\<in> ideal_points (moebius_circline M H) &&&\n    moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)", "using unit_circle_fix_iff[of M] assms"], ["proof (prove)\nusing this:\n  moebius_pt M i1 \\<in> moebius_pt M ` circline_set H\n  moebius_pt M i2 \\<in> moebius_pt M ` circline_set H\n  moebius_pt M i1 \\<in> moebius_pt M ` circline_set unit_circle\n  moebius_pt M i2 \\<in> moebius_pt M ` circline_set unit_circle\n  unit_circle_fix M = (moebius_circline M unit_circle = unit_circle)\n  unit_circle_fix M\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. moebius_pt M i1 \\<in> ideal_points (moebius_circline M H) &&&\n    moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\nusing this:\n  moebius_pt M i1 \\<in> moebius_pt M ` Collect (on_circline H)\n  moebius_pt M i2 \\<in> moebius_pt M ` Collect (on_circline H)\n  moebius_pt M i1 \\<in> moebius_pt M ` Collect (on_circline unit_circle)\n  moebius_pt M i2 \\<in> moebius_pt M ` Collect (on_circline unit_circle)\n  unit_circle_fix M = (moebius_circline M unit_circle = unit_circle)\n  unit_circle_fix M\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. moebius_pt M i1\n    \\<in> {z. on_circline (moebius_circline M H) z \\<and>\n              on_circline unit_circle z} &&&\n    moebius_pt M i2\n    \\<in> {z. on_circline (moebius_circline M H) z \\<and>\n              on_circline unit_circle z}", "by (metis mem_Collect_eq moebius_circline)+"], ["proof (state)\nthis:\n  moebius_pt M i1 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "moreover"], ["proof (state)\nthis:\n  moebius_pt M i1 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "have \"?Mi1 \\<noteq> ?Mi2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. moebius_pt M i1 \\<noteq> moebius_pt M i2", "using bij_moebius_pt[of M] *"], ["proof (prove)\nusing this:\n  bij (moebius_pt M)\n  i1 \\<noteq> i2\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. moebius_pt M i1 \\<noteq> moebius_pt M i2", "using moebius_pt_invert"], ["proof (prove)\nusing this:\n  bij (moebius_pt M)\n  i1 \\<noteq> i2\n  ideal_points H = {i1, i2}\n  moebius_pt ?M ?z1.0 = ?z2.0 \\<Longrightarrow>\n  moebius_pt (moebius_inv ?M) ?z2.0 = ?z1.0\n\ngoal (1 subgoal):\n 1. moebius_pt M i1 \\<noteq> moebius_pt M i2", "by blast"], ["proof (state)\nthis:\n  moebius_pt M i1 \\<noteq> moebius_pt M i2\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "moreover"], ["proof (state)\nthis:\n  moebius_pt M i1 \\<noteq> moebius_pt M i2\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "have \"is_poincare_line (moebius_circline M H)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_poincare_line (moebius_circline M H)", "using assms unit_circle_fix_preserve_is_poincare_line"], ["proof (prove)\nusing this:\n  unit_circle_fix M\n  is_poincare_line H\n  \\<lbrakk>unit_circle_fix ?M; is_poincare_line ?H\\<rbrakk>\n  \\<Longrightarrow> is_poincare_line (moebius_circline ?M ?H)\n\ngoal (1 subgoal):\n 1. is_poincare_line (moebius_circline M H)", "by simp"], ["proof (state)\nthis:\n  is_poincare_line (moebius_circline M H)\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "ultimately"], ["proof (chain)\npicking this:\n  moebius_pt M i1 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i1 \\<noteq> moebius_pt M i2\n  is_poincare_line (moebius_circline M H)", "have \"?I' = {?Mi1, ?Mi2}\""], ["proof (prove)\nusing this:\n  moebius_pt M i1 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i1 \\<noteq> moebius_pt M i2\n  is_poincare_line (moebius_circline M H)\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = {moebius_pt M i1, moebius_pt M i2}", "using two_ideal_points[of \"moebius_circline M H\"]"], ["proof (prove)\nusing this:\n  moebius_pt M i1 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i1 \\<noteq> moebius_pt M i2\n  is_poincare_line (moebius_circline M H)\n  is_poincare_line (moebius_circline M H) \\<Longrightarrow>\n  card (ideal_points (moebius_circline M H)) = 2\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = {moebius_pt M i1, moebius_pt M i2}", "using card_eq_2_doubleton[of ?I' ?Mi1 ?Mi2]"], ["proof (prove)\nusing this:\n  moebius_pt M i1 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\n  moebius_pt M i1 \\<noteq> moebius_pt M i2\n  is_poincare_line (moebius_circline M H)\n  is_poincare_line (moebius_circline M H) \\<Longrightarrow>\n  card (ideal_points (moebius_circline M H)) = 2\n  \\<lbrakk>card (ideal_points (moebius_circline M H)) = 2;\n   moebius_pt M i1 \\<noteq> moebius_pt M i2;\n   moebius_pt M i1 \\<in> ideal_points (moebius_circline M H);\n   moebius_pt M i2 \\<in> ideal_points (moebius_circline M H)\\<rbrakk>\n  \\<Longrightarrow> ideal_points (moebius_circline M H) =\n                    {moebius_pt M i1, moebius_pt M i2}\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = {moebius_pt M i1, moebius_pt M i2}", "by simp"], ["proof (state)\nthis:\n  ideal_points (moebius_circline M H) = {moebius_pt M i1, moebius_pt M i2}\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "thus ?thesis"], ["proof (prove)\nusing this:\n  ideal_points (moebius_circline M H) = {moebius_pt M i1, moebius_pt M i2}\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "using *(2)"], ["proof (prove)\nusing this:\n  ideal_points (moebius_circline M H) = {moebius_pt M i1, moebius_pt M i2}\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H", "by auto"], ["proof (state)\nthis:\n  ideal_points (moebius_circline M H) = moebius_pt M ` ideal_points H\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ideal_points_poincare_line_moebius [simp]:\n  assumes \"unit_disc_fix M\"  \"u \\<in> unit_disc\" \"v \\<in> unit_disc\" \"u \\<noteq> v\"\n  assumes \"ideal_points (poincare_line u v) = {i1, i2}\"\n  shows \"ideal_points (poincare_line (moebius_pt M u) (moebius_pt M v)) = {moebius_pt M i1, moebius_pt M i2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal_points (poincare_line (moebius_pt M u) (moebius_pt M v)) =\n    {moebius_pt M i1, moebius_pt M i2}", "using assms"], ["proof (prove)\nusing this:\n  unit_disc_fix M\n  u \\<in> unit_disc\n  v \\<in> unit_disc\n  u \\<noteq> v\n  ideal_points (poincare_line u v) = {i1, i2}\n\ngoal (1 subgoal):\n 1. ideal_points (poincare_line (moebius_pt M u) (moebius_pt M v)) =\n    {moebius_pt M i1, moebius_pt M i2}", "by auto"], ["", "text \\<open>Conjugation also maps ideal points to ideal points\\<close>"], ["", "lemma ideal_points_conjugate [simp]:\n  assumes \"is_poincare_line H\"\n  shows \"ideal_points (conjugate_circline H) = conjugate ` (ideal_points H)\" (is \"?I' = ?M ` ?I\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "obtain i1 i2 where *: \"i1 \\<noteq> i2\" \"?I = {i1, i2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<noteq> i2; ideal_points H = {i1, i2}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2.\n        \\<lbrakk>i1 \\<noteq> i2; ideal_points H = {i1, i2}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule obtain_ideal_points)"], ["proof (state)\nthis:\n  i1 \\<noteq> i2\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "let ?Mi1 = \"?M i1\" and ?Mi2 = \"?M i2\""], ["proof (state)\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "have \"?Mi1 \\<in> ?M ` (circline_set H)\"\n       \"?Mi2 \\<in> ?M ` (circline_set H)\"\n       \"?Mi1 \\<in> ?M ` (circline_set unit_circle)\"\n       \"?Mi2 \\<in> ?M ` (circline_set unit_circle)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (conjugate i1 \\<in> conjugate ` circline_set H &&&\n     conjugate i2 \\<in> conjugate ` circline_set H) &&&\n    conjugate i1 \\<in> conjugate ` circline_set unit_circle &&&\n    conjugate i2 \\<in> conjugate ` circline_set unit_circle", "using *"], ["proof (prove)\nusing this:\n  i1 \\<noteq> i2\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. (conjugate i1 \\<in> conjugate ` circline_set H &&&\n     conjugate i2 \\<in> conjugate ` circline_set H) &&&\n    conjugate i1 \\<in> conjugate ` circline_set unit_circle &&&\n    conjugate i2 \\<in> conjugate ` circline_set unit_circle", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\nusing this:\n  i1 \\<noteq> i2\n  {z. on_circline H z \\<and> on_circline unit_circle z} = {i1, i2}\n\ngoal (1 subgoal):\n 1. (conjugate i1 \\<in> conjugate ` Collect (on_circline H) &&&\n     conjugate i2 \\<in> conjugate ` Collect (on_circline H)) &&&\n    conjugate i1 \\<in> conjugate ` Collect (on_circline unit_circle) &&&\n    conjugate i2 \\<in> conjugate ` Collect (on_circline unit_circle)", "by blast+"], ["proof (state)\nthis:\n  conjugate i1 \\<in> conjugate ` circline_set H\n  conjugate i2 \\<in> conjugate ` circline_set H\n  conjugate i1 \\<in> conjugate ` circline_set unit_circle\n  conjugate i2 \\<in> conjugate ` circline_set unit_circle\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "hence \"?Mi1 \\<in> ?I'\"\n        \"?Mi2 \\<in> ?I'\""], ["proof (prove)\nusing this:\n  conjugate i1 \\<in> conjugate ` circline_set H\n  conjugate i2 \\<in> conjugate ` circline_set H\n  conjugate i1 \\<in> conjugate ` circline_set unit_circle\n  conjugate i2 \\<in> conjugate ` circline_set unit_circle\n\ngoal (1 subgoal):\n 1. conjugate i1 \\<in> ideal_points (conjugate_circline H) &&&\n    conjugate i2 \\<in> ideal_points (conjugate_circline H)", "unfolding ideal_points_def circline_intersection_def circline_set_def"], ["proof (prove)\nusing this:\n  conjugate i1 \\<in> conjugate ` Collect (on_circline H)\n  conjugate i2 \\<in> conjugate ` Collect (on_circline H)\n  conjugate i1 \\<in> conjugate ` Collect (on_circline unit_circle)\n  conjugate i2 \\<in> conjugate ` Collect (on_circline unit_circle)\n\ngoal (1 subgoal):\n 1. conjugate i1\n    \\<in> {z. on_circline (conjugate_circline H) z \\<and>\n              on_circline unit_circle z} &&&\n    conjugate i2\n    \\<in> {z. on_circline (conjugate_circline H) z \\<and>\n              on_circline unit_circle z}", "using circline_set_conjugate_circline circline_set_def conjugate_unit_circle_set"], ["proof (prove)\nusing this:\n  conjugate i1 \\<in> conjugate ` Collect (on_circline H)\n  conjugate i2 \\<in> conjugate ` Collect (on_circline H)\n  conjugate i1 \\<in> conjugate ` Collect (on_circline unit_circle)\n  conjugate i2 \\<in> conjugate ` Collect (on_circline unit_circle)\n  circline_set (conjugate_circline ?H) = conjugate ` circline_set ?H\n  circline_set ?H = {z. on_circline ?H z}\n  conjugate ` circline_set unit_circle = circline_set unit_circle\n\ngoal (1 subgoal):\n 1. conjugate i1\n    \\<in> {z. on_circline (conjugate_circline H) z \\<and>\n              on_circline unit_circle z} &&&\n    conjugate i2\n    \\<in> {z. on_circline (conjugate_circline H) z \\<and>\n              on_circline unit_circle z}", "by blast+"], ["proof (state)\nthis:\n  conjugate i1 \\<in> ideal_points (conjugate_circline H)\n  conjugate i2 \\<in> ideal_points (conjugate_circline H)\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "moreover"], ["proof (state)\nthis:\n  conjugate i1 \\<in> ideal_points (conjugate_circline H)\n  conjugate i2 \\<in> ideal_points (conjugate_circline H)\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "have \"?Mi1 \\<noteq> ?Mi2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. conjugate i1 \\<noteq> conjugate i2", "using \\<open>i1 \\<noteq> i2\\<close>"], ["proof (prove)\nusing this:\n  i1 \\<noteq> i2\n\ngoal (1 subgoal):\n 1. conjugate i1 \\<noteq> conjugate i2", "by (auto simp add: conjugate_inj)"], ["proof (state)\nthis:\n  conjugate i1 \\<noteq> conjugate i2\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "moreover"], ["proof (state)\nthis:\n  conjugate i1 \\<noteq> conjugate i2\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "have \"is_poincare_line (conjugate_circline H)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_poincare_line (conjugate_circline H)", "using assms"], ["proof (prove)\nusing this:\n  is_poincare_line H\n\ngoal (1 subgoal):\n 1. is_poincare_line (conjugate_circline H)", "by simp"], ["proof (state)\nthis:\n  is_poincare_line (conjugate_circline H)\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "ultimately"], ["proof (chain)\npicking this:\n  conjugate i1 \\<in> ideal_points (conjugate_circline H)\n  conjugate i2 \\<in> ideal_points (conjugate_circline H)\n  conjugate i1 \\<noteq> conjugate i2\n  is_poincare_line (conjugate_circline H)", "have \"?I' = {?Mi1, ?Mi2}\""], ["proof (prove)\nusing this:\n  conjugate i1 \\<in> ideal_points (conjugate_circline H)\n  conjugate i2 \\<in> ideal_points (conjugate_circline H)\n  conjugate i1 \\<noteq> conjugate i2\n  is_poincare_line (conjugate_circline H)\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = {conjugate i1, conjugate i2}", "using two_ideal_points[of \"conjugate_circline H\"]"], ["proof (prove)\nusing this:\n  conjugate i1 \\<in> ideal_points (conjugate_circline H)\n  conjugate i2 \\<in> ideal_points (conjugate_circline H)\n  conjugate i1 \\<noteq> conjugate i2\n  is_poincare_line (conjugate_circline H)\n  is_poincare_line (conjugate_circline H) \\<Longrightarrow>\n  card (ideal_points (conjugate_circline H)) = 2\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = {conjugate i1, conjugate i2}", "using card_eq_2_doubleton[of ?I' ?Mi1 ?Mi2]"], ["proof (prove)\nusing this:\n  conjugate i1 \\<in> ideal_points (conjugate_circline H)\n  conjugate i2 \\<in> ideal_points (conjugate_circline H)\n  conjugate i1 \\<noteq> conjugate i2\n  is_poincare_line (conjugate_circline H)\n  is_poincare_line (conjugate_circline H) \\<Longrightarrow>\n  card (ideal_points (conjugate_circline H)) = 2\n  \\<lbrakk>card (ideal_points (conjugate_circline H)) = 2;\n   conjugate i1 \\<noteq> conjugate i2;\n   conjugate i1 \\<in> ideal_points (conjugate_circline H);\n   conjugate i2 \\<in> ideal_points (conjugate_circline H)\\<rbrakk>\n  \\<Longrightarrow> ideal_points (conjugate_circline H) =\n                    {conjugate i1, conjugate i2}\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = {conjugate i1, conjugate i2}", "by simp"], ["proof (state)\nthis:\n  ideal_points (conjugate_circline H) = {conjugate i1, conjugate i2}\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "thus ?thesis"], ["proof (prove)\nusing this:\n  ideal_points (conjugate_circline H) = {conjugate i1, conjugate i2}\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "using *(2)"], ["proof (prove)\nusing this:\n  ideal_points (conjugate_circline H) = {conjugate i1, conjugate i2}\n  ideal_points H = {i1, i2}\n\ngoal (1 subgoal):\n 1. ideal_points (conjugate_circline H) = conjugate ` ideal_points H", "by auto"], ["proof (state)\nthis:\n  ideal_points (conjugate_circline H) = conjugate ` ideal_points H\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ideal_points_poincare_line_conjugate [simp]:\n  assumes\"u \\<in> unit_disc\" \"v \\<in> unit_disc\" \"u \\<noteq> v\"\n  assumes \"ideal_points (poincare_line u v) = {i1, i2}\"\n  shows \"ideal_points (poincare_line (conjugate u) (conjugate v)) = {conjugate i1, conjugate i2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal_points (poincare_line (conjugate u) (conjugate v)) =\n    {conjugate i1, conjugate i2}", "using assms"], ["proof (prove)\nusing this:\n  u \\<in> unit_disc\n  v \\<in> unit_disc\n  u \\<noteq> v\n  ideal_points (poincare_line u v) = {i1, i2}\n\ngoal (1 subgoal):\n 1. ideal_points (poincare_line (conjugate u) (conjugate v)) =\n    {conjugate i1, conjugate i2}", "by auto"], ["", "end"]]}