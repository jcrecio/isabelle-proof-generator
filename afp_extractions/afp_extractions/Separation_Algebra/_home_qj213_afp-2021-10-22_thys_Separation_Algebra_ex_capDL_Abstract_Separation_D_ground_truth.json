{"file_name": "/home/qj213/afp-2021-10-22/thys/Separation_Algebra/ex/capDL/Abstract_Separation_D.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Separation_Algebra", "problem_names": ["lemma inter_empty_not_both:\n\"\\<lbrakk>x \\<in> A; A \\<inter> B = {}\\<rbrakk> \\<Longrightarrow> x \\<notin> B\"", "lemma union_intersection:\n  \"A \\<inter> (A \\<union> B) = A\"\n  \"B \\<inter> (A \\<union> B) = B\"\n  \"(A \\<union> B) \\<inter> A = A\"\n  \"(A \\<union> B) \\<inter> B = B\"", "lemma union_intersection1: \"A \\<inter> (A \\<union> B) = A\"", "lemma union_intersection2: \"B \\<inter> (A \\<union> B) = B\"", "lemma restrict_map_disj':\n  \"S \\<inter> T = {} \\<Longrightarrow> h |` S \\<bottom> h' |` T\"", "lemma map_add_restrict_comm:\n  \"S \\<inter> T = {} \\<Longrightarrow> h |` S ++ h' |` T = h' |` T ++ h |` S\"", "lemma the_set_union [simp]:\n  \"the_set (A \\<union> B) = the_set A \\<union> the_set B\"", "lemma the_set_inter [simp]:\n  \"the_set (A \\<inter> B) = the_set A \\<inter> the_set B\"", "lemma the_set_inter_empty:\n  \"A \\<inter> B = {} \\<Longrightarrow> the_set A \\<inter> the_set B = {}\"", "lemma add_to_slots_assoc:\n  \"add_to_slots x (add_to_slots (y ++ z) obj) = \n   add_to_slots (x ++ y) (add_to_slots z obj)\"", "lemma add_to_slots_twice [simp]:\n  \"add_to_slots x (add_to_slots y a) = add_to_slots (x ++ y) a\"", "lemma slots_of_heap_empty [simp]: \"slots_of_heap Map.empty object_id = Map.empty\"", "lemma slots_of_heap_empty2 [simp]:\n  \"h obj_id = None \\<Longrightarrow> slots_of_heap h obj_id = Map.empty\"", "lemma update_slots_add_to_slots_empty [simp]:\n  \"update_slots Map.empty (add_to_slots new obj) = update_slots Map.empty obj\"", "lemma update_object_slots_id [simp]: \"update_slots (object_slots a) a = a\"", "lemma update_slots_of_heap_id [simp]:\n  \"h obj_id = Some obj \\<Longrightarrow> update_slots (slots_of_heap h obj_id) obj = obj\"", "lemma add_to_slots_empty [simp]: \"add_to_slots Map.empty h = h\"", "lemma update_slots_eq:\n  \"update_slots a o1 = update_slots a o2 \\<Longrightarrow> update_slots b o1 = update_slots b o2\"", "lemma not_conflicting_objects_comm:\n  \"not_conflicting_objects h1 h2 obj = not_conflicting_objects h2 h1 obj\"", "lemma object_clean_comm:\n  \"\\<lbrakk>object_type obj_a = object_type obj_b;\n    object_slots obj_a ++ object_slots obj_b = object_slots obj_b ++ object_slots obj_a; None \\<notin> cmp\\<rbrakk>\n  \\<Longrightarrow> object_clean (add_to_slots (object_slots obj_a) obj_b) cmp =\n      object_clean (add_to_slots (object_slots obj_b) obj_a) cmp\"", "lemma add_to_slots_object_slots:\n  \"object_type y = object_type z\n \\<Longrightarrow> add_to_slots (object_slots (add_to_slots (x) y)) z =\n     add_to_slots (x ++ object_slots y) z\"", "lemma not_conflicting_objects_empty [simp]:\n  \"not_conflicting_objects s (SepState Map.empty (\\<lambda>obj_id. {})) obj_id\"", "lemma empty_not_conflicting_objects [simp]:\n  \"not_conflicting_objects (SepState Map.empty (\\<lambda>obj_id. {})) s obj_id\"", "lemma not_conflicting_objects_empty_object [elim!]:\n  \"(sep_heap x) obj_id = None \\<Longrightarrow> not_conflicting_objects x y obj_id\"", "lemma empty_object_not_conflicting_objects [elim!]:\n  \"(sep_heap y) obj_id = None \\<Longrightarrow> not_conflicting_objects x y obj_id\"", "lemma cdl_heap_add_empty [simp]:\n \"cdl_heap_add (SepState h gs) (SepState Map.empty (\\<lambda>obj_id. {})) = h\"", "lemma empty_cdl_heap_add [simp]:\n  \"cdl_heap_add (SepState Map.empty (\\<lambda>obj_id. {})) (SepState h gs)= h\"", "lemma map_add_result_empty1: \"a ++ b = Map.empty \\<Longrightarrow> a = Map.empty\"", "lemma map_add_result_empty2: \"a ++ b = Map.empty \\<Longrightarrow> b = Map.empty\"", "lemma map_add_emptyE [elim!]: \"\\<lbrakk>a ++ b = Map.empty; \\<lbrakk>a = Map.empty; b = Map.empty\\<rbrakk> \\<Longrightarrow> R\\<rbrakk> \\<Longrightarrow> R\"", "lemma clean_slots_empty [simp]:\n  \"clean_slots Map.empty cmp = Map.empty\"", "lemma object_type_update_slots [simp]:\n  \"object_type (update_slots slots x) = object_type x\"", "lemma object_type_object_clean_slots [simp]:\n  \"object_type (object_clean_slots x cmp) = object_type x\"", "lemma object_type_object_clean_fields [simp]:\n  \"object_type (object_clean_fields x cmp) = object_type x\"", "lemma object_type_object_clean [simp]:\n  \"object_type (object_clean x cmp) = object_type x\"", "lemma object_type_add_to_slots [simp]:\n  \"object_type (add_to_slots slots x) = object_type x\"", "lemma object_slots_update_slots [simp]:\n  \"has_slots obj \\<Longrightarrow> object_slots (update_slots slots obj) = slots\"", "lemma object_slots_update_slots_empty [simp]:\n  \"\\<not>has_slots obj \\<Longrightarrow> object_slots (update_slots slots obj) = Map.empty\"", "lemma update_slots_no_slots [simp]:\n  \"\\<not>has_slots obj \\<Longrightarrow> update_slots slots obj = obj\"", "lemma update_slots_update_slots [simp]:\n  \"update_slots slots (update_slots slots' obj) = update_slots slots obj\"", "lemma update_slots_same_object:\n  \"a = b \\<Longrightarrow> update_slots a obj = update_slots b obj\"", "lemma object_type_has_slots:\n  \"\\<lbrakk>has_slots x; object_type x = object_type y\\<rbrakk> \\<Longrightarrow> has_slots y\"", "lemma object_slots_object_clean_fields [simp]:\n  \"object_slots (object_clean_fields obj cmp) = object_slots obj\"", "lemma object_slots_object_clean_slots [simp]:\n  \"object_slots (object_clean_slots obj cmp) = clean_slots (object_slots obj) cmp\"", "lemma object_slots_object_clean [simp]:\n  \"object_slots (object_clean obj cmp) = clean_slots (object_slots obj) cmp\"", "lemma object_slots_add_to_slots [simp]:\n  \"object_type y = object_type z \\<Longrightarrow> object_slots (add_to_slots (object_slots y) z) = object_slots y ++ object_slots z\"", "lemma update_slots_object_clean_slots [simp]:\n  \"update_slots slots (object_clean_slots obj cmp) = update_slots slots obj\"", "lemma object_clean_fields_idem [simp]:\n  \"object_clean_fields (object_clean_fields obj cmp) cmp = object_clean_fields obj cmp\"", "lemma object_clean_slots_idem [simp]:\n  \"object_clean_slots (object_clean_slots obj cmp) cmp = object_clean_slots obj cmp\"", "lemma object_clean_fields_object_clean_slots [simp]:\n  \"object_clean_fields (object_clean_slots obj gs) gs = object_clean_slots (object_clean_fields obj gs) gs\"", "lemma object_clean_idem [simp]:\n  \"object_clean (object_clean obj cmp) cmp = object_clean obj cmp\"", "lemma has_slots_object_clean_slots:\n \"has_slots (object_clean_slots obj cmp) = has_slots obj\"", "lemma has_slots_object_clean_fields:\n \"has_slots (object_clean_fields obj cmp) = has_slots obj\"", "lemma has_slots_object_clean:\n \"has_slots (object_clean obj cmp) = has_slots obj\"", "lemma object_slots_update_slots_object_clean_fields [simp]:\n  \"object_slots (update_slots slots (object_clean_fields obj cmp)) = object_slots (update_slots slots obj)\"", "lemma object_clean_fields_update_slots [simp]:\n \"object_clean_fields (update_slots slots obj) cmp = update_slots slots (object_clean_fields obj cmp)\"", "lemma object_clean_fields_twice [simp]:\n  \"(object_clean_fields (object_clean_fields obj cmp') cmp) = object_clean_fields obj (cmp \\<inter> cmp')\"", "lemma update_slots_object_clean_fields:\n  \"\\<lbrakk>None \\<notin> cmps; None \\<notin> cmps'; object_type obj = object_type obj'\\<rbrakk>\n    \\<Longrightarrow> update_slots slots (object_clean_fields obj cmps) =\n        update_slots slots (object_clean_fields obj' cmps')\"", "lemma object_clean_fields_no_slots:\n  \"\\<lbrakk>None \\<notin> cmps; None \\<notin> cmps'; object_type obj = object_type obj'; \\<not> has_slots obj; \\<not> has_slots obj'\\<rbrakk>\n    \\<Longrightarrow> object_clean_fields obj cmps = object_clean_fields obj' cmps'\"", "lemma update_slots_object_clean:\n  \"\\<lbrakk>None \\<notin> cmps; None \\<notin> cmps'; object_type obj = object_type obj'\\<rbrakk>\n   \\<Longrightarrow> update_slots slots (object_clean obj cmps) = update_slots slots (object_clean obj' cmps')\"", "lemma cdl_heap_add_assoc':\n  \"\\<forall>obj_id. not_conflicting_objects x z obj_id \\<and>\n            not_conflicting_objects y z obj_id \\<and>\n            not_conflicting_objects x z obj_id \\<Longrightarrow>\n   cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n   cdl_heap_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))\"", "lemma cdl_heap_add_assoc:\n  \"\\<lbrakk>sep_state_disj x y; sep_state_disj y z; sep_state_disj x z\\<rbrakk>\n  \\<Longrightarrow> cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n      cdl_heap_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))\"", "lemma cdl_ghost_state_add_assoc:\n  \"cdl_ghost_state_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n   cdl_ghost_state_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))\"", "lemma clean_slots_map_add_comm:\n  \"cmps_a \\<inter> cmps_b = {}\n  \\<Longrightarrow> clean_slots slots_a cmps_a ++ clean_slots slots_b cmps_b =\n      clean_slots slots_b cmps_b ++ clean_slots slots_a cmps_a\"", "lemma object_clean_all:\n  \"object_type obj_a = object_type obj_b \\<Longrightarrow> object_clean obj_b {} = object_clean obj_a {}\"", "lemma object_add_comm:\n  \"\\<lbrakk>object_type obj_a = object_type obj_b; cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n  \\<Longrightarrow> object_add obj_a obj_b cmps_a cmps_b = object_add obj_b obj_a cmps_b cmps_a\"", "lemma sep_state_add_comm:\n  \"sep_state_disj x y \\<Longrightarrow> sep_state_add x y = sep_state_add y x\"", "lemma add_to_slots_comm:\n  \"\\<lbrakk>object_slots y_obj \\<bottom> object_slots z_obj; update_slots Map.empty y_obj = update_slots Map.empty z_obj \\<rbrakk>\n  \\<Longrightarrow> add_to_slots (object_slots z_obj) y_obj = add_to_slots (object_slots y_obj) z_obj\"", "lemma cdl_heap_add_none1:\n  \"cdl_heap_add x y obj_id = None \\<Longrightarrow> (sep_heap x) obj_id = None\"", "lemma cdl_heap_add_none2:\n  \"cdl_heap_add x y obj_id = None \\<Longrightarrow> (sep_heap y) obj_id = None\"", "lemma object_type_object_addL:\n  \"object_type obj = object_type obj'\n  \\<Longrightarrow> object_type (object_add obj obj' cmp cmp') = object_type obj\"", "lemma object_type_object_addR:\n  \"object_type obj = object_type obj'\n  \\<Longrightarrow> object_type (object_add obj obj' cmp cmp') = object_type obj'\"", "lemma sep_state_add_disjL:\n  \"\\<lbrakk>sep_state_disj y z; sep_state_disj x (sep_state_add y z)\\<rbrakk> \\<Longrightarrow> sep_state_disj x y\"", "lemma sep_state_add_disjR:\n  \"\\<lbrakk>sep_state_disj y z; sep_state_disj x (sep_state_add y z)\\<rbrakk> \\<Longrightarrow> sep_state_disj x z\"", "lemma sep_state_add_disj:\n  \"\\<lbrakk>sep_state_disj y z; sep_state_disj x y; sep_state_disj x z\\<rbrakk> \\<Longrightarrow> sep_state_disj x (sep_state_add y z)\""], "translations": [["", "lemma inter_empty_not_both:\n\"\\<lbrakk>x \\<in> A; A \\<inter> B = {}\\<rbrakk> \\<Longrightarrow> x \\<notin> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> A; A \\<inter> B = {}\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> B", "by fastforce"], ["", "lemma union_intersection:\n  \"A \\<inter> (A \\<union> B) = A\"\n  \"B \\<inter> (A \\<union> B) = B\"\n  \"(A \\<union> B) \\<inter> A = A\"\n  \"(A \\<union> B) \\<inter> B = B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A \\<inter> (A \\<union> B) = A &&& B \\<inter> (A \\<union> B) = B) &&&\n    (A \\<union> B) \\<inter> A = A &&& (A \\<union> B) \\<inter> B = B", "by fastforce+"], ["", "lemma union_intersection1: \"A \\<inter> (A \\<union> B) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<inter> (A \\<union> B) = A", "by (rule inf_sup_absorb)"], ["", "lemma union_intersection2: \"B \\<inter> (A \\<union> B) = B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B \\<inter> (A \\<union> B) = B", "by fastforce"], ["", "(* This lemma is strictly weaker than restrict_map_disj. *)"], ["", "lemma restrict_map_disj':\n  \"S \\<inter> T = {} \\<Longrightarrow> h |` S \\<bottom> h' |` T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<inter> T = {} \\<Longrightarrow> h |` S \\<bottom> h' |` T", "by (auto simp: map_disj_def restrict_map_def dom_def)"], ["", "lemma map_add_restrict_comm:\n  \"S \\<inter> T = {} \\<Longrightarrow> h |` S ++ h' |` T = h' |` T ++ h |` S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<inter> T = {} \\<Longrightarrow>\n    h |` S ++ h' |` T = h' |` T ++ h |` S", "apply (drule restrict_map_disj')"], ["proof (prove)\ngoal (1 subgoal):\n 1. ?h |` S \\<bottom> ?h' |` T \\<Longrightarrow>\n    h |` S ++ h' |` T = h' |` T ++ h |` S", "apply (erule map_add_com)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(************************************\n * End of lemmas to move elsewhere. *\n ************************************)\n\n\n\n(* The state for separation logic has:\n   * The memory heap.\n   * A function for which objects own which fields.\n     In capDL, we say that an object either owns all of its fields, or none of them.\n   These are both taken from the cdl_state.\n *)"], ["", "datatype sep_state = SepState cdl_heap cdl_ghost_state"], ["", "(* Functions to get the heap and the ghost_state from the sep_state. *)"], ["", "primrec sep_heap :: \"sep_state \\<Rightarrow> cdl_heap\"\nwhere  \"sep_heap (SepState h gs) = h\""], ["", "primrec sep_ghost_state :: \"sep_state \\<Rightarrow> cdl_ghost_state\"\nwhere  \"sep_ghost_state (SepState h gs) = gs\""], ["", "definition\n  the_set :: \"'a option set \\<Rightarrow> 'a set\"\nwhere\n  \"the_set xs = {x. Some x \\<in> xs}\""], ["", "lemma the_set_union [simp]:\n  \"the_set (A \\<union> B) = the_set A \\<union> the_set B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the_set (A \\<union> B) = the_set A \\<union> the_set B", "by (fastforce simp: the_set_def)"], ["", "lemma the_set_inter [simp]:\n  \"the_set (A \\<inter> B) = the_set A \\<inter> the_set B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the_set (A \\<inter> B) = the_set A \\<inter> the_set B", "by (fastforce simp: the_set_def)"], ["", "lemma the_set_inter_empty:\n  \"A \\<inter> B = {} \\<Longrightarrow> the_set A \\<inter> the_set B = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<inter> B = {} \\<Longrightarrow> the_set A \\<inter> the_set B = {}", "by (fastforce simp: the_set_def)"], ["", "(* As the capDL operations mostly take the state (rather than the heap)\n * we need to redefine some of them again to take just the heap.\n *)"], ["", "definition\n  slots_of_heap :: \"cdl_heap \\<Rightarrow> cdl_object_id \\<Rightarrow> cdl_cap_map\"\nwhere\n  \"slots_of_heap h \\<equiv> \\<lambda>obj_id. \n  case h obj_id of \n    None \\<Rightarrow> Map.empty \n  | Some obj \\<Rightarrow> object_slots obj\""], ["", "(* Adds new caps to an object. It won't overwrite on a collision. *)"], ["", "definition\n  add_to_slots :: \"cdl_cap_map \\<Rightarrow> cdl_object \\<Rightarrow> cdl_object\"\nwhere\n  \"add_to_slots new_val obj \\<equiv> update_slots (new_val ++ (object_slots obj)) obj\""], ["", "lemma add_to_slots_assoc:\n  \"add_to_slots x (add_to_slots (y ++ z) obj) = \n   add_to_slots (x ++ y) (add_to_slots z obj)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Abstract_Separation_D.add_to_slots x\n     (Abstract_Separation_D.add_to_slots (y ++ z) obj) =\n    Abstract_Separation_D.add_to_slots (x ++ y)\n     (Abstract_Separation_D.add_to_slots z obj)", "apply (clarsimp simp: add_to_slots_def update_slots_def object_slots_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (case case obj of Endpoint \\<Rightarrow> obj\n          | Tcb x \\<Rightarrow>\n              Tcb (x\\<lparr>cdl_tcb_caps :=\n                              y ++ z ++\n                              (case obj of Endpoint \\<Rightarrow> Map.empty\n                               | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                               | CNode x \\<Rightarrow>\n                                   cdl_cnode_caps x)\\<rparr>)\n          | CNode x \\<Rightarrow>\n              CNode\n               (x\\<lparr>cdl_cnode_caps :=\n                           y ++ z ++\n                           (case obj of Endpoint \\<Rightarrow> Map.empty\n                            | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                            | CNode x \\<Rightarrow>\n                                cdl_cnode_caps x)\\<rparr>) of\n     Endpoint \\<Rightarrow>\n       case obj of Endpoint \\<Rightarrow> obj\n       | Tcb x \\<Rightarrow>\n           Tcb (x\\<lparr>cdl_tcb_caps :=\n                           y ++ z ++\n                           (case obj of Endpoint \\<Rightarrow> Map.empty\n                            | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                            | CNode x \\<Rightarrow>\n                                cdl_cnode_caps x)\\<rparr>)\n       | CNode x \\<Rightarrow>\n           CNode\n            (x\\<lparr>cdl_cnode_caps :=\n                        y ++ z ++\n                        (case obj of Endpoint \\<Rightarrow> Map.empty\n                         | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                         | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n     | Tcb xa \\<Rightarrow>\n         Tcb (xa\\<lparr>cdl_tcb_caps :=\n                          x ++\n                          (case case obj of Endpoint \\<Rightarrow> obj\n                                | Tcb x \\<Rightarrow>\n                                    Tcb (x\n   \\<lparr>cdl_tcb_caps :=\n             y ++ z ++\n             (case obj of Endpoint \\<Rightarrow> Map.empty\n              | Tcb x \\<Rightarrow> cdl_tcb_caps x\n              | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n                                | CNode x \\<Rightarrow>\n                                    CNode\n                                     (x\n\\<lparr>cdl_cnode_caps :=\n          y ++ z ++\n          (case obj of Endpoint \\<Rightarrow> Map.empty\n           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n           | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>) of\n                           Endpoint \\<Rightarrow> Map.empty\n                           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                           | CNode x \\<Rightarrow>\n                               cdl_cnode_caps x)\\<rparr>)\n     | CNode xa \\<Rightarrow>\n         CNode\n          (xa\\<lparr>cdl_cnode_caps :=\n                       x ++\n                       (case case obj of Endpoint \\<Rightarrow> obj\n                             | Tcb x \\<Rightarrow>\n                                 Tcb (x\n\\<lparr>cdl_tcb_caps :=\n          y ++ z ++\n          (case obj of Endpoint \\<Rightarrow> Map.empty\n           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n           | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n                             | CNode x \\<Rightarrow>\n                                 CNode\n                                  (x\\<lparr>cdl_cnode_caps :=\n        y ++ z ++\n        (case obj of Endpoint \\<Rightarrow> Map.empty\n         | Tcb x \\<Rightarrow> cdl_tcb_caps x\n         | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>) of\n                        Endpoint \\<Rightarrow> Map.empty\n                        | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                        | CNode x \\<Rightarrow>\n                            cdl_cnode_caps x)\\<rparr>)) =\n    (case case obj of Endpoint \\<Rightarrow> obj\n          | Tcb x \\<Rightarrow>\n              Tcb (x\\<lparr>cdl_tcb_caps :=\n                              z ++\n                              (case obj of Endpoint \\<Rightarrow> Map.empty\n                               | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                               | CNode x \\<Rightarrow>\n                                   cdl_cnode_caps x)\\<rparr>)\n          | CNode x \\<Rightarrow>\n              CNode\n               (x\\<lparr>cdl_cnode_caps :=\n                           z ++\n                           (case obj of Endpoint \\<Rightarrow> Map.empty\n                            | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                            | CNode x \\<Rightarrow>\n                                cdl_cnode_caps x)\\<rparr>) of\n     Endpoint \\<Rightarrow>\n       case obj of Endpoint \\<Rightarrow> obj\n       | Tcb x \\<Rightarrow>\n           Tcb (x\\<lparr>cdl_tcb_caps :=\n                           z ++\n                           (case obj of Endpoint \\<Rightarrow> Map.empty\n                            | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                            | CNode x \\<Rightarrow>\n                                cdl_cnode_caps x)\\<rparr>)\n       | CNode x \\<Rightarrow>\n           CNode\n            (x\\<lparr>cdl_cnode_caps :=\n                        z ++\n                        (case obj of Endpoint \\<Rightarrow> Map.empty\n                         | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                         | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n     | Tcb xa \\<Rightarrow>\n         Tcb (xa\\<lparr>cdl_tcb_caps :=\n                          x ++ y ++\n                          (case case obj of Endpoint \\<Rightarrow> obj\n                                | Tcb x \\<Rightarrow>\n                                    Tcb (x\n   \\<lparr>cdl_tcb_caps :=\n             z ++\n             (case obj of Endpoint \\<Rightarrow> Map.empty\n              | Tcb x \\<Rightarrow> cdl_tcb_caps x\n              | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n                                | CNode x \\<Rightarrow>\n                                    CNode\n                                     (x\n\\<lparr>cdl_cnode_caps :=\n          z ++\n          (case obj of Endpoint \\<Rightarrow> Map.empty\n           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n           | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>) of\n                           Endpoint \\<Rightarrow> Map.empty\n                           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                           | CNode x \\<Rightarrow>\n                               cdl_cnode_caps x)\\<rparr>)\n     | CNode xa \\<Rightarrow>\n         CNode\n          (xa\\<lparr>cdl_cnode_caps :=\n                       x ++ y ++\n                       (case case obj of Endpoint \\<Rightarrow> obj\n                             | Tcb x \\<Rightarrow>\n                                 Tcb (x\n\\<lparr>cdl_tcb_caps :=\n          z ++\n          (case obj of Endpoint \\<Rightarrow> Map.empty\n           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n           | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n                             | CNode x \\<Rightarrow>\n                                 CNode\n                                  (x\\<lparr>cdl_cnode_caps :=\n        z ++\n        (case obj of Endpoint \\<Rightarrow> Map.empty\n         | Tcb x \\<Rightarrow> cdl_tcb_caps x\n         | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>) of\n                        Endpoint \\<Rightarrow> Map.empty\n                        | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                        | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>))", "apply (fastforce simp: cdl_tcb.splits cdl_cnode.splits\n                 split: cdl_object.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(* Lemmas about add_to_slots, update_slots and object_slots. *)"], ["", "lemma add_to_slots_twice [simp]:\n  \"add_to_slots x (add_to_slots y a) = add_to_slots (x ++ y) a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Abstract_Separation_D.add_to_slots x\n     (Abstract_Separation_D.add_to_slots y a) =\n    Abstract_Separation_D.add_to_slots (x ++ y) a", "by (fastforce simp: add_to_slots_def update_slots_def object_slots_def\n              split: cdl_object.splits)"], ["", "lemma slots_of_heap_empty [simp]: \"slots_of_heap Map.empty object_id = Map.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. slots_of_heap Map.empty object_id = Map.empty", "by (simp add: slots_of_heap_def)"], ["", "lemma slots_of_heap_empty2 [simp]:\n  \"h obj_id = None \\<Longrightarrow> slots_of_heap h obj_id = Map.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h obj_id = None \\<Longrightarrow> slots_of_heap h obj_id = Map.empty", "by (simp add: slots_of_heap_def)"], ["", "lemma update_slots_add_to_slots_empty [simp]:\n  \"update_slots Map.empty (add_to_slots new obj) = update_slots Map.empty obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. update_slots Map.empty (Abstract_Separation_D.add_to_slots new obj) =\n    update_slots Map.empty obj", "by (clarsimp simp: update_slots_def add_to_slots_def split:cdl_object.splits)"], ["", "lemma update_object_slots_id [simp]: \"update_slots (object_slots a) a = a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. update_slots (object_slots a) a = a", "by (clarsimp simp: update_slots_def object_slots_def\n              split: cdl_object.splits)"], ["", "lemma update_slots_of_heap_id [simp]:\n  \"h obj_id = Some obj \\<Longrightarrow> update_slots (slots_of_heap h obj_id) obj = obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h obj_id = Some obj \\<Longrightarrow>\n    update_slots (slots_of_heap h obj_id) obj = obj", "by (clarsimp simp: update_slots_def slots_of_heap_def object_slots_def\n              split: cdl_object.splits)"], ["", "lemma add_to_slots_empty [simp]: \"add_to_slots Map.empty h = h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Abstract_Separation_D.add_to_slots Map.empty h = h", "by (simp add: add_to_slots_def)"], ["", "lemma update_slots_eq:\n  \"update_slots a o1 = update_slots a o2 \\<Longrightarrow> update_slots b o1 = update_slots b o2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. update_slots a o1 = update_slots a o2 \\<Longrightarrow>\n    update_slots b o1 = update_slots b o2", "by (fastforce simp: update_slots_def cdl_tcb.splits cdl_cnode.splits\n              split: cdl_object.splits)"], ["", "(* If there are not two conflicting objects at a position in two states.\n * Objects conflict if their types are different or their ghost_states collide.\n *)"], ["", "definition\n  not_conflicting_objects :: \"sep_state \\<Rightarrow> sep_state \\<Rightarrow> cdl_object_id \\<Rightarrow> bool\"\nwhere\n  \"not_conflicting_objects state_a state_b = (\\<lambda>obj_id.\n let heap_a = sep_heap state_a;\n     heap_b = sep_heap state_b;\n     gs_a = sep_ghost_state state_a;\n     gs_b = sep_ghost_state state_b\n in case (heap_a obj_id, heap_b obj_id) of \n    (Some o1, Some o2) \\<Rightarrow> object_type o1 = object_type o2 \\<and> gs_a obj_id \\<inter> gs_b obj_id = {}\n   | _ \\<Rightarrow> True)\""], ["", "(* \"Cleans\" slots to conform with the compontents. *)"], ["", "definition\n  clean_slots :: \"cdl_cap_map \\<Rightarrow> cdl_components \\<Rightarrow> cdl_cap_map\"\nwhere\n  \"clean_slots slots cmp \\<equiv> slots |` the_set cmp\""], ["", "(* Sets the fields of an object to a \"clean\" state.\n   Because a frame's size is part of it's type, we don't reset it. *)"], ["", "definition\n  object_clean_fields :: \"cdl_object \\<Rightarrow> cdl_components \\<Rightarrow> cdl_object\"\nwhere\n  \"object_clean_fields obj cmp \\<equiv> if None \\<in> cmp then obj else case obj of\n    Tcb x \\<Rightarrow> Tcb (x\\<lparr>cdl_tcb_fault_endpoint := undefined\\<rparr>)\n  | CNode x \\<Rightarrow> CNode (x\\<lparr>cdl_cnode_size_bits := undefined \\<rparr>)\n  | _ \\<Rightarrow> obj\""], ["", "(* Sets the slots of an object to a \"clean\" state. *)"], ["", "definition\n  object_clean_slots :: \"cdl_object \\<Rightarrow> cdl_components \\<Rightarrow> cdl_object\"\nwhere\n  \"object_clean_slots obj cmp \\<equiv> update_slots (clean_slots (object_slots obj) cmp) obj\""], ["", "(* Sets an object to a \"clean\" state. *)"], ["", "definition\n  object_clean :: \"cdl_object \\<Rightarrow> cdl_components \\<Rightarrow> cdl_object\"\nwhere\n  \"object_clean obj gs \\<equiv> object_clean_slots (object_clean_fields obj gs) gs\""], ["", "(* Overrides the left object with the attributes of the right, as specified by the ghost state.\n   If the components for an object are empty, then this object is treated as empty, and thus ignored.\n *)"], ["", "definition\n  object_add :: \"cdl_object \\<Rightarrow> cdl_object \\<Rightarrow> cdl_components \\<Rightarrow> cdl_components \\<Rightarrow> cdl_object\"\nwhere\n  \"object_add obj_a obj_b cmps_a cmps_b \\<equiv>\n  let clean_obj_a = object_clean obj_a cmps_a;\n      clean_obj_b = object_clean obj_b cmps_b\n  in if (cmps_a = {})\n     then clean_obj_b\n     else if (cmps_b = {})\n     then clean_obj_a\n     else if (None \\<in> cmps_b)\n     then (update_slots (object_slots clean_obj_a ++ object_slots clean_obj_b) clean_obj_b)\n     else (update_slots (object_slots clean_obj_a ++ object_slots clean_obj_b) clean_obj_a)\""], ["", "(* Heaps are added by adding their repsective objects.\n * The ghost state tells us which object's fields should be taken.\n * Adding objects of the same type adds their caps\n *   (overwrites the left with the right).\n *)"], ["", "definition\n  cdl_heap_add :: \"sep_state \\<Rightarrow> sep_state \\<Rightarrow> cdl_heap\"\nwhere\n  \"cdl_heap_add state_a state_b \\<equiv> \\<lambda>obj_id.\n let heap_a = sep_heap state_a;\n     heap_b = sep_heap state_b;\n     gs_a = sep_ghost_state state_a;\n     gs_b = sep_ghost_state state_b\n in case heap_b obj_id of\n      None \\<Rightarrow> heap_a obj_id\n    | Some obj_b \\<Rightarrow> case heap_a obj_id of\n                     None \\<Rightarrow> heap_b obj_id\n                   | Some obj_a \\<Rightarrow> Some (object_add obj_a obj_b (gs_a obj_id) (gs_b obj_id))\""], ["", "(* Heaps are added by adding their repsective objects.\n * The ghost state tells us which object's fields should be taken.\n * Adding objects of the same type adds their caps\n *   (overwrites the left with the right).\n *)"], ["", "definition\n  cdl_ghost_state_add :: \"sep_state \\<Rightarrow> sep_state \\<Rightarrow> cdl_ghost_state\"\nwhere\n  \"cdl_ghost_state_add state_a state_b \\<equiv> \\<lambda>obj_id.\n let heap_a = sep_heap state_a;\n     heap_b = sep_heap state_b;\n     gs_a = sep_ghost_state state_a;\n     gs_b = sep_ghost_state state_b\n in      if heap_a obj_id = None \\<and> heap_b obj_id \\<noteq> None then gs_b obj_id\n    else if heap_b obj_id = None \\<and> heap_a obj_id \\<noteq> None then gs_a obj_id\n    else gs_a obj_id \\<union> gs_b obj_id\""], ["", "(* Adding states adds their heaps,\n *  and each objects owns whichever fields it owned in either heap.\n *)"], ["", "definition\n  sep_state_add :: \"sep_state \\<Rightarrow> sep_state \\<Rightarrow> sep_state\"\nwhere\n  \"sep_state_add state_a state_b \\<equiv>\n  let\n    heap_a = sep_heap state_a;\n    heap_b = sep_heap state_b;\n    gs_a = sep_ghost_state state_a;\n    gs_b = sep_ghost_state state_b\n  in\n    SepState (cdl_heap_add state_a state_b) (cdl_ghost_state_add state_a state_b)\""], ["", "(* Heaps are disjoint if for all of their objects:\n   * the caps of their respective objects are disjoint,\n   * their respective objects don't conflict,\n   * they don't both own any of the same fields.\n*)"], ["", "definition\n  sep_state_disj :: \"sep_state \\<Rightarrow> sep_state \\<Rightarrow> bool\"\nwhere\n  \"sep_state_disj state_a state_b \\<equiv>\n  let\n    heap_a = sep_heap state_a;\n    heap_b = sep_heap state_b;\n    gs_a = sep_ghost_state state_a;\n    gs_b = sep_ghost_state state_b\n  in\n    \\<forall>obj_id. not_conflicting_objects state_a state_b obj_id\""], ["", "lemma not_conflicting_objects_comm:\n  \"not_conflicting_objects h1 h2 obj = not_conflicting_objects h2 h1 obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. not_conflicting_objects h1 h2 obj = not_conflicting_objects h2 h1 obj", "apply (clarsimp simp: not_conflicting_objects_def split:option.splits)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x2 x2a.\n       \\<lbrakk>sep_heap h1 obj = Some x2;\n        sep_heap h2 obj = Some x2a\\<rbrakk>\n       \\<Longrightarrow> (object_type x2 = object_type x2a \\<and>\n                          sep_ghost_state h1 obj \\<inter>\n                          sep_ghost_state h2 obj =\n                          {}) =\n                         (object_type x2a = object_type x2 \\<and>\n                          sep_ghost_state h2 obj \\<inter>\n                          sep_ghost_state h1 obj =\n                          {})", "apply (fastforce simp: update_slots_def cdl_tcb.splits cdl_cnode.splits\n              split: cdl_object.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma object_clean_comm:\n  \"\\<lbrakk>object_type obj_a = object_type obj_b;\n    object_slots obj_a ++ object_slots obj_b = object_slots obj_b ++ object_slots obj_a; None \\<notin> cmp\\<rbrakk>\n  \\<Longrightarrow> object_clean (add_to_slots (object_slots obj_a) obj_b) cmp =\n      object_clean (add_to_slots (object_slots obj_b) obj_a) cmp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     object_slots obj_a ++ object_slots obj_b =\n     object_slots obj_b ++ object_slots obj_a;\n     None \\<notin> cmp\\<rbrakk>\n    \\<Longrightarrow> object_clean\n                       (Abstract_Separation_D.add_to_slots\n                         (object_slots obj_a) obj_b)\n                       cmp =\n                      object_clean\n                       (Abstract_Separation_D.add_to_slots\n                         (object_slots obj_b) obj_a)\n                       cmp", "apply (clarsimp simp: object_type_def split: cdl_object.splits)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x2 x2a.\n       \\<lbrakk>object_slots (Tcb x2a) ++ object_slots (Tcb x2) =\n                object_slots (Tcb x2) ++ object_slots (Tcb x2a);\n        None \\<notin> cmp; obj_b = Tcb x2; obj_a = Tcb x2a\\<rbrakk>\n       \\<Longrightarrow> object_clean\n                          (Abstract_Separation_D.add_to_slots\n                            (object_slots (Tcb x2a)) (Tcb x2))\n                          cmp =\n                         object_clean\n                          (Abstract_Separation_D.add_to_slots\n                            (object_slots (Tcb x2)) (Tcb x2a))\n                          cmp\n 2. \\<And>x3 x3a.\n       \\<lbrakk>object_slots (CNode x3a) ++ object_slots (CNode x3) =\n                object_slots (CNode x3) ++ object_slots (CNode x3a);\n        None \\<notin> cmp; obj_b = CNode x3; obj_a = CNode x3a\\<rbrakk>\n       \\<Longrightarrow> object_clean\n                          (Abstract_Separation_D.add_to_slots\n                            (object_slots (CNode x3a)) (CNode x3))\n                          cmp =\n                         object_clean\n                          (Abstract_Separation_D.add_to_slots\n                            (object_slots (CNode x3)) (CNode x3a))\n                          cmp", "apply (clarsimp simp: object_clean_def object_clean_slots_def object_clean_fields_def\n                        add_to_slots_def object_slots_def update_slots_def\n                        cdl_tcb.splits cdl_cnode.splits\n                 split: cdl_object.splits)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma add_to_slots_object_slots:\n  \"object_type y = object_type z\n \\<Longrightarrow> add_to_slots (object_slots (add_to_slots (x) y)) z =\n     add_to_slots (x ++ object_slots y) z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type y = object_type z \\<Longrightarrow>\n    Abstract_Separation_D.add_to_slots\n     (object_slots (Abstract_Separation_D.add_to_slots x y)) z =\n    Abstract_Separation_D.add_to_slots (x ++ object_slots y) z", "apply (clarsimp simp: add_to_slots_def update_slots_def object_slots_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type y = object_type z \\<Longrightarrow>\n    (case z of Endpoint \\<Rightarrow> z\n     | Tcb xa \\<Rightarrow>\n         Tcb (xa\\<lparr>cdl_tcb_caps :=\n                          (case case y of Endpoint \\<Rightarrow> y\n                                | Tcb xa \\<Rightarrow>\n                                    Tcb (xa\n   \\<lparr>cdl_tcb_caps :=\n             x ++\n             (case y of Endpoint \\<Rightarrow> Map.empty\n              | Tcb x \\<Rightarrow> cdl_tcb_caps x\n              | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n                                | CNode xa \\<Rightarrow>\n                                    CNode\n                                     (xa\n\\<lparr>cdl_cnode_caps :=\n          x ++\n          (case y of Endpoint \\<Rightarrow> Map.empty\n           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n           | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>) of\n                           Endpoint \\<Rightarrow> Map.empty\n                           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                           | CNode x \\<Rightarrow> cdl_cnode_caps x) ++\n                          (case z of Endpoint \\<Rightarrow> Map.empty\n                           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                           | CNode x \\<Rightarrow>\n                               cdl_cnode_caps x)\\<rparr>)\n     | CNode xa \\<Rightarrow>\n         CNode\n          (xa\\<lparr>cdl_cnode_caps :=\n                       (case case y of Endpoint \\<Rightarrow> y\n                             | Tcb xa \\<Rightarrow>\n                                 Tcb (xa\n\\<lparr>cdl_tcb_caps :=\n          x ++\n          (case y of Endpoint \\<Rightarrow> Map.empty\n           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n           | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>)\n                             | CNode xa \\<Rightarrow>\n                                 CNode\n                                  (xa\\<lparr>cdl_cnode_caps :=\n         x ++\n         (case y of Endpoint \\<Rightarrow> Map.empty\n          | Tcb x \\<Rightarrow> cdl_tcb_caps x\n          | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>) of\n                        Endpoint \\<Rightarrow> Map.empty\n                        | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                        | CNode x \\<Rightarrow> cdl_cnode_caps x) ++\n                       (case z of Endpoint \\<Rightarrow> Map.empty\n                        | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                        | CNode x \\<Rightarrow>\n                            cdl_cnode_caps x)\\<rparr>)) =\n    (case z of Endpoint \\<Rightarrow> z\n     | Tcb xa \\<Rightarrow>\n         Tcb (xa\\<lparr>cdl_tcb_caps :=\n                          x ++\n                          (case y of Endpoint \\<Rightarrow> Map.empty\n                           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                           | CNode x \\<Rightarrow> cdl_cnode_caps x) ++\n                          (case z of Endpoint \\<Rightarrow> Map.empty\n                           | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                           | CNode x \\<Rightarrow>\n                               cdl_cnode_caps x)\\<rparr>)\n     | CNode xa \\<Rightarrow>\n         CNode\n          (xa\\<lparr>cdl_cnode_caps :=\n                       x ++\n                       (case y of Endpoint \\<Rightarrow> Map.empty\n                        | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                        | CNode x \\<Rightarrow> cdl_cnode_caps x) ++\n                       (case z of Endpoint \\<Rightarrow> Map.empty\n                        | Tcb x \\<Rightarrow> cdl_tcb_caps x\n                        | CNode x \\<Rightarrow> cdl_cnode_caps x)\\<rparr>))", "apply (fastforce simp: object_type_def cdl_tcb.splits cdl_cnode.splits\n                 split: cdl_object.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma not_conflicting_objects_empty [simp]:\n  \"not_conflicting_objects s (SepState Map.empty (\\<lambda>obj_id. {})) obj_id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. not_conflicting_objects s (SepState Map.empty (\\<lambda>obj_id. {}))\n     obj_id", "by (clarsimp simp: not_conflicting_objects_def split:option.splits)"], ["", "lemma empty_not_conflicting_objects [simp]:\n  \"not_conflicting_objects (SepState Map.empty (\\<lambda>obj_id. {})) s obj_id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. not_conflicting_objects (SepState Map.empty (\\<lambda>obj_id. {})) s\n     obj_id", "by (clarsimp simp: not_conflicting_objects_def split:option.splits)"], ["", "lemma not_conflicting_objects_empty_object [elim!]:\n  \"(sep_heap x) obj_id = None \\<Longrightarrow> not_conflicting_objects x y obj_id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sep_heap x obj_id = None \\<Longrightarrow>\n    not_conflicting_objects x y obj_id", "by (clarsimp simp: not_conflicting_objects_def)"], ["", "lemma empty_object_not_conflicting_objects [elim!]:\n  \"(sep_heap y) obj_id = None \\<Longrightarrow> not_conflicting_objects x y obj_id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sep_heap y obj_id = None \\<Longrightarrow>\n    not_conflicting_objects x y obj_id", "apply (drule not_conflicting_objects_empty_object [where y=x])"], ["proof (prove)\ngoal (1 subgoal):\n 1. not_conflicting_objects y x obj_id \\<Longrightarrow>\n    not_conflicting_objects x y obj_id", "apply (clarsimp simp: not_conflicting_objects_comm)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma cdl_heap_add_empty [simp]:\n \"cdl_heap_add (SepState h gs) (SepState Map.empty (\\<lambda>obj_id. {})) = h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cdl_heap_add (SepState h gs)\n     (SepState Map.empty (\\<lambda>obj_id. {})) =\n    h", "by (simp add: cdl_heap_add_def)"], ["", "lemma empty_cdl_heap_add [simp]:\n  \"cdl_heap_add (SepState Map.empty (\\<lambda>obj_id. {})) (SepState h gs)= h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cdl_heap_add (SepState Map.empty (\\<lambda>obj_id. {}))\n     (SepState h gs) =\n    h", "apply (simp add: cdl_heap_add_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>obj_id.\n        case h obj_id of None \\<Rightarrow> None\n        | Some obj_b \\<Rightarrow>\n            case None of None \\<Rightarrow> h obj_id\n            | Some obj_a \\<Rightarrow>\n                Some (object_add obj_a obj_b {} (gs obj_id))) =\n    h", "apply (rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       (case h obj_id of None \\<Rightarrow> None\n        | Some obj_b \\<Rightarrow>\n            case None of None \\<Rightarrow> h obj_id\n            | Some obj_a \\<Rightarrow>\n                Some (object_add obj_a obj_b {} (gs obj_id))) =\n       h obj_id", "apply (clarsimp split: option.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma map_add_result_empty1: \"a ++ b = Map.empty \\<Longrightarrow> a = Map.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a ++ b = Map.empty \\<Longrightarrow> a = Map.empty", "apply (subgoal_tac \"dom (a++b) = {}\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}\\<rbrakk>\n    \\<Longrightarrow> a = Map.empty\n 2. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply (subgoal_tac \"dom (a) = {}\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}; dom a = {}\\<rbrakk>\n    \\<Longrightarrow> a = Map.empty\n 2. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}\\<rbrakk>\n    \\<Longrightarrow> dom a = {}\n 3. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply clarsimp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}\\<rbrakk>\n    \\<Longrightarrow> dom a = {}\n 2. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply (unfold dom_map_add)[1]"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom b \\<union> dom a = {}\\<rbrakk>\n    \\<Longrightarrow> dom a = {}\n 2. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply clarsimp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma map_add_result_empty2: \"a ++ b = Map.empty \\<Longrightarrow> b = Map.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a ++ b = Map.empty \\<Longrightarrow> b = Map.empty", "apply (subgoal_tac \"dom (a++b) = {}\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}\\<rbrakk>\n    \\<Longrightarrow> b = Map.empty\n 2. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply (subgoal_tac \"dom (a) = {}\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}; dom a = {}\\<rbrakk>\n    \\<Longrightarrow> b = Map.empty\n 2. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}\\<rbrakk>\n    \\<Longrightarrow> dom a = {}\n 3. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply clarsimp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom (a ++ b) = {}\\<rbrakk>\n    \\<Longrightarrow> dom a = {}\n 2. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply (unfold dom_map_add)[1]"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a ++ b = Map.empty; dom b \\<union> dom a = {}\\<rbrakk>\n    \\<Longrightarrow> dom a = {}\n 2. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. a ++ b = Map.empty \\<Longrightarrow> dom (a ++ b) = {}", "apply clarsimp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma map_add_emptyE [elim!]: \"\\<lbrakk>a ++ b = Map.empty; \\<lbrakk>a = Map.empty; b = Map.empty\\<rbrakk> \\<Longrightarrow> R\\<rbrakk> \\<Longrightarrow> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a ++ b = Map.empty;\n     \\<lbrakk>a = Map.empty; b = Map.empty\\<rbrakk>\n     \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "apply (frule map_add_result_empty1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a ++ b = Map.empty;\n     \\<lbrakk>a = Map.empty; b = Map.empty\\<rbrakk> \\<Longrightarrow> R;\n     a = Map.empty\\<rbrakk>\n    \\<Longrightarrow> R", "apply (frule map_add_result_empty2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a ++ b = Map.empty;\n     \\<lbrakk>a = Map.empty; b = Map.empty\\<rbrakk> \\<Longrightarrow> R;\n     a = Map.empty; b = Map.empty\\<rbrakk>\n    \\<Longrightarrow> R", "apply clarsimp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma clean_slots_empty [simp]:\n  \"clean_slots Map.empty cmp = Map.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. clean_slots Map.empty cmp = Map.empty", "by (clarsimp simp: clean_slots_def)"], ["", "lemma object_type_update_slots [simp]:\n  \"object_type (update_slots slots x) = object_type x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type (update_slots slots x) = object_type x", "by (clarsimp simp: object_type_def update_slots_def split: cdl_object.splits)"], ["", "lemma object_type_object_clean_slots [simp]:\n  \"object_type (object_clean_slots x cmp) = object_type x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type (object_clean_slots x cmp) = object_type x", "by (clarsimp simp: object_clean_slots_def)"], ["", "lemma object_type_object_clean_fields [simp]:\n  \"object_type (object_clean_fields x cmp) = object_type x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type (object_clean_fields x cmp) = object_type x", "by (clarsimp simp: object_clean_fields_def object_type_def split: cdl_object.splits)"], ["", "lemma object_type_object_clean [simp]:\n  \"object_type (object_clean x cmp) = object_type x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type (object_clean x cmp) = object_type x", "by (clarsimp simp: object_clean_def)"], ["", "lemma object_type_add_to_slots [simp]:\n  \"object_type (add_to_slots slots x) = object_type x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type (Abstract_Separation_D.add_to_slots slots x) = object_type x", "by (clarsimp simp: object_type_def add_to_slots_def update_slots_def split: cdl_object.splits)"], ["", "lemma object_slots_update_slots [simp]:\n  \"has_slots obj \\<Longrightarrow> object_slots (update_slots slots obj) = slots\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_slots obj \\<Longrightarrow>\n    object_slots (update_slots slots obj) = slots", "by (clarsimp simp: object_slots_def update_slots_def has_slots_def\n              split: cdl_object.splits)"], ["", "lemma object_slots_update_slots_empty [simp]:\n  \"\\<not>has_slots obj \\<Longrightarrow> object_slots (update_slots slots obj) = Map.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> has_slots obj \\<Longrightarrow>\n    object_slots (update_slots slots obj) = Map.empty", "by (clarsimp simp: object_slots_def update_slots_def has_slots_def\n                 split: cdl_object.splits)"], ["", "lemma update_slots_no_slots [simp]:\n  \"\\<not>has_slots obj \\<Longrightarrow> update_slots slots obj = obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> has_slots obj \\<Longrightarrow> update_slots slots obj = obj", "by (clarsimp simp: update_slots_def has_slots_def split: cdl_object.splits)"], ["", "lemma update_slots_update_slots [simp]:\n  \"update_slots slots (update_slots slots' obj) = update_slots slots obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. update_slots slots (update_slots slots' obj) = update_slots slots obj", "by (clarsimp simp: update_slots_def split: cdl_object.splits)"], ["", "lemma update_slots_same_object:\n  \"a = b \\<Longrightarrow> update_slots a obj = update_slots b obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = b \\<Longrightarrow> update_slots a obj = update_slots b obj", "by (erule arg_cong)"], ["", "lemma object_type_has_slots:\n  \"\\<lbrakk>has_slots x; object_type x = object_type y\\<rbrakk> \\<Longrightarrow> has_slots y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>has_slots x; object_type x = object_type y\\<rbrakk>\n    \\<Longrightarrow> has_slots y", "by (clarsimp simp: object_type_def has_slots_def split: cdl_object.splits)"], ["", "lemma object_slots_object_clean_fields [simp]:\n  \"object_slots (object_clean_fields obj cmp) = object_slots obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_slots (object_clean_fields obj cmp) = object_slots obj", "by (clarsimp simp: object_slots_def object_clean_fields_def split: cdl_object.splits)"], ["", "lemma object_slots_object_clean_slots [simp]:\n  \"object_slots (object_clean_slots obj cmp) = clean_slots (object_slots obj) cmp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_slots (object_clean_slots obj cmp) =\n    clean_slots (object_slots obj) cmp", "by (clarsimp simp: object_clean_slots_def object_slots_def update_slots_def split: cdl_object.splits)"], ["", "lemma object_slots_object_clean [simp]:\n  \"object_slots (object_clean obj cmp) = clean_slots (object_slots obj) cmp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_slots (object_clean obj cmp) = clean_slots (object_slots obj) cmp", "by (clarsimp simp: object_clean_def)"], ["", "lemma object_slots_add_to_slots [simp]:\n  \"object_type y = object_type z \\<Longrightarrow> object_slots (add_to_slots (object_slots y) z) = object_slots y ++ object_slots z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type y = object_type z \\<Longrightarrow>\n    object_slots (Abstract_Separation_D.add_to_slots (object_slots y) z) =\n    object_slots y ++ object_slots z", "by (clarsimp simp: object_slots_def add_to_slots_def update_slots_def object_type_def split: cdl_object.splits)"], ["", "lemma update_slots_object_clean_slots [simp]:\n  \"update_slots slots (object_clean_slots obj cmp) = update_slots slots obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. update_slots slots (object_clean_slots obj cmp) = update_slots slots obj", "by (clarsimp simp: object_clean_slots_def)"], ["", "lemma object_clean_fields_idem [simp]:\n  \"object_clean_fields (object_clean_fields obj cmp) cmp = object_clean_fields obj cmp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_clean_fields (object_clean_fields obj cmp) cmp =\n    object_clean_fields obj cmp", "by (clarsimp simp: object_clean_fields_def split: cdl_object.splits)"], ["", "lemma object_clean_slots_idem [simp]:\n  \"object_clean_slots (object_clean_slots obj cmp) cmp = object_clean_slots obj cmp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_clean_slots (object_clean_slots obj cmp) cmp =\n    object_clean_slots obj cmp", "apply (case_tac  \"has_slots obj\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. has_slots obj \\<Longrightarrow>\n    object_clean_slots (object_clean_slots obj cmp) cmp =\n    object_clean_slots obj cmp\n 2. \\<not> has_slots obj \\<Longrightarrow>\n    object_clean_slots (object_clean_slots obj cmp) cmp =\n    object_clean_slots obj cmp", "apply (clarsimp simp: object_clean_slots_def clean_slots_def)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma object_clean_fields_object_clean_slots [simp]:\n  \"object_clean_fields (object_clean_slots obj gs) gs = object_clean_slots (object_clean_fields obj gs) gs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_clean_fields (object_clean_slots obj gs) gs =\n    object_clean_slots (object_clean_fields obj gs) gs", "by (clarsimp simp: object_clean_fields_def object_clean_slots_def\n                     clean_slots_def object_slots_def update_slots_def\n              split: cdl_object.splits)"], ["", "lemma object_clean_idem [simp]:\n  \"object_clean (object_clean obj cmp) cmp = object_clean obj cmp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_clean (object_clean obj cmp) cmp = object_clean obj cmp", "by (clarsimp simp: object_clean_def)"], ["", "lemma has_slots_object_clean_slots:\n \"has_slots (object_clean_slots obj cmp) = has_slots obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_slots (object_clean_slots obj cmp) = has_slots obj", "by (clarsimp simp: has_slots_def object_clean_slots_def update_slots_def split: cdl_object.splits)"], ["", "lemma has_slots_object_clean_fields:\n \"has_slots (object_clean_fields obj cmp) = has_slots obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_slots (object_clean_fields obj cmp) = has_slots obj", "by (clarsimp simp: has_slots_def object_clean_fields_def split: cdl_object.splits)"], ["", "lemma has_slots_object_clean:\n \"has_slots (object_clean obj cmp) = has_slots obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_slots (object_clean obj cmp) = has_slots obj", "by (clarsimp simp: object_clean_def has_slots_object_clean_slots has_slots_object_clean_fields)"], ["", "lemma object_slots_update_slots_object_clean_fields [simp]:\n  \"object_slots (update_slots slots (object_clean_fields obj cmp)) = object_slots (update_slots slots obj)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_slots (update_slots slots (object_clean_fields obj cmp)) =\n    object_slots (update_slots slots obj)", "apply (case_tac \"has_slots obj\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. has_slots obj \\<Longrightarrow>\n    object_slots (update_slots slots (object_clean_fields obj cmp)) =\n    object_slots (update_slots slots obj)\n 2. \\<not> has_slots obj \\<Longrightarrow>\n    object_slots (update_slots slots (object_clean_fields obj cmp)) =\n    object_slots (update_slots slots obj)", "apply (clarsimp simp: has_slots_object_clean_fields)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma object_clean_fields_update_slots [simp]:\n \"object_clean_fields (update_slots slots obj) cmp = update_slots slots (object_clean_fields obj cmp)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_clean_fields (update_slots slots obj) cmp =\n    update_slots slots (object_clean_fields obj cmp)", "by (clarsimp simp: object_clean_fields_def update_slots_def split: cdl_object.splits)"], ["", "lemma object_clean_fields_twice [simp]:\n  \"(object_clean_fields (object_clean_fields obj cmp') cmp) = object_clean_fields obj (cmp \\<inter> cmp')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_clean_fields (object_clean_fields obj cmp') cmp =\n    object_clean_fields obj (cmp \\<inter> cmp')", "by (clarsimp simp: object_clean_fields_def split: cdl_object.splits)"], ["", "lemma update_slots_object_clean_fields:\n  \"\\<lbrakk>None \\<notin> cmps; None \\<notin> cmps'; object_type obj = object_type obj'\\<rbrakk>\n    \\<Longrightarrow> update_slots slots (object_clean_fields obj cmps) =\n        update_slots slots (object_clean_fields obj' cmps')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>None \\<notin> cmps; None \\<notin> cmps';\n     object_type obj = object_type obj'\\<rbrakk>\n    \\<Longrightarrow> update_slots slots (object_clean_fields obj cmps) =\n                      update_slots slots (object_clean_fields obj' cmps')", "by (fastforce simp: update_slots_def object_clean_fields_def object_type_def split: cdl_object.splits)"], ["", "lemma object_clean_fields_no_slots:\n  \"\\<lbrakk>None \\<notin> cmps; None \\<notin> cmps'; object_type obj = object_type obj'; \\<not> has_slots obj; \\<not> has_slots obj'\\<rbrakk>\n    \\<Longrightarrow> object_clean_fields obj cmps = object_clean_fields obj' cmps'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>None \\<notin> cmps; None \\<notin> cmps';\n     object_type obj = object_type obj'; \\<not> has_slots obj;\n     \\<not> has_slots obj'\\<rbrakk>\n    \\<Longrightarrow> object_clean_fields obj cmps =\n                      object_clean_fields obj' cmps'", "by (fastforce simp: object_clean_fields_def object_type_def has_slots_def split: cdl_object.splits)"], ["", "lemma update_slots_object_clean:\n  \"\\<lbrakk>None \\<notin> cmps; None \\<notin> cmps'; object_type obj = object_type obj'\\<rbrakk>\n   \\<Longrightarrow> update_slots slots (object_clean obj cmps) = update_slots slots (object_clean obj' cmps')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>None \\<notin> cmps; None \\<notin> cmps';\n     object_type obj = object_type obj'\\<rbrakk>\n    \\<Longrightarrow> update_slots slots (object_clean obj cmps) =\n                      update_slots slots (object_clean obj' cmps')", "apply (clarsimp simp: object_clean_def object_clean_slots_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>None \\<notin> cmps; None \\<notin> cmps';\n     object_type obj = object_type obj'\\<rbrakk>\n    \\<Longrightarrow> update_slots slots (object_clean_fields obj cmps) =\n                      update_slots slots (object_clean_fields obj' cmps')", "apply (erule (2) update_slots_object_clean_fields)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma cdl_heap_add_assoc':\n  \"\\<forall>obj_id. not_conflicting_objects x z obj_id \\<and>\n            not_conflicting_objects y z obj_id \\<and>\n            not_conflicting_objects x z obj_id \\<Longrightarrow>\n   cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n   cdl_heap_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>obj_id.\n       not_conflicting_objects x z obj_id \\<and>\n       not_conflicting_objects y z obj_id \\<and>\n       not_conflicting_objects x z obj_id \\<Longrightarrow>\n    cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n    cdl_heap_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))", "apply (rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<forall>obj_id.\n          not_conflicting_objects x z obj_id \\<and>\n          not_conflicting_objects y z obj_id \\<and>\n          not_conflicting_objects x z obj_id \\<Longrightarrow>\n       cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y))\n        z xa =\n       cdl_heap_add x\n        (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z)) xa", "apply (rename_tac obj_id)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<forall>obj_id.\n          not_conflicting_objects x z obj_id \\<and>\n          not_conflicting_objects y z obj_id \\<and>\n          not_conflicting_objects x z obj_id \\<Longrightarrow>\n       cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y))\n        z obj_id =\n       cdl_heap_add x\n        (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z)) obj_id", "apply (erule_tac x=obj_id in allE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       not_conflicting_objects x z obj_id \\<and>\n       not_conflicting_objects y z obj_id \\<and>\n       not_conflicting_objects x z obj_id \\<Longrightarrow>\n       cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y))\n        z obj_id =\n       cdl_heap_add x\n        (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z)) obj_id", "apply (clarsimp simp: cdl_heap_add_def cdl_ghost_state_add_def not_conflicting_objects_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>case sep_heap y obj_id of None \\<Rightarrow> True\n                | Some o1 \\<Rightarrow>\n                    case sep_heap z obj_id of None \\<Rightarrow> True\n                    | Some o2 \\<Rightarrow>\n                        object_type o1 = object_type o2 \\<and>\n                        sep_ghost_state y obj_id \\<inter>\n                        sep_ghost_state z obj_id =\n                        {};\n        case sep_heap x obj_id of None \\<Rightarrow> True\n        | Some o1 \\<Rightarrow>\n            case sep_heap z obj_id of None \\<Rightarrow> True\n            | Some o2 \\<Rightarrow>\n                object_type o1 = object_type o2 \\<and>\n                sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id =\n                {}\\<rbrakk>\n       \\<Longrightarrow> (let heap_b = sep_heap z\n                          in case heap_b obj_id of\n                             None \\<Rightarrow>\n                               let heap_a = sep_heap x; heap_b = sep_heap y\n                               in case heap_b obj_id of\n                                  None \\<Rightarrow> heap_a obj_id\n                                  | Some obj_b \\<Rightarrow>\ncase heap_a obj_id of None \\<Rightarrow> heap_b obj_id\n| Some obj_a \\<Rightarrow>\n    Some\n     (object_add obj_a obj_b (sep_ghost_state x obj_id)\n       (sep_ghost_state y obj_id))\n                             | Some obj_b \\<Rightarrow>\n                                 case let heap_a = sep_heap x;\n    heap_b = sep_heap y\nin case heap_b obj_id of None \\<Rightarrow> heap_a obj_id\n   | Some obj_b \\<Rightarrow>\n       case heap_a obj_id of None \\<Rightarrow> heap_b obj_id\n       | Some obj_a \\<Rightarrow>\n           Some\n            (object_add obj_a obj_b (sep_ghost_state x obj_id)\n              (sep_ghost_state y obj_id)) of\n                                 None \\<Rightarrow> heap_b obj_id\n                                 | Some obj_a \\<Rightarrow>\n                                     Some\n(object_add obj_a obj_b\n  (let heap_a = sep_heap x; heap_b = sep_heap y; gs_a = sep_ghost_state x;\n       gs_b = sep_ghost_state y\n   in if heap_a obj_id = None \\<and> (\\<exists>y. heap_b obj_id = Some y)\n      then gs_b obj_id\n      else if heap_b obj_id = None \\<and> heap_a obj_id \\<noteq> None\n           then gs_a obj_id else gs_a obj_id \\<union> gs_b obj_id)\n  (sep_ghost_state z obj_id))) =\n                         (let heap_a = sep_heap x\n                          in case let heap_a = sep_heap y;\nheap_b = sep_heap z\n                                  in case heap_b obj_id of\n                                     None \\<Rightarrow> heap_a obj_id\n                                     | Some obj_b \\<Rightarrow>\n   case heap_a obj_id of None \\<Rightarrow> heap_b obj_id\n   | Some obj_a \\<Rightarrow>\n       Some\n        (object_add obj_a obj_b (sep_ghost_state y obj_id)\n          (sep_ghost_state z obj_id)) of\n                             None \\<Rightarrow> heap_a obj_id\n                             | Some obj_b \\<Rightarrow>\n                                 case heap_a obj_id of\n                                 None \\<Rightarrow>\n                                   let heap_a = sep_heap y;\n heap_b = sep_heap z\n                                   in case heap_b obj_id of\nNone \\<Rightarrow> heap_a obj_id\n| Some obj_b \\<Rightarrow>\n    case heap_a obj_id of None \\<Rightarrow> heap_b obj_id\n    | Some obj_a \\<Rightarrow>\n        Some\n         (object_add obj_a obj_b (sep_ghost_state y obj_id)\n           (sep_ghost_state z obj_id))\n                                 | Some obj_a \\<Rightarrow>\n                                     Some\n(object_add obj_a obj_b (sep_ghost_state x obj_id)\n  (let heap_a = sep_heap y; heap_b = sep_heap z; gs_a = sep_ghost_state y;\n       gs_b = sep_ghost_state z\n   in if heap_a obj_id = None \\<and> (\\<exists>y. heap_b obj_id = Some y)\n      then gs_b obj_id\n      else if heap_b obj_id = None \\<and> heap_a obj_id \\<noteq> None\n           then gs_a obj_id else gs_a obj_id \\<union> gs_b obj_id)))", "apply (simp add: Let_unfold split: option.splits)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id x2 x2a x2b.\n       \\<lbrakk>sep_heap x obj_id = Some x2a;\n        object_type x2a = object_type x2b \\<and>\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        sep_heap y obj_id = Some x2; sep_heap z obj_id = Some x2b;\n        object_type x2 = object_type x2b \\<and>\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id =\n        {}\\<rbrakk>\n       \\<Longrightarrow> object_add\n                          (object_add x2a x2 (sep_ghost_state x obj_id)\n                            (sep_ghost_state y obj_id))\n                          x2b\n                          (sep_ghost_state x obj_id \\<union>\n                           sep_ghost_state y obj_id)\n                          (sep_ghost_state z obj_id) =\n                         object_add x2a\n                          (object_add x2 x2b (sep_ghost_state y obj_id)\n                            (sep_ghost_state z obj_id))\n                          (sep_ghost_state x obj_id)\n                          (sep_ghost_state y obj_id \\<union>\n                           sep_ghost_state z obj_id)", "apply (rename_tac obj_y obj_x obj_z)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        object_type obj_x = object_type obj_z \\<and>\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_y = object_type obj_z \\<and>\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id =\n        {}\\<rbrakk>\n       \\<Longrightarrow> object_add\n                          (object_add obj_x obj_y (sep_ghost_state x obj_id)\n                            (sep_ghost_state y obj_id))\n                          obj_z\n                          (sep_ghost_state x obj_id \\<union>\n                           sep_ghost_state y obj_id)\n                          (sep_ghost_state z obj_id) =\n                         object_add obj_x\n                          (object_add obj_y obj_z (sep_ghost_state y obj_id)\n                            (sep_ghost_state z obj_id))\n                          (sep_ghost_state x obj_id)\n                          (sep_ghost_state y obj_id \\<union>\n                           sep_ghost_state z obj_id)", "apply (clarsimp simp: object_add_def clean_slots_def object_clean_def object_clean_slots_def Let_unfold)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id =\n        {}\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))", "apply (case_tac \"has_slots obj_z\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))\n 2. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))", "apply (subgoal_tac \"has_slots obj_y\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        has_slots obj_z; has_slots obj_y\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))\n 2. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> has_slots obj_y\n 3. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))", "apply (subgoal_tac \"has_slots obj_x\")"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        has_slots obj_z; has_slots obj_y; has_slots obj_x\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))\n 2. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        has_slots obj_z; has_slots obj_y\\<rbrakk>\n       \\<Longrightarrow> has_slots obj_x\n 3. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> has_slots obj_y\n 4. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))", "apply ((clarsimp simp: has_slots_object_clean_fields has_slots_object_clean_slots has_slots_object_clean\n                           map_add_restrict union_intersection | \n            drule inter_empty_not_both | \n            erule update_slots_object_clean_fields |\n            erule object_type_has_slots, simp |\n            simp | safe)+)[3]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))", "apply (subgoal_tac \"\\<not> has_slots obj_y\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z; \\<not> has_slots obj_y\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))\n 2. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> \\<not> has_slots obj_y", "apply (subgoal_tac \"\\<not> has_slots obj_x\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z; \\<not> has_slots obj_y;\n        \\<not> has_slots obj_x\\<rbrakk>\n       \\<Longrightarrow> (None\n                          \\<in> sep_ghost_state y obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))))))) \\<and>\n                         (None\n                          \\<notin> sep_ghost_state y\n                                    obj_id \\<longrightarrow>\n                          (sep_ghost_state y obj_id = {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |` the_set {})\n                               (object_clean_fields obj_z {}) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |` the_set {})\n                                   obj_z) |`\n                                the_set {})\n                               (object_clean_fields obj_z {})) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots obj_x |`\n                                the_set (sep_ghost_state x obj_id))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots obj_z |`\n                                the_set (sep_ghost_state z obj_id))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set {}))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))) \\<and>\n                          (sep_ghost_state y obj_id \\<noteq>\n                           {} \\<longrightarrow>\n                           (None\n                            \\<in> sep_ghost_state z obj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_z) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_z) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_z))\n                               (object_clean_fields obj_z\n                                 (sep_ghost_state z obj_id))))) \\<and>\n                           (None\n                            \\<notin> sep_ghost_state z\nobj_id \\<longrightarrow>\n                            (sep_ghost_state z obj_id = {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set {} \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_y |`\n                                    the_set (sep_ghost_state y obj_id))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set {}))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_x |` the_set (sep_ghost_state x obj_id)) obj_x) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y))\n                                   obj_x) |`\n                                (the_set (sep_ghost_state x obj_id) \\<union>\n                                 the_set (sep_ghost_state y obj_id)))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set {}))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))) \\<and>\n                            (sep_ghost_state z obj_id \\<noteq>\n                             {} \\<longrightarrow>\n                             (sep_ghost_state x obj_id =\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) |`\n                                    (the_set {} \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_y) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots obj_y |` the_set (sep_ghost_state y obj_id)) obj_y) ++\n                                    object_slots\n                                     (update_slots\n (object_slots obj_z |` the_set (sep_ghost_state z obj_id)) obj_z))\n                                   obj_y) |`\n                                (the_set (sep_ghost_state y obj_id) \\<union>\n                                 the_set (sep_ghost_state z obj_id)))\n                               (object_clean_fields obj_y\n                                 (sep_ghost_state y obj_id))) \\<and>\n                             (sep_ghost_state x obj_id \\<noteq>\n                              {} \\<longrightarrow>\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_x |` the_set (sep_ghost_state x obj_id))\n     obj_x) ++\n  object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y))\n obj_x) |`\n                                    (the_set\n(sep_ghost_state x obj_id) \\<union>\n                                     the_set (sep_ghost_state y obj_id)))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots obj_z |`\n                                    the_set (sep_ghost_state z obj_id))\n                                   obj_z))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)) =\n                              update_slots\n                               (object_slots\n                                 (update_slots\n                                   (object_slots obj_x |`\n                                    the_set (sep_ghost_state x obj_id))\n                                   obj_x) ++\n                                object_slots\n                                 (update_slots\n                                   (object_slots\n                                     (update_slots\n (object_slots\n   (update_slots (object_slots obj_y |` the_set (sep_ghost_state y obj_id))\n     obj_y) ++\n  object_slots\n   (update_slots (object_slots obj_z |` the_set (sep_ghost_state z obj_id))\n     obj_z))\n obj_y) |`\n                                    (the_set\n(sep_ghost_state y obj_id) \\<union>\n                                     the_set (sep_ghost_state z obj_id)))\n                                   obj_y))\n                               (object_clean_fields obj_x\n                                 (sep_ghost_state x obj_id)))))))\n 2. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z; \\<not> has_slots obj_y\\<rbrakk>\n       \\<Longrightarrow> \\<not> has_slots obj_x\n 3. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z\\<rbrakk>\n       \\<Longrightarrow> \\<not> has_slots obj_y", "apply ((clarsimp simp: has_slots_object_clean_fields has_slots_object_clean_slots has_slots_object_clean\n                           map_add_restrict union_intersection | \n            drule inter_empty_not_both | \n            erule object_clean_fields_no_slots |\n            erule object_type_has_slots, simp |\n            simp | safe)+)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z; \\<not> has_slots obj_y;\n        has_slots obj_x\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>obj_id obj_y obj_x obj_z.\n       \\<lbrakk>sep_heap x obj_id = Some obj_x;\n        sep_heap y obj_id = Some obj_y; sep_heap z obj_id = Some obj_z;\n        object_type obj_x = object_type obj_z;\n        sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id = {};\n        object_type obj_y = object_type obj_z;\n        sep_ghost_state y obj_id \\<inter> sep_ghost_state z obj_id = {};\n        \\<not> has_slots obj_z; has_slots obj_y\\<rbrakk>\n       \\<Longrightarrow> False", "apply (fastforce simp: object_type_has_slots)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma cdl_heap_add_assoc:\n  \"\\<lbrakk>sep_state_disj x y; sep_state_disj y z; sep_state_disj x z\\<rbrakk>\n  \\<Longrightarrow> cdl_heap_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n      cdl_heap_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>sep_state_disj x y; sep_state_disj y z;\n     sep_state_disj x z\\<rbrakk>\n    \\<Longrightarrow> cdl_heap_add\n                       (SepState (cdl_heap_add x y)\n                         (cdl_ghost_state_add x y))\n                       z =\n                      cdl_heap_add x\n                       (SepState (cdl_heap_add y z)\n                         (cdl_ghost_state_add y z))", "apply (clarsimp simp: sep_state_disj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>All (not_conflicting_objects x y);\n     All (not_conflicting_objects y z);\n     All (not_conflicting_objects x z)\\<rbrakk>\n    \\<Longrightarrow> cdl_heap_add\n                       (SepState (cdl_heap_add x y)\n                         (cdl_ghost_state_add x y))\n                       z =\n                      cdl_heap_add x\n                       (SepState (cdl_heap_add y z)\n                         (cdl_ghost_state_add y z))", "apply (cut_tac cdl_heap_add_assoc')"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>All (not_conflicting_objects x y);\n     All (not_conflicting_objects y z); All (not_conflicting_objects x z);\n     cdl_heap_add\n      (SepState (cdl_heap_add ?x1 ?y1) (cdl_ghost_state_add ?x1 ?y1)) ?z1 =\n     cdl_heap_add ?x1\n      (SepState (cdl_heap_add ?y1 ?z1)\n        (cdl_ghost_state_add ?y1 ?z1))\\<rbrakk>\n    \\<Longrightarrow> cdl_heap_add\n                       (SepState (cdl_heap_add x y)\n                         (cdl_ghost_state_add x y))\n                       z =\n                      cdl_heap_add x\n                       (SepState (cdl_heap_add y z)\n                         (cdl_ghost_state_add y z))\n 2. \\<lbrakk>All (not_conflicting_objects x y);\n     All (not_conflicting_objects y z);\n     All (not_conflicting_objects x z)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>obj_id.\n                         not_conflicting_objects ?x1 ?z1 obj_id \\<and>\n                         not_conflicting_objects ?y1 ?z1 obj_id \\<and>\n                         not_conflicting_objects ?x1 ?z1 obj_id", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>All (not_conflicting_objects x y);\n     All (not_conflicting_objects y z);\n     All (not_conflicting_objects x z)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>obj_id.\n                         not_conflicting_objects x z obj_id \\<and>\n                         not_conflicting_objects y z obj_id \\<and>\n                         not_conflicting_objects x z obj_id", "apply fastforce"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma cdl_ghost_state_add_assoc:\n  \"cdl_ghost_state_add (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n   cdl_ghost_state_add x (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cdl_ghost_state_add\n     (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z =\n    cdl_ghost_state_add x\n     (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z))", "apply (rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       cdl_ghost_state_add\n        (SepState (cdl_heap_add x y) (cdl_ghost_state_add x y)) z xa =\n       cdl_ghost_state_add x\n        (SepState (cdl_heap_add y z) (cdl_ghost_state_add y z)) xa", "apply (fastforce simp: cdl_heap_add_def cdl_ghost_state_add_def Let_unfold)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma clean_slots_map_add_comm:\n  \"cmps_a \\<inter> cmps_b = {}\n  \\<Longrightarrow> clean_slots slots_a cmps_a ++ clean_slots slots_b cmps_b =\n      clean_slots slots_b cmps_b ++ clean_slots slots_a cmps_a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cmps_a \\<inter> cmps_b = {} \\<Longrightarrow>\n    clean_slots slots_a cmps_a ++ clean_slots slots_b cmps_b =\n    clean_slots slots_b cmps_b ++ clean_slots slots_a cmps_a", "apply (clarsimp simp: clean_slots_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. cmps_a \\<inter> cmps_b = {} \\<Longrightarrow>\n    slots_a |` the_set cmps_a ++ slots_b |` the_set cmps_b =\n    slots_b |` the_set cmps_b ++ slots_a |` the_set cmps_a", "apply (drule the_set_inter_empty)"], ["proof (prove)\ngoal (1 subgoal):\n 1. the_set cmps_a \\<inter> the_set cmps_b = {} \\<Longrightarrow>\n    slots_a |` the_set cmps_a ++ slots_b |` the_set cmps_b =\n    slots_b |` the_set cmps_b ++ slots_a |` the_set cmps_a", "apply (erule map_add_restrict_comm)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma object_clean_all:\n  \"object_type obj_a = object_type obj_b \\<Longrightarrow> object_clean obj_b {} = object_clean obj_a {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type obj_a = object_type obj_b \\<Longrightarrow>\n    object_clean obj_b {} = object_clean obj_a {}", "apply (clarsimp simp: object_clean_def object_clean_slots_def clean_slots_def the_set_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type obj_a = object_type obj_b \\<Longrightarrow>\n    update_slots Map.empty (object_clean_fields obj_b {}) =\n    update_slots Map.empty (object_clean_fields obj_a {})", "apply (rule_tac cmps'1=\"{}\" and obj'1=\"obj_a\" in trans [OF update_slots_object_clean_fields], fastforce+)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma object_add_comm:\n  \"\\<lbrakk>object_type obj_a = object_type obj_b; cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n  \\<Longrightarrow> object_add obj_a obj_b cmps_a cmps_b = object_add obj_b obj_a cmps_b cmps_a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> object_add obj_a obj_b cmps_a cmps_b =\n                      object_add obj_b obj_a cmps_b cmps_a", "apply (clarsimp simp: object_add_def Let_unfold)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> (None \\<in> cmps_b \\<longrightarrow>\n                       (None \\<in> cmps_a \\<longrightarrow>\n                        (cmps_a = {} \\<longrightarrow>\n                         cmps_b = {} \\<longrightarrow>\n                         object_clean obj_b {} =\n                         object_clean obj_a {}) \\<and>\n                        (cmps_a \\<noteq> {} \\<longrightarrow>\n                         cmps_b \\<noteq> {} \\<longrightarrow>\n                         update_slots\n                          (clean_slots (object_slots obj_a) cmps_a ++\n                           clean_slots (object_slots obj_b) cmps_b)\n                          (object_clean obj_b cmps_b) =\n                         update_slots\n                          (clean_slots (object_slots obj_b) cmps_b ++\n                           clean_slots (object_slots obj_a) cmps_a)\n                          (object_clean obj_a cmps_a))) \\<and>\n                       (None \\<notin> cmps_a \\<longrightarrow>\n                        (cmps_a = {} \\<longrightarrow>\n                         cmps_b = {} \\<longrightarrow>\n                         object_clean obj_b {} =\n                         object_clean obj_a {}) \\<and>\n                        (cmps_a \\<noteq> {} \\<longrightarrow>\n                         cmps_b \\<noteq> {} \\<longrightarrow>\n                         update_slots\n                          (clean_slots (object_slots obj_a) cmps_a ++\n                           clean_slots (object_slots obj_b) cmps_b)\n                          (object_clean obj_b cmps_b) =\n                         update_slots\n                          (clean_slots (object_slots obj_b) cmps_b ++\n                           clean_slots (object_slots obj_a) cmps_a)\n                          (object_clean obj_b cmps_b)))) \\<and>\n                      (None \\<notin> cmps_b \\<longrightarrow>\n                       (None \\<in> cmps_a \\<longrightarrow>\n                        (cmps_a = {} \\<longrightarrow>\n                         cmps_b = {} \\<longrightarrow>\n                         object_clean obj_b {} =\n                         object_clean obj_a {}) \\<and>\n                        (cmps_a \\<noteq> {} \\<longrightarrow>\n                         cmps_b \\<noteq> {} \\<longrightarrow>\n                         update_slots\n                          (clean_slots (object_slots obj_a) cmps_a ++\n                           clean_slots (object_slots obj_b) cmps_b)\n                          (object_clean obj_a cmps_a) =\n                         update_slots\n                          (clean_slots (object_slots obj_b) cmps_b ++\n                           clean_slots (object_slots obj_a) cmps_a)\n                          (object_clean obj_a cmps_a))) \\<and>\n                       (None \\<notin> cmps_a \\<longrightarrow>\n                        (cmps_a = {} \\<longrightarrow>\n                         cmps_b = {} \\<longrightarrow>\n                         object_clean obj_b {} =\n                         object_clean obj_a {}) \\<and>\n                        (cmps_a \\<noteq> {} \\<longrightarrow>\n                         cmps_b \\<noteq> {} \\<longrightarrow>\n                         update_slots\n                          (clean_slots (object_slots obj_a) cmps_a ++\n                           clean_slots (object_slots obj_b) cmps_b)\n                          (object_clean obj_a cmps_a) =\n                         update_slots\n                          (clean_slots (object_slots obj_b) cmps_b ++\n                           clean_slots (object_slots obj_a) cmps_a)\n                          (object_clean obj_b cmps_b))))", "apply (rule conjI | clarsimp)+"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<in> cmps_b; None \\<in> cmps_a;\n     cmps_a \\<noteq> {}; cmps_b \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_b cmps_b) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_a cmps_a)\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<in> cmps_b\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_a \\<longrightarrow>\n                      (cmps_a = {} \\<longrightarrow>\n                       cmps_b = {} \\<longrightarrow>\n                       object_clean obj_b {} = object_clean obj_a {}) \\<and>\n                      (cmps_a \\<noteq> {} \\<longrightarrow>\n                       cmps_b \\<noteq> {} \\<longrightarrow>\n                       update_slots\n                        (clean_slots (object_slots obj_a) cmps_a ++\n                         clean_slots (object_slots obj_b) cmps_b)\n                        (object_clean obj_b cmps_b) =\n                       update_slots\n                        (clean_slots (object_slots obj_b) cmps_b ++\n                         clean_slots (object_slots obj_a) cmps_a)\n                        (object_clean obj_b cmps_b))\n 3. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_b \\<longrightarrow>\n                      (None \\<in> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_a cmps_a))) \\<and>\n                      (None \\<notin> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_b cmps_b)))", "apply fastforce"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<in> cmps_b\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_a \\<longrightarrow>\n                      (cmps_a = {} \\<longrightarrow>\n                       cmps_b = {} \\<longrightarrow>\n                       object_clean obj_b {} = object_clean obj_a {}) \\<and>\n                      (cmps_a \\<noteq> {} \\<longrightarrow>\n                       cmps_b \\<noteq> {} \\<longrightarrow>\n                       update_slots\n                        (clean_slots (object_slots obj_a) cmps_a ++\n                         clean_slots (object_slots obj_b) cmps_b)\n                        (object_clean obj_b cmps_b) =\n                       update_slots\n                        (clean_slots (object_slots obj_b) cmps_b ++\n                         clean_slots (object_slots obj_a) cmps_a)\n                        (object_clean obj_b cmps_b))\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_b \\<longrightarrow>\n                      (None \\<in> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_a cmps_a))) \\<and>\n                      (None \\<notin> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_b cmps_b)))", "apply (rule conjI | clarsimp)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<in> cmps_b; None \\<notin> cmps_a;\n     cmps_a \\<noteq> {}; cmps_b \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_b cmps_b) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_b \\<longrightarrow>\n                      (None \\<in> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_a cmps_a))) \\<and>\n                      (None \\<notin> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_b cmps_b)))", "apply (drule_tac slots_a = \"object_slots obj_a\" and slots_b = \"object_slots obj_b\" in clean_slots_map_add_comm)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b; None \\<in> cmps_b;\n     None \\<notin> cmps_a; cmps_a \\<noteq> {}; cmps_b \\<noteq> {};\n     clean_slots (object_slots obj_a) cmps_a ++\n     clean_slots (object_slots obj_b) cmps_b =\n     clean_slots (object_slots obj_b) cmps_b ++\n     clean_slots (object_slots obj_a) cmps_a\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_b cmps_b) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_b \\<longrightarrow>\n                      (None \\<in> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_a cmps_a))) \\<and>\n                      (None \\<notin> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_b cmps_b)))", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_b \\<longrightarrow>\n                      (None \\<in> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_a cmps_a))) \\<and>\n                      (None \\<notin> cmps_a \\<longrightarrow>\n                       (cmps_a = {} \\<longrightarrow>\n                        cmps_b = {} \\<longrightarrow>\n                        object_clean obj_b {} =\n                        object_clean obj_a {}) \\<and>\n                       (cmps_a \\<noteq> {} \\<longrightarrow>\n                        cmps_b \\<noteq> {} \\<longrightarrow>\n                        update_slots\n                         (clean_slots (object_slots obj_a) cmps_a ++\n                          clean_slots (object_slots obj_b) cmps_b)\n                         (object_clean obj_a cmps_a) =\n                        update_slots\n                         (clean_slots (object_slots obj_b) cmps_b ++\n                          clean_slots (object_slots obj_a) cmps_a)\n                         (object_clean obj_b cmps_b)))", "apply (rule conjI | clarsimp)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b; None \\<in> cmps_a;\n     cmps_a \\<noteq> {}; cmps_b \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_a cmps_a) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_a cmps_a)\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_a \\<longrightarrow>\n                      (cmps_a = {} \\<longrightarrow>\n                       cmps_b = {} \\<longrightarrow>\n                       object_clean obj_b {} = object_clean obj_a {}) \\<and>\n                      (cmps_a \\<noteq> {} \\<longrightarrow>\n                       cmps_b \\<noteq> {} \\<longrightarrow>\n                       update_slots\n                        (clean_slots (object_slots obj_a) cmps_a ++\n                         clean_slots (object_slots obj_b) cmps_b)\n                        (object_clean obj_a cmps_a) =\n                       update_slots\n                        (clean_slots (object_slots obj_b) cmps_b ++\n                         clean_slots (object_slots obj_a) cmps_a)\n                        (object_clean obj_b cmps_b))", "apply (drule_tac slots_a = \"object_slots obj_a\" and slots_b = \"object_slots obj_b\" in clean_slots_map_add_comm)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b; None \\<notin> cmps_b;\n     None \\<in> cmps_a; cmps_a \\<noteq> {}; cmps_b \\<noteq> {};\n     clean_slots (object_slots obj_a) cmps_a ++\n     clean_slots (object_slots obj_b) cmps_b =\n     clean_slots (object_slots obj_b) cmps_b ++\n     clean_slots (object_slots obj_a) cmps_a\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_a cmps_a) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_a cmps_a)\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_a \\<longrightarrow>\n                      (cmps_a = {} \\<longrightarrow>\n                       cmps_b = {} \\<longrightarrow>\n                       object_clean obj_b {} = object_clean obj_a {}) \\<and>\n                      (cmps_a \\<noteq> {} \\<longrightarrow>\n                       cmps_b \\<noteq> {} \\<longrightarrow>\n                       update_slots\n                        (clean_slots (object_slots obj_a) cmps_a ++\n                         clean_slots (object_slots obj_b) cmps_b)\n                        (object_clean obj_a cmps_a) =\n                       update_slots\n                        (clean_slots (object_slots obj_b) cmps_b ++\n                         clean_slots (object_slots obj_a) cmps_a)\n                        (object_clean obj_b cmps_b))", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b\\<rbrakk>\n    \\<Longrightarrow> None \\<notin> cmps_a \\<longrightarrow>\n                      (cmps_a = {} \\<longrightarrow>\n                       cmps_b = {} \\<longrightarrow>\n                       object_clean obj_b {} = object_clean obj_a {}) \\<and>\n                      (cmps_a \\<noteq> {} \\<longrightarrow>\n                       cmps_b \\<noteq> {} \\<longrightarrow>\n                       update_slots\n                        (clean_slots (object_slots obj_a) cmps_a ++\n                         clean_slots (object_slots obj_b) cmps_b)\n                        (object_clean obj_a cmps_a) =\n                       update_slots\n                        (clean_slots (object_slots obj_b) cmps_b ++\n                         clean_slots (object_slots obj_a) cmps_a)\n                        (object_clean obj_b cmps_b))", "apply (rule conjI | clarsimp)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b; cmps_a = {};\n     cmps_b = {}\\<rbrakk>\n    \\<Longrightarrow> object_clean obj_b {} = object_clean obj_a {}\n 2. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b;\n     None \\<notin> cmps_a\\<rbrakk>\n    \\<Longrightarrow> cmps_a \\<noteq> {} \\<longrightarrow>\n                      cmps_b \\<noteq> {} \\<longrightarrow>\n                      update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_a cmps_a) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)", "apply (erule object_clean_all)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b;\n     None \\<notin> cmps_a\\<rbrakk>\n    \\<Longrightarrow> cmps_a \\<noteq> {} \\<longrightarrow>\n                      cmps_b \\<noteq> {} \\<longrightarrow>\n                      update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_a cmps_a) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)", "apply (clarsimp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b;\n     None \\<notin> cmps_a; cmps_a \\<noteq> {}; cmps_b \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_a cmps_a) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)", "apply (rule_tac cmps'1=cmps_b and obj'1=obj_b in trans [OF update_slots_object_clean], assumption+)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b;\n     cmps_a \\<inter> cmps_b = {}; None \\<notin> cmps_b;\n     None \\<notin> cmps_a; cmps_a \\<noteq> {}; cmps_b \\<noteq> {}\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_b cmps_b) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)", "apply (drule_tac slots_a = \"object_slots obj_a\" and slots_b = \"object_slots obj_b\" in clean_slots_map_add_comm)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_type obj_a = object_type obj_b; None \\<notin> cmps_b;\n     None \\<notin> cmps_a; cmps_a \\<noteq> {}; cmps_b \\<noteq> {};\n     clean_slots (object_slots obj_a) cmps_a ++\n     clean_slots (object_slots obj_b) cmps_b =\n     clean_slots (object_slots obj_b) cmps_b ++\n     clean_slots (object_slots obj_a) cmps_a\\<rbrakk>\n    \\<Longrightarrow> update_slots\n                       (clean_slots (object_slots obj_a) cmps_a ++\n                        clean_slots (object_slots obj_b) cmps_b)\n                       (object_clean obj_b cmps_b) =\n                      update_slots\n                       (clean_slots (object_slots obj_b) cmps_b ++\n                        clean_slots (object_slots obj_a) cmps_a)\n                       (object_clean obj_b cmps_b)", "apply fastforce"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma sep_state_add_comm:\n  \"sep_state_disj x y \\<Longrightarrow> sep_state_add x y = sep_state_add y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sep_state_disj x y \\<Longrightarrow>\n    sep_state_add x y = sep_state_add y x", "apply (clarsimp simp: sep_state_add_def sep_state_disj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_heap_add x y = cdl_heap_add y x \\<and>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (rule conjI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_heap_add x y = cdl_heap_add y x\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (case_tac x, case_tac y, clarsimp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x1a x2a.\n       \\<lbrakk>All (not_conflicting_objects (SepState x1 x2)\n                      (SepState x1a x2a));\n        x = SepState x1 x2; y = SepState x1a x2a\\<rbrakk>\n       \\<Longrightarrow> cdl_heap_add (SepState x1 x2) (SepState x1a x2a) =\n                         cdl_heap_add (SepState x1a x2a) (SepState x1 x2)\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (rename_tac heap_a gs_a heap_b gs_b)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b\\<rbrakk>\n       \\<Longrightarrow> cdl_heap_add (SepState heap_a gs_a)\n                          (SepState heap_b gs_b) =\n                         cdl_heap_add (SepState heap_b gs_b)\n                          (SepState heap_a gs_a)\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (clarsimp simp: cdl_heap_add_def Let_unfold)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>obj_id.\n                             case heap_b obj_id of\n                             None \\<Rightarrow> heap_a obj_id\n                             | Some obj_b \\<Rightarrow>\n                                 case heap_a obj_id of\n                                 None \\<Rightarrow> heap_b obj_id\n                                 | Some obj_a \\<Rightarrow>\n                                     Some\n(object_add obj_a obj_b (gs_a obj_id) (gs_b obj_id))) =\n                         (\\<lambda>obj_id.\n                             case heap_a obj_id of\n                             None \\<Rightarrow> heap_b obj_id\n                             | Some obj_b \\<Rightarrow>\n                                 case heap_b obj_id of\n                                 None \\<Rightarrow> heap_a obj_id\n                                 | Some obj_a \\<Rightarrow>\n                                     Some\n(object_add obj_a obj_b (gs_b obj_id) (gs_a obj_id)))\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (rule ext)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b\\<rbrakk>\n       \\<Longrightarrow> (case heap_b obj_id of\n                          None \\<Rightarrow> heap_a obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_a obj_id of\n                              None \\<Rightarrow> heap_b obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_a obj_id)\n                                     (gs_b obj_id))) =\n                         (case heap_a obj_id of\n                          None \\<Rightarrow> heap_b obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_b obj_id of\n                              None \\<Rightarrow> heap_a obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_b obj_id)\n                                     (gs_a obj_id)))\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (case_tac \"heap_a obj_id\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = None\\<rbrakk>\n       \\<Longrightarrow> (case heap_b obj_id of\n                          None \\<Rightarrow> heap_a obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_a obj_id of\n                              None \\<Rightarrow> heap_b obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_a obj_id)\n                                     (gs_b obj_id))) =\n                         (case heap_a obj_id of\n                          None \\<Rightarrow> heap_b obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_b obj_id of\n                              None \\<Rightarrow> heap_a obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_b obj_id)\n                                     (gs_a obj_id)))\n 2. \\<And>heap_a gs_a heap_b gs_b obj_id a.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some a\\<rbrakk>\n       \\<Longrightarrow> (case heap_b obj_id of\n                          None \\<Rightarrow> heap_a obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_a obj_id of\n                              None \\<Rightarrow> heap_b obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_a obj_id)\n                                     (gs_b obj_id))) =\n                         (case heap_a obj_id of\n                          None \\<Rightarrow> heap_b obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_b obj_id of\n                              None \\<Rightarrow> heap_a obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_b obj_id)\n                                     (gs_a obj_id)))\n 3. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (case_tac \"heap_b obj_id\", simp_all add: slots_of_heap_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id a.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some a\\<rbrakk>\n       \\<Longrightarrow> (case heap_b obj_id of\n                          None \\<Rightarrow> heap_a obj_id\n                          | Some obj_b \\<Rightarrow>\n                              case heap_a obj_id of\n                              None \\<Rightarrow> heap_b obj_id\n                              | Some obj_a \\<Rightarrow>\n                                  Some\n                                   (object_add obj_a obj_b (gs_a obj_id)\n                                     (gs_b obj_id))) =\n                         (case heap_b obj_id of\n                          None \\<Rightarrow> heap_a obj_id\n                          | Some obj_a \\<Rightarrow>\n                              Some\n                               (object_add obj_a a (gs_b obj_id)\n                                 (gs_a obj_id)))\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (case_tac \"heap_b obj_id\", simp_all add: slots_of_heap_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id a aa.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some a; heap_b obj_id = Some aa\\<rbrakk>\n       \\<Longrightarrow> object_add a aa (gs_a obj_id) (gs_b obj_id) =\n                         object_add aa a (gs_b obj_id) (gs_a obj_id)\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (rename_tac obj_a obj_b)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id obj_a obj_b.\n       \\<lbrakk>All (not_conflicting_objects (SepState heap_a gs_a)\n                      (SepState heap_b gs_b));\n        x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some obj_a; heap_b obj_id = Some obj_b\\<rbrakk>\n       \\<Longrightarrow> object_add obj_a obj_b (gs_a obj_id)\n                          (gs_b obj_id) =\n                         object_add obj_b obj_a (gs_b obj_id) (gs_a obj_id)\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (erule_tac x=obj_id in allE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id obj_a obj_b.\n       \\<lbrakk>x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some obj_a; heap_b obj_id = Some obj_b;\n        not_conflicting_objects (SepState heap_a gs_a)\n         (SepState heap_b gs_b) obj_id\\<rbrakk>\n       \\<Longrightarrow> object_add obj_a obj_b (gs_a obj_id)\n                          (gs_b obj_id) =\n                         object_add obj_b obj_a (gs_b obj_id) (gs_a obj_id)\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (rule object_add_comm)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id obj_a obj_b.\n       \\<lbrakk>x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some obj_a; heap_b obj_id = Some obj_b;\n        not_conflicting_objects (SepState heap_a gs_a)\n         (SepState heap_b gs_b) obj_id\\<rbrakk>\n       \\<Longrightarrow> object_type obj_a = object_type obj_b\n 2. \\<And>heap_a gs_a heap_b gs_b obj_id obj_a obj_b.\n       \\<lbrakk>x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some obj_a; heap_b obj_id = Some obj_b;\n        not_conflicting_objects (SepState heap_a gs_a)\n         (SepState heap_b gs_b) obj_id\\<rbrakk>\n       \\<Longrightarrow> gs_a obj_id \\<inter> gs_b obj_id = {}\n 3. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (clarsimp simp: not_conflicting_objects_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>heap_a gs_a heap_b gs_b obj_id obj_a obj_b.\n       \\<lbrakk>x = SepState heap_a gs_a; y = SepState heap_b gs_b;\n        heap_a obj_id = Some obj_a; heap_b obj_id = Some obj_b;\n        not_conflicting_objects (SepState heap_a gs_a)\n         (SepState heap_b gs_b) obj_id\\<rbrakk>\n       \\<Longrightarrow> gs_a obj_id \\<inter> gs_b obj_id = {}\n 2. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (clarsimp simp: not_conflicting_objects_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All (not_conflicting_objects x y) \\<Longrightarrow>\n    cdl_ghost_state_add x y = cdl_ghost_state_add y x", "apply (rule ext, fastforce simp: cdl_ghost_state_add_def Let_unfold Un_commute)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma add_to_slots_comm:\n  \"\\<lbrakk>object_slots y_obj \\<bottom> object_slots z_obj; update_slots Map.empty y_obj = update_slots Map.empty z_obj \\<rbrakk>\n  \\<Longrightarrow> add_to_slots (object_slots z_obj) y_obj = add_to_slots (object_slots y_obj) z_obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>object_slots y_obj \\<bottom> object_slots z_obj;\n     update_slots Map.empty y_obj = update_slots Map.empty z_obj\\<rbrakk>\n    \\<Longrightarrow> Abstract_Separation_D.add_to_slots\n                       (object_slots z_obj) y_obj =\n                      Abstract_Separation_D.add_to_slots\n                       (object_slots y_obj) z_obj", "by (fastforce simp: add_to_slots_def update_slots_def object_slots_def\n                     cdl_tcb.splits cdl_cnode.splits\n              dest!: map_add_com\n              split: cdl_object.splits)"], ["", "lemma cdl_heap_add_none1:\n  \"cdl_heap_add x y obj_id = None \\<Longrightarrow> (sep_heap x) obj_id = None\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cdl_heap_add x y obj_id = None \\<Longrightarrow>\n    sep_heap x obj_id = None", "by (clarsimp simp: cdl_heap_add_def Let_unfold split:option.splits if_split_asm)"], ["", "lemma cdl_heap_add_none2:\n  \"cdl_heap_add x y obj_id = None \\<Longrightarrow> (sep_heap y) obj_id = None\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cdl_heap_add x y obj_id = None \\<Longrightarrow>\n    sep_heap y obj_id = None", "by (clarsimp simp: cdl_heap_add_def Let_unfold split:option.splits if_split_asm)"], ["", "lemma object_type_object_addL:\n  \"object_type obj = object_type obj'\n  \\<Longrightarrow> object_type (object_add obj obj' cmp cmp') = object_type obj\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type obj = object_type obj' \\<Longrightarrow>\n    object_type (object_add obj obj' cmp cmp') = object_type obj", "by (clarsimp simp: object_add_def Let_unfold)"], ["", "lemma object_type_object_addR:\n  \"object_type obj = object_type obj'\n  \\<Longrightarrow> object_type (object_add obj obj' cmp cmp') = object_type obj'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object_type obj = object_type obj' \\<Longrightarrow>\n    object_type (object_add obj obj' cmp cmp') = object_type obj'", "by (clarsimp simp: object_add_def Let_unfold)"], ["", "lemma sep_state_add_disjL:\n  \"\\<lbrakk>sep_state_disj y z; sep_state_disj x (sep_state_add y z)\\<rbrakk> \\<Longrightarrow> sep_state_disj x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>sep_state_disj y z;\n     sep_state_disj x (sep_state_add y z)\\<rbrakk>\n    \\<Longrightarrow> sep_state_disj x y", "apply (clarsimp simp: sep_state_disj_def sep_state_add_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>All (not_conflicting_objects y z);\n        All (not_conflicting_objects x\n              (SepState (cdl_heap_add y z)\n                (cdl_ghost_state_add y z)))\\<rbrakk>\n       \\<Longrightarrow> not_conflicting_objects x y xa", "apply (rename_tac obj_id)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>All (not_conflicting_objects y z);\n        All (not_conflicting_objects x\n              (SepState (cdl_heap_add y z)\n                (cdl_ghost_state_add y z)))\\<rbrakk>\n       \\<Longrightarrow> not_conflicting_objects x y obj_id", "apply (clarsimp simp: not_conflicting_objects_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>\\<forall>obj_id.\n                   case sep_heap y obj_id of None \\<Rightarrow> True\n                   | Some o1 \\<Rightarrow>\n                       case sep_heap z obj_id of None \\<Rightarrow> True\n                       | Some o2 \\<Rightarrow>\n                           object_type o1 = object_type o2 \\<and>\n                           sep_ghost_state y obj_id \\<inter>\n                           sep_ghost_state z obj_id =\n                           {};\n        \\<forall>obj_id.\n           case sep_heap x obj_id of None \\<Rightarrow> True\n           | Some o1 \\<Rightarrow>\n               case cdl_heap_add y z obj_id of None \\<Rightarrow> True\n               | Some o2 \\<Rightarrow>\n                   object_type o1 = object_type o2 \\<and>\n                   sep_ghost_state x obj_id \\<inter>\n                   cdl_ghost_state_add y z obj_id =\n                   {}\\<rbrakk>\n       \\<Longrightarrow> case sep_heap x obj_id of None \\<Rightarrow> True\n                         | Some o1 \\<Rightarrow>\n                             case sep_heap y obj_id of\n                             None \\<Rightarrow> True\n                             | Some o2 \\<Rightarrow>\n                                 object_type o1 = object_type o2 \\<and>\n                                 sep_ghost_state x obj_id \\<inter>\n                                 sep_ghost_state y obj_id =\n                                 {}", "apply (erule_tac x=obj_id in allE)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>case sep_heap y obj_id of None \\<Rightarrow> True\n                | Some o1 \\<Rightarrow>\n                    case sep_heap z obj_id of None \\<Rightarrow> True\n                    | Some o2 \\<Rightarrow>\n                        object_type o1 = object_type o2 \\<and>\n                        sep_ghost_state y obj_id \\<inter>\n                        sep_ghost_state z obj_id =\n                        {};\n        case sep_heap x obj_id of None \\<Rightarrow> True\n        | Some o1 \\<Rightarrow>\n            case cdl_heap_add y z obj_id of None \\<Rightarrow> True\n            | Some o2 \\<Rightarrow>\n                object_type o1 = object_type o2 \\<and>\n                sep_ghost_state x obj_id \\<inter>\n                cdl_ghost_state_add y z obj_id =\n                {}\\<rbrakk>\n       \\<Longrightarrow> case sep_heap x obj_id of None \\<Rightarrow> True\n                         | Some o1 \\<Rightarrow>\n                             case sep_heap y obj_id of\n                             None \\<Rightarrow> True\n                             | Some o2 \\<Rightarrow>\n                                 object_type o1 = object_type o2 \\<and>\n                                 sep_ghost_state x obj_id \\<inter>\n                                 sep_ghost_state y obj_id =\n                                 {}", "apply (fastforce simp: cdl_heap_add_def cdl_ghost_state_add_def object_type_object_addR\n                 split: option.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma sep_state_add_disjR:\n  \"\\<lbrakk>sep_state_disj y z; sep_state_disj x (sep_state_add y z)\\<rbrakk> \\<Longrightarrow> sep_state_disj x z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>sep_state_disj y z;\n     sep_state_disj x (sep_state_add y z)\\<rbrakk>\n    \\<Longrightarrow> sep_state_disj x z", "apply (clarsimp simp: sep_state_disj_def sep_state_add_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>All (not_conflicting_objects y z);\n        All (not_conflicting_objects x\n              (SepState (cdl_heap_add y z)\n                (cdl_ghost_state_add y z)))\\<rbrakk>\n       \\<Longrightarrow> not_conflicting_objects x z xa", "apply (rename_tac obj_id)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>All (not_conflicting_objects y z);\n        All (not_conflicting_objects x\n              (SepState (cdl_heap_add y z)\n                (cdl_ghost_state_add y z)))\\<rbrakk>\n       \\<Longrightarrow> not_conflicting_objects x z obj_id", "apply (clarsimp simp: not_conflicting_objects_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>\\<forall>obj_id.\n                   case sep_heap y obj_id of None \\<Rightarrow> True\n                   | Some o1 \\<Rightarrow>\n                       case sep_heap z obj_id of None \\<Rightarrow> True\n                       | Some o2 \\<Rightarrow>\n                           object_type o1 = object_type o2 \\<and>\n                           sep_ghost_state y obj_id \\<inter>\n                           sep_ghost_state z obj_id =\n                           {};\n        \\<forall>obj_id.\n           case sep_heap x obj_id of None \\<Rightarrow> True\n           | Some o1 \\<Rightarrow>\n               case cdl_heap_add y z obj_id of None \\<Rightarrow> True\n               | Some o2 \\<Rightarrow>\n                   object_type o1 = object_type o2 \\<and>\n                   sep_ghost_state x obj_id \\<inter>\n                   cdl_ghost_state_add y z obj_id =\n                   {}\\<rbrakk>\n       \\<Longrightarrow> case sep_heap x obj_id of None \\<Rightarrow> True\n                         | Some o1 \\<Rightarrow>\n                             case sep_heap z obj_id of\n                             None \\<Rightarrow> True\n                             | Some o2 \\<Rightarrow>\n                                 object_type o1 = object_type o2 \\<and>\n                                 sep_ghost_state x obj_id \\<inter>\n                                 sep_ghost_state z obj_id =\n                                 {}", "apply (erule_tac x=obj_id in allE)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>case sep_heap y obj_id of None \\<Rightarrow> True\n                | Some o1 \\<Rightarrow>\n                    case sep_heap z obj_id of None \\<Rightarrow> True\n                    | Some o2 \\<Rightarrow>\n                        object_type o1 = object_type o2 \\<and>\n                        sep_ghost_state y obj_id \\<inter>\n                        sep_ghost_state z obj_id =\n                        {};\n        case sep_heap x obj_id of None \\<Rightarrow> True\n        | Some o1 \\<Rightarrow>\n            case cdl_heap_add y z obj_id of None \\<Rightarrow> True\n            | Some o2 \\<Rightarrow>\n                object_type o1 = object_type o2 \\<and>\n                sep_ghost_state x obj_id \\<inter>\n                cdl_ghost_state_add y z obj_id =\n                {}\\<rbrakk>\n       \\<Longrightarrow> case sep_heap x obj_id of None \\<Rightarrow> True\n                         | Some o1 \\<Rightarrow>\n                             case sep_heap z obj_id of\n                             None \\<Rightarrow> True\n                             | Some o2 \\<Rightarrow>\n                                 object_type o1 = object_type o2 \\<and>\n                                 sep_ghost_state x obj_id \\<inter>\n                                 sep_ghost_state z obj_id =\n                                 {}", "apply (fastforce simp: cdl_heap_add_def cdl_ghost_state_add_def object_type_object_addR\n                 split: option.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma sep_state_add_disj:\n  \"\\<lbrakk>sep_state_disj y z; sep_state_disj x y; sep_state_disj x z\\<rbrakk> \\<Longrightarrow> sep_state_disj x (sep_state_add y z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>sep_state_disj y z; sep_state_disj x y;\n     sep_state_disj x z\\<rbrakk>\n    \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "apply (clarsimp simp: sep_state_disj_def sep_state_add_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>All (not_conflicting_objects y z);\n        All (not_conflicting_objects x y);\n        All (not_conflicting_objects x z)\\<rbrakk>\n       \\<Longrightarrow> not_conflicting_objects x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n                          xa", "apply (rename_tac obj_id)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>All (not_conflicting_objects y z);\n        All (not_conflicting_objects x y);\n        All (not_conflicting_objects x z)\\<rbrakk>\n       \\<Longrightarrow> not_conflicting_objects x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n                          obj_id", "apply (clarsimp simp: not_conflicting_objects_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>\\<forall>obj_id.\n                   case sep_heap y obj_id of None \\<Rightarrow> True\n                   | Some o1 \\<Rightarrow>\n                       case sep_heap z obj_id of None \\<Rightarrow> True\n                       | Some o2 \\<Rightarrow>\n                           object_type o1 = object_type o2 \\<and>\n                           sep_ghost_state y obj_id \\<inter>\n                           sep_ghost_state z obj_id =\n                           {};\n        \\<forall>obj_id.\n           case sep_heap x obj_id of None \\<Rightarrow> True\n           | Some o1 \\<Rightarrow>\n               case sep_heap y obj_id of None \\<Rightarrow> True\n               | Some o2 \\<Rightarrow>\n                   object_type o1 = object_type o2 \\<and>\n                   sep_ghost_state x obj_id \\<inter>\n                   sep_ghost_state y obj_id =\n                   {};\n        \\<forall>obj_id.\n           case sep_heap x obj_id of None \\<Rightarrow> True\n           | Some o1 \\<Rightarrow>\n               case sep_heap z obj_id of None \\<Rightarrow> True\n               | Some o2 \\<Rightarrow>\n                   object_type o1 = object_type o2 \\<and>\n                   sep_ghost_state x obj_id \\<inter>\n                   sep_ghost_state z obj_id =\n                   {}\\<rbrakk>\n       \\<Longrightarrow> case sep_heap x obj_id of None \\<Rightarrow> True\n                         | Some o1 \\<Rightarrow>\n                             case cdl_heap_add y z obj_id of\n                             None \\<Rightarrow> True\n                             | Some o2 \\<Rightarrow>\n                                 object_type o1 = object_type o2 \\<and>\n                                 sep_ghost_state x obj_id \\<inter>\n                                 cdl_ghost_state_add y z obj_id =\n                                 {}", "apply (erule_tac x=obj_id in allE)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>obj_id.\n       \\<lbrakk>case sep_heap y obj_id of None \\<Rightarrow> True\n                | Some o1 \\<Rightarrow>\n                    case sep_heap z obj_id of None \\<Rightarrow> True\n                    | Some o2 \\<Rightarrow>\n                        object_type o1 = object_type o2 \\<and>\n                        sep_ghost_state y obj_id \\<inter>\n                        sep_ghost_state z obj_id =\n                        {};\n        case sep_heap x obj_id of None \\<Rightarrow> True\n        | Some o1 \\<Rightarrow>\n            case sep_heap y obj_id of None \\<Rightarrow> True\n            | Some o2 \\<Rightarrow>\n                object_type o1 = object_type o2 \\<and>\n                sep_ghost_state x obj_id \\<inter> sep_ghost_state y obj_id =\n                {};\n        case sep_heap x obj_id of None \\<Rightarrow> True\n        | Some o1 \\<Rightarrow>\n            case sep_heap z obj_id of None \\<Rightarrow> True\n            | Some o2 \\<Rightarrow>\n                object_type o1 = object_type o2 \\<and>\n                sep_ghost_state x obj_id \\<inter> sep_ghost_state z obj_id =\n                {}\\<rbrakk>\n       \\<Longrightarrow> case sep_heap x obj_id of None \\<Rightarrow> True\n                         | Some o1 \\<Rightarrow>\n                             case cdl_heap_add y z obj_id of\n                             None \\<Rightarrow> True\n                             | Some o2 \\<Rightarrow>\n                                 object_type o1 = object_type o2 \\<and>\n                                 sep_ghost_state x obj_id \\<inter>\n                                 cdl_ghost_state_add y z obj_id =\n                                 {}", "apply (fastforce simp: cdl_heap_add_def cdl_ghost_state_add_def object_type_object_addR\n                 split: option.splits)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*********************************************)\n(* Definition of separation logic for capDL. *)\n(*********************************************)"], ["", "instantiation \"sep_state\" :: zero\nbegin"], ["", "definition \"0 \\<equiv> SepState Map.empty (\\<lambda>obj_id. {})\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(sep_state, zero_class)", ".."], ["", "end"], ["", "instantiation \"sep_state\" :: stronger_sep_algebra\nbegin"], ["", "definition \"(##) \\<equiv> sep_state_disj\""], ["", "definition \"(+) \\<equiv> sep_state_add\""], ["", "(**********************************************\n * The proof that this is a separation logic. *\n **********************************************)"], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(sep_state, stronger_sep_algebra_class)", "apply standard"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x. x ## 0\n 2. \\<And>x y. x ## y \\<Longrightarrow> y ## x\n 3. \\<And>x. x + 0 = x\n 4. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 5. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 6. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "(* x ## 0 *)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x. x ## 0\n 2. \\<And>x y. x ## y \\<Longrightarrow> y ## x\n 3. \\<And>x. x + 0 = x\n 4. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 5. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 6. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (simp add: sep_disj_sep_state_def sep_state_disj_def zero_sep_state_def)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x y. x ## y \\<Longrightarrow> y ## x\n 2. \\<And>x. x + 0 = x\n 3. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 4. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 5. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "(* x ## y \\<Longrightarrow> y ## x *)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x y. x ## y \\<Longrightarrow> y ## x\n 2. \\<And>x. x + 0 = x\n 3. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 4. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 5. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (clarsimp simp: not_conflicting_objects_comm sep_disj_sep_state_def sep_state_disj_def Let_unfold\n                            map_disj_com not_conflicting_objects_comm Int_commute)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x. x + 0 = x\n 2. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 3. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 4. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "(* x + 0 = x *)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x. x + 0 = x\n 2. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 3. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 4. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (simp add: plus_sep_state_def sep_state_add_def zero_sep_state_def)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x.\n       SepState (cdl_heap_add x (SepState Map.empty (\\<lambda>obj_id. {})))\n        (cdl_ghost_state_add x (SepState Map.empty (\\<lambda>obj_id. {}))) =\n       x\n 2. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 3. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 4. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (case_tac x)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x x1 x2.\n       x = SepState x1 x2 \\<Longrightarrow>\n       SepState (cdl_heap_add x (SepState Map.empty (\\<lambda>obj_id. {})))\n        (cdl_ghost_state_add x (SepState Map.empty (\\<lambda>obj_id. {}))) =\n       x\n 2. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 3. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 4. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (clarsimp simp: cdl_heap_add_def)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 x2.\n       cdl_ghost_state_add (SepState x1 x2)\n        (SepState Map.empty (\\<lambda>obj_id. {})) =\n       x2\n 2. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 3. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 4. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (rule ext)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 x.\n       cdl_ghost_state_add (SepState x1 x2)\n        (SepState Map.empty (\\<lambda>obj_id. {})) x =\n       x2 x\n 2. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 3. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 4. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (clarsimp simp: cdl_ghost_state_add_def split:if_split_asm)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 2. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 3. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "(* x ## y \\<Longrightarrow> x + y = y + x *)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y. x ## y \\<Longrightarrow> x + y = y + x\n 2. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 3. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (clarsimp simp: plus_sep_state_def sep_disj_sep_state_def)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y.\n       sep_state_disj x y \\<Longrightarrow>\n       sep_state_add x y = sep_state_add y x\n 2. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 3. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (erule sep_state_add_comm)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 2. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "(* (x + y) + z = x + (y + z) *)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> x + y + z = x + (y + z)\n 2. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (simp add: plus_sep_state_def sep_state_add_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> cdl_heap_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_heap_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z)) \\<and>\n                         cdl_ghost_state_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_ghost_state_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n 2. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (rule conjI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> cdl_heap_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_heap_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n 2. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> cdl_ghost_state_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_ghost_state_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n 3. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (clarsimp simp: sep_disj_sep_state_def)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>sep_state_disj x y; sep_state_disj y z;\n        sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> cdl_heap_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_heap_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n 2. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> cdl_ghost_state_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_ghost_state_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n 3. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (erule (2) cdl_heap_add_assoc)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>x ## y; y ## z; x ## z\\<rbrakk>\n       \\<Longrightarrow> cdl_ghost_state_add\n                          (SepState (cdl_heap_add x y)\n                            (cdl_ghost_state_add x y))\n                          z =\n                         cdl_ghost_state_add x\n                          (SepState (cdl_heap_add y z)\n                            (cdl_ghost_state_add y z))\n 2. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (rule cdl_ghost_state_add_assoc)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "(* x ## y + z = (x ## y \\<and> x ## z) *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z x.\n       y ## z \\<Longrightarrow> x ## y + z = (x ## y \\<and> x ## z)", "apply (clarsimp simp: plus_sep_state_def sep_disj_sep_state_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z x.\n       sep_state_disj y z \\<Longrightarrow>\n       sep_state_disj x (sep_state_add y z) =\n       (sep_state_disj x y \\<and> sep_state_disj x z)", "apply (rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x y \\<and> sep_state_disj x z\n 2. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "(* x ## y + z \\<Longrightarrow> (x ## y \\<and> x ## z) *)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x y \\<and> sep_state_disj x z\n 2. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "apply (rule conjI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x y\n 2. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x z\n 3. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "(* x ## y + z \\<Longrightarrow> (x ## y) *)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x y\n 2. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x z\n 3. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "apply (erule (1) sep_state_add_disjL)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x z\n 2. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "(* x ## y + z \\<Longrightarrow> (x ## z) *)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x (sep_state_add y z)\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x z\n 2. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "apply (erule (1) sep_state_add_disjR)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "(* x ## y + z \\<Longleftarrow> (x ## y \\<and> x ## z) *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z;\n        sep_state_disj x y \\<and> sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z x.\n       \\<lbrakk>sep_state_disj y z; sep_state_disj x y;\n        sep_state_disj x z\\<rbrakk>\n       \\<Longrightarrow> sep_state_disj x (sep_state_add y z)", "apply (erule (2) sep_state_add_disj)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "end"], ["", "end"]]}