{"file_name": "/home/qj213/afp-2021-10-22/thys/Card_Number_Partitions/Additions_to_Main.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Card_Number_Partitions", "problem_names": ["lemma bound_domain_and_range_impl_finitely_many_functions:\n  \"finite {f::nat\\<Rightarrow>nat. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)}\"", "lemma sum_atMost_remove_nat:\n  assumes \"k \\<le> (n :: nat)\"\n  shows \"(\\<Sum>i\\<le>n. f i) = f k + (\\<Sum>i\\<in>{..n}-{k}. f i)\"", "lemma set_mset_Abs_multiset:\n  assumes \"f \\<in> multiset\"\n  shows \"set_mset (Abs_multiset f) = {x. f x > 0}\"", "lemma sum_mset_sum_count:\n  \"sum_mset M = (\\<Sum>i\\<in>set_mset M. count M i * i)\"", "lemma sum_mset_eq_sum_on_supersets:\n  assumes \"finite A\" \"set_mset M \\<subseteq> A\"\n  shows \"(\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)\""], "translations": [["", "lemma bound_domain_and_range_impl_finitely_many_functions:\n  \"finite {f::nat\\<Rightarrow>nat. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)}", "proof (induct m)"], ["proof (state)\ngoal (2 subgoals):\n 1. finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>0. f i = 0)}\n 2. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>0. f i = 0)}\n 2. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "have eq: \"{f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i. f i = 0)} = {(\\<lambda>_. 0)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i. f i = 0)} =\n    {\\<lambda>_. 0}", "by auto"], ["proof (state)\nthis:\n  {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i. f i = 0)} =\n  {\\<lambda>_. 0}\n\ngoal (2 subgoals):\n 1. finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>0. f i = 0)}\n 2. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "from this"], ["proof (chain)\npicking this:\n  {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i. f i = 0)} =\n  {\\<lambda>_. 0}", "show ?case"], ["proof (prove)\nusing this:\n  {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i. f i = 0)} =\n  {\\<lambda>_. 0}\n\ngoal (1 subgoal):\n 1. finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>0. f i = 0)}", "by auto (subst eq; auto)"], ["proof (state)\nthis:\n  finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>0. f i = 0)}\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "case (Suc m)"], ["proof (state)\nthis:\n  finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)}\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "let ?S = \"(\\<lambda>(y, f). f(m := y)) ` ({0..n} \\<times> {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)})\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "assume \"\\<forall>i. g i \\<le> n\" \"\\<forall>i\\<ge>Suc m. g i = 0\""], ["proof (state)\nthis:\n  \\<forall>i. g i \\<le> n\n  \\<forall>i\\<ge>Suc m. g i = 0\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "from this"], ["proof (chain)\npicking this:\n  \\<forall>i. g i \\<le> n\n  \\<forall>i\\<ge>Suc m. g i = 0", "have \"g \\<in> ?S\""], ["proof (prove)\nusing this:\n  \\<forall>i. g i \\<le> n\n  \\<forall>i\\<ge>Suc m. g i = 0\n\ngoal (1 subgoal):\n 1. g \\<in> (\\<lambda>(y, f). f(m := y)) `\n            ({0..n} \\<times>\n             {f. (\\<forall>i. f i \\<le> n) \\<and>\n                 (\\<forall>i\\<ge>m. f i = 0)})", "by (auto intro: image_eqI[where x=\"(g m, g(m:=0))\"])"], ["proof (state)\nthis:\n  g \\<in> (\\<lambda>(y, f). f(m := y)) `\n          ({0..n} \\<times>\n           {f. (\\<forall>i. f i \\<le> n) \\<and>\n               (\\<forall>i\\<ge>m. f i = 0)})\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>i. ?g2 i \\<le> n;\n   \\<forall>i\\<ge>Suc m. ?g2 i = 0\\<rbrakk>\n  \\<Longrightarrow> ?g2\n                    \\<in> (\\<lambda>(y, f). f(m := y)) `\n                          ({0..n} \\<times>\n                           {f. (\\<forall>i. f i \\<le> n) \\<and>\n                               (\\<forall>i\\<ge>m. f i = 0)})\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "from this"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>i. ?g2 i \\<le> n;\n   \\<forall>i\\<ge>Suc m. ?g2 i = 0\\<rbrakk>\n  \\<Longrightarrow> ?g2\n                    \\<in> (\\<lambda>(y, f). f(m := y)) `\n                          ({0..n} \\<times>\n                           {f. (\\<forall>i. f i \\<le> n) \\<and>\n                               (\\<forall>i\\<ge>m. f i = 0)})", "have \"{f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)} = ?S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>i. ?g2 i \\<le> n;\n   \\<forall>i\\<ge>Suc m. ?g2 i = 0\\<rbrakk>\n  \\<Longrightarrow> ?g2\n                    \\<in> (\\<lambda>(y, f). f(m := y)) `\n                          ({0..n} \\<times>\n                           {f. (\\<forall>i. f i \\<le> n) \\<and>\n                               (\\<forall>i\\<ge>m. f i = 0)})\n\ngoal (1 subgoal):\n 1. {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)} =\n    (\\<lambda>(y, f). f(m := y)) `\n    ({0..n} \\<times>\n     {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)})", "by auto"], ["proof (state)\nthis:\n  {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)} =\n  (\\<lambda>(y, f). f(m := y)) `\n  ({0..n} \\<times>\n   {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)})\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>m. f i = 0)} \\<Longrightarrow>\n       finite\n        {f. (\\<forall>i. f i \\<le> n) \\<and>\n            (\\<forall>i\\<ge>Suc m. f i = 0)}", "from this Suc"], ["proof (chain)\npicking this:\n  {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)} =\n  (\\<lambda>(y, f). f(m := y)) `\n  ({0..n} \\<times>\n   {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)})\n  finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)}", "show ?case"], ["proof (prove)\nusing this:\n  {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)} =\n  (\\<lambda>(y, f). f(m := y)) `\n  ({0..n} \\<times>\n   {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)})\n  finite {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>m. f i = 0)}\n\ngoal (1 subgoal):\n 1. finite\n     {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)}", "by simp"], ["proof (state)\nthis:\n  finite\n   {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>Suc m. f i = 0)}\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Addition to Set-Interval Theory\\<close>"], ["", "lemma sum_atMost_remove_nat:\n  assumes \"k \\<le> (n :: nat)\"\n  shows \"(\\<Sum>i\\<le>n. f i) = f k + (\\<Sum>i\\<in>{..n}-{k}. f i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {..n} = f k + sum f ({..n} - {k})", "using assms"], ["proof (prove)\nusing this:\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. sum f {..n} = f k + sum f ({..n} - {k})", "by (auto simp add: sum.remove[where x=k])"], ["", "subsection \\<open>Additions to Multiset Theory\\<close>"], ["", "lemma set_mset_Abs_multiset:\n  assumes \"f \\<in> multiset\"\n  shows \"set_mset (Abs_multiset f) = {x. f x > 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_mset (Abs_multiset f) = {x. 0 < f x}", "using assms"], ["proof (prove)\nusing this:\n  f \\<in> multiset\n\ngoal (1 subgoal):\n 1. set_mset (Abs_multiset f) = {x. 0 < f x}", "unfolding set_mset_def"], ["proof (prove)\nusing this:\n  f \\<in> multiset\n\ngoal (1 subgoal):\n 1. {x. 0 < count (Abs_multiset f) x} = {x. 0 < f x}", "by simp"], ["", "lemma sum_mset_sum_count:\n  \"sum_mset M = (\\<Sum>i\\<in>set_mset M. count M i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># M = (\\<Sum>i\\<in>set_mset M. count M i * i)", "proof (induct M)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Sum>\\<^sub># {#} = (\\<Sum>i\\<in>set_mset {#}. count {#} i * i)\n 2. \\<And>x M.\n       \\<Sum>\\<^sub># M =\n       (\\<Sum>i\\<in>set_mset M. count M i * i) \\<Longrightarrow>\n       \\<Sum>\\<^sub># (add_mset x M) =\n       (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "show \"sum_mset {#} = (\\<Sum>i\\<in>set_mset {#}. count {#} i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># {#} = (\\<Sum>i\\<in>set_mset {#}. count {#} i * i)", "by simp"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># {#} = (\\<Sum>i\\<in>set_mset {#}. count {#} i * i)\n\ngoal (1 subgoal):\n 1. \\<And>x M.\n       \\<Sum>\\<^sub># M =\n       (\\<Sum>i\\<in>set_mset M. count M i * i) \\<Longrightarrow>\n       \\<Sum>\\<^sub># (add_mset x M) =\n       (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x M.\n       \\<Sum>\\<^sub># M =\n       (\\<Sum>i\\<in>set_mset M. count M i * i) \\<Longrightarrow>\n       \\<Sum>\\<^sub># (add_mset x M) =\n       (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "fix M x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x M.\n       \\<Sum>\\<^sub># M =\n       (\\<Sum>i\\<in>set_mset M. count M i * i) \\<Longrightarrow>\n       \\<Sum>\\<^sub># (add_mset x M) =\n       (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "assume hyp: \"sum_mset M = (\\<Sum>i\\<in>set_mset M. count M i * i)\""], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># M = (\\<Sum>i\\<in>set_mset M. count M i * i)\n\ngoal (1 subgoal):\n 1. \\<And>x M.\n       \\<Sum>\\<^sub># M =\n       (\\<Sum>i\\<in>set_mset M. count M i * i) \\<Longrightarrow>\n       \\<Sum>\\<^sub># (add_mset x M) =\n       (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "show \"sum_mset (add_mset x M) = (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "proof (cases \"x \\<in># M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n 2. x \\<notin># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "assume a: \"\\<not> x \\<in># M\""], ["proof (state)\nthis:\n  x \\<notin># M\n\ngoal (2 subgoals):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n 2. x \\<notin># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "from this"], ["proof (chain)\npicking this:\n  x \\<notin># M", "have \"count M x = 0\""], ["proof (prove)\nusing this:\n  x \\<notin># M\n\ngoal (1 subgoal):\n 1. count M x = 0", "by (meson count_inI)"], ["proof (state)\nthis:\n  count M x = 0\n\ngoal (2 subgoals):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n 2. x \\<notin># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "from \\<open>\\<not> x \\<in># M\\<close> this hyp"], ["proof (chain)\npicking this:\n  x \\<notin># M\n  count M x = 0\n  \\<Sum>\\<^sub># M = (\\<Sum>i\\<in>set_mset M. count M i * i)", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<notin># M\n  count M x = 0\n  \\<Sum>\\<^sub># M = (\\<Sum>i\\<in>set_mset M. count M i * i)\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "by (auto intro!: sum.cong)"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "assume \"x \\<in># M\""], ["proof (state)\nthis:\n  x \\<in># M\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "have \"sum_mset (add_mset x M) = (\\<Sum>i\\<in>set_mset M. count M i * i) + x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset M. count M i * i) + x", "using hyp"], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># M = (\\<Sum>i\\<in>set_mset M. count M i * i)\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset M. count M i * i) + x", "by simp"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset M. count M i * i) + x\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "also"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset M. count M i * i) + x\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "have \"\\<dots> = (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) + x =\n    (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x", "using \\<open>x \\<in># M\\<close>"], ["proof (prove)\nusing this:\n  x \\<in># M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) + x =\n    (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x", "by (simp add: sum.remove[of _ x])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>set_mset M. count M i * i) + x =\n  (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>set_mset M. count M i * i) + x =\n  (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "have \"\\<dots> = count (add_mset x M) x * x + (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}. count (add_mset x M) i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x =\n    count (add_mset x M) x * x +\n    (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}. count (add_mset x M) i * i)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x =\n  count (add_mset x M) x * x +\n  (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}. count (add_mset x M) i * i)\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>set_mset M - {x}. count M i * i) + count M x * x + x =\n  count (add_mset x M) x * x +\n  (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}. count (add_mset x M) i * i)\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "have \"\\<dots> = (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. count (add_mset x M) x * x +\n    (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}.\n       count (add_mset x M) i * i) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "using \\<open>x \\<in># M\\<close>"], ["proof (prove)\nusing this:\n  x \\<in># M\n\ngoal (1 subgoal):\n 1. count (add_mset x M) x * x +\n    (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}.\n       count (add_mset x M) i * i) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "by (simp add: sum.remove[of _ x])"], ["proof (state)\nthis:\n  count (add_mset x M) x * x +\n  (\\<Sum>i\\<in>set_mset (add_mset x M) - {x}. count (add_mset x M) i * i) =\n  (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n\ngoal (1 subgoal):\n 1. x \\<in># M \\<Longrightarrow>\n    \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "finally"], ["proof (chain)\npicking this:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (add_mset x M) =\n    (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)", "."], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (add_mset x M) =\n  (\\<Sum>i\\<in>set_mset (add_mset x M). count (add_mset x M) i * i)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sum_mset_eq_sum_on_supersets:\n  assumes \"finite A\" \"set_mset M \\<subseteq> A\"\n  shows \"(\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)", "note \\<open>finite A\\<close> \\<open>set_mset M \\<subseteq> A\\<close>"], ["proof (state)\nthis:\n  finite A\n  set_mset M \\<subseteq> A\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)", "moreover"], ["proof (state)\nthis:\n  finite A\n  set_mset M \\<subseteq> A\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)", "have \"\\<forall>i\\<in>A - set_mset M. count M i * i = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>A - set_mset M. count M i * i = 0", "using count_inI"], ["proof (prove)\nusing this:\n  (count ?M ?x = 0 \\<Longrightarrow> False) \\<Longrightarrow> ?x \\<in># ?M\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>A - set_mset M. count M i * i = 0", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>i\\<in>A - set_mset M. count M i * i = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)", "ultimately"], ["proof (chain)\npicking this:\n  finite A\n  set_mset M \\<subseteq> A\n  \\<forall>i\\<in>A - set_mset M. count M i * i = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  finite A\n  set_mset M \\<subseteq> A\n  \\<forall>i\\<in>A - set_mset M. count M i * i = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)", "by (auto intro: sum.mono_neutral_cong_left)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>set_mset M. count M i * i) = (\\<Sum>i\\<in>A. count M i * i)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}