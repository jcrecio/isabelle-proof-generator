{"file_name": "/home/qj213/afp-2021-10-22/thys/Card_Number_Partitions/Number_Partition.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Card_Number_Partitions", "problem_names": ["lemma partitionsI:\n  assumes \"\\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> n\"\n  assumes \"(\\<Sum>i\\<le>n. p i * i) = n\"\n  shows \"p partitions n\"", "lemma partitionsE:\n  assumes \"p partitions n\"\n  obtains \"\\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> n\" \"(\\<Sum>i\\<le>n. p i * i) = n\"", "lemma partitions_zero:\n  \"p partitions 0 \\<longleftrightarrow> p = (\\<lambda>i. 0)\"", "lemma partitions_one:\n  \"p partitions (Suc 0) \\<longleftrightarrow> p = (\\<lambda>i. 0)(1 := 1)\"", "lemma partitions_imp_finite_elements:\n  assumes \"p partitions n\"\n  shows \"finite {i. 0 < p i}\"", "lemma partitions_imp_multiset:\n  assumes \"p partitions n\"\n  shows \"p \\<in> multiset\"", "lemma partitions_bounds:\n  assumes \"p partitions n\"\n  shows \"p i \\<le> n\"", "lemma partitions_parts_bounded:\n  assumes \"p partitions n\"\n  shows \"sum p {..n} \\<le> n\"", "lemma finite_partitions:\n  \"finite {p. p partitions n}\"", "lemma finite_partitions_k_parts:\n  \"finite {p. p partitions n \\<and> sum p {..n} = k}\"", "lemma partitions_remaining_Max_part:\n  assumes \"p partitions n\"\n  assumes \"0 < p k\"\n  shows \"\\<forall>i. n - k < i \\<and> i \\<noteq> k \\<longrightarrow> p i = 0\"", "lemma partitions_remove1_bounds:\n  assumes partitions: \"p partitions n\"\n  assumes gr0: \"0 < p k\"\n  assumes neq: \"(p(k := p k - 1)) i \\<noteq> 0\"\n  shows \"1 \\<le> i \\<and> i \\<le> n - k\"", "lemma partitions_remove1:\n  assumes partitions: \"p partitions n\"\n  assumes gr0: \"0 < p k\"\n  shows \"p(k := p k - 1) partitions (n - k)\"", "lemma partitions_insert1:\n  assumes p: \"p partitions n\"\n  assumes \"k > 0\"\n  shows \"(p(k := p k + 1)) partitions (n + k)\"", "lemma count_remove1:\n  assumes \"p partitions n\"\n  assumes \"0 < p k\"\n  shows \"(\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i) = (\\<Sum>i\\<le>n. p i) - 1\"", "lemma count_insert1:\n  assumes \"p partitions n\"\n  shows \"sum (p(k := p k + 1)) {..n + k} = (\\<Sum>i\\<le>n. p i) + 1\"", "lemma partitions_decrease1:\n  assumes p: \"p partitions m\"\n  assumes sum: \"sum p {..m} = k\"\n  assumes \"p 1 = 0\"\n  shows \"(\\<lambda>i. p (i + 1)) partitions m - k\"", "lemma partitions_increase1:\n  assumes partitions: \"p partitions m - k\"\n  assumes k: \"sum p {..m - k} = k\"\n  shows \"(\\<lambda>i. p (i - 1)) partitions m\"", "lemma count_decrease1:\n  assumes p: \"p partitions m\"\n  assumes sum: \"sum p {..m} = k\"\n  assumes \"p 1 = 0\"\n  shows \"sum (\\<lambda>i. p (i + 1)) {..m - k} = k\"", "lemma count_increase1:\n  assumes partitions: \"p partitions m - k\"\n  assumes k: \"sum p {..m - k} = k\"\n  shows \"(\\<Sum>i\\<le>m. p (i - 1)) = k\"", "lemma count_partitions_iff:\n  \"count N partitions n \\<longleftrightarrow> number_partition n N\"", "lemma partitions_iff_Abs_multiset:\n  \"p partitions n \\<longleftrightarrow> finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\"", "lemma size_nat_multiset_eq:\n  fixes N :: \"nat multiset\"\n  assumes \"number_partition n N\"\n  shows \"size N = sum (count N) {..n}\""], "translations": [["", "lemma partitionsI:\n  assumes \"\\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> n\"\n  assumes \"(\\<Sum>i\\<le>n. p i * i) = n\"\n  shows \"p partitions n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p partitions n", "using assms"], ["proof (prove)\nusing this:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. p partitions n", "unfolding partitions_def"], ["proof (prove)\nusing this:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. (\\<forall>i.\n        p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n) \\<and>\n    (\\<Sum>i\\<le>n. p i * i) = n", "by auto"], ["", "lemma partitionsE:\n  assumes \"p partitions n\"\n  obtains \"\\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> n\" \"(\\<Sum>i\\<le>n. p i * i) = n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<And>i.\n                 p i \\<noteq> 0 \\<Longrightarrow>\n                 1 \\<le> i \\<and> i \\<le> n;\n      (\\<Sum>i\\<le>n. p i * i) = n\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<And>i.\n                 p i \\<noteq> 0 \\<Longrightarrow>\n                 1 \\<le> i \\<and> i \\<le> n;\n      (\\<Sum>i\\<le>n. p i * i) = n\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding partitions_def"], ["proof (prove)\nusing this:\n  (\\<forall>i.\n      p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n) \\<and>\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<And>i.\n                 p i \\<noteq> 0 \\<Longrightarrow>\n                 1 \\<le> i \\<and> i \\<le> n;\n      (\\<Sum>i\\<le>n. p i * i) = n\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma partitions_zero:\n  \"p partitions 0 \\<longleftrightarrow> p = (\\<lambda>i. 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p partitions 0) = (p = (\\<lambda>i. 0))", "unfolding partitions_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>i.\n         p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> 0) \\<and>\n     (\\<Sum>i\\<le>0. p i * i) = 0) =\n    (p = (\\<lambda>i. 0))", "by auto"], ["", "lemma partitions_one:\n  \"p partitions (Suc 0) \\<longleftrightarrow> p = (\\<lambda>i. 0)(1 := 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p partitions Suc 0) = (p = (\\<lambda>i. 0)(1 := 1))", "unfolding partitions_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>i.\n         p i \\<noteq> 0 \\<longrightarrow>\n         1 \\<le> i \\<and> i \\<le> Suc 0) \\<and>\n     (\\<Sum>i\\<le>Suc 0. p i * i) = Suc 0) =\n    (p = (\\<lambda>i. 0)(1 := 1))", "by (auto split: if_split_asm) (auto simp add: fun_eq_iff)"], ["", "subsection \\<open>Bounds and Finiteness of Number Partitions\\<close>"], ["", "lemma partitions_imp_finite_elements:\n  assumes \"p partitions n\"\n  shows \"finite {i. 0 < p i}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {i. 0 < p i}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite {i. 0 < p i}", "from assms"], ["proof (chain)\npicking this:\n  p partitions n", "have \"{i. 0 < p i} \\<subseteq> {..n}\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. {i. 0 < p i} \\<subseteq> {..n}", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  {i. 0 < p i} \\<subseteq> {..n}\n\ngoal (1 subgoal):\n 1. finite {i. 0 < p i}", "from this"], ["proof (chain)\npicking this:\n  {i. 0 < p i} \\<subseteq> {..n}", "show ?thesis"], ["proof (prove)\nusing this:\n  {i. 0 < p i} \\<subseteq> {..n}\n\ngoal (1 subgoal):\n 1. finite {i. 0 < p i}", "using rev_finite_subset"], ["proof (prove)\nusing this:\n  {i. 0 < p i} \\<subseteq> {..n}\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite {i. 0 < p i}", "by blast"], ["proof (state)\nthis:\n  finite {i. 0 < p i}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_imp_multiset:\n  assumes \"p partitions n\"\n  shows \"p \\<in> multiset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> multiset", "using assms partitions_imp_finite_elements multiset_def"], ["proof (prove)\nusing this:\n  p partitions n\n  ?p partitions ?n \\<Longrightarrow> finite {i. 0 < ?p i}\n  multiset = {f. finite {x. 0 < f x}}\n\ngoal (1 subgoal):\n 1. p \\<in> multiset", "by auto"], ["", "lemma partitions_bounds:\n  assumes \"p partitions n\"\n  shows \"p i \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p i \\<le> n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p i \\<le> n", "from assms"], ["proof (chain)\npicking this:\n  p partitions n", "have index_bounds: \"(\\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n)\"\n    and sum: \"(\\<Sum>i\\<le>n. p i * i) = n\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n &&&\n    (\\<Sum>i\\<le>n. p i * i) = n", "unfolding partitions_def"], ["proof (prove)\nusing this:\n  (\\<forall>i.\n      p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n) \\<and>\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n &&&\n    (\\<Sum>i\\<le>n. p i * i) = n", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. p i \\<le> n", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. p i \\<le> n", "proof (cases \"1 \\<le> i \\<and> i \\<le> n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 \\<le> i \\<and> i \\<le> n \\<Longrightarrow> p i \\<le> n\n 2. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "case True"], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> n\n\ngoal (2 subgoals):\n 1. 1 \\<le> i \\<and> i \\<le> n \\<Longrightarrow> p i \\<le> n\n 2. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "from True"], ["proof (chain)\npicking this:\n  1 \\<le> i \\<and> i \\<le> n", "have \"{..n} = insert i {i'. i' \\<le> n \\<and> i' \\<noteq> i}\""], ["proof (prove)\nusing this:\n  1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. {..n} = insert i {i'. i' \\<le> n \\<and> i' \\<noteq> i}", "by blast"], ["proof (state)\nthis:\n  {..n} = insert i {i'. i' \\<le> n \\<and> i' \\<noteq> i}\n\ngoal (2 subgoals):\n 1. 1 \\<le> i \\<and> i \\<le> n \\<Longrightarrow> p i \\<le> n\n 2. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "from sum[unfolded this]"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<in>insert i {i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) = n", "have \"p i * i + (\\<Sum>i\\<in>{i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) = n\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>insert i {i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) = n\n\ngoal (1 subgoal):\n 1. p i * i + (\\<Sum>i\\<in>{i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) =\n    n", "by auto"], ["proof (state)\nthis:\n  p i * i + (\\<Sum>i\\<in>{i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) = n\n\ngoal (2 subgoals):\n 1. 1 \\<le> i \\<and> i \\<le> n \\<Longrightarrow> p i \\<le> n\n 2. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "from this"], ["proof (chain)\npicking this:\n  p i * i + (\\<Sum>i\\<in>{i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) = n", "have \"p i * i \\<le> n\""], ["proof (prove)\nusing this:\n  p i * i + (\\<Sum>i\\<in>{i'. i' \\<le> n \\<and> i' \\<noteq> i}. p i * i) = n\n\ngoal (1 subgoal):\n 1. p i * i \\<le> n", "by linarith"], ["proof (state)\nthis:\n  p i * i \\<le> n\n\ngoal (2 subgoals):\n 1. 1 \\<le> i \\<and> i \\<le> n \\<Longrightarrow> p i \\<le> n\n 2. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "from this True"], ["proof (chain)\npicking this:\n  p i * i \\<le> n\n  1 \\<le> i \\<and> i \\<le> n", "show ?thesis"], ["proof (prove)\nusing this:\n  p i * i \\<le> n\n  1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. p i \\<le> n", "using dual_order.trans"], ["proof (prove)\nusing this:\n  p i * i \\<le> n\n  1 \\<le> i \\<and> i \\<le> n\n  \\<lbrakk>?b \\<le> ?a; ?c \\<le> ?b\\<rbrakk> \\<Longrightarrow> ?c \\<le> ?a\n\ngoal (1 subgoal):\n 1. p i \\<le> n", "by fastforce"], ["proof (state)\nthis:\n  p i \\<le> n\n\ngoal (1 subgoal):\n 1. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "case False"], ["proof (state)\nthis:\n  \\<not> (1 \\<le> i \\<and> i \\<le> n)\n\ngoal (1 subgoal):\n 1. \\<not> (1 \\<le> i \\<and> i \\<le> n) \\<Longrightarrow> p i \\<le> n", "from this index_bounds"], ["proof (chain)\npicking this:\n  \\<not> (1 \\<le> i \\<and> i \\<le> n)\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (1 \\<le> i \\<and> i \\<le> n)\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. p i \\<le> n", "by fastforce"], ["proof (state)\nthis:\n  p i \\<le> n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p i \\<le> n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_parts_bounded:\n  assumes \"p partitions n\"\n  shows \"sum p {..n} \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "assume \"i \\<le> n\""], ["proof (state)\nthis:\n  i \\<le> n\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "from assms"], ["proof (chain)\npicking this:\n  p partitions n", "have \"p i \\<le> p i * i\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. p i \\<le> p i * i", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  p i \\<le> p i * i\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "}"], ["proof (state)\nthis:\n  ?i2 \\<le> n \\<Longrightarrow> p ?i2 \\<le> p ?i2 * ?i2\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "from this"], ["proof (chain)\npicking this:\n  ?i2 \\<le> n \\<Longrightarrow> p ?i2 \\<le> p ?i2 * ?i2", "have \"sum p {..n} \\<le> (\\<Sum>i\\<le>n. p i * i)\""], ["proof (prove)\nusing this:\n  ?i2 \\<le> n \\<Longrightarrow> p ?i2 \\<le> p ?i2 * ?i2\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> (\\<Sum>i\\<le>n. p i * i)", "by (auto intro: sum_mono)"], ["proof (state)\nthis:\n  sum p {..n} \\<le> (\\<Sum>i\\<le>n. p i * i)\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "also"], ["proof (state)\nthis:\n  sum p {..n} \\<le> (\\<Sum>i\\<le>n. p i * i)\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "from assms"], ["proof (chain)\npicking this:\n  p partitions n", "have n: \"(\\<Sum>i\\<le>n. p i * i) = n\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "finally"], ["proof (chain)\npicking this:\n  sum p {..n} \\<le> n", "show ?thesis"], ["proof (prove)\nusing this:\n  sum p {..n} \\<le> n\n\ngoal (1 subgoal):\n 1. sum p {..n} \\<le> n", "."], ["proof (state)\nthis:\n  sum p {..n} \\<le> n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma finite_partitions:\n  \"finite {p. p partitions n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {p. p partitions n}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite {p. p partitions n}", "have \"{p. p partitions n} \\<subseteq> {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i. n + 1 \\<le> i \\<longrightarrow> f i = 0)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {p. p partitions n}\n    \\<subseteq> {f. (\\<forall>i. f i \\<le> n) \\<and>\n                    (\\<forall>i\\<ge>n + 1. f i = 0)}", "by (auto elim: partitions_bounds) (auto simp add: partitions_def)"], ["proof (state)\nthis:\n  {p. p partitions n}\n  \\<subseteq> {f. (\\<forall>i. f i \\<le> n) \\<and>\n                  (\\<forall>i\\<ge>n + 1. f i = 0)}\n\ngoal (1 subgoal):\n 1. finite {p. p partitions n}", "from this bound_domain_and_range_impl_finitely_many_functions[of n \"n + 1\"]"], ["proof (chain)\npicking this:\n  {p. p partitions n}\n  \\<subseteq> {f. (\\<forall>i. f i \\<le> n) \\<and>\n                  (\\<forall>i\\<ge>n + 1. f i = 0)}\n  finite\n   {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>n + 1. f i = 0)}", "show ?thesis"], ["proof (prove)\nusing this:\n  {p. p partitions n}\n  \\<subseteq> {f. (\\<forall>i. f i \\<le> n) \\<and>\n                  (\\<forall>i\\<ge>n + 1. f i = 0)}\n  finite\n   {f. (\\<forall>i. f i \\<le> n) \\<and> (\\<forall>i\\<ge>n + 1. f i = 0)}\n\ngoal (1 subgoal):\n 1. finite {p. p partitions n}", "by (simp add: finite_subset)"], ["proof (state)\nthis:\n  finite {p. p partitions n}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma finite_partitions_k_parts:\n  \"finite {p. p partitions n \\<and> sum p {..n} = k}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {p. p partitions n \\<and> sum p {..n} = k}", "by (simp add: finite_partitions)"], ["", "lemma partitions_remaining_Max_part:\n  assumes \"p partitions n\"\n  assumes \"0 < p k\"\n  shows \"\\<forall>i. n - k < i \\<and> i \\<noteq> k \\<longrightarrow> p i = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. n - k < i \\<and> i \\<noteq> k \\<longrightarrow> p i = 0", "proof (clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>n - k < i; i \\<noteq> k\\<rbrakk> \\<Longrightarrow> p i = 0", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>n - k < i; i \\<noteq> k\\<rbrakk> \\<Longrightarrow> p i = 0", "assume \"n - k < i\" \"i \\<noteq> k\""], ["proof (state)\nthis:\n  n - k < i\n  i \\<noteq> k\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>n - k < i; i \\<noteq> k\\<rbrakk> \\<Longrightarrow> p i = 0", "show \"p i = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p i = 0", "proof (cases \"i \\<le> n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "assume \"i \\<le> n\""], ["proof (state)\nthis:\n  i \\<le> n\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "from assms"], ["proof (chain)\npicking this:\n  p partitions n\n  0 < p k", "have n: \"(\\<Sum>i\\<le>n. p i * i) = n\" and \"k \\<le> n\""], ["proof (prove)\nusing this:\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n &&& k \\<le> n", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = n\n  k \\<le> n\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "have \"(\\<Sum>i\\<le>n. p i * i) = p k * k + (\\<Sum>i\\<in>{..n}-{k}. p i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i)", "using \\<open>k \\<le> n\\<close> sum_atMost_remove_nat"], ["proof (prove)\nusing this:\n  k \\<le> n\n  ?k \\<le> ?n \\<Longrightarrow>\n  sum ?f {..?n} = ?f ?k + sum ?f ({..?n} - {?k})\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i)", "by blast"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i)\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i)\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "have \"... = p i * i + p k * k + (\\<Sum>i\\<in>{..n}-{i, k}. p i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) =\n    p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)", "using \\<open>i \\<le> n\\<close> \\<open>i \\<noteq> k\\<close>"], ["proof (prove)\nusing this:\n  i \\<le> n\n  i \\<noteq> k\n\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) =\n    p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)", "by (auto simp add: sum.remove[where x=\"i\"]) (metis Diff_insert)"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) =\n  p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>n. p i * i) =\n  p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)", "have eq: \"(\\<Sum>i\\<le>n. p i * i) = p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>n. p i * i) =\n  p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) =\n    p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) =\n  p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> p i = 0\n 2. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "show \"p i = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p i = 0", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. p i \\<noteq> 0 \\<Longrightarrow> False", "assume \"p i \\<noteq> 0\""], ["proof (state)\nthis:\n  p i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. p i \\<noteq> 0 \\<Longrightarrow> False", "have upper_bound: \"p i * i + p k * k \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p i * i + p k * k \\<le> n", "using eq n"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>n. p i * i) =\n  p i * i + p k * k + (\\<Sum>i\\<in>{..n} - {i, k}. p i * i)\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. p i * i + p k * k \\<le> n", "by auto"], ["proof (state)\nthis:\n  p i * i + p k * k \\<le> n\n\ngoal (1 subgoal):\n 1. p i \\<noteq> 0 \\<Longrightarrow> False", "have lower_bound: \"p i * i + p k * k > n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n < p i * i + p k * k", "using \\<open>n - k < i\\<close> \\<open>0 < p k\\<close> \\<open>k \\<le> n\\<close> \\<open>p i \\<noteq> 0\\<close> mult_eq_if not_less"], ["proof (prove)\nusing this:\n  n - k < i\n  0 < p k\n  k \\<le> n\n  p i \\<noteq> 0\n  ?m * ?n = (if ?m = 0 then 0 else ?n + (?m - 1) * ?n)\n  (\\<not> ?x < ?y) = (?y \\<le> ?x)\n\ngoal (1 subgoal):\n 1. n < p i * i + p k * k", "by auto"], ["proof (state)\nthis:\n  n < p i * i + p k * k\n\ngoal (1 subgoal):\n 1. p i \\<noteq> 0 \\<Longrightarrow> False", "from upper_bound lower_bound"], ["proof (chain)\npicking this:\n  p i * i + p k * k \\<le> n\n  n < p i * i + p k * k", "show False"], ["proof (prove)\nusing this:\n  p i * i + p k * k \\<le> n\n  n < p i * i + p k * k\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p i = 0\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "assume \"\\<not> (i \\<le> n)\""], ["proof (state)\nthis:\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> p i = 0", "from this"], ["proof (chain)\npicking this:\n  \\<not> i \\<le> n", "show \"p i = 0\""], ["proof (prove)\nusing this:\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. p i = 0", "using assms(1)"], ["proof (prove)\nusing this:\n  \\<not> i \\<le> n\n  p partitions n\n\ngoal (1 subgoal):\n 1. p i = 0", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  p i = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p i = 0\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Operations of Number Partitions\\<close>"], ["", "lemma partitions_remove1_bounds:\n  assumes partitions: \"p partitions n\"\n  assumes gr0: \"0 < p k\"\n  assumes neq: \"(p(k := p k - 1)) i \\<noteq> 0\"\n  shows \"1 \\<le> i \\<and> i \\<le> n - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> n - k", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 \\<le> i\n 2. i \\<le> n - k", "from partitions neq"], ["proof (chain)\npicking this:\n  p partitions n\n  (p(k := p k - 1)) i \\<noteq> 0", "show \"1 \\<le> i\""], ["proof (prove)\nusing this:\n  p partitions n\n  (p(k := p k - 1)) i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> i", "by (auto elim!: partitionsE split: if_split_asm)"], ["proof (state)\nthis:\n  1 \\<le> i\n\ngoal (1 subgoal):\n 1. i \\<le> n - k", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<le> n - k", "from partitions gr0"], ["proof (chain)\npicking this:\n  p partitions n\n  0 < p k", "have n: \"(\\<Sum>i\\<le>n. p i * i) = n\" and \"k \\<le> n\""], ["proof (prove)\nusing this:\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n &&& k \\<le> n", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = n\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. i \\<le> n - k", "show \"i \\<le> n - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<le> n - k", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> i \\<le> n - k\n 2. \\<not> ?P \\<Longrightarrow> i \\<le> n - k", "assume \"k \\<le> n - k\""], ["proof (state)\nthis:\n  k \\<le> n - k\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> i \\<le> n - k\n 2. \\<not> ?P \\<Longrightarrow> i \\<le> n - k", "from \\<open>k \\<le> n - k\\<close> neq"], ["proof (chain)\npicking this:\n  k \\<le> n - k\n  (p(k := p k - 1)) i \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  k \\<le> n - k\n  (p(k := p k - 1)) i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i \\<le> n - k", "using  partitions_remaining_Max_part[OF partitions gr0] not_le"], ["proof (prove)\nusing this:\n  k \\<le> n - k\n  (p(k := p k - 1)) i \\<noteq> 0\n  \\<forall>i. n - k < i \\<and> i \\<noteq> k \\<longrightarrow> p i = 0\n  (\\<not> ?x \\<le> ?y) = (?y < ?x)\n\ngoal (1 subgoal):\n 1. i \\<le> n - k", "by force"], ["proof (state)\nthis:\n  i \\<le> n - k\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> n - k \\<Longrightarrow> i \\<le> n - k", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> k \\<le> n - k \\<Longrightarrow> i \\<le> n - k", "assume \"\\<not> k \\<le> n - k\""], ["proof (state)\nthis:\n  \\<not> k \\<le> n - k\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> n - k \\<Longrightarrow> i \\<le> n - k", "from this"], ["proof (chain)\npicking this:\n  \\<not> k \\<le> n - k", "have \"2 * k > n\""], ["proof (prove)\nusing this:\n  \\<not> k \\<le> n - k\n\ngoal (1 subgoal):\n 1. n < 2 * k", "by auto"], ["proof (state)\nthis:\n  n < 2 * k\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> n - k \\<Longrightarrow> i \\<le> n - k", "have \"p k = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k = 1", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. p k \\<noteq> 1 \\<Longrightarrow> False", "assume \"p k \\<noteq> 1\""], ["proof (state)\nthis:\n  p k \\<noteq> 1\n\ngoal (1 subgoal):\n 1. p k \\<noteq> 1 \\<Longrightarrow> False", "with gr0"], ["proof (chain)\npicking this:\n  0 < p k\n  p k \\<noteq> 1", "have \"p k \\<ge> 2\""], ["proof (prove)\nusing this:\n  0 < p k\n  p k \\<noteq> 1\n\ngoal (1 subgoal):\n 1. 2 \\<le> p k", "by auto"], ["proof (state)\nthis:\n  2 \\<le> p k\n\ngoal (1 subgoal):\n 1. p k \\<noteq> 1 \\<Longrightarrow> False", "from this"], ["proof (chain)\npicking this:\n  2 \\<le> p k", "have \"p k * k \\<ge> 2 * k\""], ["proof (prove)\nusing this:\n  2 \\<le> p k\n\ngoal (1 subgoal):\n 1. 2 * k \\<le> p k * k", "by simp"], ["proof (state)\nthis:\n  2 * k \\<le> p k * k\n\ngoal (1 subgoal):\n 1. p k \\<noteq> 1 \\<Longrightarrow> False", "with \\<open>2 * k > n\\<close>"], ["proof (chain)\npicking this:\n  n < 2 * k\n  2 * k \\<le> p k * k", "have \"p k * k > n\""], ["proof (prove)\nusing this:\n  n < 2 * k\n  2 * k \\<le> p k * k\n\ngoal (1 subgoal):\n 1. n < p k * k", "by linarith"], ["proof (state)\nthis:\n  n < p k * k\n\ngoal (1 subgoal):\n 1. p k \\<noteq> 1 \\<Longrightarrow> False", "from \\<open>k \\<le> n\\<close> this"], ["proof (chain)\npicking this:\n  k \\<le> n\n  n < p k * k", "have \"(\\<Sum>i\\<le>n. p i * i) > n\""], ["proof (prove)\nusing this:\n  k \\<le> n\n  n < p k * k\n\ngoal (1 subgoal):\n 1. n < (\\<Sum>i\\<le>n. p i * i)", "by (simp add: sum_atMost_remove_nat[of k])"], ["proof (state)\nthis:\n  n < (\\<Sum>i\\<le>n. p i * i)\n\ngoal (1 subgoal):\n 1. p k \\<noteq> 1 \\<Longrightarrow> False", "from this n"], ["proof (chain)\npicking this:\n  n < (\\<Sum>i\\<le>n. p i * i)\n  (\\<Sum>i\\<le>n. p i * i) = n", "show \"False\""], ["proof (prove)\nusing this:\n  n < (\\<Sum>i\\<le>n. p i * i)\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p k = 1\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> n - k \\<Longrightarrow> i \\<le> n - k", "from neq this"], ["proof (chain)\npicking this:\n  (p(k := p k - 1)) i \\<noteq> 0\n  p k = 1", "show ?thesis"], ["proof (prove)\nusing this:\n  (p(k := p k - 1)) i \\<noteq> 0\n  p k = 1\n\ngoal (1 subgoal):\n 1. i \\<le> n - k", "using partitions_remaining_Max_part[OF partitions gr0] leI"], ["proof (prove)\nusing this:\n  (p(k := p k - 1)) i \\<noteq> 0\n  p k = 1\n  \\<forall>i. n - k < i \\<and> i \\<noteq> k \\<longrightarrow> p i = 0\n  \\<not> ?x < ?y \\<Longrightarrow> ?y \\<le> ?x\n\ngoal (1 subgoal):\n 1. i \\<le> n - k", "by (auto split: if_split_asm) force"], ["proof (state)\nthis:\n  i \\<le> n - k\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  i \\<le> n - k\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_remove1:\n  assumes partitions: \"p partitions n\"\n  assumes gr0: \"0 < p k\"\n  shows \"p(k := p k - 1) partitions (n - k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p(k := p k - 1) partitions n - k", "proof (rule partitionsI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       (p(k := p k - 1)) i \\<noteq> 0 \\<Longrightarrow>\n       1 \\<le> i \\<and> i \\<le> n - k\n 2. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       (p(k := p k - 1)) i \\<noteq> 0 \\<Longrightarrow>\n       1 \\<le> i \\<and> i \\<le> n - k\n 2. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "assume \"(p(k := p k - 1)) i \\<noteq> 0\""], ["proof (state)\nthis:\n  (p(k := p k - 1)) i \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       (p(k := p k - 1)) i \\<noteq> 0 \\<Longrightarrow>\n       1 \\<le> i \\<and> i \\<le> n - k\n 2. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "from this"], ["proof (chain)\npicking this:\n  (p(k := p k - 1)) i \\<noteq> 0", "show \"1 \\<le> i \\<and> i \\<le> n - k\""], ["proof (prove)\nusing this:\n  (p(k := p k - 1)) i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> n - k", "using partitions_remove1_bounds partitions gr0"], ["proof (prove)\nusing this:\n  (p(k := p k - 1)) i \\<noteq> 0\n  \\<lbrakk>?p partitions ?n; 0 < ?p ?k;\n   (?p(?k := ?p ?k - 1)) ?i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> ?n - ?k\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> n - k", "by blast"], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> n - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "from partitions gr0"], ["proof (chain)\npicking this:\n  p partitions n\n  0 < p k", "have \"k \\<le> n\""], ["proof (prove)\nusing this:\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. k \\<le> n", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "have \"(\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) =\n    (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i)", "using partitions_remove1_bounds partitions gr0"], ["proof (prove)\nusing this:\n  \\<lbrakk>?p partitions ?n; 0 < ?p ?k;\n   (?p(?k := ?p ?k - 1)) ?i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> ?n - ?k\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) =\n    (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i)", "by (auto intro!: sum.mono_neutral_left)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) =\n  (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) =\n  (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "have \"... = (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i) =\n    (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i)", "using \\<open>k \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i) =\n    (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i)", "by (simp add: sum_atMost_remove_nat[where k=\"k\"])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i) =\n  (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. (p(k := p k - 1)) i * i) =\n  (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "have \"... = p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i) =\n    p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k", "using gr0"], ["proof (prove)\nusing this:\n  0 < p k\n\ngoal (1 subgoal):\n 1. (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i) =\n    p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k", "by (simp add: diff_mult_distrib)"], ["proof (state)\nthis:\n  (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i) =\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "also"], ["proof (state)\nthis:\n  (p k - 1) * k + (\\<Sum>i\\<in>{..n} - {k}. (p(k := p k - 1)) i * i) =\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "have \"... = (\\<Sum>i\\<le>n. p i * i) - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k =\n    (\\<Sum>i\\<le>n. p i * i) - k", "using \\<open>k \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k =\n    (\\<Sum>i\\<le>n. p i * i) - k", "by (simp add: sum_atMost_remove_nat[of k])"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k =\n  (\\<Sum>i\\<le>n. p i * i) - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "also"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) - k =\n  (\\<Sum>i\\<le>n. p i * i) - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "from partitions"], ["proof (chain)\npicking this:\n  p partitions n", "have \"... = n - k\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) - k = n - k", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) - k = n - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "show \"(\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i * i) = n - k\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_insert1:\n  assumes p: \"p partitions n\"\n  assumes \"k > 0\"\n  shows \"(p(k := p k + 1)) partitions (n + k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p(k := p k + 1) partitions n + k", "proof (rule partitionsI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       (p(k := p k + 1)) i \\<noteq> 0 \\<Longrightarrow>\n       1 \\<le> i \\<and> i \\<le> n + k\n 2. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       (p(k := p k + 1)) i \\<noteq> 0 \\<Longrightarrow>\n       1 \\<le> i \\<and> i \\<le> n + k\n 2. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "assume \"(p(k := p k + 1)) i \\<noteq> 0\""], ["proof (state)\nthis:\n  (p(k := p k + 1)) i \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       (p(k := p k + 1)) i \\<noteq> 0 \\<Longrightarrow>\n       1 \\<le> i \\<and> i \\<le> n + k\n 2. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "from p this \\<open>k > 0\\<close>"], ["proof (chain)\npicking this:\n  p partitions n\n  (p(k := p k + 1)) i \\<noteq> 0\n  0 < k", "show \"1 \\<le> i \\<and> i \\<le> n + k\""], ["proof (prove)\nusing this:\n  p partitions n\n  (p(k := p k + 1)) i \\<noteq> 0\n  0 < k\n\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> n + k", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> n + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "have \"(\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) =\n    p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k", "by (simp add: sum_atMost_remove_nat[of k])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) =\n  p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) =\n  p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "have \"... = p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k =\n    p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k", "using p"], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k =\n    p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k", "by (auto intro!: sum.mono_neutral_right elim!: partitionsE)"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k =\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "also"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n + k} - {k}. p i * i) + k =\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "have \"... = (\\<Sum>i\\<le>n. p i * i) + k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k =\n    (\\<Sum>i\\<le>n. p i * i) + k", "using p"], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k =\n    (\\<Sum>i\\<le>n. p i * i) + k", "by (cases \"k \\<le> n\") (auto simp add: sum_atMost_remove_nat[of k] elim: partitionsE)"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k =\n  (\\<Sum>i\\<le>n. p i * i) + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "also"], ["proof (state)\nthis:\n  p k * k + (\\<Sum>i\\<in>{..n} - {k}. p i * i) + k =\n  (\\<Sum>i\\<le>n. p i * i) + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "have \"... = n + k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) + k = n + k", "using p"], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) + k = n + k", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) + k = n + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "show \"(\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i * i) = n + k\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_remove1:\n  assumes \"p partitions n\"\n  assumes \"0 < p k\"\n  shows \"(\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i) = (\\<Sum>i\\<le>n. p i) - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "have \"k \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> n", "using assms"], ["proof (prove)\nusing this:\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. k \\<le> n", "by (auto elim: partitionsE)"], ["proof (state)\nthis:\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "have \"(\\<Sum>i\\<le>n - k. (p(k := p k - 1)) i) = (\\<Sum>i\\<le>n. (p(k := p k - 1)) i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum (p(k := p k - 1)) {..n}", "using partitions_remove1_bounds assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?p partitions ?n; 0 < ?p ?k;\n   (?p(?k := ?p ?k - 1)) ?i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> ?n - ?k\n  p partitions n\n  0 < p k\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum (p(k := p k - 1)) {..n}", "by (auto intro!: sum.mono_neutral_left)"], ["proof (state)\nthis:\n  sum (p(k := p k - 1)) {..n - k} = sum (p(k := p k - 1)) {..n}\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "also"], ["proof (state)\nthis:\n  sum (p(k := p k - 1)) {..n - k} = sum (p(k := p k - 1)) {..n}\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "have \"(\\<Sum>i\\<le>n. (p(k := p k - 1)) i) = p k + (\\<Sum>i\\<in>{..n} - {k}. p i) - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n} = p k + sum p ({..n} - {k}) - 1", "using \\<open>0 < p k\\<close> \\<open>k \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  0 < p k\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n} = p k + sum p ({..n} - {k}) - 1", "by (simp add: sum_atMost_remove_nat[of k])"], ["proof (state)\nthis:\n  sum (p(k := p k - 1)) {..n} = p k + sum p ({..n} - {k}) - 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "also"], ["proof (state)\nthis:\n  sum (p(k := p k - 1)) {..n} = p k + sum p ({..n} - {k}) - 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "have \"... = (\\<Sum>i\\<in>{..n}. p i) - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k + sum p ({..n} - {k}) - 1 = sum p {..n} - 1", "using \\<open>k \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> n\n\ngoal (1 subgoal):\n 1. p k + sum p ({..n} - {k}) - 1 = sum p {..n} - 1", "by (simp add: sum_atMost_remove_nat[of k])"], ["proof (state)\nthis:\n  p k + sum p ({..n} - {k}) - 1 = sum p {..n} - 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "finally"], ["proof (chain)\npicking this:\n  sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "show ?thesis"], ["proof (prove)\nusing this:\n  sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1", "."], ["proof (state)\nthis:\n  sum (p(k := p k - 1)) {..n - k} = sum p {..n} - 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_insert1:\n  assumes \"p partitions n\"\n  shows \"sum (p(k := p k + 1)) {..n + k} = (\\<Sum>i\\<le>n. p i) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "have \"(\\<Sum>i\\<le>n + k. (p(k := p k + 1)) i) = p k + (\\<Sum>i\\<in>{..n + k} - {k}. p i) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = p k + sum p ({..n + k} - {k}) + 1", "by (simp add: sum_atMost_remove_nat[of k])"], ["proof (state)\nthis:\n  sum (p(k := p k + 1)) {..n + k} = p k + sum p ({..n + k} - {k}) + 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "also"], ["proof (state)\nthis:\n  sum (p(k := p k + 1)) {..n + k} = p k + sum p ({..n + k} - {k}) + 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "have \"... = p k + (\\<Sum>i\\<in>{..n} - {k}. p i) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k + sum p ({..n + k} - {k}) + 1 = p k + sum p ({..n} - {k}) + 1", "using assms"], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. p k + sum p ({..n + k} - {k}) + 1 = p k + sum p ({..n} - {k}) + 1", "by (auto intro!: sum.mono_neutral_right elim!: partitionsE)"], ["proof (state)\nthis:\n  p k + sum p ({..n + k} - {k}) + 1 = p k + sum p ({..n} - {k}) + 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "also"], ["proof (state)\nthis:\n  p k + sum p ({..n + k} - {k}) + 1 = p k + sum p ({..n} - {k}) + 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "have \"... = (\\<Sum>i\\<le>n. p i) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p k + sum p ({..n} - {k}) + 1 = sum p {..n} + 1", "using assms"], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. p k + sum p ({..n} - {k}) + 1 = sum p {..n} + 1", "by (cases \"k \\<le> n\") (auto simp add: sum_atMost_remove_nat[of k] elim: partitionsE)"], ["proof (state)\nthis:\n  p k + sum p ({..n} - {k}) + 1 = sum p {..n} + 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "finally"], ["proof (chain)\npicking this:\n  sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1\n\ngoal (1 subgoal):\n 1. sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1", "."], ["proof (state)\nthis:\n  sum (p(k := p k + 1)) {..n + k} = sum p {..n} + 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_decrease1:\n  assumes p: \"p partitions m\"\n  assumes sum: \"sum p {..m} = k\"\n  assumes \"p 1 = 0\"\n  shows \"(\\<lambda>i. p (i + 1)) partitions m - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "from p"], ["proof (chain)\npicking this:\n  p partitions m", "have \"p 0 = 0\""], ["proof (prove)\nusing this:\n  p partitions m\n\ngoal (1 subgoal):\n 1. p 0 = 0", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "{"], ["proof (state)\nthis:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "assume neq: \"p (i + 1) \\<noteq> 0\""], ["proof (state)\nthis:\n  p (i + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "from p this \\<open>p 1 = 0\\<close>"], ["proof (chain)\npicking this:\n  p partitions m\n  p (i + 1) \\<noteq> 0\n  p 1 = 0", "have \"1 \\<le> i\""], ["proof (prove)\nusing this:\n  p partitions m\n  p (i + 1) \\<noteq> 0\n  p 1 = 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> i", "by (fastforce elim!: partitionsE simp add: le_Suc_eq)"], ["proof (state)\nthis:\n  1 \\<le> i\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "moreover"], ["proof (state)\nthis:\n  1 \\<le> i\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "have \"i \\<le> m - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<le> m - k", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "assume i_greater: \"\\<not> i \\<le> m - k\""], ["proof (state)\nthis:\n  \\<not> i \\<le> m - k\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "from p"], ["proof (chain)\npicking this:\n  p partitions m", "have s: \"(\\<Sum>i\\<le>m. p i * i) = m\""], ["proof (prove)\nusing this:\n  p partitions m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i) = m", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i) = m\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "from p sum"], ["proof (chain)\npicking this:\n  p partitions m\n  sum p {..m} = k", "have \"k \\<le> m\""], ["proof (prove)\nusing this:\n  p partitions m\n  sum p {..m} = k\n\ngoal (1 subgoal):\n 1. k \\<le> m", "using partitions_parts_bounded"], ["proof (prove)\nusing this:\n  p partitions m\n  sum p {..m} = k\n  ?p partitions ?n \\<Longrightarrow> sum ?p {..?n} \\<le> ?n\n\ngoal (1 subgoal):\n 1. k \\<le> m", "by fastforce"], ["proof (state)\nthis:\n  k \\<le> m\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "from neq p"], ["proof (chain)\npicking this:\n  p (i + 1) \\<noteq> 0\n  p partitions m", "have \"i + 1 \\<le> m\""], ["proof (prove)\nusing this:\n  p (i + 1) \\<noteq> 0\n  p partitions m\n\ngoal (1 subgoal):\n 1. i + 1 \\<le> m", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  i + 1 \\<le> m\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "from i_greater"], ["proof (chain)\npicking this:\n  \\<not> i \\<le> m - k", "have \"i > m - k\""], ["proof (prove)\nusing this:\n  \\<not> i \\<le> m - k\n\ngoal (1 subgoal):\n 1. m - k < i", "by simp"], ["proof (state)\nthis:\n  m - k < i\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have ineq1: \"i + 1 > (m - k) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m - k + 1 < i + 1", "using i_greater"], ["proof (prove)\nusing this:\n  \\<not> i \\<le> m - k\n\ngoal (1 subgoal):\n 1. m - k + 1 < i + 1", "by simp"], ["proof (state)\nthis:\n  m - k + 1 < i + 1\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have ineq21: \"(\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j) \\<ge> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(i + 1 := p (i + 1) - 1)) {..m}\n    \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "using \\<open>p 0 = 0\\<close> not_less"], ["proof (prove)\nusing this:\n  p 0 = 0\n  (\\<not> ?x < ?y) = (?y \\<le> ?x)\n\ngoal (1 subgoal):\n 1. sum (p(i + 1 := p (i + 1) - 1)) {..m}\n    \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "by (fastforce intro!: sum_mono)"], ["proof (state)\nthis:\n  sum (p(i + 1 := p (i + 1) - 1)) {..m}\n  \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have ineq22a: \"(\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j) = (\\<Sum>j\\<le>m. p j) - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (p(i + 1 := p (i + 1) - 1)) {..m} = sum p {..m} - 1", "using \\<open>i + 1 \\<le> m\\<close> neq"], ["proof (prove)\nusing this:\n  i + 1 \\<le> m\n  p (i + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sum (p(i + 1 := p (i + 1) - 1)) {..m} = sum p {..m} - 1", "by (simp add: sum.remove[where x=\"i + 1\"])"], ["proof (state)\nthis:\n  sum (p(i + 1 := p (i + 1) - 1)) {..m} = sum p {..m} - 1\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have ineq22: \"(\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j) \\<ge> k - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k - 1 \\<le> sum (p(i + 1 := p (i + 1) - 1)) {..m}", "using sum neq ineq22a"], ["proof (prove)\nusing this:\n  sum p {..m} = k\n  p (i + 1) \\<noteq> 0\n  sum (p(i + 1 := p (i + 1) - 1)) {..m} = sum p {..m} - 1\n\ngoal (1 subgoal):\n 1. k - 1 \\<le> sum (p(i + 1 := p (i + 1) - 1)) {..m}", "by auto"], ["proof (state)\nthis:\n  k - 1 \\<le> sum (p(i + 1 := p (i + 1) - 1)) {..m}\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have ineq2: \"(\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j) \\<ge> k - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k - 1 \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "using ineq21 ineq22"], ["proof (prove)\nusing this:\n  sum (p(i + 1 := p (i + 1) - 1)) {..m}\n  \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n  k - 1 \\<le> sum (p(i + 1 := p (i + 1) - 1)) {..m}\n\ngoal (1 subgoal):\n 1. k - 1 \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "by auto"], ["proof (state)\nthis:\n  k - 1 \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have \"(\\<Sum>i\\<le>m. p i * i) = p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i) =\n    p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i)", "using \\<open>i + 1 \\<le> m\\<close> neq"], ["proof (prove)\nusing this:\n  i + 1 \\<le> m\n  p (i + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i) =\n    p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i)", "by (subst sum.remove[where x=\"i + 1\"]) auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i) =\n  p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i) =\n  p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have \"... = (i + 1) + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i) =\n    i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "using \\<open>i + 1 \\<le> m\\<close> neq"], ["proof (prove)\nusing this:\n  i + 1 \\<le> m\n  p (i + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i) =\n    i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "by (subst sum.remove[where x=\"i + 1\" and g=\"\\<lambda>j. (p(i + 1 := p (i + 1) - 1)) j * j\"])\n          (auto simp add: mult_eq_if)"], ["proof (state)\nthis:\n  p (i + 1) * (i + 1) + (\\<Sum>i\\<in>{..m} - {i + 1}. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "have \"(\\<Sum>i\\<le>m. p i * i) = i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i) =\n    i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "have \"... > m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m < i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "using ineq1 ineq2 \\<open>k \\<le> m\\<close> \\<open>p (i + 1) \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  m - k + 1 < i + 1\n  k - 1 \\<le> (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n  k \\<le> m\n  p (i + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. m < i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "by linarith"], ["proof (state)\nthis:\n  m < i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n  m < i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)", "have \"(\\<Sum>i\\<le>m. p i * i) > m\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m. p i * i) =\n  i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n  m < i + 1 + (\\<Sum>j\\<le>m. (p(i + 1 := p (i + 1) - 1)) j * j)\n\ngoal (1 subgoal):\n 1. m < (\\<Sum>i\\<le>m. p i * i)", "by simp"], ["proof (state)\nthis:\n  m < (\\<Sum>i\\<le>m. p i * i)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> m - k \\<Longrightarrow> False", "from s this"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m. p i * i) = m\n  m < (\\<Sum>i\\<le>m. p i * i)", "show False"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m. p i * i) = m\n  m < (\\<Sum>i\\<le>m. p i * i)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  i \\<le> m - k\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "ultimately"], ["proof (chain)\npicking this:\n  1 \\<le> i\n  i \\<le> m - k", "have \"1 \\<le> i \\<and> i \\<le> m - k\""], ["proof (prove)\nusing this:\n  1 \\<le> i\n  i \\<le> m - k\n\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> m - k", ".."], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> m - k\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "}"], ["proof (state)\nthis:\n  p (?i2 + 1) \\<noteq> 0 \\<Longrightarrow>\n  1 \\<le> ?i2 \\<and> ?i2 \\<le> m - k\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "note bounds = this"], ["proof (state)\nthis:\n  p (?i2 + 1) \\<noteq> 0 \\<Longrightarrow>\n  1 \\<le> ?i2 \\<and> ?i2 \\<le> m - k\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "show \"(\\<lambda>i. p (i + 1)) partitions m - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i + 1)) partitions m - k", "proof (rule partitionsI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       p (i + 1) \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> m - k\n 2. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       p (i + 1) \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> m - k\n 2. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "assume \"p (i + 1) \\<noteq> 0\""], ["proof (state)\nthis:\n  p (i + 1) \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       p (i + 1) \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> m - k\n 2. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "from bounds this"], ["proof (chain)\npicking this:\n  p (?i2 + 1) \\<noteq> 0 \\<Longrightarrow>\n  1 \\<le> ?i2 \\<and> ?i2 \\<le> m - k\n  p (i + 1) \\<noteq> 0", "show \"1 \\<le> i \\<and> i \\<le> m - k\""], ["proof (prove)\nusing this:\n  p (?i2 + 1) \\<noteq> 0 \\<Longrightarrow>\n  1 \\<le> ?i2 \\<and> ?i2 \\<le> m - k\n  p (i + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> m - k", "."], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have geq: \"\\<forall>i. p i * i \\<ge> p i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. p i \\<le> p i * i", "using \\<open>p 0 = 0\\<close> not_less"], ["proof (prove)\nusing this:\n  p 0 = 0\n  (\\<not> ?x < ?y) = (?y \\<le> ?x)\n\ngoal (1 subgoal):\n 1. \\<forall>i. p i \\<le> p i * i", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>i. p i \\<le> p i * i\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"(\\<Sum>i\\<le>m - k. p (i + 1) * i) = (\\<Sum>i\\<le>m. p (i + 1) * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = (\\<Sum>i\\<le>m. p (i + 1) * i)", "using bounds"], ["proof (prove)\nusing this:\n  p (?i2 + 1) \\<noteq> 0 \\<Longrightarrow>\n  1 \\<le> ?i2 \\<and> ?i2 \\<le> m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = (\\<Sum>i\\<le>m. p (i + 1) * i)", "by (auto intro: sum.mono_neutral_left)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p (i + 1) * i) = (\\<Sum>i\\<le>m. p (i + 1) * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p (i + 1) * i) = (\\<Sum>i\\<le>m. p (i + 1) * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"... = (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i + 1) * i) =\n    (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1))", "by (auto simp add: sum.reindex)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i + 1) * i) = (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i + 1) * i) = (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"... = (\\<Sum>i\\<le>Suc m. p i * (i - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1)) =\n    (\\<Sum>i\\<le>Suc m. p i * (i - 1))", "using \\<open>p 0 = 0\\<close>"], ["proof (prove)\nusing this:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1)) =\n    (\\<Sum>i\\<le>Suc m. p i * (i - 1))", "by (simp add: atMost_Suc_eq_insert_0 zero_notin_Suc_image)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1)) =\n  (\\<Sum>i\\<le>Suc m. p i * (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>Suc ` {..m}. p i * (i - 1)) =\n  (\\<Sum>i\\<le>Suc m. p i * (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"... = (\\<Sum>i\\<le>m. p i * (i - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>Suc m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * (i - 1))", "using p"], ["proof (prove)\nusing this:\n  p partitions m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>Suc m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * (i - 1))", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>Suc m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>Suc m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"... = (\\<Sum>i\\<le>m. p i * i - p i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * i - p i)", "by (simp add: diff_mult_distrib2)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * i - p i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * (i - 1)) = (\\<Sum>i\\<le>m. p i * i - p i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"... = (\\<Sum>i\\<le>m. p i * i) - (\\<Sum>i\\<le>m. p i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i - p i) = (\\<Sum>i\\<le>m. p i * i) - sum p {..m}", "using geq"], ["proof (prove)\nusing this:\n  \\<forall>i. p i \\<le> p i * i\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i - p i) = (\\<Sum>i\\<le>m. p i * i) - sum p {..m}", "by (simp only: sum_subtractf_nat)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i - p i) = (\\<Sum>i\\<le>m. p i * i) - sum p {..m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i - p i) = (\\<Sum>i\\<le>m. p i * i) - sum p {..m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "have \"... = m - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i) - sum p {..m} = m - k", "using sum p"], ["proof (prove)\nusing this:\n  sum p {..m} = k\n  p partitions m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * i) - sum p {..m} = m - k", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * i) - sum p {..m} = m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "show \"(\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p (i + 1) * i) = m - k\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>i. p (i + 1)) partitions m - k\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_increase1:\n  assumes partitions: \"p partitions m - k\"\n  assumes k: \"sum p {..m - k} = k\"\n  shows \"(\\<lambda>i. p (i - 1)) partitions m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i. p (i - 1)) partitions m", "proof (rule partitionsI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       p (i - 1) \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> m\n 2. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       p (i - 1) \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> m\n 2. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "assume \"p (i - 1) \\<noteq> 0\""], ["proof (state)\nthis:\n  p (i - 1) \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       p (i - 1) \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> m\n 2. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "from partitions this k"], ["proof (chain)\npicking this:\n  p partitions m - k\n  p (i - 1) \\<noteq> 0\n  sum p {..m - k} = k", "show \"1 \\<le> i \\<and> i \\<le> m\""], ["proof (prove)\nusing this:\n  p partitions m - k\n  p (i - 1) \\<noteq> 0\n  sum p {..m - k} = k\n\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> m", "by (cases k) (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "from k partitions"], ["proof (chain)\npicking this:\n  sum p {..m - k} = k\n  p partitions m - k", "have \"k \\<le> m\""], ["proof (prove)\nusing this:\n  sum p {..m - k} = k\n  p partitions m - k\n\ngoal (1 subgoal):\n 1. k \\<le> m", "using linear partitions_zero"], ["proof (prove)\nusing this:\n  sum p {..m - k} = k\n  p partitions m - k\n  ?x \\<le> ?y \\<or> ?y \\<le> ?x\n  (?p partitions 0) = (?p = (\\<lambda>i. 0))\n\ngoal (1 subgoal):\n 1. k \\<le> m", "by force"], ["proof (state)\nthis:\n  k \\<le> m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have eq_0: \"\\<forall>i>m - k. p i = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i>m - k. p i = 0", "using partitions"], ["proof (prove)\nusing this:\n  p partitions m - k\n\ngoal (1 subgoal):\n 1. \\<forall>i>m - k. p i = 0", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  \\<forall>i>m - k. p i = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "from partitions"], ["proof (chain)\npicking this:\n  p partitions m - k", "have s: \"(\\<Sum>i\\<le>m - k. p i * i) = m - k\""], ["proof (prove)\nusing this:\n  p partitions m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p i * i) = m - k", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p i * i) = m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have \"(\\<Sum>i\\<le>m. p (i - 1) * i) = (\\<Sum>i\\<le>Suc m. p (i - 1) * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = (\\<Sum>i\\<le>Suc m. p (i - 1) * i)", "using partitions k"], ["proof (prove)\nusing this:\n  p partitions m - k\n  sum p {..m - k} = k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = (\\<Sum>i\\<le>Suc m. p (i - 1) * i)", "by (cases k) (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i - 1) * i) = (\\<Sum>i\\<le>Suc m. p (i - 1) * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i - 1) * i) = (\\<Sum>i\\<le>Suc m. p (i - 1) * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have \"(\\<Sum>i\\<le>Suc m. p (i - 1) * i) = (\\<Sum>i\\<le>m. p i * (i + 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>Suc m. p (i - 1) * i) = (\\<Sum>i\\<le>m. p i * (i + 1))", "by (subst sum.atMost_Suc_shift) simp"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>Suc m. p (i - 1) * i) = (\\<Sum>i\\<le>m. p i * (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>Suc m. p (i - 1) * i) = (\\<Sum>i\\<le>m. p i * (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have \"... = (\\<Sum>i\\<le>m - k. p i * (i + 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * (i + 1)) = (\\<Sum>i\\<le>m - k. p i * (i + 1))", "using eq_0"], ["proof (prove)\nusing this:\n  \\<forall>i>m - k. p i = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p i * (i + 1)) = (\\<Sum>i\\<le>m - k. p i * (i + 1))", "by (auto intro: sum.mono_neutral_right)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * (i + 1)) = (\\<Sum>i\\<le>m - k. p i * (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p i * (i + 1)) = (\\<Sum>i\\<le>m - k. p i * (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have \"... = (\\<Sum>i\\<le>m - k. p i * i) + (\\<Sum>i\\<le>m - k. p i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p i * (i + 1)) =\n    (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k}", "by (simp add: sum.distrib)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p i * (i + 1)) =\n  (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p i * (i + 1)) =\n  (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have \"... = m - k + k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k} = m - k + k", "using s k"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m - k. p i * i) = m - k\n  sum p {..m - k} = k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k} = m - k + k", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k} = m - k + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p i * i) + sum p {..m - k} = m - k + k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "have \"... = m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m - k + k = m", "using \\<open>k \\<le> m\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> m\n\ngoal (1 subgoal):\n 1. m - k + k = m", "by simp"], ["proof (state)\nthis:\n  m - k + k = m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "show \"(\\<Sum>i\\<le>m. p (i - 1) * i) = m\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m. p (i - 1) * i) = m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1) * i) = m", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i - 1) * i) = m\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_decrease1:\n  assumes p: \"p partitions m\"\n  assumes sum: \"sum p {..m} = k\"\n  assumes \"p 1 = 0\"\n  shows \"sum (\\<lambda>i. p (i + 1)) {..m - k} = k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "from p"], ["proof (chain)\npicking this:\n  p partitions m", "have \"p 0 = 0\""], ["proof (prove)\nusing this:\n  p partitions m\n\ngoal (1 subgoal):\n 1. p 0 = 0", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "have \"sum (\\<lambda>i. p (i + 1)) {..m - k} = sum (\\<lambda>i. p (i + 1)) {..m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = (\\<Sum>i\\<le>m. p (i + 1))", "using partitions_decrease1[OF assms]"], ["proof (prove)\nusing this:\n  (\\<lambda>i. p (i + 1)) partitions m - k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = (\\<Sum>i\\<le>m. p (i + 1))", "by (auto intro: sum.mono_neutral_left elim!: partitionsE)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p (i + 1)) = (\\<Sum>i\\<le>m. p (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p (i + 1)) = (\\<Sum>i\\<le>m. p (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "have \"\\<dots> = sum (\\<lambda>i. p (i + 1)) {0..m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i + 1)) = (\\<Sum>i = 0..m. p (i + 1))", "by (simp add: atLeast0AtMost)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i + 1)) = (\\<Sum>i = 0..m. p (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i + 1)) = (\\<Sum>i = 0..m. p (i + 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "have \"\\<dots> = sum (\\<lambda>i. p i) {Suc 0.. Suc m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..m. p (i + 1)) = sum p {Suc 0..Suc m}", "by (simp only: One_nat_def add_Suc_right add_0_right sum.shift_bounds_cl_Suc_ivl)"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..m. p (i + 1)) = sum p {Suc 0..Suc m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..m. p (i + 1)) = sum p {Suc 0..Suc m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "have \"\\<dots> = sum (\\<lambda>i. p i) {.. Suc m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {Suc 0..Suc m} = sum p {..Suc m}", "using \\<open>p 0 = 0\\<close>"], ["proof (prove)\nusing this:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. sum p {Suc 0..Suc m} = sum p {..Suc m}", "by (simp add: atLeast0AtMost sum_shift_lb_Suc0_0)"], ["proof (state)\nthis:\n  sum p {Suc 0..Suc m} = sum p {..Suc m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "also"], ["proof (state)\nthis:\n  sum p {Suc 0..Suc m} = sum p {..Suc m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "have \"\\<dots> = sum (\\<lambda>i. p i) {.. m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {..Suc m} = sum p {..m}", "using p"], ["proof (prove)\nusing this:\n  p partitions m\n\ngoal (1 subgoal):\n 1. sum p {..Suc m} = sum p {..m}", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  sum p {..Suc m} = sum p {..m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "also"], ["proof (state)\nthis:\n  sum p {..Suc m} = sum p {..m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "have \"\\<dots> = k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {..m} = k", "using sum"], ["proof (prove)\nusing this:\n  sum p {..m} = k\n\ngoal (1 subgoal):\n 1. sum p {..m} = k", "by simp"], ["proof (state)\nthis:\n  sum p {..m} = k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m - k. p (i + 1)) = k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m - k. p (i + 1)) = k", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m - k. p (i + 1)) = k\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_increase1:\n  assumes partitions: \"p partitions m - k\"\n  assumes k: \"sum p {..m - k} = k\"\n  shows \"(\\<Sum>i\\<le>m. p (i - 1)) = k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "have \"p 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p 0 = 0", "using partitions"], ["proof (prove)\nusing this:\n  p partitions m - k\n\ngoal (1 subgoal):\n 1. p 0 = 0", "by (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "have \"(\\<Sum>i\\<le>m. p (i - 1)) = (\\<Sum>i\\<in>{1..m}. p (i - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = (\\<Sum>i = 1..m. p (i - 1))", "using \\<open>p 0 = 0\\<close>"], ["proof (prove)\nusing this:\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = (\\<Sum>i = 1..m. p (i - 1))", "by (auto intro: sum.mono_neutral_cong_right)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i - 1)) = (\\<Sum>i = 1..m. p (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i - 1)) = (\\<Sum>i = 1..m. p (i - 1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "have \"(\\<Sum>i\\<in>{1..m}. p (i - 1)) = (\\<Sum>i\\<le>m - 1. p i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "proof (cases m)"], ["proof (state)\ngoal (2 subgoals):\n 1. m = 0 \\<Longrightarrow> (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}\n 2. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "case 0"], ["proof (state)\nthis:\n  m = 0\n\ngoal (2 subgoals):\n 1. m = 0 \\<Longrightarrow> (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}\n 2. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "from this"], ["proof (chain)\npicking this:\n  m = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  m = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "using \\<open>p 0 = 0\\<close>"], ["proof (prove)\nusing this:\n  m = 0\n  p 0 = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "case (Suc m')"], ["proof (state)\nthis:\n  m = Suc m'\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "{"], ["proof (state)\nthis:\n  m = Suc m'\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "assume \"Suc 0 \\<le> x\" \"x \\<le> m\""], ["proof (state)\nthis:\n  Suc 0 \\<le> x\n  x \\<le> m\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "from this Suc"], ["proof (chain)\npicking this:\n  Suc 0 \\<le> x\n  x \\<le> m\n  m = Suc m'", "have \"x \\<in> Suc ` {..m'}\""], ["proof (prove)\nusing this:\n  Suc 0 \\<le> x\n  x \\<le> m\n  m = Suc m'\n\ngoal (1 subgoal):\n 1. x \\<in> Suc ` {..m'}", "by (auto intro!: image_eqI[where x=\"x - 1\"])"], ["proof (state)\nthis:\n  x \\<in> Suc ` {..m'}\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>Suc 0 \\<le> ?x2; ?x2 \\<le> m\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> Suc ` {..m'}\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       m = Suc nat \\<Longrightarrow>\n       (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "from this Suc"], ["proof (chain)\npicking this:\n  \\<lbrakk>Suc 0 \\<le> ?x2; ?x2 \\<le> m\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> Suc ` {..m'}\n  m = Suc m'", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>Suc 0 \\<le> ?x2; ?x2 \\<le> m\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> Suc ` {..m'}\n  m = Suc m'\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}", "by (intro sum.reindex_cong[of Suc]) auto"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..m. p (i - 1)) = sum p {..m - 1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "have \"(\\<Sum>i\\<le>m - 1. p i) = (\\<Sum>i\\<le>m. p i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "assume \"0 < p i\" \"i \\<le> m\""], ["proof (state)\nthis:\n  0 < p i\n  i \\<le> m\n\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "from assms this"], ["proof (chain)\npicking this:\n  p partitions m - k\n  sum p {..m - k} = k\n  0 < p i\n  i \\<le> m", "have \"i \\<le> m - 1\""], ["proof (prove)\nusing this:\n  p partitions m - k\n  sum p {..m - k} = k\n  0 < p i\n  i \\<le> m\n\ngoal (1 subgoal):\n 1. i \\<le> m - 1", "using \\<open>p 0 = 0\\<close> partitions_increase1"], ["proof (prove)\nusing this:\n  p partitions m - k\n  sum p {..m - k} = k\n  0 < p i\n  i \\<le> m\n  p 0 = 0\n  \\<lbrakk>?p partitions ?m - ?k; sum ?p {..?m - ?k} = ?k\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>i. ?p (i - 1)) partitions ?m\n\ngoal (1 subgoal):\n 1. i \\<le> m - 1", "by (cases k) (auto elim!: partitionsE)"], ["proof (state)\nthis:\n  i \\<le> m - 1\n\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>0 < p ?i2; ?i2 \\<le> m\\<rbrakk> \\<Longrightarrow> ?i2 \\<le> m - 1\n\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "from this"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < p ?i2; ?i2 \\<le> m\\<rbrakk> \\<Longrightarrow> ?i2 \\<le> m - 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < p ?i2; ?i2 \\<le> m\\<rbrakk> \\<Longrightarrow> ?i2 \\<le> m - 1\n\ngoal (1 subgoal):\n 1. sum p {..m - 1} = sum p {..m}", "by (auto intro: sum.mono_neutral_cong_left)"], ["proof (state)\nthis:\n  sum p {..m - 1} = sum p {..m}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sum p {..m - 1} = sum p {..m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "also"], ["proof (state)\nthis:\n  sum p {..m - 1} = sum p {..m}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "have \"... = (\\<Sum>i\\<le>m - k. p i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {..m} = sum p {..m - k}", "using partitions"], ["proof (prove)\nusing this:\n  p partitions m - k\n\ngoal (1 subgoal):\n 1. sum p {..m} = sum p {..m - k}", "by (auto intro: sum.mono_neutral_right elim!: partitionsE)"], ["proof (state)\nthis:\n  sum p {..m} = sum p {..m - k}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "also"], ["proof (state)\nthis:\n  sum p {..m} = sum p {..m - k}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "have \"... = k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum p {..m - k} = k", "using k"], ["proof (prove)\nusing this:\n  sum p {..m - k} = k\n\ngoal (1 subgoal):\n 1. sum p {..m - k} = k", "by auto"], ["proof (state)\nthis:\n  sum p {..m - k} = k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m. p (i - 1)) = k", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m. p (i - 1)) = k\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m. p (i - 1)) = k", "."], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. p (i - 1)) = k\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Number Partitions as Multisets on Natural Numbers\\<close>"], ["", "definition number_partition :: \"nat \\<Rightarrow> nat multiset \\<Rightarrow> bool\"\nwhere\n  \"number_partition n N = (sum_mset N = n \\<and> 0 \\<notin># N)\""], ["", "subsubsection \\<open>Relationship to Definition on Functions\\<close>"], ["", "lemma count_partitions_iff:\n  \"count N partitions n \\<longleftrightarrow> number_partition n N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (count N partitions n) = number_partition n N", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "assume \"count N partitions n\""], ["proof (state)\nthis:\n  count N partitions n\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "from this"], ["proof (chain)\npicking this:\n  count N partitions n", "have \"(\\<forall>i. count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n)\" \"(\\<Sum>i\\<le>n. count N i * i) = n\""], ["proof (prove)\nusing this:\n  count N partitions n\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n &&&\n    (\\<Sum>i\\<le>n. count N i * i) = n", "unfolding Number_Partition.partitions_def"], ["proof (prove)\nusing this:\n  (\\<forall>i.\n      count N i \\<noteq> 0 \\<longrightarrow>\n      1 \\<le> i \\<and> i \\<le> n) \\<and>\n  (\\<Sum>i\\<le>n. count N i * i) = n\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n &&&\n    (\\<Sum>i\\<le>n. count N i * i) = n", "by auto"], ["proof (state)\nthis:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "moreover"], ["proof (state)\nthis:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "from this"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n", "have \"set_mset N \\<subseteq> {..n}\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n\ngoal (1 subgoal):\n 1. set_mset N \\<subseteq> {..n}", "by auto"], ["proof (state)\nthis:\n  set_mset N \\<subseteq> {..n}\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "moreover"], ["proof (state)\nthis:\n  set_mset N \\<subseteq> {..n}\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "have \"finite {..n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {..n}", "by auto"], ["proof (state)\nthis:\n  finite {..n}\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n  set_mset N \\<subseteq> {..n}\n  finite {..n}", "have \"sum_mset N = n\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n  set_mset N \\<subseteq> {..n}\n  finite {..n}\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># N = n", "using sum_mset_sum_count sum_mset_eq_sum_on_supersets"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n  set_mset N \\<subseteq> {..n}\n  finite {..n}\n  \\<Sum>\\<^sub># ?M = (\\<Sum>i\\<in>set_mset ?M. count ?M i * i)\n  \\<lbrakk>finite ?A; set_mset ?M \\<subseteq> ?A\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>i\\<in>set_mset ?M. count ?M i * i) =\n                    (\\<Sum>i\\<in>?A. count ?M i * i)\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># N = n", "by presburger"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># N = n\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "moreover"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># N = n\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "have \"0 \\<notin># N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<notin># N", "using \\<open>\\<forall>i. count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     count N i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. 0 \\<notin># N", "by auto"], ["proof (state)\nthis:\n  0 \\<notin># N\n\ngoal (2 subgoals):\n 1. count N partitions n \\<Longrightarrow> number_partition n N\n 2. number_partition n N \\<Longrightarrow> count N partitions n", "ultimately"], ["proof (chain)\npicking this:\n  \\<Sum>\\<^sub># N = n\n  0 \\<notin># N", "show \"number_partition n N\""], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># N = n\n  0 \\<notin># N\n\ngoal (1 subgoal):\n 1. number_partition n N", "unfolding number_partition_def"], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># N = n\n  0 \\<notin># N\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># N = n \\<and> 0 \\<notin># N", "by auto"], ["proof (state)\nthis:\n  number_partition n N\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "assume \"number_partition n N\""], ["proof (state)\nthis:\n  number_partition n N\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "from this"], ["proof (chain)\npicking this:\n  number_partition n N", "have \"sum_mset N = n\" and \"0 \\<notin># N\""], ["proof (prove)\nusing this:\n  number_partition n N\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># N = n &&& 0 \\<notin># N", "unfolding number_partition_def"], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># N = n \\<and> 0 \\<notin># N\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># N = n &&& 0 \\<notin># N", "by auto"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># N = n\n  0 \\<notin># N\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "{"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># N = n\n  0 \\<notin># N\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "assume \"count N i \\<noteq> 0\""], ["proof (state)\nthis:\n  count N i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "have \"1 \\<le> i \\<and> i \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> i \\<and> i \\<le> n", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 \\<le> i\n 2. i \\<le> n", "from \\<open>0 \\<notin># N\\<close> \\<open>count N i \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  0 \\<notin># N\n  count N i \\<noteq> 0", "show \"1 \\<le> i\""], ["proof (prove)\nusing this:\n  0 \\<notin># N\n  count N i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> i", "using Suc_le_eq"], ["proof (prove)\nusing this:\n  0 \\<notin># N\n  count N i \\<noteq> 0\n  (Suc ?m \\<le> ?n) = (?m < ?n)\n\ngoal (1 subgoal):\n 1. 1 \\<le> i", "by auto"], ["proof (state)\nthis:\n  1 \\<le> i\n\ngoal (1 subgoal):\n 1. i \\<le> n", "from \\<open>sum_mset N = n\\<close> \\<open>count N i \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  \\<Sum>\\<^sub># N = n\n  count N i \\<noteq> 0", "show \"i \\<le> n\""], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># N = n\n  count N i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i \\<le> n", "using multi_member_split"], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># N = n\n  count N i \\<noteq> 0\n  ?x \\<in># ?M \\<Longrightarrow> \\<exists>A. ?M = add_mset ?x A\n\ngoal (1 subgoal):\n 1. i \\<le> n", "by fastforce"], ["proof (state)\nthis:\n  i \\<le> n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "}"], ["proof (state)\nthis:\n  count N ?i2 \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i2 \\<and> ?i2 \\<le> n\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "moreover"], ["proof (state)\nthis:\n  count N ?i2 \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i2 \\<and> ?i2 \\<le> n\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "from \\<open>sum_mset N = n\\<close>"], ["proof (chain)\npicking this:\n  \\<Sum>\\<^sub># N = n", "have \"(\\<Sum>i\\<le>n. count N i * i) = n\""], ["proof (prove)\nusing this:\n  \\<Sum>\\<^sub># N = n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. count N i * i) = n", "by (metis atMost_iff calculation finite_atMost not_in_iff subsetI sum_mset_eq_sum_on_supersets sum_mset_sum_count)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. count N i * i) = n\n\ngoal (1 subgoal):\n 1. number_partition n N \\<Longrightarrow> count N partitions n", "ultimately"], ["proof (chain)\npicking this:\n  count N ?i2 \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i2 \\<and> ?i2 \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n", "show \"count N partitions n\""], ["proof (prove)\nusing this:\n  count N ?i2 \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i2 \\<and> ?i2 \\<le> n\n  (\\<Sum>i\\<le>n. count N i * i) = n\n\ngoal (1 subgoal):\n 1. count N partitions n", "by (rule partitionsI) auto"], ["proof (state)\nthis:\n  count N partitions n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma partitions_iff_Abs_multiset:\n  \"p partitions n \\<longleftrightarrow> finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p partitions n) =\n    (finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "assume \"p partitions n\""], ["proof (state)\nthis:\n  p partitions n\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from this"], ["proof (chain)\npicking this:\n  p partitions n", "have bounds: \"(\\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n)\"\n    and sum: \"(\\<Sum>i\\<le>n. p i * i) = n\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n &&&\n    (\\<Sum>i\\<le>n. p i * i) = n", "unfolding partitions_def"], ["proof (prove)\nusing this:\n  (\\<forall>i.\n      p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n) \\<and>\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n &&&\n    (\\<Sum>i\\<le>n. p i * i) = n", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from \\<open>p partitions n\\<close>"], ["proof (chain)\npicking this:\n  p partitions n", "have \"p \\<in> multiset\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. p \\<in> multiset", "by (rule partitions_imp_multiset)"], ["proof (state)\nthis:\n  p \\<in> multiset\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from \\<open>p partitions n\\<close>"], ["proof (chain)\npicking this:\n  p partitions n", "have \"finite {x. 0 < p x}\""], ["proof (prove)\nusing this:\n  p partitions n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x}", "by (rule partitions_imp_finite_elements)"], ["proof (state)\nthis:\n  finite {x. 0 < p x}\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "moreover"], ["proof (state)\nthis:\n  finite {x. 0 < p x}\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from \\<open>p \\<in> multiset\\<close> bounds"], ["proof (chain)\npicking this:\n  p \\<in> multiset\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n", "have \"\\<not> 0 \\<in># Abs_multiset p\""], ["proof (prove)\nusing this:\n  p \\<in> multiset\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. 0 \\<notin># Abs_multiset p", "using count_eq_zero_iff"], ["proof (prove)\nusing this:\n  p \\<in> multiset\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n  (count ?M ?x = 0) = (?x \\<notin># ?M)\n\ngoal (1 subgoal):\n 1. 0 \\<notin># Abs_multiset p", "by force"], ["proof (state)\nthis:\n  0 \\<notin># Abs_multiset p\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "moreover"], ["proof (state)\nthis:\n  0 \\<notin># Abs_multiset p\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from \\<open>p \\<in> multiset\\<close> this sum"], ["proof (chain)\npicking this:\n  p \\<in> multiset\n  0 \\<notin># Abs_multiset p\n  (\\<Sum>i\\<le>n. p i * i) = n", "have \"sum_mset (Abs_multiset p) = n\""], ["proof (prove)\nusing this:\n  p \\<in> multiset\n  0 \\<notin># Abs_multiset p\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (Abs_multiset p) = n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<in> multiset; 0 \\<notin># Abs_multiset p;\n     (\\<Sum>i\\<le>n. p i * i) = n\\<rbrakk>\n    \\<Longrightarrow> \\<Sum>\\<^sub># (Abs_multiset p) = n", "have \"(\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = (\\<Sum>i\\<le>n. p i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = (\\<Sum>i\\<le>n. p i * i)", "using bounds"], ["proof (prove)\nusing this:\n  \\<forall>i. p i \\<noteq> 0 \\<longrightarrow> 1 \\<le> i \\<and> i \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = (\\<Sum>i\\<le>n. p i * i)", "by (auto intro: sum.mono_neutral_cong_left)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = (\\<Sum>i\\<le>n. p i * i)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<in> multiset; 0 \\<notin># Abs_multiset p;\n     (\\<Sum>i\\<le>n. p i * i) = n\\<rbrakk>\n    \\<Longrightarrow> \\<Sum>\\<^sub># (Abs_multiset p) = n", "from \\<open>p \\<in> multiset\\<close> this sum"], ["proof (chain)\npicking this:\n  p \\<in> multiset\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = (\\<Sum>i\\<le>n. p i * i)\n  (\\<Sum>i\\<le>n. p i * i) = n", "show \"sum_mset (Abs_multiset p) = n\""], ["proof (prove)\nusing this:\n  p \\<in> multiset\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = (\\<Sum>i\\<le>n. p i * i)\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. \\<Sum>\\<^sub># (Abs_multiset p) = n", "by (simp add: sum_mset_sum_count set_mset_Abs_multiset)"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (Abs_multiset p) = n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Sum>\\<^sub># (Abs_multiset p) = n\n\ngoal (2 subgoals):\n 1. p partitions n \\<Longrightarrow>\n    finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n 2. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "ultimately"], ["proof (chain)\npicking this:\n  finite {x. 0 < p x}\n  0 \\<notin># Abs_multiset p\n  \\<Sum>\\<^sub># (Abs_multiset p) = n", "show \"finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\""], ["proof (prove)\nusing this:\n  finite {x. 0 < p x}\n  0 \\<notin># Abs_multiset p\n  \\<Sum>\\<^sub># (Abs_multiset p) = n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)", "unfolding number_partition_def"], ["proof (prove)\nusing this:\n  finite {x. 0 < p x}\n  0 \\<notin># Abs_multiset p\n  \\<Sum>\\<^sub># (Abs_multiset p) = n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    \\<Sum>\\<^sub># (Abs_multiset p) = n \\<and> 0 \\<notin># Abs_multiset p", "by auto"], ["proof (state)\nthis:\n  finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "assume \"finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\""], ["proof (state)\nthis:\n  finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from this"], ["proof (chain)\npicking this:\n  finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)", "have \"finite {x. 0 < p x}\" \"0 \\<notin># Abs_multiset p\" \"sum_mset (Abs_multiset p) = n\""], ["proof (prove)\nusing this:\n  finite {x. 0 < p x} \\<and> number_partition n (Abs_multiset p)\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} &&&\n    0 \\<notin># Abs_multiset p &&& \\<Sum>\\<^sub># (Abs_multiset p) = n", "unfolding number_partition_def"], ["proof (prove)\nusing this:\n  finite {x. 0 < p x} \\<and>\n  \\<Sum>\\<^sub># (Abs_multiset p) = n \\<and> 0 \\<notin># Abs_multiset p\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} &&&\n    0 \\<notin># Abs_multiset p &&& \\<Sum>\\<^sub># (Abs_multiset p) = n", "by auto"], ["proof (state)\nthis:\n  finite {x. 0 < p x}\n  0 \\<notin># Abs_multiset p\n  \\<Sum>\\<^sub># (Abs_multiset p) = n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from \\<open>finite {x. 0 < p x}\\<close>"], ["proof (chain)\npicking this:\n  finite {x. 0 < p x}", "have \"p \\<in> multiset\""], ["proof (prove)\nusing this:\n  finite {x. 0 < p x}\n\ngoal (1 subgoal):\n 1. p \\<in> multiset", "by (simp add: multiset_def)"], ["proof (state)\nthis:\n  p \\<in> multiset\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "from \\<open>p \\<in> multiset\\<close>"], ["proof (chain)\npicking this:\n  p \\<in> multiset", "have \"(\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n\""], ["proof (prove)\nusing this:\n  p \\<in> multiset\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n", "using \\<open> sum_mset (Abs_multiset p) = n\\<close>"], ["proof (prove)\nusing this:\n  p \\<in> multiset\n  \\<Sum>\\<^sub># (Abs_multiset p) = n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n", "by (simp add: sum_mset_sum_count set_mset_Abs_multiset)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "have bounds: \"\\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i \\<and> i \\<le> n", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i\n 2. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> i \\<le> n", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i\n 2. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> i \\<le> n", "assume \"p i \\<noteq> 0\""], ["proof (state)\nthis:\n  p i \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i\n 2. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> i \\<le> n", "from \\<open>\\<not> 0 \\<in># Abs_multiset p\\<close> \\<open>p \\<in> multiset\\<close>"], ["proof (chain)\npicking this:\n  0 \\<notin># Abs_multiset p\n  p \\<in> multiset", "have \"p 0 = 0\""], ["proof (prove)\nusing this:\n  0 \\<notin># Abs_multiset p\n  p \\<in> multiset\n\ngoal (1 subgoal):\n 1. p 0 = 0", "using count_inI"], ["proof (prove)\nusing this:\n  0 \\<notin># Abs_multiset p\n  p \\<in> multiset\n  (count ?M ?x = 0 \\<Longrightarrow> False) \\<Longrightarrow> ?x \\<in># ?M\n\ngoal (1 subgoal):\n 1. p 0 = 0", "by force"], ["proof (state)\nthis:\n  p 0 = 0\n\ngoal (2 subgoals):\n 1. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> i\n 2. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> i \\<le> n", "from this \\<open>p i \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  p 0 = 0\n  p i \\<noteq> 0", "show \"1 \\<le> i\""], ["proof (prove)\nusing this:\n  p 0 = 0\n  p i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> i", "by (metis One_nat_def leI less_Suc0)"], ["proof (state)\nthis:\n  1 \\<le> i\n\ngoal (1 subgoal):\n 1. \\<And>i. p i \\<noteq> 0 \\<Longrightarrow> i \\<le> n", "show \"i \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<le> n", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "assume \"\\<not> i \\<le> n\""], ["proof (state)\nthis:\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "from this"], ["proof (chain)\npicking this:\n  \\<not> i \\<le> n", "have \"i > n\""], ["proof (prove)\nusing this:\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. n < i", "using le_less_linear"], ["proof (prove)\nusing this:\n  \\<not> i \\<le> n\n  ?x \\<le> ?y \\<or> ?y < ?x\n\ngoal (1 subgoal):\n 1. n < i", "by blast"], ["proof (state)\nthis:\n  n < i\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "from this \\<open>p i \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  n < i\n  p i \\<noteq> 0", "have \"p i * i > n\""], ["proof (prove)\nusing this:\n  n < i\n  p i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. n < p i * i", "by (auto simp add: less_le_trans)"], ["proof (state)\nthis:\n  n < p i * i\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "from \\<open>p i \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  p i \\<noteq> 0", "have \"(\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)\""], ["proof (prove)\nusing this:\n  p i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) =\n    p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)", "using \\<open>finite {x. 0 < p x}\\<close>"], ["proof (prove)\nusing this:\n  p i \\<noteq> 0\n  finite {x. 0 < p x}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) =\n    p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)", "by (subst sum.insert_remove[symmetric]) (auto simp add: insert_absorb)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) =\n  p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) =\n  p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "from \\<open>p i * i > n\\<close>"], ["proof (chain)\npicking this:\n  n < p i * i", "have \"\\<dots> > n\""], ["proof (prove)\nusing this:\n  n < p i * i\n\ngoal (1 subgoal):\n 1. n < p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)", "by auto"], ["proof (state)\nthis:\n  n < p i * i + (\\<Sum>i\\<in>{x. 0 < p x} - {i}. p i * i)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  n < (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)", "show False"], ["proof (prove)\nusing this:\n  n < (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)\n\ngoal (1 subgoal):\n 1. False", "using \\<open>(\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n\\<close>"], ["proof (prove)\nusing this:\n  n < (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  i \\<le> n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "moreover"], ["proof (state)\nthis:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "have \"(\\<Sum>i\\<le>n. p i * i) = n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n", "have \"(\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)", "using bounds"], ["proof (prove)\nusing this:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)", "by (auto intro: sum.mono_neutral_cong_right)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n", "from this"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n", "using \\<open>(\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n\\<close>"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>n. p i * i) = (\\<Sum>i\\<in>{x. 0 < p x}. p i * i)\n  (\\<Sum>i\\<in>{x. 0 < p x}. p i * i) = n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n. p i * i) = n", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. finite {x. 0 < p x} \\<and>\n    number_partition n (Abs_multiset p) \\<Longrightarrow>\n    p partitions n", "ultimately"], ["proof (chain)\npicking this:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n  (\\<Sum>i\\<le>n. p i * i) = n", "show \"p partitions n\""], ["proof (prove)\nusing this:\n  p ?i \\<noteq> 0 \\<Longrightarrow> 1 \\<le> ?i \\<and> ?i \\<le> n\n  (\\<Sum>i\\<le>n. p i * i) = n\n\ngoal (1 subgoal):\n 1. p partitions n", "by (auto intro: partitionsI)"], ["proof (state)\nthis:\n  p partitions n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma size_nat_multiset_eq:\n  fixes N :: \"nat multiset\"\n  assumes \"number_partition n N\"\n  shows \"size N = sum (count N) {..n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "have \"set_mset N \\<subseteq> {..sum_mset N}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_mset N \\<subseteq> {..\\<Sum>\\<^sub># N}", "by (auto dest: multi_member_split)"], ["proof (state)\nthis:\n  set_mset N \\<subseteq> {..\\<Sum>\\<^sub># N}\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "have \"size N = sum (count N) (set_mset N)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size N = sum (count N) (set_mset N)", "by (rule size_multiset_overloaded_eq)"], ["proof (state)\nthis:\n  size N = sum (count N) (set_mset N)\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "also"], ["proof (state)\nthis:\n  size N = sum (count N) (set_mset N)\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "have \"\\<dots> = sum (count N) {..sum_mset N}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (count N) (set_mset N) = sum (count N) {..\\<Sum>\\<^sub># N}", "using \\<open>set_mset N \\<subseteq> {..sum_mset N}\\<close>"], ["proof (prove)\nusing this:\n  set_mset N \\<subseteq> {..\\<Sum>\\<^sub># N}\n\ngoal (1 subgoal):\n 1. sum (count N) (set_mset N) = sum (count N) {..\\<Sum>\\<^sub># N}", "by (auto intro: sum.mono_neutral_cong_left count_inI)"], ["proof (state)\nthis:\n  sum (count N) (set_mset N) = sum (count N) {..\\<Sum>\\<^sub># N}\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "finally"], ["proof (chain)\npicking this:\n  size N = sum (count N) {..\\<Sum>\\<^sub># N}", "show ?thesis"], ["proof (prove)\nusing this:\n  size N = sum (count N) {..\\<Sum>\\<^sub># N}\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "using \\<open>number_partition n N\\<close>"], ["proof (prove)\nusing this:\n  size N = sum (count N) {..\\<Sum>\\<^sub># N}\n  number_partition n N\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "unfolding number_partition_def"], ["proof (prove)\nusing this:\n  size N = sum (count N) {..\\<Sum>\\<^sub># N}\n  \\<Sum>\\<^sub># N = n \\<and> 0 \\<notin># N\n\ngoal (1 subgoal):\n 1. size N = sum (count N) {..n}", "by auto"], ["proof (state)\nthis:\n  size N = sum (count N) {..n}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}