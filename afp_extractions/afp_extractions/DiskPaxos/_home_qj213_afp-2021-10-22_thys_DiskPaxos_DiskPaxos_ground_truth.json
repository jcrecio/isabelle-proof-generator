{"file_name": "/home/qj213/afp-2021-10-22/thys/DiskPaxos/DiskPaxos.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/DiskPaxos", "problem_names": ["theorem R1:\n  \"\\<lbrakk> HInit s; is = s2is s\\<rbrakk> \\<Longrightarrow> IInit is\"", "theorem R2b:\n  assumes inv: \"HInv s\"\n  and inv': \"HInv s'\"\n  and nxt: \"HNext s s'\"\n  and srel: \"is=s2is s \\<and> is'=s2is s'\"\n  shows \"(\\<exists>p. IFail is is' p \\<or> IChoose is is' p) \\<or> is = is'\""], "translations": [["", "theorem R1:\n  \"\\<lbrakk> HInit s; is = s2is s\\<rbrakk> \\<Longrightarrow> IInit is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>HInit s; is = s2is s\\<rbrakk> \\<Longrightarrow> IInit is", "by(auto simp add: HInit_def IInit_def s2is_def Init_def)"], ["", "theorem R2b:\n  assumes inv: \"HInv s\"\n  and inv': \"HInv s'\"\n  and nxt: \"HNext s s'\"\n  and srel: \"is=s2is s \\<and> is'=s2is s'\"\n  shows \"(\\<exists>p. IFail is is' p \\<or> IChoose is is' p) \\<or> is = is'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>p. IFail is is' p \\<or> IChoose is is' p) \\<or> is = is'", "proof(auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "assume chg_vars: \"is\\<noteq>is'\""], ["proof (state)\nthis:\n  is \\<noteq> is'\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "with srel"], ["proof (chain)\npicking this:\n  is = s2is s \\<and> is' = s2is s'\n  is \\<noteq> is'", "have s_change: \"   inpt s \\<noteq> inpt s' \\<or> outpt s \\<noteq> outpt s' \n                  \\<or> chosen s \\<noteq> chosen s' \\<or> allInput s \\<noteq> allInput s'\""], ["proof (prove)\nusing this:\n  is = s2is s \\<and> is' = s2is s'\n  is \\<noteq> is'\n\ngoal (1 subgoal):\n 1. inpt s \\<noteq> inpt s' \\<or>\n    outpt s \\<noteq> outpt s' \\<or>\n    chosen s \\<noteq> chosen s' \\<or> allInput s \\<noteq> allInput s'", "by(auto simp add: s2is_def)"], ["proof (state)\nthis:\n  inpt s \\<noteq> inpt s' \\<or>\n  outpt s \\<noteq> outpt s' \\<or>\n  chosen s \\<noteq> chosen s' \\<or> allInput s \\<noteq> allInput s'\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "from inv"], ["proof (chain)\npicking this:\n  HInv s", "have inv2c5: \"\\<forall>p.   inpt s p \\<in> allInput s \n                    \\<and> (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\""], ["proof (prove)\nusing this:\n  HInv s\n\ngoal (1 subgoal):\n 1. \\<forall>p.\n       inpt s p \\<in> allInput s \\<and>\n       (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)", "by(auto simp add: HInv_def HInv2_def Inv2c_def Inv2c_inner_def)"], ["proof (state)\nthis:\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "from nxt s_change inv2c5"], ["proof (chain)\npicking this:\n  HNext s s'\n  inpt s \\<noteq> inpt s' \\<or>\n  outpt s \\<noteq> outpt s' \\<or>\n  chosen s \\<noteq> chosen s' \\<or> allInput s \\<noteq> allInput s'\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)", "have \"inpt s' \\<noteq> inpt s \\<or> outpt s' \\<noteq> outpt s\""], ["proof (prove)\nusing this:\n  HNext s s'\n  inpt s \\<noteq> inpt s' \\<or>\n  outpt s \\<noteq> outpt s' \\<or>\n  chosen s \\<noteq> chosen s' \\<or> allInput s \\<noteq> allInput s'\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n\ngoal (1 subgoal):\n 1. inpt s' \\<noteq> inpt s \\<or> outpt s' \\<noteq> outpt s", "by(auto simp add: HNext_def Next_def HNextPart_def)"], ["proof (state)\nthis:\n  inpt s' \\<noteq> inpt s \\<or> outpt s' \\<noteq> outpt s\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "with nxt"], ["proof (chain)\npicking this:\n  HNext s s'\n  inpt s' \\<noteq> inpt s \\<or> outpt s' \\<noteq> outpt s", "have \"\\<exists>p. Fail s s' p \\<or> EndPhase2 s s' p\""], ["proof (prove)\nusing this:\n  HNext s s'\n  inpt s' \\<noteq> inpt s \\<or> outpt s' \\<noteq> outpt s\n\ngoal (1 subgoal):\n 1. \\<exists>p. Fail s s' p \\<or> EndPhase2 s s' p", "by(auto simp add: HNext_def Next_def \n      StartBallot_def Phase0Read_def Phase1or2Write_def \n      Phase1or2Read_def Phase1or2ReadThen_def Phase1or2ReadElse_def \n      EndPhase1or2_def EndPhase1_def EndPhase0_def)"], ["proof (state)\nthis:\n  \\<exists>p. Fail s s' p \\<or> EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "then"], ["proof (chain)\npicking this:\n  \\<exists>p. Fail s s' p \\<or> EndPhase2 s s' p", "obtain p where fail_or_endphase2: \"Fail s s' p \\<or> EndPhase2 s s' p\""], ["proof (prove)\nusing this:\n  \\<exists>p. Fail s s' p \\<or> EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        Fail s s' p \\<or> EndPhase2 s s' p \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Fail s s' p \\<or> EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "from inv"], ["proof (chain)\npicking this:\n  HInv s", "have inv2c: \"Inv2c_inner s p\""], ["proof (prove)\nusing this:\n  HInv s\n\ngoal (1 subgoal):\n 1. Inv2c_inner s p", "by(auto simp add: HInv_def HInv2_def Inv2c_def)"], ["proof (state)\nthis:\n  Inv2c_inner s p\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "from fail_or_endphase2"], ["proof (chain)\npicking this:\n  Fail s s' p \\<or> EndPhase2 s s' p", "have \"IFail is is' p \\<or> IChoose is is' p\""], ["proof (prove)\nusing this:\n  Fail s s' p \\<or> EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. IFail is is' p \\<or> IChoose is is' p", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. Fail s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p\n 2. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "assume fail: \"Fail s s' p \""], ["proof (state)\nthis:\n  Fail s s' p\n\ngoal (2 subgoals):\n 1. Fail s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p\n 2. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "hence phase': \"phase s' p = 0\"\n      and  outpt: \"outpt s' = (outpt s) (p:= NotAnInput)\""], ["proof (prove)\nusing this:\n  Fail s s' p\n\ngoal (1 subgoal):\n 1. phase s' p = 0 &&& outpt s' = (outpt s)(p := NotAnInput)", "by(auto simp add: Fail_def)"], ["proof (state)\nthis:\n  phase s' p = 0\n  outpt s' = (outpt s)(p := NotAnInput)\n\ngoal (2 subgoals):\n 1. Fail s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p\n 2. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "have \"IFail is is' p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. IFail is is' p", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. IFail is is' p", "from fail srel"], ["proof (chain)\npicking this:\n  Fail s s' p\n  is = s2is s \\<and> is' = s2is s'", "have \"ioutput is' = (ioutput is) (p:= NotAnInput)\""], ["proof (prove)\nusing this:\n  Fail s s' p\n  is = s2is s \\<and> is' = s2is s'\n\ngoal (1 subgoal):\n 1. ioutput is' = (ioutput is)(p := NotAnInput)", "by(auto simp add: Fail_def s2is_def)"], ["proof (state)\nthis:\n  ioutput is' = (ioutput is)(p := NotAnInput)\n\ngoal (1 subgoal):\n 1. IFail is is' p", "moreover"], ["proof (state)\nthis:\n  ioutput is' = (ioutput is)(p := NotAnInput)\n\ngoal (1 subgoal):\n 1. IFail is is' p", "from nxt"], ["proof (chain)\npicking this:\n  HNext s s'", "have all_nxt: \"allInput s'= allInput s \\<union> (range (inpt s'))\""], ["proof (prove)\nusing this:\n  HNext s s'\n\ngoal (1 subgoal):\n 1. allInput s' = allInput s \\<union> range (inpt s')", "by(auto simp add: HNext_def HNextPart_def)"], ["proof (state)\nthis:\n  allInput s' = allInput s \\<union> range (inpt s')\n\ngoal (1 subgoal):\n 1. IFail is is' p", "from fail srel"], ["proof (chain)\npicking this:\n  Fail s s' p\n  is = s2is s \\<and> is' = s2is s'", "have \"\\<exists>ip \\<in> Inputs.  iinput is' = (iinput is)(p:= ip)\""], ["proof (prove)\nusing this:\n  Fail s s' p\n  is = s2is s \\<and> is' = s2is s'\n\ngoal (1 subgoal):\n 1. \\<exists>ip\\<in>Inputs. iinput is' = (iinput is)(p := ip)", "by(auto simp add: Fail_def s2is_def)"], ["proof (state)\nthis:\n  \\<exists>ip\\<in>Inputs. iinput is' = (iinput is)(p := ip)\n\ngoal (1 subgoal):\n 1. IFail is is' p", "then"], ["proof (chain)\npicking this:\n  \\<exists>ip\\<in>Inputs. iinput is' = (iinput is)(p := ip)", "obtain ip where ip_Input: \"ip\\<in>Inputs\" and \"iinput is' = (iinput is)(p:= ip)\""], ["proof (prove)\nusing this:\n  \\<exists>ip\\<in>Inputs. iinput is' = (iinput is)(p := ip)\n\ngoal (1 subgoal):\n 1. (\\<And>ip.\n        \\<lbrakk>ip \\<in> Inputs; iinput is' = (iinput is)(p := ip)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ip \\<in> Inputs\n  iinput is' = (iinput is)(p := ip)\n\ngoal (1 subgoal):\n 1. IFail is is' p", "with inv2c5 srel all_nxt"], ["proof (chain)\npicking this:\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n  is = s2is s \\<and> is' = s2is s'\n  allInput s' = allInput s \\<union> range (inpt s')\n  ip \\<in> Inputs\n  iinput is' = (iinput is)(p := ip)", "have \"  iinput is' = (iinput is)(p:= ip)\n        \\<and> iallInput is' = iallInput is \\<union> {ip}\""], ["proof (prove)\nusing this:\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n  is = s2is s \\<and> is' = s2is s'\n  allInput s' = allInput s \\<union> range (inpt s')\n  ip \\<in> Inputs\n  iinput is' = (iinput is)(p := ip)\n\ngoal (1 subgoal):\n 1. iinput is' = (iinput is)(p := ip) \\<and>\n    iallInput is' = iallInput is \\<union> {ip}", "by(auto simp add: s2is_def)"], ["proof (state)\nthis:\n  iinput is' = (iinput is)(p := ip) \\<and>\n  iallInput is' = iallInput is \\<union> {ip}\n\ngoal (1 subgoal):\n 1. IFail is is' p", "moreover"], ["proof (state)\nthis:\n  iinput is' = (iinput is)(p := ip) \\<and>\n  iallInput is' = iallInput is \\<union> {ip}\n\ngoal (1 subgoal):\n 1. IFail is is' p", "from outpt srel nxt inv2c"], ["proof (chain)\npicking this:\n  outpt s' = (outpt s)(p := NotAnInput)\n  is = s2is s \\<and> is' = s2is s'\n  HNext s s'\n  Inv2c_inner s p", "have \"ichosen is' = ichosen is\""], ["proof (prove)\nusing this:\n  outpt s' = (outpt s)(p := NotAnInput)\n  is = s2is s \\<and> is' = s2is s'\n  HNext s s'\n  Inv2c_inner s p\n\ngoal (1 subgoal):\n 1. ichosen is' = ichosen is", "by(auto simp add: HNext_def HNextPart_def s2is_def Inv2c_inner_def)"], ["proof (state)\nthis:\n  ichosen is' = ichosen is\n\ngoal (1 subgoal):\n 1. IFail is is' p", "ultimately"], ["proof (chain)\npicking this:\n  ioutput is' = (ioutput is)(p := NotAnInput)\n  iinput is' = (iinput is)(p := ip) \\<and>\n  iallInput is' = iallInput is \\<union> {ip}\n  ichosen is' = ichosen is", "show ?thesis"], ["proof (prove)\nusing this:\n  ioutput is' = (ioutput is)(p := NotAnInput)\n  iinput is' = (iinput is)(p := ip) \\<and>\n  iallInput is' = iallInput is \\<union> {ip}\n  ichosen is' = ichosen is\n\ngoal (1 subgoal):\n 1. IFail is is' p", "using ip_Input"], ["proof (prove)\nusing this:\n  ioutput is' = (ioutput is)(p := NotAnInput)\n  iinput is' = (iinput is)(p := ip) \\<and>\n  iallInput is' = iallInput is \\<union> {ip}\n  ichosen is' = ichosen is\n  ip \\<in> Inputs\n\ngoal (1 subgoal):\n 1. IFail is is' p", "by(auto simp add: IFail_def)"], ["proof (state)\nthis:\n  IFail is is' p\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  IFail is is' p\n\ngoal (2 subgoals):\n 1. Fail s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p\n 2. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "thus ?thesis"], ["proof (prove)\nusing this:\n  IFail is is' p\n\ngoal (1 subgoal):\n 1. IFail is is' p \\<or> IChoose is is' p", "by auto"], ["proof (state)\nthis:\n  IFail is is' p \\<or> IChoose is is' p\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "assume endphase2: \"EndPhase2 s s' p\""], ["proof (state)\nthis:\n  EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "from endphase2"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p", "have \"phase s p =2\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. phase s p = 2", "by(auto simp add: EndPhase2_def)"], ["proof (state)\nthis:\n  phase s p = 2\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "with inv2c Ballot_nzero"], ["proof (chain)\npicking this:\n  Inv2c_inner s p\n  \\<forall>p. 0 \\<notin> Ballot p\n  phase s p = 2", "have bal_dblk_nzero: \"bal(dblock s p)\\<noteq> 0\""], ["proof (prove)\nusing this:\n  Inv2c_inner s p\n  \\<forall>p. 0 \\<notin> Ballot p\n  phase s p = 2\n\ngoal (1 subgoal):\n 1. bal (dblock s p) \\<noteq> 0", "by(auto simp add: Inv2c_inner_def)"], ["proof (state)\nthis:\n  bal (dblock s p) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "moreover"], ["proof (state)\nthis:\n  bal (dblock s p) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "from inv"], ["proof (chain)\npicking this:\n  HInv s", "have inv2a_dblock: \"Inv2a_innermost s p (dblock s p)\""], ["proof (prove)\nusing this:\n  HInv s\n\ngoal (1 subgoal):\n 1. Inv2a_innermost s p (dblock s p)", "by(auto simp add: HInv_def HInv2_def Inv2a_def Inv2a_inner_def blocksOf_def)"], ["proof (state)\nthis:\n  Inv2a_innermost s p (dblock s p)\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "ultimately"], ["proof (chain)\npicking this:\n  bal (dblock s p) \\<noteq> 0\n  Inv2a_innermost s p (dblock s p)", "have p22: \"inp (dblock s p) \\<in> allInput s\""], ["proof (prove)\nusing this:\n  bal (dblock s p) \\<noteq> 0\n  Inv2a_innermost s p (dblock s p)\n\ngoal (1 subgoal):\n 1. inp (dblock s p) \\<in> allInput s", "by(auto simp add: Inv2a_innermost_def)"], ["proof (state)\nthis:\n  inp (dblock s p) \\<in> allInput s\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "from inv"], ["proof (chain)\npicking this:\n  HInv s", "have \"allInput s \\<subseteq> Inputs\""], ["proof (prove)\nusing this:\n  HInv s\n\ngoal (1 subgoal):\n 1. allInput s \\<subseteq> Inputs", "by(auto simp add: HInv_def HInv1_def)"], ["proof (state)\nthis:\n  allInput s \\<subseteq> Inputs\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "with p22 NotAnInput endphase2"], ["proof (chain)\npicking this:\n  inp (dblock s p) \\<in> allInput s\n  NotAnInput \\<notin> Inputs\n  EndPhase2 s s' p\n  allInput s \\<subseteq> Inputs", "have outpt_nni: \"outpt s' p \\<noteq> NotAnInput\""], ["proof (prove)\nusing this:\n  inp (dblock s p) \\<in> allInput s\n  NotAnInput \\<notin> Inputs\n  EndPhase2 s s' p\n  allInput s \\<subseteq> Inputs\n\ngoal (1 subgoal):\n 1. outpt s' p \\<noteq> NotAnInput", "by(auto simp add: EndPhase2_def)"], ["proof (state)\nthis:\n  outpt s' p \\<noteq> NotAnInput\n\ngoal (1 subgoal):\n 1. EndPhase2 s s' p \\<Longrightarrow> IFail is is' p \\<or> IChoose is is' p", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. IFail is is' p \\<or> IChoose is is' p", "proof(cases \"chosen s = NotAnInput\")"], ["proof (state)\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "case True"], ["proof (state)\nthis:\n  chosen s = NotAnInput\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "with inv2c5"], ["proof (chain)\npicking this:\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n  chosen s = NotAnInput", "have p31: \"\\<forall>q. outpt s q = NotAnInput\""], ["proof (prove)\nusing this:\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n  chosen s = NotAnInput\n\ngoal (1 subgoal):\n 1. \\<forall>q. outpt s q = NotAnInput", "by auto"], ["proof (state)\nthis:\n  \\<forall>q. outpt s q = NotAnInput\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "with endphase2"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p\n  \\<forall>q. outpt s q = NotAnInput", "have p32: \"\\<forall>q \\<in> UNIV -{p}. outpt s' q = NotAnInput\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n  \\<forall>q. outpt s q = NotAnInput\n\ngoal (1 subgoal):\n 1. \\<forall>q\\<in>UNIV - {p}. outpt s' q = NotAnInput", "by(auto simp add: EndPhase2_def)"], ["proof (state)\nthis:\n  \\<forall>q\\<in>UNIV - {p}. outpt s' q = NotAnInput\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "hence some_eq: \"(\\<And>x. outpt s' x \\<noteq> NotAnInput \\<Longrightarrow> x = p)\""], ["proof (prove)\nusing this:\n  \\<forall>q\\<in>UNIV - {p}. outpt s' q = NotAnInput\n\ngoal (1 subgoal):\n 1. \\<And>x. outpt s' x \\<noteq> NotAnInput \\<Longrightarrow> x = p", "by auto"], ["proof (state)\nthis:\n  outpt s' ?x \\<noteq> NotAnInput \\<Longrightarrow> ?x = p\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "from p32 True nxt some_equality[of \"\\<lambda>p. outpt s' p \\<noteq> NotAnInput\", OF outpt_nni some_eq]"], ["proof (chain)\npicking this:\n  \\<forall>q\\<in>UNIV - {p}. outpt s' q = NotAnInput\n  chosen s = NotAnInput\n  HNext s s'\n  (\\<And>x.\n      outpt s' x \\<noteq> NotAnInput \\<Longrightarrow>\n      outpt s' x \\<noteq> NotAnInput) \\<Longrightarrow>\n  (SOME x. outpt s' x \\<noteq> NotAnInput) = p", "have p33: \"chosen s' = outpt s' p\""], ["proof (prove)\nusing this:\n  \\<forall>q\\<in>UNIV - {p}. outpt s' q = NotAnInput\n  chosen s = NotAnInput\n  HNext s s'\n  (\\<And>x.\n      outpt s' x \\<noteq> NotAnInput \\<Longrightarrow>\n      outpt s' x \\<noteq> NotAnInput) \\<Longrightarrow>\n  (SOME x. outpt s' x \\<noteq> NotAnInput) = p\n\ngoal (1 subgoal):\n 1. chosen s' = outpt s' p", "by(auto simp add: HNext_def HNextPart_def)"], ["proof (state)\nthis:\n  chosen s' = outpt s' p\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "with endphase2"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p\n  chosen s' = outpt s' p", "have \"chosen s' = inp(dblock s p) \\<and> outpt s' = (outpt s)(p:=inp(dblock s p))\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n  chosen s' = outpt s' p\n\ngoal (1 subgoal):\n 1. chosen s' = inp (dblock s p) \\<and>\n    outpt s' = (outpt s)(p := inp (dblock s p))", "by(auto simp add: EndPhase2_def)"], ["proof (state)\nthis:\n  chosen s' = inp (dblock s p) \\<and>\n  outpt s' = (outpt s)(p := inp (dblock s p))\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "with True p22"], ["proof (chain)\npicking this:\n  chosen s = NotAnInput\n  inp (dblock s p) \\<in> allInput s\n  chosen s' = inp (dblock s p) \\<and>\n  outpt s' = (outpt s)(p := inp (dblock s p))", "have \"if (chosen s = NotAnInput)\n                        then (\\<exists>ip \\<in> allInput s.  chosen s' = ip\n                                            \\<and> outpt s' = (outpt s) (p := ip))\n                        else (  outpt s' = (outpt s) (p:= chosen s)\n                               \\<and> chosen s' = chosen s)\""], ["proof (prove)\nusing this:\n  chosen s = NotAnInput\n  inp (dblock s p) \\<in> allInput s\n  chosen s' = inp (dblock s p) \\<and>\n  outpt s' = (outpt s)(p := inp (dblock s p))\n\ngoal (1 subgoal):\n 1. if chosen s = NotAnInput\n    then \\<exists>ip\\<in>allInput s.\n            chosen s' = ip \\<and> outpt s' = (outpt s)(p := ip)\n    else outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s", "by auto"], ["proof (state)\nthis:\n  if chosen s = NotAnInput\n  then \\<exists>ip\\<in>allInput s.\n          chosen s' = ip \\<and> outpt s' = (outpt s)(p := ip)\n  else outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "moreover"], ["proof (state)\nthis:\n  if chosen s = NotAnInput\n  then \\<exists>ip\\<in>allInput s.\n          chosen s' = ip \\<and> outpt s' = (outpt s)(p := ip)\n  else outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "from endphase2 inv2c5 nxt"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n  HNext s s'", "have \"inpt s' = inpt s \\<and> allInput s'= allInput s\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n  HNext s s'\n\ngoal (1 subgoal):\n 1. inpt s' = inpt s \\<and> allInput s' = allInput s", "by(auto simp add: EndPhase2_def HNext_def HNextPart_def)"], ["proof (state)\nthis:\n  inpt s' = inpt s \\<and> allInput s' = allInput s\n\ngoal (2 subgoals):\n 1. chosen s = NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p\n 2. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "ultimately"], ["proof (chain)\npicking this:\n  if chosen s = NotAnInput\n  then \\<exists>ip\\<in>allInput s.\n          chosen s' = ip \\<and> outpt s' = (outpt s)(p := ip)\n  else outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n  inpt s' = inpt s \\<and> allInput s' = allInput s", "show ?thesis"], ["proof (prove)\nusing this:\n  if chosen s = NotAnInput\n  then \\<exists>ip\\<in>allInput s.\n          chosen s' = ip \\<and> outpt s' = (outpt s)(p := ip)\n  else outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n  inpt s' = inpt s \\<and> allInput s' = allInput s\n\ngoal (1 subgoal):\n 1. IFail is is' p \\<or> IChoose is is' p", "using srel p31"], ["proof (prove)\nusing this:\n  if chosen s = NotAnInput\n  then \\<exists>ip\\<in>allInput s.\n          chosen s' = ip \\<and> outpt s' = (outpt s)(p := ip)\n  else outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n  inpt s' = inpt s \\<and> allInput s' = allInput s\n  is = s2is s \\<and> is' = s2is s'\n  \\<forall>q. outpt s q = NotAnInput\n\ngoal (1 subgoal):\n 1. IFail is is' p \\<or> IChoose is is' p", "by(auto simp add: IChoose_def s2is_def)"], ["proof (state)\nthis:\n  IFail is is' p \\<or> IChoose is is' p\n\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "case False"], ["proof (state)\nthis:\n  chosen s \\<noteq> NotAnInput\n\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "with nxt"], ["proof (chain)\npicking this:\n  HNext s s'\n  chosen s \\<noteq> NotAnInput", "have p31: \"chosen s' = chosen s\""], ["proof (prove)\nusing this:\n  HNext s s'\n  chosen s \\<noteq> NotAnInput\n\ngoal (1 subgoal):\n 1. chosen s' = chosen s", "by(auto simp add: HNext_def HNextPart_def)"], ["proof (state)\nthis:\n  chosen s' = chosen s\n\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "from inv'"], ["proof (chain)\npicking this:\n  HInv s'", "have inv6: \"HInv6 s'\""], ["proof (prove)\nusing this:\n  HInv s'\n\ngoal (1 subgoal):\n 1. HInv6 s'", "by(auto simp add: HInv_def)"], ["proof (state)\nthis:\n  HInv6 s'\n\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "have p32: \"outpt s' p = chosen s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "from endphase2"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p", "have \"outpt s' p  = inp(dblock s p)\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n\ngoal (1 subgoal):\n 1. outpt s' p = inp (dblock s p)", "by(auto simp add: EndPhase2_def)"], ["proof (state)\nthis:\n  outpt s' p = inp (dblock s p)\n\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "moreover"], ["proof (state)\nthis:\n  outpt s' p = inp (dblock s p)\n\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "from inv6 p31"], ["proof (chain)\npicking this:\n  HInv6 s'\n  chosen s' = chosen s", "have \"outpt s' p \\<in> {chosen s, NotAnInput}\""], ["proof (prove)\nusing this:\n  HInv6 s'\n  chosen s' = chosen s\n\ngoal (1 subgoal):\n 1. outpt s' p \\<in> {chosen s, NotAnInput}", "by(auto simp add: HInv6_def)"], ["proof (state)\nthis:\n  outpt s' p \\<in> {chosen s, NotAnInput}\n\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "ultimately"], ["proof (chain)\npicking this:\n  outpt s' p = inp (dblock s p)\n  outpt s' p \\<in> {chosen s, NotAnInput}", "show ?thesis"], ["proof (prove)\nusing this:\n  outpt s' p = inp (dblock s p)\n  outpt s' p \\<in> {chosen s, NotAnInput}\n\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "using outpt_nni"], ["proof (prove)\nusing this:\n  outpt s' p = inp (dblock s p)\n  outpt s' p \\<in> {chosen s, NotAnInput}\n  outpt s' p \\<noteq> NotAnInput\n\ngoal (1 subgoal):\n 1. outpt s' p = chosen s", "by auto"], ["proof (state)\nthis:\n  outpt s' p = chosen s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  outpt s' p = chosen s\n\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "from srel False"], ["proof (chain)\npicking this:\n  is = s2is s \\<and> is' = s2is s'\n  chosen s \\<noteq> NotAnInput", "have \"IChoose is is' p\""], ["proof (prove)\nusing this:\n  is = s2is s \\<and> is' = s2is s'\n  chosen s \\<noteq> NotAnInput\n\ngoal (1 subgoal):\n 1. IChoose is is' p", "proof(clarsimp simp add: IChoose_def s2is_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>chosen s \\<noteq> NotAnInput;\n     is =\n     \\<lparr>iinput = inpt s, ioutput = outpt s, ichosen = chosen s,\n        iallInput = allInput s\\<rparr>;\n     is' =\n     \\<lparr>iinput = inpt s', ioutput = outpt s', ichosen = chosen s',\n        iallInput = allInput s'\\<rparr>\\<rbrakk>\n    \\<Longrightarrow> outpt s p = NotAnInput \\<and>\n                      outpt s' = (outpt s)(p := chosen s) \\<and>\n                      chosen s' = chosen s \\<and>\n                      inpt s' = inpt s \\<and> allInput s' = allInput s", "from endphase2 inv2c"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p\n  Inv2c_inner s p", "have \"outpt s p = NotAnInput\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n  Inv2c_inner s p\n\ngoal (1 subgoal):\n 1. outpt s p = NotAnInput", "by(auto simp add: EndPhase2_def Inv2c_inner_def)"], ["proof (state)\nthis:\n  outpt s p = NotAnInput\n\ngoal (1 subgoal):\n 1. \\<lbrakk>chosen s \\<noteq> NotAnInput;\n     is =\n     \\<lparr>iinput = inpt s, ioutput = outpt s, ichosen = chosen s,\n        iallInput = allInput s\\<rparr>;\n     is' =\n     \\<lparr>iinput = inpt s', ioutput = outpt s', ichosen = chosen s',\n        iallInput = allInput s'\\<rparr>\\<rbrakk>\n    \\<Longrightarrow> outpt s p = NotAnInput \\<and>\n                      outpt s' = (outpt s)(p := chosen s) \\<and>\n                      chosen s' = chosen s \\<and>\n                      inpt s' = inpt s \\<and> allInput s' = allInput s", "moreover"], ["proof (state)\nthis:\n  outpt s p = NotAnInput\n\ngoal (1 subgoal):\n 1. \\<lbrakk>chosen s \\<noteq> NotAnInput;\n     is =\n     \\<lparr>iinput = inpt s, ioutput = outpt s, ichosen = chosen s,\n        iallInput = allInput s\\<rparr>;\n     is' =\n     \\<lparr>iinput = inpt s', ioutput = outpt s', ichosen = chosen s',\n        iallInput = allInput s'\\<rparr>\\<rbrakk>\n    \\<Longrightarrow> outpt s p = NotAnInput \\<and>\n                      outpt s' = (outpt s)(p := chosen s) \\<and>\n                      chosen s' = chosen s \\<and>\n                      inpt s' = inpt s \\<and> allInput s' = allInput s", "from endphase2 p31 p32 False"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p\n  chosen s' = chosen s\n  outpt s' p = chosen s\n  chosen s \\<noteq> NotAnInput", "have \"outpt s' = (outpt s) (p:= chosen s) \\<and> chosen s' = chosen s\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n  chosen s' = chosen s\n  outpt s' p = chosen s\n  chosen s \\<noteq> NotAnInput\n\ngoal (1 subgoal):\n 1. outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s", "by(auto simp add: EndPhase2_def)"], ["proof (state)\nthis:\n  outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>chosen s \\<noteq> NotAnInput;\n     is =\n     \\<lparr>iinput = inpt s, ioutput = outpt s, ichosen = chosen s,\n        iallInput = allInput s\\<rparr>;\n     is' =\n     \\<lparr>iinput = inpt s', ioutput = outpt s', ichosen = chosen s',\n        iallInput = allInput s'\\<rparr>\\<rbrakk>\n    \\<Longrightarrow> outpt s p = NotAnInput \\<and>\n                      outpt s' = (outpt s)(p := chosen s) \\<and>\n                      chosen s' = chosen s \\<and>\n                      inpt s' = inpt s \\<and> allInput s' = allInput s", "moreover"], ["proof (state)\nthis:\n  outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>chosen s \\<noteq> NotAnInput;\n     is =\n     \\<lparr>iinput = inpt s, ioutput = outpt s, ichosen = chosen s,\n        iallInput = allInput s\\<rparr>;\n     is' =\n     \\<lparr>iinput = inpt s', ioutput = outpt s', ichosen = chosen s',\n        iallInput = allInput s'\\<rparr>\\<rbrakk>\n    \\<Longrightarrow> outpt s p = NotAnInput \\<and>\n                      outpt s' = (outpt s)(p := chosen s) \\<and>\n                      chosen s' = chosen s \\<and>\n                      inpt s' = inpt s \\<and> allInput s' = allInput s", "from endphase2 nxt inv2c5"], ["proof (chain)\npicking this:\n  EndPhase2 s s' p\n  HNext s s'\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)", "have \"inpt s' = inpt s \\<and> allInput s'= allInput s\""], ["proof (prove)\nusing this:\n  EndPhase2 s s' p\n  HNext s s'\n  \\<forall>p.\n     inpt s p \\<in> allInput s \\<and>\n     (chosen s = NotAnInput \\<longrightarrow> outpt s p = NotAnInput)\n\ngoal (1 subgoal):\n 1. inpt s' = inpt s \\<and> allInput s' = allInput s", "by(auto simp add: EndPhase2_def HNext_def HNextPart_def)"], ["proof (state)\nthis:\n  inpt s' = inpt s \\<and> allInput s' = allInput s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>chosen s \\<noteq> NotAnInput;\n     is =\n     \\<lparr>iinput = inpt s, ioutput = outpt s, ichosen = chosen s,\n        iallInput = allInput s\\<rparr>;\n     is' =\n     \\<lparr>iinput = inpt s', ioutput = outpt s', ichosen = chosen s',\n        iallInput = allInput s'\\<rparr>\\<rbrakk>\n    \\<Longrightarrow> outpt s p = NotAnInput \\<and>\n                      outpt s' = (outpt s)(p := chosen s) \\<and>\n                      chosen s' = chosen s \\<and>\n                      inpt s' = inpt s \\<and> allInput s' = allInput s", "ultimately"], ["proof (chain)\npicking this:\n  outpt s p = NotAnInput\n  outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n  inpt s' = inpt s \\<and> allInput s' = allInput s", "show \"  outpt s p = NotAnInput \n              \\<and> outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s \n              \\<and> inpt s' = inpt s \\<and> allInput s' = allInput s\""], ["proof (prove)\nusing this:\n  outpt s p = NotAnInput\n  outpt s' = (outpt s)(p := chosen s) \\<and> chosen s' = chosen s\n  inpt s' = inpt s \\<and> allInput s' = allInput s\n\ngoal (1 subgoal):\n 1. outpt s p = NotAnInput \\<and>\n    outpt s' = (outpt s)(p := chosen s) \\<and>\n    chosen s' = chosen s \\<and>\n    inpt s' = inpt s \\<and> allInput s' = allInput s", "by auto"], ["proof (state)\nthis:\n  outpt s p = NotAnInput \\<and>\n  outpt s' = (outpt s)(p := chosen s) \\<and>\n  chosen s' = chosen s \\<and>\n  inpt s' = inpt s \\<and> allInput s' = allInput s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  IChoose is is' p\n\ngoal (1 subgoal):\n 1. chosen s \\<noteq> NotAnInput \\<Longrightarrow>\n    IFail is is' p \\<or> IChoose is is' p", "thus ?thesis"], ["proof (prove)\nusing this:\n  IChoose is is' p\n\ngoal (1 subgoal):\n 1. IFail is is' p \\<or> IChoose is is' p", "by auto"], ["proof (state)\nthis:\n  IFail is is' p \\<or> IChoose is is' p\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  IFail is is' p \\<or> IChoose is is' p\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  IFail is is' p \\<or> IChoose is is' p\n\ngoal (1 subgoal):\n 1. is \\<noteq> is' \\<Longrightarrow>\n    \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "thus \"\\<exists>p. IFail is is' p \\<or> IChoose is is' p\""], ["proof (prove)\nusing this:\n  IFail is is' p \\<or> IChoose is is' p\n\ngoal (1 subgoal):\n 1. \\<exists>p. IFail is is' p \\<or> IChoose is is' p", "by auto"], ["proof (state)\nthis:\n  \\<exists>p. IFail is is' p \\<or> IChoose is is' p\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}