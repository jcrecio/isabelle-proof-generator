{"file_name": "/home/qj213/afp-2021-10-22/thys/Lp/Lp.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Lp", "problem_names": ["lemma Lp_cases_1_PInf:\n  assumes \"p \\<ge> (1::ennreal)\"\n  obtains (gr) p2 where \"p = ennreal p2\" \"p2 > 1\" \"p > 1\"\n    | (one) \"p = 1\"\n    | (PInf) \"p = \\<infinity>\"", "lemma Lp_cases:\n  obtains (real_pos) p2 where \"p = ennreal p2\" \"p2 > 0\" \"p > 0\"\n    | (zero) \"p = 0\"\n    | (PInf) \"p = \\<infinity>\"", "lemma conjugate_exponent_real:\n  assumes \"p > (1::real)\"\n  shows \"1/p + 1/(conjugate_exponent p) = 1\"\n        \"conjugate_exponent p > 1\"\n        \"conjugate_exponent(conjugate_exponent p) = p\"\n        \"(p-1) * conjugate_exponent p = p\"\n        \"p - p / conjugate_exponent p = 1\"", "lemma conjugate_exponent_real_iff:\n  assumes \"p > (1::real)\"\n  shows \"q = conjugate_exponent p \\<longleftrightarrow> (1/p + 1/q = 1)\"", "lemma conjugate_exponent_real_2 [simp]:\n  \"conjugate_exponent (2::real) = 2\"", "lemma conjugate_exponent_realI:\n  assumes \"p > (0::real)\" \"q > 0\" \"1/p + 1/q = 1\"\n  shows \"p > 1\" \"q = conjugate_exponent p\" \"q > 1\" \"p = conjugate_exponent q\"", "lemma conjugate_exponent_real_ennreal:\n  assumes \"p> (1::real)\"\n  shows \"conjugate_exponent(ennreal p) = ennreal(conjugate_exponent p)\"", "lemma conjugate_exponent_ennreal_1_2_PInf [simp]:\n  \"conjugate_exponent (1::ennreal) = \\<infinity>\"\n  \"conjugate_exponent (\\<infinity>::ennreal) = 1\"\n  \"conjugate_exponent (\\<top>::ennreal) = 1\"\n  \"conjugate_exponent (2::ennreal) = 2\"", "lemma conjugate_exponent_ennreal:\n  assumes \"p \\<ge> (1::ennreal)\"\n  shows \"1/p + 1/(conjugate_exponent p) = 1\"\n        \"conjugate_exponent p \\<ge> 1\"\n        \"conjugate_exponent(conjugate_exponent p) = p\"", "lemma conjugate_exponent_ennreal_iff:\n  assumes \"p \\<ge> (1::ennreal)\"\n  shows \"q = conjugate_exponent p \\<longleftrightarrow> (1/p + 1/q = 1)\"", "lemma conjugate_exponent_ennrealI:\n  assumes \"1/p + 1/q = (1::ennreal)\"\n  shows \"p \\<ge> 1\" \"q \\<ge> 1\" \"p = conjugate_exponent q\" \"q = conjugate_exponent p\"", "lemma (in prob_space) bound_L1_Lp:\n  assumes \"p \\<ge> (1::real)\"\n          \"f \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n  shows \"integrable M f\"\n        \"abs(\\<integral>x. f x \\<partial>M) powr p \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M)\"\n        \"abs(\\<integral>x. f x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"", "theorem Holder_inequality:\n  assumes \"p > (0::real)\" \"q > 0\" \"1/p + 1/q = 1\"\n      and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n          \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q)\"\n  shows \"integrable M (\\<lambda>x. f x * g x)\"\n        \"(\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\"\n        \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\"", "theorem Minkowski_inequality:\n  assumes \"p \\<ge> (1::real)\"\n      and [measurable, simp]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n          \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\"\n  shows \"integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\"\n        \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p)\n          \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\"", "theorem Minkowski_inequality_le_1:\n  assumes \"p > (0::real)\" \"p \\<le> 1\"\n      and [measurable, simp]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n          \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\"\n  shows \"integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\"\n        \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p)\n          \\<le> 2 powr (1/p-1) * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + 2 powr (1/p-1) * (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\"", "lemma L_infinity:\n  \"eNorm (\\<LL> \\<infinity> M) f = (if f \\<in> borel_measurable M then esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) else (\\<infinity>::ennreal))\"\n  \"defect (\\<LL> \\<infinity> M) = 1\"", "lemma L_infinity_space:\n  \"space\\<^sub>N (\\<LL> \\<infinity> M) = {f \\<in> borel_measurable M. \\<exists>C. AE x in M. \\<bar>f x\\<bar> \\<le> C}\"", "lemma L_infinity_zero_space:\n  \"zero_space\\<^sub>N (\\<LL> \\<infinity> M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\"", "lemma L_infinity_AE_ebound:\n  \"AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\"", "lemma L_infinity_AE_bound:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n  shows \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\"", "lemma L_infinity_I:\n  assumes \"f \\<in> borel_measurable M\"\n          \"AE x in M. \\<bar>f x\\<bar> \\<le> C\"\n          \"C \\<ge> 0\"\n  shows \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n        \"Norm (\\<LL> \\<infinity> M) f \\<le> C\"", "lemma L_infinity_I':\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n      and \"AE x in M. ennreal \\<bar>f x\\<bar> \\<le> C\"\n  shows \"eNorm (\\<LL> \\<infinity> M) f \\<le> C\"", "lemma L_infinity_pos_measure:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n      and \"eNorm (\\<LL> \\<infinity> M) f > (C::real)\"\n  shows \"emeasure M {x \\<in> space M. \\<bar>f x\\<bar> > C} > 0\"", "lemma L_infinity_tendsto_AE:\n  assumes \"tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) f g\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n          \"g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n  shows \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"", "lemma bcontfun_subset_L_infinity:\n  assumes \"sets M = sets borel\"\n  shows \"space\\<^sub>N bcontfun\\<^sub>N \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n        \"\\<And>f. f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow> Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\"\n        \"\\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f\"\n        \"bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\"", "lemma Lp:\n  assumes \"p \\<ge> (1::real)\"\n  shows \"eNorm (\\<LL> p M) f = (if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n                            then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n                            else (\\<infinity>::ennreal))\"\n        \"defect (\\<LL> p M) = 1\"", "lemma Lp_le_1:\n  assumes \"p > 0\" \"p \\<le> (1::real)\"\n  shows \"eNorm (\\<LL> p M) f = (if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n                            then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n                            else (\\<infinity>::ennreal))\"\n        \"defect (\\<LL> p M) = 2 powr (1/p - 1)\"", "lemma Lp_space:\n  assumes \"p > (0::real)\"\n  shows \"space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\"", "lemma Lp_I:\n  assumes \"p > (0::real)\"\n          \"f \\<in> borel_measurable M\" \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n  shows \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n        \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"", "lemma Lp_D:\n  assumes \"p>0\" \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"f \\<in> borel_measurable M\"\n        \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n        \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n        \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"", "lemma Lp_Norm:\n  assumes \"p > (0::real)\"\n          \"f \\<in> borel_measurable M\"\n  shows \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n        \"(Norm (\\<LL> p M) f) powr p = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M)\"", "lemma Lp_zero_space:\n  assumes \"p > (0::real)\"\n  shows \"zero_space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\"", "lemma Lp_tendsto_AE_subseq:\n  assumes \"p>(0::real)\"\n          \"tendsto_in\\<^sub>N (\\<LL> p M) f g\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"\\<exists>r. strict_mono r \\<and> (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)\"", "lemma L1_space:\n  \"space\\<^sub>N (\\<LL> 1 M) = {f. integrable M f}\"", "lemma L1_I:\n  assumes \"integrable M f\"\n  shows \"f \\<in> space\\<^sub>N (\\<LL> 1 M)\"\n        \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"\n        \"eNorm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"", "lemma L1_D:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> 1 M)\"\n  shows \"f \\<in> borel_measurable M\"\n        \"integrable M f\"\n        \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"\n        \"eNorm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"", "lemma L1_int_ineq:\n  \"abs(\\<integral>x. f x \\<partial>M) \\<le> Norm (\\<LL> 1 M) f\"", "lemma L1_Norm:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"\n        \"eNorm (\\<LL> 1 M) f = (\\<integral>\\<^sup>+x. \\<bar>f x\\<bar> \\<partial>M)\"", "lemma L1_indicator:\n  assumes [measurable]: \"A \\<in> sets M\"\n  shows \"eNorm (\\<LL> 1 M) (indicator A) = emeasure M A\"", "lemma L1_indicator':\n  assumes [measurable]: \"A \\<in> sets M\"\n      and \"emeasure M A \\<noteq> \\<infinity>\"\n  shows \"indicator A \\<in> space\\<^sub>N (\\<LL> 1 M)\"\n        \"Norm (\\<LL> 1 M) (indicator A) = measure M A\"", "lemma L_zero:\n  \"eNorm (\\<LL> 0 M) f = (if f \\<in> borel_measurable M then 0 else \\<infinity>)\"\n  \"defect (\\<LL> 0 M) = 1\"", "lemma L_zero_space [simp]:\n  \"space\\<^sub>N (\\<LL> 0 M) = borel_measurable M\"\n  \"zero_space\\<^sub>N (\\<LL> 0 M) = borel_measurable M\"", "lemma Lp_measurable_subset:\n  \"space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\"", "lemma Lp_measurable:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"f \\<in> borel_measurable M\"", "lemma Lp_infinity_zero_space:\n  assumes \"p > (0::ennreal)\"\n  shows \"zero_space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\"", "lemma (in prob_space) Lp_subset_Lq:\n  assumes \"p \\<le> q\"\n  shows \"\\<And>f. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\"\n        \"\\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\"\n        \"space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\"\n        \"\\<And>f. f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow> Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f\"", "lemma Lp_Banach_lattice:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"(\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f\"", "lemma Lp_bounded_bounded_support:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n      and \"AE x in M. \\<bar>f x\\<bar> \\<le> C\"\n          \"emeasure M {x \\<in> space M. f x \\<noteq> 0} \\<noteq> \\<infinity>\"\n  shows \"f \\<in> space\\<^sub>N(\\<LL> p M)\"", "lemma Lp_AE_limit':\n  assumes \"g \\<in> borel_measurable M\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"\n          \"(\\<lambda>n. Norm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> l\"\n  shows \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) g \\<le> l\"", "lemma Lp_AE_limit'':\n  assumes \"g \\<in> borel_measurable M\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"\n          \"\\<And>n. Norm (\\<LL> p M) (f n) \\<le> C\"\n  shows \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) g \\<le> C\"", "theorem Lp_complete:\n  \"complete\\<^sub>N (\\<LL> p M)\"", "theorem Lp_Lq_mult:\n  fixes p q r::ennreal\n  assumes \"1/p + 1/q = 1/r\"\n      and \"f \\<in> space\\<^sub>N (\\<LL> p M)\" \"g \\<in> space\\<^sub>N (\\<LL> q M)\"\n  shows \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\"\n        \"Norm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\"", "theorem Lp_Lq_emult:\n  fixes p q r::ennreal\n  assumes \"1/p + 1/q = 1/r\"\n          \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\"", "lemma Lp_Lq_duality_bound:\n  fixes p q::ennreal\n  assumes \"1/p + 1/q = 1\"\n          \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"g \\<in> space\\<^sub>N (\\<LL> q M)\"\n  shows \"integrable M (\\<lambda>x. f x * g x)\"\n        \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\"", "theorem Lp_Lq_duality:\n  fixes p q::ennreal\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"1/p + 1/q = 1\"\n          \"p = \\<infinity> \\<Longrightarrow> sigma_finite_measure M\"\n  shows \"bdd_above ((\\<lambda>g. (\\<integral>x. f x * g x \\<partial>M))`{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\"\n        \"Norm (\\<LL> p M) f = (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\"", "theorem Lp_Lq_duality':\n  fixes p q::ennreal\n  assumes \"1/p + 1/q = 1\"\n          \"sigma_finite_measure M\"\n      and [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"eNorm (\\<LL> p M) f = (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. ennreal(\\<integral>x. f x * g x \\<partial>M))\"", "lemma Lp_subalgebra:\n  assumes \"subalgebra M F\"\n  shows \"\\<And>f. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\"\n        \"(\\<LL> p (restr_to_subalg M F)) \\<subseteq>\\<^sub>N \\<LL> p M\"\n        \"space\\<^sub>N ((\\<LL> p (restr_to_subalg M F))) \\<subseteq> space\\<^sub>N (\\<LL> p M)\"\n        \"\\<And>f. f \\<in> space\\<^sub>N ((\\<LL> p (restr_to_subalg M F))) \\<Longrightarrow> Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\"", "lemma Lp_real_cond_exp_eNorm:\n  assumes [simp]: \"subalgebra M F\"\n      and \"p \\<ge> (1::ennreal)\"\n          \"sigma_finite_measure (restr_to_subalg M F)\"\n  shows \"eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) \\<le> eNorm (\\<LL> p M) f\""], "translations": [["", "lemma Lp_cases_1_PInf:\n  assumes \"p \\<ge> (1::ennreal)\"\n  obtains (gr) p2 where \"p = ennreal p2\" \"p2 > 1\" \"p > 1\"\n    | (one) \"p = 1\"\n    | (PInf) \"p = \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>p2.\n                \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     p = 1 \\<Longrightarrow> thesis;\n     p = \\<infinity> \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using assms"], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>p2.\n                \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     p = 1 \\<Longrightarrow> thesis;\n     p = \\<infinity> \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by (metis (full_types) antisym_conv ennreal_cases ennreal_le_1 infinity_ennreal_def not_le)"], ["", "lemma Lp_cases:\n  obtains (real_pos) p2 where \"p = ennreal p2\" \"p2 > 0\" \"p > 0\"\n    | (zero) \"p = 0\"\n    | (PInf) \"p = \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>p2.\n                \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     p = 0 \\<Longrightarrow> thesis;\n     p = \\<infinity> \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by (metis enn2real_positive_iff ennreal_enn2real_if infinity_ennreal_def not_gr_zero top.not_eq_extremum)"], ["", "definition\n  \"conjugate_exponent p = 1 + 1/(p-1)\""], ["", "lemma conjugate_exponent_real:\n  assumes \"p > (1::real)\"\n  shows \"1/p + 1/(conjugate_exponent p) = 1\"\n        \"conjugate_exponent p > 1\"\n        \"conjugate_exponent(conjugate_exponent p) = p\"\n        \"(p-1) * conjugate_exponent p = p\"\n        \"p - p / conjugate_exponent p = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 / p + 1 / conjugate_exponent p = 1 &&& 1 < conjugate_exponent p) &&&\n    conjugate_exponent (conjugate_exponent p) = p &&&\n    (p - 1) * conjugate_exponent p = p &&& p - p / conjugate_exponent p = 1", "unfolding conjugate_exponent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 / p + 1 / (1 + 1 / (p - 1)) = 1 &&& 1 < 1 + 1 / (p - 1)) &&&\n    1 + 1 / (1 + 1 / (p - 1) - 1) = p &&&\n    (p - 1) * (1 + 1 / (p - 1)) = p &&& p - p / (1 + 1 / (p - 1)) = 1", "using assms"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. (1 / p + 1 / (1 + 1 / (p - 1)) = 1 &&& 1 < 1 + 1 / (p - 1)) &&&\n    1 + 1 / (1 + 1 / (p - 1) - 1) = p &&&\n    (p - 1) * (1 + 1 / (p - 1)) = p &&& p - p / (1 + 1 / (p - 1)) = 1", "by (auto simp add: algebra_simps divide_simps)"], ["", "lemma conjugate_exponent_real_iff:\n  assumes \"p > (1::real)\"\n  shows \"q = conjugate_exponent p \\<longleftrightarrow> (1/p + 1/q = 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (q = conjugate_exponent p) = (1 / p + 1 / q = 1)", "unfolding conjugate_exponent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (q = 1 + 1 / (p - 1)) = (1 / p + 1 / q = 1)", "using assms"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. (q = 1 + 1 / (p - 1)) = (1 / p + 1 / q = 1)", "by (auto simp add: algebra_simps divide_simps)"], ["", "lemma conjugate_exponent_real_2 [simp]:\n  \"conjugate_exponent (2::real) = 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. conjugate_exponent 2 = 2", "unfolding conjugate_exponent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + 1 / (2 - 1) = 2", "by (auto simp add: algebra_simps divide_simps)"], ["", "lemma conjugate_exponent_realI:\n  assumes \"p > (0::real)\" \"q > 0\" \"1/p + 1/q = 1\"\n  shows \"p > 1\" \"q = conjugate_exponent p\" \"q > 1\" \"p = conjugate_exponent q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 < p &&& q = conjugate_exponent p) &&&\n    1 < q &&& p = conjugate_exponent q", "unfolding conjugate_exponent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 < p &&& q = 1 + 1 / (p - 1)) &&& 1 < q &&& p = 1 + 1 / (q - 1)", "using assms"], ["proof (prove)\nusing this:\n  0 < p\n  0 < q\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. (1 < p &&& q = 1 + 1 / (p - 1)) &&& 1 < q &&& p = 1 + 1 / (q - 1)", "apply (auto simp add: algebra_simps divide_simps)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>0 < p; 0 < q; p + q = p * q\\<rbrakk> \\<Longrightarrow> 1 < p\n 2. \\<lbrakk>0 < p; 0 < q; p + q = p * q\\<rbrakk> \\<Longrightarrow> 1 < q", "apply (metis assms(3) divide_less_eq_1_pos less_add_same_cancel1 zero_less_divide_1_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < p; 0 < q; p + q = p * q\\<rbrakk> \\<Longrightarrow> 1 < q", "using mult_less_cancel_left_pos"], ["proof (prove)\nusing this:\n  (0::?'a) < ?c \\<Longrightarrow> (?c * ?a < ?c * ?b) = (?a < ?b)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < p; 0 < q; p + q = p * q\\<rbrakk> \\<Longrightarrow> 1 < q", "by fastforce"], ["", "lemma conjugate_exponent_real_ennreal:\n  assumes \"p> (1::real)\"\n  shows \"conjugate_exponent(ennreal p) = ennreal(conjugate_exponent p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. conjugate_exponent (ennreal p) = ennreal (conjugate_exponent p)", "unfolding conjugate_exponent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + 1 / (ennreal p - 1) = ennreal (1 + 1 / (p - 1))", "using assms"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. 1 + 1 / (ennreal p - 1) = ennreal (1 + 1 / (p - 1))", "by (auto, metis diff_gt_0_iff_gt divide_ennreal ennreal_1 ennreal_minus zero_le_one)"], ["", "lemma conjugate_exponent_ennreal_1_2_PInf [simp]:\n  \"conjugate_exponent (1::ennreal) = \\<infinity>\"\n  \"conjugate_exponent (\\<infinity>::ennreal) = 1\"\n  \"conjugate_exponent (\\<top>::ennreal) = 1\"\n  \"conjugate_exponent (2::ennreal) = 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (conjugate_exponent 1 = \\<infinity> &&&\n     conjugate_exponent \\<infinity> = 1) &&&\n    conjugate_exponent \\<top> = 1 &&& conjugate_exponent 2 = 2", "using conjugate_exponent_real_ennreal[of 2]"], ["proof (prove)\nusing this:\n  1 < 2 \\<Longrightarrow>\n  conjugate_exponent (ennreal 2) = ennreal (conjugate_exponent 2)\n\ngoal (1 subgoal):\n 1. (conjugate_exponent 1 = \\<infinity> &&&\n     conjugate_exponent \\<infinity> = 1) &&&\n    conjugate_exponent \\<top> = 1 &&& conjugate_exponent 2 = 2", "by (auto simp add: conjugate_exponent_def)"], ["", "lemma conjugate_exponent_ennreal:\n  assumes \"p \\<ge> (1::ennreal)\"\n  shows \"1/p + 1/(conjugate_exponent p) = 1\"\n        \"conjugate_exponent p \\<ge> 1\"\n        \"conjugate_exponent(conjugate_exponent p) = p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1 &&&\n    1 \\<le> conjugate_exponent p &&&\n    conjugate_exponent (conjugate_exponent p) = p", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. 1 / p + 1 / conjugate_exponent p = 1\n 2. 1 \\<le> conjugate_exponent p\n 3. conjugate_exponent (conjugate_exponent p) = p", "have \"(1/p + 1/(conjugate_exponent p) = 1) \\<and> (conjugate_exponent p \\<ge> 1) \\<and> conjugate_exponent(conjugate_exponent p) = p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "using \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "proof (cases rule: Lp_cases_1_PInf)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "case (gr p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  1 < p2\n  1 < p\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "then"], ["proof (chain)\npicking this:\n  p = ennreal p2\n  1 < p2\n  1 < p", "have *: \"conjugate_exponent p = ennreal (conjugate_exponent p2)\""], ["proof (prove)\nusing this:\n  p = ennreal p2\n  1 < p2\n  1 < p\n\ngoal (1 subgoal):\n 1. conjugate_exponent p = ennreal (conjugate_exponent p2)", "using conjugate_exponent_real_ennreal[OF \\<open>p2 > 1\\<close>]"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  1 < p2\n  1 < p\n  conjugate_exponent (ennreal p2) = ennreal (conjugate_exponent p2)\n\ngoal (1 subgoal):\n 1. conjugate_exponent p = ennreal (conjugate_exponent p2)", "by auto"], ["proof (state)\nthis:\n  conjugate_exponent p = ennreal (conjugate_exponent p2)\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "have a: \"conjugate_exponent p \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> conjugate_exponent p", "using * conjugate_exponent_real[OF \\<open>p2 > 1\\<close>]"], ["proof (prove)\nusing this:\n  conjugate_exponent p = ennreal (conjugate_exponent p2)\n  1 / p2 + 1 / conjugate_exponent p2 = 1\n  1 < conjugate_exponent p2\n  conjugate_exponent (conjugate_exponent p2) = p2\n  (p2 - 1) * conjugate_exponent p2 = p2\n  p2 - p2 / conjugate_exponent p2 = 1\n\ngoal (1 subgoal):\n 1. 1 \\<le> conjugate_exponent p", "by auto"], ["proof (state)\nthis:\n  1 \\<le> conjugate_exponent p\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "have b: \"conjugate_exponent(conjugate_exponent p) = p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. conjugate_exponent (conjugate_exponent p) = p", "using conjugate_exponent_real(3)[OF \\<open>p2 > 1\\<close>] conjugate_exponent_real_ennreal[OF \\<open>p2 > 1\\<close>]\n      conjugate_exponent_real_ennreal[OF conjugate_exponent_real(2)[OF \\<open>p2 > 1\\<close>]]"], ["proof (prove)\nusing this:\n  conjugate_exponent (conjugate_exponent p2) = p2\n  conjugate_exponent (ennreal p2) = ennreal (conjugate_exponent p2)\n  conjugate_exponent (ennreal (conjugate_exponent p2)) =\n  ennreal (conjugate_exponent (conjugate_exponent p2))\n\ngoal (1 subgoal):\n 1. conjugate_exponent (conjugate_exponent p) = p", "unfolding * \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  conjugate_exponent (conjugate_exponent p2) = p2\n  conjugate_exponent (ennreal p2) = ennreal (conjugate_exponent p2)\n  conjugate_exponent (ennreal (conjugate_exponent p2)) =\n  ennreal (conjugate_exponent (conjugate_exponent p2))\n\ngoal (1 subgoal):\n 1. conjugate_exponent (conjugate_exponent (ennreal p2)) = ennreal p2", "by auto"], ["proof (state)\nthis:\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "have \"1 / p + 1 / conjugate_exponent p = ennreal(1/p2 + 1/(conjugate_exponent p2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p =\n    ennreal (1 / p2 + 1 / conjugate_exponent p2)", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / ennreal (conjugate_exponent p2) =\n    ennreal (1 / p2 + 1 / conjugate_exponent p2)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / ennreal p2 + 1 / ennreal (conjugate_exponent p2) =\n    ennreal (1 / p2 + 1 / conjugate_exponent p2)", "using conjugate_exponent_real(2)[OF \\<open>p2 > 1\\<close>] \\<open>p2 > 1\\<close>"], ["proof (prove)\nusing this:\n  1 < conjugate_exponent p2\n  1 < p2\n\ngoal (1 subgoal):\n 1. 1 / ennreal p2 + 1 / ennreal (conjugate_exponent p2) =\n    ennreal (1 / p2 + 1 / conjugate_exponent p2)", "apply (subst ennreal_plus, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>1 < conjugate_exponent p2; 1 < p2\\<rbrakk>\n    \\<Longrightarrow> 1 / ennreal p2 + 1 / ennreal (conjugate_exponent p2) =\n                      ennreal (1 / p2) + ennreal (1 / conjugate_exponent p2)", "apply (subst divide_ennreal[symmetric], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>1 < conjugate_exponent p2; 1 < p2;\n     1 / ennreal (conjugate_exponent p2) \\<noteq>\n     ennreal (1 / conjugate_exponent p2)\\<rbrakk>\n    \\<Longrightarrow> 1 / ennreal p2 = \\<top>", "using divide_ennreal_def inverse_ennreal inverse_eq_divide"], ["proof (prove)\nusing this:\n  ?x / ?y = ?x * inverse ?y\n  0 < ?r \\<Longrightarrow> inverse (ennreal ?r) = ennreal (inverse ?r)\n  inverse ?a = (1::?'a) / ?a\n\ngoal (1 subgoal):\n 1. \\<lbrakk>1 < conjugate_exponent p2; 1 < p2;\n     1 / ennreal (conjugate_exponent p2) \\<noteq>\n     ennreal (1 / conjugate_exponent p2)\\<rbrakk>\n    \\<Longrightarrow> 1 / ennreal p2 = \\<top>", "by auto"], ["proof (state)\nthis:\n  1 / p + 1 / conjugate_exponent p =\n  ennreal (1 / p2 + 1 / conjugate_exponent p2)\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "then"], ["proof (chain)\npicking this:\n  1 / p + 1 / conjugate_exponent p =\n  ennreal (1 / p2 + 1 / conjugate_exponent p2)", "have c: \"1 / p + 1 / conjugate_exponent p = 1\""], ["proof (prove)\nusing this:\n  1 / p + 1 / conjugate_exponent p =\n  ennreal (1 / p2 + 1 / conjugate_exponent p2)\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1", "using conjugate_exponent_real[OF \\<open>p2 > 1\\<close>]"], ["proof (prove)\nusing this:\n  1 / p + 1 / conjugate_exponent p =\n  ennreal (1 / p2 + 1 / conjugate_exponent p2)\n  1 / p2 + 1 / conjugate_exponent p2 = 1\n  1 < conjugate_exponent p2\n  conjugate_exponent (conjugate_exponent p2) = p2\n  (p2 - 1) * conjugate_exponent p2 = p2\n  p2 - p2 / conjugate_exponent p2 = 1\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1", "by auto"], ["proof (state)\nthis:\n  1 / p + 1 / conjugate_exponent p = 1\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n                         1 \\<le> conjugate_exponent p \\<and>\n                         conjugate_exponent (conjugate_exponent p) = p\n 2. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 3. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "using a b c"], ["proof (prove)\nusing this:\n  1 \\<le> conjugate_exponent p\n  conjugate_exponent (conjugate_exponent p) = p\n  1 / p + 1 / conjugate_exponent p = 1\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "by simp"], ["proof (state)\nthis:\n  1 / p + 1 / conjugate_exponent p = 1 \\<and>\n  1 \\<le> conjugate_exponent p \\<and>\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (2 subgoals):\n 1. p = 1 \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p\n 2. p = \\<infinity> \\<Longrightarrow>\n    1 / p + 1 / conjugate_exponent p = 1 \\<and>\n    1 \\<le> conjugate_exponent p \\<and>\n    conjugate_exponent (conjugate_exponent p) = p", "qed (auto)"], ["proof (state)\nthis:\n  1 / p + 1 / conjugate_exponent p = 1 \\<and>\n  1 \\<le> conjugate_exponent p \\<and>\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (3 subgoals):\n 1. 1 / p + 1 / conjugate_exponent p = 1\n 2. 1 \\<le> conjugate_exponent p\n 3. conjugate_exponent (conjugate_exponent p) = p", "then"], ["proof (chain)\npicking this:\n  1 / p + 1 / conjugate_exponent p = 1 \\<and>\n  1 \\<le> conjugate_exponent p \\<and>\n  conjugate_exponent (conjugate_exponent p) = p", "show \"1/p + 1/(conjugate_exponent p) = 1\"\n            \"conjugate_exponent p \\<ge> 1\"\n            \"conjugate_exponent(conjugate_exponent p) = p\""], ["proof (prove)\nusing this:\n  1 / p + 1 / conjugate_exponent p = 1 \\<and>\n  1 \\<le> conjugate_exponent p \\<and>\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1 &&&\n    1 \\<le> conjugate_exponent p &&&\n    conjugate_exponent (conjugate_exponent p) = p", "by auto"], ["proof (state)\nthis:\n  1 / p + 1 / conjugate_exponent p = 1\n  1 \\<le> conjugate_exponent p\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma conjugate_exponent_ennreal_iff:\n  assumes \"p \\<ge> (1::ennreal)\"\n  shows \"q = conjugate_exponent p \\<longleftrightarrow> (1/p + 1/q = 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (q = conjugate_exponent p) = (1 / p + 1 / q = 1)", "using conjugate_exponent_ennreal[OF assms]"], ["proof (prove)\nusing this:\n  1 / p + 1 / conjugate_exponent p = 1\n  1 \\<le> conjugate_exponent p\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (1 subgoal):\n 1. (q = conjugate_exponent p) = (1 / p + 1 / q = 1)", "by (auto, metis ennreal_add_diff_cancel_left ennreal_add_eq_top ennreal_top_neq_one one_divide_one_divide_ennreal)"], ["", "lemma conjugate_exponent_ennrealI:\n  assumes \"1/p + 1/q = (1::ennreal)\"\n  shows \"p \\<ge> 1\" \"q \\<ge> 1\" \"p = conjugate_exponent q\" \"q = conjugate_exponent p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 \\<le> p &&& 1 \\<le> q) &&&\n    p = conjugate_exponent q &&& q = conjugate_exponent p", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. 1 \\<le> p\n 2. 1 \\<le> q\n 3. p = conjugate_exponent q\n 4. q = conjugate_exponent p", "have \"1/p \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p \\<le> 1", "using assms"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. 1 / p \\<le> 1", "using le_iff_add"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1\n  (?a \\<le> ?b) = (\\<exists>c. ?b = ?a + c)\n\ngoal (1 subgoal):\n 1. 1 / p \\<le> 1", "by fastforce"], ["proof (state)\nthis:\n  1 / p \\<le> 1\n\ngoal (4 subgoals):\n 1. 1 \\<le> p\n 2. 1 \\<le> q\n 3. p = conjugate_exponent q\n 4. q = conjugate_exponent p", "then"], ["proof (chain)\npicking this:\n  1 / p \\<le> 1", "show \"p \\<ge> 1\""], ["proof (prove)\nusing this:\n  1 / p \\<le> 1\n\ngoal (1 subgoal):\n 1. 1 \\<le> p", "by (metis assms divide_ennreal_def ennreal_add_eq_top ennreal_divide_self ennreal_divide_zero ennreal_le_epsilon ennreal_one_neq_top mult.left_neutral mult_left_le zero_le)"], ["proof (state)\nthis:\n  1 \\<le> p\n\ngoal (3 subgoals):\n 1. 1 \\<le> q\n 2. p = conjugate_exponent q\n 3. q = conjugate_exponent p", "then"], ["proof (chain)\npicking this:\n  1 \\<le> p", "show \"q = conjugate_exponent p\""], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. q = conjugate_exponent p", "using conjugate_exponent_ennreal_iff assms"], ["proof (prove)\nusing this:\n  1 \\<le> p\n  1 \\<le> ?p \\<Longrightarrow>\n  (?q = conjugate_exponent ?p) = (1 / ?p + 1 / ?q = 1)\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. q = conjugate_exponent p", "by auto"], ["proof (state)\nthis:\n  q = conjugate_exponent p\n\ngoal (2 subgoals):\n 1. 1 \\<le> q\n 2. p = conjugate_exponent q", "then"], ["proof (chain)\npicking this:\n  q = conjugate_exponent p", "show \"q \\<ge> 1\""], ["proof (prove)\nusing this:\n  q = conjugate_exponent p\n\ngoal (1 subgoal):\n 1. 1 \\<le> q", "using conjugate_exponent_ennreal[OF \\<open>p \\<ge> 1\\<close>]"], ["proof (prove)\nusing this:\n  q = conjugate_exponent p\n  1 / p + 1 / conjugate_exponent p = 1\n  1 \\<le> conjugate_exponent p\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (1 subgoal):\n 1. 1 \\<le> q", "by auto"], ["proof (state)\nthis:\n  1 \\<le> q\n\ngoal (1 subgoal):\n 1. p = conjugate_exponent q", "show \"p = conjugate_exponent q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p = conjugate_exponent q", "using conjugate_exponent_ennreal_iff[OF \\<open>q\\<ge>1\\<close>, of p] assms"], ["proof (prove)\nusing this:\n  (p = conjugate_exponent q) = (1 / q + 1 / p = 1)\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. p = conjugate_exponent q", "by (simp add: add.commute)"], ["proof (state)\nthis:\n  p = conjugate_exponent q\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Convexity inequalities and integration\\<close>"], ["", "text \\<open>In this paragraph, we describe the basic inequalities relating the integral of a function\nand of its $p$-th power, for $p > 0$. These inequalities imply in particular that the $L^p$ norm\nsatisfies the triangular inequality, a feature we will need when defining the $L^p$ spaces below.\nIn particular, we prove the H?lder and Minkowski inequalities. The H?lder inequality,\nespecially, is the basis of all further inequalities for $L^p$ spaces.\n\\<close>"], ["", "lemma (in prob_space) bound_L1_Lp:\n  assumes \"p \\<ge> (1::real)\"\n          \"f \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n  shows \"integrable M f\"\n        \"abs(\\<integral>x. f x \\<partial>M) powr p \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M)\"\n        \"abs(\\<integral>x. f x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M f &&&\n    \\<bar>expectation f\\<bar> powr p\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) &&&\n    \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable M f\n 2. \\<bar>expectation f\\<bar> powr p\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 3. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "have *: \"norm x \\<le> 1 + (norm x) powr p\" for x::real"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm x \\<le> 1 + norm x powr p", "apply (cases \"norm x \\<le> 1\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. norm x \\<le> 1 \\<Longrightarrow> norm x \\<le> 1 + norm x powr p\n 2. \\<not> norm x \\<le> 1 \\<Longrightarrow> norm x \\<le> 1 + norm x powr p", "apply (meson le_add_same_cancel1 order.trans powr_ge_pzero)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> norm x \\<le> 1 \\<Longrightarrow> norm x \\<le> 1 + norm x powr p", "apply (metis add_le_same_cancel2 assms(1) less_le_trans linear not_less not_one_le_zero powr_le_cancel_iff powr_one_gt_zero_iff)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  norm ?x12 \\<le> 1 + norm ?x12 powr p\n\ngoal (3 subgoals):\n 1. integrable M f\n 2. \\<bar>expectation f\\<bar> powr p\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 3. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "show *: \"integrable M f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M f", "apply (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. 1 + \\<bar>f x\\<bar> powr p\"], auto simp add: assms)"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> 1 + \\<bar>f x\\<bar> powr p", "using *"], ["proof (prove)\nusing this:\n  norm ?x12 \\<le> 1 + norm ?x12 powr p\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> 1 + \\<bar>f x\\<bar> powr p", "by auto"], ["proof (state)\nthis:\n  integrable M f\n\ngoal (2 subgoals):\n 1. \\<bar>expectation f\\<bar> powr p\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 2. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "show \"abs(\\<integral>x. f x \\<partial>M) powr p \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>expectation f\\<bar> powr p\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "by (rule jensens_inequality[OF * _ _ assms(3) convex_abs_powr[OF \\<open>p \\<ge> 1\\<close>]], auto)"], ["proof (state)\nthis:\n  \\<bar>expectation f\\<bar> powr p\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  \\<bar>expectation f\\<bar> powr p\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "have \"(abs(\\<integral>x. f x \\<partial>M) powr p) powr (1/p) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\nusing this:\n  \\<bar>expectation f\\<bar> powr p\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. (\\<bar>expectation f\\<bar> powr p) powr (1 / p)\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "using assms(1) powr_mono2"], ["proof (prove)\nusing this:\n  \\<bar>expectation f\\<bar> powr p\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n  1 \\<le> p\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n\ngoal (1 subgoal):\n 1. (\\<bar>expectation f\\<bar> powr p) powr (1 / p)\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "by auto"], ["proof (state)\nthis:\n  (\\<bar>expectation f\\<bar> powr p) powr (1 / p)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  (\\<bar>expectation f\\<bar> powr p) powr (1 / p)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "show \"abs(\\<integral>x. f x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\nusing this:\n  (\\<bar>expectation f\\<bar> powr p) powr (1 / p)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "using \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  (\\<bar>expectation f\\<bar> powr p) powr (1 / p)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. \\<bar>expectation f\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)", "by (auto simp add: powr_powr)"], ["proof (state)\nthis:\n  \\<bar>expectation f\\<bar>\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Holder_inequality:\n  assumes \"p > (0::real)\" \"q > 0\" \"1/p + 1/q = 1\"\n      and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n          \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q)\"\n  shows \"integrable M (\\<lambda>x. f x * g x)\"\n        \"(\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\"\n        \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x) &&&\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q) &&&\n    \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. f x * g x)\n 2. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 3. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"p > 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 < p", "using conjugate_exponent_realI(1)[OF \\<open>p>0\\<close> \\<open>q>0\\<close> \\<open>1/p+1/q=1\\<close>]"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. 1 < p", "."], ["proof (state)\nthis:\n  1 < p\n\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. f x * g x)\n 2. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 3. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have *: \"x * y \\<le> x powr p + y powr q\" if \"x \\<ge> 0\" \"y \\<ge> 0\" for x y"], ["proof (prove)\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "have \"x * y = (x powr p) powr (1/p) * (y powr q) powr (1/q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x * y = (x powr p) powr (1 / p) * (y powr q) powr (1 / q)", "using \\<open>p > 0\\<close> \\<open>q > 0\\<close> powr_powr that(1) that(2)"], ["proof (prove)\nusing this:\n  0 < p\n  0 < q\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 \\<le> x\n  0 \\<le> y\n\ngoal (1 subgoal):\n 1. x * y = (x powr p) powr (1 / p) * (y powr q) powr (1 / q)", "by auto"], ["proof (state)\nthis:\n  x * y = (x powr p) powr (1 / p) * (y powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "also"], ["proof (state)\nthis:\n  x * y = (x powr p) powr (1 / p) * (y powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "have \"... \\<le> (max (x powr p) (y powr q)) powr (1/p) * (max (x powr p) (y powr q)) powr (1/q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x powr p) powr (1 / p) * (y powr q) powr (1 / q)\n    \\<le> max (x powr p) (y powr q) powr (1 / p) *\n          max (x powr p) (y powr q) powr (1 / q)", "apply (rule mult_mono, auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (x powr p) powr (1 / p) \\<le> max (x powr p) (y powr q) powr (1 / p)\n 2. (y powr q) powr (1 / q) \\<le> max (x powr p) (y powr q) powr (1 / q)", "using assms(1) assms(2) powr_mono2"], ["proof (prove)\nusing this:\n  0 < p\n  0 < q\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n\ngoal (2 subgoals):\n 1. (x powr p) powr (1 / p) \\<le> max (x powr p) (y powr q) powr (1 / p)\n 2. (y powr q) powr (1 / q) \\<le> max (x powr p) (y powr q) powr (1 / q)", "by auto"], ["proof (state)\nthis:\n  (x powr p) powr (1 / p) * (y powr q) powr (1 / q)\n  \\<le> max (x powr p) (y powr q) powr (1 / p) *\n        max (x powr p) (y powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "also"], ["proof (state)\nthis:\n  (x powr p) powr (1 / p) * (y powr q) powr (1 / q)\n  \\<le> max (x powr p) (y powr q) powr (1 / p) *\n        max (x powr p) (y powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "have \"... = max (x powr p) (y powr q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max (x powr p) (y powr q) powr (1 / p) *\n    max (x powr p) (y powr q) powr (1 / q) =\n    max (x powr p) (y powr q)", "by (metis max_def mult.right_neutral powr_add powr_powr assms(3))"], ["proof (state)\nthis:\n  max (x powr p) (y powr q) powr (1 / p) *\n  max (x powr p) (y powr q) powr (1 / q) =\n  max (x powr p) (y powr q)\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "also"], ["proof (state)\nthis:\n  max (x powr p) (y powr q) powr (1 / p) *\n  max (x powr p) (y powr q) powr (1 / q) =\n  max (x powr p) (y powr q)\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "have \"... \\<le> x powr p + y powr q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max (x powr p) (y powr q) \\<le> x powr p + y powr q", "by auto"], ["proof (state)\nthis:\n  max (x powr p) (y powr q) \\<le> x powr p + y powr q\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "finally"], ["proof (chain)\npicking this:\n  x * y \\<le> x powr p + y powr q", "show ?thesis"], ["proof (prove)\nusing this:\n  x * y \\<le> x powr p + y powr q\n\ngoal (1 subgoal):\n 1. x * y \\<le> x powr p + y powr q", "by simp"], ["proof (state)\nthis:\n  x * y \\<le> x powr p + y powr q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?x; 0 \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x * ?y \\<le> ?x powr p + ?y powr q\n\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. f x * g x)\n 2. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 3. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "show [simp]: \"integrable M (\\<lambda>x. f x * g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x)", "apply (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr q\"], auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M\n     (\\<lambda>x. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr q)\n 2. AE x in M. \\<bar>f x * g x\\<bar>\n               \\<le> \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr q", "by (rule Bochner_Integration.integrable_add, auto simp add: assms * abs_mult)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * g x)\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "text \\<open>The proof of the main inequality is done by applying the inequality\n        $(\\int |h| d\\mu \\leq \\int |h|^p d\\mu)^{1/p}$ to the right function $h$ in the right\n        probability space. One should take $h = f \\cdot |g|^{1-q}$, and $d\\mu = |g|^q dM / I$,\n        where $I = \\int |g|^q$. This readily gives the result.\\<close>"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * g x)\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "show *: \"(\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "proof (cases \"(\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q = 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "case True"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>g x\\<bar> powr q = 0\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q = 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>g x\\<bar> powr q = 0", "have \"AE x in M. \\<bar>g x\\<bar> powr q = 0\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>g x\\<bar> powr q = 0\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> powr q = 0", "by (subst integral_nonneg_eq_0_iff_AE[symmetric], auto simp add: assms)"], ["proof (state)\nthis:\n  AE x in M. \\<bar>g x\\<bar> powr q = 0\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q = 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>g x\\<bar> powr q = 0", "have *: \"AE x in M. f x * g x = 0\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> powr q = 0\n\ngoal (1 subgoal):\n 1. AE x in M. f x * g x = 0", "using \\<open>q > 0\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> powr q = 0\n  0 < q\n\ngoal (1 subgoal):\n 1. AE x in M. f x * g x = 0", "by auto"], ["proof (state)\nthis:\n  AE x in M. f x * g x = 0\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q = 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"(\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M) = (\\<integral>x. 0 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x * g x\\<bar> = LINT x|M. 0", "apply (rule integral_cong_AE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. \\<bar>f x * g x\\<bar>) \\<in> borel_measurable M\n 2. (\\<lambda>x. 0) \\<in> borel_measurable M\n 3. AE x in M. \\<bar>f x * g x\\<bar> = 0", "using *"], ["proof (prove)\nusing this:\n  AE x in M. f x * g x = 0\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. \\<bar>f x * g x\\<bar>) \\<in> borel_measurable M\n 2. (\\<lambda>x. 0) \\<in> borel_measurable M\n 3. AE x in M. \\<bar>f x * g x\\<bar> = 0", "by auto"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar> = LINT x|M. 0\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q = 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x * g x\\<bar> = LINT x|M. 0", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x * g x\\<bar> = LINT x|M. 0\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "by auto"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "case False"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "moreover"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"(\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) \\<ge> (\\<integral>x. 0 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. 0 \\<le> LINT x|M. \\<bar>g x\\<bar> powr q", "by (rule integral_mono, auto simp add: assms)"], ["proof (state)\nthis:\n  LINT x|M. 0 \\<le> LINT x|M. \\<bar>g x\\<bar> powr q\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "ultimately"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0\n  LINT x|M. 0 \\<le> LINT x|M. \\<bar>g x\\<bar> powr q", "have *: \"(\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) > 0\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0\n  LINT x|M. 0 \\<le> LINT x|M. \\<bar>g x\\<bar> powr q\n\ngoal (1 subgoal):\n 1. 0 < LINT x|M. \\<bar>g x\\<bar> powr q", "by (simp add: le_less)"], ["proof (state)\nthis:\n  0 < LINT x|M. \\<bar>g x\\<bar> powr q\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "define I where \"I = (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M)\""], ["proof (state)\nthis:\n  I = LINT x|M. \\<bar>g x\\<bar> powr q\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have [simp]: \"I > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < I", "unfolding I_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < LINT x|M. \\<bar>g x\\<bar> powr q", "using *"], ["proof (prove)\nusing this:\n  0 < LINT x|M. \\<bar>g x\\<bar> powr q\n\ngoal (1 subgoal):\n 1. 0 < LINT x|M. \\<bar>g x\\<bar> powr q", "by auto"], ["proof (state)\nthis:\n  0 < I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "define M2 where \"M2 = density M (\\<lambda>x. \\<bar>g x\\<bar> powr q / I)\""], ["proof (state)\nthis:\n  M2 = density M (\\<lambda>x. ennreal (\\<bar>g x\\<bar> powr q / I))\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "interpret prob_space M2"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob_space M2", "apply (standard, unfold M2_def, auto, subst emeasure_density, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr q / I)\n                       \\<partial>M =\n    1", "apply (subst divide_ennreal[symmetric], auto, subst nn_integral_divide, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr q) \\<partial>M /\n    ennreal I =\n    1", "apply (subst nn_integral_eq_integral, auto simp add: assms, unfold I_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>g x\\<bar> powr q) /\n    ennreal (LINT x|M. \\<bar>g x\\<bar> powr q) =\n    1", "using *"], ["proof (prove)\nusing this:\n  0 < LINT x|M. \\<bar>g x\\<bar> powr q\n\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>g x\\<bar> powr q) /\n    ennreal (LINT x|M. \\<bar>g x\\<bar> powr q) =\n    1", "by auto"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have [simp]: \"p \\<ge> 1\" \"p \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> p &&& 0 \\<le> p", "using \\<open>p > 1\\<close>"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. 1 \\<le> p &&& 0 \\<le> p", "by auto"], ["proof (state)\nthis:\n  1 \\<le> p\n  0 \\<le> p\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have A: \"q + (1 - q) * p = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q + (1 - q) * p = 0", "using assms"], ["proof (prove)\nusing this:\n  0 < p\n  0 < q\n  1 / p + 1 / q = 1\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q)\n\ngoal (1 subgoal):\n 1. q + (1 - q) * p = 0", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  q + (1 - q) * p = 0\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have B: \"1 - 1/p = 1/q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - 1 / p = 1 / q", "using \\<open>1/p + 1/q = 1\\<close>"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. 1 - 1 / p = 1 / q", "by auto"], ["proof (state)\nthis:\n  1 - 1 / p = 1 / q\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "define f2 where \"f2 = (\\<lambda>x. f x * indicator {y\\<in> space M. g y \\<noteq> 0} x)\""], ["proof (state)\nthis:\n  f2 = (\\<lambda>x. f x * indicat_real {y \\<in> space M. g y \\<noteq> 0} x)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have [measurable]: \"f2 \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f2 \\<in> borel_measurable M", "unfolding f2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * indicat_real {y \\<in> space M. g y \\<noteq> 0} x)\n    \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f2 \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "define h where \"h = (\\<lambda>x. \\<bar>f2 x\\<bar> * \\<bar>g x\\<bar> powr (1-q))\""], ["proof (state)\nthis:\n  h = (\\<lambda>x. \\<bar>f2 x\\<bar> * \\<bar>g x\\<bar> powr (1 - q))\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have [measurable]: \"h \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> borel_measurable M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f2 x\\<bar> * \\<bar>g x\\<bar> powr (1 - q))\n    \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  h \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have [measurable]: \"h \\<in> borel_measurable M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. random_variable borel h", "unfolding M2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> borel_measurable\n             (density M (\\<lambda>x. ennreal (\\<bar>g x\\<bar> powr q / I)))", "by auto"], ["proof (state)\nthis:\n  random_variable borel h\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have Eq: \"(\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p = \\<bar>f2 x\\<bar> powr p / I\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p =\n    \\<bar>f2 x\\<bar> powr p / I", "apply (insert \\<open>I>0\\<close>, auto simp add: divide_simps, unfold h_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<noteq> 0 \\<Longrightarrow>\n    \\<bar>g x\\<bar> powr q *\n    \\<bar>\\<bar>f2 x\\<bar> * \\<bar>g x\\<bar> powr (1 - q)\\<bar> powr p =\n    \\<bar>f2 x\\<bar> powr p", "apply (auto simp add: divide_nonneg_pos divide_simps powr_mult powr_powr powr_add[symmetric] A)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I \\<noteq> 0; g x = 0\\<rbrakk> \\<Longrightarrow> f2 x = 0", "unfolding f2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I \\<noteq> 0; g x = 0\\<rbrakk>\n    \\<Longrightarrow> f x *\n                      indicat_real {y \\<in> space M. g y \\<noteq> 0} x =\n                      0", "by auto"], ["proof (state)\nthis:\n  (\\<bar>g ?x1\\<bar> powr q / I) *\\<^sub>R \\<bar>h ?x1\\<bar> powr p =\n  \\<bar>f2 ?x1\\<bar> powr p / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"integrable M2 (\\<lambda>x. \\<bar>h x\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M2 (\\<lambda>x. \\<bar>h x\\<bar> powr p)", "unfolding M2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable\n     (density M (\\<lambda>x. ennreal (\\<bar>g x\\<bar> powr q / I)))\n     (\\<lambda>x. \\<bar>h x\\<bar> powr p)", "apply (subst integrable_density, simp, simp, simp add: divide_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x.\n         (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p)", "apply (subst Eq, rule integrable_divide, rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. \\<bar>f x\\<bar> powr p\"], unfold f2_def)"], ["proof (prove)\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 2. (\\<lambda>x.\n        \\<bar>f x *\n              indicat_real {y \\<in> space M. g y \\<noteq> 0} x\\<bar> powr\n        p)\n    \\<in> borel_measurable M\n 3. AE x in M. norm\n                (\\<bar>f x *\n                       indicat_real {y \\<in> space M. g y \\<noteq> 0}\n                        x\\<bar> powr\n                 p)\n               \\<le> norm (\\<bar>f x\\<bar> powr p)", "by (unfold indicator_def, auto simp add: \\<open>integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\\<close>)"], ["proof (state)\nthis:\n  integrable M2 (\\<lambda>x. \\<bar>h x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "then"], ["proof (chain)\npicking this:\n  integrable M2 (\\<lambda>x. \\<bar>h x\\<bar> powr p)", "have \"integrable M2 (\\<lambda>x. \\<bar>h x\\<bar>)\""], ["proof (prove)\nusing this:\n  integrable M2 (\\<lambda>x. \\<bar>h x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. integrable M2 (\\<lambda>x. \\<bar>h x\\<bar>)", "by (metis bound_L1_Lp(1) \\<open>random_variable borel h\\<close> \\<open>p > 1\\<close> integrable_abs le_less)"], ["proof (state)\nthis:\n  integrable M2 (\\<lambda>x. \\<bar>h x\\<bar>)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"(\\<integral>x. \\<bar>h x\\<bar> powr p \\<partial>M2) = (\\<integral>x. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R (\\<bar>h x\\<bar> powr p) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p) =\n    LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p", "unfolding M2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|density M (\\<lambda>x. ennreal (\\<bar>g x\\<bar> powr q / I)).\n       \\<bar>h x\\<bar> powr p =\n    LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p", "by (rule integral_density[of \"\\<lambda>x. \\<bar>h x\\<bar> powr p\" M \"\\<lambda>x. \\<bar>g x\\<bar> powr q / I\"], auto simp add: divide_simps)"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p) =\n  LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p) =\n  LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... = (\\<integral>x. \\<bar>f2 x\\<bar> powr p / I \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p =\n    LINT x|M. \\<bar>f2 x\\<bar> powr p / I", "apply (rule Bochner_Integration.integral_cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. M = M\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p =\n       \\<bar>f2 x\\<bar> powr p / I", "using Eq"], ["proof (prove)\nusing this:\n  (\\<bar>g ?x1\\<bar> powr q / I) *\\<^sub>R \\<bar>h ?x1\\<bar> powr p =\n  \\<bar>f2 ?x1\\<bar> powr p / I\n\ngoal (2 subgoals):\n 1. M = M\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p =\n       \\<bar>f2 x\\<bar> powr p / I", "by auto"], ["proof (state)\nthis:\n  LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p =\n  LINT x|M. \\<bar>f2 x\\<bar> powr p / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar> powr p =\n  LINT x|M. \\<bar>f2 x\\<bar> powr p / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p / I \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f2 x\\<bar> powr p / I\n    \\<le> LINT x|M. \\<bar>f x\\<bar> powr p / I", "apply (rule integral_mono', rule integrable_divide[OF \\<open>integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\\<close>])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       \\<bar>f2 x\\<bar> powr p / I \\<le> \\<bar>f x\\<bar> powr p / I\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow> 0 \\<le> \\<bar>f x\\<bar> powr p / I", "unfolding f2_def indicator_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       \\<bar>f x *\n             (if x \\<in> {y \\<in> space M. g y \\<noteq> 0} then 1\n              else 0)\\<bar> powr\n       p /\n       I\n       \\<le> \\<bar>f x\\<bar> powr p / I\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow> 0 \\<le> \\<bar>f x\\<bar> powr p / I", "using \\<open>I > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < I\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       \\<bar>f x *\n             (if x \\<in> {y \\<in> space M. g y \\<noteq> 0} then 1\n              else 0)\\<bar> powr\n       p /\n       I\n       \\<le> \\<bar>f x\\<bar> powr p / I\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow> 0 \\<le> \\<bar>f x\\<bar> powr p / I", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f2 x\\<bar> powr p / I\n  \\<le> LINT x|M. \\<bar>f x\\<bar> powr p / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "finally"], ["proof (chain)\npicking this:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p)\n  \\<le> LINT x|M. \\<bar>f x\\<bar> powr p / I", "have C: \"(\\<integral>x. \\<bar>h x\\<bar> powr p \\<partial>M2) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p / I \\<partial>M)\""], ["proof (prove)\nusing this:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p)\n  \\<le> LINT x|M. \\<bar>f x\\<bar> powr p / I\n\ngoal (1 subgoal):\n 1. expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p)\n    \\<le> LINT x|M. \\<bar>f x\\<bar> powr p / I", "by simp"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar> powr p)\n  \\<le> LINT x|M. \\<bar>f x\\<bar> powr p / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"(\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M) / I = (\\<integral>x. \\<bar>f x * g x\\<bar> / I \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x * g x\\<bar>) / I =\n    LINT x|M. \\<bar>f x * g x\\<bar> / I", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x * g x\\<bar>) / I =\n  LINT x|M. \\<bar>f x * g x\\<bar> / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x * g x\\<bar>) / I =\n  LINT x|M. \\<bar>f x * g x\\<bar> / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... = (\\<integral>x. \\<bar>f2 x * g x\\<bar> / I \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x * g x\\<bar> / I =\n    LINT x|M. \\<bar>f2 x * g x\\<bar> / I", "by (auto simp add: divide_simps, rule Bochner_Integration.integral_cong, unfold f2_def indicator_def, auto)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar> / I = LINT x|M. \\<bar>f2 x * g x\\<bar> / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar> / I = LINT x|M. \\<bar>f2 x * g x\\<bar> / I\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... = (\\<integral>x. \\<bar>h x\\<bar> \\<partial>M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f2 x * g x\\<bar> / I =\n    expectation (\\<lambda>x. \\<bar>h x\\<bar>)", "apply (unfold M2_def, subst integral_density, simp, simp, simp add: divide_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f2 x * g x\\<bar> / I =\n    LINT x|M. (\\<bar>g x\\<bar> powr q / I) *\\<^sub>R \\<bar>h x\\<bar>", "by (rule Bochner_Integration.integral_cong, unfold h_def, auto simp add: divide_simps algebra_simps powr_add[symmetric] abs_mult)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f2 x * g x\\<bar> / I =\n  expectation (\\<lambda>x. \\<bar>h x\\<bar>)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f2 x * g x\\<bar> / I =\n  expectation (\\<lambda>x. \\<bar>h x\\<bar>)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... \\<le> abs (\\<integral>x. \\<bar>h x\\<bar> \\<partial>M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expectation (\\<lambda>x. \\<bar>h x\\<bar>)\n    \\<le> \\<bar>expectation (\\<lambda>x. \\<bar>h x\\<bar>)\\<bar>", "by auto"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar>)\n  \\<le> \\<bar>expectation (\\<lambda>x. \\<bar>h x\\<bar>)\\<bar>\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>h x\\<bar>)\n  \\<le> \\<bar>expectation (\\<lambda>x. \\<bar>h x\\<bar>)\\<bar>\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... \\<le> (\\<integral>x. abs(\\<bar>h x\\<bar>) powr p \\<partial>M2) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>expectation (\\<lambda>x. \\<bar>h x\\<bar>)\\<bar>\n    \\<le> expectation (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p) powr\n          (1 / p)", "apply (rule bound_L1_Lp(3)[of p \"\\<lambda>x. \\<bar>h x\\<bar>\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. 1 \\<le> p\n 2. random_variable borel (\\<lambda>x. \\<bar>h x\\<bar>)\n 3. integrable M2 (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p)", "by (auto simp add: \\<open>integrable M2 (\\<lambda>x. \\<bar>h x\\<bar> powr p)\\<close>)"], ["proof (state)\nthis:\n  \\<bar>expectation (\\<lambda>x. \\<bar>h x\\<bar>)\\<bar>\n  \\<le> expectation (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p) powr\n        (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  \\<bar>expectation (\\<lambda>x. \\<bar>h x\\<bar>)\\<bar>\n  \\<le> expectation (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p) powr\n        (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p / I \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expectation (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p) powr\n    (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p / I) powr (1 / p)", "by (rule powr_mono2, insert C, auto)"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p / I) powr (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>\\<bar>h x\\<bar>\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p / I) powr (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... \\<le> ((\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) / I) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p / I) powr (1 / p)\n    \\<le> ((LINT x|M. \\<bar>f x\\<bar> powr p) / I) powr (1 / p)", "apply (rule powr_mono2, auto simp add: divide_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. p < 0 \\<Longrightarrow> False", "using \\<open>p \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> p\n\ngoal (1 subgoal):\n 1. p < 0 \\<Longrightarrow> False", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p / I) powr (1 / p)\n  \\<le> ((LINT x|M. \\<bar>f x\\<bar> powr p) / I) powr (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p / I) powr (1 / p)\n  \\<le> ((LINT x|M. \\<bar>f x\\<bar> powr p) / I) powr (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * I powr(-1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((LINT x|M. \\<bar>f x\\<bar> powr p) / I) powr (1 / p) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (- 1 / p)", "by (auto simp add: less_imp_le powr_divide powr_minus_divide)"], ["proof (state)\nthis:\n  ((LINT x|M. \\<bar>f x\\<bar> powr p) / I) powr (1 / p) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (- 1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "finally"], ["proof (chain)\npicking this:\n  (LINT x|M. \\<bar>f x * g x\\<bar>) / I\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (- 1 / p)", "have \"(\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * I * I powr(-1/p)\""], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x * g x\\<bar>) / I\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (- 1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I *\n          I powr (- 1 / p)", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I *\n        I powr (- 1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I *\n        I powr (- 1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * I powr (1-1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I * I powr (- 1 / p) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (1 - 1 / p)", "by (auto simp add: powr_mult_base less_imp_le)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I * I powr (- 1 / p) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (1 - 1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I * I powr (- 1 / p) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (1 - 1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (1 - 1 / p) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "unfolding I_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 - 1 / p) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "using B"], ["proof (prove)\nusing this:\n  1 - 1 / p = 1 / q\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 - 1 / p) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) * I powr (1 - 1 / p) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n  (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q \\<noteq> 0 \\<Longrightarrow>\n    LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "by simp"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "have \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x * g x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar> \\<le> LINT x|M. \\<bar>f x * g x\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar> \\<le> LINT x|M. \\<bar>f x * g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "then"], ["proof (chain)\npicking this:\n  \\<bar>LINT x|M. f x * g x\\<bar> \\<le> LINT x|M. \\<bar>f x * g x\\<bar>", "show \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) * (\\<integral>x. \\<bar>g x\\<bar> powr q \\<partial>M) powr (1/q)\""], ["proof (prove)\nusing this:\n  \\<bar>LINT x|M. f x * g x\\<bar> \\<le> LINT x|M. \\<bar>f x * g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "using *"], ["proof (prove)\nusing this:\n  \\<bar>LINT x|M. f x * g x\\<bar> \\<le> LINT x|M. \\<bar>f x * g x\\<bar>\n  LINT x|M. \\<bar>f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n          (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)", "by linarith"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) *\n        (LINT x|M. \\<bar>g x\\<bar> powr q) powr (1 / q)\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Minkowski_inequality:\n  assumes \"p \\<ge> (1::real)\"\n      and [measurable, simp]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n          \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\"\n  shows \"integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\"\n        \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p)\n          \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p) &&&\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\n 2. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have *: \"\\<bar>x + y\\<bar> powr p \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)\" for x y::real"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "have \"\\<bar>x + y\\<bar> \\<le> \\<bar>x\\<bar> + \\<bar>y\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> \\<le> \\<bar>x\\<bar> + \\<bar>y\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>x + y\\<bar> \\<le> \\<bar>x\\<bar> + \\<bar>y\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "also"], ["proof (state)\nthis:\n  \\<bar>x + y\\<bar> \\<le> \\<bar>x\\<bar> + \\<bar>y\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "have \"... \\<le> (max \\<bar>x\\<bar> \\<bar>y\\<bar>) + max \\<bar>x\\<bar> \\<bar>y\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x\\<bar> + \\<bar>y\\<bar>\n    \\<le> max \\<bar>x\\<bar> \\<bar>y\\<bar> + max \\<bar>x\\<bar> \\<bar>y\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>x\\<bar> + \\<bar>y\\<bar>\n  \\<le> max \\<bar>x\\<bar> \\<bar>y\\<bar> + max \\<bar>x\\<bar> \\<bar>y\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "also"], ["proof (state)\nthis:\n  \\<bar>x\\<bar> + \\<bar>y\\<bar>\n  \\<le> max \\<bar>x\\<bar> \\<bar>y\\<bar> + max \\<bar>x\\<bar> \\<bar>y\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "have \"... = 2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max \\<bar>x\\<bar> \\<bar>y\\<bar> + max \\<bar>x\\<bar> \\<bar>y\\<bar> =\n    2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>", "by auto"], ["proof (state)\nthis:\n  max \\<bar>x\\<bar> \\<bar>y\\<bar> + max \\<bar>x\\<bar> \\<bar>y\\<bar> =\n  2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "finally"], ["proof (chain)\npicking this:\n  \\<bar>x + y\\<bar> \\<le> 2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>", "have \"\\<bar>x + y\\<bar> powr p \\<le> (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p\""], ["proof (prove)\nusing this:\n  \\<bar>x + y\\<bar> \\<le> 2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p", "using powr_mono2 \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>x + y\\<bar> \\<le> 2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p", "by auto"], ["proof (state)\nthis:\n  \\<bar>x + y\\<bar> powr p\n  \\<le> (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "also"], ["proof (state)\nthis:\n  \\<bar>x + y\\<bar> powr p\n  \\<le> (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "have \"... = 2 powr p * (max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p =\n    2 powr p * max \\<bar>x\\<bar> \\<bar>y\\<bar> powr p", "using powr_mult"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?x; 0 \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> (?x * ?y) powr ?a = ?x powr ?a * ?y powr ?a\n\ngoal (1 subgoal):\n 1. (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p =\n    2 powr p * max \\<bar>x\\<bar> \\<bar>y\\<bar> powr p", "by auto"], ["proof (state)\nthis:\n  (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p =\n  2 powr p * max \\<bar>x\\<bar> \\<bar>y\\<bar> powr p\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "also"], ["proof (state)\nthis:\n  (2 * max \\<bar>x\\<bar> \\<bar>y\\<bar>) powr p =\n  2 powr p * max \\<bar>x\\<bar> \\<bar>y\\<bar> powr p\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "have \"... \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr p * max \\<bar>x\\<bar> \\<bar>y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "unfolding max_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr p *\n    (if \\<bar>x\\<bar> \\<le> \\<bar>y\\<bar> then \\<bar>y\\<bar>\n     else \\<bar>x\\<bar>) powr\n    p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  2 powr p * max \\<bar>x\\<bar> \\<bar>y\\<bar> powr p\n  \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "finally"], ["proof (chain)\npicking this:\n  \\<bar>x + y\\<bar> powr p\n  \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>x + y\\<bar> powr p\n  \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. \\<bar>x + y\\<bar> powr p\n    \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)", "by simp"], ["proof (state)\nthis:\n  \\<bar>x + y\\<bar> powr p\n  \\<le> 2 powr p * (\\<bar>x\\<bar> powr p + \\<bar>y\\<bar> powr p)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>?x + ?y\\<bar> powr p\n  \\<le> 2 powr p * (\\<bar>?x\\<bar> powr p + \\<bar>?y\\<bar> powr p)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\n 2. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "show [simp]: \"integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)", "by (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. 2 powr p * (\\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p)\"], auto simp add: *)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "show \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "proof (cases \"p=1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. p = 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n 2. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "case True"], ["proof (state)\nthis:\n  p = 1\n\ngoal (2 subgoals):\n 1. p = 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n 2. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  p = 1", "show ?thesis"], ["proof (prove)\nusing this:\n  p = 1\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "apply (auto, subst Bochner_Integration.integral_add[symmetric], insert assms(4) assms(5), simp, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = 1; p = 1;\n     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p);\n     integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\\<rbrakk>\n    \\<Longrightarrow> LINT x|M. \\<bar>f x + g x\\<bar>\n                      \\<le> LINT x|M. \\<bar>f x\\<bar> + \\<bar>g x\\<bar>", "by (rule integral_mono', auto)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n        (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "case False"], ["proof (state)\nthis:\n  p \\<noteq> 1\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  p \\<noteq> 1", "have [simp]: \"p > 1\" \"p \\<ge> 1\" \"p > 0\" \"p \\<noteq> 0\""], ["proof (prove)\nusing this:\n  p \\<noteq> 1\n\ngoal (1 subgoal):\n 1. (1 < p &&& 1 \\<le> p) &&& 0 < p &&& p \\<noteq> 0", "using assms(1)"], ["proof (prove)\nusing this:\n  p \\<noteq> 1\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. (1 < p &&& 1 \\<le> p) &&& 0 < p &&& p \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  1 < p\n  1 \\<le> p\n  0 < p\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "define q where \"q = conjugate_exponent p\""], ["proof (state)\nthis:\n  q = conjugate_exponent p\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have [simp]: \"q > 1\" \"q > 0\" \"1/p + 1/q = 1\" \"(p-1) * q = p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 < q &&& 0 < q) &&& 1 / p + 1 / q = 1 &&& (p - 1) * q = p", "unfolding q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 < conjugate_exponent p &&& 0 < conjugate_exponent p) &&&\n    1 / p + 1 / conjugate_exponent p = 1 &&&\n    (p - 1) * conjugate_exponent p = p", "using conjugate_exponent_real[OF \\<open>p>1\\<close>]"], ["proof (prove)\nusing this:\n  1 / p + 1 / conjugate_exponent p = 1\n  1 < conjugate_exponent p\n  conjugate_exponent (conjugate_exponent p) = p\n  (p - 1) * conjugate_exponent p = p\n  p - p / conjugate_exponent p = 1\n\ngoal (1 subgoal):\n 1. (1 < conjugate_exponent p &&& 0 < conjugate_exponent p) &&&\n    1 / p + 1 / conjugate_exponent p = 1 &&&\n    (p - 1) * conjugate_exponent p = p", "by auto"], ["proof (state)\nthis:\n  1 < q\n  0 < q\n  1 / p + 1 / q = 1\n  (p - 1) * q = p\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  1 < q\n  0 < q\n  1 / p + 1 / q = 1\n  (p - 1) * q = p", "have [simp]: \"(z powr (p-1)) powr q = z powr p\" for z"], ["proof (prove)\nusing this:\n  1 < q\n  0 < q\n  1 / p + 1 / q = 1\n  (p - 1) * q = p\n\ngoal (1 subgoal):\n 1. (z powr (p - 1)) powr q = z powr p", "by (simp add: powr_powr)"], ["proof (state)\nthis:\n  (?z powr (p - 1)) powr q = ?z powr p\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) = (\\<integral>x. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p =\n    LINT x|M. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)", "by (subst powr_mult_base, auto)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p =\n  LINT x|M. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p =\n  LINT x|M. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... \\<le> (\\<integral>x. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) + \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n    \\<le> LINT x|M.\n             \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)", "apply (rule integral_mono', rule Bochner_Integration.integrable_add)"], ["proof (prove)\ngoal (4 subgoals):\n 1. integrable M\n     (\\<lambda>x. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n 2. integrable M\n     (\\<lambda>x. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n 3. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n       \\<le> \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n 4. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       0 \\<le> \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n               \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)", "apply (rule Holder_inequality(1)[of p q], auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M\n     (\\<lambda>x. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n       \\<le> \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)", "apply (rule Holder_inequality(1)[of p q], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n       \\<le> \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)", "by (metis abs_ge_zero abs_triangle_ineq comm_semiring_class.distrib le_less mult_mono' powr_ge_pzero)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n  \\<le> LINT x|M.\n           \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n           \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n  \\<le> LINT x|M.\n           \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n           \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) \\<partial>M) + (\\<integral>x. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n       \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) =\n    (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)) +\n    (LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))", "apply (rule Bochner_Integration.integral_add)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M\n     (\\<lambda>x. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n 2. integrable M\n     (\\<lambda>x. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))", "by (rule Holder_inequality(1)[of p q], auto)+"], ["proof (state)\nthis:\n  LINT x|M.\n     \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n     \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) =\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)) +\n  (LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) +\n     \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1) =\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)) +\n  (LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... \\<le> abs (\\<integral>x. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) \\<partial>M) + abs (\\<integral>x. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p-1) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)) +\n    (LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n    \\<le> \\<bar>LINT x|M.\n                   \\<bar>f x\\<bar> *\n                   \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> +\n          \\<bar>LINT x|M.\n                   \\<bar>g x\\<bar> *\n                   \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)) +\n  (LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n  \\<le> \\<bar>LINT x|M.\n                 \\<bar>f x\\<bar> *\n                 \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> +\n        \\<bar>LINT x|M.\n                 \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)) +\n  (LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1))\n  \\<le> \\<bar>LINT x|M.\n                 \\<bar>f x\\<bar> *\n                 \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> +\n        \\<bar>LINT x|M.\n                 \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... \\<le> (\\<integral>x. abs(\\<bar>f x\\<bar>) powr p \\<partial>M) powr (1/p) * (\\<integral>x. abs(\\<bar>f x + g x\\<bar> powr (p-1)) powr q \\<partial>M) powr (1/q)\n                      + (\\<integral>x. abs(\\<bar>g x\\<bar>) powr p \\<partial>M) powr (1/p) * (\\<integral>x. abs(\\<bar>f x + g x\\<bar> powr (p-1)) powr q \\<partial>M) powr (1/q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M.\n             \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> +\n    \\<bar>LINT x|M.\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n    \\<le> (LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) *\n          (LINT x|M.\n              \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n          (1 / q) +\n          (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n          (LINT x|M.\n              \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n          (1 / q)", "apply (rule add_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<bar>LINT x|M.\n             \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n    \\<le> (LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) *\n          (LINT x|M.\n              \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n          (1 / q)\n 2. \\<bar>LINT x|M.\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n    \\<le> (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n          (LINT x|M.\n              \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n          (1 / q)", "apply (rule Holder_inequality(3)[of p q], simp, simp, simp, simp, simp, simp, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M.\n             \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n    \\<le> (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n          (LINT x|M.\n              \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n          (1 / q)", "apply (rule Holder_inequality(3)[of p q], simp, simp, simp, simp, simp, simp, simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<bar>LINT x|M.\n           \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> +\n  \\<bar>LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n  \\<le> (LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) *\n        (LINT x|M.\n            \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n        (1 / q) +\n        (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n        (LINT x|M.\n            \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n        (1 / q)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  \\<bar>LINT x|M.\n           \\<bar>f x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> +\n  \\<bar>LINT x|M. \\<bar>g x\\<bar> * \\<bar>f x + g x\\<bar> powr (p - 1)\\<bar>\n  \\<le> (LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) *\n        (LINT x|M.\n            \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n        (1 / q) +\n        (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n        (LINT x|M.\n            \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n        (1 / q)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... = (\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/q) *\n            ((\\<integral>x. abs(\\<bar>f x\\<bar>) powr p \\<partial>M) powr (1/p) + (\\<integral>x. abs(\\<bar>g x\\<bar>) powr p \\<partial>M) powr (1/p))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n    (1 / q) +\n    (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n    (LINT x|M. \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n    (1 / q) =\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n    ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n     (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) *\n  (LINT x|M. \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n  (1 / q) +\n  (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p) *\n  (LINT x|M. \\<bar>\\<bar>f x + g x\\<bar> powr (p - 1)\\<bar> powr q) powr\n  (1 / q) =\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n   (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))", "have *: \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) \\<le> (\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/q) *\n        ((\\<integral>x. abs(\\<bar>f x\\<bar>) powr p \\<partial>M) powr (1/p) + (\\<integral>x. abs(\\<bar>g x\\<bar>) powr p \\<partial>M) powr (1/p))\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p\n    \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n          ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n           (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))", "by simp"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "proof (cases \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p = 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n 2. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "case True"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p = 0\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p = 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n 2. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n        (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "case False"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0", "have **: \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/q) > 0\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q)", "by auto"], ["proof (state)\nthis:\n  0 < (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/q) * (\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p)\n              = (\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p) =\n    LINT x|M. \\<bar>f x + g x\\<bar> powr p", "by (auto simp add: powr_add[symmetric] add.commute)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p) =\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p) =\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p", "have \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/q) * (\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p) \\<le>\n              (\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/q) *\n              ((\\<integral>x. abs(\\<bar>f x\\<bar>) powr p \\<partial>M) powr (1/p) + (\\<integral>x. abs(\\<bar>g x\\<bar>) powr p \\<partial>M) powr (1/p))\""], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p) =\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n          ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n           (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))", "using *"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p) =\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n  LINT x|M. \\<bar>f x + g x\\<bar> powr p\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n          ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n           (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x + g x\\<bar> powr p \\<noteq> 0 \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))", "show ?thesis"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "using **"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q) *\n        ((LINT x|M. \\<bar>\\<bar>f x\\<bar>\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar>\\<bar> powr p) powr (1 / p))\n  0 < (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / q)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n        (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n        (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n        (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>When $p<1$, the function $x \\mapsto |x|^p$ is not convex any more. Hence, the $L^p$ ``norm''\nis not a norm any more, but a quasinorm. This is proved using a different convexity argument, as\nfollows.\\<close>"], ["", "theorem Minkowski_inequality_le_1:\n  assumes \"p > (0::real)\" \"p \\<le> 1\"\n      and [measurable, simp]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n          \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\"\n  shows \"integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\"\n        \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p)\n          \\<le> 2 powr (1/p-1) * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + 2 powr (1/p-1) * (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p) &&&\n    (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\n 2. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have *: \"\\<bar>a + b\\<bar> powr p \\<le> \\<bar>a\\<bar> powr p + \\<bar>b\\<bar> powr p\" for a b"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>a + b\\<bar> powr p\n    \\<le> \\<bar>a\\<bar> powr p + \\<bar>b\\<bar> powr p", "using x_plus_y_p_le_xp_plus_yp[OF \\<open>p > 0\\<close> \\<open>p \\<le> 1\\<close>, of \"\\<bar>a\\<bar>\" \"\\<bar>b\\<bar>\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> \\<bar>a\\<bar>; 0 \\<le> \\<bar>b\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<bar>a\\<bar> + \\<bar>b\\<bar>) powr p\n                    \\<le> \\<bar>a\\<bar> powr p + \\<bar>b\\<bar> powr p\n\ngoal (1 subgoal):\n 1. \\<bar>a + b\\<bar> powr p\n    \\<le> \\<bar>a\\<bar> powr p + \\<bar>b\\<bar> powr p", "by (auto, meson abs_ge_zero abs_triangle_ineq assms(1) le_less order.trans powr_mono2)"], ["proof (state)\nthis:\n  \\<bar>?a + ?b\\<bar> powr p\n  \\<le> \\<bar>?a\\<bar> powr p + \\<bar>?b\\<bar> powr p\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\n 2. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "show \"integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)", "by (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p\"], auto simp add: *)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p) \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p) powr\n          (1 / p)", "by (rule powr_mono2, simp add: \\<open>p > 0\\<close> less_imp_le, simp, rule integral_mono', auto simp add: *)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p) powr\n        (1 / p)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p) powr\n        (1 / p)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... = 2 powr (1/p) * (((\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) + (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M)) / 2) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p) powr\n    (1 / p) =\n    2 powr (1 / p) *\n    (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n      (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n     2) powr\n    (1 / p)", "by (auto simp add: powr_mult[symmetric] add_divide_distrib)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p) powr (1 / p) =\n  2 powr (1 / p) *\n  (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n    (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n   2) powr\n  (1 / p)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p + \\<bar>g x\\<bar> powr p) powr (1 / p) =\n  2 powr (1 / p) *\n  (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n    (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n   2) powr\n  (1 / p)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... \\<le> 2 powr (1/p) * (((\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)) / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr (1 / p) *\n    (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n      (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n     2) powr\n    (1 / p)\n    \\<le> 2 powr (1 / p) *\n          (((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n            (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)) /\n           2)", "apply (rule mult_mono, simp, rule convex_on_mean_ineq[OF convex_powr[of \"1/p\"]])"], ["proof (prove)\ngoal (5 subgoals):\n 1. 1 \\<le> 1 / p\n 2. LINT x|M. \\<bar>f x\\<bar> powr p \\<in> {0..}\n 3. LINT x|M. \\<bar>g x\\<bar> powr p \\<in> {0..}\n 4. 0 \\<le> 2 powr (1 / p)\n 5. 0 \\<le> (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n              (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n             2) powr\n            (1 / p)", "using \\<open>p \\<le> 1\\<close> \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  p \\<le> 1\n  0 < p\n\ngoal (5 subgoals):\n 1. 1 \\<le> 1 / p\n 2. LINT x|M. \\<bar>f x\\<bar> powr p \\<in> {0..}\n 3. LINT x|M. \\<bar>g x\\<bar> powr p \\<in> {0..}\n 4. 0 \\<le> 2 powr (1 / p)\n 5. 0 \\<le> (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n              (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n             2) powr\n            (1 / p)", "by auto"], ["proof (state)\nthis:\n  2 powr (1 / p) *\n  (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n    (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n   2) powr\n  (1 / p)\n  \\<le> 2 powr (1 / p) *\n        (((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)) /\n         2)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "also"], ["proof (state)\nthis:\n  2 powr (1 / p) *\n  (((LINT x|M. \\<bar>f x\\<bar> powr p) +\n    (LINT x|M. \\<bar>g x\\<bar> powr p)) /\n   2) powr\n  (1 / p)\n  \\<le> 2 powr (1 / p) *\n        (((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)) /\n         2)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "have \"... = 2 powr (1/p - 1) * ((\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr (1 / p) *\n    (((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n      (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)) /\n     2) =\n    2 powr (1 / p - 1) *\n    ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n     (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))", "by (simp add: powr_diff)"], ["proof (state)\nthis:\n  2 powr (1 / p) *\n  (((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n    (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)) /\n   2) =\n  2 powr (1 / p - 1) *\n  ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n   (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "finally"], ["proof (chain)\npicking this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> 2 powr (1 / p - 1) *\n        ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))", "show \"(\\<integral>x. \\<bar>f x + g x\\<bar> powr p \\<partial>M) powr (1/p)\n      \\<le> 2 powr (1/p-1) * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + 2 powr (1/p-1) * (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> 2 powr (1 / p - 1) *\n        ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n         (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n  \\<le> 2 powr (1 / p - 1) *\n        (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n        2 powr (1 / p - 1) * (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>$L^p$ spaces\\<close>"], ["", "text \\<open>We define $L^p$ spaces by giving their defining quasinorm. It is a norm for $p\\in [1, \\infty]$,\nand a quasinorm for $p \\in (0,1)$. The construction of a quasinorm from a formula only makes sense\nif this formula is indeed a quasinorm, i.e., it is homogeneous and satisfies the triangular\ninequality with the given multiplicative defect. Thus, we have to show that this is indeed\nthe case to be able to use the definition.\\<close>"], ["", "definition Lp_space::\"ennreal \\<Rightarrow> 'a measure \\<Rightarrow> ('a \\<Rightarrow> real) quasinorm\"\n  where \"Lp_space p M = (\n    if p = 0 then quasinorm_of (1, (\\<lambda>f. if (f \\<in> borel_measurable M) then 0 else \\<infinity>))\n    else if p < \\<infinity> then quasinorm_of (\n        if p < 1 then 2 powr (1/enn2real p - 1) else 1,\n        (\\<lambda>f. if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr (enn2real p)))\n              then (\\<integral>x. \\<bar>f x\\<bar> powr (enn2real p) \\<partial>M) powr (1/(enn2real p))\n              else (\\<infinity>::ennreal)))\n    else quasinorm_of (1, (\\<lambda>f. if f \\<in> borel_measurable M then esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) else (\\<infinity>::ennreal))))\""], ["", "abbreviation \"\\<LL> == Lp_space\""], ["", "subsection \\<open>$L^\\infty$\\<close>"], ["", "text \\<open>Let us check that, for $L^\\infty$, the above definition makes sense.\\<close>"], ["", "lemma L_infinity:\n  \"eNorm (\\<LL> \\<infinity> M) f = (if f \\<in> borel_measurable M then esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) else (\\<infinity>::ennreal))\"\n  \"defect (\\<LL> \\<infinity> M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) &&&\n    defect (\\<LL> \\<infinity> M) = 1", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "have T: \"esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>) \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) + esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)\"\n    if [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\" for f g"], ["proof (prove)\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "proof (cases \"emeasure M (space M) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. emeasure M (space M) = 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))\n 2. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "case True"], ["proof (state)\nthis:\n  emeasure M (space M) = 0\n\ngoal (2 subgoals):\n 1. emeasure M (space M) = 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))\n 2. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "then"], ["proof (chain)\npicking this:\n  emeasure M (space M) = 0", "have \"e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)) = 0\""], ["proof (prove)\nusing this:\n  emeasure M (space M) = 0\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)) = 0", "using esssup_zero_space[OF True]"], ["proof (prove)\nusing this:\n  emeasure M (space M) = 0\n  ?f \\<in> borel_measurable M \\<Longrightarrow> esssup M ?f = - \\<infinity>\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)) = 0", "by (simp add: e2ennreal_neg)"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)) = 0\n\ngoal (2 subgoals):\n 1. emeasure M (space M) = 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))\n 2. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "then"], ["proof (chain)\npicking this:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)) = 0\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "by simp"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n  \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n        e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "case False"], ["proof (state)\nthis:\n  emeasure M (space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "have *: \"esssup M (\\<lambda>x. \\<bar>h x\\<bar>) \\<ge> 0\" for h::\"'a \\<Rightarrow> real\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "have \"esssup M (\\<lambda>x. 0) \\<le> esssup M (\\<lambda>x. \\<bar>h x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. 0)\n    \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "by (rule esssup_mono, auto)"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. 0)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)\n\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. 0)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "show ?thesis"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. 0)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)\n\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "using esssup_const[OF False, of \"0::ereal\"]"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. 0)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)\n  esssup M (\\<lambda>x. 0) = 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)", "by simp"], ["proof (state)\nthis:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>h x\\<bar>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>?h x\\<bar>)\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "have \"esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>) \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar> + ereal \\<bar>g x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)\n    \\<le> esssup M\n           (\\<lambda>x. ereal \\<bar>f x\\<bar> + ereal \\<bar>g x\\<bar>)", "by (rule esssup_mono, auto simp add: plus_fun_def)"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar> + ereal \\<bar>g x\\<bar>)\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "also"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar> + ereal \\<bar>g x\\<bar>)\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "have \"... \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) + esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar> + ereal \\<bar>g x\\<bar>)\n    \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) +\n          esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)", "by (rule esssup_add)"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar> + ereal \\<bar>g x\\<bar>)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) +\n        esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "finally"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) +\n        esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)", "show ?thesis"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) +\n        esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "using *"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>)\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) +\n        esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>)\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>?h x\\<bar>)\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n    \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))", "by (simp add: e2ennreal_mono eq_onp_def plus_ennreal.abs_eq)"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(f + g) x\\<bar>))\n  \\<le> e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) +\n        e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>g x\\<bar>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?f \\<in> borel_measurable M; ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> e2ennreal\n                     (esssup M (\\<lambda>x. ereal \\<bar>(?f + ?g) x\\<bar>))\n                    \\<le> e2ennreal\n                           (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>)) +\n                          e2ennreal\n                           (esssup M (\\<lambda>x. ereal \\<bar>?g x\\<bar>))\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "have H: \"esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>) \\<le> ennreal \\<bar>c\\<bar> * esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\" if \"c \\<noteq> 0\" for f c"], ["proof (prove)\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "have \"abs c > 0\" \"ereal \\<bar>c\\<bar> \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < \\<bar>c\\<bar> &&& 0 \\<le> ereal \\<bar>c\\<bar>", "using that"], ["proof (prove)\nusing this:\n  c \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < \\<bar>c\\<bar> &&& 0 \\<le> ereal \\<bar>c\\<bar>", "by auto"], ["proof (state)\nthis:\n  0 < \\<bar>c\\<bar>\n  0 \\<le> ereal \\<bar>c\\<bar>\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "have *: \"esssup M (\\<lambda>x. abs(c *\\<^sub>R f x)) = abs c * esssup M (\\<lambda>x. \\<bar>f x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>c *\\<^sub>R f x\\<bar>) =\n    ereal \\<bar>c\\<bar> * esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "apply (subst esssup_cmult[OF \\<open>abs c > 0\\<close>, of M \"\\<lambda>x. ereal \\<bar>f x\\<bar>\", symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>c *\\<^sub>R f x\\<bar>) =\n    esssup M (\\<lambda>x. ereal \\<bar>c\\<bar> * ereal \\<bar>f x\\<bar>)", "using times_ereal.simps(1)"], ["proof (prove)\nusing this:\n  ereal ?r * ereal ?p = ereal (?r * ?p)\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>c *\\<^sub>R f x\\<bar>) =\n    esssup M (\\<lambda>x. ereal \\<bar>c\\<bar> * ereal \\<bar>f x\\<bar>)", "by (auto simp add: abs_mult)"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>c *\\<^sub>R f x\\<bar>) =\n  ereal \\<bar>c\\<bar> * esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "unfolding e2ennreal_mult[OF \\<open>ereal \\<bar>c\\<bar> \\<ge> 0\\<close>] * scaleR_fun_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. e2ennreal (ereal \\<bar>c\\<bar>) *\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "using ennreal.abs_eq ennreal.rep_eq"], ["proof (prove)\nusing this:\n  ennreal ?x = e2ennreal (0 \\<squnion> ereal ?x)\n  enn2ereal (ennreal ?x) = 0 \\<squnion> ereal ?x\n\ngoal (1 subgoal):\n 1. e2ennreal (ereal \\<bar>c\\<bar>) *\n    e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))", "by auto"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(c *\\<^sub>R f) x\\<bar>))\n  \\<le> ennreal \\<bar>c\\<bar> *\n        e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?c \\<noteq> 0 \\<Longrightarrow>\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(?c *\\<^sub>R ?f) x\\<bar>))\n  \\<le> ennreal \\<bar>?c\\<bar> *\n        e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>))\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "have \"esssup M (\\<lambda>x. ereal 0) \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal 0) \\<le> 0", "using esssup_I"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f \\<in> borel_measurable ?M; AE x in ?M. ?f x \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> esssup ?M ?f \\<le> ?c\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal 0) \\<le> 0", "by auto"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal 0) \\<le> 0\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal 0) \\<le> 0", "have Z: \"e2ennreal (esssup M (\\<lambda>x. ereal 0)) = 0\""], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal 0) \\<le> 0\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal 0)) = 0", "using e2ennreal_neg"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal 0) \\<le> 0\n  ?x \\<le> 0 \\<Longrightarrow> e2ennreal ?x = 0\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal 0)) = 0", "by auto"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>x. ereal 0)) = 0\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "have *: \"quasinorm_on (borel_measurable M) 1 (\\<lambda>(f::'a\\<Rightarrow>real). e2ennreal(esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasinorm_on (borel_measurable M) 1\n     (\\<lambda>f. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)))", "apply (rule quasinorm_onI)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        y \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> borel_measurable M\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        y \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> e2ennreal\n                          (esssup M\n                            (\\<lambda>xa. ereal \\<bar>(x + y) xa\\<bar>))\n                         \\<le> ennreal 1 *\n                               e2ennreal\n                                (esssup M\n                                  (\\<lambda>xa. ereal \\<bar>x xa\\<bar>)) +\n                               ennreal 1 *\n                               e2ennreal\n                                (esssup M\n                                  (\\<lambda>x. ereal \\<bar>y x\\<bar>))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> borel_measurable M\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> e2ennreal\n                          (esssup M\n                            (\\<lambda>xa.\n                                ereal \\<bar>(c *\\<^sub>R x) xa\\<bar>))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               e2ennreal\n                                (esssup M\n                                  (\\<lambda>xa. ereal \\<bar>x xa\\<bar>))\n 5. 0 \\<in> borel_measurable M\n 6. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>0 x\\<bar>)) = 0\n 7. 1 \\<le> 1", "using T H Z"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f \\<in> borel_measurable M; ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> e2ennreal\n                     (esssup M (\\<lambda>x. ereal \\<bar>(?f + ?g) x\\<bar>))\n                    \\<le> e2ennreal\n                           (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>)) +\n                          e2ennreal\n                           (esssup M (\\<lambda>x. ereal \\<bar>?g x\\<bar>))\n  ?c \\<noteq> 0 \\<Longrightarrow>\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>(?c *\\<^sub>R ?f) x\\<bar>))\n  \\<le> ennreal \\<bar>?c\\<bar> *\n        e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>))\n  e2ennreal (esssup M (\\<lambda>x. ereal 0)) = 0\n\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        y \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> borel_measurable M\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        y \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> e2ennreal\n                          (esssup M\n                            (\\<lambda>xa. ereal \\<bar>(x + y) xa\\<bar>))\n                         \\<le> ennreal 1 *\n                               e2ennreal\n                                (esssup M\n                                  (\\<lambda>xa. ereal \\<bar>x xa\\<bar>)) +\n                               ennreal 1 *\n                               e2ennreal\n                                (esssup M\n                                  (\\<lambda>x. ereal \\<bar>y x\\<bar>))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> borel_measurable M\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> e2ennreal\n                          (esssup M\n                            (\\<lambda>xa.\n                                ereal \\<bar>(c *\\<^sub>R x) xa\\<bar>))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               e2ennreal\n                                (esssup M\n                                  (\\<lambda>xa. ereal \\<bar>x xa\\<bar>))\n 5. 0 \\<in> borel_measurable M\n 6. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>0 x\\<bar>)) = 0\n 7. 1 \\<le> 1", "by auto"], ["proof (state)\nthis:\n  quasinorm_on (borel_measurable M) 1\n   (\\<lambda>f. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)))\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "have **: \"quasinorm_on UNIV 1 (\\<lambda>(f::'a\\<Rightarrow>real). if f \\<in> borel_measurable M then e2ennreal(esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) else \\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasinorm_on UNIV 1\n     (\\<lambda>f.\n         if f \\<in> borel_measurable M\n         then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n         else \\<infinity>)", "by (rule extend_quasinorm[OF *])"], ["proof (state)\nthis:\n  quasinorm_on UNIV 1\n   (\\<lambda>f.\n       if f \\<in> borel_measurable M\n       then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n       else \\<infinity>)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n 2. defect (\\<LL> \\<infinity> M) = 1", "show \"eNorm (\\<LL> \\<infinity> M) f = (if f \\<in> borel_measurable M then e2ennreal(esssup M (\\<lambda>x. \\<bar>f x\\<bar>)) else \\<infinity>)\"\n       \"defect (\\<LL> \\<infinity> M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) &&&\n    defect (\\<LL> \\<infinity> M) = 1", "unfolding Lp_space_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm\n     (if \\<infinity> = 0\n      then quasinorm_of\n            (1, \\<lambda>f.\n                   if f \\<in> borel_measurable M then 0 else \\<infinity>)\n      else if \\<infinity> < \\<infinity>\n           then quasinorm_of\n                 (if \\<infinity> < 1\n                  then 2 powr (1 / enn2real \\<infinity> - 1) else 1,\n                  \\<lambda>f.\n                     if f \\<in> borel_measurable M \\<and>\n                        integrable M\n                         (\\<lambda>x.\n                             \\<bar>f x\\<bar> powr enn2real \\<infinity>)\n                     then ennreal\n                           ((LINT x|M.\n                                \\<bar>f x\\<bar> powr\n                                enn2real \\<infinity>) powr\n                            (1 / enn2real \\<infinity>))\n                     else \\<infinity>)\n           else quasinorm_of\n                 (1, \\<lambda>f.\n                        if f \\<in> borel_measurable M\n                        then e2ennreal\n                              (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                        else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) &&&\n    defect\n     (if \\<infinity> = 0\n      then quasinorm_of\n            (1, \\<lambda>f.\n                   if f \\<in> borel_measurable M then 0 else \\<infinity>)\n      else if \\<infinity> < \\<infinity>\n           then quasinorm_of\n                 (if \\<infinity> < 1\n                  then 2 powr (1 / enn2real \\<infinity> - 1) else 1,\n                  \\<lambda>f.\n                     if f \\<in> borel_measurable M \\<and>\n                        integrable M\n                         (\\<lambda>x.\n                             \\<bar>f x\\<bar> powr enn2real \\<infinity>)\n                     then ennreal\n                           ((LINT x|M.\n                                \\<bar>f x\\<bar> powr\n                                enn2real \\<infinity>) powr\n                            (1 / enn2real \\<infinity>))\n                     else \\<infinity>)\n           else quasinorm_of\n                 (1, \\<lambda>f.\n                        if f \\<in> borel_measurable M\n                        then e2ennreal\n                              (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                        else \\<infinity>)) =\n    1", "using quasinorm_of[OF **]"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M\n            then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n            else \\<infinity>))\n   ?x =\n  (if ?x \\<in> borel_measurable M\n   then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>?x x\\<bar>))\n   else \\<infinity>)\n  defect\n   (quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M\n            then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n            else \\<infinity>)) =\n  1\n\ngoal (1 subgoal):\n 1. eNorm\n     (if \\<infinity> = 0\n      then quasinorm_of\n            (1, \\<lambda>f.\n                   if f \\<in> borel_measurable M then 0 else \\<infinity>)\n      else if \\<infinity> < \\<infinity>\n           then quasinorm_of\n                 (if \\<infinity> < 1\n                  then 2 powr (1 / enn2real \\<infinity> - 1) else 1,\n                  \\<lambda>f.\n                     if f \\<in> borel_measurable M \\<and>\n                        integrable M\n                         (\\<lambda>x.\n                             \\<bar>f x\\<bar> powr enn2real \\<infinity>)\n                     then ennreal\n                           ((LINT x|M.\n                                \\<bar>f x\\<bar> powr\n                                enn2real \\<infinity>) powr\n                            (1 / enn2real \\<infinity>))\n                     else \\<infinity>)\n           else quasinorm_of\n                 (1, \\<lambda>f.\n                        if f \\<in> borel_measurable M\n                        then e2ennreal\n                              (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                        else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) &&&\n    defect\n     (if \\<infinity> = 0\n      then quasinorm_of\n            (1, \\<lambda>f.\n                   if f \\<in> borel_measurable M then 0 else \\<infinity>)\n      else if \\<infinity> < \\<infinity>\n           then quasinorm_of\n                 (if \\<infinity> < 1\n                  then 2 powr (1 / enn2real \\<infinity> - 1) else 1,\n                  \\<lambda>f.\n                     if f \\<in> borel_measurable M \\<and>\n                        integrable M\n                         (\\<lambda>x.\n                             \\<bar>f x\\<bar> powr enn2real \\<infinity>)\n                     then ennreal\n                           ((LINT x|M.\n                                \\<bar>f x\\<bar> powr\n                                enn2real \\<infinity>) powr\n                            (1 / enn2real \\<infinity>))\n                     else \\<infinity>)\n           else quasinorm_of\n                 (1, \\<lambda>f.\n                        if f \\<in> borel_measurable M\n                        then e2ennreal\n                              (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                        else \\<infinity>)) =\n    1", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) f =\n  (if f \\<in> borel_measurable M\n   then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n   else \\<infinity>)\n  defect (\\<LL> \\<infinity> M) = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_space:\n  \"space\\<^sub>N (\\<LL> \\<infinity> M) = {f \\<in> borel_measurable M. \\<exists>C. AE x in M. \\<bar>f x\\<bar> \\<le> C}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> \\<infinity> M) =\n    {f \\<in> borel_measurable M.\n     \\<exists>C. AE x in M. \\<bar>f x\\<bar> \\<le> C}", "proof (auto simp del: infinity_ennreal_def)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 3. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "fix f"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 3. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "assume H: \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 3. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "show \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "unfolding space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  f \\<in> {f. eNorm (\\<LL> \\<infinity> M) f < \\<infinity>}\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using L_infinity(1)[of M] top.not_eq_extremum"], ["proof (prove)\nusing this:\n  f \\<in> {f. eNorm (\\<LL> \\<infinity> M) f < \\<infinity>}\n  eNorm (\\<LL> \\<infinity> M) ?f =\n  (if ?f \\<in> borel_measurable M\n   then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>))\n   else \\<infinity>)\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by fastforce"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 2. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M", "have *: \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) < \\<infinity>\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) < \\<infinity>", "using H"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) < \\<infinity>", "unfolding space\\<^sub>N_def L_infinity(1)[of M]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  f \\<in> {f. (if f \\<in> borel_measurable M\n               then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n               else \\<infinity>)\n              < \\<infinity>}\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) < \\<infinity>", "by (auto simp add: e2ennreal_infty)"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) < \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 2. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "define C where \"C = real_of_ereal(esssup M (\\<lambda>x. \\<bar>f x\\<bar>))\""], ["proof (state)\nthis:\n  C = real_of_ereal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 2. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "have \"AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "proof (cases \"emeasure M (space M) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. emeasure M (space M) = 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\n 2. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "case True"], ["proof (state)\nthis:\n  emeasure M (space M) = 0\n\ngoal (2 subgoals):\n 1. emeasure M (space M) = 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\n 2. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "then"], ["proof (chain)\npicking this:\n  emeasure M (space M) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  emeasure M (space M) = 0\n\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "using emeasure_0_AE"], ["proof (prove)\nusing this:\n  emeasure M (space M) = 0\n  emeasure ?M (space ?M) = 0 \\<Longrightarrow> almost_everywhere ?M ?P\n\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "by simp"], ["proof (state)\nthis:\n  AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "case False"], ["proof (state)\nthis:\n  emeasure M (space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "then"], ["proof (chain)\npicking this:\n  emeasure M (space M) \\<noteq> 0", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) \\<ge> 0\""], ["proof (prove)\nusing this:\n  emeasure M (space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "using esssup_mono[of \"\\<lambda>x. 0\" M \"(\\<lambda>x. \\<bar>f x\\<bar>)\"] esssup_const[OF False, of \"0::ereal\"]"], ["proof (prove)\nusing this:\n  emeasure M (space M) \\<noteq> 0\n  \\<lbrakk>(\\<lambda>x. 0) \\<in> borel_measurable M;\n   \\<And>x. 0 \\<le> ereal \\<bar>f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> esssup M (\\<lambda>x. 0)\n                    \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n  esssup M (\\<lambda>x. 0) = 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "by auto"], ["proof (state)\nthis:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "then"], ["proof (chain)\npicking this:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) = ereal C\""], ["proof (prove)\nusing this:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) = ereal C", "unfolding C_def"], ["proof (prove)\nusing this:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) =\n    ereal (real_of_ereal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)))", "using * ereal_real"], ["proof (prove)\nusing this:\n  0 \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) < \\<infinity>\n  ereal (real_of_ereal ?x) =\n  (if \\<bar>?x\\<bar> = \\<infinity> then 0 else ?x)\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) =\n    ereal (real_of_ereal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)))", "by auto"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) = ereal C\n\ngoal (1 subgoal):\n 1. emeasure M (space M) \\<noteq> 0 \\<Longrightarrow>\n    AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) = ereal C", "show ?thesis"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) = ereal C\n\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "using esssup_AE[of \"(\\<lambda>x. ereal \\<bar>f x\\<bar>)\" M]"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) = ereal C\n  AE x in M. ereal \\<bar>f x\\<bar>\n             \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "by simp"], ["proof (state)\nthis:\n  AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 2. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C", "have \"AE x in M. \\<bar>f x\\<bar> \\<le> C\""], ["proof (prove)\nusing this:\n  AE x in M. ereal \\<bar>f x\\<bar> \\<le> ereal C\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> C", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       \\<exists>C. AE xa in M. \\<bar>x xa\\<bar> \\<le> C\n 2. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> C", "show \"\\<exists>C. AE x in M. \\<bar>f x\\<bar> \\<le> C\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>C. AE x in M. \\<bar>f x\\<bar> \\<le> C", "by blast"], ["proof (state)\nthis:\n  \\<exists>C. AE x in M. \\<bar>f x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "fix f::\"'a \\<Rightarrow> real\" and C::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "assume H: \"f \\<in> borel_measurable M\" \"AE x in M. \\<bar>f x\\<bar> \\<le> C\""], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> C\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C", "using esssup_I"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n  \\<lbrakk>?f \\<in> borel_measurable ?M; AE x in ?M. ?f x \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> esssup ?M ?f \\<le> ?c\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C", "by auto"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C", "have \"eNorm (\\<LL> \\<infinity> M) f \\<le> C\""], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal C", "unfolding L_infinity(1)"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n    \\<le> ennreal C", "using H(1)"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n    \\<le> ennreal C", "by (auto, metis antisym e2ennreal_mono enn2ereal_ennreal ennreal.abs_eq ennreal.rep_eq ennreal_eq_0_iff ereal_less_eq(4) linear order.trans zero_ereal_def)"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. \\<And>x C.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        AE xa in M. \\<bar>x xa\\<bar> \\<le> C\\<rbrakk>\n       \\<Longrightarrow> x \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal C", "show \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "using spaceN_iff le_less_trans"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal C\n  (?x \\<in> space\\<^sub>N ?N) = (eNorm ?N ?x < \\<infinity>)\n  \\<lbrakk>?x \\<le> ?y; ?y < ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "by fastforce"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_zero_space:\n  \"zero_space\\<^sub>N (\\<LL> \\<infinity> M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> \\<infinity> M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "proof (auto simp del: infinity_ennreal_def)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "fix f"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "assume H: \"f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (state)\nthis:\n  f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "show \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "unfolding zero_space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  f \\<in> {f. eNorm (\\<LL> \\<infinity> M) f = 0}\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using L_infinity(1)[of M] top.not_eq_extremum"], ["proof (prove)\nusing this:\n  f \\<in> {f. eNorm (\\<LL> \\<infinity> M) f = 0}\n  eNorm (\\<LL> \\<infinity> M) ?f =\n  (if ?f \\<in> borel_measurable M\n   then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>))\n   else \\<infinity>)\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by fastforce"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M", "have *: \"e2ennreal(esssup M (\\<lambda>x. \\<bar>f x\\<bar>)) = 0\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0", "using H"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0", "unfolding zero_space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  f \\<in> {f. eNorm (\\<LL> \\<infinity> M) f = 0}\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0", "using L_infinity(1)[of M] e2ennreal_infty"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  f \\<in> {f. eNorm (\\<LL> \\<infinity> M) f = 0}\n  eNorm (\\<LL> \\<infinity> M) ?f =\n  (if ?f \\<in> borel_measurable M\n   then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>?f x\\<bar>))\n   else \\<infinity>)\n  e2ennreal \\<infinity> = \\<top>\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0", "by auto"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> 0\""], ["proof (prove)\nusing this:\n  e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) = 0\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0", "by (metis e2ennreal_infty e2ennreal_mult ennreal_top_neq_zero ereal_mult_infty leI linear mult_zero_left)"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0", "have \"f x = 0\" if \"ereal \\<bar>f x\\<bar> \\<le> esssup M (\\<lambda>x. \\<bar>f x\\<bar>)\" for x"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n\ngoal (1 subgoal):\n 1. f x = 0", "using that order.trans"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n  ereal \\<bar>f x\\<bar> \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n  \\<lbrakk>?a \\<le> ?b; ?b \\<le> ?c\\<rbrakk> \\<Longrightarrow> ?a \\<le> ?c\n\ngoal (1 subgoal):\n 1. f x = 0", "by fastforce"], ["proof (state)\nthis:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  f ?x = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  f ?x = 0", "show \"AE x in M. f x = 0\""], ["proof (prove)\nusing this:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  f ?x = 0\n\ngoal (1 subgoal):\n 1. AE x in M. f x = 0", "using esssup_AE[of \"\\<lambda>x. ereal \\<bar>f x\\<bar>\" M]"], ["proof (prove)\nusing this:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  f ?x = 0\n  AE x in M. ereal \\<bar>f x\\<bar>\n             \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. AE x in M. f x = 0", "by auto"], ["proof (state)\nthis:\n  AE x in M. f x = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "fix f::\"'a \\<Rightarrow> real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "assume H: \"f \\<in> borel_measurable M\" \"AE x in M. f x = 0\""], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> 0\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0", "using esssup_I"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0\n  \\<lbrakk>?f \\<in> borel_measurable ?M; AE x in ?M. ?f x \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> esssup ?M ?f \\<le> ?c\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0", "by auto"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0", "have \"eNorm (\\<LL> \\<infinity> M) f = 0\""], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f = 0", "unfolding L_infinity(1)"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) =\n    0", "using H(1)"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> 0\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) =\n    0", "by (simp add: e2ennreal_neg)"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) f = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> \\<infinity> M) f = 0", "show \"f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f = 0\n\ngoal (1 subgoal):\n 1. f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "using zero_spaceN_iff"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f = 0\n  (?x \\<in> zero_space\\<^sub>N ?N) = (eNorm ?N ?x = 0)\n\ngoal (1 subgoal):\n 1. f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)", "by auto"], ["proof (state)\nthis:\n  f \\<in> zero_space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_AE_ebound:\n  \"AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "proof (cases \"f \\<in> borel_measurable M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n 2. f \\<notin> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "case False"], ["proof (state)\nthis:\n  f \\<notin> borel_measurable M\n\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n 2. f \\<notin> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "then"], ["proof (chain)\npicking this:\n  f \\<notin> borel_measurable M", "have \"eNorm (\\<LL> \\<infinity> M) f = \\<infinity>\""], ["proof (prove)\nusing this:\n  f \\<notin> borel_measurable M\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f = \\<infinity>", "unfolding L_infinity(1)"], ["proof (prove)\nusing this:\n  f \\<notin> borel_measurable M\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>) =\n    \\<infinity>", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) f = \\<infinity>\n\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n 2. f \\<notin> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> \\<infinity> M) f = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "by simp"], ["proof (state)\nthis:\n  AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "case True"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M", "have \"ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\" if \"\\<bar>f x\\<bar> \\<le> esssup M (\\<lambda>x. \\<bar>f x\\<bar>)\" for x"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "unfolding L_infinity(1)"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. ennreal \\<bar>f x\\<bar>\n    \\<le> (if f \\<in> borel_measurable M\n           then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n           else \\<infinity>)", "using that e2ennreal_mono ennreal.abs_eq ennreal.rep_eq"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  ereal \\<bar>f x\\<bar> \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n  ?x \\<le> ?y \\<Longrightarrow> e2ennreal ?x \\<le> e2ennreal ?y\n  ennreal ?x = e2ennreal (0 \\<squnion> ereal ?x)\n  enn2ereal (ennreal ?x) = 0 \\<squnion> ereal ?x\n\ngoal (1 subgoal):\n 1. ennreal \\<bar>f x\\<bar>\n    \\<le> (if f \\<in> borel_measurable M\n           then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n           else \\<infinity>)", "by fastforce"], ["proof (state)\nthis:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  ennreal \\<bar>f ?x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M \\<Longrightarrow>\n    AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "then"], ["proof (chain)\npicking this:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  ennreal \\<bar>f ?x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  ennreal \\<bar>f ?x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "using esssup_AE[of \"\\<lambda>x. ereal \\<bar>f x\\<bar>\"]"], ["proof (prove)\nusing this:\n  ereal \\<bar>f ?x\\<bar>\n  \\<le> esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<Longrightarrow>\n  ennreal \\<bar>f ?x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n  AE x in ?M. ereal \\<bar>f x\\<bar>\n              \\<le> esssup ?M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f", "by force"], ["proof (state)\nthis:\n  AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_AE_bound:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n  shows \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "using L_infinity_AE_ebound[of f M]"], ["proof (prove)\nusing this:\n  AE x in M. ennreal \\<bar>f x\\<bar> \\<le> eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "unfolding eNorm_Norm[OF assms]"], ["proof (prove)\nusing this:\n  AE x in M. ennreal \\<bar>f x\\<bar>\n             \\<le> ennreal (Norm (\\<LL> \\<infinity> M) f)\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "by (simp)"], ["", "text \\<open>In the next lemma, the assumption $C \\geq 0$ that might seem useless is in fact\nnecessary for the second statement when the space has zero measure. Indeed, any function is\nthen almost surely bounded by any constant!\\<close>"], ["", "lemma L_infinity_I:\n  assumes \"f \\<in> borel_measurable M\"\n          \"AE x in M. \\<bar>f x\\<bar> \\<le> C\"\n          \"C \\<ge> 0\"\n  shows \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n        \"Norm (\\<LL> \\<infinity> M) f \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) f \\<le> C", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n 2. Norm (\\<LL> \\<infinity> M) f \\<le> C", "show \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "using L_infinity_space assms(1) assms(2)"], ["proof (prove)\nusing this:\n  space\\<^sub>N (\\<LL> \\<infinity> ?M) =\n  {f \\<in> borel_measurable ?M.\n   \\<exists>C. AE x in ?M. \\<bar>f x\\<bar> \\<le> C}\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "by force"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) f \\<le> C", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C", "using assms(1) assms(2) esssup_I"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n  \\<lbrakk>?f \\<in> borel_measurable ?M; AE x in ?M. ?f x \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> esssup ?M ?f \\<le> ?c\n\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C", "by auto"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) f \\<le> C", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C", "have \"eNorm (\\<LL> \\<infinity> M) f \\<le> ereal C\""], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> e2ennreal (ereal C)", "unfolding L_infinity(1)"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n    \\<le> e2ennreal (ereal C)", "using assms(1) e2ennreal_mono"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> ereal C\n  f \\<in> borel_measurable M\n  ?x \\<le> ?y \\<Longrightarrow> e2ennreal ?x \\<le> e2ennreal ?y\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n    \\<le> e2ennreal (ereal C)", "by force"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> e2ennreal (ereal C)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) f \\<le> C", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> e2ennreal (ereal C)", "have \"ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> e2ennreal (ereal C)\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C", "using eNorm_Norm[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\\<close>] assms(3) ennreal.abs_eq ennreal.rep_eq"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> e2ennreal (ereal C)\n  eNorm (\\<LL> \\<infinity> M) f = ennreal (Norm (\\<LL> \\<infinity> M) f)\n  0 \\<le> C\n  ennreal ?x = e2ennreal (0 \\<squnion> ereal ?x)\n  enn2ereal (ennreal ?x) = 0 \\<squnion> ereal ?x\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C", "by auto"], ["proof (state)\nthis:\n  ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) f \\<le> C", "then"], ["proof (chain)\npicking this:\n  ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C", "show \"Norm (\\<LL> \\<infinity> M) f \\<le> C\""], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) f \\<le> C", "using assms(3)"], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> \\<infinity> M) f) \\<le> ennreal C\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) f \\<le> C", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> \\<infinity> M) f \\<le> C\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_I':\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n      and \"AE x in M. ennreal \\<bar>f x\\<bar> \\<le> C\"\n  shows \"eNorm (\\<LL> \\<infinity> M) f \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> C", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> C", "have \"esssup M (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> enn2ereal C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C", "apply (rule esssup_I, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> enn2ereal C", "using assms(2) less_eq_ennreal.rep_eq"], ["proof (prove)\nusing this:\n  AE x in M. ennreal \\<bar>f x\\<bar> \\<le> C\n  (?x \\<le> ?xa) = (enn2ereal ?x \\<le> enn2ereal ?xa)\n\ngoal (1 subgoal):\n 1. AE x in M. ereal \\<bar>f x\\<bar> \\<le> enn2ereal C", "by auto"], ["proof (state)\nthis:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> C", "then"], ["proof (chain)\npicking this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C", "show ?thesis"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> C", "unfolding L_infinity"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n    \\<le> C", "using assms"], ["proof (prove)\nusing this:\n  esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C\n  f \\<in> borel_measurable M\n  AE x in M. ennreal \\<bar>f x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n    \\<le> C", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C;\n     AE x in M. ennreal \\<bar>f x\\<bar> \\<le> C\\<rbrakk>\n    \\<Longrightarrow> e2ennreal\n                       (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                      \\<le> C", "using e2ennreal_mono"], ["proof (prove)\nusing this:\n  ?x \\<le> ?y \\<Longrightarrow> e2ennreal ?x \\<le> e2ennreal ?y\n\ngoal (1 subgoal):\n 1. \\<lbrakk>esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>) \\<le> enn2ereal C;\n     AE x in M. ennreal \\<bar>f x\\<bar> \\<le> C\\<rbrakk>\n    \\<Longrightarrow> e2ennreal\n                       (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                      \\<le> C", "by fastforce"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) f \\<le> C\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_pos_measure:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n      and \"eNorm (\\<LL> \\<infinity> M) f > (C::real)\"\n  shows \"emeasure M {x \\<in> space M. \\<bar>f x\\<bar> > C} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. C < \\<bar>f x\\<bar>}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. C < \\<bar>f x\\<bar>}", "have *: \"esssup M (\\<lambda>x. ereal(\\<bar>f x\\<bar>)) > ereal C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "using \\<open>eNorm (\\<LL> \\<infinity> M) f > C\\<close>"], ["proof (prove)\nusing this:\n  ennreal C < eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "unfolding L_infinity"], ["proof (prove)\nusing this:\n  ennreal C\n  < (if f \\<in> borel_measurable M\n     then e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n     else \\<infinity>)\n\ngoal (1 subgoal):\n 1. ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "proof (auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. ennreal C\n    < e2ennreal\n       (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) \\<Longrightarrow>\n    ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "assume a1: \"ennreal C < e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\""], ["proof (state)\nthis:\n  ennreal C < e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n\ngoal (1 subgoal):\n 1. ennreal C\n    < e2ennreal\n       (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) \\<Longrightarrow>\n    ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "have \"\\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>)) \\<le> e2ennreal (ereal C)\" if \"\\<not> C < 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n           \\<le> e2ennreal (ereal C)", "using a1 that"], ["proof (prove)\nusing this:\n  ennreal C < e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n  \\<not> C < 0\n\ngoal (1 subgoal):\n 1. \\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n           \\<le> e2ennreal (ereal C)", "by (metis (no_types) e2ennreal_enn2ereal enn2ereal_ennreal leD leI)"], ["proof (state)\nthis:\n  \\<not> C < 0 \\<Longrightarrow>\n  \\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n         \\<le> e2ennreal (ereal C)\n\ngoal (1 subgoal):\n 1. ennreal C\n    < e2ennreal\n       (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) \\<Longrightarrow>\n    ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "then"], ["proof (chain)\npicking this:\n  \\<not> C < 0 \\<Longrightarrow>\n  \\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n         \\<le> e2ennreal (ereal C)", "have \"e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>)) \\<le> e2ennreal (ereal C) \\<longrightarrow> (\\<exists>e\\<le>esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>). ereal C < e)\""], ["proof (prove)\nusing this:\n  \\<not> C < 0 \\<Longrightarrow>\n  \\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n         \\<le> e2ennreal (ereal C)\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n    \\<le> e2ennreal (ereal C) \\<longrightarrow>\n    (\\<exists>e\\<le>esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>).\n        ereal C < e)", "using a1 e2ennreal_neg"], ["proof (prove)\nusing this:\n  \\<not> C < 0 \\<Longrightarrow>\n  \\<not> e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n         \\<le> e2ennreal (ereal C)\n  ennreal C < e2ennreal (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n  ?x \\<le> 0 \\<Longrightarrow> e2ennreal ?x = 0\n\ngoal (1 subgoal):\n 1. e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n    \\<le> e2ennreal (ereal C) \\<longrightarrow>\n    (\\<exists>e\\<le>esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>).\n        ereal C < e)", "by fastforce"], ["proof (state)\nthis:\n  e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n  \\<le> e2ennreal (ereal C) \\<longrightarrow>\n  (\\<exists>e\\<le>esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>). ereal C < e)\n\ngoal (1 subgoal):\n 1. ennreal C\n    < e2ennreal\n       (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)) \\<Longrightarrow>\n    ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "then"], ["proof (chain)\npicking this:\n  e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n  \\<le> e2ennreal (ereal C) \\<longrightarrow>\n  (\\<exists>e\\<le>esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>). ereal C < e)", "show ?thesis"], ["proof (prove)\nusing this:\n  e2ennreal (esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>))\n  \\<le> e2ennreal (ereal C) \\<longrightarrow>\n  (\\<exists>e\\<le>esssup M (\\<lambda>a. ereal \\<bar>f a\\<bar>). ereal C < e)\n\ngoal (1 subgoal):\n 1. ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)", "by (meson e2ennreal_mono leI less_le_trans)"], ["proof (state)\nthis:\n  ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ereal C < esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. C < \\<bar>f x\\<bar>}", "have \"emeasure M {x \\<in> space M. ereal(\\<bar>f x\\<bar>) > C} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. ereal C < ereal \\<bar>f x\\<bar>}", "by (rule esssup_pos_measure[OF _ *], auto)"], ["proof (state)\nthis:\n  0 < emeasure M {x \\<in> space M. ereal C < ereal \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. C < \\<bar>f x\\<bar>}", "then"], ["proof (chain)\npicking this:\n  0 < emeasure M {x \\<in> space M. ereal C < ereal \\<bar>f x\\<bar>}", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < emeasure M {x \\<in> space M. ereal C < ereal \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. C < \\<bar>f x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  0 < emeasure M {x \\<in> space M. C < \\<bar>f x\\<bar>}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_infinity_tendsto_AE:\n  assumes \"tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) f g\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n          \"g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n  shows \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "have *: \"AE x in M. \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>(f n - g) x\\<bar>\n               \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)", "apply (rule L_infinity_AE_bound)"], ["proof (prove)\ngoal (1 subgoal):\n 1. f n - g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "using assms spaceN_diff"], ["proof (prove)\nusing this:\n  tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) f g\n  f ?n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  \\<lbrakk>?x \\<in> space\\<^sub>N ?N; ?y \\<in> space\\<^sub>N ?N\\<rbrakk>\n  \\<Longrightarrow> ?x - ?y \\<in> space\\<^sub>N ?N\n\ngoal (1 subgoal):\n 1. f n - g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "by blast"], ["proof (state)\nthis:\n  AE x in M. \\<bar>(f ?n - g) x\\<bar>\n             \\<le> Norm (\\<LL> \\<infinity> M) (f ?n - g)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "have \"AE x in M. \\<forall>n. \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n.\n                  \\<bar>(f n - g) x\\<bar>\n                  \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)", "apply (subst AE_all_countable)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       AE x in M. \\<bar>(f i - g) x\\<bar>\n                  \\<le> Norm (\\<LL> \\<infinity> M) (f i - g)", "using *"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>(f ?n - g) x\\<bar>\n             \\<le> Norm (\\<LL> \\<infinity> M) (f ?n - g)\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       AE x in M. \\<bar>(f i - g) x\\<bar>\n                  \\<le> Norm (\\<LL> \\<infinity> M) (f i - g)", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n.\n                \\<bar>(f n - g) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "moreover"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n.\n                \\<bar>(f n - g) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "have \"(\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\" if \"\\<forall>n. \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "have \"(\\<lambda>n. \\<bar>(f n - g) x\\<bar>) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<bar>(f n - g) x\\<bar>) \\<longlonglongrightarrow> 0", "apply (rule tendsto_sandwich[of \"\\<lambda>n. 0\" _ _ \"\\<lambda>n. Norm (\\<LL> \\<infinity> M) (f n - g)\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially. 0 \\<le> \\<bar>(f n - g) x\\<bar>\n 2. \\<forall>\\<^sub>F n in sequentially.\n       \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n 3. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. Norm (\\<LL> \\<infinity> M) (f n - g))\n    \\<longlonglongrightarrow> 0", "using that \\<open>tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) f g\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n  tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) f g\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially. 0 \\<le> \\<bar>(f n - g) x\\<bar>\n 2. \\<forall>\\<^sub>F n in sequentially.\n       \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n 3. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. Norm (\\<LL> \\<infinity> M) (f n - g))\n    \\<longlonglongrightarrow> 0", "unfolding tendsto_in\\<^sub>N_def"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n  (\\<lambda>n. Norm (\\<LL> \\<infinity> M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially. 0 \\<le> \\<bar>(f n - g) x\\<bar>\n 2. \\<forall>\\<^sub>F n in sequentially.\n       \\<bar>(f n - g) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n 3. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. Norm (\\<LL> \\<infinity> M) (f n - g))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<bar>(f n - g) x\\<bar>) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. \\<bar>(f n - g) x\\<bar>) \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. \\<bar>f n x - g x\\<bar>) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. \\<bar>(f n - g) x\\<bar>) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<bar>f n x - g x\\<bar>) \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<bar>f n x - g x\\<bar>) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. \\<bar>f n x - g x\\<bar>) \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. \\<bar>f n x - g x\\<bar>) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "by (simp add: \\<open>(\\<lambda>n. \\<bar>f n x - g x\\<bar>) \\<longlonglongrightarrow> 0\\<close> LIM_zero_cancel tendsto_rabs_zero_cancel)"], ["proof (state)\nthis:\n  (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>n.\n     \\<bar>(f n - g) ?x\\<bar>\n     \\<le> Norm (\\<LL> \\<infinity> M) (f n - g) \\<Longrightarrow>\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. \\<forall>n.\n                \\<bar>(f n - g) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n  \\<forall>n.\n     \\<bar>(f n - g) ?x\\<bar>\n     \\<le> Norm (\\<LL> \\<infinity> M) (f n - g) \\<Longrightarrow>\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>n.\n                \\<bar>(f n - g) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f n - g)\n  \\<forall>n.\n     \\<bar>(f n - g) ?x\\<bar>\n     \\<le> Norm (\\<LL> \\<infinity> M) (f n - g) \\<Longrightarrow>\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>As an illustration of the mechanism of spaces inclusion, let us show that bounded\ncontinuous functions belong to $L^\\infty$.\\<close>"], ["", "lemma bcontfun_subset_L_infinity:\n  assumes \"sets M = sets borel\"\n  shows \"space\\<^sub>N bcontfun\\<^sub>N \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n        \"\\<And>f. f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow> Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\"\n        \"\\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f\"\n        \"bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (space\\<^sub>N bcontfun\\<^sub>N\n     \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n     (\\<And>f.\n         f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n         Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f)) &&&\n    (\\<And>f.\n        eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f) &&&\n    bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. space\\<^sub>N bcontfun\\<^sub>N\n    \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M)\n 2. \\<And>f.\n       f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n       Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\n 3. \\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f\n 4. bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M", "have *: \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and> Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\" if \"f \\<in> space\\<^sub>N bcontfun\\<^sub>N\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "have H: \"continuous_on UNIV f\" \"\\<And>x. abs(f x) \\<le> Norm bcontfun\\<^sub>N f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on UNIV f &&&\n    (\\<And>x. \\<bar>f x\\<bar> \\<le> Norm bcontfun\\<^sub>N f)", "using bcontfun\\<^sub>ND[OF \\<open>f \\<in> space\\<^sub>N bcontfun\\<^sub>N\\<close>]"], ["proof (prove)\nusing this:\n  continuous_on UNIV f\n  norm (f ?x) \\<le> Norm bcontfun\\<^sub>N f\n\ngoal (1 subgoal):\n 1. continuous_on UNIV f &&&\n    (\\<And>x. \\<bar>f x\\<bar> \\<le> Norm bcontfun\\<^sub>N f)", "by auto"], ["proof (state)\nthis:\n  continuous_on UNIV f\n  \\<bar>f ?x\\<bar> \\<le> Norm bcontfun\\<^sub>N f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "then"], ["proof (chain)\npicking this:\n  continuous_on UNIV f\n  \\<bar>f ?x\\<bar> \\<le> Norm bcontfun\\<^sub>N f", "have \"f \\<in> borel_measurable borel\""], ["proof (prove)\nusing this:\n  continuous_on UNIV f\n  \\<bar>f ?x\\<bar> \\<le> Norm bcontfun\\<^sub>N f\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable borel", "using borel_measurable_continuous_onI"], ["proof (prove)\nusing this:\n  continuous_on UNIV f\n  \\<bar>f ?x\\<bar> \\<le> Norm bcontfun\\<^sub>N f\n  continuous_on UNIV ?f \\<Longrightarrow> ?f \\<in> borel_measurable borel\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable borel", "by simp"], ["proof (state)\nthis:\n  f \\<in> borel_measurable borel\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable borel", "have \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable borel\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable borel\n  sets M = sets borel\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "have *: \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm bcontfun\\<^sub>N f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm bcontfun\\<^sub>N f", "using H(2)"], ["proof (prove)\nusing this:\n  \\<bar>f ?x\\<bar> \\<le> Norm bcontfun\\<^sub>N f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm bcontfun\\<^sub>N f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm bcontfun\\<^sub>N f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "using L_infinity_I[OF \\<open>f \\<in> borel_measurable M\\<close> * Norm_nonneg]"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n  Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n  Norm (\\<LL> \\<infinity> M) ?f \\<le> Norm bcontfun\\<^sub>N ?f\n\ngoal (4 subgoals):\n 1. space\\<^sub>N bcontfun\\<^sub>N\n    \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M)\n 2. \\<And>f.\n       f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n       Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\n 3. \\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f\n 4. bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M", "show \"space\\<^sub>N bcontfun\\<^sub>N \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M)\"\n       \"\\<And>f. f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow> Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N bcontfun\\<^sub>N\n    \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    (\\<And>f.\n        f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n        Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f)", "using *"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n  Norm (\\<LL> \\<infinity> M) ?f \\<le> Norm bcontfun\\<^sub>N ?f\n\ngoal (1 subgoal):\n 1. space\\<^sub>N bcontfun\\<^sub>N\n    \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    (\\<And>f.\n        f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n        Norm (\\<LL> \\<infinity> M) f \\<le> Norm bcontfun\\<^sub>N f)", "by auto"], ["proof (state)\nthis:\n  space\\<^sub>N bcontfun\\<^sub>N\n  \\<subseteq> space\\<^sub>N (\\<LL> \\<infinity> M)\n  ?f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n  Norm (\\<LL> \\<infinity> M) ?f \\<le> Norm bcontfun\\<^sub>N ?f\n\ngoal (2 subgoals):\n 1. \\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f\n 2. bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M", "show **: \"bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M", "apply (rule quasinorm_subsetI'[of _ _ 1])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>f.\n       f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n       f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n 2. \\<And>f.\n       f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n       Norm (\\<LL> \\<infinity> M) f \\<le> 1 * Norm bcontfun\\<^sub>N f", "using *"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n  Norm (\\<LL> \\<infinity> M) ?f \\<le> Norm bcontfun\\<^sub>N ?f\n\ngoal (2 subgoals):\n 1. \\<And>f.\n       f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n       f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n 2. \\<And>f.\n       f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n       Norm (\\<LL> \\<infinity> M) f \\<le> 1 * Norm bcontfun\\<^sub>N f", "by auto"], ["proof (state)\nthis:\n  bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\n\ngoal (1 subgoal):\n 1. \\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f", "have \"eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal 1 * eNorm bcontfun\\<^sub>N f\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> ennreal 1 * eNorm bcontfun\\<^sub>N f", "apply (rule quasinorm_subset_Norm_eNorm)"], ["proof (prove)\ngoal (3 subgoals):\n 1. f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n    Norm (\\<LL> \\<infinity> M) f \\<le> 1 * Norm bcontfun\\<^sub>N f\n 2. bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\n 3. 0 < 1", "using * **"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n  Norm (\\<LL> \\<infinity> M) ?f \\<le> Norm bcontfun\\<^sub>N ?f\n  bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\n\ngoal (3 subgoals):\n 1. f \\<in> space\\<^sub>N bcontfun\\<^sub>N \\<Longrightarrow>\n    Norm (\\<LL> \\<infinity> M) f \\<le> 1 * Norm bcontfun\\<^sub>N f\n 2. bcontfun\\<^sub>N \\<subseteq>\\<^sub>N \\<LL> \\<infinity> M\n 3. 0 < 1", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) ?f \\<le> ennreal 1 * eNorm bcontfun\\<^sub>N ?f\n\ngoal (1 subgoal):\n 1. \\<And>f. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> \\<infinity> M) ?f \\<le> ennreal 1 * eNorm bcontfun\\<^sub>N ?f", "show \"eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f\" for f"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) ?f \\<le> ennreal 1 * eNorm bcontfun\\<^sub>N ?f\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) f \\<le> eNorm bcontfun\\<^sub>N f", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) ?f \\<le> eNorm bcontfun\\<^sub>N ?f\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>$L^p$ for $0 < p < \\infty$\\<close>"], ["", "lemma Lp:\n  assumes \"p \\<ge> (1::real)\"\n  shows \"eNorm (\\<LL> p M) f = (if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n                            then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n                            else (\\<infinity>::ennreal))\"\n        \"defect (\\<LL> p M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect (\\<LL> (ennreal p) M) = 1", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 1", "define F where \"F = {f \\<in> borel_measurable M. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\""], ["proof (state)\nthis:\n  F =\n  {f \\<in> borel_measurable M.\n   integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 1", "have *: \"quasinorm_on F 1 (\\<lambda>(f::'a\\<Rightarrow>real). (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasinorm_on F 1\n     (\\<lambda>x.\n         ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p)))", "proof (rule quasinorm_onI)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> F\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal 1 *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal 1 *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 5. 0 \\<in> F\n 6. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 7. 1 \\<le> 1", "fix f g"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> F\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal 1 *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal 1 *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 5. 0 \\<in> F\n 6. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 7. 1 \\<le> 1", "assume \"f \\<in> F\" \"g \\<in> F\""], ["proof (state)\nthis:\n  f \\<in> F\n  g \\<in> F\n\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> F\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal 1 *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal 1 *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 5. 0 \\<in> F\n 6. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 7. 1 \\<le> 1", "then"], ["proof (chain)\npicking this:\n  f \\<in> F\n  g \\<in> F", "show \"f + g \\<in> F\""], ["proof (prove)\nusing this:\n  f \\<in> F\n  g \\<in> F\n\ngoal (1 subgoal):\n 1. f + g \\<in> F", "unfolding F_def plus_fun_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n  g \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x + g x)\n    \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "apply (auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> borel_measurable M;\n     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p);\n     g \\<in> borel_measurable M;\n     integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\\<rbrakk>\n    \\<Longrightarrow> integrable M\n                       (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)", "by (rule Minkowski_inequality(1), auto simp add: \\<open>p \\<ge> 1\\<close>)"], ["proof (state)\nthis:\n  f + g \\<in> F\n\ngoal (6 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal 1 *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal 1 *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 4. 0 \\<in> F\n 5. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 6. 1 \\<le> 1", "show \"ennreal ((\\<integral>x. \\<bar>(f + g) x\\<bar> powr p \\<partial>M) powr (1/p))\n          \\<le> ennreal 1 * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + ennreal 1 * (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>(f + g) x\\<bar> powr p) powr (1 / p))\n    \\<le> ennreal 1 *\n          ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) +\n          ennreal 1 *\n          ennreal ((LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))", "apply (auto, subst ennreal_plus[symmetric], simp, simp, rule ennreal_leI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "unfolding plus_fun_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "apply (rule Minkowski_inequality(2)[of p f M g], auto simp add: \\<open>p \\<ge> 1\\<close>)"], ["proof (prove)\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M\n 3. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 4. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)", "using \\<open>f \\<in> F\\<close> \\<open>g \\<in> F\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> F\n  g \\<in> F\n\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M\n 3. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 4. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)", "unfolding F_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n  g \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M\n 3. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 4. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  ennreal ((LINT x|M. \\<bar>(f + g) x\\<bar> powr p) powr (1 / p))\n  \\<le> ennreal 1 *\n        ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) +\n        ennreal 1 *\n        ennreal ((LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))\n\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 1", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 1", "fix f and c::real"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 1", "assume \"f \\<in> F\""], ["proof (state)\nthis:\n  f \\<in> F\n\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 1", "show \"c *\\<^sub>R f \\<in> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c *\\<^sub>R f \\<in> F", "using \\<open>f \\<in> F\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> F\n\ngoal (1 subgoal):\n 1. c *\\<^sub>R f \\<in> F", "unfolding scaleR_fun_def F_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. c *\\<^sub>R f x)\n    \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "by (auto simp add: abs_mult powr_mult)"], ["proof (state)\nthis:\n  c *\\<^sub>R f \\<in> F\n\ngoal (4 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 2. 0 \\<in> F\n 3. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 4. 1 \\<le> 1", "show \"(\\<integral>x. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p \\<partial>M) powr (1/p) \\<le> ennreal(abs(c)) * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p) powr (1 / p))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "apply (rule eq_refl, subst ennreal_mult[symmetric], simp, simp, rule ennreal_cong)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p) powr (1 / p) =\n    \\<bar>c\\<bar> * (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "apply (unfold scaleR_fun_def, simp add: abs_mult powr_mult powr_powr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<noteq> 0 \\<longrightarrow>\n    p = 0 \\<longrightarrow>\n    LINT x|M. (if f x = 0 then 0 else 1) = 0 \\<or> \\<bar>c\\<bar> = 1", "using \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. c \\<noteq> 0 \\<longrightarrow>\n    p = 0 \\<longrightarrow>\n    LINT x|M. (if f x = 0 then 0 else 1) = 0 \\<or> \\<bar>c\\<bar> = 1", "by auto"], ["proof (state)\nthis:\n  ennreal ((LINT x|M. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p) powr (1 / p))\n  \\<le> ennreal \\<bar>c\\<bar> *\n        ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (3 subgoals):\n 1. 0 \\<in> F\n 2. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 3. 1 \\<le> 1", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 \\<in> F\n 2. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 3. 1 \\<le> 1", "show \"0 \\<in> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<in> F", "unfolding zero_fun_def F_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 0)\n    \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "by auto"], ["proof (state)\nthis:\n  0 \\<in> F\n\ngoal (2 subgoals):\n 1. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 2. 1 \\<le> 1", "qed (auto)"], ["proof (state)\nthis:\n  quasinorm_on F 1\n   (\\<lambda>x. ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p)))\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 1", "have \"p \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> p", "using \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. 0 \\<le> p", "by auto"], ["proof (state)\nthis:\n  0 \\<le> p\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 1", "have **: \"\\<LL> p M = quasinorm_of (1,\n              (\\<lambda>f. if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n              then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n              else (\\<infinity>::ennreal)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<LL> (ennreal p) M =\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)", "unfolding Lp_space_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if ennreal p = 0\n     then quasinorm_of\n           (1, \\<lambda>f.\n                  if f \\<in> borel_measurable M then 0 else \\<infinity>)\n     else if ennreal p < \\<infinity>\n          then quasinorm_of\n                (if ennreal p < 1 then 2 powr (1 / enn2real (ennreal p) - 1)\n                 else 1,\n                 \\<lambda>f.\n                    if f \\<in> borel_measurable M \\<and>\n                       integrable M\n                        (\\<lambda>x.\n                            \\<bar>f x\\<bar> powr enn2real (ennreal p))\n                    then ennreal\n                          ((LINT x|M.\n                               \\<bar>f x\\<bar> powr\n                               enn2real (ennreal p)) powr\n                           (1 / enn2real (ennreal p)))\n                    else \\<infinity>)\n          else quasinorm_of\n                (1, \\<lambda>f.\n                       if f \\<in> borel_measurable M\n                       then e2ennreal\n                             (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                       else \\<infinity>)) =\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)", "using enn2real_ennreal[OF \\<open>p \\<ge> 0\\<close>] \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  enn2real (ennreal p) = p\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. (if ennreal p = 0\n     then quasinorm_of\n           (1, \\<lambda>f.\n                  if f \\<in> borel_measurable M then 0 else \\<infinity>)\n     else if ennreal p < \\<infinity>\n          then quasinorm_of\n                (if ennreal p < 1 then 2 powr (1 / enn2real (ennreal p) - 1)\n                 else 1,\n                 \\<lambda>f.\n                    if f \\<in> borel_measurable M \\<and>\n                       integrable M\n                        (\\<lambda>x.\n                            \\<bar>f x\\<bar> powr enn2real (ennreal p))\n                    then ennreal\n                          ((LINT x|M.\n                               \\<bar>f x\\<bar> powr\n                               enn2real (ennreal p)) powr\n                           (1 / enn2real (ennreal p)))\n                    else \\<infinity>)\n          else quasinorm_of\n                (1, \\<lambda>f.\n                       if f \\<in> borel_measurable M\n                       then e2ennreal\n                             (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                       else \\<infinity>)) =\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> p \\<Longrightarrow>\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal\n                  ((LINT x|M.\n                       \\<bar>f x\\<bar> powr enn2real (ennreal p)) powr\n                   (1 / enn2real (ennreal p)))\n            else \\<infinity>) =\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)", "using enn2real_ennreal[OF \\<open>p \\<ge> 0\\<close>]"], ["proof (prove)\nusing this:\n  enn2real (ennreal p) = p\n\ngoal (1 subgoal):\n 1. 1 \\<le> p \\<Longrightarrow>\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal\n                  ((LINT x|M.\n                       \\<bar>f x\\<bar> powr enn2real (ennreal p)) powr\n                   (1 / enn2real (ennreal p)))\n            else \\<infinity>) =\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n            then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)", "by presburger"], ["proof (state)\nthis:\n  \\<LL> (ennreal p) M =\n  quasinorm_of\n   (1, \\<lambda>f.\n          if f \\<in> borel_measurable M \\<and>\n             integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n          then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n          else \\<infinity>)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 1", "show \"eNorm (\\<LL> p M) f = (if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n                            then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n                            else (\\<infinity>::ennreal))\"\n      \"defect (\\<LL> p M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect (\\<LL> (ennreal p) M) = 1", "unfolding **"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm\n     (quasinorm_of\n       (1, \\<lambda>f.\n              if f \\<in> borel_measurable M \\<and>\n                 integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n              then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n              else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect\n     (quasinorm_of\n       (1, \\<lambda>f.\n              if f \\<in> borel_measurable M \\<and>\n                 integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n              then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n              else \\<infinity>)) =\n    1", "using quasinorm_of[OF extend_quasinorm[OF *]]"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (1, \\<lambda>x.\n            if x \\<in> F\n            then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n            else \\<infinity>))\n   ?x =\n  (if ?x \\<in> F\n   then ennreal ((LINT x|M. \\<bar>?x x\\<bar> powr p) powr (1 / p))\n   else \\<infinity>)\n  defect\n   (quasinorm_of\n     (1, \\<lambda>x.\n            if x \\<in> F\n            then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)) =\n  1\n\ngoal (1 subgoal):\n 1. eNorm\n     (quasinorm_of\n       (1, \\<lambda>f.\n              if f \\<in> borel_measurable M \\<and>\n                 integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n              then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n              else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect\n     (quasinorm_of\n       (1, \\<lambda>f.\n              if f \\<in> borel_measurable M \\<and>\n                 integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n              then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n              else \\<infinity>)) =\n    1", "unfolding F_def"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (1, \\<lambda>x.\n            if x \\<in> {f \\<in> borel_measurable M.\n                        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n            then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n            else \\<infinity>))\n   ?x =\n  (if ?x \\<in> {f \\<in> borel_measurable M.\n                integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n   then ennreal ((LINT x|M. \\<bar>?x x\\<bar> powr p) powr (1 / p))\n   else \\<infinity>)\n  defect\n   (quasinorm_of\n     (1, \\<lambda>x.\n            if x \\<in> {f \\<in> borel_measurable M.\n                        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n            then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n            else \\<infinity>)) =\n  1\n\ngoal (1 subgoal):\n 1. eNorm\n     (quasinorm_of\n       (1, \\<lambda>f.\n              if f \\<in> borel_measurable M \\<and>\n                 integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n              then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n              else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect\n     (quasinorm_of\n       (1, \\<lambda>f.\n              if f \\<in> borel_measurable M \\<and>\n                 integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n              then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n              else \\<infinity>)) =\n    1", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f =\n  (if f \\<in> borel_measurable M \\<and>\n      integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n   then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n   else \\<infinity>)\n  defect (\\<LL> (ennreal p) M) = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_le_1:\n  assumes \"p > 0\" \"p \\<le> (1::real)\"\n  shows \"eNorm (\\<LL> p M) f = (if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n                            then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n                            else (\\<infinity>::ennreal))\"\n        \"defect (\\<LL> p M) = 2 powr (1/p - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "define F where \"F = {f \\<in> borel_measurable M. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\""], ["proof (state)\nthis:\n  F =\n  {f \\<in> borel_measurable M.\n   integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "have *: \"quasinorm_on F (2 powr (1/p-1)) (\\<lambda>(f::'a\\<Rightarrow>real). (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasinorm_on F (2 powr (1 / p - 1))\n     (\\<lambda>x.\n         ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p)))", "proof (rule quasinorm_onI)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> F\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 5. 0 \\<in> F\n 6. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 7. 1 \\<le> 2 powr (1 / p - 1)", "fix f g"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> F\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 5. 0 \\<in> F\n 6. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 7. 1 \\<le> 2 powr (1 / p - 1)", "assume \"f \\<in> F\" \"g \\<in> F\""], ["proof (state)\nthis:\n  f \\<in> F\n  g \\<in> F\n\ngoal (7 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> x + y \\<in> F\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 4. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 5. 0 \\<in> F\n 6. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 7. 1 \\<le> 2 powr (1 / p - 1)", "then"], ["proof (chain)\npicking this:\n  f \\<in> F\n  g \\<in> F", "show \"f + g \\<in> F\""], ["proof (prove)\nusing this:\n  f \\<in> F\n  g \\<in> F\n\ngoal (1 subgoal):\n 1. f + g \\<in> F", "unfolding F_def plus_fun_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n  g \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x + g x)\n    \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "apply (auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> borel_measurable M;\n     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p);\n     g \\<in> borel_measurable M;\n     integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)\\<rbrakk>\n    \\<Longrightarrow> integrable M\n                       (\\<lambda>x. \\<bar>f x + g x\\<bar> powr p)", "by (rule Minkowski_inequality_le_1(1), auto simp add: \\<open>p > 0\\<close> \\<open>p \\<le> 1\\<close>)"], ["proof (state)\nthis:\n  f + g \\<in> F\n\ngoal (6 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> F; y \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M. \\<bar>(x + y) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p)) +\n                               ennreal (2 powr (1 / p - 1)) *\n                               ennreal\n                                ((LINT x|M. \\<bar>y x\\<bar> powr p) powr\n                                 (1 / p))\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 3. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 4. 0 \\<in> F\n 5. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 6. 1 \\<le> 2 powr (1 / p - 1)", "show \"ennreal ((\\<integral>x. \\<bar>(f + g) x\\<bar> powr p \\<partial>M) powr (1/p))\n          \\<le> ennreal (2 powr (1/p-1)) * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) + ennreal (2 powr (1/p-1)) * (\\<integral>x. \\<bar>g x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>(f + g) x\\<bar> powr p) powr (1 / p))\n    \\<le> ennreal (2 powr (1 / p - 1)) *\n          ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) +\n          ennreal (2 powr (1 / p - 1)) *\n          ennreal ((LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))", "apply (subst ennreal_mult[symmetric], auto)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p))\n    \\<le> ennreal\n           (2 powr (1 / p - 1) *\n            (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) +\n          ennreal\n           (2 powr (1 / p - 1) *\n            (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))", "apply (subst ennreal_plus[symmetric], simp, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p))\n    \\<le> ennreal\n           (2 powr (1 / p - 1) *\n            (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n            2 powr (1 / p - 1) *\n            (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))", "apply (rule ennreal_leI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "unfolding plus_fun_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x + g x\\<bar> powr p) powr (1 / p)\n    \\<le> 2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) +\n          2 powr (1 / p - 1) *\n          (LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p)", "apply (rule Minkowski_inequality_le_1(2)[of p f M g], auto simp add: \\<open>p > 0\\<close> \\<open>p \\<le> 1\\<close>)"], ["proof (prove)\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M\n 3. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 4. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)", "using \\<open>f \\<in> F\\<close> \\<open>g \\<in> F\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> F\n  g \\<in> F\n\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M\n 3. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 4. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)", "unfolding F_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n  g \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M\n 3. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 4. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  ennreal ((LINT x|M. \\<bar>(f + g) x\\<bar> powr p) powr (1 / p))\n  \\<le> ennreal (2 powr (1 / p - 1)) *\n        ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) +\n        ennreal (2 powr (1 / p - 1)) *\n        ennreal ((LINT x|M. \\<bar>g x\\<bar> powr p) powr (1 / p))\n\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 2 powr (1 / p - 1)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 2 powr (1 / p - 1)", "fix f and c::real"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 2 powr (1 / p - 1)", "assume \"f \\<in> F\""], ["proof (state)\nthis:\n  f \\<in> F\n\ngoal (5 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> c *\\<^sub>R x \\<in> F\n 2. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 3. 0 \\<in> F\n 4. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 5. 1 \\<le> 2 powr (1 / p - 1)", "show \"c *\\<^sub>R f \\<in> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c *\\<^sub>R f \\<in> F", "using \\<open>f \\<in> F\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> F\n\ngoal (1 subgoal):\n 1. c *\\<^sub>R f \\<in> F", "unfolding scaleR_fun_def F_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. c *\\<^sub>R f x)\n    \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "by (auto simp add: abs_mult powr_mult)"], ["proof (state)\nthis:\n  c *\\<^sub>R f \\<in> F\n\ngoal (4 subgoals):\n 1. \\<And>c x.\n       \\<lbrakk>c \\<noteq> 0; x \\<in> F\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          ((LINT xa|M.\n                               \\<bar>(c *\\<^sub>R x) xa\\<bar> powr p) powr\n                           (1 / p))\n                         \\<le> ennreal \\<bar>c\\<bar> *\n                               ennreal\n                                ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr\n                                 (1 / p))\n 2. 0 \\<in> F\n 3. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 4. 1 \\<le> 2 powr (1 / p - 1)", "show \"(\\<integral>x. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p \\<partial>M) powr (1/p) \\<le> ennreal(abs(c)) * (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p) powr (1 / p))\n    \\<le> ennreal \\<bar>c\\<bar> *\n          ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "apply (rule eq_refl, subst ennreal_mult[symmetric], simp, simp, rule ennreal_cong)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p) powr (1 / p) =\n    \\<bar>c\\<bar> * (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "apply (unfold scaleR_fun_def, simp add: abs_mult powr_mult powr_powr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<noteq> 0 \\<longrightarrow>\n    p = 0 \\<longrightarrow>\n    LINT x|M. (if f x = 0 then 0 else 1) = 0 \\<or> \\<bar>c\\<bar> = 1", "using \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < p\n\ngoal (1 subgoal):\n 1. c \\<noteq> 0 \\<longrightarrow>\n    p = 0 \\<longrightarrow>\n    LINT x|M. (if f x = 0 then 0 else 1) = 0 \\<or> \\<bar>c\\<bar> = 1", "by auto"], ["proof (state)\nthis:\n  ennreal ((LINT x|M. \\<bar>(c *\\<^sub>R f) x\\<bar> powr p) powr (1 / p))\n  \\<le> ennreal \\<bar>c\\<bar> *\n        ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (3 subgoals):\n 1. 0 \\<in> F\n 2. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 3. 1 \\<le> 2 powr (1 / p - 1)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 \\<in> F\n 2. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 3. 1 \\<le> 2 powr (1 / p - 1)", "show \"0 \\<in> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<in> F", "unfolding zero_fun_def F_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 0)\n    \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "by auto"], ["proof (state)\nthis:\n  0 \\<in> F\n\ngoal (2 subgoals):\n 1. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0\n 2. 1 \\<le> 2 powr (1 / p - 1)", "show \"1 \\<le> 2 powr (1 / p - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> 2 powr (1 / p - 1)", "using \\<open>p > 0\\<close> \\<open>p \\<le> 1\\<close>"], ["proof (prove)\nusing this:\n  0 < p\n  p \\<le> 1\n\ngoal (1 subgoal):\n 1. 1 \\<le> 2 powr (1 / p - 1)", "by (auto simp add: ge_one_powr_ge_zero)"], ["proof (state)\nthis:\n  1 \\<le> 2 powr (1 / p - 1)\n\ngoal (1 subgoal):\n 1. ennreal ((LINT x|M. \\<bar>0 x\\<bar> powr p) powr (1 / p)) = 0", "qed (auto)"], ["proof (state)\nthis:\n  quasinorm_on F (2 powr (1 / p - 1))\n   (\\<lambda>x. ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p)))\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "have \"p \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> p", "using \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < p\n\ngoal (1 subgoal):\n 1. 0 \\<le> p", "by auto"], ["proof (state)\nthis:\n  0 \\<le> p\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "have **: \"\\<LL> p M = quasinorm_of (2 powr (1/p-1),\n              (\\<lambda>f. if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n              then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n              else (\\<infinity>::ennreal)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<LL> (ennreal p) M =\n    quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>f.\n         if f \\<in> borel_measurable M \\<and>\n            integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n         then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n         else \\<infinity>)", "unfolding Lp_space_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if ennreal p = 0\n     then quasinorm_of\n           (1, \\<lambda>f.\n                  if f \\<in> borel_measurable M then 0 else \\<infinity>)\n     else if ennreal p < \\<infinity>\n          then quasinorm_of\n                (if ennreal p < 1 then 2 powr (1 / enn2real (ennreal p) - 1)\n                 else 1,\n                 \\<lambda>f.\n                    if f \\<in> borel_measurable M \\<and>\n                       integrable M\n                        (\\<lambda>x.\n                            \\<bar>f x\\<bar> powr enn2real (ennreal p))\n                    then ennreal\n                          ((LINT x|M.\n                               \\<bar>f x\\<bar> powr\n                               enn2real (ennreal p)) powr\n                           (1 / enn2real (ennreal p)))\n                    else \\<infinity>)\n          else quasinorm_of\n                (1, \\<lambda>f.\n                       if f \\<in> borel_measurable M\n                       then e2ennreal\n                             (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                       else \\<infinity>)) =\n    quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>f.\n         if f \\<in> borel_measurable M \\<and>\n            integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n         then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n         else \\<infinity>)", "using \\<open>p > 0\\<close> \\<open>p \\<le> 1\\<close>"], ["proof (prove)\nusing this:\n  0 < p\n  p \\<le> 1\n\ngoal (1 subgoal):\n 1. (if ennreal p = 0\n     then quasinorm_of\n           (1, \\<lambda>f.\n                  if f \\<in> borel_measurable M then 0 else \\<infinity>)\n     else if ennreal p < \\<infinity>\n          then quasinorm_of\n                (if ennreal p < 1 then 2 powr (1 / enn2real (ennreal p) - 1)\n                 else 1,\n                 \\<lambda>f.\n                    if f \\<in> borel_measurable M \\<and>\n                       integrable M\n                        (\\<lambda>x.\n                            \\<bar>f x\\<bar> powr enn2real (ennreal p))\n                    then ennreal\n                          ((LINT x|M.\n                               \\<bar>f x\\<bar> powr\n                               enn2real (ennreal p)) powr\n                           (1 / enn2real (ennreal p)))\n                    else \\<infinity>)\n          else quasinorm_of\n                (1, \\<lambda>f.\n                       if f \\<in> borel_measurable M\n                       then e2ennreal\n                             (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                       else \\<infinity>)) =\n    quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>f.\n         if f \\<in> borel_measurable M \\<and>\n            integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n         then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n         else \\<infinity>)", "using enn2real_ennreal[OF \\<open>p \\<ge> 0\\<close>]"], ["proof (prove)\nusing this:\n  0 < p\n  p \\<le> 1\n  enn2real (ennreal p) = p\n\ngoal (1 subgoal):\n 1. (if ennreal p = 0\n     then quasinorm_of\n           (1, \\<lambda>f.\n                  if f \\<in> borel_measurable M then 0 else \\<infinity>)\n     else if ennreal p < \\<infinity>\n          then quasinorm_of\n                (if ennreal p < 1 then 2 powr (1 / enn2real (ennreal p) - 1)\n                 else 1,\n                 \\<lambda>f.\n                    if f \\<in> borel_measurable M \\<and>\n                       integrable M\n                        (\\<lambda>x.\n                            \\<bar>f x\\<bar> powr enn2real (ennreal p))\n                    then ennreal\n                          ((LINT x|M.\n                               \\<bar>f x\\<bar> powr\n                               enn2real (ennreal p)) powr\n                           (1 / enn2real (ennreal p)))\n                    else \\<infinity>)\n          else quasinorm_of\n                (1, \\<lambda>f.\n                       if f \\<in> borel_measurable M\n                       then e2ennreal\n                             (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                       else \\<infinity>)) =\n    quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>f.\n         if f \\<in> borel_measurable M \\<and>\n            integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n         then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n         else \\<infinity>)", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>0 < p; p < 1\\<rbrakk>\n    \\<Longrightarrow> quasinorm_of\n                       (2 powr (1 / p - 1),\n                        \\<lambda>f.\n                           if f \\<in> borel_measurable M \\<and>\n                              integrable M\n                               (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n                           then ennreal\n                                 ((LINT x|M.\n\\<bar>f x\\<bar> powr enn2real (ennreal p)) powr\n                                  (1 / enn2real (ennreal p)))\n                           else \\<infinity>) =\n                      quasinorm_of\n                       (2 powr (1 / p - 1),\n                        \\<lambda>f.\n                           if f \\<in> borel_measurable M \\<and>\n                              integrable M\n                               (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n                           then ennreal\n                                 ((LINT x|M. \\<bar>f x\\<bar> powr p) powr\n                                  (1 / p))\n                           else \\<infinity>)\n 2. p = 1 \\<Longrightarrow>\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar>)\n            then ennreal\n                  ((LINT x|M.\n                       \\<bar>f x\\<bar> powr enn2real (ennreal 1)) powr\n                   (1 / enn2real (ennreal 1)))\n            else \\<infinity>) =\n    quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M \\<and>\n               integrable M (\\<lambda>x. \\<bar>f x\\<bar>)\n            then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr 1) powr (1 / 1))\n            else \\<infinity>)", "by (insert enn2real_ennreal[OF \\<open>p \\<ge> 0\\<close>], presburger)+"], ["proof (state)\nthis:\n  \\<LL> (ennreal p) M =\n  quasinorm_of\n   (2 powr (1 / p - 1),\n    \\<lambda>f.\n       if f \\<in> borel_measurable M \\<and>\n          integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n       then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n       else \\<infinity>)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>)\n 2. defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "show \"eNorm (\\<LL> p M) f = (if (f \\<in> borel_measurable M \\<and> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p))\n                            then (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\n                            else (\\<infinity>::ennreal))\"\n      \"defect (\\<LL> p M) = 2 powr (1/p-1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)", "unfolding **"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm\n     (quasinorm_of\n       (2 powr (1 / p - 1),\n        \\<lambda>f.\n           if f \\<in> borel_measurable M \\<and>\n              integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n           then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n           else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect\n     (quasinorm_of\n       (2 powr (1 / p - 1),\n        \\<lambda>f.\n           if f \\<in> borel_measurable M \\<and>\n              integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n           then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n           else \\<infinity>)) =\n    2 powr (1 / p - 1)", "using quasinorm_of[OF extend_quasinorm[OF *]]"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>x.\n         if x \\<in> F\n         then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n         else \\<infinity>))\n   ?x =\n  (if ?x \\<in> F\n   then ennreal ((LINT x|M. \\<bar>?x x\\<bar> powr p) powr (1 / p))\n   else \\<infinity>)\n  defect\n   (quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>x.\n         if x \\<in> F\n         then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n         else \\<infinity>)) =\n  2 powr (1 / p - 1)\n\ngoal (1 subgoal):\n 1. eNorm\n     (quasinorm_of\n       (2 powr (1 / p - 1),\n        \\<lambda>f.\n           if f \\<in> borel_measurable M \\<and>\n              integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n           then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n           else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect\n     (quasinorm_of\n       (2 powr (1 / p - 1),\n        \\<lambda>f.\n           if f \\<in> borel_measurable M \\<and>\n              integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n           then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n           else \\<infinity>)) =\n    2 powr (1 / p - 1)", "unfolding F_def"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>x.\n         if x \\<in> {f \\<in> borel_measurable M.\n                     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n         then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n         else \\<infinity>))\n   ?x =\n  (if ?x \\<in> {f \\<in> borel_measurable M.\n                integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n   then ennreal ((LINT x|M. \\<bar>?x x\\<bar> powr p) powr (1 / p))\n   else \\<infinity>)\n  defect\n   (quasinorm_of\n     (2 powr (1 / p - 1),\n      \\<lambda>x.\n         if x \\<in> {f \\<in> borel_measurable M.\n                     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n         then ennreal ((LINT xa|M. \\<bar>x xa\\<bar> powr p) powr (1 / p))\n         else \\<infinity>)) =\n  2 powr (1 / p - 1)\n\ngoal (1 subgoal):\n 1. eNorm\n     (quasinorm_of\n       (2 powr (1 / p - 1),\n        \\<lambda>f.\n           if f \\<in> borel_measurable M \\<and>\n              integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n           then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n           else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M \\<and>\n        integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n     then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n     else \\<infinity>) &&&\n    defect\n     (quasinorm_of\n       (2 powr (1 / p - 1),\n        \\<lambda>f.\n           if f \\<in> borel_measurable M \\<and>\n              integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n           then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n           else \\<infinity>)) =\n    2 powr (1 / p - 1)", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f =\n  (if f \\<in> borel_measurable M \\<and>\n      integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n   then ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n   else \\<infinity>)\n  defect (\\<LL> (ennreal p) M) = 2 powr (1 / p - 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_space:\n  assumes \"p > (0::real)\"\n  shows \"space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> (ennreal p) M) =\n    {f \\<in> borel_measurable M.\n     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "apply (auto simp add: spaceN_iff)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       eNorm (\\<LL> (ennreal p) M) x < \\<top> \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       eNorm (\\<LL> (ennreal p) M) x < \\<top> \\<Longrightarrow>\n       integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> (ennreal p) M) x < \\<top>", "using Lp(1) Lp_le_1(1) \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> ?p \\<Longrightarrow>\n  eNorm (\\<LL> (ennreal ?p) ?M) ?f =\n  (if ?f \\<in> borel_measurable ?M \\<and>\n      integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n   then ennreal ((LINT x|?M. \\<bar>?f x\\<bar> powr ?p) powr (1 / ?p))\n   else \\<infinity>)\n  \\<lbrakk>0 < ?p; ?p \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> eNorm (\\<LL> (ennreal ?p) ?M) ?f =\n                    (if ?f \\<in> borel_measurable ?M \\<and>\n                        integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n                     then ennreal\n                           ((LINT x|?M. \\<bar>?f x\\<bar> powr ?p) powr\n                            (1 / ?p))\n                     else \\<infinity>)\n  0 < p\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       eNorm (\\<LL> (ennreal p) M) x < \\<top> \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       eNorm (\\<LL> (ennreal p) M) x < \\<top> \\<Longrightarrow>\n       integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> (ennreal p) M) x < \\<top>", "apply (metis infinity_ennreal_def less_le not_less)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       eNorm (\\<LL> (ennreal p) M) x < \\<top> \\<Longrightarrow>\n       integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> (ennreal p) M) x < \\<top>", "using Lp(1) Lp_le_1(1) \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> ?p \\<Longrightarrow>\n  eNorm (\\<LL> (ennreal ?p) ?M) ?f =\n  (if ?f \\<in> borel_measurable ?M \\<and>\n      integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n   then ennreal ((LINT x|?M. \\<bar>?f x\\<bar> powr ?p) powr (1 / ?p))\n   else \\<infinity>)\n  \\<lbrakk>0 < ?p; ?p \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> eNorm (\\<LL> (ennreal ?p) ?M) ?f =\n                    (if ?f \\<in> borel_measurable ?M \\<and>\n                        integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n                     then ennreal\n                           ((LINT x|?M. \\<bar>?f x\\<bar> powr ?p) powr\n                            (1 / ?p))\n                     else \\<infinity>)\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       eNorm (\\<LL> (ennreal p) M) x < \\<top> \\<Longrightarrow>\n       integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> (ennreal p) M) x < \\<top>", "apply (metis infinity_ennreal_def less_le not_less)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> (ennreal p) M) x < \\<top>", "using Lp(1) Lp_le_1(1) \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> ?p \\<Longrightarrow>\n  eNorm (\\<LL> (ennreal ?p) ?M) ?f =\n  (if ?f \\<in> borel_measurable ?M \\<and>\n      integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n   then ennreal ((LINT x|?M. \\<bar>?f x\\<bar> powr ?p) powr (1 / ?p))\n   else \\<infinity>)\n  \\<lbrakk>0 < ?p; ?p \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> eNorm (\\<LL> (ennreal ?p) ?M) ?f =\n                    (if ?f \\<in> borel_measurable ?M \\<and>\n                        integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n                     then ennreal\n                           ((LINT x|?M. \\<bar>?f x\\<bar> powr ?p) powr\n                            (1 / ?p))\n                     else \\<infinity>)\n  0 < p\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M;\n        integrable M (\\<lambda>xa. \\<bar>x xa\\<bar> powr p)\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> (ennreal p) M) x < \\<top>", "by (metis ennreal_neq_top linear top.not_eq_extremum)"], ["", "lemma Lp_I:\n  assumes \"p > (0::real)\"\n          \"f \\<in> borel_measurable M\" \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n  shows \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n        \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M) &&&\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) &&&\n    eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 3. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "have *: \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "by (cases \"p \\<le> 1\", insert assms, auto simp add: Lp_le_1(1) Lp(1))"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (3 subgoals):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 3. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "show **: \"f \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)", "unfolding space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. f \\<in> {f. eNorm (\\<LL> (ennreal p) M) f < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (2 subgoals):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 2. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "show \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "using *"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "unfolding Norm_def"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. enn2real (eNorm (\\<LL> (ennreal p) M) f) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "show \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "using eNorm_Norm[OF **]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n  eNorm (\\<LL> (ennreal p) M) f = ennreal (Norm (\\<LL> (ennreal p) M) f)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_D:\n  assumes \"p>0\" \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"f \\<in> borel_measurable M\"\n        \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\"\n        \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n        \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<in> borel_measurable M &&&\n     integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)) &&&\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) &&&\n    eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. f \\<in> borel_measurable M\n 2. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n 3. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 4. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "show *: \"f \\<in> borel_measurable M\"\n          \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M &&&\n    integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "using Lp_space[OF \\<open>p > 0\\<close>] assms(2)"], ["proof (prove)\nusing this:\n  space\\<^sub>N (\\<LL> (ennreal p) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M &&&\n    integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (2 subgoals):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 2. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "show \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n            \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) &&&\n    eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "using Lp_I[OF \\<open>p > 0\\<close>]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr p)\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> space\\<^sub>N (\\<LL> (ennreal p) ?M)\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr p)\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> (ennreal p) ?M) ?f =\n                    (LINT x|?M. \\<bar>?f x\\<bar> powr p) powr (1 / p)\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr p)\\<rbrakk>\n  \\<Longrightarrow> eNorm (\\<LL> (ennreal p) ?M) ?f =\n                    ennreal\n                     ((LINT x|?M. \\<bar>?f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) &&&\n    eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_Norm:\n  assumes \"p > (0::real)\"\n          \"f \\<in> borel_measurable M\"\n  shows \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\"\n        \"(Norm (\\<LL> p M) f) powr p = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) &&&\n    Norm (\\<LL> (ennreal p) M) f powr p = LINT x|M. \\<bar>f x\\<bar> powr p", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 2. Norm (\\<LL> (ennreal p) M) f powr p = LINT x|M. \\<bar>f x\\<bar> powr p", "show *: \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "proof (cases \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 2. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "case True"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n 2. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "show ?thesis"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "using Lp_I[OF assms True]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "case False"], ["proof (state)\nthis:\n  \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "have \"f \\<notin> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. f \\<notin> space\\<^sub>N (\\<LL> (ennreal p) M)", "using Lp_space[OF \\<open>p > 0\\<close>, of M]"], ["proof (prove)\nusing this:\n  \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n  space\\<^sub>N (\\<LL> (ennreal p) M) =\n  {f \\<in> borel_measurable M.\n   integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (1 subgoal):\n 1. f \\<notin> space\\<^sub>N (\\<LL> (ennreal p) M)", "by auto"], ["proof (state)\nthis:\n  f \\<notin> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  f \\<notin> space\\<^sub>N (\\<LL> (ennreal p) M)", "have *: \"Norm (\\<LL> p M) f = 0\""], ["proof (prove)\nusing this:\n  f \\<notin> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f = 0", "using eNorm_Norm'"], ["proof (prove)\nusing this:\n  f \\<notin> space\\<^sub>N (\\<LL> (ennreal p) M)\n  ?x \\<notin> space\\<^sub>N ?N \\<Longrightarrow> Norm ?N ?x = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f = 0", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f = 0\n\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "have \"(\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "using False"], ["proof (prove)\nusing this:\n  \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "by (simp add: not_integrable_integral_eq)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0", "have \"(\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p) = 0\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) = 0", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) = 0\n\ngoal (1 subgoal):\n 1. \\<not> integrable M\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<Longrightarrow>\n    Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "then"], ["proof (chain)\npicking this:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "using *"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) = 0\n  Norm (\\<LL> (ennreal p) M) f = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f =\n    (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f powr p = LINT x|M. \\<bar>f x\\<bar> powr p", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)", "show \"(Norm (\\<LL> p M) f) powr p = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M)\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p) M) f powr p = LINT x|M. \\<bar>f x\\<bar> powr p", "unfolding *"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) powr p =\n    LINT x|M. \\<bar>f x\\<bar> powr p", "using powr_powr \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 < p\n\ngoal (1 subgoal):\n 1. ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p)) powr p =\n    LINT x|M. \\<bar>f x\\<bar> powr p", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p) M) f powr p = LINT x|M. \\<bar>f x\\<bar> powr p\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_zero_space:\n  assumes \"p > (0::real)\"\n  shows \"zero_space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> (ennreal p) M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "proof (auto)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "fix f"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "assume H: \"f \\<in> zero_space\\<^sub>N (\\<LL> p M)\""], ["proof (state)\nthis:\n  f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "have *: \"f \\<in> {f \\<in> borel_measurable M. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\""], ["proof (prove)\nusing this:\n  f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. f \\<in> {f \\<in> borel_measurable M.\n             integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "using Lp_space[OF assms] zero_spaceN_subset_spaceN"], ["proof (prove)\nusing this:\n  f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)\n  space\\<^sub>N (\\<LL> (ennreal p) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n  zero_space\\<^sub>N ?N \\<subseteq> space\\<^sub>N ?N\n\ngoal (1 subgoal):\n 1. f \\<in> {f \\<in> borel_measurable M.\n             integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "by auto"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 3. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}", "show \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable M.\n           integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)}\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "have \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "by (cases \"p \\<le> 1\", insert * \\<open>p > 0\\<close>, auto simp add: Lp_le_1(1) Lp(1))"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "have \"(\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) = 0\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "using H"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n  f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "unfolding zero_space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n  f \\<in> {f. eNorm (\\<LL> (ennreal p) M) f = 0}\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "by auto"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0", "have \"AE x in M. \\<bar>f x\\<bar> powr p = 0\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> powr p = 0", "by (subst integral_nonneg_eq_0_iff_AE[symmetric], insert *, auto)"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M) \\<Longrightarrow>\n       AE xa in M. x xa = 0\n 2. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>f x\\<bar> powr p = 0", "show \"AE x in M. f x = 0\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. AE x in M. f x = 0", "by auto"], ["proof (state)\nthis:\n  AE x in M. f x = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "fix f::\"'a \\<Rightarrow> real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "assume H [measurable]: \"f \\<in> borel_measurable M\" \"AE x in M. f x = 0\""], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0", "have *: \"AE x in M. \\<bar>f x\\<bar> powr p = 0\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. f x = 0\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> powr p = 0", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "have \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "using integrable_cong_AE[OF _ _ *]"], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<in> borel_measurable M;\n   (\\<lambda>x. 0) \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p) =\n                    integrable M (\\<lambda>x. 0)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "have **: \"(\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "using integral_cong_AE[OF _ _ *]"], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<lambda>x. \\<bar>f x\\<bar> powr p) \\<in> borel_measurable M;\n   (\\<lambda>x. 0) \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> LINT x|M. \\<bar>f x\\<bar> powr p = LINT x|M. 0\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> powr p = 0", "by auto"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "have \"eNorm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p \\<partial>M) powr (1/p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f =\n    ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "by (cases \"p \\<le> 1\", insert H(1) \\<open>integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p)\\<close> \\<open>p > 0\\<close>, auto simp add: Lp_le_1(1) Lp(1))"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))", "have \"eNorm (\\<LL> p M) f = 0\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f = 0", "using **"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f =\n  ennreal ((LINT x|M. \\<bar>f x\\<bar> powr p) powr (1 / p))\n  LINT x|M. \\<bar>f x\\<bar> powr p = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p) M) f = 0", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p) M) f = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> borel_measurable M; AE xa in M. x xa = 0\\<rbrakk>\n       \\<Longrightarrow> x \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> (ennreal p) M) f = 0", "show \"f \\<in> zero_space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f = 0\n\ngoal (1 subgoal):\n 1. f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "using zero_spaceN_iff"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p) M) f = 0\n  (?x \\<in> zero_space\\<^sub>N ?N) = (eNorm ?N ?x = 0)\n\ngoal (1 subgoal):\n 1. f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)", "by auto"], ["proof (state)\nthis:\n  f \\<in> zero_space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_tendsto_AE_subseq:\n  assumes \"p>(0::real)\"\n          \"tendsto_in\\<^sub>N (\\<LL> p M) f g\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"\\<exists>r. strict_mono r \\<and> (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "have \"f n - g \\<in> space\\<^sub>N (\\<LL> p M)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. f n - g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)", "using spaceN_diff[OF \\<open>\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>g \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  f ?n1 - g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. f n - g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)", "by simp"], ["proof (state)\nthis:\n  f ?n - g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "have int: \"integrable M (\\<lambda>x. \\<bar>f n x - g x\\<bar> powr p)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f n x - g x\\<bar> powr p)", "using Lp_D(2)[OF \\<open>p > 0\\<close> \\<open>f n - g \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>(f n - g) x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f n x - g x\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f ?n x - g x\\<bar> powr p)\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "have \"(\\<lambda>n. Norm (\\<LL> p M) (f n - g)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "using \\<open>tendsto_in\\<^sub>N (\\<LL> p M) f g\\<close>"], ["proof (prove)\nusing this:\n  tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "unfolding tendsto_in\\<^sub>N_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0", "have *: \"(\\<lambda>n. (\\<integral>x. \\<bar>f n x - g x\\<bar> powr p \\<partial>M) powr (1/p)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. (LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p))\n    \\<longlonglongrightarrow> 0", "using Lp_D(3)[OF \\<open>p > 0\\<close> \\<open>\\<And>n. f n - g \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n  Norm (\\<LL> (ennreal p) M) (f ?n1 - g) =\n  (LINT x|M. \\<bar>(f ?n1 - g) x\\<bar> powr p) powr (1 / p)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. (LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. (LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "have \"(\\<lambda>n. ((\\<integral>x. \\<bar>f n x - g x\\<bar> powr p \\<partial>M) powr (1/p)) powr p) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ((LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)) powr p)\n    \\<longlonglongrightarrow> 0", "apply (rule tendsto_zero_powrI[of _ _ _ p])"], ["proof (prove)\ngoal (4 subgoals):\n 1. (\\<lambda>x. (LINT xa|M. \\<bar>f x xa - g xa\\<bar> powr p) powr (1 / p))\n    \\<longlonglongrightarrow> 0\n 2. (\\<lambda>x. p) \\<longlonglongrightarrow> p\n 3. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> (LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)\n 4. 0 < p", "using \\<open>p > 0\\<close> *"], ["proof (prove)\nusing this:\n  0 < p\n  (\\<lambda>n. (LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p))\n  \\<longlonglongrightarrow> 0\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. (LINT xa|M. \\<bar>f x xa - g xa\\<bar> powr p) powr (1 / p))\n    \\<longlonglongrightarrow> 0\n 2. (\\<lambda>x. p) \\<longlonglongrightarrow> p\n 3. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> (LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)\n 4. 0 < p", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      ((LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)) powr p)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      ((LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)) powr p)\n  \\<longlonglongrightarrow> 0", "have **: \"(\\<lambda>n. (\\<integral>x. \\<bar>f n x - g x\\<bar> powr p \\<partial>M)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      ((LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)) powr p)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n    \\<longlonglongrightarrow> 0", "using powr_powr \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      ((LINT x|M. \\<bar>f n x - g x\\<bar> powr p) powr (1 / p)) powr p)\n  \\<longlonglongrightarrow> 0\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 < p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "have \"\\<exists>r. strict_mono r \\<and> (AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p) \\<longlonglongrightarrow> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n                   \\<longlonglongrightarrow> 0)", "apply (rule tendsto_L1_AE_subseq)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n. integrable M (\\<lambda>a. \\<bar>f n a - g a\\<bar> powr p)\n 2. (\\<lambda>n. LINT x|M. norm (\\<bar>f n x - g x\\<bar> powr p))\n    \\<longlonglongrightarrow> 0", "using int **"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f ?n x - g x\\<bar> powr p)\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<And>n. integrable M (\\<lambda>a. \\<bar>f n a - g a\\<bar> powr p)\n 2. (\\<lambda>n. LINT x|M. norm (\\<bar>f n x - g x\\<bar> powr p))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  \\<exists>r.\n     strict_mono r \\<and>\n     (AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n                 \\<longlonglongrightarrow> 0)\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "then"], ["proof (chain)\npicking this:\n  \\<exists>r.\n     strict_mono r \\<and>\n     (AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n                 \\<longlonglongrightarrow> 0)", "obtain r where \"strict_mono r\" \"AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  \\<exists>r.\n     strict_mono r \\<and>\n     (AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n                 \\<longlonglongrightarrow> 0)\n\ngoal (1 subgoal):\n 1. (\\<And>r.\n        \\<lbrakk>strict_mono r;\n         AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n                    \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strict_mono r\n  AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n             \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "moreover"], ["proof (state)\nthis:\n  strict_mono r\n  AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n             \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "have \"(\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\" if \"(\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p) \\<longlonglongrightarrow> 0\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "have \"(\\<lambda>n. (\\<bar>f (r n) x - g x\\<bar> powr p) powr (1/p)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. (\\<bar>f (r n) x - g x\\<bar> powr p) powr (1 / p))\n    \\<longlonglongrightarrow> 0", "apply (rule tendsto_zero_powrI[of _ _ _ \"1/p\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. (\\<lambda>xa. \\<bar>f (r xa) x - g x\\<bar> powr p)\n    \\<longlonglongrightarrow> 0\n 2. (\\<lambda>x. 1 / p) \\<longlonglongrightarrow> 1 / p\n 3. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> \\<bar>f (r n) x - g x\\<bar> powr p\n 4. 0 < 1 / p", "using \\<open>p > 0\\<close> that"], ["proof (prove)\nusing this:\n  0 < p\n  (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> 0\n\ngoal (4 subgoals):\n 1. (\\<lambda>xa. \\<bar>f (r xa) x - g x\\<bar> powr p)\n    \\<longlonglongrightarrow> 0\n 2. (\\<lambda>x. 1 / p) \\<longlonglongrightarrow> 1 / p\n 3. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> \\<bar>f (r n) x - g x\\<bar> powr p\n 4. 0 < 1 / p", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. (\\<bar>f (r n) x - g x\\<bar> powr p) powr (1 / p))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. (\\<bar>f (r n) x - g x\\<bar> powr p) powr (1 / p))\n  \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. \\<bar>f (r n) x - g x\\<bar>) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. (\\<bar>f (r n) x - g x\\<bar> powr p) powr (1 / p))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar>) \\<longlonglongrightarrow> 0", "using powr_powr \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. (\\<bar>f (r n) x - g x\\<bar> powr p) powr (1 / p))\n  \\<longlonglongrightarrow> 0\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 < p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar>) \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar>) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "by (simp add: \\<open>(\\<lambda>n. \\<bar>f (r n) x - g x\\<bar>) \\<longlonglongrightarrow> 0\\<close> Limits.LIM_zero_cancel tendsto_rabs_zero_cancel)"], ["proof (state)\nthis:\n  (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<bar>f (r n) ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n. f (r n) ?x) \\<longlonglongrightarrow> g ?x\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "ultimately"], ["proof (chain)\npicking this:\n  strict_mono r\n  AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n             \\<longlonglongrightarrow> 0\n  (\\<lambda>n. \\<bar>f (r n) ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n. f (r n) ?x) \\<longlonglongrightarrow> g ?x", "have \"AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\""], ["proof (prove)\nusing this:\n  strict_mono r\n  AE x in M. (\\<lambda>n. \\<bar>f (r n) x - g x\\<bar> powr p)\n             \\<longlonglongrightarrow> 0\n  (\\<lambda>n. \\<bar>f (r n) ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n. f (r n) ?x) \\<longlonglongrightarrow> g ?x\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "then"], ["proof (chain)\npicking this:\n  AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "using \\<open>strict_mono r\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\n  strict_mono r\n\ngoal (1 subgoal):\n 1. \\<exists>r.\n       strict_mono r \\<and>\n       (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)", "by auto"], ["proof (state)\nthis:\n  \\<exists>r.\n     strict_mono r \\<and>\n     (AE x in M. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Specialization to $L^1$\\<close>"], ["", "lemma L1_space:\n  \"space\\<^sub>N (\\<LL> 1 M) = {f. integrable M f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> 1 M) = {f. integrable M f}", "unfolding one_ereal_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> 1 M) = {f. integrable M f}", "using Lp_space[of 1 M] integrable_abs_iff"], ["proof (prove)\nusing this:\n  0 < 1 \\<Longrightarrow>\n  space\\<^sub>N (\\<LL> (ennreal 1) M) =\n  {f \\<in> borel_measurable M.\n   integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr 1)}\n  ?f \\<in> borel_measurable ?M \\<Longrightarrow>\n  integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar>) = integrable ?M ?f\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> 1 M) = {f. integrable M f}", "by auto"], ["", "lemma L1_I:\n  assumes \"integrable M f\"\n  shows \"f \\<in> space\\<^sub>N (\\<LL> 1 M)\"\n        \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"\n        \"eNorm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M) &&&\n    Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar> &&&\n    eNorm (\\<LL> 1 M) f = ennreal (LINT x|M. \\<bar>f x\\<bar>)", "unfolding one_ereal_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M) &&&\n    Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar> &&&\n    eNorm (\\<LL> 1 M) f = ennreal (LINT x|M. \\<bar>f x\\<bar>)", "using Lp_I[of 1, OF _ borel_measurable_integrable[OF assms]] assms powr_to_1"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < 1; integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr 1)\\<rbrakk>\n  \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> (ennreal 1) M)\n  \\<lbrakk>0 < 1; integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr 1)\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> (ennreal 1) M) f =\n                    (LINT x|M. \\<bar>f x\\<bar> powr 1) powr (1 / 1)\n  \\<lbrakk>0 < 1; integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr 1)\\<rbrakk>\n  \\<Longrightarrow> eNorm (\\<LL> (ennreal 1) M) f =\n                    ennreal\n                     ((LINT x|M. \\<bar>f x\\<bar> powr 1) powr (1 / 1))\n  integrable M f\n  ?z powr 1 = ?z\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M) &&&\n    Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar> &&&\n    eNorm (\\<LL> 1 M) f = ennreal (LINT x|M. \\<bar>f x\\<bar>)", "by auto"], ["", "lemma L1_D:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> 1 M)\"\n  shows \"f \\<in> borel_measurable M\"\n        \"integrable M f\"\n        \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"\n        \"eNorm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<in> borel_measurable M &&& integrable M f) &&&\n    Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar> &&&\n    eNorm (\\<LL> 1 M) f = ennreal (LINT x|M. \\<bar>f x\\<bar>)", "using assms"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (1 subgoal):\n 1. (f \\<in> borel_measurable M &&& integrable M f) &&&\n    Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar> &&&\n    eNorm (\\<LL> 1 M) f = ennreal (LINT x|M. \\<bar>f x\\<bar>)", "by (auto simp add: L1_space L1_I)"], ["", "lemma L1_int_ineq:\n  \"abs(\\<integral>x. f x \\<partial>M) \\<le> Norm (\\<LL> 1 M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "proof (cases \"integrable M f\")"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f\n 2. \\<not> integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "case True"], ["proof (state)\nthis:\n  integrable M f\n\ngoal (2 subgoals):\n 1. integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f\n 2. \\<not> integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "then"], ["proof (chain)\npicking this:\n  integrable M f", "show ?thesis"], ["proof (prove)\nusing this:\n  integrable M f\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "using L1_I(2)[OF True]"], ["proof (prove)\nusing this:\n  integrable M f\n  Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "by auto"], ["proof (state)\nthis:\n  \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "case False"], ["proof (state)\nthis:\n  \\<not> integrable M f\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "then"], ["proof (chain)\npicking this:\n  \\<not> integrable M f", "have \"(\\<integral>x. f x \\<partial>M) = 0\""], ["proof (prove)\nusing this:\n  \\<not> integrable M f\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L M f = 0", "by (simp add: not_integrable_integral_eq)"], ["proof (state)\nthis:\n  integral\\<^sup>L M f = 0\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "then"], ["proof (chain)\npicking this:\n  integral\\<^sup>L M f = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  integral\\<^sup>L M f = 0\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "using Norm_nonneg"], ["proof (prove)\nusing this:\n  integral\\<^sup>L M f = 0\n  0 \\<le> Norm ?N ?x\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f", "by auto"], ["proof (state)\nthis:\n  \\<bar>integral\\<^sup>L M f\\<bar> \\<le> Norm (\\<LL> 1 M) f\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In $L^1$, one can give a direct formula for the eNorm of a measurable function, using a\nnonnegative integral. The same formula holds in $L^p$ for $p > 0$, with additional powers $p$ and\n$1/p$, but one can not write it down since \\verb+powr+ is not defined on \\verb+ennreal+.\\<close>"], ["", "lemma L1_Norm:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\"\n        \"eNorm (\\<LL> 1 M) f = (\\<integral>\\<^sup>+x. \\<bar>f x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar> &&&\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>\n 2. eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "show *: \"Norm (\\<LL> 1 M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>", "using Lp_Norm[of 1, OF _ assms]"], ["proof (prove)\nusing this:\n  0 < 1 \\<Longrightarrow>\n  Norm (\\<LL> (ennreal 1) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr 1) powr (1 / 1)\n  0 < 1 \\<Longrightarrow>\n  Norm (\\<LL> (ennreal 1) M) f powr 1 = LINT x|M. \\<bar>f x\\<bar> powr 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>", "unfolding one_ereal_def"], ["proof (prove)\nusing this:\n  0 < 1 \\<Longrightarrow>\n  Norm (\\<LL> (ennreal 1) M) f =\n  (LINT x|M. \\<bar>f x\\<bar> powr 1) powr (1 / 1)\n  0 < 1 \\<Longrightarrow>\n  Norm (\\<LL> (ennreal 1) M) f powr 1 = LINT x|M. \\<bar>f x\\<bar> powr 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "show \"eNorm (\\<LL> 1 M) f = (\\<integral>\\<^sup>+x. \\<bar>f x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "proof (cases \"integrable M f\")"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n 2. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "case True"], ["proof (state)\nthis:\n  integrable M f\n\ngoal (2 subgoals):\n 1. integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n 2. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "then"], ["proof (chain)\npicking this:\n  integrable M f", "have \"f \\<in> space\\<^sub>N (\\<LL> 1 M)\""], ["proof (prove)\nusing this:\n  integrable M f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M)", "using L1_space"], ["proof (prove)\nusing this:\n  integrable M f\n  space\\<^sub>N (\\<LL> 1 ?M) = {f. integrable ?M f}\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M)", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (2 subgoals):\n 1. integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n 2. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "then"], ["proof (chain)\npicking this:\n  f \\<in> space\\<^sub>N (\\<LL> 1 M)", "have \"eNorm (\\<LL> 1 M) f = ennreal (Norm (\\<LL> 1 M) f)\""], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f = ennreal (Norm (\\<LL> 1 M) f)", "using eNorm_Norm"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> 1 M)\n  ?x \\<in> space\\<^sub>N ?N \\<Longrightarrow>\n  eNorm ?N ?x = ennreal (Norm ?N ?x)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f = ennreal (Norm (\\<LL> 1 M) f)", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> 1 M) f = ennreal (Norm (\\<LL> 1 M) f)\n\ngoal (2 subgoals):\n 1. integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n 2. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> 1 M) f = ennreal (Norm (\\<LL> 1 M) f)", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> 1 M) f = ennreal (Norm (\\<LL> 1 M) f)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "by (metis (mono_tags) * AE_I2 True abs_ge_zero integrable_abs nn_integral_eq_integral)"], ["proof (state)\nthis:\n  eNorm (\\<LL> 1 M) f =\n  \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "case False"], ["proof (state)\nthis:\n  \\<not> integrable M f\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "then"], ["proof (chain)\npicking this:\n  \\<not> integrable M f", "have \"eNorm (\\<LL> 1 M) f = \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<not> integrable M f\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f = \\<infinity>", "using L1_space space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  \\<not> integrable M f\n  space\\<^sub>N (\\<LL> 1 ?M) = {f. integrable ?M f}\n  space\\<^sub>N ?N = {f. eNorm ?N f < \\<infinity>}\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f = \\<infinity>", "by (metis ennreal_add_eq_top infinity_ennreal_def le_iff_add le_less_linear mem_Collect_eq)"], ["proof (state)\nthis:\n  eNorm (\\<LL> 1 M) f = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "moreover"], ["proof (state)\nthis:\n  eNorm (\\<LL> 1 M) f = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "have \"(\\<integral>\\<^sup>+x. \\<bar>f x\\<bar> \\<partial>M) = \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M = \\<infinity>", "apply (rule nn_integral_nonneg_infinite)"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> borel_measurable M\n 2. \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar>)\n 3. AE x in M. 0 \\<le> \\<bar>f x\\<bar>", "using False"], ["proof (prove)\nusing this:\n  \\<not> integrable M f\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> borel_measurable M\n 2. \\<not> integrable M (\\<lambda>x. \\<bar>f x\\<bar>)\n 3. AE x in M. 0 \\<le> \\<bar>f x\\<bar>", "by (auto simp add: integrable_abs_iff)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> integrable M f \\<Longrightarrow>\n    eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> 1 M) f = \\<infinity>\n  \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> 1 M) f = \\<infinity>\n  \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M = \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) f =\n    \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> 1 M) f =\n  \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eNorm (\\<LL> 1 M) f =\n  \\<integral>\\<^sup>+ x. ennreal \\<bar>f x\\<bar> \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L1_indicator:\n  assumes [measurable]: \"A \\<in> sets M\"\n  shows \"eNorm (\\<LL> 1 M) (indicator A) = emeasure M A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 1 M) (indicat_real A) = emeasure M A", "by (subst L1_Norm, auto, metis assms ennreal_indicator nn_integral_cong nn_integral_indicator)"], ["", "lemma L1_indicator':\n  assumes [measurable]: \"A \\<in> sets M\"\n      and \"emeasure M A \\<noteq> \\<infinity>\"\n  shows \"indicator A \\<in> space\\<^sub>N (\\<LL> 1 M)\"\n        \"Norm (\\<LL> 1 M) (indicator A) = measure M A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indicat_real A \\<in> space\\<^sub>N (\\<LL> 1 M) &&&\n    Norm (\\<LL> 1 M) (indicat_real A) = Sigma_Algebra.measure M A", "unfolding space\\<^sub>N_def Norm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. indicat_real A \\<in> {f. eNorm (\\<LL> 1 M) f < \\<infinity>} &&&\n    enn2real (eNorm (\\<LL> 1 M) (indicat_real A)) =\n    Sigma_Algebra.measure M A", "using L1_indicator[OF \\<open>A \\<in> sets M\\<close>] \\<open>emeasure M A \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> 1 M) (indicat_real A) = emeasure M A\n  emeasure M A \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. indicat_real A \\<in> {f. eNorm (\\<LL> 1 M) f < \\<infinity>} &&&\n    enn2real (eNorm (\\<LL> 1 M) (indicat_real A)) =\n    Sigma_Algebra.measure M A", "by (auto simp add: top.not_eq_extremum Sigma_Algebra.measure_def)"], ["", "subsection \\<open>$L^0$\\<close>"], ["", "text \\<open>We have defined $L^p$ for all exponents $p$, although it does not really make sense for $p = 0$.\nWe have chosen a definition in this case (the space of all measurable functions) so that many\nstatements are true for all exponents. In this paragraph, we show the consistency of this definition.\\<close>"], ["", "lemma L_zero:\n  \"eNorm (\\<LL> 0 M) f = (if f \\<in> borel_measurable M then 0 else \\<infinity>)\"\n  \"defect (\\<LL> 0 M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 0 M) f =\n    (if f \\<in> borel_measurable M then 0 else \\<infinity>) &&&\n    defect (\\<LL> 0 M) = 1", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> 0 M) f =\n    (if f \\<in> borel_measurable M then 0 else \\<infinity>)\n 2. defect (\\<LL> 0 M) = 1", "have *: \"quasinorm_on UNIV 1 (\\<lambda>(f::'a\\<Rightarrow>real). (if f \\<in> borel_measurable M then 0 else \\<infinity>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasinorm_on UNIV 1\n     (\\<lambda>f. if f \\<in> borel_measurable M then 0 else \\<infinity>)", "by (rule extend_quasinorm, rule quasinorm_onI, auto)"], ["proof (state)\nthis:\n  quasinorm_on UNIV 1\n   (\\<lambda>f. if f \\<in> borel_measurable M then 0 else \\<infinity>)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> 0 M) f =\n    (if f \\<in> borel_measurable M then 0 else \\<infinity>)\n 2. defect (\\<LL> 0 M) = 1", "show \"eNorm (\\<LL> 0 M) f = (if f \\<in> borel_measurable M then 0 else \\<infinity>)\"\n       \"defect (\\<LL> 0 M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 0 M) f =\n    (if f \\<in> borel_measurable M then 0 else \\<infinity>) &&&\n    defect (\\<LL> 0 M) = 1", "using quasinorm_of[OF *]"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (1, \\<lambda>f. if f \\<in> borel_measurable M then 0 else \\<infinity>))\n   ?x =\n  (if ?x \\<in> borel_measurable M then 0 else \\<infinity>)\n  defect\n   (quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M then 0 else \\<infinity>)) =\n  1\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> 0 M) f =\n    (if f \\<in> borel_measurable M then 0 else \\<infinity>) &&&\n    defect (\\<LL> 0 M) = 1", "unfolding Lp_space_def"], ["proof (prove)\nusing this:\n  eNorm\n   (quasinorm_of\n     (1, \\<lambda>f. if f \\<in> borel_measurable M then 0 else \\<infinity>))\n   ?x =\n  (if ?x \\<in> borel_measurable M then 0 else \\<infinity>)\n  defect\n   (quasinorm_of\n     (1, \\<lambda>f.\n            if f \\<in> borel_measurable M then 0 else \\<infinity>)) =\n  1\n\ngoal (1 subgoal):\n 1. eNorm\n     (if 0 = 0\n      then quasinorm_of\n            (1, \\<lambda>f.\n                   if f \\<in> borel_measurable M then 0 else \\<infinity>)\n      else if 0 < \\<infinity>\n           then quasinorm_of\n                 (if 0 < 1 then 2 powr (1 / enn2real 0 - 1) else 1,\n                  \\<lambda>f.\n                     if f \\<in> borel_measurable M \\<and>\n                        integrable M\n                         (\\<lambda>x. \\<bar>f x\\<bar> powr enn2real 0)\n                     then ennreal\n                           ((LINT x|M. \\<bar>f x\\<bar> powr enn2real 0) powr\n                            (1 / enn2real 0))\n                     else \\<infinity>)\n           else quasinorm_of\n                 (1, \\<lambda>f.\n                        if f \\<in> borel_measurable M\n                        then e2ennreal\n                              (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                        else \\<infinity>))\n     f =\n    (if f \\<in> borel_measurable M then 0 else \\<infinity>) &&&\n    defect\n     (if 0 = 0\n      then quasinorm_of\n            (1, \\<lambda>f.\n                   if f \\<in> borel_measurable M then 0 else \\<infinity>)\n      else if 0 < \\<infinity>\n           then quasinorm_of\n                 (if 0 < 1 then 2 powr (1 / enn2real 0 - 1) else 1,\n                  \\<lambda>f.\n                     if f \\<in> borel_measurable M \\<and>\n                        integrable M\n                         (\\<lambda>x. \\<bar>f x\\<bar> powr enn2real 0)\n                     then ennreal\n                           ((LINT x|M. \\<bar>f x\\<bar> powr enn2real 0) powr\n                            (1 / enn2real 0))\n                     else \\<infinity>)\n           else quasinorm_of\n                 (1, \\<lambda>f.\n                        if f \\<in> borel_measurable M\n                        then e2ennreal\n                              (esssup M (\\<lambda>x. ereal \\<bar>f x\\<bar>))\n                        else \\<infinity>)) =\n    1", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> 0 M) f =\n  (if f \\<in> borel_measurable M then 0 else \\<infinity>)\n  defect (\\<LL> 0 M) = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma L_zero_space [simp]:\n  \"space\\<^sub>N (\\<LL> 0 M) = borel_measurable M\"\n  \"zero_space\\<^sub>N (\\<LL> 0 M) = borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> 0 M) = borel_measurable M &&&\n    zero_space\\<^sub>N (\\<LL> 0 M) = borel_measurable M", "apply (auto simp add: spaceN_iff zero_spaceN_iff L_zero(1))"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       (if x \\<in> borel_measurable M then 0 else \\<infinity>)\n       < \\<top> \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       (if x \\<in> borel_measurable M then 0 else \\<infinity>) =\n       0 \\<Longrightarrow>\n       x \\<in> borel_measurable M", "using top.not_eq_extremum"], ["proof (prove)\nusing this:\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (if x \\<in> borel_measurable M then 0 else \\<infinity>)\n       < \\<top> \\<Longrightarrow>\n       x \\<in> borel_measurable M\n 2. \\<And>x.\n       (if x \\<in> borel_measurable M then 0 else \\<infinity>) =\n       0 \\<Longrightarrow>\n       x \\<in> borel_measurable M", "by force+"], ["", "subsection \\<open>Basic results on $L^p$ for general $p$\\<close>"], ["", "lemma Lp_measurable_subset:\n  \"space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> space\\<^sub>N (\\<LL> p M)\n                         \\<subseteq> borel_measurable M\n 2. p = 0 \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\n 3. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> space\\<^sub>N (\\<LL> p M)\n                         \\<subseteq> borel_measurable M\n 2. p = 0 \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\n 3. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "then"], ["proof (chain)\npicking this:\n  p = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "using L_zero_space"], ["proof (prove)\nusing this:\n  p = 0\n  space\\<^sub>N (\\<LL> 0 ?M) = borel_measurable ?M\n  zero_space\\<^sub>N (\\<LL> 0 ?M) = borel_measurable ?M\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> space\\<^sub>N (\\<LL> p M)\n                         \\<subseteq> borel_measurable M\n 2. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> space\\<^sub>N (\\<LL> p M)\n                         \\<subseteq> borel_measurable M\n 2. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> space\\<^sub>N (\\<LL> p M)\n                         \\<subseteq> borel_measurable M\n 2. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "then"], ["proof (chain)\npicking this:\n  p = ennreal p2\n  0 < p2\n  0 < p", "show ?thesis"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "using Lp_space[OF \\<open>p2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n  space\\<^sub>N (\\<LL> (ennreal p2) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "then"], ["proof (chain)\npicking this:\n  p = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "using L_infinity_space"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n  space\\<^sub>N (\\<LL> \\<infinity> ?M) =\n  {f \\<in> borel_measurable ?M.\n   \\<exists>C. AE x in ?M. \\<bar>f x\\<bar> \\<le> C}\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  space\\<^sub>N (\\<LL> p M) \\<subseteq> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_measurable:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using assms Lp_measurable_subset"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  space\\<^sub>N (\\<LL> ?p ?M) \\<subseteq> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by auto"], ["", "lemma Lp_infinity_zero_space:\n  assumes \"p > (0::ennreal)\"\n  shows \"zero_space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> zero_space\\<^sub>N (\\<LL> p M) =\n                         {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 2. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 3. p = \\<infinity> \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> zero_space\\<^sub>N (\\<LL> p M) =\n                         {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 2. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 3. p = \\<infinity> \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "then"], ["proof (chain)\npicking this:\n  p = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "using L_infinity_zero_space"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n  zero_space\\<^sub>N (\\<LL> \\<infinity> ?M) =\n  {f \\<in> borel_measurable ?M. AE x in ?M. f x = 0}\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "by auto"], ["proof (state)\nthis:\n  zero_space\\<^sub>N (\\<LL> p M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> zero_space\\<^sub>N (\\<LL> p M) =\n                         {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 2. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> zero_space\\<^sub>N (\\<LL> p M) =\n                         {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 2. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> zero_space\\<^sub>N (\\<LL> p M) =\n                         {f \\<in> borel_measurable M. AE x in M. f x = 0}\n 2. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "then"], ["proof (chain)\npicking this:\n  p = ennreal p2\n  0 < p2\n  0 < p", "show ?thesis"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "using Lp_zero_space[OF \\<open>p2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n  zero_space\\<^sub>N (\\<LL> (ennreal p2) ?M) =\n  {f \\<in> borel_measurable ?M. AE x in ?M. f x = 0}\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  ennreal p2 = ennreal p2\n  0 < p2\n  0 < ennreal p2\n  zero_space\\<^sub>N (\\<LL> (ennreal p2) ?M) =\n  {f \\<in> borel_measurable ?M. AE x in ?M. f x = 0}\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> (ennreal p2) M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "by auto"], ["proof (state)\nthis:\n  zero_space\\<^sub>N (\\<LL> p M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (1 subgoal):\n 1. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (1 subgoal):\n 1. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "then"], ["proof (chain)\npicking this:\n  p = 0", "have False"], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. False", "using assms"], ["proof (prove)\nusing this:\n  p = 0\n  0 < p\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. p = 0 \\<Longrightarrow>\n    zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "then"], ["proof (chain)\npicking this:\n  False", "show ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "by simp"], ["proof (state)\nthis:\n  zero_space\\<^sub>N (\\<LL> p M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in prob_space) Lp_subset_Lq:\n  assumes \"p \\<le> q\"\n  shows \"\\<And>f. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\"\n        \"\\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\"\n        \"space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\"\n        \"\\<And>f. f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow> Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>f. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f) &&&\n     \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M) &&&\n    space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M) &&&\n    (\\<And>f.\n        f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow>\n        Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f)", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\n 3. space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\n 4. \\<And>f.\n       f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow>\n       Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f", "show \"eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "proof (cases \"eNorm (\\<LL> q M) f < \\<infinity>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "case True"], ["proof (state)\nthis:\n  eNorm (\\<LL> q M) f < \\<infinity>\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> q M) f < \\<infinity>", "have \"f \\<in> space\\<^sub>N (\\<LL> q M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> q M) f < \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> q M)", "using spaceN_iff"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> q M) f < \\<infinity>\n  (?x \\<in> space\\<^sub>N ?N) = (eNorm ?N ?x < \\<infinity>)\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> q M)", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> space\\<^sub>N (\\<LL> q M)", "have f_meas [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. random_variable borel f", "using Lp_measurable"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. random_variable borel f", "by auto"], ["proof (state)\nthis:\n  random_variable borel f\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "consider \"p = 0\" | \"p = q\" | \"p > 0 \\<and> p < \\<infinity> \\<and> q = \\<infinity>\" | \"p > 0 \\<and> p < q \\<and> q < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = 0 \\<Longrightarrow> thesis; p = q \\<Longrightarrow> thesis;\n     0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n     thesis;\n     0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using \\<open>p \\<le> q\\<close>"], ["proof (prove)\nusing this:\n  p \\<le> q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = 0 \\<Longrightarrow> thesis; p = q \\<Longrightarrow> thesis;\n     0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n     thesis;\n     0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "apply (simp add: top.not_eq_extremum)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = 0 \\<Longrightarrow> thesis; p = q \\<Longrightarrow> thesis;\n     0 < p \\<and> p < \\<top> \\<and> q = \\<top> \\<Longrightarrow> thesis;\n     0 < p \\<and> p < q \\<and> q < \\<top> \\<Longrightarrow> thesis;\n     p \\<le> q\\<rbrakk>\n    \\<Longrightarrow> thesis", "using not_less_iff_gr_or_eq order.order_iff_strict"], ["proof (prove)\nusing this:\n  (\\<not> ?x < ?y) = (?y < ?x \\<or> ?x = ?y)\n  (?a \\<le> ?b) = (?a < ?b \\<or> ?a = ?b)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = 0 \\<Longrightarrow> thesis; p = q \\<Longrightarrow> thesis;\n     0 < p \\<and> p < \\<top> \\<and> q = \\<top> \\<Longrightarrow> thesis;\n     0 < p \\<and> p < q \\<and> q < \\<top> \\<Longrightarrow> thesis;\n     p \\<le> q\\<rbrakk>\n    \\<Longrightarrow> thesis", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>p = 0 \\<Longrightarrow> ?thesis12;\n   p = q \\<Longrightarrow> ?thesis12;\n   0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n   ?thesis12;\n   0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n   ?thesis12\\<rbrakk>\n  \\<Longrightarrow> ?thesis12\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>p = 0 \\<Longrightarrow> ?thesis12;\n   p = q \\<Longrightarrow> ?thesis12;\n   0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n   ?thesis12;\n   0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n   ?thesis12\\<rbrakk>\n  \\<Longrightarrow> ?thesis12", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>p = 0 \\<Longrightarrow> ?thesis12;\n   p = q \\<Longrightarrow> ?thesis12;\n   0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n   ?thesis12;\n   0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n   ?thesis12\\<rbrakk>\n  \\<Longrightarrow> ?thesis12\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "proof (cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. p = 0 \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. p = q \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 3. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 4. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "case 1"], ["proof (state)\nthis:\n  p = 0\n\ngoal (4 subgoals):\n 1. p = 0 \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. p = q \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 3. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 4. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  p = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "by (simp add: L_zero(1))"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n\ngoal (3 subgoals):\n 1. p = q \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 3. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. p = q \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 3. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "case 2"], ["proof (state)\nthis:\n  p = q\n\ngoal (3 subgoals):\n 1. p = q \\<Longrightarrow> eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 3. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  p = q", "show ?thesis"], ["proof (prove)\nusing this:\n  p = q\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "case 3"], ["proof (state)\nthis:\n  0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity>\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity>", "have \"q = \\<infinity>\""], ["proof (prove)\nusing this:\n  0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity>\n\ngoal (1 subgoal):\n 1. q = \\<infinity>", "by simp"], ["proof (state)\nthis:\n  q = \\<infinity>\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "obtain p2 where \"p = ennreal p2\" \"p2 > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p2.\n        \\<lbrakk>p = ennreal p2; 0 < p2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 3 enn2real_positive_iff[of p]"], ["proof (prove)\nusing this:\n  0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity>\n  (0 < enn2real p) = (0 < p \\<and> p < \\<top>)\n\ngoal (1 subgoal):\n 1. (\\<And>p2.\n        \\<lbrakk>p = ennreal p2; 0 < p2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases p) auto"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have *: \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "using L_infinity_AE_bound \\<open>f \\<in> space\\<^sub>N (\\<LL> q M)\\<close> \\<open>q = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n  q = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have **: \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "apply (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. (Norm (\\<LL> \\<infinity> M) f) powr p2\"], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> powr p2 \\<le> Norm (\\<LL> \\<top> M) f powr p2", "using * powr_mono2 \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n  0 < p2\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> powr p2 \\<le> Norm (\\<LL> \\<top> M) f powr p2", "by force"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "have \"eNorm (\\<LL> p2 M) f = (\\<integral>x. \\<bar>f x\\<bar> powr p2 \\<partial>M) powr (1/p2)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p2) M) f =\n    ennreal\n     (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))", "using Lp_I(3)[OF \\<open>p2 > 0\\<close> f_meas]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2) \\<Longrightarrow>\n  eNorm (\\<LL> (ennreal p2) M) f =\n  ennreal (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p2) M) f =\n    ennreal\n     (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p2) M) f =\n  ennreal (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "also"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p2) M) f =\n  ennreal (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"... \\<le> (\\<integral>x. (Norm (\\<LL> \\<infinity> M) f) powr p2 \\<partial>M) powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal\n     (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n    \\<le> ennreal\n           (expectation\n             (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2) powr\n            (1 / p2))", "apply (rule ennreal_leI, rule powr_mono2, simp add: \\<open>p2 > 0\\<close> less_imp_le, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n    \\<le> expectation (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2)", "apply (rule integral_mono_AE, auto simp add: **)"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> powr p2 \\<le> Norm (\\<LL> \\<top> M) f powr p2", "using * powr_mono2 \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n  0 < p2\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> powr p2 \\<le> Norm (\\<LL> \\<top> M) f powr p2", "by force"], ["proof (state)\nthis:\n  ennreal (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n  \\<le> ennreal\n         (expectation\n           (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2) powr\n          (1 / p2))\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "also"], ["proof (state)\nthis:\n  ennreal (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n  \\<le> ennreal\n         (expectation\n           (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2) powr\n          (1 / p2))\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"... = Norm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal\n     (expectation (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2) powr\n      (1 / p2)) =\n    ennreal (Norm (\\<LL> \\<infinity> M) f)", "using \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < p2\n\ngoal (1 subgoal):\n 1. ennreal\n     (expectation (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2) powr\n      (1 / p2)) =\n    ennreal (Norm (\\<LL> \\<infinity> M) f)", "by (auto simp add: prob_space powr_powr)"], ["proof (state)\nthis:\n  ennreal\n   (expectation (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f powr p2) powr\n    (1 / p2)) =\n  ennreal (Norm (\\<LL> \\<infinity> M) f)\n\ngoal (2 subgoals):\n 1. 0 < p \\<and> p < \\<infinity> \\<and> q = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n 2. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "finally"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> (ennreal p2) M) f\n  \\<le> ennreal (Norm (\\<LL> \\<infinity> M) f)", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p2) M) f\n  \\<le> ennreal (Norm (\\<LL> \\<infinity> M) f)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "using \\<open>p = ennreal p2\\<close> \\<open>q = \\<infinity>\\<close> eNorm_Norm[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> q M)\\<close>]"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p2) M) f\n  \\<le> ennreal (Norm (\\<LL> \\<infinity> M) f)\n  p = ennreal p2\n  q = \\<infinity>\n  eNorm (\\<LL> q M) f = ennreal (Norm (\\<LL> q M) f)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "case 4"], ["proof (state)\nthis:\n  0 < p \\<and> p < q \\<and> q < \\<infinity>\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  0 < p \\<and> p < q \\<and> q < \\<infinity>", "have \"0 < p\" \"p < \\<infinity>\""], ["proof (prove)\nusing this:\n  0 < p \\<and> p < q \\<and> q < \\<infinity>\n\ngoal (1 subgoal):\n 1. 0 < p &&& p < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  0 < p\n  p < \\<infinity>\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  0 < p\n  p < \\<infinity>", "obtain p2 where \"p = ennreal p2\" \"p2 > 0\""], ["proof (prove)\nusing this:\n  0 < p\n  p < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>p2.\n        \\<lbrakk>p = ennreal p2; 0 < p2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using enn2real_positive_iff[of p]"], ["proof (prove)\nusing this:\n  0 < p\n  p < \\<infinity>\n  (0 < enn2real p) = (0 < p \\<and> p < \\<top>)\n\ngoal (1 subgoal):\n 1. (\\<And>p2.\n        \\<lbrakk>p = ennreal p2; 0 < p2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases p) auto"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"0 < q\" \"q < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < q &&& q < \\<infinity>", "using 4"], ["proof (prove)\nusing this:\n  0 < p \\<and> p < q \\<and> q < \\<infinity>\n\ngoal (1 subgoal):\n 1. 0 < q &&& q < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  0 < q\n  q < \\<infinity>\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  0 < q\n  q < \\<infinity>", "obtain q2 where \"q = ennreal q2\" \"q2 > 0\""], ["proof (prove)\nusing this:\n  0 < q\n  q < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>q2.\n        \\<lbrakk>q = ennreal q2; 0 < q2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using enn2real_positive_iff[of q]"], ["proof (prove)\nusing this:\n  0 < q\n  q < \\<infinity>\n  (0 < enn2real q) = (0 < q \\<and> q < \\<top>)\n\ngoal (1 subgoal):\n 1. (\\<And>q2.\n        \\<lbrakk>q = ennreal q2; 0 < q2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases q) auto"], ["proof (state)\nthis:\n  q = ennreal q2\n  0 < q2\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"p2 < q2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p2 < q2", "using 4 \\<open>p = ennreal p2\\<close> \\<open>q = ennreal q2\\<close>"], ["proof (prove)\nusing this:\n  0 < p \\<and> p < q \\<and> q < \\<infinity>\n  p = ennreal p2\n  q = ennreal q2\n\ngoal (1 subgoal):\n 1. p2 < q2", "using ennreal_less_iff"], ["proof (prove)\nusing this:\n  0 < p \\<and> p < q \\<and> q < \\<infinity>\n  p = ennreal p2\n  q = ennreal q2\n  0 \\<le> ?r \\<Longrightarrow> (ennreal ?r < ennreal ?q) = (?r < ?q)\n\ngoal (1 subgoal):\n 1. p2 < q2", "by auto"], ["proof (state)\nthis:\n  p2 < q2\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "define r2 where \"r2 = q2 / p2\""], ["proof (state)\nthis:\n  r2 = q2 / p2\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"r2 \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> r2", "unfolding r2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> q2 / p2", "using \\<open>p2 < q2\\<close> \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  p2 < q2\n  0 < p2\n\ngoal (1 subgoal):\n 1. 1 \\<le> q2 / p2", "by auto"], ["proof (state)\nthis:\n  1 \\<le> r2\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have *: \"abs (\\<bar>z\\<bar> powr p2) powr r2 = \\<bar>z\\<bar> powr q2\" for z::real"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<bar>z\\<bar> powr p2\\<bar> powr r2 = \\<bar>z\\<bar> powr q2", "unfolding r2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<bar>z\\<bar> powr p2\\<bar> powr (q2 / p2) = \\<bar>z\\<bar> powr q2", "using \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < p2\n\ngoal (1 subgoal):\n 1. \\<bar>\\<bar>z\\<bar> powr p2\\<bar> powr (q2 / p2) = \\<bar>z\\<bar> powr q2", "by (simp add: powr_powr)"], ["proof (state)\nthis:\n  \\<bar>\\<bar>?z12\\<bar> powr p2\\<bar> powr r2 = \\<bar>?z12\\<bar> powr q2\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have I: \"integrable M (\\<lambda>x. abs(\\<bar>f x\\<bar> powr p2) powr r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2)", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr q2)", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> q M)\\<close> \\<open>q = ennreal q2\\<close> Lp_D(2)[OF \\<open>q2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n  q = ennreal q2\n  ?f \\<in> space\\<^sub>N (\\<LL> (ennreal q2) ?M) \\<Longrightarrow>\n  integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr q2)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr q2)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have J: \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "by (rule bound_L1_Lp(1)[OF \\<open>r2 \\<ge> 1\\<close> _ I], auto)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"f \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by (rule Lp_I(1)[OF \\<open>p2 > 0\\<close> _ J], simp)"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"(\\<integral>x. \\<bar>f x\\<bar> powr p2 \\<partial>M) powr (1/p2) = abs(\\<integral>x. \\<bar>f x\\<bar> powr p2 \\<partial>M) powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n    \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar> powr\n    (1 / p2)", "by auto"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n  \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar> powr\n  (1 / p2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "also"], ["proof (state)\nthis:\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n  \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar> powr\n  (1 / p2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"... \\<le> ((\\<integral>x. abs (\\<bar>f x\\<bar> powr p2) powr r2 \\<partial>M) powr (1/r2)) powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar> powr\n    (1 / p2)\n    \\<le> (expectation\n            (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2) powr\n           (1 / r2)) powr\n          (1 / p2)", "apply (subst powr_mono2, simp add: \\<open>p2 > 0\\<close> less_imp_le, simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar>\n    \\<le> expectation\n           (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2) powr\n          (1 / r2)\n 2. True", "apply (rule bound_L1_Lp, simp add: \\<open>r2 \\<ge> 1\\<close>, simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2)\n 2. True", "unfolding *"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr q2)\n 2. True", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> q M)\\<close> \\<open>q = ennreal q2\\<close> Lp_D(2)[OF \\<open>q2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n  q = ennreal q2\n  ?f \\<in> space\\<^sub>N (\\<LL> (ennreal q2) ?M) \\<Longrightarrow>\n  integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr q2)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr q2)\n 2. True", "by auto"], ["proof (state)\nthis:\n  \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar> powr\n  (1 / p2)\n  \\<le> (expectation\n          (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2) powr\n         (1 / r2)) powr\n        (1 / p2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "also"], ["proof (state)\nthis:\n  \\<bar>expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<bar> powr\n  (1 / p2)\n  \\<le> (expectation\n          (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2) powr\n         (1 / r2)) powr\n        (1 / p2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> powr q2 \\<partial>M) powr (1/q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (expectation\n      (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2) powr\n     (1 / r2)) powr\n    (1 / p2) =\n    expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / r2)) powr\n    (1 / p2) =\n    expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)", "using \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < p2\n\ngoal (1 subgoal):\n 1. (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / r2)) powr\n    (1 / p2) =\n    expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)", "by (simp add: powr_powr r2_def)"], ["proof (state)\nthis:\n  (expectation\n    (\\<lambda>x. \\<bar>\\<bar>f x\\<bar> powr p2\\<bar> powr r2) powr\n   (1 / r2)) powr\n  (1 / p2) =\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)\n\ngoal (1 subgoal):\n 1. 0 < p \\<and> p < q \\<and> q < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "finally"], ["proof (chain)\npicking this:\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)", "show ?thesis"], ["proof (prove)\nusing this:\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> q M)\\<close> Lp_D(4)[OF \\<open>q2 > 0\\<close>] ennreal_leI"], ["proof (prove)\nusing this:\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n  ?f \\<in> space\\<^sub>N (\\<LL> (ennreal q2) ?M) \\<Longrightarrow>\n  eNorm (\\<LL> (ennreal q2) ?M) ?f =\n  ennreal ((LINT x|?M. \\<bar>?f x\\<bar> powr q2) powr (1 / q2))\n  ?x \\<le> ?y \\<Longrightarrow> ennreal ?x \\<le> ennreal ?y\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "unfolding \\<open>p = ennreal p2\\<close> \\<open>q = ennreal q2\\<close> Lp_D(4)[OF \\<open>p2 > 0\\<close> \\<open>f \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>]"], ["proof (prove)\nusing this:\n  expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2)\n  \\<le> expectation (\\<lambda>x. \\<bar>f x\\<bar> powr q2) powr (1 / q2)\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n  ?f \\<in> space\\<^sub>N (\\<LL> (ennreal q2) ?M) \\<Longrightarrow>\n  eNorm (\\<LL> (ennreal q2) ?M) ?f =\n  ennreal ((LINT x|?M. \\<bar>?f x\\<bar> powr q2) powr (1 / q2))\n  ?x \\<le> ?y \\<Longrightarrow> ennreal ?x \\<le> ennreal ?y\n\ngoal (1 subgoal):\n 1. ennreal\n     (expectation (\\<lambda>x. \\<bar>f x\\<bar> powr p2) powr (1 / p2))\n    \\<le> eNorm (\\<LL> (ennreal q2) M) f", "by force"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "case False"], ["proof (state)\nthis:\n  \\<not> eNorm (\\<LL> q M) f < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  \\<not> eNorm (\\<LL> q M) f < \\<infinity>", "have \"eNorm (\\<LL> q M) f = \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<not> eNorm (\\<LL> q M) f < \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> q M) f = \\<infinity>", "using top.not_eq_extremum"], ["proof (prove)\nusing this:\n  \\<not> eNorm (\\<LL> q M) f < \\<infinity>\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> q M) f = \\<infinity>", "by fastforce"], ["proof (state)\nthis:\n  eNorm (\\<LL> q M) f = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> q M) f < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> q M) f = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> q M) f = \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) ?f12 \\<le> eNorm (\\<LL> q M) ?f12\n\ngoal (3 subgoals):\n 1. \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\n 2. space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\n 3. \\<And>f.\n       f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow>\n       Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) ?f12 \\<le> eNorm (\\<LL> q M) ?f12", "show \"\\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) ?f12 \\<le> eNorm (\\<LL> q M) ?f12\n\ngoal (1 subgoal):\n 1. \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M", "using quasinorm_subsetI[of _ _ 1]"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) ?f12 \\<le> eNorm (\\<LL> q M) ?f12\n  (\\<And>f.\n      f \\<in> space\\<^sub>N ?N1.0 \\<Longrightarrow>\n      eNorm ?N2.0 f \\<le> ennreal 1 * eNorm ?N1.0 f) \\<Longrightarrow>\n  ?N1.0 \\<subseteq>\\<^sub>N ?N2.0\n\ngoal (1 subgoal):\n 1. \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M", "by auto"], ["proof (state)\nthis:\n  \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\n\ngoal (2 subgoals):\n 1. space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\n 2. \\<And>f.\n       f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow>\n       Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M", "show \"space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)", "using quasinorm_subset_space"], ["proof (prove)\nusing this:\n  \\<LL> q M \\<subseteq>\\<^sub>N \\<LL> p M\n  ?N1.0 \\<subseteq>\\<^sub>N ?N2.0 \\<Longrightarrow>\n  space\\<^sub>N ?N1.0 \\<subseteq> space\\<^sub>N ?N2.0\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)", "by auto"], ["proof (state)\nthis:\n  space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       f \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow>\n       Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f", "then"], ["proof (chain)\npicking this:\n  space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)", "show \"Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f\" if \"f \\<in> space\\<^sub>N (\\<LL> q M)\" for f"], ["proof (prove)\nusing this:\n  space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f", "using eNorm_Norm that \\<open>eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\\<close> ennreal_le_iff Norm_nonneg"], ["proof (prove)\nusing this:\n  space\\<^sub>N (\\<LL> q M) \\<subseteq> space\\<^sub>N (\\<LL> p M)\n  ?x \\<in> space\\<^sub>N ?N \\<Longrightarrow>\n  eNorm ?N ?x = ennreal (Norm ?N ?x)\n  f \\<in> space\\<^sub>N (\\<LL> q M)\n  eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> q M) f\n  0 \\<le> ?y \\<Longrightarrow> (ennreal ?x \\<le> ennreal ?y) = (?x \\<le> ?y)\n  0 \\<le> Norm ?N ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<le> Norm (\\<LL> q M) f", "by (metis rev_subsetD)"], ["proof (state)\nthis:\n  ?f12 \\<in> space\\<^sub>N (\\<LL> q M) \\<Longrightarrow>\n  Norm (\\<LL> p M) ?f12 \\<le> Norm (\\<LL> q M) ?f12\n\ngoal:\nNo subgoals!", "qed"], ["", "proposition Lp_domination:\n  assumes [measurable]: \"g \\<in> borel_measurable M\"\n      and \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"AE x in M. \\<bar>g x\\<bar> \\<le> \\<bar>f x\\<bar>\"\n  shows \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) &&&\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using Lp_measurable[OF assms(2)]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by simp"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have \"g \\<in> space\\<^sub>N (\\<LL> p M) \\<and> Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = 0 \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 3. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = 0 \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 3. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  p = 0", "have \"Norm (\\<LL> p M) g = 0\""], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g = 0", "unfolding Norm_def"], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. enn2real (eNorm (\\<LL> p M) g) = 0", "using L_zero(1)[of M]"], ["proof (prove)\nusing this:\n  p = 0\n  eNorm (\\<LL> 0 M) ?f =\n  (if ?f \\<in> borel_measurable M then 0 else \\<infinity>)\n\ngoal (1 subgoal):\n 1. enn2real (eNorm (\\<LL> p M) g) = 0", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) g = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = 0 \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 3. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) g = 0", "have \"Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) g = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "using Norm_nonneg"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) g = 0\n  0 \\<le> Norm ?N ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = 0 \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 3. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "unfolding \\<open>p = 0\\<close> L_zero_space"], ["proof (prove)\nusing this:\n  Norm (\\<LL> 0 M) g \\<le> Norm (\\<LL> 0 M) f\n\ngoal (1 subgoal):\n 1. g \\<in> borel_measurable M \\<and>\n    Norm (\\<LL> 0 M) g \\<le> Norm (\\<LL> 0 M) f", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have *: \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "using Lp_D(2) \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  \\<lbrakk>0 < ?p; ?f \\<in> space\\<^sub>N (\\<LL> (ennreal ?p) ?M)\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. \\<bar>?f x\\<bar> powr ?p)\n  0 < p2\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have **: \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)", "apply (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. \\<bar>f x\\<bar> powr p2\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. (\\<lambda>x. \\<bar>g x\\<bar> powr p2) \\<in> borel_measurable M\n 3. AE x in M. norm (\\<bar>g x\\<bar> powr p2)\n               \\<le> norm (\\<bar>f x\\<bar> powr p2)", "using *"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. (\\<lambda>x. \\<bar>g x\\<bar> powr p2) \\<in> borel_measurable M\n 3. AE x in M. norm (\\<bar>g x\\<bar> powr p2)\n               \\<le> norm (\\<bar>f x\\<bar> powr p2)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2) \\<Longrightarrow>\n    AE x in M. \\<bar>g x\\<bar> powr p2 \\<le> \\<bar>f x\\<bar> powr p2", "using assms(3) powr_mono2 \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> \\<bar>f x\\<bar>\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n  0 < p2\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2) \\<Longrightarrow>\n    AE x in M. \\<bar>g x\\<bar> powr p2 \\<le> \\<bar>f x\\<bar> powr p2", "by (auto simp add: less_imp_le)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)", "have \"g \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using Lp_space[OF \\<open>p2 > 0\\<close>, of M]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n  space\\<^sub>N (\\<LL> (ennreal p2) M) =\n  {f \\<in> borel_measurable M.\n   integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have \"Norm (\\<LL> p M) g = (\\<integral>x. \\<bar>g x\\<bar> powr p2 \\<partial>M) powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g = (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) g =\n    (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)", "by (rule Lp_I(2)[OF \\<open>p2 > 0\\<close> _ **], simp)"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) g = (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) g = (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have \"... \\<le> (\\<integral>x. \\<bar>f x\\<bar> powr p2 \\<partial>M) powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)\n    \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2)", "apply (rule powr_mono2, simp add: \\<open>p2 > 0\\<close> less_imp_le, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr p2\n    \\<le> LINT x|M. \\<bar>f x\\<bar> powr p2", "apply (rule integral_mono_AE, auto simp add: * **)"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> powr p2 \\<le> \\<bar>f x\\<bar> powr p2", "using \\<open>p2 > 0\\<close> less_imp_le powr_mono2 assms(3)"], ["proof (prove)\nusing this:\n  0 < p2\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n  AE x in M. \\<bar>g x\\<bar> \\<le> \\<bar>f x\\<bar>\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> powr p2 \\<le> \\<bar>f x\\<bar> powr p2", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)\n  \\<le> (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have \"... = Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) = Norm (\\<LL> p M) f", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n    Norm (\\<LL> (ennreal p2) M) f", "by (rule Lp_I(2)[OF \\<open>p2 > 0\\<close> _ *, symmetric], simp)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) = Norm (\\<LL> p M) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n  g \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "have \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> L_infinity_AE_bound"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "unfolding \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "have *: \"AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> p M) f", "using assms(3)"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n  AE x in M. \\<bar>g x\\<bar> \\<le> \\<bar>f x\\<bar>\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> p M) f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "using L_infinity_I[OF assms(1) *] Norm_nonneg \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> Norm (\\<LL> p M) f \\<Longrightarrow>\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  0 \\<le> Norm (\\<LL> p M) f \\<Longrightarrow>\n  Norm (\\<LL> \\<infinity> M) g \\<le> Norm (\\<LL> p M) f\n  0 \\<le> Norm ?N ?x\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "show \"g \\<in> space\\<^sub>N (\\<LL> p M)\" \"Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) &&&\n    Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M)\n  Norm (\\<LL> p M) g \\<le> Norm (\\<LL> p M) f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_Banach_lattice:\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"(\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M) &&&\n    Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using Lp_measurable[OF assms]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by simp"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "show \"(\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)", "by (rule Lp_domination(1)[OF _ assms], auto)"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "have \"Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> Norm (\\<LL> p M) f", "by (rule Lp_domination[OF _ assms], auto)"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "moreover"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "have \"Norm (\\<LL> p M) f \\<le> Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<le> Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>)", "by (rule Lp_domination[OF _ \\<open>(\\<lambda>x. \\<bar>f x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p M)\\<close>], auto)"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f \\<le> Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "show \"Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) (\\<lambda>x. \\<bar>f x\\<bar>) = Norm (\\<LL> p M) f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_bounded_bounded_support:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n      and \"AE x in M. \\<bar>f x\\<bar> \\<le> C\"\n          \"emeasure M {x \\<in> space M. f x \\<noteq> 0} \\<noteq> \\<infinity>\"\n  shows \"f \\<in> space\\<^sub>N(\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 2. p = 0 \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 3. p = \\<infinity> \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 2. p = 0 \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 3. p = \\<infinity> \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "then"], ["proof (chain)\npicking this:\n  p = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "using L_zero_space assms"], ["proof (prove)\nusing this:\n  p = 0\n  space\\<^sub>N (\\<LL> 0 ?M) = borel_measurable ?M\n  zero_space\\<^sub>N (\\<LL> 0 ?M) = borel_measurable ?M\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n  emeasure M {x \\<in> space M. f x \\<noteq> 0} \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "by blast"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 2. p = \\<infinity> \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 2. p = \\<infinity> \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)\n 2. p = \\<infinity> \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "then"], ["proof (chain)\npicking this:\n  p = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "using L_infinity_space assms"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n  space\\<^sub>N (\\<LL> \\<infinity> ?M) =\n  {f \\<in> borel_measurable ?M.\n   \\<exists>C. AE x in ?M. \\<bar>f x\\<bar> \\<le> C}\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n  emeasure M {x \\<in> space M. f x \\<noteq> 0} \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "by blast"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "have *: \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "apply (rule integrableI_bounded_set[of \"{x \\<in> space M. f x \\<noteq> 0}\" _ _ \"C powr p2\"])"], ["proof (prove)\ngoal (5 subgoals):\n 1. {x \\<in> space M. f x \\<noteq> 0} \\<in> sets M\n 2. (\\<lambda>x. \\<bar>f x\\<bar> powr p2) \\<in> borel_measurable M\n 3. emeasure M {x \\<in> space M. f x \\<noteq> 0} < \\<infinity>\n 4. AE x\\<in>{x \\<in> space M. f x \\<noteq> 0} in M.\n    norm (\\<bar>f x\\<bar> powr p2) \\<le> C powr p2\n 5. AE x in M. x \\<notin> {x \\<in> space M.\n                           f x \\<noteq> 0} \\<longrightarrow>\n               \\<bar>f x\\<bar> powr p2 = 0", "using assms powr_mono2[OF less_imp_le[OF \\<open>p2 > 0\\<close>]]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  AE x in M. \\<bar>f x\\<bar> \\<le> C\n  emeasure M {x \\<in> space M. f x \\<noteq> 0} \\<noteq> \\<infinity>\n  \\<lbrakk>0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr p2 \\<le> ?y powr p2\n\ngoal (5 subgoals):\n 1. {x \\<in> space M. f x \\<noteq> 0} \\<in> sets M\n 2. (\\<lambda>x. \\<bar>f x\\<bar> powr p2) \\<in> borel_measurable M\n 3. emeasure M {x \\<in> space M. f x \\<noteq> 0} < \\<infinity>\n 4. AE x\\<in>{x \\<in> space M. f x \\<noteq> 0} in M.\n    norm (\\<bar>f x\\<bar> powr p2) \\<le> C powr p2\n 5. AE x in M. x \\<notin> {x \\<in> space M.\n                           f x \\<noteq> 0} \\<longrightarrow>\n               \\<bar>f x\\<bar> powr p2 = 0", "by (auto simp add: top.not_eq_extremum)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "apply (rule Lp_I[OF \\<open>p2 > 0\\<close>])"], ["proof (prove)\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M\n 2. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "using *"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M\n 2. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>$L^p$ versions of the main theorems in integration theory\\<close>"], ["", "text \\<open>The space $L^p$ is stable under almost sure convergence, for sequence with bounded norm.\nThis is a version of Fatou's lemma (and it indeed follows from this lemma in the only\nnontrivial situation where $p \\in (0, +\\infty)$.\\<close>"], ["", "proposition Lp_AE_limit:\n  assumes [measurable]: \"g \\<in> borel_measurable M\"\n      and \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"\n  shows \"eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "proof (cases \"liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) = \\<infinity>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) =\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "case True"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) = \\<infinity>\n\ngoal (2 subgoals):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) =\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "case False"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "define le where \"le = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\""], ["proof (state)\nthis:\n  le = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  le = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"le < \\<infinity>\""], ["proof (prove)\nusing this:\n  le = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (1 subgoal):\n 1. le < \\<infinity>", "using False"], ["proof (prove)\nusing this:\n  le = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. le < \\<infinity>", "by (simp add: top.not_eq_extremum)"], ["proof (state)\nthis:\n  le < \\<infinity>\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "obtain r0 where r0: \"strict_mono r0\" \"(\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n))) \\<longlonglongrightarrow> le\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>r0.\n        \\<lbrakk>strict_mono r0;\n         (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n)))\n         \\<longlonglongrightarrow> le\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using liminf_subseq_lim"], ["proof (prove)\nusing this:\n  \\<exists>r.\n     strict_mono r \\<and> (?u \\<circ> r) \\<longlonglongrightarrow> liminf ?u\n\ngoal (1 subgoal):\n 1. (\\<And>r0.\n        \\<lbrakk>strict_mono r0;\n         (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n)))\n         \\<longlonglongrightarrow> le\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding comp_def le_def"], ["proof (prove)\nusing this:\n  \\<exists>r.\n     strict_mono r \\<and>\n     (\\<lambda>x. ?u (r x)) \\<longlonglongrightarrow> liminf ?u\n\ngoal (1 subgoal):\n 1. (\\<And>r0.\n        \\<lbrakk>strict_mono r0;\n         (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n)))\n         \\<longlonglongrightarrow> liminf\n                                    (\\<lambda>n.\n  eNorm (\\<LL> p M) (f n))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  strict_mono r0\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n))) \\<longlonglongrightarrow> le\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  strict_mono r0\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n))) \\<longlonglongrightarrow> le", "have \"eventually (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>) sequentially\""], ["proof (prove)\nusing this:\n  strict_mono r0\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n))) \\<longlonglongrightarrow> le\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>", "using False"], ["proof (prove)\nusing this:\n  strict_mono r0\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 n))) \\<longlonglongrightarrow> le\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>", "unfolding order_tendsto_iff le_def"], ["proof (prove)\nusing this:\n  strict_mono r0\n  (\\<forall>l<liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)).\n      \\<forall>\\<^sub>F x in sequentially.\n         l < eNorm (\\<LL> p M) (f (r0 x))) \\<and>\n  (\\<forall>u>liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)).\n      \\<forall>\\<^sub>F x in sequentially. eNorm (\\<LL> p M) (f (r0 x)) < u)\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>", "by (simp add: top.not_eq_extremum)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            eNorm (\\<LL> p M) (f (r0 n)) < \\<infinity>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow> eNorm (\\<LL> p M) (f (r0 ?n)) < \\<infinity>\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "define r where \"r = (\\<lambda>n. r0 (n + N))\""], ["proof (state)\nthis:\n  r = (\\<lambda>n. r0 (n + N))\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"strict_mono r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strict_mono r", "unfolding r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. strict_mono (\\<lambda>n. r0 (n + N))", "using \\<open>strict_mono r0\\<close>"], ["proof (prove)\nusing this:\n  strict_mono r0\n\ngoal (1 subgoal):\n 1. strict_mono (\\<lambda>n. r0 (n + N))", "by (simp add: strict_mono_Suc_iff)"], ["proof (state)\nthis:\n  strict_mono r\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have *: \"(\\<lambda>n. eNorm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> le\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. eNorm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> le", "unfolding r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 (n + N))))\n    \\<longlonglongrightarrow> le", "using LIMSEQ_ignore_initial_segment[OF r0(2), of N]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 (n + N))))\n  \\<longlonglongrightarrow> le\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. eNorm (\\<LL> p M) (f (r0 (n + N))))\n    \\<longlonglongrightarrow> le", "."], ["proof (state)\nthis:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> le\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"f (r n) \\<in> space\\<^sub>N (\\<LL> p M)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. f (r n) \\<in> space\\<^sub>N (\\<LL> p M)", "using N spaceN_iff"], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow> eNorm (\\<LL> p M) (f (r0 ?n)) < \\<infinity>\n  (?x \\<in> space\\<^sub>N ?N) = (eNorm ?N ?x < \\<infinity>)\n\ngoal (1 subgoal):\n 1. f (r n) \\<in> space\\<^sub>N (\\<LL> p M)", "unfolding r_def"], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow> eNorm (\\<LL> p M) (f (r0 ?n)) < \\<infinity>\n  (?x \\<in> space\\<^sub>N ?N) = (eNorm ?N ?x < \\<infinity>)\n\ngoal (1 subgoal):\n 1. f (r0 (n + N)) \\<in> space\\<^sub>N (\\<LL> p M)", "by force"], ["proof (state)\nthis:\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> p M)", "have [measurable]: \"f (r n) \\<in> borel_measurable M\" for n"], ["proof (prove)\nusing this:\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f (r n) \\<in> borel_measurable M", "using Lp_measurable"], ["proof (prove)\nusing this:\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> p M)\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. f (r n) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f (r ?n) \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "define l where \"l = enn2real le\""], ["proof (state)\nthis:\n  l = enn2real le\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"l \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> l", "unfolding l_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> enn2real le", "by auto"], ["proof (state)\nthis:\n  0 \\<le> l\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"le = ennreal l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. le = ennreal l", "using \\<open>le < \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  le < \\<infinity>\n\ngoal (1 subgoal):\n 1. le = ennreal l", "unfolding l_def"], ["proof (prove)\nusing this:\n  le < \\<infinity>\n\ngoal (1 subgoal):\n 1. le = ennreal (enn2real le)", "by auto"], ["proof (state)\nthis:\n  le = ennreal l\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have [tendsto_intros]: \"(\\<lambda>n. Norm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> l", "apply (rule tendsto_ennrealD)"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. ennreal (Norm (\\<LL> p M) (f (r x))))\n    \\<longlonglongrightarrow> ennreal l\n 2. \\<forall>\\<^sub>F x in sequentially. 0 \\<le> Norm (\\<LL> p M) (f (r x))\n 3. 0 \\<le> l", "using * \\<open>le < \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> le\n  le < \\<infinity>\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. ennreal (Norm (\\<LL> p M) (f (r x))))\n    \\<longlonglongrightarrow> ennreal l\n 2. \\<forall>\\<^sub>F x in sequentially. 0 \\<le> Norm (\\<LL> p M) (f (r x))\n 3. 0 \\<le> l", "unfolding eNorm_Norm[OF \\<open>\\<And>n. f (r n) \\<in> space\\<^sub>N (\\<LL> p M)\\<close>] l_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f (r n))))\n  \\<longlonglongrightarrow> le\n  le < \\<infinity>\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. ennreal (Norm (\\<LL> p M) (f (r x))))\n    \\<longlonglongrightarrow> ennreal (enn2real le)\n 2. \\<forall>\\<^sub>F x in sequentially. 0 \\<le> Norm (\\<LL> p M) (f (r x))\n 3. 0 \\<le> enn2real le", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Norm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<noteq>\n    \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = 0 \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 3. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = 0 \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 3. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  p = 0", "have \"eNorm (\\<LL> p M) g = 0\""], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g = 0", "using assms(1)"], ["proof (prove)\nusing this:\n  p = 0\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g = 0", "by (simp add: L_zero(1))"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = 0 \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 3. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) g = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  p = ennreal p2\n  0 < p2\n  0 < p", "have \"f (r n) \\<in> space\\<^sub>N (\\<LL> p2 M)\" for n"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (1 subgoal):\n 1. f (r n) \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using \\<open>\\<And>n. f (r n) \\<in> space\\<^sub>N(\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f (r n) \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"liminf (\\<lambda>n. ennreal(\\<bar>f (r n) x\\<bar> powr p2)) = \\<bar>g x\\<bar> powr p2\" if \"(\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2)) =\n    ennreal (\\<bar>g x\\<bar> powr p2)", "apply (rule lim_imp_Liminf, auto intro!: tendsto_intros simp add: \\<open>p2 > 0\\<close>)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>xa. f (r xa) x) \\<longlonglongrightarrow> g x", "using LIMSEQ_subseq_LIMSEQ[OF that \\<open>strict_mono r\\<close>]"], ["proof (prove)\nusing this:\n  ((\\<lambda>n. f n x) \\<circ> r) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. (\\<lambda>xa. f (r xa) x) \\<longlonglongrightarrow> g x", "unfolding comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>xa. f (r xa) x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. (\\<lambda>xa. f (r xa) x) \\<longlonglongrightarrow> g x", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  liminf (\\<lambda>n. ennreal (\\<bar>f (r n) ?x\\<bar> powr p2)) =\n  ennreal (\\<bar>g ?x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  liminf (\\<lambda>n. ennreal (\\<bar>f (r n) ?x\\<bar> powr p2)) =\n  ennreal (\\<bar>g ?x\\<bar> powr p2)", "have *: \"AE x in M. liminf (\\<lambda>n. ennreal(\\<bar>f (r n) x\\<bar> powr p2)) = \\<bar>g x\\<bar> powr p2\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  liminf (\\<lambda>n. ennreal (\\<bar>f (r n) ?x\\<bar> powr p2)) =\n  ennreal (\\<bar>g ?x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. AE x in M. liminf\n                (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2)) =\n               ennreal (\\<bar>g x\\<bar> powr p2)", "using \\<open>AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  liminf (\\<lambda>n. ennreal (\\<bar>f (r n) ?x\\<bar> powr p2)) =\n  ennreal (\\<bar>g ?x\\<bar> powr p2)\n  AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. AE x in M. liminf\n                (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2)) =\n               ennreal (\\<bar>g x\\<bar> powr p2)", "by auto"], ["proof (state)\nthis:\n  AE x in M. liminf (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2)) =\n             ennreal (\\<bar>g x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"(\\<integral>\\<^sup>+x. ennreal(\\<bar>f (r n) x\\<bar> powr p2) \\<partial>M) = ennreal((Norm (\\<LL> p M) (f (r n))) powr p2)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "have \"(\\<integral>\\<^sup>+x. ennreal(\\<bar>f (r n) x\\<bar> powr p2) \\<partial>M) = ennreal (\\<integral>x. \\<bar>f (r n) x\\<bar> powr p2 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2)", "by (rule nn_integral_eq_integral, auto simp add: Lp_D(2)[OF \\<open>p2 > 0\\<close> \\<open>f (r n) \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>])"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "have \"... = ennreal((Norm (\\<LL> p2 M) (f (r n))) powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2) =\n    ennreal (Norm (\\<LL> (ennreal p2) M) (f (r n)) powr p2)", "unfolding Lp_D(3)[OF \\<open>p2 > 0\\<close> \\<open>f (r n) \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2) =\n    ennreal\n     (((LINT x|M. \\<bar>f (r n) x\\<bar> powr p2) powr (1 / p2)) powr p2)", "using powr_powr \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 < p2\n\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2) =\n    ennreal\n     (((LINT x|M. \\<bar>f (r n) x\\<bar> powr p2) powr (1 / p2)) powr p2)", "by auto"], ["proof (state)\nthis:\n  ennreal (LINT x|M. \\<bar>f (r n) x\\<bar> powr p2) =\n  ennreal (Norm (\\<LL> (ennreal p2) M) (f (r n)) powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) (f (r n)) powr p2)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) (f (r n)) powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "using \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) (f (r n)) powr p2)\n  p = ennreal p2\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                       \\<partial>M =\n    ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> p M) (f (r n)) powr p2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r ?n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> p M) (f (r ?n)) powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "moreover"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r ?n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> p M) (f (r ?n)) powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"(\\<lambda>n. ennreal((Norm (\\<LL> p M) (f (r n))) powr p2)) \\<longlonglongrightarrow> ennreal(l powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f (r n)) powr p2))\n    \\<longlonglongrightarrow> ennreal (l powr p2)", "by (auto intro!:tendsto_intros simp add: \\<open>p2 > 0\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f (r n)) powr p2))\n  \\<longlonglongrightarrow> ennreal (l powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "ultimately"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r ?n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> p M) (f (r ?n)) powr p2)\n  (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f (r n)) powr p2))\n  \\<longlonglongrightarrow> ennreal (l powr p2)", "have **: \"liminf (\\<lambda>n. (\\<integral>\\<^sup>+x. ennreal(\\<bar>f (r n) x\\<bar> powr p2) \\<partial>M)) = ennreal(l powr p2)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r ?n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> p M) (f (r ?n)) powr p2)\n  (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f (r n)) powr p2))\n  \\<longlonglongrightarrow> ennreal (l powr p2)\n\ngoal (1 subgoal):\n 1. liminf\n     (\\<lambda>n.\n         \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                            \\<partial>M) =\n    ennreal (l powr p2)", "using lim_imp_Liminf"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r ?n) x\\<bar> powr p2)\n                     \\<partial>M =\n  ennreal (Norm (\\<LL> p M) (f (r ?n)) powr p2)\n  (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f (r n)) powr p2))\n  \\<longlonglongrightarrow> ennreal (l powr p2)\n  \\<lbrakk>?F \\<noteq> \\<bottom>;\n   (?f \\<longlongrightarrow> ?f0.0) ?F\\<rbrakk>\n  \\<Longrightarrow> Liminf ?F ?f = ?f0.0\n\ngoal (1 subgoal):\n 1. liminf\n     (\\<lambda>n.\n         \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                            \\<partial>M) =\n    ennreal (l powr p2)", "by force"], ["proof (state)\nthis:\n  liminf\n   (\\<lambda>n.\n       \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                          \\<partial>M) =\n  ennreal (l powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"(\\<integral>\\<^sup>+x. \\<bar>g x\\<bar> powr p2 \\<partial>M) = (\\<integral>\\<^sup>+x. liminf (\\<lambda>n. ennreal(\\<bar>f (r n) x\\<bar> powr p2)) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M =\n    \\<integral>\\<^sup>+ x. liminf\n                            (\\<lambda>n.\n                                ennreal (\\<bar>f (r n) x\\<bar> powr p2))\n                       \\<partial>M", "apply (rule nn_integral_cong_AE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (\\<bar>g x\\<bar> powr p2) =\n               liminf (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2))", "using *"], ["proof (prove)\nusing this:\n  AE x in M. liminf (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2)) =\n             ennreal (\\<bar>g x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (\\<bar>g x\\<bar> powr p2) =\n               liminf (\\<lambda>n. ennreal (\\<bar>f (r n) x\\<bar> powr p2))", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M =\n  \\<integral>\\<^sup>+ x. liminf\n                          (\\<lambda>n.\n                              ennreal (\\<bar>f (r n) x\\<bar> powr p2))\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M =\n  \\<integral>\\<^sup>+ x. liminf\n                          (\\<lambda>n.\n                              ennreal (\\<bar>f (r n) x\\<bar> powr p2))\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"... \\<le> liminf (\\<lambda>n. \\<integral>\\<^sup>+x. ennreal(\\<bar>f (r n) x\\<bar> powr p2) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. liminf\n                            (\\<lambda>n.\n                                ennreal (\\<bar>f (r n) x\\<bar> powr p2))\n                       \\<partial>M\n    \\<le> liminf\n           (\\<lambda>n.\n               \\<integral>\\<^sup>+ x. ennreal\n (\\<bar>f (r n) x\\<bar> powr p2)\n                                  \\<partial>M)", "by (rule nn_integral_liminf, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. liminf\n                          (\\<lambda>n.\n                              ennreal (\\<bar>f (r n) x\\<bar> powr p2))\n                     \\<partial>M\n  \\<le> liminf\n         (\\<lambda>n.\n             \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                                \\<partial>M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> liminf\n         (\\<lambda>n.\n             \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                                \\<partial>M)", "have \"(\\<integral>\\<^sup>+x. \\<bar>g x\\<bar> powr p2 \\<partial>M) \\<le> ennreal(l powr p2)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> liminf\n         (\\<lambda>n.\n             \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                                \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (l powr p2)", "using **"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> liminf\n         (\\<lambda>n.\n             \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                                \\<partial>M)\n  liminf\n   (\\<lambda>n.\n       \\<integral>\\<^sup>+ x. ennreal (\\<bar>f (r n) x\\<bar> powr p2)\n                          \\<partial>M) =\n  ennreal (l powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (l powr p2)", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (l powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (l powr p2)", "have \"(\\<integral>\\<^sup>+x. \\<bar>g x\\<bar> powr p2 \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (l powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    < \\<infinity>", "using le_less_trans"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (l powr p2)\n  \\<lbrakk>?x \\<le> ?y; ?y < ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    < \\<infinity>", "by fastforce"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  < \\<infinity>", "have intg: \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)", "apply (intro integrableI_nonneg)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. \\<bar>g x\\<bar> powr p2) \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    < \\<infinity> \\<Longrightarrow>\n    AE x in M. 0 \\<le> \\<bar>g x\\<bar> powr p2\n 3. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    < \\<infinity> \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)", "have \"g \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using Lp_I(1)[OF \\<open>p2 > 0\\<close>, of _ M]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr p2)\n  \\<lbrakk>?f \\<in> borel_measurable M;\n   integrable M (\\<lambda>x. \\<bar>?f x\\<bar> powr p2)\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by fastforce"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"ennreal((Norm (\\<LL> p2 M) g) powr p2) = ennreal(\\<integral>x. \\<bar>g x\\<bar> powr p2 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) =\n    ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2)", "unfolding Lp_D(3)[OF \\<open>p2 > 0\\<close> \\<open>g \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (((LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)) powr p2) =\n    ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2)", "using powr_powr \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 < p2\n\ngoal (1 subgoal):\n 1. ennreal (((LINT x|M. \\<bar>g x\\<bar> powr p2) powr (1 / p2)) powr p2) =\n    ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2)", "by auto"], ["proof (state)\nthis:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) =\n  ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "also"], ["proof (state)\nthis:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) =\n  ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"... = (\\<integral>\\<^sup>+x. \\<bar>g x\\<bar> powr p2 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2) =\n    \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M", "by (rule nn_integral_eq_integral[symmetric], auto simp add: intg)"], ["proof (state)\nthis:\n  ennreal (LINT x|M. \\<bar>g x\\<bar> powr p2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "finally"], ["proof (chain)\npicking this:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M", "have \"ennreal((Norm (\\<LL> p2 M) g) powr p2) \\<le> ennreal(l powr p2)\""], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2)\n    \\<le> ennreal (l powr p2)", "using \\<open>(\\<integral>\\<^sup>+x. \\<bar>g x\\<bar> powr p2 \\<partial>M) \\<le> ennreal(l powr p2)\\<close>"], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (l powr p2)\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2)\n    \\<le> ennreal (l powr p2)", "by auto"], ["proof (state)\nthis:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) \\<le> ennreal (l powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) \\<le> ennreal (l powr p2)", "have \"((Norm (\\<LL> p2 M) g) powr p2) powr (1/p2) \\<le> (l powr p2) powr (1/p2)\""], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) \\<le> ennreal (l powr p2)\n\ngoal (1 subgoal):\n 1. (Norm (\\<LL> (ennreal p2) M) g powr p2) powr (1 / p2)\n    \\<le> (l powr p2) powr (1 / p2)", "using ennreal_le_iff \\<open>l \\<ge> 0\\<close> \\<open>p2 > 0\\<close> powr_mono2"], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> (ennreal p2) M) g powr p2) \\<le> ennreal (l powr p2)\n  0 \\<le> ?y \\<Longrightarrow> (ennreal ?x \\<le> ennreal ?y) = (?x \\<le> ?y)\n  0 \\<le> l\n  0 < p2\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n\ngoal (1 subgoal):\n 1. (Norm (\\<LL> (ennreal p2) M) g powr p2) powr (1 / p2)\n    \\<le> (l powr p2) powr (1 / p2)", "by auto"], ["proof (state)\nthis:\n  (Norm (\\<LL> (ennreal p2) M) g powr p2) powr (1 / p2)\n  \\<le> (l powr p2) powr (1 / p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  (Norm (\\<LL> (ennreal p2) M) g powr p2) powr (1 / p2)\n  \\<le> (l powr p2) powr (1 / p2)", "have \"Norm (\\<LL> p2 M) g \\<le> l\""], ["proof (prove)\nusing this:\n  (Norm (\\<LL> (ennreal p2) M) g powr p2) powr (1 / p2)\n  \\<le> (l powr p2) powr (1 / p2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) g \\<le> l", "using \\<open>p2 > 0\\<close> \\<open>l \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  (Norm (\\<LL> (ennreal p2) M) g powr p2) powr (1 / p2)\n  \\<le> (l powr p2) powr (1 / p2)\n  0 < p2\n  0 \\<le> l\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) g \\<le> l", "by (auto simp add: powr_powr)"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) g \\<le> l\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> (ennreal p2) M) g \\<le> l", "have \"eNorm (\\<LL> p2 M) g \\<le> le\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) g \\<le> l\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p2) M) g \\<le> le", "unfolding eNorm_Norm[OF \\<open>g \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>] \\<open>le = ennreal l\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) g \\<le> l\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> (ennreal p2) M) g) \\<le> ennreal l", "using ennreal_leI"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) g \\<le> l\n  ?x \\<le> ?y \\<Longrightarrow> ennreal ?x \\<le> ennreal ?y\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> (ennreal p2) M) g) \\<le> ennreal l", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> (ennreal p2) M) g \\<le> le\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> eNorm (\\<LL> p M) g\n                         \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n 2. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> (ennreal p2) M) g \\<le> le", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p2) M) g \\<le> le\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "unfolding le_def \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> (ennreal p2) M) g\n  \\<le> liminf (\\<lambda>n. eNorm (\\<LL> (ennreal p2) M) (f n))\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> (ennreal p2) M) g\n    \\<le> liminf (\\<lambda>n. eNorm (\\<LL> (ennreal p2) M) (f n))", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  p = \\<infinity>", "have \"AE x in M. \\<forall>n. \\<bar>f (r n) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\""], ["proof (prove)\nusing this:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n.\n                  \\<bar>f (r n) x\\<bar>\n                  \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))", "apply (subst AE_all_countable)"], ["proof (prove)\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    \\<forall>i.\n       AE x in M. \\<bar>f (r i) x\\<bar>\n                  \\<le> Norm (\\<LL> \\<infinity> M) (f (r i))", "using L_infinity_AE_bound \\<open>\\<And>n. f (r n) \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n  f (r ?n) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    \\<forall>i.\n       AE x in M. \\<bar>f (r i) x\\<bar>\n                  \\<le> Norm (\\<LL> \\<infinity> M) (f (r i))", "by blast"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n.\n                \\<bar>f (r n) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "moreover"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n.\n                \\<bar>f (r n) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "have \"\\<bar>g x\\<bar> \\<le> l\" if \"\\<forall>n. \\<bar>f (r n) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\" \"(\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x\\<bar> \\<le> l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>g x\\<bar> \\<le> l", "have \"(\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "using that LIMSEQ_subseq_LIMSEQ[OF _ \\<open>strict_mono r\\<close>]"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     \\<bar>f (r n) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n  ?X \\<longlonglongrightarrow> ?L \\<Longrightarrow>\n  (?X \\<circ> r) \\<longlonglongrightarrow> ?L\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "unfolding comp_def"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     \\<bar>f (r n) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n  ?X \\<longlonglongrightarrow> ?L \\<Longrightarrow>\n  (\\<lambda>x. ?X (r x)) \\<longlonglongrightarrow> ?L\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. \\<bar>g x\\<bar> \\<le> l", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x", "have *: \"(\\<lambda>n. \\<bar>f (r n) x\\<bar>) \\<longlonglongrightarrow> \\<bar>g x\\<bar>\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. f (r n) x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<bar>f (r n) x\\<bar>)\n    \\<longlonglongrightarrow> \\<bar>g x\\<bar>", "by (auto intro!:tendsto_intros)"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<bar>f (r n) x\\<bar>)\n  \\<longlonglongrightarrow> \\<bar>g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>g x\\<bar> \\<le> l", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x\\<bar> \\<le> l", "apply (rule LIMSEQ_le[OF *])"], ["proof (prove)\ngoal (2 subgoals):\n 1. ?Y \\<longlonglongrightarrow> l\n 2. \\<exists>N. \\<forall>n\\<ge>N. \\<bar>f (r n) x\\<bar> \\<le> ?Y n", "using that(1) \\<open>(\\<lambda>n. Norm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> l\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     \\<bar>f (r n) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  (\\<lambda>n. Norm (\\<LL> p M) (f (r n))) \\<longlonglongrightarrow> l\n\ngoal (2 subgoals):\n 1. ?Y \\<longlonglongrightarrow> l\n 2. \\<exists>N. \\<forall>n\\<ge>N. \\<bar>f (r n) x\\<bar> \\<le> ?Y n", "unfolding PInf"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     \\<bar>f (r n) x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  (\\<lambda>n. Norm (\\<LL> \\<infinity> M) (f (r n)))\n  \\<longlonglongrightarrow> l\n\ngoal (2 subgoals):\n 1. ?Y \\<longlonglongrightarrow> l\n 2. \\<exists>N. \\<forall>n\\<ge>N. \\<bar>f (r n) x\\<bar> \\<le> ?Y n", "by auto"], ["proof (state)\nthis:\n  \\<bar>g x\\<bar> \\<le> l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>n.\n              \\<bar>f (r n) ?x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> M) (f (r n));\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> l\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. \\<forall>n.\n                \\<bar>f (r n) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  \\<lbrakk>\\<forall>n.\n              \\<bar>f (r n) ?x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> M) (f (r n));\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> l", "have \"AE x in M. \\<bar>g x\\<bar> \\<le> l\""], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>n.\n                \\<bar>f (r n) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  \\<lbrakk>\\<forall>n.\n              \\<bar>f (r n) ?x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> M) (f (r n));\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> l\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> l", "using \\<open>AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>n.\n                \\<bar>f (r n) x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> M) (f (r n))\n  \\<lbrakk>\\<forall>n.\n              \\<bar>f (r n) ?x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> M) (f (r n));\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> l\n  AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> l", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>g x\\<bar> \\<le> l\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> l", "have \"g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\" \"Norm (\\<LL> \\<infinity> M) g \\<le> l\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> l\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) g \\<le> l", "using L_infinity_I[OF \\<open>g \\<in> borel_measurable M\\<close> _ \\<open>l \\<ge> 0\\<close>]"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> l\n  AE x in M. \\<bar>g x\\<bar> \\<le> l \\<Longrightarrow>\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  AE x in M. \\<bar>g x\\<bar> \\<le> l \\<Longrightarrow>\n  Norm (\\<LL> \\<infinity> M) g \\<le> l\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) g \\<le> l", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) g \\<le> l\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) g \\<le> l", "have \"eNorm (\\<LL> \\<infinity> M) g \\<le> le\""], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) g \\<le> l\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) g \\<le> le", "unfolding eNorm_Norm[OF \\<open>g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\\<close>] \\<open>le = ennreal l\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) g \\<le> l\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> \\<infinity> M) g) \\<le> ennreal l", "using ennreal_leI"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) g \\<le> l\n  ?x \\<le> ?y \\<Longrightarrow> ennreal ?x \\<le> ennreal ?y\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> \\<infinity> M) g) \\<le> ennreal l", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> \\<infinity> M) g \\<le> le\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> \\<infinity> M) g \\<le> le", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) g \\<le> le\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "unfolding le_def \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> \\<infinity> M) g\n  \\<le> liminf (\\<lambda>n. eNorm (\\<LL> \\<infinity> M) (f n))\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> \\<infinity> M) g\n    \\<le> liminf (\\<lambda>n. eNorm (\\<LL> \\<infinity> M) (f n))", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_AE_limit':\n  assumes \"g \\<in> borel_measurable M\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"\n          \"(\\<lambda>n. Norm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> l\"\n  shows \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) g \\<le> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) &&& Norm (\\<LL> p M) g \\<le> l", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> l", "have \"l \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> l", "by (rule LIMSEQ_le_const[OF \\<open>(\\<lambda>n. Norm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> l\\<close>], auto)"], ["proof (state)\nthis:\n  0 \\<le> l\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> l", "have \"(\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> ennreal l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n    \\<longlonglongrightarrow> ennreal l", "unfolding eNorm_Norm[OF \\<open>\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f n)))\n    \\<longlonglongrightarrow> ennreal l", "using \\<open>(\\<lambda>n. Norm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> l\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. ennreal (Norm (\\<LL> p M) (f n)))\n    \\<longlonglongrightarrow> ennreal l", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> ennreal l\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> l", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> ennreal l", "have *: \"ennreal l = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> ennreal l\n\ngoal (1 subgoal):\n 1. ennreal l = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "using lim_imp_Liminf[symmetric] trivial_limit_sequentially"], ["proof (prove)\nusing this:\n  (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> ennreal l\n  \\<lbrakk>?F \\<noteq> \\<bottom>; (?f \\<longlongrightarrow> ?t) ?F\\<rbrakk>\n  \\<Longrightarrow> ?t = Liminf ?F ?f\n  sequentially \\<noteq> \\<bottom>\n\ngoal (1 subgoal):\n 1. ennreal l = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "by blast"], ["proof (state)\nthis:\n  ennreal l = liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> l", "have \"eNorm (\\<LL> p M) g \\<le> ennreal l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> ennreal l", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))", "apply (rule Lp_AE_limit)"], ["proof (prove)\ngoal (2 subgoals):\n 1. g \\<in> borel_measurable M\n 2. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "using assms"], ["proof (prove)\nusing this:\n  g \\<in> borel_measurable M\n  f ?n \\<in> space\\<^sub>N (\\<LL> p M)\n  AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n  (\\<lambda>n. Norm (\\<LL> p M) (f n)) \\<longlonglongrightarrow> l\n\ngoal (2 subgoals):\n 1. g \\<in> borel_measurable M\n 2. AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> ennreal l\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> l", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) g \\<le> ennreal l", "have \"eNorm (\\<LL> p M) g < \\<infinity>\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g \\<le> ennreal l\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g < \\<infinity>", "using le_less_trans"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g \\<le> ennreal l\n  \\<lbrakk>?x \\<le> ?y; ?y < ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g < \\<infinity>", "by fastforce"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g < \\<infinity>\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> l", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) g < \\<infinity>", "show \"g \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g < \\<infinity>\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)", "using spaceN_iff"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g < \\<infinity>\n  (?x \\<in> space\\<^sub>N ?N) = (eNorm ?N ?x < \\<infinity>)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> l", "show \"Norm (\\<LL> p M) g \\<le> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> l", "using \\<open>eNorm (\\<LL> p M) g \\<le> ennreal l\\<close> ennreal_le_iff[OF \\<open>l \\<ge> 0\\<close>]"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g \\<le> ennreal l\n  (ennreal ?x \\<le> ennreal l) = (?x \\<le> l)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> l", "unfolding eNorm_Norm[OF \\<open>g \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> p M) g) \\<le> ennreal l\n  (ennreal ?x \\<le> ennreal l) = (?x \\<le> l)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> l", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) g \\<le> l\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_AE_limit'':\n  assumes \"g \\<in> borel_measurable M\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"\n          \"\\<And>n. Norm (\\<LL> p M) (f n) \\<le> C\"\n  shows \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) g \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M) &&& Norm (\\<LL> p M) g \\<le> C", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "have \"C \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> C", "by (rule order_trans[OF Norm_nonneg[of \"\\<LL> p M\" \"f 0\"] \\<open>Norm (\\<LL> p M) (f 0) \\<le> C\\<close>])"], ["proof (state)\nthis:\n  0 \\<le> C\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "have *: \"liminf (\\<lambda>n. ennreal C) = ennreal C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ennreal C) = ennreal C", "using Liminf_const trivial_limit_at_top_linorder"], ["proof (prove)\nusing this:\n  ?F \\<noteq> \\<bottom> \\<Longrightarrow> Liminf ?F (\\<lambda>x. ?c) = ?c\n  at_top \\<noteq> \\<bottom>\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ennreal C) = ennreal C", "by blast"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. ennreal C) = ennreal C\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "have \"eNorm (\\<LL> p M) (f n) \\<le> ennreal C\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) (f n) \\<le> ennreal C", "unfolding eNorm_Norm[OF \\<open>f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> p M) (f n)) \\<le> ennreal C", "using \\<open>Norm (\\<LL> p M) (f n) \\<le> C\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) (f n) \\<le> C\n\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> p M) (f n)) \\<le> ennreal C", "by (auto simp add: ennreal_leI)"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) (f ?n) \\<le> ennreal C\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) (f ?n) \\<le> ennreal C", "have \"liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) (f ?n) \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C", "using Liminf_mono[of \"(\\<lambda>n. eNorm (\\<LL> p M) (f n))\" \"\\<lambda>_. C\" sequentially] *"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) (f ?n) \\<le> ennreal C\n  \\<forall>\\<^sub>F x in sequentially.\n     eNorm (\\<LL> p M) (f x) \\<le> ennreal C \\<Longrightarrow>\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n  \\<le> liminf (\\<lambda>x. ennreal C)\n  liminf (\\<lambda>n. ennreal C) = ennreal C\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C", "by auto"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "then"], ["proof (chain)\npicking this:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C", "have \"eNorm (\\<LL> p M) g \\<le> ennreal C\""], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> ennreal C", "using\n    Lp_AE_limit[OF \\<open>g \\<in> borel_measurable M\\<close> \\<open>AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<close>, of p]"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n)) \\<le> ennreal C\n  eNorm (\\<LL> p M) g \\<le> liminf (\\<lambda>n. eNorm (\\<LL> p M) (f n))\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g \\<le> ennreal C", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g \\<le> ennreal C\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) g \\<le> ennreal C", "have \"eNorm (\\<LL> p M) g < \\<infinity>\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g \\<le> ennreal C\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g < \\<infinity>", "using le_less_trans"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g \\<le> ennreal C\n  \\<lbrakk>?x \\<le> ?y; ?y < ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) g < \\<infinity>", "by fastforce"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) g < \\<infinity>\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) g \\<le> C", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) g < \\<infinity>", "show \"g \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g < \\<infinity>\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)", "using spaceN_iff"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g < \\<infinity>\n  (?x \\<in> space\\<^sub>N ?N) = (eNorm ?N ?x < \\<infinity>)\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> p M)", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> C", "show \"Norm (\\<LL> p M) g \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> C", "using \\<open>eNorm (\\<LL> p M) g \\<le> ennreal C\\<close> ennreal_le_iff[OF \\<open>C \\<ge> 0\\<close>]"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) g \\<le> ennreal C\n  (ennreal ?x \\<le> ennreal C) = (?x \\<le> C)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> C", "unfolding eNorm_Norm[OF \\<open>g \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> p M) g) \\<le> ennreal C\n  (ennreal ?x \\<le> ennreal C) = (?x \\<le> C)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) g \\<le> C", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) g \\<le> C\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>We give the version of Lebesgue dominated convergence theorem in the setting of\n$L^p$ spaces.\\<close>"], ["", "proposition Lp_domination_limit:\n  fixes p::real\n  assumes [measurable]: \"g \\<in> borel_measurable M\"\n          \"\\<And>n. f n \\<in> borel_measurable M\"\n      and \"m \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\"\n          \"\\<And>n. AE x in M. \\<bar>f n x\\<bar> \\<le> m x\"\n  shows \"g \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"tendsto_in\\<^sub>N (\\<LL> p M) f g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M) &&&\n    tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "have [measurable]: \"m \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m \\<in> borel_measurable M", "using Lp_measurable[OF \\<open>m \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  m \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. m \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  m \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "have \"f n \\<in> space\\<^sub>N(\\<LL> p M)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. f n \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)", "apply (rule Lp_domination[OF _ \\<open>m \\<in> space\\<^sub>N (\\<LL> p M)\\<close>])"], ["proof (prove)\ngoal (2 subgoals):\n 1. f n \\<in> borel_measurable M\n 2. AE x in M. \\<bar>f n x\\<bar> \\<le> \\<bar>m x\\<bar>", "using \\<open>AE x in M. \\<bar>f n x\\<bar> \\<le> m x\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f n x\\<bar> \\<le> m x\n\ngoal (2 subgoals):\n 1. f n \\<in> borel_measurable M\n 2. AE x in M. \\<bar>f n x\\<bar> \\<le> \\<bar>m x\\<bar>", "by auto"], ["proof (state)\nthis:\n  f ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "have \"AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x", "apply (subst AE_all_countable)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. AE x in M. \\<bar>f i x\\<bar> \\<le> m x", "using \\<open>\\<And>n. AE x in M. \\<bar>f n x\\<bar> \\<le> m x\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f ?n x\\<bar> \\<le> m x\n\ngoal (1 subgoal):\n 1. \\<forall>i. AE x in M. \\<bar>f i x\\<bar> \\<le> m x", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "moreover"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "have \"\\<bar>g x\\<bar> \\<le> m x\" if \"\\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\" \"(\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x\\<bar> \\<le> m x", "apply (rule LIMSEQ_le_const2[of \"\\<lambda>n. \\<bar>f n x\\<bar>\"])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>n. \\<bar>f n x\\<bar>)\n    \\<longlonglongrightarrow> \\<bar>g x\\<bar>\n 2. \\<exists>N. \\<forall>n\\<ge>N. \\<bar>f n x\\<bar> \\<le> m x", "using that"], ["proof (prove)\nusing this:\n  \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\n  (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal (2 subgoals):\n 1. (\\<lambda>n. \\<bar>f n x\\<bar>)\n    \\<longlonglongrightarrow> \\<bar>g x\\<bar>\n 2. \\<exists>N. \\<forall>n\\<ge>N. \\<bar>f n x\\<bar> \\<le> m x", "by (auto intro!:tendsto_intros)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>n. \\<bar>f n ?x\\<bar> \\<le> m ?x;\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> m ?x\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\n  \\<lbrakk>\\<forall>n. \\<bar>f n ?x\\<bar> \\<le> m ?x;\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> m ?x", "have *: \"AE x in M. \\<bar>g x\\<bar> \\<le> m x\""], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\n  \\<lbrakk>\\<forall>n. \\<bar>f n ?x\\<bar> \\<le> m ?x;\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> m ?x\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> m x", "using \\<open>AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> m x\n  \\<lbrakk>\\<forall>n. \\<bar>f n ?x\\<bar> \\<le> m ?x;\n   (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>g ?x\\<bar> \\<le> m ?x\n  AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> m x", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>g x\\<bar> \\<le> m x\n\ngoal (2 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n 2. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "show \"g \\<in> space\\<^sub>N(\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)", "apply (rule Lp_domination[OF _ \\<open>m \\<in> space\\<^sub>N (\\<LL> p M)\\<close>])"], ["proof (prove)\ngoal (2 subgoals):\n 1. g \\<in> borel_measurable M\n 2. AE x in M. \\<bar>g x\\<bar> \\<le> \\<bar>m x\\<bar>", "using *"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> m x\n\ngoal (2 subgoals):\n 1. g \\<in> borel_measurable M\n 2. AE x in M. \\<bar>g x\\<bar> \\<le> \\<bar>m x\\<bar>", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal p) M)\n\ngoal (1 subgoal):\n 1. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "have \"(\\<lambda>n. Norm (\\<LL> p M) (f n - g)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "proof (cases \"p \\<le> 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0\n 2. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "case True"], ["proof (state)\nthis:\n  p \\<le> 0\n\ngoal (2 subgoals):\n 1. p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0\n 2. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  p \\<le> 0", "have \"ennreal p = 0\""], ["proof (prove)\nusing this:\n  p \\<le> 0\n\ngoal (1 subgoal):\n 1. ennreal p = 0", "by (simp add: ennreal_eq_0_iff)"], ["proof (state)\nthis:\n  ennreal p = 0\n\ngoal (2 subgoals):\n 1. p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0\n 2. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  ennreal p = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  ennreal p = 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "unfolding Norm_def"], ["proof (prove)\nusing this:\n  ennreal p = 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. enn2real (eNorm (\\<LL> (ennreal p) M) (f n - g)))\n    \\<longlonglongrightarrow> 0", "by (auto simp add: L_zero(1))"], ["proof (state)\nthis:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "case False"], ["proof (state)\nthis:\n  \\<not> p \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  \\<not> p \\<le> 0", "have \"p > 0\""], ["proof (prove)\nusing this:\n  \\<not> p \\<le> 0\n\ngoal (1 subgoal):\n 1. 0 < p", "by auto"], ["proof (state)\nthis:\n  0 < p\n\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. (\\<integral>x. \\<bar>f n x - g x\\<bar> powr p \\<partial>M)) \\<longlonglongrightarrow> (\\<integral>x. \\<bar>0\\<bar> powr p \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n    \\<longlonglongrightarrow> LINT x|M. \\<bar>0\\<bar> powr p", "proof (rule integral_dominated_convergence[of _ _ _ \"(\\<lambda>x. \\<bar>2 * m x\\<bar> powr p)\"], auto)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>2 * m x\\<bar> powr p)\n 2. AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n               \\<longlonglongrightarrow> 0\n 3. \\<And>n.\n       AE x in M. \\<bar>f n x - g x\\<bar> powr p\n                  \\<le> \\<bar>2 * m x\\<bar> powr p", "show \"integrable M (\\<lambda>x. \\<bar>2 * m x\\<bar> powr p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>2 * m x\\<bar> powr p)", "unfolding abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. (\\<bar>2\\<bar> * \\<bar>m x\\<bar>) powr p)", "apply (subst powr_mult)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x. 0 \\<le> \\<bar>2\\<bar>\n 2. \\<And>x. 0 \\<le> \\<bar>m x\\<bar>\n 3. integrable M (\\<lambda>x. \\<bar>2\\<bar> powr p * \\<bar>m x\\<bar> powr p)", "using Lp_D(2)[OF \\<open>p > 0\\<close> \\<open>m \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>m x\\<bar> powr p)\n\ngoal (3 subgoals):\n 1. \\<And>x. 0 \\<le> \\<bar>2\\<bar>\n 2. \\<And>x. 0 \\<le> \\<bar>m x\\<bar>\n 3. integrable M (\\<lambda>x. \\<bar>2\\<bar> powr p * \\<bar>m x\\<bar> powr p)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>2 * m x\\<bar> powr p)\n\ngoal (2 subgoals):\n 1. AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n               \\<longlonglongrightarrow> 0\n 2. \\<And>n.\n       AE x in M. \\<bar>f n x - g x\\<bar> powr p\n                  \\<le> \\<bar>2 * m x\\<bar> powr p", "have \"(\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p) \\<longlonglongrightarrow> \\<bar>0\\<bar> powr p\" if \"(\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n    \\<longlonglongrightarrow> \\<bar>0\\<bar> powr p", "apply (rule tendsto_powr')"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>xa. \\<bar>f xa x - g x\\<bar>)\n    \\<longlonglongrightarrow> \\<bar>0\\<bar>\n 2. (\\<lambda>x. p) \\<longlonglongrightarrow> p\n 3. \\<bar>0\\<bar> \\<noteq> 0 \\<or>\n    0 < p \\<and>\n    (\\<forall>\\<^sub>F n in sequentially. 0 \\<le> \\<bar>f n x - g x\\<bar>)", "using \\<open>p > 0\\<close> that"], ["proof (prove)\nusing this:\n  0 < p\n  (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal (3 subgoals):\n 1. (\\<lambda>xa. \\<bar>f xa x - g x\\<bar>)\n    \\<longlonglongrightarrow> \\<bar>0\\<bar>\n 2. (\\<lambda>x. p) \\<longlonglongrightarrow> p\n 3. \\<bar>0\\<bar> \\<noteq> 0 \\<or>\n    0 < p \\<and>\n    (\\<forall>\\<^sub>F n in sequentially. 0 \\<le> \\<bar>f n x - g x\\<bar>)", "apply (auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < p;\n     (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>xa. \\<bar>f xa x - g x\\<bar>)\n                      \\<longlonglongrightarrow> 0", "using Lim_null tendsto_rabs_zero_iff"], ["proof (prove)\nusing this:\n  (?f \\<longlongrightarrow> ?l) ?net =\n  ((\\<lambda>x. ?f x - ?l) \\<longlongrightarrow> (0::?'b)) ?net\n  ((\\<lambda>x. \\<bar>?f x\\<bar>) \\<longlongrightarrow> 0) ?F =\n  (?f \\<longlongrightarrow> 0) ?F\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < p;\n     (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>xa. \\<bar>f xa x - g x\\<bar>)\n                      \\<longlonglongrightarrow> 0", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  (\\<lambda>n. \\<bar>f n ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> \\<bar>0\\<bar> powr p\n\ngoal (2 subgoals):\n 1. AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n               \\<longlonglongrightarrow> 0\n 2. \\<And>n.\n       AE x in M. \\<bar>f n x - g x\\<bar> powr p\n                  \\<le> \\<bar>2 * m x\\<bar> powr p", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  (\\<lambda>n. \\<bar>f n ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> \\<bar>0\\<bar> powr p", "show \"AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  (\\<lambda>n. \\<bar>f n ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> \\<bar>0\\<bar> powr p\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n               \\<longlonglongrightarrow> 0", "using \\<open>AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. f n ?x) \\<longlonglongrightarrow> g ?x \\<Longrightarrow>\n  (\\<lambda>n. \\<bar>f n ?x - g ?x\\<bar> powr p)\n  \\<longlonglongrightarrow> \\<bar>0\\<bar> powr p\n  AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> g x\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n               \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  AE x in M. (\\<lambda>n. \\<bar>f n x - g x\\<bar> powr p)\n             \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       AE x in M. \\<bar>f n x - g x\\<bar> powr p\n                  \\<le> \\<bar>2 * m x\\<bar> powr p", "have \"\\<bar>f n x - g x\\<bar> powr p \\<le> \\<bar>2 * m x\\<bar> powr p\" if \"\\<bar>f n x\\<bar> \\<le> m x\" \"\\<bar>g x\\<bar> \\<le> m x\" for n x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f n x - g x\\<bar> powr p \\<le> \\<bar>2 * m x\\<bar> powr p", "using powr_mono2 \\<open>p > 0\\<close> that"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?x; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x powr ?a \\<le> ?y powr ?a\n  0 < p\n  \\<bar>f n x\\<bar> \\<le> m x\n  \\<bar>g x\\<bar> \\<le> m x\n\ngoal (1 subgoal):\n 1. \\<bar>f n x - g x\\<bar> powr p \\<le> \\<bar>2 * m x\\<bar> powr p", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<bar>f ?n ?x\\<bar> \\<le> m ?x;\n   \\<bar>g ?x\\<bar> \\<le> m ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f ?n ?x - g ?x\\<bar> powr p\n                    \\<le> \\<bar>2 * m ?x\\<bar> powr p\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       AE x in M. \\<bar>f n x - g x\\<bar> powr p\n                  \\<le> \\<bar>2 * m x\\<bar> powr p", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<bar>f ?n ?x\\<bar> \\<le> m ?x;\n   \\<bar>g ?x\\<bar> \\<le> m ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f ?n ?x - g ?x\\<bar> powr p\n                    \\<le> \\<bar>2 * m ?x\\<bar> powr p", "show \"AE x in M. \\<bar>f n x - g x\\<bar> powr p \\<le> \\<bar>2 * m x\\<bar> powr p\" for n"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<bar>f ?n ?x\\<bar> \\<le> m ?x;\n   \\<bar>g ?x\\<bar> \\<le> m ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f ?n ?x - g ?x\\<bar> powr p\n                    \\<le> \\<bar>2 * m ?x\\<bar> powr p\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f n x - g x\\<bar> powr p\n               \\<le> \\<bar>2 * m x\\<bar> powr p", "using \\<open>AE x in M. \\<bar>f n x\\<bar> \\<le> m x\\<close> \\<open>AE x in M. \\<bar>g x\\<bar> \\<le> m x\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<bar>f ?n ?x\\<bar> \\<le> m ?x;\n   \\<bar>g ?x\\<bar> \\<le> m ?x\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f ?n ?x - g ?x\\<bar> powr p\n                    \\<le> \\<bar>2 * m ?x\\<bar> powr p\n  AE x in M. \\<bar>f n x\\<bar> \\<le> m x\n  AE x in M. \\<bar>g x\\<bar> \\<le> m x\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f n x - g x\\<bar> powr p\n               \\<le> \\<bar>2 * m x\\<bar> powr p", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f ?n x - g x\\<bar> powr p\n             \\<le> \\<bar>2 * m x\\<bar> powr p\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> LINT x|M. \\<bar>0\\<bar> powr p\n\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> LINT x|M. \\<bar>0\\<bar> powr p", "have \"(\\<lambda>n. (Norm (\\<LL> p M) (f n - g)) powr p) \\<longlonglongrightarrow> (Norm (\\<LL> p M) 0) powr p\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> LINT x|M. \\<bar>0\\<bar> powr p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g) powr p)\n    \\<longlonglongrightarrow> Norm (\\<LL> (ennreal p) M) 0 powr p", "unfolding Lp_D[OF \\<open>p > 0\\<close> spaceN_diff[OF \\<open>\\<And>n. f n \\<in> space\\<^sub>N(\\<LL> p M)\\<close> \\<open>g \\<in> space\\<^sub>N(\\<LL> p M)\\<close>]]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> LINT x|M. \\<bar>0\\<bar> powr p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ((LINT x|M. \\<bar>(f n - g) x\\<bar> powr p) powr (1 / p)) powr p)\n    \\<longlonglongrightarrow> Norm (\\<LL> (ennreal p) M) 0 powr p", "using \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. LINT x|M. \\<bar>f n x - g x\\<bar> powr p)\n  \\<longlonglongrightarrow> LINT x|M. \\<bar>0\\<bar> powr p\n  0 < p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ((LINT x|M. \\<bar>(f n - g) x\\<bar> powr p) powr (1 / p)) powr p)\n    \\<longlonglongrightarrow> Norm (\\<LL> (ennreal p) M) 0 powr p", "by (auto simp add: powr_powr)"], ["proof (state)\nthis:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g) powr p)\n  \\<longlonglongrightarrow> Norm (\\<LL> (ennreal p) M) 0 powr p\n\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g) powr p)\n  \\<longlonglongrightarrow> Norm (\\<LL> (ennreal p) M) 0 powr p", "have \"(\\<lambda>n. ((Norm (\\<LL> p M) (f n - g)) powr p) powr (1/p)) \\<longlonglongrightarrow> ((Norm (\\<LL> p M) 0) powr p) powr (1/p)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g) powr p)\n  \\<longlonglongrightarrow> Norm (\\<LL> (ennreal p) M) 0 powr p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. (Norm (\\<LL> (ennreal p) M) (f n - g) powr p) powr (1 / p))\n    \\<longlonglongrightarrow> (Norm (\\<LL> (ennreal p) M) 0 powr p) powr\n                              (1 / p)", "by (rule tendsto_powr', auto simp add: \\<open>p > 0\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>n. (Norm (\\<LL> (ennreal p) M) (f n - g) powr p) powr (1 / p))\n  \\<longlonglongrightarrow> (Norm (\\<LL> (ennreal p) M) 0 powr p) powr\n                            (1 / p)\n\ngoal (1 subgoal):\n 1. \\<not> p \\<le> 0 \\<Longrightarrow>\n    (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. (Norm (\\<LL> (ennreal p) M) (f n - g) powr p) powr (1 / p))\n  \\<longlonglongrightarrow> (Norm (\\<LL> (ennreal p) M) 0 powr p) powr\n                            (1 / p)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. (Norm (\\<LL> (ennreal p) M) (f n - g) powr p) powr (1 / p))\n  \\<longlonglongrightarrow> (Norm (\\<LL> (ennreal p) M) 0 powr p) powr\n                            (1 / p)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "using powr_powr \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. (Norm (\\<LL> (ennreal p) M) (f n - g) powr p) powr (1 / p))\n  \\<longlonglongrightarrow> (Norm (\\<LL> (ennreal p) M) 0 powr p) powr\n                            (1 / p)\n  (?x powr ?a) powr ?b = ?x powr (?a * ?b)\n  0 < p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0", "show \"tendsto_in\\<^sub>N (\\<LL> p M) f g\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g", "unfolding tendsto_in\\<^sub>N_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> (ennreal p) M) (f n - g))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  tendsto_in\\<^sub>N (\\<LL> (ennreal p) M) f g\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>We give the version of the monotone convergence theorem in the setting of\n$L^p$ spaces.\\<close>"], ["", "proposition Lp_monotone_limit:\n  fixes f::\"nat \\<Rightarrow> 'a \\<Rightarrow> real\"\n  assumes \"p > (0::ennreal)\"\n          \"AE x in M. incseq (\\<lambda>n. f n x)\"\n          \"\\<And>n. Norm (\\<LL> p M) (f n) \\<le> C\"\n          \"\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"AE x in M. convergent (\\<lambda>n. f n x)\"\n        \"(\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\"\n        \"Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>n. f n x) &&&\n    (\\<lambda>x. lim (\\<lambda>n. f n x))\n    \\<in> space\\<^sub>N (\\<LL> p M) &&&\n    Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. AE x in M. convergent (\\<lambda>n. f n x)\n 2. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\n 3. Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "have [measurable]: \"f n \\<in> borel_measurable M\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. f n \\<in> borel_measurable M", "using Lp_measurable[OF assms(4)]"], ["proof (prove)\nusing this:\n  f ?n1 \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f n \\<in> borel_measurable M", "."], ["proof (state)\nthis:\n  f ?n \\<in> borel_measurable M\n\ngoal (3 subgoals):\n 1. AE x in M. convergent (\\<lambda>n. f n x)\n 2. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\n 3. Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "show \"AE x in M. convergent (\\<lambda>n. f n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>n. f n x)", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    AE x in M. convergent (\\<lambda>n. f n x)", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    AE x in M. convergent (\\<lambda>n. f n x)", "have \"AE x in M. \\<bar>f n x\\<bar> \\<le> C\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f n x\\<bar> \\<le> C", "using L_infinity_AE_bound[of \"f n\" M] \\<open>Norm (\\<LL> p M) (f n) \\<le> C\\<close> \\<open>f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n  AE x in M. \\<bar>f n x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n)\n  Norm (\\<LL> p M) (f n) \\<le> C\n  f n \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f n x\\<bar> \\<le> C", "unfolding \\<open>p=\\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  f n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<Longrightarrow>\n  AE x in M. \\<bar>f n x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (f n)\n  Norm (\\<LL> \\<infinity> M) (f n) \\<le> C\n  f n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f n x\\<bar> \\<le> C", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f ?n x\\<bar> \\<le> C\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>f ?n x\\<bar> \\<le> C", "have *: \"AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> C\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f ?n x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> C", "by (subst AE_all_countable, auto)"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> C\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    AE x in M. convergent (\\<lambda>n. f n x)", "have \"(\\<lambda>n. f n x) \\<longlonglongrightarrow> (SUP n. f n x)\" if \"incseq (\\<lambda>n. f n x)\" \"\\<And>n. \\<bar>f n x\\<bar> \\<le> C\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n x) \\<longlonglongrightarrow> (\\<Squnion>n. f n x)", "apply (rule LIMSEQ_incseq_SUP[OF _ \\<open>incseq (\\<lambda>n. f n x)\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. bdd_above (range (\\<lambda>n. f n x))", "using that(2) abs_le_D1"], ["proof (prove)\nusing this:\n  \\<bar>f ?n x\\<bar> \\<le> C\n  \\<bar>?a\\<bar> \\<le> ?b \\<Longrightarrow> ?a \\<le> ?b\n\ngoal (1 subgoal):\n 1. bdd_above (range (\\<lambda>n. f n x))", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n. f n ?x)\n                    \\<longlonglongrightarrow> (\\<Squnion>n. f n ?x)\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n. f n ?x)\n                    \\<longlonglongrightarrow> (\\<Squnion>n. f n ?x)", "have \"convergent (\\<lambda>n. f n x)\" if \"incseq (\\<lambda>n. f n x)\" \"\\<And>n. \\<bar>f n x\\<bar> \\<le> C\" for x"], ["proof (prove)\nusing this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n. f n ?x)\n                    \\<longlonglongrightarrow> (\\<Squnion>n. f n ?x)\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "unfolding convergent_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n. f n ?x)\n                    \\<longlonglongrightarrow> (\\<Squnion>n. f n ?x)\n\ngoal (1 subgoal):\n 1. \\<exists>L. (\\<lambda>n. f n x) \\<longlonglongrightarrow> L", "using that"], ["proof (prove)\nusing this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n. f n ?x)\n                    \\<longlonglongrightarrow> (\\<Squnion>n. f n ?x)\n  incseq (\\<lambda>n. f n x)\n  \\<bar>f ?n x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>L. (\\<lambda>n. f n x) \\<longlonglongrightarrow> L", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)\n\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>n. f n x)", "using \\<open>AE x in M. incseq (\\<lambda>n. f n x)\\<close> *"], ["proof (prove)\nusing this:\n  \\<lbrakk>incseq (\\<lambda>n. f n ?x);\n   \\<And>n. \\<bar>f n ?x\\<bar> \\<le> C\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)\n  AE x in M. incseq (\\<lambda>n. f n x)\n  AE x in M. \\<forall>n. \\<bar>f n x\\<bar> \\<le> C\n\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>n. f n x)", "by auto"], ["proof (state)\nthis:\n  AE x in M. convergent (\\<lambda>n. f n x)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "define g where \"g = (\\<lambda>n. f n - f 0)\""], ["proof (state)\nthis:\n  g = (\\<lambda>n. f n - f 0)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"AE x in M. incseq (\\<lambda>n. g n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. incseq (\\<lambda>n. g n x)", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. incseq (\\<lambda>n. (f n - f 0) x)", "using \\<open>AE x in M. incseq (\\<lambda>n. f n x)\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. incseq (\\<lambda>n. f n x)\n\ngoal (1 subgoal):\n 1. AE x in M. incseq (\\<lambda>n. (f n - f 0) x)", "by (simp add: incseq_def)"], ["proof (state)\nthis:\n  AE x in M. incseq (\\<lambda>n. g n x)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"g n \\<in> space\\<^sub>N (\\<LL> p2 M)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. g n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. f n - f 0 \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using \\<open>\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f ?n \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f n - f 0 \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  f ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. f n - f 0 \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  g ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  g ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "have [measurable]: \"g n \\<in> borel_measurable M\" for n"], ["proof (prove)\nusing this:\n  g ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. g n \\<in> borel_measurable M", "using Lp_measurable"], ["proof (prove)\nusing this:\n  g ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. g n \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  g ?n \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "define D where \"D = defect (\\<LL> p2 M) * C + defect (\\<LL> p2 M) * C\""], ["proof (state)\nthis:\n  D = defect (\\<LL> (ennreal p2) M) * C + defect (\\<LL> (ennreal p2) M) * C\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"Norm (\\<LL> p2 M) (g n) \\<le> D\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "have \"f n \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using \\<open>f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f n \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  f n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. f n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  f n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "have \"Norm (\\<LL> p2 M) (g n) \\<le> defect (\\<LL> p2 M) * Norm (\\<LL> p2 M) (f n) + defect (\\<LL> p2 M) * Norm (\\<LL> p2 M) (f 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n)\n    \\<le> defect (\\<LL> (ennreal p2) M) *\n          Norm (\\<LL> (ennreal p2) M) (f n) +\n          defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (f n - f 0)\n    \\<le> defect (\\<LL> (ennreal p2) M) *\n          Norm (\\<LL> (ennreal p2) M) (f n) +\n          defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)", "using Norm_triangular_ineq_diff[OF \\<open>f n \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) (f n - ?y)\n  \\<le> defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n) +\n        defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) ?y\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (f n - f 0)\n    \\<le> defect (\\<LL> (ennreal p2) M) *\n          Norm (\\<LL> (ennreal p2) M) (f n) +\n          defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (g n)\n  \\<le> defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n) +\n        defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (g n)\n  \\<le> defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n) +\n        defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "have \"... \\<le> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n) +\n    defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n    \\<le> D", "unfolding D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n) +\n    defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C +\n          defect (\\<LL> (ennreal p2) M) * C", "apply(rule add_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C\n 2. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C", "using mult_left_mono defect_ge_1[of \"\\<LL> p2 M\"] \\<open>\\<And>n. Norm (\\<LL> p M) (f n) \\<le> C\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<le> ?b; (0::?'a) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?c * ?a \\<le> ?c * ?b\n  1 \\<le> defect (\\<LL> (ennreal p2) M)\n  Norm (\\<LL> p M) (f ?n) \\<le> C\n\ngoal (2 subgoals):\n 1. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C\n 2. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<le> ?b; (0::?'a) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?c * ?a \\<le> ?c * ?b\n  1 \\<le> defect (\\<LL> (ennreal p2) M)\n  Norm (\\<LL> (ennreal p2) M) (f ?n) \\<le> C\n\ngoal (2 subgoals):\n 1. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C\n 2. defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n    \\<le> defect (\\<LL> (ennreal p2) M) * C", "by auto"], ["proof (state)\nthis:\n  defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f n) +\n  defect (\\<LL> (ennreal p2) M) * Norm (\\<LL> (ennreal p2) M) (f 0)\n  \\<le> D\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (g n) \\<le> D\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (g ?n) \\<le> D\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have g_bound: \"(\\<integral>\\<^sup>+x. \\<bar>g n x\\<bar> powr p2 \\<partial>M) \\<le> ennreal(D powr p2)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "have \"(\\<integral>\\<^sup>+x. \\<bar>g n x\\<bar> powr p2 \\<partial>M) = ennreal(\\<integral>x. \\<bar>g n x\\<bar> powr p2 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M =\n    ennreal (LINT x|M. \\<bar>g n x\\<bar> powr p2)", "apply (rule nn_integral_eq_integral)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>g n x\\<bar> powr p2)\n 2. AE x in M. 0 \\<le> \\<bar>g n x\\<bar> powr p2", "using Lp_D(2)[OF \\<open>p2 > 0\\<close> \\<open>g n \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>g n x\\<bar> powr p2)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>g n x\\<bar> powr p2)\n 2. AE x in M. 0 \\<le> \\<bar>g n x\\<bar> powr p2", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M =\n  ennreal (LINT x|M. \\<bar>g n x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M =\n  ennreal (LINT x|M. \\<bar>g n x\\<bar> powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "have \"... = ennreal((Norm (\\<LL> p2 M) (g n)) powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>g n x\\<bar> powr p2) =\n    ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2)", "apply (subst Lp_Norm(2)[OF \\<open>p2 > 0\\<close>, of \"g n\", symmetric])"], ["proof (prove)\ngoal (2 subgoals):\n 1. g n \\<in> borel_measurable M\n 2. ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2) =\n    ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2)", "by auto"], ["proof (state)\nthis:\n  ennreal (LINT x|M. \\<bar>g n x\\<bar> powr p2) =\n  ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "also"], ["proof (state)\nthis:\n  ennreal (LINT x|M. \\<bar>g n x\\<bar> powr p2) =\n  ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "have \"... \\<le> ennreal(D powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2)\n    \\<le> ennreal (D powr p2)", "by (auto intro!: powr_mono2 simp add: less_imp_le[OF \\<open>p2 > 0\\<close>] \\<open>Norm (\\<LL> p2 M) (g n) \\<le> D\\<close>)"], ["proof (state)\nthis:\n  ennreal (Norm (\\<LL> (ennreal p2) M) (g n) powr p2)\n  \\<le> ennreal (D powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (D powr p2)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (D powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n    \\<le> ennreal (D powr p2)", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (D powr p2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g ?n x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (D powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"\\<forall>n. g n x \\<ge> 0\" if \"incseq (\\<lambda>n. f n x)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. 0 \\<le> g n x", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. 0 \\<le> (f n - f 0) x", "using that"], ["proof (prove)\nusing this:\n  incseq (\\<lambda>n. f n x)\n\ngoal (1 subgoal):\n 1. \\<forall>n. 0 \\<le> (f n - f 0) x", "by (auto simp add: incseq_def)"], ["proof (state)\nthis:\n  incseq (\\<lambda>n. f n ?x) \\<Longrightarrow> \\<forall>n. 0 \\<le> g n ?x\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  incseq (\\<lambda>n. f n ?x) \\<Longrightarrow> \\<forall>n. 0 \\<le> g n ?x", "have \"AE x in M. \\<forall>n. g n x \\<ge> 0\""], ["proof (prove)\nusing this:\n  incseq (\\<lambda>n. f n ?x) \\<Longrightarrow> \\<forall>n. 0 \\<le> g n ?x\n\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n. 0 \\<le> g n x", "using \\<open>AE x in M. incseq (\\<lambda>n. f n x)\\<close>"], ["proof (prove)\nusing this:\n  incseq (\\<lambda>n. f n ?x) \\<Longrightarrow> \\<forall>n. 0 \\<le> g n ?x\n  AE x in M. incseq (\\<lambda>n. f n x)\n\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n. 0 \\<le> g n x", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n. 0 \\<le> g n x\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "define h where \"h = (\\<lambda>n x. ennreal(\\<bar>g n x\\<bar> powr p2))\""], ["proof (state)\nthis:\n  h = (\\<lambda>n x. ennreal (\\<bar>g n x\\<bar> powr p2))\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have [measurable]: \"h n \\<in> borel_measurable M\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. h n \\<in> borel_measurable M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal (\\<bar>g n x\\<bar> powr p2))\n    \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  h ?n \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "define H where \"H = (\\<lambda>x. (SUP n. h n x))\""], ["proof (state)\nthis:\n  H = (\\<lambda>x. \\<Squnion>n. h n x)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have [measurable]: \"H \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H \\<in> borel_measurable M", "unfolding H_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Squnion>n. h n x) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  H \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"\\<And>n. h n x \\<le> h (Suc n) x\" if \"\\<forall>n. g n x \\<ge> 0\" \"incseq (\\<lambda>n. g n x)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. h n x \\<le> h (Suc n) x", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ennreal (\\<bar>g n x\\<bar> powr p2)\n       \\<le> ennreal (\\<bar>g (Suc n) x\\<bar> powr p2)", "apply (auto intro!:powr_mono2)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 \\<le> p2\n 2. \\<And>n. \\<bar>g n x\\<bar> \\<le> \\<bar>g (Suc n) x\\<bar>", "apply (auto simp add: less_imp_le[OF \\<open>p2 > 0\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. \\<bar>g n x\\<bar> \\<le> \\<bar>g (Suc n) x\\<bar>", "using that incseq_SucD"], ["proof (prove)\nusing this:\n  \\<forall>n. 0 \\<le> g n x\n  incseq (\\<lambda>n. g n x)\n  incseq ?A \\<Longrightarrow> ?A ?i \\<le> ?A (Suc ?i)\n\ngoal (1 subgoal):\n 1. \\<And>n. \\<bar>g n x\\<bar> \\<le> \\<bar>g (Suc n) x\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>n. 0 \\<le> g n ?x1;\n   incseq (\\<lambda>n. g n ?x1)\\<rbrakk>\n  \\<Longrightarrow> h ?n ?x1 \\<le> h (Suc ?n) ?x1\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>n. 0 \\<le> g n ?x1;\n   incseq (\\<lambda>n. g n ?x1)\\<rbrakk>\n  \\<Longrightarrow> h ?n ?x1 \\<le> h (Suc ?n) ?x1", "have *: \"AE x in M. h n x \\<le> h (Suc n) x\" for n"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>n. 0 \\<le> g n ?x1;\n   incseq (\\<lambda>n. g n ?x1)\\<rbrakk>\n  \\<Longrightarrow> h ?n ?x1 \\<le> h (Suc ?n) ?x1\n\ngoal (1 subgoal):\n 1. AE x in M. h n x \\<le> h (Suc n) x", "using \\<open>AE x in M. \\<forall>n. g n x \\<ge> 0\\<close> \\<open>AE x in M. incseq (\\<lambda>n. g n x)\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>n. 0 \\<le> g n ?x1;\n   incseq (\\<lambda>n. g n ?x1)\\<rbrakk>\n  \\<Longrightarrow> h ?n ?x1 \\<le> h (Suc ?n) ?x1\n  AE x in M. \\<forall>n. 0 \\<le> g n x\n  AE x in M. incseq (\\<lambda>n. g n x)\n\ngoal (1 subgoal):\n 1. AE x in M. h n x \\<le> h (Suc n) x", "by auto"], ["proof (state)\nthis:\n  AE x in M. h ?n x \\<le> h (Suc ?n) x\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"(\\<integral>\\<^sup>+x. H x \\<partial>M) = (SUP n. \\<integral>\\<^sup>+x. h n x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N M H = (\\<Squnion>n. integral\\<^sup>N M (h n))", "unfolding H_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Squnion>n. h n x) \\<partial>M =\n    (\\<Squnion>n. integral\\<^sup>N M (h n))", "by (rule nn_integral_monotone_convergence_SUP_AE, auto simp add: *)"], ["proof (state)\nthis:\n  integral\\<^sup>N M H = (\\<Squnion>n. integral\\<^sup>N M (h n))\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "also"], ["proof (state)\nthis:\n  integral\\<^sup>N M H = (\\<Squnion>n. integral\\<^sup>N M (h n))\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"... \\<le> ennreal(D powr p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Squnion>n. integral\\<^sup>N M (h n)) \\<le> ennreal (D powr p2)", "unfolding H_def h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Squnion>n.\n        \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2)\n                           \\<partial>M)\n    \\<le> ennreal (D powr p2)", "using g_bound"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>g ?n x\\<bar> powr p2) \\<partial>M\n  \\<le> ennreal (D powr p2)\n\ngoal (1 subgoal):\n 1. (\\<Squnion>n.\n        \\<integral>\\<^sup>+ x. ennreal (\\<bar>g n x\\<bar> powr p2)\n                           \\<partial>M)\n    \\<le> ennreal (D powr p2)", "by (simp add: SUP_least)"], ["proof (state)\nthis:\n  (\\<Squnion>n. integral\\<^sup>N M (h n)) \\<le> ennreal (D powr p2)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "finally"], ["proof (chain)\npicking this:\n  integral\\<^sup>N M H \\<le> ennreal (D powr p2)", "have \"(\\<integral>\\<^sup>+x. H x \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  integral\\<^sup>N M H \\<le> ennreal (D powr p2)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>N M H < \\<infinity>", "by (simp add: le_less_trans)"], ["proof (state)\nthis:\n  integral\\<^sup>N M H < \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  integral\\<^sup>N M H < \\<infinity>", "have \"AE x in M. H x \\<noteq> \\<infinity>\""], ["proof (prove)\nusing this:\n  integral\\<^sup>N M H < \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. H x \\<noteq> \\<infinity>", "by (metis (mono_tags, lifting) \\<open>H \\<in> borel_measurable M\\<close> infinity_ennreal_def nn_integral_noteq_infinite top.not_eq_extremum)"], ["proof (state)\nthis:\n  AE x in M. H x \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "have \"convergent (\\<lambda>n. f n x)\" if \"H x \\<noteq> \\<infinity>\" \"incseq (\\<lambda>n. f n x)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "define A where \"A = enn2real(H x)\""], ["proof (state)\nthis:\n  A = enn2real (H x)\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  A = enn2real (H x)", "have \"H x = ennreal A\""], ["proof (prove)\nusing this:\n  A = enn2real (H x)\n\ngoal (1 subgoal):\n 1. H x = ennreal A", "using \\<open>H x \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  A = enn2real (H x)\n  H x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. H x = ennreal A", "by (simp add: ennreal_enn2real_if)"], ["proof (state)\nthis:\n  H x = ennreal A\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "have \"f n x \\<le> f 0 x + A powr (1/p2)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "have \"ennreal(\\<bar>g n x\\<bar> powr p2) \\<le> ennreal A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (\\<bar>g n x\\<bar> powr p2) \\<le> ennreal A", "unfolding \\<open>H x = ennreal A\\<close>[symmetric] H_def h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (\\<bar>g n x\\<bar> powr p2)\n    \\<le> (\\<Squnion>n. ennreal (\\<bar>g n x\\<bar> powr p2))", "by (meson SUP_upper2 UNIV_I order_refl)"], ["proof (state)\nthis:\n  ennreal (\\<bar>g n x\\<bar> powr p2) \\<le> ennreal A\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "then"], ["proof (chain)\npicking this:\n  ennreal (\\<bar>g n x\\<bar> powr p2) \\<le> ennreal A", "have \"\\<bar>g n x\\<bar> powr p2 \\<le> A\""], ["proof (prove)\nusing this:\n  ennreal (\\<bar>g n x\\<bar> powr p2) \\<le> ennreal A\n\ngoal (1 subgoal):\n 1. \\<bar>g n x\\<bar> powr p2 \\<le> A", "by (subst ennreal_le_iff[symmetric], auto simp add: A_def)"], ["proof (state)\nthis:\n  \\<bar>g n x\\<bar> powr p2 \\<le> A\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "have \"\\<bar>g n x\\<bar> = (\\<bar>g n x\\<bar> powr p2) powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g n x\\<bar> = (\\<bar>g n x\\<bar> powr p2) powr (1 / p2)", "using \\<open>p2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < p2\n\ngoal (1 subgoal):\n 1. \\<bar>g n x\\<bar> = (\\<bar>g n x\\<bar> powr p2) powr (1 / p2)", "by (simp add: powr_powr)"], ["proof (state)\nthis:\n  \\<bar>g n x\\<bar> = (\\<bar>g n x\\<bar> powr p2) powr (1 / p2)\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "also"], ["proof (state)\nthis:\n  \\<bar>g n x\\<bar> = (\\<bar>g n x\\<bar> powr p2) powr (1 / p2)\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "have \"... \\<le> A powr (1/p2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bar>g n x\\<bar> powr p2) powr (1 / p2) \\<le> A powr (1 / p2)", "apply (rule powr_mono2)"], ["proof (prove)\ngoal (3 subgoals):\n 1. 0 \\<le> 1 / p2\n 2. 0 \\<le> \\<bar>g n x\\<bar> powr p2\n 3. \\<bar>g n x\\<bar> powr p2 \\<le> A", "using \\<open>p2 > 0\\<close> \\<open>\\<bar>g n x\\<bar> powr p2 \\<le> A\\<close>"], ["proof (prove)\nusing this:\n  0 < p2\n  \\<bar>g n x\\<bar> powr p2 \\<le> A\n\ngoal (3 subgoals):\n 1. 0 \\<le> 1 / p2\n 2. 0 \\<le> \\<bar>g n x\\<bar> powr p2\n 3. \\<bar>g n x\\<bar> powr p2 \\<le> A", "by auto"], ["proof (state)\nthis:\n  (\\<bar>g n x\\<bar> powr p2) powr (1 / p2) \\<le> A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "finally"], ["proof (chain)\npicking this:\n  \\<bar>g n x\\<bar> \\<le> A powr (1 / p2)", "have \"\\<bar>g n x\\<bar> \\<le> A powr (1/p2)\""], ["proof (prove)\nusing this:\n  \\<bar>g n x\\<bar> \\<le> A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. \\<bar>g n x\\<bar> \\<le> A powr (1 / p2)", "by simp"], ["proof (state)\nthis:\n  \\<bar>g n x\\<bar> \\<le> A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "then"], ["proof (chain)\npicking this:\n  \\<bar>g n x\\<bar> \\<le> A powr (1 / p2)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>g n x\\<bar> \\<le> A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "unfolding g_def"], ["proof (prove)\nusing this:\n  \\<bar>(f n - f 0) x\\<bar> \\<le> A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. f n x \\<le> f 0 x + A powr (1 / p2)", "by auto"], ["proof (state)\nthis:\n  f n x \\<le> f 0 x + A powr (1 / p2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f ?n x \\<le> f 0 x + A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  f ?n x \\<le> f 0 x + A powr (1 / p2)", "show \"convergent (\\<lambda>n. f n x)\""], ["proof (prove)\nusing this:\n  f ?n x \\<le> f 0 x + A powr (1 / p2)\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "using LIMSEQ_incseq_SUP[OF _ \\<open>incseq (\\<lambda>n. f n x)\\<close>] convergent_def"], ["proof (prove)\nusing this:\n  f ?n x \\<le> f 0 x + A powr (1 / p2)\n  bdd_above (range (\\<lambda>n. f n x)) \\<Longrightarrow>\n  (\\<lambda>n. f n x) \\<longlonglongrightarrow> (\\<Squnion>i. f i x)\n  convergent ?X = (\\<exists>L. ?X \\<longlonglongrightarrow> L)\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. f n x)", "by (metis bdd_aboveI2)"], ["proof (state)\nthis:\n  convergent (\\<lambda>n. f n x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>H ?x \\<noteq> \\<infinity>; incseq (\\<lambda>n. f n ?x)\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)\n 2. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>H ?x \\<noteq> \\<infinity>; incseq (\\<lambda>n. f n ?x)\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)", "show \"AE x in M. convergent (\\<lambda>n. f n x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>H ?x \\<noteq> \\<infinity>; incseq (\\<lambda>n. f n ?x)\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)\n\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>n. f n x)", "using \\<open>AE x in M. H x \\<noteq> \\<infinity>\\<close> \\<open>AE x in M. incseq (\\<lambda>n. f n x)\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>H ?x \\<noteq> \\<infinity>; incseq (\\<lambda>n. f n ?x)\\<rbrakk>\n  \\<Longrightarrow> convergent (\\<lambda>n. f n ?x)\n  AE x in M. H x \\<noteq> \\<infinity>\n  AE x in M. incseq (\\<lambda>n. f n x)\n\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>n. f n x)", "by auto"], ["proof (state)\nthis:\n  AE x in M. convergent (\\<lambda>n. f n x)\n\ngoal (1 subgoal):\n 1. p = 0 \\<Longrightarrow> AE x in M. convergent (\\<lambda>n. f n x)", "qed (insert \\<open>p>0\\<close>, simp)"], ["proof (state)\nthis:\n  AE x in M. convergent (\\<lambda>n. f n x)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "then"], ["proof (chain)\npicking this:\n  AE x in M. convergent (\\<lambda>n. f n x)", "have lim: \"AE x in M. (\\<lambda>n. f n x) \\<longlonglongrightarrow> lim (\\<lambda>n. f n x)\""], ["proof (prove)\nusing this:\n  AE x in M. convergent (\\<lambda>n. f n x)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x)\n               \\<longlonglongrightarrow> lim (\\<lambda>n. f n x)", "using convergent_LIMSEQ_iff"], ["proof (prove)\nusing this:\n  AE x in M. convergent (\\<lambda>n. f n x)\n  convergent ?X = ?X \\<longlonglongrightarrow> lim ?X\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. f n x)\n               \\<longlonglongrightarrow> lim (\\<lambda>n. f n x)", "by auto"], ["proof (state)\nthis:\n  AE x in M. (\\<lambda>n. f n x)\n             \\<longlonglongrightarrow> lim (\\<lambda>n. f n x)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\n 2. Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "show \"(\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)", "apply (rule Lp_AE_limit''[of _ _ f, OF _ \\<open>\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close> lim \\<open>\\<And>n. Norm (\\<LL> p M) (f n) \\<le> C\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "show \"Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C", "apply (rule Lp_AE_limit''[of _ _ f, OF _ \\<open>\\<And>n. f n \\<in> space\\<^sub>N (\\<LL> p M)\\<close> lim \\<open>\\<And>n. Norm (\\<LL> p M) (f n) \\<le> C\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) (\\<lambda>x. lim (\\<lambda>n. f n x)) \\<le> C\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Completeness of $L^p$\\<close>"], ["", "text \\<open>We prove the completeness of $L^p$.\\<close>"], ["", "theorem Lp_complete:\n  \"complete\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complete\\<^sub>N (\\<LL> p M)", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 2. p = 0 \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 3. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 2. p = 0 \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 3. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. complete\\<^sub>N (\\<LL> p M)", "proof (rule complete\\<^sub>N_I)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>cauchy_in\\<^sub>N (\\<LL> p M) u;\n        \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M) u x", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>cauchy_in\\<^sub>N (\\<LL> p M) u;\n        \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M) u x", "assume \"\\<forall>(n::nat). u n \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>cauchy_in\\<^sub>N (\\<LL> p M) u;\n        \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M) u x", "then"], ["proof (chain)\npicking this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)", "have \"tendsto_in\\<^sub>N (\\<LL> p M) u 0\""], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. tendsto_in\\<^sub>N (\\<LL> p M) u 0", "unfolding tendsto_in\\<^sub>N_def Norm_def \\<open>p = 0\\<close> L_zero(1) L_zero_space"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        enn2real\n         (if u n - 0 \\<in> borel_measurable M then 0 else \\<infinity>))\n    \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  tendsto_in\\<^sub>N (\\<LL> p M) u 0\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>cauchy_in\\<^sub>N (\\<LL> p M) u;\n        \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M) u x", "then"], ["proof (chain)\npicking this:\n  tendsto_in\\<^sub>N (\\<LL> p M) u 0", "show \"\\<exists>x\\<in>space\\<^sub>N (\\<LL> p M). tendsto_in\\<^sub>N (\\<LL> p M) u x\""], ["proof (prove)\nusing this:\n  tendsto_in\\<^sub>N (\\<LL> p M) u 0\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n       tendsto_in\\<^sub>N (\\<LL> p M) u x", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n     tendsto_in\\<^sub>N (\\<LL> p M) u x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  complete\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 2. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 2. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)\n 2. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. complete\\<^sub>N (\\<LL> p M)", "proof (rule complete\\<^sub>N_I'[of \"\\<lambda>n. (1/2)^n * (1/(defect (\\<LL> p M))^(Suc n))\"], unfold \\<open>p = ennreal p2\\<close>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "show \"0 < (1/2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)", "using defect_ge_1[of \"\\<LL> (ennreal p2) M\"]"], ["proof (prove)\nusing this:\n  1 \\<le> defect (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. 0 < (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  0 < (1 / 2) ^ ?n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc ?n)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "assume \"\\<forall>(n::nat). u n \\<in> space\\<^sub>N (\\<LL> p2 M)\" \"\\<forall>n. Norm (\\<LL> p2 M) (u n) \\<le> (1/2)^n * (1/(defect (\\<LL> p2 M))^(Suc n))\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  \\<forall>n.\n     Norm (\\<LL> (ennreal p2) M) (u n)\n     \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  \\<forall>n.\n     Norm (\\<LL> (ennreal p2) M) (u n)\n     \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)", "have H: \"\\<And>n. u n \\<in> space\\<^sub>N (\\<LL> p2 M)\"\n                 \"\\<And>n. Norm (\\<LL> p2 M) (u n) \\<le> (1/2) ^ n * (1/(defect (\\<LL> p2 M))^(Suc n))\""], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  \\<forall>n.\n     Norm (\\<LL> (ennreal p2) M) (u n)\n     \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\n\ngoal (1 subgoal):\n 1. (\\<And>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)) &&&\n    (\\<And>n.\n        Norm (\\<LL> (ennreal p2) M) (u n)\n        \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n))", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  \\<forall>n.\n     Norm (\\<LL> (ennreal p2) M) (u n)\n     \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\n\ngoal (1 subgoal):\n 1. (\\<And>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)) &&&\n    (\\<And>n.\n        Norm (\\<LL> (ennreal p2) M) (u n)\n        \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n))", "by auto"], ["proof (state)\nthis:\n  u ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  Norm (\\<LL> (ennreal p2) M) (u ?n)\n  \\<le> (1 / 2) ^ ?n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc ?n)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have [measurable]: \"u n \\<in> borel_measurable M\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n \\<in> borel_measurable M", "using Lp_measurable[OF H(1)]"], ["proof (prove)\nusing this:\n  u ?n1 \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. u n \\<in> borel_measurable M", "."], ["proof (state)\nthis:\n  u ?n \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "define w where \"w = (\\<lambda>N x. (\\<Sum>n\\<in>{..<N}. \\<bar>u n x\\<bar>))\""], ["proof (state)\nthis:\n  w = (\\<lambda>N x. \\<Sum>n<N. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have w2: \"w = (\\<lambda>N. sum (\\<lambda>n x. \\<bar>u n x\\<bar>) {..<N})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w = (\\<lambda>N. \\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>))", "unfolding w_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>N x. \\<Sum>n<N. \\<bar>u n x\\<bar>) =\n    (\\<lambda>N. \\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>))", "apply (rule ext)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>N x.\n       (\\<Sum>n<N. \\<bar>u n x\\<bar>) =\n       (\\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>)) x", "by (metis (mono_tags, lifting) sum.cong fun_sum_apply)"], ["proof (state)\nthis:\n  w = (\\<lambda>N. \\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>))\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"incseq (\\<lambda>N. w N x)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. incseq (\\<lambda>N. w N x)", "unfolding w2"], ["proof (prove)\ngoal (1 subgoal):\n 1. incseq (\\<lambda>N. (\\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>)) x)", "by (rule incseq_SucI, auto)"], ["proof (state)\nthis:\n  incseq (\\<lambda>N. w N ?x)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  incseq (\\<lambda>N. w N ?x)", "have wN_inc: \"AE x in M. incseq (\\<lambda>N. w N x)\""], ["proof (prove)\nusing this:\n  incseq (\\<lambda>N. w N ?x)\n\ngoal (1 subgoal):\n 1. AE x in M. incseq (\\<lambda>N. w N x)", "by simp"], ["proof (state)\nthis:\n  AE x in M. incseq (\\<lambda>N. w N x)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have abs_u_space: \"(\\<lambda>x. \\<bar>u n x\\<bar>) \\<in> space\\<^sub>N (\\<LL> p2 M)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>u n x\\<bar>)\n    \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by (rule Lp_Banach_lattice[OF \\<open>u n \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>])"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "have wN_space: \"w N \\<in> space\\<^sub>N (\\<LL> p2 M)\" for N"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. w N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "unfolding w2"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>))\n    \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using H(1)"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  u ?n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>))\n    \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  w ?N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have abs_u_Norm: \"Norm (\\<LL> p2 M) (\\<lambda>x. \\<bar>u n x\\<bar>) \\<le> (1/2) ^ n * (1/(defect (\\<LL> p2 M))^(Suc n))\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>)\n    \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)", "using Lp_Banach_lattice(2)[OF \\<open>u n \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>] H(2)"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>) =\n  Norm (\\<LL> (ennreal p2) M) (u n)\n  Norm (\\<LL> (ennreal p2) M) (u ?n)\n  \\<le> (1 / 2) ^ ?n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc ?n)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>)\n    \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<le> (1 / 2) ^ ?n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc ?n)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have wN_Norm: \"Norm (\\<LL> p2 M) (w N) \\<le> 2\" for N"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "have *: \"(defect (\\<LL> p2 M))^(Suc n) \\<ge> 0\" \"(defect (\\<LL> p2 M))^(Suc n) > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> defect (\\<LL> (ennreal p2) M) ^ Suc n &&&\n    0 < defect (\\<LL> (ennreal p2) M) ^ Suc n", "using defect_ge_1[of \"\\<LL> p2 M\"]"], ["proof (prove)\nusing this:\n  1 \\<le> defect (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. 0 \\<le> defect (\\<LL> (ennreal p2) M) ^ Suc n &&&\n    0 < defect (\\<LL> (ennreal p2) M) ^ Suc n", "by auto"], ["proof (state)\nthis:\n  0 \\<le> defect (\\<LL> (ennreal p2) M) ^ Suc ?n\n  0 < defect (\\<LL> (ennreal p2) M) ^ Suc ?n\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "have \"Norm (\\<LL> p2 M) (w N) \\<le> (\\<Sum>n<N. (defect (\\<LL> p2 M))^(Suc n) * Norm (\\<LL> p2 M) (\\<lambda>x. \\<bar>u n x\\<bar>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N)\n    \\<le> (\\<Sum>n<N.\n              defect (\\<LL> (ennreal p2) M) ^ Suc n *\n              Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))", "unfolding w2 lessThan_Suc_atMost[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (\\<Sum>n<N. (\\<lambda>x. \\<bar>u n x\\<bar>))\n    \\<le> (\\<Sum>n<N.\n              defect (\\<LL> (ennreal p2) M) ^ Suc n *\n              Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))", "by (rule Norm_sum, simp add: abs_u_space)"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (w N)\n  \\<le> (\\<Sum>n<N.\n            defect (\\<LL> (ennreal p2) M) ^ Suc n *\n            Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (w N)\n  \\<le> (\\<Sum>n<N.\n            defect (\\<LL> (ennreal p2) M) ^ Suc n *\n            Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "have \"... \\<le> (\\<Sum>n<N. (defect (\\<LL> p2 M))^(Suc n) * ((1/2) ^ n * (1/(defect (\\<LL> p2 M))^(Suc n))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n<N.\n        defect (\\<LL> (ennreal p2) M) ^ Suc n *\n        Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))\n    \\<le> (\\<Sum>n<N.\n              defect (\\<LL> (ennreal p2) M) ^ Suc n *\n              ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)))", "apply (rule sum_mono, rule mult_left_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {..<N} \\<Longrightarrow>\n       Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>)\n       \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\n 2. \\<And>n.\n       n \\<in> {..<N} \\<Longrightarrow>\n       0 \\<le> defect (\\<LL> (ennreal p2) M) ^ Suc n", "using abs_u_Norm *"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u ?n x\\<bar>)\n  \\<le> (1 / 2) ^ ?n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc ?n)\n  0 \\<le> defect (\\<LL> (ennreal p2) M) ^ Suc ?n\n  0 < defect (\\<LL> (ennreal p2) M) ^ Suc ?n\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {..<N} \\<Longrightarrow>\n       Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>)\n       \\<le> (1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\n 2. \\<And>n.\n       n \\<in> {..<N} \\<Longrightarrow>\n       0 \\<le> defect (\\<LL> (ennreal p2) M) ^ Suc n", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n<N.\n      defect (\\<LL> (ennreal p2) M) ^ Suc n *\n      Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))\n  \\<le> (\\<Sum>n<N.\n            defect (\\<LL> (ennreal p2) M) ^ Suc n *\n            ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "also"], ["proof (state)\nthis:\n  (\\<Sum>n<N.\n      defect (\\<LL> (ennreal p2) M) ^ Suc n *\n      Norm (\\<LL> (ennreal p2) M) (\\<lambda>x. \\<bar>u n x\\<bar>))\n  \\<le> (\\<Sum>n<N.\n            defect (\\<LL> (ennreal p2) M) ^ Suc n *\n            ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "have \"... = (\\<Sum>n<N. (1/2) ^ n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n<N.\n        defect (\\<LL> (ennreal p2) M) ^ Suc n *\n        ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n))) =\n    sum ((^) (1 / 2)) {..<N}", "using *(2) defect_ge_1[of \"\\<LL> p2 M\"]"], ["proof (prove)\nusing this:\n  0 < defect (\\<LL> (ennreal p2) M) ^ Suc ?n\n  1 \\<le> defect (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>n<N.\n        defect (\\<LL> (ennreal p2) M) ^ Suc n *\n        ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n))) =\n    sum ((^) (1 / 2)) {..<N}", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>n<N.\n      defect (\\<LL> (ennreal p2) M) ^ Suc n *\n      ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n))) =\n  sum ((^) (1 / 2)) {..<N}\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "also"], ["proof (state)\nthis:\n  (\\<Sum>n<N.\n      defect (\\<LL> (ennreal p2) M) ^ Suc n *\n      ((1 / 2) ^ n * (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n))) =\n  sum ((^) (1 / 2)) {..<N}\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "have \"... \\<le> (\\<Sum>n. (1/2) ^ n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum ((^) (1 / 2)) {..<N} \\<le> (\\<Sum>n. (1 / 2) ^ n)", "unfolding lessThan_Suc_atMost[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum ((^) (1 / 2)) {..<N} \\<le> (\\<Sum>n. (1 / 2) ^ n)", "by (rule sum_le_suminf, rule summable_geometric[of \"1/2\"], auto)"], ["proof (state)\nthis:\n  sum ((^) (1 / 2)) {..<N} \\<le> (\\<Sum>n. (1 / 2) ^ n)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "also"], ["proof (state)\nthis:\n  sum ((^) (1 / 2)) {..<N} \\<le> (\\<Sum>n. (1 / 2) ^ n)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "have \"... = 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n. (1 / 2) ^ n) = 2", "using suminf_geometric[of \"1/2\"]"], ["proof (prove)\nusing this:\n  norm ((1::?'b1) / (2::?'b1)) < 1 \\<Longrightarrow>\n  (\\<Sum>n. ((1::?'b1) / (2::?'b1)) ^ n) =\n  (1::?'b1) / ((1::?'b1) - (1::?'b1) / (2::?'b1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>n. (1 / 2) ^ n) = 2", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n. (1 / 2) ^ n) = 2\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) (w ?N) \\<le> 2\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"AE x in M. convergent (\\<lambda>N. w N x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. convergent (\\<lambda>N. w N x)", "apply (rule Lp_monotone_limit[OF \\<open>p > 0\\<close>, of _ _ 2], unfold \\<open>p = ennreal p2\\<close>)"], ["proof (prove)\ngoal (3 subgoals):\n 1. AE x in M. incseq (\\<lambda>N. w N x)\n 2. \\<And>N. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2\n 3. \\<And>N. w N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using wN_inc wN_Norm wN_space"], ["proof (prove)\nusing this:\n  AE x in M. incseq (\\<lambda>N. w N x)\n  Norm (\\<LL> (ennreal p2) M) (w ?N) \\<le> 2\n  w ?N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (3 subgoals):\n 1. AE x in M. incseq (\\<lambda>N. w N x)\n 2. \\<And>N. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2\n 3. \\<And>N. w N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  AE x in M. convergent (\\<lambda>N. w N x)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "define m where \"m = (\\<lambda>x. lim (\\<lambda>N. w N x))\""], ["proof (state)\nthis:\n  m = (\\<lambda>x. lim (\\<lambda>N. w N x))\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have m_space: \"m \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "unfolding m_def \\<open>p = ennreal p2\\<close>[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. lim (\\<lambda>N. w N x)) \\<in> space\\<^sub>N (\\<LL> p M)", "apply (rule Lp_monotone_limit[OF \\<open>p > 0\\<close>, of _ _ 2], unfold \\<open>p = ennreal p2\\<close>)"], ["proof (prove)\ngoal (3 subgoals):\n 1. AE x in M. incseq (\\<lambda>N. w N x)\n 2. \\<And>N. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2\n 3. \\<And>N. w N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using wN_inc wN_Norm wN_space"], ["proof (prove)\nusing this:\n  AE x in M. incseq (\\<lambda>N. w N x)\n  Norm (\\<LL> (ennreal p2) M) (w ?N) \\<le> 2\n  w ?N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (3 subgoals):\n 1. AE x in M. incseq (\\<lambda>N. w N x)\n 2. \\<And>N. Norm (\\<LL> (ennreal p2) M) (w N) \\<le> 2\n 3. \\<And>N. w N \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  m \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "define v where \"v = (\\<lambda>x. (\\<Sum>n. u n x))\""], ["proof (state)\nthis:\n  v = (\\<lambda>x. \\<Sum>n. u n x)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have v_meas: \"v \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> borel_measurable M", "unfolding v_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>n. u n x) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  v \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have u_meas: \"\\<And>n. (sum u {0..<n}) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. sum u {0..<n} \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  sum u {0..<?n} \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "{"], ["proof (state)\nthis:\n  sum u {0..<?n} \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "assume \"convergent (\\<lambda>N. w N x)\""], ["proof (state)\nthis:\n  convergent (\\<lambda>N. w N x)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  convergent (\\<lambda>N. w N x)", "have S: \"summable (\\<lambda>n. \\<bar>u n x\\<bar>)\""], ["proof (prove)\nusing this:\n  convergent (\\<lambda>N. w N x)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. \\<bar>u n x\\<bar>)", "unfolding w_def"], ["proof (prove)\nusing this:\n  convergent (\\<lambda>N. \\<Sum>n<N. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. \\<bar>u n x\\<bar>)", "using summable_iff_convergent"], ["proof (prove)\nusing this:\n  convergent (\\<lambda>N. \\<Sum>n<N. \\<bar>u n x\\<bar>)\n  summable ?f = convergent (\\<lambda>n. sum ?f {..<n})\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. \\<bar>u n x\\<bar>)", "by auto"], ["proof (state)\nthis:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)", "have \"m x = (\\<Sum>n. \\<bar>u n x\\<bar>)\""], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. m x = (\\<Sum>n. \\<bar>u n x\\<bar>)", "unfolding m_def w_def"], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. lim (\\<lambda>N. \\<Sum>n<N. \\<bar>u n x\\<bar>) =\n    (\\<Sum>n. \\<bar>u n x\\<bar>)", "by (metis suminf_eq_lim)"], ["proof (state)\nthis:\n  m x = (\\<Sum>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"summable (\\<lambda>n. u n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. u n x)", "using S"], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. u n x)", "by (rule summable_rabs_cancel)"], ["proof (state)\nthis:\n  summable (\\<lambda>n. u n x)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  summable (\\<lambda>n. u n x)", "have *: \"(\\<lambda>n. (sum u {..<n}) x) \\<longlonglongrightarrow> v x\""], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. u n x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. sum u {..<n} x) \\<longlonglongrightarrow> v x", "unfolding v_def fun_sum_apply"], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. u n x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>i<n. u i x)\n    \\<longlonglongrightarrow> (\\<Sum>n. u n x)", "by (metis convergent_LIMSEQ_iff suminf_eq_lim summable_iff_convergent)"], ["proof (state)\nthis:\n  (\\<lambda>n. sum u {..<n} x) \\<longlonglongrightarrow> v x\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"\\<bar>(sum u {..<n}) x\\<bar> \\<le> m x\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "have \"\\<bar>(sum u {..<n}) x\\<bar> \\<le> (\\<Sum>i\\<in>{..<n}. \\<bar>u i x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> (\\<Sum>i<n. \\<bar>u i x\\<bar>)", "unfolding fun_sum_apply"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>i<n. u i x\\<bar> \\<le> (\\<Sum>i<n. \\<bar>u i x\\<bar>)", "by auto"], ["proof (state)\nthis:\n  \\<bar>sum u {..<n} x\\<bar> \\<le> (\\<Sum>i<n. \\<bar>u i x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "also"], ["proof (state)\nthis:\n  \\<bar>sum u {..<n} x\\<bar> \\<le> (\\<Sum>i<n. \\<bar>u i x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "have \"... \\<le> (\\<Sum>i. \\<bar>u i x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<n. \\<bar>u i x\\<bar>) \\<le> (\\<Sum>i. \\<bar>u i x\\<bar>)", "apply (rule sum_le_suminf)"], ["proof (prove)\ngoal (3 subgoals):\n 1. summable (\\<lambda>i. \\<bar>u i x\\<bar>)\n 2. finite {..<n}\n 3. \\<And>na. na \\<in> - {..<n} \\<Longrightarrow> 0 \\<le> \\<bar>u na x\\<bar>", "using S"], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (3 subgoals):\n 1. summable (\\<lambda>i. \\<bar>u i x\\<bar>)\n 2. finite {..<n}\n 3. \\<And>na. na \\<in> - {..<n} \\<Longrightarrow> 0 \\<le> \\<bar>u na x\\<bar>", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i<n. \\<bar>u i x\\<bar>) \\<le> (\\<Sum>i. \\<bar>u i x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum u {..<n} x\\<bar> \\<le> (\\<Sum>i. \\<bar>u i x\\<bar>)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>sum u {..<n} x\\<bar> \\<le> (\\<Sum>i. \\<bar>u i x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "using \\<open>m x = (\\<Sum>n. \\<bar>u n x\\<bar>)\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>sum u {..<n} x\\<bar> \\<le> (\\<Sum>i. \\<bar>u i x\\<bar>)\n  m x = (\\<Sum>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum u {..<n} x\\<bar> \\<le> m x", "by simp"], ["proof (state)\nthis:\n  \\<bar>sum u {..<n} x\\<bar> \\<le> m x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>sum u {..<?n} x\\<bar> \\<le> m x\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  \\<bar>sum u {..<?n} x\\<bar> \\<le> m x", "have \"(\\<forall>n. \\<bar>(sum u {0..<n}) x\\<bar> \\<le> m x) \\<and> (\\<lambda>n. (sum u {0..<n}) x) \\<longlonglongrightarrow> v x\""], ["proof (prove)\nusing this:\n  \\<bar>sum u {..<?n} x\\<bar> \\<le> m x\n\ngoal (1 subgoal):\n 1. (\\<forall>n. \\<bar>sum u {0..<n} x\\<bar> \\<le> m x) \\<and>\n    (\\<lambda>n. sum u {0..<n} x) \\<longlonglongrightarrow> v x", "unfolding atLeast0LessThan"], ["proof (prove)\nusing this:\n  \\<bar>sum u {..<?n} x\\<bar> \\<le> m x\n\ngoal (1 subgoal):\n 1. (\\<forall>n. \\<bar>sum u {..<n} x\\<bar> \\<le> m x) \\<and>\n    (\\<lambda>n. sum u {..<n} x) \\<longlonglongrightarrow> v x", "using *"], ["proof (prove)\nusing this:\n  \\<bar>sum u {..<?n} x\\<bar> \\<le> m x\n  (\\<lambda>n. sum u {..<n} x) \\<longlonglongrightarrow> v x\n\ngoal (1 subgoal):\n 1. (\\<forall>n. \\<bar>sum u {..<n} x\\<bar> \\<le> m x) \\<and>\n    (\\<lambda>n. sum u {..<n} x) \\<longlonglongrightarrow> v x", "by auto"], ["proof (state)\nthis:\n  (\\<forall>n. \\<bar>sum u {0..<n} x\\<bar> \\<le> m x) \\<and>\n  (\\<lambda>n. sum u {0..<n} x) \\<longlonglongrightarrow> v x\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "}"], ["proof (state)\nthis:\n  convergent (\\<lambda>N. w N ?x2) \\<Longrightarrow>\n  (\\<forall>n. \\<bar>sum u {0..<n} ?x2\\<bar> \\<le> m ?x2) \\<and>\n  (\\<lambda>n. sum u {0..<n} ?x2) \\<longlonglongrightarrow> v ?x2\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  convergent (\\<lambda>N. w N ?x2) \\<Longrightarrow>\n  (\\<forall>n. \\<bar>sum u {0..<n} ?x2\\<bar> \\<le> m ?x2) \\<and>\n  (\\<lambda>n. sum u {0..<n} ?x2) \\<longlonglongrightarrow> v ?x2", "have m_bound: \"\\<And>n. AE x in M. \\<bar>(sum u {0..<n}) x\\<bar> \\<le> m x\"\n          and u_conv: \"AE x in M. (\\<lambda>n. (sum u {0..<n}) x) \\<longlonglongrightarrow> v x\""], ["proof (prove)\nusing this:\n  convergent (\\<lambda>N. w N ?x2) \\<Longrightarrow>\n  (\\<forall>n. \\<bar>sum u {0..<n} ?x2\\<bar> \\<le> m ?x2) \\<and>\n  (\\<lambda>n. sum u {0..<n} ?x2) \\<longlonglongrightarrow> v ?x2\n\ngoal (1 subgoal):\n 1. (\\<And>n. AE x in M. \\<bar>sum u {0..<n} x\\<bar> \\<le> m x) &&&\n    AE x in M. (\\<lambda>n. sum u {0..<n} x) \\<longlonglongrightarrow> v x", "using \\<open>AE x in M. convergent (\\<lambda>N. w N x)\\<close>"], ["proof (prove)\nusing this:\n  convergent (\\<lambda>N. w N ?x2) \\<Longrightarrow>\n  (\\<forall>n. \\<bar>sum u {0..<n} ?x2\\<bar> \\<le> m ?x2) \\<and>\n  (\\<lambda>n. sum u {0..<n} ?x2) \\<longlonglongrightarrow> v ?x2\n  AE x in M. convergent (\\<lambda>N. w N x)\n\ngoal (1 subgoal):\n 1. (\\<And>n. AE x in M. \\<bar>sum u {0..<n} x\\<bar> \\<le> m x) &&&\n    AE x in M. (\\<lambda>n. sum u {0..<n} x) \\<longlonglongrightarrow> v x", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>sum u {0..<?n} x\\<bar> \\<le> m x\n  AE x in M. (\\<lambda>n. sum u {0..<n} x) \\<longlonglongrightarrow> v x\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"tendsto_in\\<^sub>N (\\<LL> p2 M) (\\<lambda>n. sum u {0..<n}) v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n}) v", "by (rule Lp_domination_limit[OF v_meas u_meas m_space u_conv m_bound])"], ["proof (state)\nthis:\n  tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n}) v\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "moreover"], ["proof (state)\nthis:\n  tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n}) v\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"v \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by (rule Lp_domination_limit[OF v_meas u_meas m_space u_conv m_bound])"], ["proof (state)\nthis:\n  v \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n        \\<forall>n.\n           Norm (\\<LL> (ennreal p2) M) (u n)\n           \\<le> (1 / 2) ^ n *\n                 (1 / defect (\\<LL> (ennreal p2) M) ^ Suc n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N\n   (\\<LL> (ennreal p2) M).\n                            tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M)\n                             (\\<lambda>n. sum u {0..<n}) x", "ultimately"], ["proof (chain)\npicking this:\n  tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n}) v\n  v \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "show \"\\<exists>v \\<in> space\\<^sub>N (\\<LL> p2 M). tendsto_in\\<^sub>N (\\<LL> p2 M) (\\<lambda>n. sum u {0..<n}) v\""], ["proof (prove)\nusing this:\n  tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n}) v\n  v \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>space\\<^sub>N (\\<LL> (ennreal p2) M).\n       tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n})\n        v", "by auto"], ["proof (state)\nthis:\n  \\<exists>v\\<in>space\\<^sub>N (\\<LL> (ennreal p2) M).\n     tendsto_in\\<^sub>N (\\<LL> (ennreal p2) M) (\\<lambda>n. sum u {0..<n}) v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  complete\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. p = \\<infinity> \\<Longrightarrow> complete\\<^sub>N (\\<LL> p M)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. complete\\<^sub>N (\\<LL> p M)", "proof (rule complete\\<^sub>N_I'[of \"\\<lambda>n. (1/2)^n\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "fix u"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "assume \"\\<forall>(n::nat). u n \\<in> space\\<^sub>N (\\<LL> p M)\" \"\\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1/2) ^ n\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\n  \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\n  \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n", "have H: \"\\<And>n. u n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\" \"\\<And>n. Norm (\\<LL> \\<infinity> M) (u n) \\<le> (1/2) ^ n\""], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\n  \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\n\ngoal (1 subgoal):\n 1. (\\<And>n. u n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)) &&&\n    (\\<And>n. Norm (\\<LL> \\<infinity> M) (u n) \\<le> (1 / 2) ^ n)", "using PInf"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M)\n  \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>n. u n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)) &&&\n    (\\<And>n. Norm (\\<LL> \\<infinity> M) (u n) \\<le> (1 / 2) ^ n)", "by auto"], ["proof (state)\nthis:\n  u ?n \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) (u ?n) \\<le> (1 / 2) ^ ?n\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have [measurable]: \"u n \\<in> borel_measurable M\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n \\<in> borel_measurable M", "using Lp_measurable[OF H(1)]"], ["proof (prove)\nusing this:\n  u ?n1 \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. u n \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  u ?n \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "define v where \"v = (\\<lambda>x. \\<Sum>n. u n x)\""], ["proof (state)\nthis:\n  v = (\\<lambda>x. \\<Sum>n. u n x)\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have [measurable]: \"v \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> borel_measurable M", "unfolding v_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>n. u n x) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  v \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "define w where \"w = (\\<lambda>N x. (\\<Sum>n\\<in>{0..<N}. u n x))\""], ["proof (state)\nthis:\n  w = (\\<lambda>N x. \\<Sum>n = 0..<N. u n x)\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have [measurable]: \"w N \\<in> borel_measurable M\" for N"], ["proof (prove)\ngoal (1 subgoal):\n 1. w N \\<in> borel_measurable M", "unfolding w_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>n = 0..<N. u n x) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  w ?N \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"AE x in M. \\<bar>u n x\\<bar> \\<le> (1/2)^n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n", "using L_infinity_AE_bound[OF H(1), of n] H(2)[of n]"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>u n x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) (u n)\n  Norm (\\<LL> \\<infinity> M) (u n) \\<le> (1 / 2) ^ n\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>u ?n x\\<bar> \\<le> (1 / 2) ^ ?n\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>u ?n x\\<bar> \\<le> (1 / 2) ^ ?n", "have \"AE x in M. \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1/2)^n\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>u ?n x\\<bar> \\<le> (1 / 2) ^ ?n\n\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n", "by (subst AE_all_countable, auto)"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "moreover"], ["proof (state)\nthis:\n  AE x in M. \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"\\<bar>w N x - v x\\<bar> \\<le> (1/2)^N * 2\" if \"\\<forall>n. \\<bar>u n x\\<bar> \\<le> (1/2)^n\" for N x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have *: \"\\<And>n. \\<bar>u n x\\<bar> \\<le> (1/2)^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n", "using that"], ["proof (prove)\nusing this:\n  \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n\n\ngoal (1 subgoal):\n 1. \\<And>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n", "by auto"], ["proof (state)\nthis:\n  \\<bar>u ?n x\\<bar> \\<le> (1 / 2) ^ ?n\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have **: \"summable (\\<lambda>n. \\<bar>u n x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. \\<bar>u n x\\<bar>)", "apply (rule summable_norm_cancel, rule summable_comparison_test'[OF summable_geometric[of \"1/2\"]])"], ["proof (prove)\ngoal (2 subgoals):\n 1. norm (1 / 2) < 1\n 2. \\<And>n.\n       ?N2 \\<le> n \\<Longrightarrow>\n       norm (norm \\<bar>u n x\\<bar>) \\<le> (1 / 2) ^ n", "using *"], ["proof (prove)\nusing this:\n  \\<bar>u ?n x\\<bar> \\<le> (1 / 2) ^ ?n\n\ngoal (2 subgoals):\n 1. norm (1 / 2) < 1\n 2. \\<And>n.\n       ?N2 \\<le> n \\<Longrightarrow>\n       norm (norm \\<bar>u n x\\<bar>) \\<le> (1 / 2) ^ n", "by auto"], ["proof (state)\nthis:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have \"\\<bar>w N x - v x\\<bar> = \\<bar>(\\<Sum>n. u (n + N) x)\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> = \\<bar>\\<Sum>n. u (n + N) x\\<bar>", "unfolding v_def w_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>n = 0..<N. u n x) - (\\<Sum>n. u n x)\\<bar> =\n    \\<bar>\\<Sum>n. u (n + N) x\\<bar>", "apply (subst suminf_split_initial_segment[OF summable_rabs_cancel[OF \\<open>summable (\\<lambda>n. \\<bar>u n x\\<bar>)\\<close>], of \"N\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>n = 0..<N. u n x) -\n          ((\\<Sum>n. u (n + N) x) + (\\<Sum>i<N. u i x))\\<bar> =\n    \\<bar>\\<Sum>n. u (n + N) x\\<bar>", "by (simp add: lessThan_atLeast0)"], ["proof (state)\nthis:\n  \\<bar>w N x - v x\\<bar> = \\<bar>\\<Sum>n. u (n + N) x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "also"], ["proof (state)\nthis:\n  \\<bar>w N x - v x\\<bar> = \\<bar>\\<Sum>n. u (n + N) x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have \"... \\<le> (\\<Sum>n. \\<bar>u (n + N) x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>n. u (n + N) x\\<bar>\n    \\<le> (\\<Sum>n. \\<bar>u (n + N) x\\<bar>)", "apply (rule summable_rabs, subst summable_iff_shift)"], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>a. \\<bar>u a x\\<bar>)", "using **"], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>a. \\<bar>u a x\\<bar>)", "by auto"], ["proof (state)\nthis:\n  \\<bar>\\<Sum>n. u (n + N) x\\<bar> \\<le> (\\<Sum>n. \\<bar>u (n + N) x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "also"], ["proof (state)\nthis:\n  \\<bar>\\<Sum>n. u (n + N) x\\<bar> \\<le> (\\<Sum>n. \\<bar>u (n + N) x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have \"... \\<le> (\\<Sum>n. (1/2)^(n + N))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n. \\<bar>u (n + N) x\\<bar>) \\<le> (\\<Sum>n. (1 / 2) ^ (n + N))", "proof (rule suminf_le)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>n. \\<bar>u (n + N) x\\<bar> \\<le> (1 / 2) ^ (n + N)\n 2. summable (\\<lambda>n. \\<bar>u (n + N) x\\<bar>)\n 3. summable (\\<lambda>n. (1 / 2) ^ (n + N))", "show \"\\<And>n. \\<bar>u (n + N) x\\<bar> \\<le> (1/2) ^ (n + N)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. \\<bar>u (n + N) x\\<bar> \\<le> (1 / 2) ^ (n + N)", "using *[of \"_ + N\"]"], ["proof (prove)\nusing this:\n  \\<bar>u (?uu3 + N) x\\<bar> \\<le> (1 / 2) ^ (?uu3 + N)\n\ngoal (1 subgoal):\n 1. \\<And>n. \\<bar>u (n + N) x\\<bar> \\<le> (1 / 2) ^ (n + N)", "by simp"], ["proof (state)\nthis:\n  \\<bar>u (?n + N) x\\<bar> \\<le> (1 / 2) ^ (?n + N)\n\ngoal (2 subgoals):\n 1. summable (\\<lambda>n. \\<bar>u (n + N) x\\<bar>)\n 2. summable (\\<lambda>n. (1 / 2) ^ (n + N))", "show \"summable (\\<lambda>n. \\<bar>u (n + N) x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. \\<bar>u (n + N) x\\<bar>)", "using **"], ["proof (prove)\nusing this:\n  summable (\\<lambda>n. \\<bar>u n x\\<bar>)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. \\<bar>u (n + N) x\\<bar>)", "by (subst summable_iff_shift) simp"], ["proof (state)\nthis:\n  summable (\\<lambda>n. \\<bar>u (n + N) x\\<bar>)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. (1 / 2) ^ (n + N))", "show \"summable (\\<lambda>n. (1/2::real) ^ (n + N))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. (1 / 2) ^ (n + N))", "using summable_geometric [of \"1/2\"]"], ["proof (prove)\nusing this:\n  norm ((1::?'b1) / (2::?'b1)) < 1 \\<Longrightarrow>\n  summable ((^) ((1::?'b1) / (2::?'b1)))\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. (1 / 2) ^ (n + N))", "by (subst summable_iff_shift) simp"], ["proof (state)\nthis:\n  summable (\\<lambda>n. (1 / 2) ^ (n + N))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>n. \\<bar>u (n + N) x\\<bar>) \\<le> (\\<Sum>n. (1 / 2) ^ (n + N))\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "also"], ["proof (state)\nthis:\n  (\\<Sum>n. \\<bar>u (n + N) x\\<bar>) \\<le> (\\<Sum>n. (1 / 2) ^ (n + N))\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have \"... = (1/2)^N * (\\<Sum>n. (1/2)^n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n. (1 / 2) ^ (n + N)) = (1 / 2) ^ N * (\\<Sum>n. (1 / 2) ^ n)", "by (subst power_add, subst suminf_mult2[symmetric], auto simp add: summable_geometric[of \"1/2\"])"], ["proof (state)\nthis:\n  (\\<Sum>n. (1 / 2) ^ (n + N)) = (1 / 2) ^ N * (\\<Sum>n. (1 / 2) ^ n)\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "also"], ["proof (state)\nthis:\n  (\\<Sum>n. (1 / 2) ^ (n + N)) = (1 / 2) ^ N * (\\<Sum>n. (1 / 2) ^ n)\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "have \"... = (1/2)^N * 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 / 2) ^ N * (\\<Sum>n. (1 / 2) ^ n) = (1 / 2) ^ N * 2", "by (subst suminf_geometric, auto)"], ["proof (state)\nthis:\n  (1 / 2) ^ N * (\\<Sum>n. (1 / 2) ^ n) = (1 / 2) ^ N * 2\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "finally"], ["proof (chain)\npicking this:\n  \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2\n\ngoal (1 subgoal):\n 1. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "by simp"], ["proof (state)\nthis:\n  \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>n. \\<bar>u n ?x\\<bar> \\<le> (1 / 2) ^ n \\<Longrightarrow>\n  \\<bar>w ?N ?x - v ?x\\<bar> \\<le> (1 / 2) ^ ?N * 2\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n\n  \\<forall>n. \\<bar>u n ?x\\<bar> \\<le> (1 / 2) ^ n \\<Longrightarrow>\n  \\<bar>w ?N ?x - v ?x\\<bar> \\<le> (1 / 2) ^ ?N * 2", "have *: \"AE x in M. \\<bar>w N x - v x\\<bar> \\<le> (1/2)^N * 2\" for N"], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>n. \\<bar>u n x\\<bar> \\<le> (1 / 2) ^ n\n  \\<forall>n. \\<bar>u n ?x\\<bar> \\<le> (1 / 2) ^ n \\<Longrightarrow>\n  \\<bar>w ?N ?x - v ?x\\<bar> \\<le> (1 / 2) ^ ?N * 2\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>w N x - v x\\<bar> \\<le> (1 / 2) ^ N * 2", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>w ?N x - v x\\<bar> \\<le> (1 / 2) ^ ?N * 2\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have **: \"w N - v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\" \"Norm (\\<LL> \\<infinity> M) (w N - v) \\<le> (1/2)^N * 2\" for N"], ["proof (prove)\ngoal (1 subgoal):\n 1. w N - v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) (w N - v) \\<le> (1 / 2) ^ N * 2", "unfolding fun_diff_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. w N x - v x) \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) (\\<lambda>x. w N x - v x)\n    \\<le> (1 / 2) ^ N * 2", "using L_infinity_I[OF _ *]"], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<lambda>x. w ?N2 x - v x) \\<in> borel_measurable M;\n   0 \\<le> (1 / 2) ^ ?N2 * 2\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. w ?N2 x - v x)\n                    \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  \\<lbrakk>(\\<lambda>x. w ?N2 x - v x) \\<in> borel_measurable M;\n   0 \\<le> (1 / 2) ^ ?N2 * 2\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> \\<infinity> M) (\\<lambda>x. w ?N2 x - v x)\n                    \\<le> (1 / 2) ^ ?N2 * 2\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. w N x - v x) \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) (\\<lambda>x. w N x - v x)\n    \\<le> (1 / 2) ^ N * 2", "by auto"], ["proof (state)\nthis:\n  w ?N - v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) (w ?N - v) \\<le> (1 / 2) ^ ?N * 2\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have l: \"(\\<lambda>N. ((1/2)^N) * (2::real)) \\<longlonglongrightarrow> 0 * 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>N. (1 / 2) ^ N * 2) \\<longlonglongrightarrow> 0 * 2", "by (rule tendsto_mult, auto simp add: LIMSEQ_realpow_zero[of \"1/2\"])"], ["proof (state)\nthis:\n  (\\<lambda>N. (1 / 2) ^ N * 2) \\<longlonglongrightarrow> 0 * 2\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) w v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) w v", "unfolding tendsto_in\\<^sub>N_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Norm (\\<LL> \\<infinity> M) (w n - v))\n    \\<longlonglongrightarrow> 0", "apply (rule tendsto_sandwich[of \"\\<lambda>_. 0\" _ _ \"\\<lambda>n. (1/2)^n * 2\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> Norm (\\<LL> \\<infinity> M) (w n - v)\n 2. \\<forall>\\<^sub>F n in sequentially.\n       Norm (\\<LL> \\<infinity> M) (w n - v) \\<le> (1 / 2) ^ n * 2\n 3. (\\<lambda>_. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. (1 / 2) ^ n * 2) \\<longlonglongrightarrow> 0", "using l **(2)"], ["proof (prove)\nusing this:\n  (\\<lambda>N. (1 / 2) ^ N * 2) \\<longlonglongrightarrow> 0 * 2\n  Norm (\\<LL> \\<infinity> M) (w ?N - v) \\<le> (1 / 2) ^ ?N * 2\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> Norm (\\<LL> \\<infinity> M) (w n - v)\n 2. \\<forall>\\<^sub>F n in sequentially.\n       Norm (\\<LL> \\<infinity> M) (w n - v) \\<le> (1 / 2) ^ n * 2\n 3. (\\<lambda>_. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. (1 / 2) ^ n * 2) \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) w v\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "have \"v = - (w 0 - v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v = - (w 0 - v)", "unfolding w_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. v = - ((\\<lambda>x. \\<Sum>n = 0..<0. u n x) - v)", "by auto"], ["proof (state)\nthis:\n  v = - (w 0 - v)\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  v = - (w 0 - v)", "have \"v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (prove)\nusing this:\n  v = - (w 0 - v)\n\ngoal (1 subgoal):\n 1. v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "using **(1)[of 0] spaceN_add spaceN_diff"], ["proof (prove)\nusing this:\n  v = - (w 0 - v)\n  w 0 - v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  \\<lbrakk>?x \\<in> space\\<^sub>N ?N; ?y \\<in> space\\<^sub>N ?N\\<rbrakk>\n  \\<Longrightarrow> ?x + ?y \\<in> space\\<^sub>N ?N\n  \\<lbrakk>?x \\<in> space\\<^sub>N ?N; ?y \\<in> space\\<^sub>N ?N\\<rbrakk>\n  \\<Longrightarrow> ?x - ?y \\<in> space\\<^sub>N ?N\n\ngoal (1 subgoal):\n 1. v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "by fastforce"], ["proof (state)\nthis:\n  v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (2 subgoals):\n 1. \\<And>n. 0 < (1 / 2) ^ n\n 2. \\<And>u.\n       \\<lbrakk>\\<forall>n. u n \\<in> space\\<^sub>N (\\<LL> p M);\n        \\<forall>n. Norm (\\<LL> p M) (u n) \\<le> (1 / 2) ^ n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>space\\<^sub>N (\\<LL> p M).\n                            tendsto_in\\<^sub>N (\\<LL> p M)\n                             (\\<lambda>n. sum u {0..<n}) x", "then"], ["proof (chain)\npicking this:\n  v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "show \"\\<exists>v \\<in> space\\<^sub>N (\\<LL> p M). tendsto_in\\<^sub>N (\\<LL> p M) (\\<lambda>n. sum u {0..<n}) v\""], ["proof (prove)\nusing this:\n  v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>space\\<^sub>N (\\<LL> p M).\n       tendsto_in\\<^sub>N (\\<LL> p M) (\\<lambda>n. sum u {0..<n}) v", "using \\<open>tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) w v\\<close>"], ["proof (prove)\nusing this:\n  v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) w v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>space\\<^sub>N (\\<LL> p M).\n       tendsto_in\\<^sub>N (\\<LL> p M) (\\<lambda>n. sum u {0..<n}) v", "unfolding \\<open>p = \\<infinity>\\<close> w_def fun_sum_apply[symmetric]"], ["proof (prove)\nusing this:\n  v \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) (\\<lambda>N. sum u {0..<N}) v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>space\\<^sub>N (\\<LL> \\<infinity> M).\n       tendsto_in\\<^sub>N (\\<LL> \\<infinity> M) (\\<lambda>n. sum u {0..<n})\n        v", "by auto"], ["proof (state)\nthis:\n  \\<exists>v\\<in>space\\<^sub>N (\\<LL> p M).\n     tendsto_in\\<^sub>N (\\<LL> p M) (\\<lambda>n. sum u {0..<n}) v\n\ngoal (1 subgoal):\n 1. \\<And>n. 0 < (1 / 2) ^ n", "qed (simp)"], ["proof (state)\nthis:\n  complete\\<^sub>N (\\<LL> p M)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Multiplication of functions, duality\\<close>"], ["", "text \\<open>The next theorem asserts that the multiplication of two functions in $L^p$ and $L^q$ belongs to\n$L^r$, where $r$ is determined by the equality $1/r = 1/p + 1/q$. This is essentially a case by case\nanalysis, depending on the kind of $L^p$ space we are considering. The only nontrivial case is\nwhen $p$, $q$ (and $r$) are finite and nonzero. In this case, it reduces to H\\\"older inequality.\\<close>"], ["", "theorem Lp_Lq_mult:\n  fixes p q r::ennreal\n  assumes \"1/p + 1/q = 1/r\"\n      and \"f \\<in> space\\<^sub>N (\\<LL> p M)\" \"g \\<in> space\\<^sub>N (\\<LL> q M)\"\n  shows \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\"\n        \"Norm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) &&&\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n 2. Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M &&& g \\<in> borel_measurable M", "using Lp_measurable assms"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n  1 / p + 1 / q = 1 / r\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M &&& g \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n 2. Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and> Norm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "proof (cases rule: Lp_cases[of r])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = 0 \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "case zero"], ["proof (state)\nthis:\n  r = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = 0 \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have *: \"(\\<lambda>x. f x * g x) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = 0 \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M", "have \"Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "using L_zero[of M]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M\n  eNorm (\\<LL> 0 M) ?f =\n  (if ?f \\<in> borel_measurable M then 0 else \\<infinity>)\n  defect (\\<LL> 0 M) = 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "unfolding Norm_def zero"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M\n  eNorm (\\<LL> 0 M) ?f =\n  (if ?f \\<in> borel_measurable M then 0 else \\<infinity>)\n  defect (\\<LL> 0 M) = 1\n\ngoal (1 subgoal):\n 1. enn2real (eNorm (\\<LL> 0 M) (\\<lambda>x. f x * g x)) = 0", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = 0 \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "have \"Norm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Norm_nonneg"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n  0 \\<le> Norm ?N ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = 0 \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding zero"], ["proof (prove)\nusing this:\n  Norm (\\<LL> 0 M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 0 M) \\<and>\n    Norm (\\<LL> 0 M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using * L_zero_space[of M]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> 0 M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M\n  space\\<^sub>N (\\<LL> 0 M) = borel_measurable M\n  zero_space\\<^sub>N (\\<LL> 0 M) = borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 0 M) \\<and>\n    Norm (\\<LL> 0 M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "case (real_pos r2)"], ["proof (state)\nthis:\n  r = ennreal r2\n  0 < r2\n  0 < r\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"p > 0\" \"q > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < p &&& 0 < q", "using \\<open>1/p + 1/q = 1/r\\<close> \\<open>r > 0\\<close>"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1 / r\n  0 < r\n\ngoal (1 subgoal):\n 1. 0 < p &&& 0 < q", "by (metis ennreal_add_eq_top ennreal_divide_eq_top_iff ennreal_top_neq_one gr_zeroI zero_neq_one)+"], ["proof (state)\nthis:\n  0 < p\n  0 < q\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "consider \"p = \\<infinity>\" | \"q = \\<infinity>\" | \"p < \\<infinity> \\<and> q < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = \\<infinity> \\<Longrightarrow> thesis;\n     q = \\<infinity> \\<Longrightarrow> thesis;\n     p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using top.not_eq_extremum"], ["proof (prove)\nusing this:\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = \\<infinity> \\<Longrightarrow> thesis;\n     q = \\<infinity> \\<Longrightarrow> thesis;\n     p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by force"], ["proof (state)\nthis:\n  \\<lbrakk>p = \\<infinity> \\<Longrightarrow> ?thesis;\n   q = \\<infinity> \\<Longrightarrow> ?thesis;\n   p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>r = ennreal p2; 0 < p2; 0 < r\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x)\n                         \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n                         Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                         \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>p = \\<infinity> \\<Longrightarrow> ?thesis;\n   q = \\<infinity> \\<Longrightarrow> ?thesis;\n   p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>p = \\<infinity> \\<Longrightarrow> ?thesis;\n   q = \\<infinity> \\<Longrightarrow> ?thesis;\n   p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "proof (cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "case 1"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  p = \\<infinity>", "have \"q = r\""], ["proof (prove)\nusing this:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. q = r", "using \\<open>1/p + 1/q = 1/r\\<close>"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n  1 / p + 1 / q = 1 / r\n\ngoal (1 subgoal):\n 1. q = r", "by (metis ennreal_divide_top infinity_ennreal_def one_divide_one_divide_ennreal semiring_normalization_rules(5))"], ["proof (state)\nthis:\n  q = r\n\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> L_infinity_AE_bound"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "unfolding \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "have *: \"AE x in M. \\<bar>f x * g x\\<bar> \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x * g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>", "unfolding abs_mult"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> * \\<bar>g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> p M) f\\<bar> * \\<bar>g x\\<bar>", "using Norm_nonneg[of \"\\<LL> p M\" f] mult_right_mono"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n  0 \\<le> Norm (\\<LL> p M) f\n  \\<lbrakk>?a \\<le> ?b; (0::?'a) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?a * ?c \\<le> ?b * ?c\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> * \\<bar>g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> p M) f\\<bar> * \\<bar>g x\\<bar>", "by fastforce"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x * g x\\<bar>\n             \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\n\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have **: \"(\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "using spaceN_cmult[OF \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>]"], ["proof (prove)\nusing this:\n  ?c *\\<^sub>R g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "unfolding \\<open>q = r\\<close> scaleR_fun_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ?c *\\<^sub>R g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have ***: \"Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) = Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Norm_cmult[of \"\\<LL> r M\"]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (?c *\\<^sub>R ?x) = \\<bar>?c\\<bar> * Norm (\\<LL> r M) ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>q = r\\<close> scaleR_fun_def"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. ?c *\\<^sub>R ?x x) =\n  \\<bar>?c\\<bar> * Norm (\\<LL> r M) ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> r M) g", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (3 subgoals):\n 1. p = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 3. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Lp_domination[of \"\\<lambda>x. f x * g x\" M \"\\<lambda>x. Norm (\\<LL> p M) f * g x\" r]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> p M) f * g x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>q = r\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> r M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> p M) f * g x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> r M) g", "using * ** ***"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> r M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> p M) f * g x)\n  AE x in M. \\<bar>f x * g x\\<bar>\n             \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\n  (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> r M) g", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "case 2"], ["proof (state)\nthis:\n  q = \\<infinity>\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  q = \\<infinity>", "have \"p = r\""], ["proof (prove)\nusing this:\n  q = \\<infinity>\n\ngoal (1 subgoal):\n 1. p = r", "using \\<open>1/p + 1/q = 1/r\\<close>"], ["proof (prove)\nusing this:\n  q = \\<infinity>\n  1 / p + 1 / q = 1 / r\n\ngoal (1 subgoal):\n 1. p = r", "by (metis add.right_neutral ennreal_divide_top infinity_ennreal_def one_divide_one_divide_ennreal)"], ["proof (state)\nthis:\n  p = r\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close> L_infinity_AE_bound"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g", "unfolding \\<open>q = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) g", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g", "have *: \"AE x in M. \\<bar>f x * g x\\<bar> \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x * g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>", "apply (simp only: mult.commute[of \"Norm (\\<LL> q M) g\" _])"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g \\<Longrightarrow>\n    AE x in M. \\<bar>f x * g x\\<bar>\n               \\<le> \\<bar>f x * Norm (\\<LL> q M) g\\<bar>", "unfolding abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g \\<Longrightarrow>\n    AE x in M. \\<bar>f x\\<bar> * \\<bar>g x\\<bar>\n               \\<le> \\<bar>f x\\<bar> * \\<bar>Norm (\\<LL> q M) g\\<bar>", "using mult_left_mono Norm_nonneg[of \"\\<LL> q M\" g]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<le> ?b; (0::?'a) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?c * ?a \\<le> ?c * ?b\n  0 \\<le> Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>g x\\<bar> \\<le> Norm (\\<LL> q M) g \\<Longrightarrow>\n    AE x in M. \\<bar>f x\\<bar> * \\<bar>g x\\<bar>\n               \\<le> \\<bar>f x\\<bar> * \\<bar>Norm (\\<LL> q M) g\\<bar>", "by fastforce"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x * g x\\<bar>\n             \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have **: \"(\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M)", "using spaceN_cmult[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  ?c *\\<^sub>R f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M)", "unfolding \\<open>p = r\\<close> scaleR_fun_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ?c *\\<^sub>R f x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have ***: \"Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) = Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Norm_cmult[of \"\\<LL> r M\"]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (?c *\\<^sub>R ?x) = \\<bar>?c\\<bar> * Norm (\\<LL> r M) ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>p = r\\<close> scaleR_fun_def"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. ?c *\\<^sub>R ?x x) =\n  \\<bar>?c\\<bar> * Norm (\\<LL> r M) ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n    Norm (\\<LL> r M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. q = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n 2. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Lp_domination[of \"\\<lambda>x. f x * g x\" M \"\\<lambda>x. Norm (\\<LL> q M) g * f x\" r]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> q M) g * f x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>p = r\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> r M) f * Norm (\\<LL> q M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> q M) g * f x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> r M) f * Norm (\\<LL> q M) g", "using * ** ***"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> r M) f * Norm (\\<LL> q M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> q M) g * f x)\n  AE x in M. \\<bar>f x * g x\\<bar>\n             \\<le> \\<bar>Norm (\\<LL> q M) g * f x\\<bar>\n  (\\<lambda>x. Norm (\\<LL> q M) g * f x) \\<in> space\\<^sub>N (\\<LL> r M)\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> q M) g * f x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> r M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "case 3"], ["proof (state)\nthis:\n  p < \\<infinity> \\<and> q < \\<infinity>\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "obtain p2 where \"p = ennreal p2\" \"p2 > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p2.\n        \\<lbrakk>p = ennreal p2; 0 < p2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using enn2real_positive_iff[of p] 3 \\<open>p > 0\\<close>"], ["proof (prove)\nusing this:\n  (0 < enn2real p) = (0 < p \\<and> p < \\<top>)\n  p < \\<infinity> \\<and> q < \\<infinity>\n  0 < p\n\ngoal (1 subgoal):\n 1. (\\<And>p2.\n        \\<lbrakk>p = ennreal p2; 0 < p2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases p) auto"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "obtain q2 where \"q = ennreal q2\" \"q2 > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q2.\n        \\<lbrakk>q = ennreal q2; 0 < q2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using enn2real_positive_iff[of q] 3 \\<open>q > 0\\<close>"], ["proof (prove)\nusing this:\n  (0 < enn2real q) = (0 < q \\<and> q < \\<top>)\n  p < \\<infinity> \\<and> q < \\<infinity>\n  0 < q\n\ngoal (1 subgoal):\n 1. (\\<And>q2.\n        \\<lbrakk>q = ennreal q2; 0 < q2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases q) auto"], ["proof (state)\nthis:\n  q = ennreal q2\n  0 < q2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"ennreal(1/r2) = 1/r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (1 / r2) = 1 / r", "using \\<open>r = ennreal r2\\<close> \\<open>r2 > 0\\<close> divide_ennreal zero_le_one"], ["proof (prove)\nusing this:\n  r = ennreal r2\n  0 < r2\n  \\<lbrakk>0 \\<le> ?r; 0 < ?q\\<rbrakk>\n  \\<Longrightarrow> ennreal ?r / ennreal ?q = ennreal (?r / ?q)\n  (0::?'a) \\<le> (1::?'a)\n\ngoal (1 subgoal):\n 1. ennreal (1 / r2) = 1 / r", "by fastforce"], ["proof (state)\nthis:\n  ennreal (1 / r2) = 1 / r\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  ennreal (1 / r2) = 1 / r\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... = 1/p + 1/q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / r = 1 / p + 1 / q", "using assms"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1 / r\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. 1 / r = 1 / p + 1 / q", "by auto"], ["proof (state)\nthis:\n  1 / r = 1 / p + 1 / q\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  1 / r = 1 / p + 1 / q\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... = ennreal(1/p2 + 1/q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = ennreal (1 / p2 + 1 / q2)", "using \\<open>p = ennreal p2\\<close> \\<open>p2 > 0\\<close> \\<open>q = ennreal q2\\<close> \\<open>q2 > 0\\<close>"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  q = ennreal q2\n  0 < q2\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = ennreal (1 / p2 + 1 / q2)", "apply (simp only: divide_ennreal ennreal_1[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = ennreal p2; 0 < p2; q = ennreal q2; 0 < q2\\<rbrakk>\n    \\<Longrightarrow> ennreal (1 / p2) + ennreal (1 / q2) =\n                      ennreal (1 / p2 + 1 / q2)", "using ennreal_plus[of \"1/p2\" \"1/q2\", symmetric]"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> 1 / p2; 0 \\<le> 1 / q2\\<rbrakk>\n  \\<Longrightarrow> ennreal (1 / p2) + ennreal (1 / q2) =\n                    ennreal (1 / p2 + 1 / q2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = ennreal p2; 0 < p2; q = ennreal q2; 0 < q2\\<rbrakk>\n    \\<Longrightarrow> ennreal (1 / p2) + ennreal (1 / q2) =\n                      ennreal (1 / p2 + 1 / q2)", "by auto"], ["proof (state)\nthis:\n  1 / p + 1 / q = ennreal (1 / p2 + 1 / q2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "finally"], ["proof (chain)\npicking this:\n  ennreal (1 / r2) = ennreal (1 / p2 + 1 / q2)", "have *: \"1/r2 = 1/p2 + 1/q2\""], ["proof (prove)\nusing this:\n  ennreal (1 / r2) = ennreal (1 / p2 + 1 / q2)\n\ngoal (1 subgoal):\n 1. 1 / r2 = 1 / p2 + 1 / q2", "using ennreal_inj \\<open>p2 > 0\\<close> \\<open>q2 > 0\\<close> \\<open>r2 > 0\\<close>"], ["proof (prove)\nusing this:\n  ennreal (1 / r2) = ennreal (1 / p2 + 1 / q2)\n  \\<lbrakk>0 \\<le> ?a; 0 \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> (ennreal ?a = ennreal ?b) = (?a = ?b)\n  0 < p2\n  0 < q2\n  0 < r2\n\ngoal (1 subgoal):\n 1. 1 / r2 = 1 / p2 + 1 / q2", "by (metis divide_pos_pos ennreal_less_zero_iff le_less zero_less_one)"], ["proof (state)\nthis:\n  1 / r2 = 1 / p2 + 1 / q2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "define P where \"P = p2 / r2\""], ["proof (state)\nthis:\n  P = p2 / r2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "define Q where \"Q = q2 / r2\""], ["proof (state)\nthis:\n  Q = q2 / r2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have [simp]: \"P > 0\" \"Q > 0\" and \"1/P + 1/Q = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (0 < P &&& 0 < Q) &&& 1 / P + 1 / Q = 1", "using \\<open>p2 > 0\\<close> \\<open>q2 > 0\\<close> \\<open>r2 > 0\\<close> *"], ["proof (prove)\nusing this:\n  0 < p2\n  0 < q2\n  0 < r2\n  1 / r2 = 1 / p2 + 1 / q2\n\ngoal (1 subgoal):\n 1. (0 < P &&& 0 < Q) &&& 1 / P + 1 / Q = 1", "unfolding P_def Q_def"], ["proof (prove)\nusing this:\n  0 < p2\n  0 < q2\n  0 < r2\n  1 / r2 = 1 / p2 + 1 / q2\n\ngoal (1 subgoal):\n 1. (0 < p2 / r2 &&& 0 < q2 / r2) &&& 1 / (p2 / r2) + 1 / (q2 / r2) = 1", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  0 < P\n  0 < Q\n  1 / P + 1 / Q = 1\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have Pa: \"(\\<bar>z\\<bar> powr r2) powr P = \\<bar>z\\<bar> powr p2\" for z"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bar>z\\<bar> powr r2) powr P = \\<bar>z\\<bar> powr p2", "unfolding P_def powr_powr"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>z\\<bar> powr (r2 * (p2 / r2)) = \\<bar>z\\<bar> powr p2", "using \\<open>r2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < r2\n\ngoal (1 subgoal):\n 1. \\<bar>z\\<bar> powr (r2 * (p2 / r2)) = \\<bar>z\\<bar> powr p2", "by auto"], ["proof (state)\nthis:\n  (\\<bar>?z\\<bar> powr r2) powr P = \\<bar>?z\\<bar> powr p2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have Qa: \"(\\<bar>z\\<bar> powr r2) powr Q = \\<bar>z\\<bar> powr q2\" for z"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bar>z\\<bar> powr r2) powr Q = \\<bar>z\\<bar> powr q2", "unfolding Q_def powr_powr"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>z\\<bar> powr (r2 * (q2 / r2)) = \\<bar>z\\<bar> powr q2", "using \\<open>r2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < r2\n\ngoal (1 subgoal):\n 1. \\<bar>z\\<bar> powr (r2 * (q2 / r2)) = \\<bar>z\\<bar> powr q2", "by auto"], ["proof (state)\nthis:\n  (\\<bar>?z\\<bar> powr r2) powr Q = \\<bar>?z\\<bar> powr q2\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have *: \"integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2)", "apply (rule Holder_inequality[OF \\<open>P>0\\<close> \\<open>Q>0\\<close> \\<open>1/P + 1/Q = 1\\<close>], auto simp add: Pa Qa)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using Lp_space[OF \\<open>p2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  space\\<^sub>N (\\<LL> (ennreal p2) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "unfolding \\<open>q = ennreal q2\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using Lp_space[OF \\<open>q2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n  space\\<^sub>N (\\<LL> (ennreal q2) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr q2)}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "by auto"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "unfolding \\<open>r = ennreal r2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> (ennreal r2) M)", "using Lp_space[OF \\<open>r2 > 0\\<close>, of M]"], ["proof (prove)\nusing this:\n  space\\<^sub>N (\\<LL> (ennreal r2) M) =\n  {f \\<in> borel_measurable M.\n   integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr r2)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> (ennreal r2) M)", "by (auto simp add: * abs_mult powr_mult)"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"Norm (\\<LL> r M) (\\<lambda>x. f x * g x) = (\\<integral>x. \\<bar>f x * g x\\<bar> powr r2 \\<partial>M) powr (1/r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. f x * g x) =\n    (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2)", "unfolding \\<open>r = ennreal r2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal r2) M) (\\<lambda>x. f x * g x) =\n    (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2)", "using Lp_Norm[OF \\<open>r2 > 0\\<close>, of _ M]"], ["proof (prove)\nusing this:\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  Norm (\\<LL> (ennreal r2) M) ?f =\n  (LINT x|M. \\<bar>?f x\\<bar> powr r2) powr (1 / r2)\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  Norm (\\<LL> (ennreal r2) M) ?f powr r2 =\n  LINT x|M. \\<bar>?f x\\<bar> powr r2\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal r2) M) (\\<lambda>x. f x * g x) =\n    (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x) =\n  (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x) =\n  (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... = abs (\\<integral>x. \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2 \\<partial>M) powr (1/r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2) =\n    \\<bar>LINT x|M.\n             \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar> powr\n    (1 / r2)", "by (auto simp add: powr_mult abs_mult)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2) =\n  \\<bar>LINT x|M.\n           \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar> powr\n  (1 / r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x * g x\\<bar> powr r2) powr (1 / r2) =\n  \\<bar>LINT x|M.\n           \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar> powr\n  (1 / r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... \\<le> ((\\<integral>x. \\<bar> \\<bar>f x\\<bar> powr r2 \\<bar> powr P \\<partial>M) powr (1/P) * (\\<integral>x. \\<bar> \\<bar>g x\\<bar> powr r2 \\<bar> powr Q \\<partial>M) powr (1/Q)) powr (1/r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M.\n             \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar> powr\n    (1 / r2)\n    \\<le> ((LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr\n           (1 / P) *\n           (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr\n           (1 / Q)) powr\n          (1 / r2)", "apply (rule powr_mono2, simp add: \\<open>r2 > 0\\<close> less_imp_le, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar>\n    \\<le> (LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr\n          (1 / P) *\n          (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr\n          (1 / Q)", "apply (rule Holder_inequality[OF \\<open>P>0\\<close> \\<open>Q>0\\<close> \\<open>1/P + 1/Q = 1\\<close>], auto simp add: Pa Qa)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using Lp_space[OF \\<open>p2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n  space\\<^sub>N (\\<LL> (ennreal p2) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\n 2. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "unfolding \\<open>q = ennreal q2\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "using Lp_space[OF \\<open>q2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n  space\\<^sub>N (\\<LL> (ennreal q2) ?M) =\n  {f \\<in> borel_measurable ?M.\n   integrable ?M (\\<lambda>x. \\<bar>f x\\<bar> powr q2)}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M);\n     \\<And>M.\n        space\\<^sub>N (\\<LL> (ennreal p2) M) =\n        {f \\<in> borel_measurable M.\n         integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\\<rbrakk>\n    \\<Longrightarrow> integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "by auto"], ["proof (state)\nthis:\n  \\<bar>LINT x|M.\n           \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar> powr\n  (1 / r2)\n  \\<le> ((LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr\n         (1 / P) *\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr\n         (1 / Q)) powr\n        (1 / r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  \\<bar>LINT x|M.\n           \\<bar>f x\\<bar> powr r2 * \\<bar>g x\\<bar> powr r2\\<bar> powr\n  (1 / r2)\n  \\<le> ((LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr\n         (1 / P) *\n         (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr\n         (1 / Q)) powr\n        (1 / r2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> powr p2 \\<partial>M) powr (1/p2) * (\\<integral>x. \\<bar>g x\\<bar> powr q2 \\<partial>M) powr (1/q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr (1 / P) *\n     (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr\n     (1 / Q)) powr\n    (1 / r2) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2)", "apply (auto simp add: powr_mult powr_powr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr (r2 * P)) powr (1 / (P * r2)) *\n    (LINT x|M. \\<bar>g x\\<bar> powr (r2 * Q)) powr (1 / (Q * r2)) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2)", "unfolding P_def Q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr (r2 * (p2 / r2))) powr\n    (1 / (p2 / r2 * r2)) *\n    (LINT x|M. \\<bar>g x\\<bar> powr (r2 * (q2 / r2))) powr\n    (1 / (q2 / r2 * r2)) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2)", "using \\<open>r2 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < r2\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr (r2 * (p2 / r2))) powr\n    (1 / (p2 / r2 * r2)) *\n    (LINT x|M. \\<bar>g x\\<bar> powr (r2 * (q2 / r2))) powr\n    (1 / (q2 / r2 * r2)) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2)", "by auto"], ["proof (state)\nthis:\n  ((LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr (1 / P) *\n   (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr (1 / Q)) powr\n  (1 / r2) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n  (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  ((LINT x|M. \\<bar>\\<bar>f x\\<bar> powr r2\\<bar> powr P) powr (1 / P) *\n   (LINT x|M. \\<bar>\\<bar>g x\\<bar> powr r2\\<bar> powr Q) powr (1 / Q)) powr\n  (1 / r2) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n  (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2)\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... = Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>p = ennreal p2\\<close> \\<open>q = ennreal q2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2) =\n    Norm (\\<LL> (ennreal p2) M) f * Norm (\\<LL> (ennreal q2) M) g", "using Lp_Norm[OF \\<open>p2 > 0\\<close>, of _ M] Lp_Norm[OF \\<open>q2 > 0\\<close>, of _ M]"], ["proof (prove)\nusing this:\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  Norm (\\<LL> (ennreal p2) M) ?f =\n  (LINT x|M. \\<bar>?f x\\<bar> powr p2) powr (1 / p2)\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  Norm (\\<LL> (ennreal p2) M) ?f powr p2 =\n  LINT x|M. \\<bar>?f x\\<bar> powr p2\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  Norm (\\<LL> (ennreal q2) M) ?f =\n  (LINT x|M. \\<bar>?f x\\<bar> powr q2) powr (1 / q2)\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  Norm (\\<LL> (ennreal q2) M) ?f powr q2 =\n  LINT x|M. \\<bar>?f x\\<bar> powr q2\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2) =\n    Norm (\\<LL> (ennreal p2) M) f * Norm (\\<LL> (ennreal q2) M) g", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) *\n  (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. p < \\<infinity> \\<and> q < \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using \\<open>(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "case PInf"], ["proof (state)\nthis:\n  r = \\<infinity>\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  r = \\<infinity>", "have \"p = \\<infinity>\" \"q = r\""], ["proof (prove)\nusing this:\n  r = \\<infinity>\n\ngoal (1 subgoal):\n 1. p = \\<infinity> &&& q = r", "using \\<open>1/p + 1/q = 1/r\\<close>"], ["proof (prove)\nusing this:\n  r = \\<infinity>\n  1 / p + 1 / q = 1 / r\n\ngoal (1 subgoal):\n 1. p = \\<infinity> &&& q = r", "by (metis add_eq_0_iff_both_eq_0 ennreal_divide_eq_0_iff infinity_ennreal_def not_one_le_zero order.order_iff_strict)+"], ["proof (state)\nthis:\n  p = \\<infinity>\n  q = r\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> L_infinity_AE_bound"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "unfolding \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f", "have *: \"AE x in M. \\<bar>f x * g x\\<bar> \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\""], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x * g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>", "unfolding abs_mult"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> * \\<bar>g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> p M) f\\<bar> * \\<bar>g x\\<bar>", "using Norm_nonneg[of \"\\<LL> p M\" f] mult_right_mono"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> p M) f\n  0 \\<le> Norm (\\<LL> p M) f\n  \\<lbrakk>?a \\<le> ?b; (0::?'a) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?a * ?c \\<le> ?b * ?c\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> * \\<bar>g x\\<bar>\n               \\<le> \\<bar>Norm (\\<LL> p M) f\\<bar> * \\<bar>g x\\<bar>", "by fastforce"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x * g x\\<bar>\n             \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have **: \"(\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "using spaceN_cmult[OF \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>]"], ["proof (prove)\nusing this:\n  ?c *\\<^sub>R g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "unfolding \\<open>q = r\\<close> scaleR_fun_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ?c *\\<^sub>R g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have ***: \"Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) = Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Norm_cmult[of \"\\<LL> r M\"]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (?c *\\<^sub>R ?x) = \\<bar>?c\\<bar> * Norm (\\<LL> r M) ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>q = r\\<close> scaleR_fun_def"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. ?c *\\<^sub>R ?x x) =\n  \\<bar>?c\\<bar> * Norm (\\<LL> r M) ?x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n    Norm (\\<LL> p M) f * Norm (\\<LL> r M) g", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. r = \\<infinity> \\<Longrightarrow>\n    (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Lp_domination[of \"\\<lambda>x. f x * g x\" M \"\\<lambda>x. Norm (\\<LL> p M) f * g x\" r]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> p M) f * g x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "unfolding \\<open>q = r\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> r M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> p M) f * g x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> r M) g", "using * ** ***"], ["proof (prove)\nusing this:\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> r M) g\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  \\<lbrakk>(\\<lambda>x. f x * g x) \\<in> borel_measurable M;\n   (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M);\n   AE x in M. \\<bar>f x * g x\\<bar>\n              \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\\<rbrakk>\n  \\<Longrightarrow> Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n                    \\<le> Norm (\\<LL> r M)\n                           (\\<lambda>x. Norm (\\<LL> p M) f * g x)\n  AE x in M. \\<bar>f x * g x\\<bar>\n             \\<le> \\<bar>Norm (\\<LL> p M) f * g x\\<bar>\n  (\\<lambda>x. Norm (\\<LL> p M) f * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  Norm (\\<LL> r M) (\\<lambda>x. Norm (\\<LL> p M) f * g x) =\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> r M) g", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n 2. Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\"\n            \"Norm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) \\<and>\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M) &&&\n    Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The previous theorem admits an eNorm version in which one does not assume a priori\nthat the functions under consideration belong to $L^p$ or $L^q$.\\<close>"], ["", "theorem Lp_Lq_emult:\n  fixes p q r::ennreal\n  assumes \"1/p + 1/q = 1/r\"\n          \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "proof (cases \"r = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "case True"], ["proof (state)\nthis:\n  r = 0\n\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  r = 0", "have \"eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\""], ["proof (prove)\nusing this:\n  r = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "using assms"], ["proof (prove)\nusing this:\n  r = 0\n  1 / p + 1 / q = 1 / r\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "by (simp add: L_zero(1))"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "case False"], ["proof (state)\nthis:\n  r \\<noteq> 0\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  r \\<noteq> 0", "have \"r > 0\""], ["proof (prove)\nusing this:\n  r \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < r", "using not_gr_zero"], ["proof (prove)\nusing this:\n  r \\<noteq> 0\n  (\\<not> (0::?'a) < ?n) = (?n = (0::?'a))\n\ngoal (1 subgoal):\n 1. 0 < r", "by blast"], ["proof (state)\nthis:\n  0 < r\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  0 < r", "have \"p > 0\" \"q > 0\""], ["proof (prove)\nusing this:\n  0 < r\n\ngoal (1 subgoal):\n 1. 0 < p &&& 0 < q", "using \\<open>1/p + 1/q = 1/r\\<close>"], ["proof (prove)\nusing this:\n  0 < r\n  1 / p + 1 / q = 1 / r\n\ngoal (1 subgoal):\n 1. 0 < p &&& 0 < q", "by (metis ennreal_add_eq_top ennreal_divide_eq_top_iff ennreal_top_neq_one gr_zeroI zero_neq_one)+"], ["proof (state)\nthis:\n  0 < p\n  0 < q\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  0 < p\n  0 < q", "have Z: \"zero_space\\<^sub>N (\\<LL> p M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\"\n               \"zero_space\\<^sub>N (\\<LL> q M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\"\n               \"zero_space\\<^sub>N (\\<LL> r M) = {f \\<in> borel_measurable M. AE x in M. f x = 0}\""], ["proof (prove)\nusing this:\n  0 < p\n  0 < q\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0} &&&\n    zero_space\\<^sub>N (\\<LL> q M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0} &&&\n    zero_space\\<^sub>N (\\<LL> r M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "using \\<open>r > 0\\<close> Lp_infinity_zero_space"], ["proof (prove)\nusing this:\n  0 < p\n  0 < q\n  0 < r\n  0 < ?p \\<Longrightarrow>\n  zero_space\\<^sub>N (\\<LL> ?p ?M) =\n  {f \\<in> borel_measurable ?M. AE x in ?M. f x = 0}\n\ngoal (1 subgoal):\n 1. zero_space\\<^sub>N (\\<LL> p M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0} &&&\n    zero_space\\<^sub>N (\\<LL> q M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0} &&&\n    zero_space\\<^sub>N (\\<LL> r M) =\n    {f \\<in> borel_measurable M. AE x in M. f x = 0}", "by auto"], ["proof (state)\nthis:\n  zero_space\\<^sub>N (\\<LL> p M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  zero_space\\<^sub>N (\\<LL> q M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  zero_space\\<^sub>N (\\<LL> r M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "have [measurable]: \"(\\<lambda>x. f x * g x) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1 / r\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "consider \"eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0\"\n         | \"(eNorm (\\<LL> p M) f > 0 \\<and> eNorm (\\<LL> q M) g = \\<infinity>) \\<or> (eNorm (\\<LL> p M) f = \\<infinity> \\<and> eNorm (\\<LL> q M) g > 0)\"\n         | \"eNorm (\\<LL> p M) f < \\<infinity> \\<and> eNorm (\\<LL> q M) g < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>eNorm (\\<LL> p M) f = 0 \\<or>\n             eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n             thesis;\n     0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n     eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n     0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n     thesis;\n     eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n     eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using less_top"], ["proof (prove)\nusing this:\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>eNorm (\\<LL> p M) f = 0 \\<or>\n             eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n             thesis;\n     0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n     eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n     0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n     thesis;\n     eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n     eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>eNorm (\\<LL> p M) f = 0 \\<or>\n           eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n           ?thesis;\n   0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n   eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n   0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n   ?thesis;\n   eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n   eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. r \\<noteq> 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>eNorm (\\<LL> p M) f = 0 \\<or>\n           eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n           ?thesis;\n   0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n   eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n   0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n   ?thesis;\n   eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n   eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>eNorm (\\<LL> p M) f = 0 \\<or>\n           eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n           ?thesis;\n   0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n   eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n   0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n   ?thesis;\n   eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n   eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "proof (cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 3. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "case 1"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0\n\ngoal (3 subgoals):\n 1. eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 3. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0", "have \"(AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0\n\ngoal (1 subgoal):\n 1. (AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)", "using Z"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0\n  zero_space\\<^sub>N (\\<LL> p M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  zero_space\\<^sub>N (\\<LL> q M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  zero_space\\<^sub>N (\\<LL> r M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (1 subgoal):\n 1. (AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)", "unfolding zero_space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0\n  {f. eNorm (\\<LL> p M) f = 0} =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  {f. eNorm (\\<LL> q M) f = 0} =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  {f. eNorm (\\<LL> r M) f = 0} =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (1 subgoal):\n 1. (AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)", "by auto"], ["proof (state)\nthis:\n  (AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)\n\ngoal (3 subgoals):\n 1. eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 3. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  (AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)", "have \"AE x in M. f x * g x = 0\""], ["proof (prove)\nusing this:\n  (AE x in M. f x = 0) \\<or> (AE x in M. g x = 0)\n\ngoal (1 subgoal):\n 1. AE x in M. f x * g x = 0", "by auto"], ["proof (state)\nthis:\n  AE x in M. f x * g x = 0\n\ngoal (3 subgoals):\n 1. eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 3. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  AE x in M. f x * g x = 0", "have \"eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\""], ["proof (prove)\nusing this:\n  AE x in M. f x * g x = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "using Z"], ["proof (prove)\nusing this:\n  AE x in M. f x * g x = 0\n  zero_space\\<^sub>N (\\<LL> p M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  zero_space\\<^sub>N (\\<LL> q M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  zero_space\\<^sub>N (\\<LL> r M) =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "unfolding zero_space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  AE x in M. f x * g x = 0\n  {f. eNorm (\\<LL> p M) f = 0} =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  {f. eNorm (\\<LL> q M) f = 0} =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n  {f. eNorm (\\<LL> r M) f = 0} =\n  {f \\<in> borel_measurable M. AE x in M. f x = 0}\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n\ngoal (3 subgoals):\n 1. eNorm (\\<LL> p M) f = 0 \\<or> eNorm (\\<LL> q M) g = 0 \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 3. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x) = 0\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "case 2"], ["proof (state)\nthis:\n  0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n  eNorm (\\<LL> p M) f = \\<infinity> \\<and> 0 < eNorm (\\<LL> q M) g\n\ngoal (2 subgoals):\n 1. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n  eNorm (\\<LL> p M) f = \\<infinity> \\<and> 0 < eNorm (\\<LL> q M) g", "have \"eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g = \\<infinity>\""], ["proof (prove)\nusing this:\n  0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n  eNorm (\\<LL> p M) f = \\<infinity> \\<and> 0 < eNorm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g = \\<infinity>", "using ennreal_mult_eq_top_iff"], ["proof (prove)\nusing this:\n  0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n  eNorm (\\<LL> p M) f = \\<infinity> \\<and> 0 < eNorm (\\<LL> q M) g\n  (?a * ?b = \\<top>) =\n  (?a = \\<top> \\<and> ?b \\<noteq> 0 \\<or> ?b = \\<top> \\<and> ?a \\<noteq> 0)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g = \\<infinity>", "by force"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g = \\<infinity>\n\ngoal (2 subgoals):\n 1. 0 < eNorm (\\<LL> p M) f \\<and> eNorm (\\<LL> q M) g = \\<infinity> \\<or>\n    eNorm (\\<LL> p M) f = \\<infinity> \\<and>\n    0 < eNorm (\\<LL> q M) g \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n 2. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g = \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "case 3"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f < \\<infinity> \\<and> eNorm (\\<LL> q M) g < \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) f < \\<infinity> \\<and> eNorm (\\<LL> q M) g < \\<infinity>", "have *: \"f \\<in> space\\<^sub>N (\\<LL> p M)\" \"g \\<in> space\\<^sub>N (\\<LL> q M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f < \\<infinity> \\<and> eNorm (\\<LL> q M) g < \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) &&& g \\<in> space\\<^sub>N (\\<LL> q M)", "unfolding space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f < \\<infinity> \\<and> eNorm (\\<LL> q M) g < \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> {f. eNorm (\\<LL> p M) f < \\<infinity>} &&&\n    g \\<in> {f. eNorm (\\<LL> q M) f < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  g \\<in> space\\<^sub>N (\\<LL> q M)", "have \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\""], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "using Lp_Lq_mult(1)[OF assms(1)]"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  \\<lbrakk>?f \\<in> space\\<^sub>N (\\<LL> p ?M);\n   ?g \\<in> space\\<^sub>N (\\<LL> q ?M)\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x)\n                    \\<in> space\\<^sub>N (\\<LL> r ?M)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f < \\<infinity> \\<and>\n    eNorm (\\<LL> q M) g < \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "using Lp_Lq_mult(2)[OF assms(1) *]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> r M)\n  Norm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n    \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g", "by (simp add: eNorm_Norm * ennreal_mult'[symmetric])"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eNorm (\\<LL> r M) (\\<lambda>x. f x * g x)\n  \\<le> eNorm (\\<LL> p M) f * eNorm (\\<LL> q M) g\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_Lq_duality_bound:\n  fixes p q::ennreal\n  assumes \"1/p + 1/q = 1\"\n          \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"g \\<in> space\\<^sub>N (\\<LL> q M)\"\n  shows \"integrable M (\\<lambda>x. f x * g x)\"\n        \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x) &&&\n    \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * g x)\n 2. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"(\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 1 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 1 M)", "apply (rule Lp_Lq_mult[OF _ \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = 1 / 1", "using \\<open>1/p + 1/q = 1\\<close>"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = 1 / 1", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * g x)\n 2. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 1 M)", "show \"integrable M (\\<lambda>x. f x * g x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x)", "using L1_space"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x * g x) \\<in> space\\<^sub>N (\\<LL> 1 M)\n  space\\<^sub>N (\\<LL> 1 ?M) = {f. integrable ?M f}\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)", "using L1_int_ineq"], ["proof (prove)\nusing this:\n  \\<bar>integral\\<^sup>L ?M ?f\\<bar> \\<le> Norm (\\<LL> 1 ?M) ?f\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)", "by auto"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "also"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "have \"... \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "apply (rule Lp_Lq_mult[OF _ \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = 1 / 1", "using \\<open>1/p + 1/q = 1\\<close>"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = 1 / 1", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) (\\<lambda>x. f x * g x)\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "finally"], ["proof (chain)\npicking this:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "show \"abs(\\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\nusing this:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "by simp"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The next theorem asserts that the norm of an $L^p$ function $f$ can be obtained by estimating\nthe integrals of $fg$ over all $L^q$ functions $g$, where $1/p + 1/q = 1$. When $p = \\infty$, it is\nnecessary to assume that the space is sigma-finite: for instance, if the space is one single atom\nof infinite mass, then there is no nonzero $L^1$ function, so taking for $f$ the constant function\nequal to $1$, it has $L^\\infty$ norm equal to $1$, but $\\int fg = 0$ for all $L^1$ function $g$.\\<close>"], ["", "theorem Lp_Lq_duality:\n  fixes p q::ennreal\n  assumes \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n          \"1/p + 1/q = 1\"\n          \"p = \\<infinity> \\<Longrightarrow> sigma_finite_measure M\"\n  shows \"bdd_above ((\\<lambda>g. (\\<integral>x. f x * g x \\<partial>M))`{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\"\n        \"Norm (\\<LL> p M) f = (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}) &&&\n    Norm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n 2. Norm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using Lp_measurable[OF assms(1)]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n 2. Norm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)", "have B: \"(\\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> p M) f\" if \"g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}\" for g"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "have g: \"g \\<in> space\\<^sub>N (\\<LL> q M)\" \"Norm (\\<LL> q M) g \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> q M) &&& Norm (\\<LL> q M) g \\<le> 1", "using that"], ["proof (prove)\nusing this:\n  g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> q M) &&& Norm (\\<LL> q M) g \\<le> 1", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "have \"(\\<integral>x. f x * g x \\<partial>M) \\<le> abs(\\<integral>x. f x * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> \\<bar>LINT x|M. f x * g x\\<bar>", "by auto"], ["proof (state)\nthis:\n  LINT x|M. f x * g x \\<le> \\<bar>LINT x|M. f x * g x\\<bar>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "also"], ["proof (state)\nthis:\n  LINT x|M. f x * g x \\<le> \\<bar>LINT x|M. f x * g x\\<bar>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "have \"... \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "using Lp_Lq_duality_bound(2)[OF \\<open>1/p + 1/q = 1\\<close> \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> g(1)]"], ["proof (prove)\nusing this:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|M. f x * g x\\<bar>\n    \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g", "by auto"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "also"], ["proof (state)\nthis:\n  \\<bar>LINT x|M. f x * g x\\<bar>\n  \\<le> Norm (\\<LL> p M) f * Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "have \"... \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f * Norm (\\<LL> q M) g \\<le> Norm (\\<LL> p M) f", "using g(2) Norm_nonneg[of \"\\<LL> p M\" f] mult_left_le"], ["proof (prove)\nusing this:\n  Norm (\\<LL> q M) g \\<le> 1\n  0 \\<le> Norm (\\<LL> p M) f\n  \\<lbrakk>?c \\<le> (1::?'a); (0::?'a) \\<le> ?a\\<rbrakk>\n  \\<Longrightarrow> ?a * ?c \\<le> ?a\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f * Norm (\\<LL> q M) g \\<le> Norm (\\<LL> p M) f", "by blast"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f * Norm (\\<LL> q M) g \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "show \"(\\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\nusing this:\n  LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f", "by simp"], ["proof (state)\nthis:\n  LINT x|M. f x * g x \\<le> Norm (\\<LL> p M) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n\ngoal (2 subgoals):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n 2. Norm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f", "show \"bdd_above ((\\<lambda>g. (\\<integral>x. f x * g x \\<partial>M))`{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\""], ["proof (prove)\nusing this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})", "by (meson bdd_aboveI2)"], ["proof (state)\nthis:\n  bdd_above\n   ((\\<lambda>g. LINT x|M. f x * g x) `\n    {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)", "show \"Norm (\\<LL> p M) f = (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)", "proof (rule antisym)"], ["proof (state)\ngoal (2 subgoals):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 2. (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)\n    \\<le> Norm (\\<LL> p M) f", "show \"(SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. \\<integral>x. f x * g x \\<partial>M) \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        LINT x|M. f x * g x)\n    \\<le> Norm (\\<LL> p M) f", "by (rule cSUP_least, auto, rule exI[of _ 0], auto simp add: B)"], ["proof (state)\nthis:\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n      LINT x|M. f x * g x)\n  \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"p \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> p", "using conjugate_exponent_ennrealI(1)[OF \\<open>1/p + 1/q = 1\\<close>]"], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. 1 \\<le> p", "by simp"], ["proof (state)\nthis:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "show \"Norm (\\<LL> p M) f \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "using \\<open>p \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> p\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "proof (cases rule: Lp_cases_1_PInf)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  p = \\<infinity>", "have \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (prove)\nusing this:\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "using \\<open>f \\<in> space\\<^sub>N(\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  p = \\<infinity>\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "by simp"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"q = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q = 1", "using \\<open>1/p + 1/q = 1\\<close> \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  1 / p + 1 / q = 1\n  p = \\<infinity>\n\ngoal (1 subgoal):\n 1. q = 1", "by (simp add: divide_eq_1_ennreal)"], ["proof (state)\nthis:\n  q = 1\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"c \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\" if \"c < Norm (\\<LL> p M) f\" for c"], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "proof (cases \"c < 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)\n 2. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "case True"], ["proof (state)\nthis:\n  c < 0\n\ngoal (2 subgoals):\n 1. c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)\n 2. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  c < 0", "have \"c \\<le> (\\<integral>x. f x * 0 x \\<partial>M)\""], ["proof (prove)\nusing this:\n  c < 0\n\ngoal (1 subgoal):\n 1. c \\<le> LINT x|M. f x * 0 x", "by auto"], ["proof (state)\nthis:\n  c \\<le> LINT x|M. f x * 0 x\n\ngoal (2 subgoals):\n 1. c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)\n 2. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  c \\<le> LINT x|M. f x * 0 x\n\ngoal (2 subgoals):\n 1. c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)\n 2. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * 0 x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "apply (rule cSUP_upper, auto simp add: zero_fun_def[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})", "using B"], ["proof (prove)\nusing this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})", "by (meson bdd_aboveI2)"], ["proof (state)\nthis:\n  LINT x|M. f x * 0 x\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (2 subgoals):\n 1. c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)\n 2. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\nusing this:\n  c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "by simp"], ["proof (state)\nthis:\n  c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "case False"], ["proof (state)\nthis:\n  \\<not> c < 0\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  \\<not> c < 0", "have \"ennreal c < eNorm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\nusing this:\n  \\<not> c < 0\n\ngoal (1 subgoal):\n 1. ennreal c < eNorm (\\<LL> \\<infinity> M) f", "using eNorm_Norm[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>] that ennreal_less_iff"], ["proof (prove)\nusing this:\n  \\<not> c < 0\n  eNorm (\\<LL> p M) f = ennreal (Norm (\\<LL> p M) f)\n  c < Norm (\\<LL> p M) f\n  0 \\<le> ?r \\<Longrightarrow> (ennreal ?r < ennreal ?q) = (?r < ?q)\n\ngoal (1 subgoal):\n 1. ennreal c < eNorm (\\<LL> \\<infinity> M) f", "unfolding \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  \\<not> c < 0\n  eNorm (\\<LL> \\<infinity> M) f = ennreal (Norm (\\<LL> \\<infinity> M) f)\n  c < Norm (\\<LL> \\<infinity> M) f\n  0 \\<le> ?r \\<Longrightarrow> (ennreal ?r < ennreal ?q) = (?r < ?q)\n\ngoal (1 subgoal):\n 1. ennreal c < eNorm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  ennreal c < eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  ennreal c < eNorm (\\<LL> \\<infinity> M) f", "have *: \"emeasure M {x \\<in> space M. \\<bar>f x\\<bar> > c} > 0\""], ["proof (prove)\nusing this:\n  ennreal c < eNorm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. c < \\<bar>f x\\<bar>}", "using L_infinity_pos_measure[of f M c]"], ["proof (prove)\nusing this:\n  ennreal c < eNorm (\\<LL> \\<infinity> M) f\n  \\<lbrakk>f \\<in> borel_measurable M;\n   ennreal c < eNorm (\\<LL> \\<infinity> M) f\\<rbrakk>\n  \\<Longrightarrow> 0 < emeasure M {x \\<in> space M. c < \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < emeasure M {x \\<in> space M. c < \\<bar>f x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  0 < emeasure M {x \\<in> space M. c < \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "obtain A where [measurable]: \"\\<And>(n::nat). A n \\<in> sets M\" and \"(\\<Union>i. A i) = space M\" \"\\<And>i. emeasure M (A i) \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>\\<And>n. A n \\<in> sets M; \\<Union> (range A) = space M;\n         \\<And>i. emeasure M (A i) \\<noteq> \\<infinity>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using sigma_finite_measure.sigma_finite[OF \\<open>p = \\<infinity> \\<Longrightarrow> sigma_finite_measure M\\<close>[OF \\<open>p = \\<infinity>\\<close>]]"], ["proof (prove)\nusing this:\n  (\\<And>A.\n      \\<lbrakk>range A \\<subseteq> sets M; \\<Union> (range A) = space M;\n       \\<And>i. emeasure M (A i) \\<noteq> \\<infinity>\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>\\<And>n. A n \\<in> sets M; \\<Union> (range A) = space M;\n         \\<And>i. emeasure M (A i) \\<noteq> \\<infinity>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis UNIV_I sets_range)"], ["proof (state)\nthis:\n  A ?n \\<in> sets M\n  \\<Union> (range A) = space M\n  emeasure M (A ?i) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "define Y where \"Y = (\\<lambda>n::nat. {x \\<in> A n. \\<bar>f x\\<bar> > c})\""], ["proof (state)\nthis:\n  Y = (\\<lambda>n. {x \\<in> A n. c < \\<bar>f x\\<bar>})\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have [measurable]: \"Y n \\<in> sets M\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. Y n \\<in> sets M", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> A n. c < \\<bar>f x\\<bar>} \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  Y ?n \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"{x \\<in> space M. \\<bar>f x\\<bar> > c} = (\\<Union>n. Y n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. c < \\<bar>f x\\<bar>} = \\<Union> (range Y)", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. c < \\<bar>f x\\<bar>} =\n    (\\<Union>n. {x \\<in> A n. c < \\<bar>f x\\<bar>})", "using \\<open>(\\<Union>i. A i) = space M\\<close>"], ["proof (prove)\nusing this:\n  \\<Union> (range A) = space M\n\ngoal (1 subgoal):\n 1. {x \\<in> space M. c < \\<bar>f x\\<bar>} =\n    (\\<Union>n. {x \\<in> A n. c < \\<bar>f x\\<bar>})", "by auto"], ["proof (state)\nthis:\n  {x \\<in> space M. c < \\<bar>f x\\<bar>} = \\<Union> (range Y)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  {x \\<in> space M. c < \\<bar>f x\\<bar>} = \\<Union> (range Y)", "have \"emeasure M (\\<Union>n. Y n) > 0\""], ["proof (prove)\nusing this:\n  {x \\<in> space M. c < \\<bar>f x\\<bar>} = \\<Union> (range Y)\n\ngoal (1 subgoal):\n 1. 0 < emeasure M (\\<Union> (range Y))", "using *"], ["proof (prove)\nusing this:\n  {x \\<in> space M. c < \\<bar>f x\\<bar>} = \\<Union> (range Y)\n  0 < emeasure M {x \\<in> space M. c < \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < emeasure M (\\<Union> (range Y))", "by auto"], ["proof (state)\nthis:\n  0 < emeasure M (\\<Union> (range Y))\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  0 < emeasure M (\\<Union> (range Y))", "obtain n where \"emeasure M (Y n) > 0\""], ["proof (prove)\nusing this:\n  0 < emeasure M (\\<Union> (range Y))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        0 < emeasure M (Y n) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using emeasure_pos_unionE[of Y, OF \\<open>\\<And>n. Y n \\<in> sets M\\<close>]"], ["proof (prove)\nusing this:\n  0 < emeasure M (\\<Union> (range Y))\n  0 < emeasure M (\\<Union> (range Y)) \\<Longrightarrow>\n  \\<exists>N. 0 < emeasure M (Y N)\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        0 < emeasure M (Y n) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < emeasure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"emeasure M (Y n) \\<le> emeasure M (A n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure M (Y n) \\<le> emeasure M (A n)", "apply (rule emeasure_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. Y n \\<subseteq> A n\n 2. A n \\<in> sets M", "unfolding Y_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. {x \\<in> A n. c < \\<bar>f x\\<bar>} \\<subseteq> A n\n 2. A n \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  emeasure M (Y n) \\<le> emeasure M (A n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  emeasure M (Y n) \\<le> emeasure M (A n)", "have \"emeasure M (Y n) \\<noteq> \\<infinity>\""], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<le> emeasure M (A n)\n\ngoal (1 subgoal):\n 1. emeasure M (Y n) \\<noteq> \\<infinity>", "using \\<open>emeasure M (A n) \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<le> emeasure M (A n)\n  emeasure M (A n) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure M (Y n) \\<noteq> \\<infinity>", "by (metis infinity_ennreal_def neq_top_trans)"], ["proof (state)\nthis:\n  emeasure M (Y n) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  emeasure M (Y n) \\<noteq> \\<infinity>", "have \"measure M (Y n) > 0\""], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. 0 < Sigma_Algebra.measure M (Y n)", "using \\<open>emeasure M (Y n) > 0\\<close>"], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<noteq> \\<infinity>\n  0 < emeasure M (Y n)\n\ngoal (1 subgoal):\n 1. 0 < Sigma_Algebra.measure M (Y n)", "unfolding measure_def"], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<noteq> \\<infinity>\n  0 < emeasure M (Y n)\n\ngoal (1 subgoal):\n 1. 0 < enn2real (emeasure M (Y n))", "by (simp add: enn2real_positive_iff top.not_eq_extremum)"], ["proof (state)\nthis:\n  0 < Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"\\<bar>f x\\<bar> \\<ge> c\" if \"x \\<in> Y n\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<le> \\<bar>f x\\<bar>", "using that less_imp_le"], ["proof (prove)\nusing this:\n  x \\<in> Y n\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. c \\<le> \\<bar>f x\\<bar>", "unfolding Y_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> A n. c < \\<bar>f x\\<bar>}\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. c \\<le> \\<bar>f x\\<bar>", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> Y n \\<Longrightarrow> c \\<le> \\<bar>f ?x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "define g where \"g = (\\<lambda>x. indicator (Y n) x * sgn(f x)) /\\<^sub>R measure M (Y n)\""], ["proof (state)\nthis:\n  g =\n  (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\\<^sub>R\n  Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"g \\<in> space\\<^sub>N (\\<LL> 1 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> 1 M)", "apply (rule Lp_domination[of _ _ \"indicator (Y n) /\\<^sub>R measure M (Y n)\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. g \\<in> borel_measurable M\n 2. indicat_real (Y n) /\\<^sub>R Sigma_Algebra.measure M (Y n)\n    \\<in> space\\<^sub>N (\\<LL> 1 M)\n 3. AE x in M. \\<bar>g x\\<bar>\n               \\<le> \\<bar>(indicat_real (Y n) /\\<^sub>R\n                            Sigma_Algebra.measure M (Y n))\n                            x\\<bar>", "unfolding g_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\\<^sub>R\n    Sigma_Algebra.measure M (Y n)\n    \\<in> borel_measurable M\n 2. indicat_real (Y n) /\\<^sub>R Sigma_Algebra.measure M (Y n)\n    \\<in> space\\<^sub>N (\\<LL> 1 M)\n 3. AE x in M. \\<bar>((\\<lambda>x.\n                          indicat_real (Y n) x * sgn (f x)) /\\<^sub>R\n                      Sigma_Algebra.measure M (Y n))\n                      x\\<bar>\n               \\<le> \\<bar>(indicat_real (Y n) /\\<^sub>R\n                            Sigma_Algebra.measure M (Y n))\n                            x\\<bar>", "using L1_indicator'[OF \\<open>Y n \\<in> sets M\\<close> \\<open>emeasure M (Y n) \\<noteq> \\<infinity>\\<close>]"], ["proof (prove)\nusing this:\n  indicat_real (Y n) \\<in> space\\<^sub>N (\\<LL> 1 M)\n  Norm (\\<LL> 1 M) (indicat_real (Y n)) = Sigma_Algebra.measure M (Y n)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\\<^sub>R\n    Sigma_Algebra.measure M (Y n)\n    \\<in> borel_measurable M\n 2. indicat_real (Y n) /\\<^sub>R Sigma_Algebra.measure M (Y n)\n    \\<in> space\\<^sub>N (\\<LL> 1 M)\n 3. AE x in M. \\<bar>((\\<lambda>x.\n                          indicat_real (Y n) x * sgn (f x)) /\\<^sub>R\n                      Sigma_Algebra.measure M (Y n))\n                      x\\<bar>\n               \\<le> \\<bar>(indicat_real (Y n) /\\<^sub>R\n                            Sigma_Algebra.measure M (Y n))\n                            x\\<bar>", "by (auto simp add: abs_mult indicator_def abs_sgn_eq)"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"Norm (\\<LL> 1 M) g = Norm (\\<LL> 1 M) (\\<lambda>x. indicator (Y n) x * sgn(f x)) / abs(measure M (Y n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) g =\n    Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>", "unfolding g_def Norm_cmult"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>inverse (Sigma_Algebra.measure M (Y n))\\<bar> *\n    Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) =\n    Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>", "by (simp add: divide_inverse)"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) g =\n  Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) g =\n  Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... \\<le> Norm (\\<LL> 1 M) (indicator (Y n)) / abs(measure M (Y n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n    \\<le> Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n          \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>", "using \\<open>measure M (Y n) > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n    \\<le> Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n          \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>", "apply (auto simp add: divide_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x))\n    \\<le> Norm (\\<LL> 1 M) (indicat_real (Y n))", "apply (rule Lp_domination)"], ["proof (prove)\ngoal (3 subgoals):\n 1. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) \\<in> borel_measurable M\n 2. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    indicat_real (Y n) \\<in> space\\<^sub>N (\\<LL> 1 M)\n 3. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    AE x in M. \\<bar>indicat_real (Y n) x * sgn (f x)\\<bar>\n               \\<le> \\<bar>indicat_real (Y n) x\\<bar>", "using L1_indicator'[OF \\<open>Y n \\<in> sets M\\<close> \\<open>emeasure M (Y n) \\<noteq> \\<infinity>\\<close>]"], ["proof (prove)\nusing this:\n  indicat_real (Y n) \\<in> space\\<^sub>N (\\<LL> 1 M)\n  Norm (\\<LL> 1 M) (indicat_real (Y n)) = Sigma_Algebra.measure M (Y n)\n\ngoal (3 subgoals):\n 1. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) \\<in> borel_measurable M\n 2. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    indicat_real (Y n) \\<in> space\\<^sub>N (\\<LL> 1 M)\n 3. 0 < Sigma_Algebra.measure M (Y n) \\<Longrightarrow>\n    AE x in M. \\<bar>indicat_real (Y n) x * sgn (f x)\\<bar>\n               \\<le> \\<bar>indicat_real (Y n) x\\<bar>", "by (auto simp add: abs_mult indicator_def abs_sgn_eq)"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n  \\<le> Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n        \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) (\\<lambda>x. indicat_real (Y n) x * sgn (f x)) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n  \\<le> Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n        \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... = measure M (Y n) / abs(measure M (Y n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n    Sigma_Algebra.measure M (Y n) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>", "using L1_indicator'[OF \\<open>Y n \\<in> sets M\\<close> \\<open>emeasure M (Y n) \\<noteq> \\<infinity>\\<close>]"], ["proof (prove)\nusing this:\n  indicat_real (Y n) \\<in> space\\<^sub>N (\\<LL> 1 M)\n  Norm (\\<LL> 1 M) (indicat_real (Y n)) = Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n    Sigma_Algebra.measure M (Y n) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>", "by (auto simp add: abs_mult indicator_def abs_sgn_eq)"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n  Sigma_Algebra.measure M (Y n) / \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) (indicat_real (Y n)) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n  Sigma_Algebra.measure M (Y n) / \\<bar>Sigma_Algebra.measure M (Y n)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y n) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n    1", "using \\<open>measure M (Y n) > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y n) /\n    \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n    1", "by auto"], ["proof (state)\nthis:\n  Sigma_Algebra.measure M (Y n) /\n  \\<bar>Sigma_Algebra.measure M (Y n)\\<bar> =\n  1\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> 1 M) g \\<le> 1", "have \"Norm (\\<LL> 1 M) g \\<le> 1\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> 1 M) g \\<le> 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) g \\<le> 1", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> 1 M) g \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"c * measure M (Y n) = (\\<integral>x. c * indicator (Y n) x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * Sigma_Algebra.measure M (Y n) = LINT x|M. c * indicat_real (Y n) x", "using \\<open>measure M (Y n) > 0\\<close> \\<open>emeasure M (Y n) \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  0 < Sigma_Algebra.measure M (Y n)\n  emeasure M (Y n) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. c * Sigma_Algebra.measure M (Y n) = LINT x|M. c * indicat_real (Y n) x", "by auto"], ["proof (state)\nthis:\n  c * Sigma_Algebra.measure M (Y n) = LINT x|M. c * indicat_real (Y n) x\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  c * Sigma_Algebra.measure M (Y n) = LINT x|M. c * indicat_real (Y n) x\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... \\<le> (\\<integral>x. \\<bar>f x\\<bar> * indicator (Y n) x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. c * indicat_real (Y n) x\n    \\<le> LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x", "apply (rule integral_mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. c * indicat_real (Y n) x)\n 2. integrable M (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n 3. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "using \\<open>emeasure M (Y n) \\<noteq> \\<infinity>\\<close> \\<open>0 < Sigma_Algebra.measure M (Y n)\\<close> not_integrable_integral_eq"], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<noteq> \\<infinity>\n  0 < Sigma_Algebra.measure M (Y n)\n  \\<not> integrable ?M ?f \\<Longrightarrow>\n  integral\\<^sup>L ?M ?f = (0::?'b)\n\ngoal (3 subgoals):\n 1. integrable M (\\<lambda>x. c * indicat_real (Y n) x)\n 2. integrable M (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n 3. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "apply fastforce"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "apply (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. Norm (\\<LL> \\<infinity> M) f * indicator (Y n) x\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. integrable M\n     (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f * indicat_real (Y n) x)\n 2. (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n    \\<in> borel_measurable M\n 3. AE x in M. norm (\\<bar>f x\\<bar> * indicat_real (Y n) x)\n               \\<le> norm\n                      (Norm (\\<LL> \\<infinity> M) f * indicat_real (Y n) x)\n 4. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "using \\<open>emeasure M (Y n) \\<noteq> \\<infinity>\\<close> \\<open>0 < Sigma_Algebra.measure M (Y n)\\<close> not_integrable_integral_eq"], ["proof (prove)\nusing this:\n  emeasure M (Y n) \\<noteq> \\<infinity>\n  0 < Sigma_Algebra.measure M (Y n)\n  \\<not> integrable ?M ?f \\<Longrightarrow>\n  integral\\<^sup>L ?M ?f = (0::?'b)\n\ngoal (4 subgoals):\n 1. integrable M\n     (\\<lambda>x. Norm (\\<LL> \\<infinity> M) f * indicat_real (Y n) x)\n 2. (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n    \\<in> borel_measurable M\n 3. AE x in M. norm (\\<bar>f x\\<bar> * indicat_real (Y n) x)\n               \\<le> norm\n                      (Norm (\\<LL> \\<infinity> M) f * indicat_real (Y n) x)\n 4. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "apply fastforce"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n    \\<in> borel_measurable M\n 2. AE x in M. norm (\\<bar>f x\\<bar> * indicat_real (Y n) x)\n               \\<le> norm\n                      (Norm (\\<LL> \\<infinity> M) f * indicat_real (Y n) x)\n 3. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "using L_infinity_AE_bound[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\\<close>]"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. \\<bar>f x\\<bar> * indicat_real (Y n) x)\n    \\<in> borel_measurable M\n 2. AE x in M. norm (\\<bar>f x\\<bar> * indicat_real (Y n) x)\n               \\<le> norm\n                      (Norm (\\<LL> \\<infinity> M) f * indicat_real (Y n) x)\n 3. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       c * indicat_real (Y n) x \\<le> \\<bar>f x\\<bar> * indicat_real (Y n) x", "by (auto simp add: indicator_def Y_def)"], ["proof (state)\nthis:\n  LINT x|M. c * indicat_real (Y n) x\n  \\<le> LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  c * Sigma_Algebra.measure M (Y n)\n  \\<le> LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x", "have \"c \\<le> (\\<integral>x. \\<bar>f x\\<bar> * indicator (Y n) x \\<partial>M) / measure M (Y n)\""], ["proof (prove)\nusing this:\n  c * Sigma_Algebra.measure M (Y n)\n  \\<le> LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x\n\ngoal (1 subgoal):\n 1. c \\<le> (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n            Sigma_Algebra.measure M (Y n)", "using \\<open>measure M (Y n) > 0\\<close>"], ["proof (prove)\nusing this:\n  c * Sigma_Algebra.measure M (Y n)\n  \\<le> LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x\n  0 < Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. c \\<le> (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n            Sigma_Algebra.measure M (Y n)", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  c \\<le> (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n          Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  c \\<le> (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n          Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... = (\\<integral>x. f x * indicator (Y n) x * sgn(f x) / measure M (Y n) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n    Sigma_Algebra.measure M (Y n) =\n    LINT x|M.\n       f x * indicat_real (Y n) x * sgn (f x) /\n       Sigma_Algebra.measure M (Y n)", "using \\<open>measure M (Y n) > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n    Sigma_Algebra.measure M (Y n) =\n    LINT x|M.\n       f x * indicat_real (Y n) x * sgn (f x) /\n       Sigma_Algebra.measure M (Y n)", "by (simp add: abs_sgn mult.commute mult.left_commute)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n  Sigma_Algebra.measure M (Y n) =\n  LINT x|M.\n     f x * indicat_real (Y n) x * sgn (f x) / Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> * indicat_real (Y n) x) /\n  Sigma_Algebra.measure M (Y n) =\n  LINT x|M.\n     f x * indicat_real (Y n) x * sgn (f x) / Sigma_Algebra.measure M (Y n)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... = (\\<integral>x. f x * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       f x * indicat_real (Y n) x * sgn (f x) /\n       Sigma_Algebra.measure M (Y n) =\n    LINT x|M. f x * g x", "unfolding divide_inverse g_def divideR_apply"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       f x * indicat_real (Y n) x * sgn (f x) *\n       inverse (Sigma_Algebra.measure M (Y n)) =\n    LINT x|M.\n       f x *\n       (indicat_real (Y n) x * sgn (f x) /\\<^sub>R\n        Sigma_Algebra.measure M (Y n))", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  LINT x|M.\n     f x * indicat_real (Y n) x * sgn (f x) /\n     Sigma_Algebra.measure M (Y n) =\n  LINT x|M. f x * g x\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     f x * indicat_real (Y n) x * sgn (f x) /\n     Sigma_Algebra.measure M (Y n) =\n  LINT x|M. f x * g x\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "have \"... \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "unfolding \\<open>q = 1\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> 1 M).\n                            Norm (\\<LL> 1 M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "apply (rule cSUP_upper, auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> 1 M)\n 2. Norm (\\<LL> 1 M) g \\<le> 1\n 3. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> 1 M). Norm (\\<LL> 1 M) g \\<le> 1})", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> 1 M)\\<close> \\<open>Norm (\\<LL> 1 M) g \\<le> 1\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> 1 M)\n  Norm (\\<LL> 1 M) g \\<le> 1\n\ngoal (3 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> 1 M)\n 2. Norm (\\<LL> 1 M) g \\<le> 1\n 3. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> 1 M). Norm (\\<LL> 1 M) g \\<le> 1})", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> 1 M);\n     Norm (\\<LL> 1 M) g \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> bdd_above\n                       ((\\<lambda>g. LINT x|M. f x * g x) `\n                        {g \\<in> space\\<^sub>N (\\<LL> 1 M).\n                         Norm (\\<LL> 1 M) g \\<le> 1})", "using B \\<open>p = \\<infinity>\\<close> \\<open>q = 1\\<close>"], ["proof (prove)\nusing this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n  p = \\<infinity>\n  q = 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> 1 M);\n     Norm (\\<LL> 1 M) g \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> bdd_above\n                       ((\\<lambda>g. LINT x|M. f x * g x) `\n                        {g \\<in> space\\<^sub>N (\\<LL> 1 M).\n                         Norm (\\<LL> 1 M) g \\<le> 1})", "by (meson bdd_aboveI2)"], ["proof (state)\nthis:\n  LINT x|M. f x * g x\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<not> c < 0 \\<Longrightarrow>\n    c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\nusing this:\n  c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                              Norm (\\<LL> q M) g \\<le> 1}.\n                LINT x|M. f x * g x)", "by simp"], ["proof (state)\nthis:\n  c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?c < Norm (\\<LL> p M) f \\<Longrightarrow>\n  ?c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                             Norm (\\<LL> q M) g \\<le> 1}.\n               LINT x|M. f x * g x)\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 3. p = \\<infinity> \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  ?c < Norm (\\<LL> p M) f \\<Longrightarrow>\n  ?c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                             Norm (\\<LL> q M) g \\<le> 1}.\n               LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\nusing this:\n  ?c < Norm (\\<LL> p M) f \\<Longrightarrow>\n  ?c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                             Norm (\\<LL> q M) g \\<le> 1}.\n               LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "using dense_le"], ["proof (prove)\nusing this:\n  ?c < Norm (\\<LL> p M) f \\<Longrightarrow>\n  ?c \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                             Norm (\\<LL> q M) g \\<le> 1}.\n               LINT x|M. f x * g x)\n  (\\<And>x. x < ?y \\<Longrightarrow> x \\<le> ?z) \\<Longrightarrow>\n  ?y \\<le> ?z\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "case one"], ["proof (state)\nthis:\n  p = 1\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  p = 1", "have \"q = \\<infinity>\""], ["proof (prove)\nusing this:\n  p = 1\n\ngoal (1 subgoal):\n 1. q = \\<infinity>", "using \\<open>1/p + 1/q = 1\\<close>"], ["proof (prove)\nusing this:\n  p = 1\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. q = \\<infinity>", "by simp"], ["proof (state)\nthis:\n  q = \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "define g where \"g = (\\<lambda>x. sgn (f x))\""], ["proof (state)\nthis:\n  g = (\\<lambda>x. sgn (f x))\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have [measurable]: \"g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)", "apply (rule L_infinity_I[of g M 1])"], ["proof (prove)\ngoal (3 subgoals):\n 1. g \\<in> borel_measurable M\n 2. AE x in M. \\<bar>g x\\<bar> \\<le> 1\n 3. 0 \\<le> 1", "unfolding g_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. sgn (f x)) \\<in> borel_measurable M\n 2. AE x in M. \\<bar>sgn (f x)\\<bar> \\<le> 1\n 3. 0 \\<le> 1", "by (auto simp add: abs_sgn_eq)"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"Norm (\\<LL> \\<infinity> M) g \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> M) g \\<le> 1", "apply (rule L_infinity_I[of g M 1])"], ["proof (prove)\ngoal (3 subgoals):\n 1. g \\<in> borel_measurable M\n 2. AE x in M. \\<bar>g x\\<bar> \\<le> 1\n 3. 0 \\<le> 1", "unfolding g_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. sgn (f x)) \\<in> borel_measurable M\n 2. AE x in M. \\<bar>sgn (f x)\\<bar> \\<le> 1\n 3. 0 \\<le> 1", "by (auto simp add: abs_sgn_eq)"], ["proof (state)\nthis:\n  Norm (\\<LL> \\<infinity> M) g \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"Norm (\\<LL> p M) f = (\\<integral>x. \\<bar>f x\\<bar> \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f = LINT x|M. \\<bar>f x\\<bar>", "unfolding \\<open>p = 1\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> 1 M) f = LINT x|M. \\<bar>f x\\<bar>", "apply (rule L1_D(3))"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M)", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M)", "unfolding \\<open>p = 1\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> 1 M)\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> 1 M)", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f = LINT x|M. \\<bar>f x\\<bar>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f = LINT x|M. \\<bar>f x\\<bar>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (\\<integral>x. f x * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> = LINT x|M. f x * g x", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>f x\\<bar> = LINT x|M. f x * sgn (f x)", "by (simp add: abs_sgn)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x\\<bar> = LINT x|M. f x * g x\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>f x\\<bar> = LINT x|M. f x * g x\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "unfolding \\<open>q = \\<infinity>\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M).\n                            Norm (\\<LL> \\<infinity> M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "apply (rule cSUP_upper, auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> \\<top> M)\n 2. Norm (\\<LL> \\<top> M) g \\<le> 1\n 3. bdd_above\n     ((\\<lambda>x. LINT xa|M. f xa * x xa) `\n      {g \\<in> space\\<^sub>N (\\<LL> \\<top> M).\n       Norm (\\<LL> \\<top> M) g \\<le> 1})", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\\<close> \\<open>Norm (\\<LL> \\<infinity> M) g \\<le> 1\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) g \\<le> 1\n\ngoal (3 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> \\<top> M)\n 2. Norm (\\<LL> \\<top> M) g \\<le> 1\n 3. bdd_above\n     ((\\<lambda>x. LINT xa|M. f xa * x xa) `\n      {g \\<in> space\\<^sub>N (\\<LL> \\<top> M).\n       Norm (\\<LL> \\<top> M) g \\<le> 1})", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> \\<top> M);\n     Norm (\\<LL> \\<top> M) g \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> bdd_above\n                       ((\\<lambda>x. LINT xa|M. f xa * x xa) `\n                        {g \\<in> space\\<^sub>N (\\<LL> \\<top> M).\n                         Norm (\\<LL> \\<top> M) g \\<le> 1})", "using B \\<open>q = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n  q = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> \\<top> M);\n     Norm (\\<LL> \\<top> M) g \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> bdd_above\n                       ((\\<lambda>x. LINT xa|M. f xa * x xa) `\n                        {g \\<in> space\\<^sub>N (\\<LL> \\<top> M).\n                         Norm (\\<LL> \\<top> M) g \\<le> 1})", "by fastforce"], ["proof (state)\nthis:\n  LINT x|M. f x * g x\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)\n 2. p = 1 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "case (gr p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  1 < p2\n  1 < p\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  p = ennreal p2\n  1 < p2\n  1 < p", "have \"p2 > 0\""], ["proof (prove)\nusing this:\n  p = ennreal p2\n  1 < p2\n  1 < p\n\ngoal (1 subgoal):\n 1. 0 < p2", "by simp"], ["proof (state)\nthis:\n  0 < p2\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "have \"f \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n  p = ennreal p2\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "define q2 where \"q2 = conjugate_exponent p2\""], ["proof (state)\nthis:\n  q2 = conjugate_exponent p2\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "have \"q2 > 1\" \"q2 > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 < q2 &&& 0 < q2", "using conjugate_exponent_real(2)[OF \\<open>p2 > 1\\<close>]"], ["proof (prove)\nusing this:\n  1 < conjugate_exponent p2\n\ngoal (1 subgoal):\n 1. 1 < q2 &&& 0 < q2", "unfolding q2_def"], ["proof (prove)\nusing this:\n  1 < conjugate_exponent p2\n\ngoal (1 subgoal):\n 1. 1 < conjugate_exponent p2 &&& 0 < conjugate_exponent p2", "by auto"], ["proof (state)\nthis:\n  1 < q2\n  0 < q2\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "have \"q = ennreal q2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q = ennreal q2", "unfolding q2_def conjugate_exponent_real_ennreal[OF \\<open>p2 > 1\\<close>, symmetric] \\<open>p = ennreal p2\\<close>[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. q = conjugate_exponent p", "using conjugate_exponent_ennreal_iff[OF \\<open>p \\<ge> 1\\<close>] \\<open>1/p + 1/q = 1\\<close>"], ["proof (prove)\nusing this:\n  (?q = conjugate_exponent p) = (1 / p + 1 / ?q = 1)\n  1 / p + 1 / q = 1\n\ngoal (1 subgoal):\n 1. q = conjugate_exponent p", "by auto"], ["proof (state)\nthis:\n  q = ennreal q2\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 1 < p2; 1 < p\\<rbrakk>\n       \\<Longrightarrow> Norm (\\<LL> p M) f\n                         \\<le> (\\<Squnion>g\\<in>{g\n           \\<in> space\\<^sub>N (\\<LL> q M).\n           Norm (\\<LL> q M) g \\<le> 1}.\n                                   LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "proof (cases \"Norm (\\<LL> p M) f = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. Norm (\\<LL> p M) f = 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 2. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "case True"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f = 0\n\ngoal (2 subgoals):\n 1. Norm (\\<LL> p M) f = 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 2. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) f = 0", "have \"Norm (\\<LL> p M) f \\<le> (\\<integral>x. f x * 0 x \\<partial>M)\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) f = 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<le> LINT x|M. f x * 0 x", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f \\<le> LINT x|M. f x * 0 x\n\ngoal (2 subgoals):\n 1. Norm (\\<LL> p M) f = 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 2. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f \\<le> LINT x|M. f x * 0 x\n\ngoal (2 subgoals):\n 1. Norm (\\<LL> p M) f = 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 2. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * 0 x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "apply (rule cSUP_upper, auto simp add: zero_fun_def[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})", "using B"], ["proof (prove)\nusing this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})", "by (meson bdd_aboveI2)"], ["proof (state)\nthis:\n  LINT x|M. f x * 0 x\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (2 subgoals):\n 1. Norm (\\<LL> p M) f = 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)\n 2. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "case False"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) f \\<noteq> 0", "have \"Norm (\\<LL> p2 M) f > 0\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) f \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < Norm (\\<LL> (ennreal p2) M) f", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) f \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < Norm (\\<LL> (ennreal p2) M) f", "using Norm_nonneg[of \"\\<LL> p2 M\" f]"], ["proof (prove)\nusing this:\n  Norm (\\<LL> (ennreal p2) M) f \\<noteq> 0\n  0 \\<le> Norm (\\<LL> (ennreal p2) M) f\n\ngoal (1 subgoal):\n 1. 0 < Norm (\\<LL> (ennreal p2) M) f", "by linarith"], ["proof (state)\nthis:\n  0 < Norm (\\<LL> (ennreal p2) M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "define h where \"h = (\\<lambda>x. sgn(f x) * \\<bar>f x\\<bar> powr (p2 - 1))\""], ["proof (state)\nthis:\n  h = (\\<lambda>x. sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have [measurable]: \"h \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> borel_measurable M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1))\n    \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  h \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"(\\<integral>\\<^sup>+x. \\<bar>h x\\<bar> powr q2 \\<partial>M) = (\\<integral>\\<^sup>+x. (\\<bar>f x\\<bar> powr (p2 - 1)) powr q2 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                       \\<partial>M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (\\<bar>sgn (f x) *\n                                   \\<bar>f x\\<bar> powr (p2 - 1)\\<bar> powr\n                             q2)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                       \\<partial>M", "by (rule nn_integral_cong, auto simp add: abs_mult abs_sgn_eq)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (\\<integral>\\<^sup>+x. \\<bar>f x\\<bar> powr p2 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M", "unfolding powr_powr q2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (\\<bar>f x\\<bar> powr\n                             ((p2 - 1) * conjugate_exponent p2))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M", "using conjugate_exponent_real(4)[OF \\<open>p2 > 1\\<close>]"], ["proof (prove)\nusing this:\n  (p2 - 1) * conjugate_exponent p2 = p2\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (\\<bar>f x\\<bar> powr\n                             ((p2 - 1) * conjugate_exponent p2))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal ((\\<bar>f x\\<bar> powr (p2 - 1)) powr q2)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (Norm (\\<LL> p2 M) f) powr p2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M =\n    ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)", "apply (subst Lp_Norm(2), auto simp add: \\<open>p2 > 0\\<close>)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M =\n    ennreal (LINT x|M. \\<bar>f x\\<bar> powr p2)", "by (rule nn_integral_eq_integral, auto simp add: Lp_D(2)[OF \\<open>p2 > 0\\<close> \\<open>f \\<in> space\\<^sub>N (\\<LL> p2 M)\\<close>])"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>f x\\<bar> powr p2) \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)", "have *: \"(\\<integral>\\<^sup>+x. \\<bar>h x\\<bar> powr q2 \\<partial>M) = (Norm (\\<LL> p2 M) f) powr p2\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n    ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)", "apply (rule integrableI_bounded, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M\n    < \\<top>", "using *"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M\n    < \\<top>", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)", "have \"(\\<integral>x. \\<bar>h x\\<bar> powr q2 \\<partial>M) = (\\<integral>\\<^sup>+x. \\<bar>h x\\<bar> powr q2 \\<partial>M)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)\n\ngoal (1 subgoal):\n 1. ennreal (LINT x|M. \\<bar>h x\\<bar> powr q2) =\n    \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M", "by (rule nn_integral_eq_integral[symmetric], auto)"], ["proof (state)\nthis:\n  ennreal (LINT x|M. \\<bar>h x\\<bar> powr q2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  ennreal (LINT x|M. \\<bar>h x\\<bar> powr q2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M", "have **: \"(\\<integral>x. \\<bar>h x\\<bar> powr q2 \\<partial>M) = (Norm (\\<LL> p2 M) f) powr p2\""], ["proof (prove)\nusing this:\n  ennreal (LINT x|M. \\<bar>h x\\<bar> powr q2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>h x\\<bar> powr q2 =\n    Norm (\\<LL> (ennreal p2) M) f powr p2", "using *"], ["proof (prove)\nusing this:\n  ennreal (LINT x|M. \\<bar>h x\\<bar> powr q2) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (\\<bar>h x\\<bar> powr q2) \\<partial>M =\n  ennreal (Norm (\\<LL> (ennreal p2) M) f powr p2)\n\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>h x\\<bar> powr q2 =\n    Norm (\\<LL> (ennreal p2) M) f powr p2", "by auto"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>h x\\<bar> powr q2 = Norm (\\<LL> (ennreal p2) M) f powr p2\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "define g where \"g = (\\<lambda>x. h x / (Norm (\\<LL> p2 M) f) powr (p2 / q2))\""], ["proof (state)\nthis:\n  g = (\\<lambda>x. h x / Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have [measurable]: \"g \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> borel_measurable M", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. h x / Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2))\n    \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have intg: \"integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x.\n         \\<bar>h x / Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\\<bar> powr\n         q2)", "using \\<open>Norm (\\<LL> p2 M) f > 0\\<close> \\<open>q2 > 1\\<close>"], ["proof (prove)\nusing this:\n  0 < Norm (\\<LL> (ennreal p2) M) f\n  1 < q2\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x.\n         \\<bar>h x / Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\\<bar> powr\n         q2)", "apply (simp add: abs_mult powr_divide powr_powr)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < Norm (\\<LL> (ennreal p2) M) f; 1 < q2\\<rbrakk>\n    \\<Longrightarrow> integrable M\n                       (\\<lambda>x.\n                           \\<bar>h x\\<bar> powr q2 /\n                           Norm (\\<LL> (ennreal p2) M) f powr p2)", "using \\<open>integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)\\<close> integrable_divide_zero"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. \\<bar>h x\\<bar> powr q2)\n  (?c \\<noteq> (0::?'b) \\<Longrightarrow>\n   integrable ?M ?f) \\<Longrightarrow>\n  integrable ?M (\\<lambda>x. ?f x / ?c)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < Norm (\\<LL> (ennreal p2) M) f; 1 < q2\\<rbrakk>\n    \\<Longrightarrow> integrable M\n                       (\\<lambda>x.\n                           \\<bar>h x\\<bar> powr q2 /\n                           Norm (\\<LL> (ennreal p2) M) f powr p2)", "by blast"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. \\<bar>g x\\<bar> powr q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"g \\<in> space\\<^sub>N (\\<LL> q2 M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)", "by (rule Lp_I(1)[OF \\<open>q2 > 0\\<close> _ intg], auto)"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"(\\<integral>x. \\<bar>g x\\<bar> powr q2 \\<partial>M) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q2 = 1", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       \\<bar>h x / Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\\<bar> powr\n       q2 =\n    1", "using \\<open>Norm (\\<LL> p2 M) f > 0\\<close> \\<open>q2 > 1\\<close>"], ["proof (prove)\nusing this:\n  0 < Norm (\\<LL> (ennreal p2) M) f\n  1 < q2\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       \\<bar>h x / Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\\<bar> powr\n       q2 =\n    1", "by (simp add: abs_mult powr_divide powr_powr **)"], ["proof (state)\nthis:\n  LINT x|M. \\<bar>g x\\<bar> powr q2 = 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  LINT x|M. \\<bar>g x\\<bar> powr q2 = 1", "have \"Norm (\\<LL> q2 M) g = 1\""], ["proof (prove)\nusing this:\n  LINT x|M. \\<bar>g x\\<bar> powr q2 = 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal q2) M) g = 1", "apply (subst Lp_D[OF \\<open>q2 > 0\\<close>])"], ["proof (prove)\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q2 = 1 \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q2 = 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2) = 1", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q2 M)\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n\ngoal (2 subgoals):\n 1. LINT x|M. \\<bar>g x\\<bar> powr q2 = 1 \\<Longrightarrow>\n    g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n 2. LINT x|M. \\<bar>g x\\<bar> powr q2 = 1 \\<Longrightarrow>\n    (LINT x|M. \\<bar>g x\\<bar> powr q2) powr (1 / q2) = 1", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal q2) M) g = 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"(\\<integral>x. f x * g x \\<partial>M) = (\\<integral>x. f x * sgn(f x) * \\<bar>f x\\<bar> powr (p2 - 1) / (Norm (\\<LL> p2 M) f) powr (p2 / q2) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x =\n    LINT x|M.\n       f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n       Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)", "unfolding g_def h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       f x *\n       (sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n        Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)) =\n    LINT x|M.\n       f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n       Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)", "by (simp add: mult.assoc)"], ["proof (state)\nthis:\n  LINT x|M. f x * g x =\n  LINT x|M.\n     f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n     Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  LINT x|M. f x * g x =\n  LINT x|M.\n     f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n     Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2-1) \\<partial>M) / (Norm (\\<LL> p2 M) f) powr (p2 / q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n       Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n    (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2 - 1)) /\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)", "by (auto simp add: abs_sgn)"], ["proof (state)\nthis:\n  LINT x|M.\n     f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n     Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2 - 1)) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     f x * sgn (f x) * \\<bar>f x\\<bar> powr (p2 - 1) /\n     Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2 - 1)) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (\\<integral>x. \\<bar>f x\\<bar> powr p2 \\<partial>M) / (Norm (\\<LL> p2 M) f) powr (p2 / q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2 - 1)) /\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) /\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)", "by (subst powr_mult_base, auto)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2 - 1)) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> * \\<bar>f x\\<bar> powr (p2 - 1)) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (Norm (\\<LL> p2 M) f) powr p2 / (Norm (\\<LL> p2 M) f) powr (p2 / q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. \\<bar>f x\\<bar> powr p2) /\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n    Norm (\\<LL> (ennreal p2) M) f powr p2 /\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)", "by (subst Lp_Norm(2)[OF \\<open>p2 > 0\\<close>], auto)"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  Norm (\\<LL> (ennreal p2) M) f powr p2 /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  (LINT x|M. \\<bar>f x\\<bar> powr p2) /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  Norm (\\<LL> (ennreal p2) M) f powr p2 /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = (Norm (\\<LL> p2 M) f) powr (p2 - p2/q2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) f powr p2 /\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n    Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / q2)", "by (simp add: powr_diff [symmetric] )"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) f powr p2 /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) f powr p2 /\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 / q2) =\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / q2)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... = Norm (\\<LL> p2 M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / q2) =\n    Norm (\\<LL> (ennreal p2) M) f", "unfolding q2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / conjugate_exponent p2) =\n    Norm (\\<LL> (ennreal p2) M) f", "using conjugate_exponent_real(5)[OF \\<open>p2 > 1\\<close>]"], ["proof (prove)\nusing this:\n  p2 - p2 / conjugate_exponent p2 = 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / conjugate_exponent p2) =\n    Norm (\\<LL> (ennreal p2) M) f", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> (ennreal p2) M) f powr (p2 - p2 / q2) =\n  Norm (\\<LL> (ennreal p2) M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. f x * g x = Norm (\\<LL> (ennreal p2) M) f", "have \"Norm (\\<LL> p M) f = (\\<integral>x. f x * g x \\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|M. f x * g x = Norm (\\<LL> (ennreal p2) M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f = LINT x|M. f x * g x", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  LINT x|M. f x * g x = Norm (\\<LL> (ennreal p2) M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> (ennreal p2) M) f = LINT x|M. f x * g x", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f = LINT x|M. f x * g x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "also"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f = LINT x|M. f x * g x\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "have \"... \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "unfolding \\<open>q = ennreal q2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * g x\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M).\n                            Norm (\\<LL> (ennreal q2) M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "apply (rule cSUP_upper, auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n 2. Norm (\\<LL> (ennreal q2) M) g \\<le> 1\n 3. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M).\n       Norm (\\<LL> (ennreal q2) M) g \\<le> 1})", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q2 M)\\<close> \\<open>Norm (\\<LL> q2 M) g = 1\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n  Norm (\\<LL> (ennreal q2) M) g = 1\n\ngoal (3 subgoals):\n 1. g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M)\n 2. Norm (\\<LL> (ennreal q2) M) g \\<le> 1\n 3. bdd_above\n     ((\\<lambda>g. LINT x|M. f x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M).\n       Norm (\\<LL> (ennreal q2) M) g \\<le> 1})", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M);\n     Norm (\\<LL> (ennreal q2) M) g = 1\\<rbrakk>\n    \\<Longrightarrow> bdd_above\n                       ((\\<lambda>g. LINT x|M. f x * g x) `\n                        {g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M).\n                         Norm (\\<LL> (ennreal q2) M) g \\<le> 1})", "using B \\<open>q = ennreal q2\\<close>"], ["proof (prove)\nusing this:\n  ?g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M).\n            Norm (\\<LL> q M) g \\<le> 1} \\<Longrightarrow>\n  LINT x|M. f x * ?g x \\<le> Norm (\\<LL> p M) f\n  q = ennreal q2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M);\n     Norm (\\<LL> (ennreal q2) M) g = 1\\<rbrakk>\n    \\<Longrightarrow> bdd_above\n                       ((\\<lambda>g. LINT x|M. f x * g x) `\n                        {g \\<in> space\\<^sub>N (\\<LL> (ennreal q2) M).\n                         Norm (\\<LL> (ennreal q2) M) g \\<le> 1})", "by fastforce"], ["proof (state)\nthis:\n  LINT x|M. f x * g x\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f \\<noteq> 0 \\<Longrightarrow>\n    Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "finally"], ["proof (chain)\npicking this:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              LINT x|M. f x * g x)", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            LINT x|M. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Norm (\\<LL> p M) f =\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n      LINT x|M. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The previous theorem admits a version in which one does not assume a priori that the\nfunction under consideration belongs to $L^p$. This gives an efficient criterion to check\nif a function is indeed in $L^p$. In this case, it is always necessary to assume that the\nmeasure is sigma-finite.\n\nNote that, in the statement, the Bochner integral $\\int fg$ vanishes by definition if\n$fg$ is not integrable. Hence, the statement really says that the eNorm can be estimated\nusing functions $g$ for which $fg$ is integrable. It is precisely the construction of such\nfunctions $g$ that requires the space to be sigma-finite.\\<close>"], ["", "theorem Lp_Lq_duality':\n  fixes p q::ennreal\n  assumes \"1/p + 1/q = 1\"\n          \"sigma_finite_measure M\"\n      and [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"eNorm (\\<LL> p M) f = (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. ennreal(\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "proof (cases \"eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))\n 2. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "case True"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))\n 2. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>", "have \"f \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "unfolding space\\<^sub>N_def"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> {f. eNorm (\\<LL> p M) f < \\<infinity>}", "by (simp add: top.not_eq_extremum)"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))\n 2. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "unfolding eNorm_Norm[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>] Lp_Lq_duality[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>1/p + 1/q = 1\\<close> \\<open>sigma_finite_measure M\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal\n     (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                       Norm (\\<LL> q M) g \\<le> 1}.\n         LINT x|M. f x * g x) =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "apply (rule SUP_real_ennreal[symmetric], auto, rule exI[of _ 0], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. bdd_above\n     ((\\<lambda>a. LINT x|M. f x * a x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})", "by (rule Lp_Lq_duality[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>1/p + 1/q = 1\\<close> \\<open>sigma_finite_measure M\\<close>])"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f =\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n      ennreal (LINT x|M. f x * g x))\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "case False"], ["proof (state)\nthis:\n  \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "have B: \"\\<exists>g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * g x \\<partial>M) \\<ge> C\" if \"C < \\<infinity>\" for C::ennreal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "obtain Cr where \"C = ennreal Cr\" \"Cr \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Cr.\n        \\<lbrakk>C = ennreal Cr; 0 \\<le> Cr\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>C < \\<infinity>\\<close> ennreal_cases less_irrefl"], ["proof (prove)\nusing this:\n  C < \\<infinity>\n  \\<lbrakk>\\<And>r.\n              \\<lbrakk>0 \\<le> r; ?x = ennreal r\\<rbrakk>\n              \\<Longrightarrow> ?thesis;\n   ?x = \\<top> \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<not> ?x < ?x\n\ngoal (1 subgoal):\n 1. (\\<And>Cr.\n        \\<lbrakk>C = ennreal Cr; 0 \\<le> Cr\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  C = ennreal Cr\n  0 \\<le> Cr\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "obtain A where A: \"\\<And>n::nat. A n \\<in> sets M\" \"incseq A\" \"(\\<Union>n. A n) = space M\"\n            \"\\<And>n. emeasure M (A n) \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>\\<And>n. A n \\<in> sets M; incseq A;\n         \\<Union> (range A) = space M;\n         \\<And>n. emeasure M (A n) \\<noteq> \\<infinity>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using sigma_finite_measure.sigma_finite_incseq[OF \\<open>sigma_finite_measure M\\<close>]"], ["proof (prove)\nusing this:\n  (\\<And>A.\n      \\<lbrakk>range A \\<subseteq> sets M; \\<Union> (range A) = space M;\n       \\<And>i. emeasure M (A i) \\<noteq> \\<infinity>; incseq A\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>\\<And>n. A n \\<in> sets M; incseq A;\n         \\<Union> (range A) = space M;\n         \\<And>n. emeasure M (A n) \\<noteq> \\<infinity>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis range_subsetD)"], ["proof (state)\nthis:\n  A ?n \\<in> sets M\n  incseq A\n  \\<Union> (range A) = space M\n  emeasure M (A ?n) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "define Y where \"Y = (\\<lambda>n. {x \\<in> A n. \\<bar>f x\\<bar> \\<le> n})\""], ["proof (state)\nthis:\n  Y = (\\<lambda>n. {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n})\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have [measurable]: \"\\<And>n. Y n \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. Y n \\<in> sets M", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n} \\<in> sets M", "using \\<open>\\<And>n::nat. A n \\<in> sets M\\<close>"], ["proof (prove)\nusing this:\n  A ?n \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<And>n. {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n} \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  Y ?n \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have \"incseq Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. incseq Y", "apply (rule incseq_SucI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. Y n \\<subseteq> Y (Suc n)", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n}\n       \\<subseteq> {x \\<in> A (Suc n). \\<bar>f x\\<bar> \\<le> real (Suc n)}", "using incseq_SucD[OF \\<open>incseq A\\<close>]"], ["proof (prove)\nusing this:\n  A ?i \\<subseteq> A (Suc ?i)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n}\n       \\<subseteq> {x \\<in> A (Suc n). \\<bar>f x\\<bar> \\<le> real (Suc n)}", "by auto"], ["proof (state)\nthis:\n  incseq Y\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have *: \"\\<exists>N. \\<forall>n \\<ge> N. f x * indicator (Y n) x = f x\" if \"x \\<in> space M\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "obtain n0 where n0: \"x \\<in> A n0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n0. x \\<in> A n0 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>x \\<in> space M\\<close> \\<open>(\\<Union>n. A n) = space M\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> space M\n  \\<Union> (range A) = space M\n\ngoal (1 subgoal):\n 1. (\\<And>n0. x \\<in> A n0 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> A n0\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "obtain n1::nat where n1: \"\\<bar>f x\\<bar> \\<le> n1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n1.\n        \\<bar>f x\\<bar> \\<le> real n1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using real_arch_simple"], ["proof (prove)\nusing this:\n  \\<exists>n. ?x \\<le> of_nat n\n\ngoal (1 subgoal):\n 1. (\\<And>n1.\n        \\<bar>f x\\<bar> \\<le> real n1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<bar>f x\\<bar> \\<le> real n1\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "have \"x \\<in> Y (max n0 n1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Y (max n0 n1)", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> {x \\<in> A (max n0 n1). \\<bar>f x\\<bar> \\<le> real (max n0 n1)}", "using n1"], ["proof (prove)\nusing this:\n  \\<bar>f x\\<bar> \\<le> real n1\n\ngoal (1 subgoal):\n 1. x \\<in> {x \\<in> A (max n0 n1). \\<bar>f x\\<bar> \\<le> real (max n0 n1)}", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f x\\<bar> \\<le> real n1 \\<Longrightarrow> x \\<in> A (max n0 n1)", "using n0 \\<open>incseq A\\<close> incseq_def max.cobounded1"], ["proof (prove)\nusing this:\n  x \\<in> A n0\n  incseq A\n  incseq ?X = (\\<forall>m n. m \\<le> n \\<longrightarrow> ?X m \\<le> ?X n)\n  ?a \\<le> max ?a ?b\n\ngoal (1 subgoal):\n 1. \\<bar>f x\\<bar> \\<le> real n1 \\<Longrightarrow> x \\<in> A (max n0 n1)", "by blast"], ["proof (state)\nthis:\n  x \\<in> Y (max n0 n1)\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "then"], ["proof (chain)\npicking this:\n  x \\<in> Y (max n0 n1)", "have *: \"x \\<in> Y n\" if \"n \\<ge> max n0 n1\" for n"], ["proof (prove)\nusing this:\n  x \\<in> Y (max n0 n1)\n\ngoal (1 subgoal):\n 1. x \\<in> Y n", "using \\<open>incseq Y\\<close> that incseq_def"], ["proof (prove)\nusing this:\n  x \\<in> Y (max n0 n1)\n  incseq Y\n  max n0 n1 \\<le> n\n  incseq ?X = (\\<forall>m n. m \\<le> n \\<longrightarrow> ?X m \\<le> ?X n)\n\ngoal (1 subgoal):\n 1. x \\<in> Y n", "by blast"], ["proof (state)\nthis:\n  max n0 n1 \\<le> ?n \\<Longrightarrow> x \\<in> Y ?n\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x", "by (rule exI[of _ \"max n0 n1\"], auto simp add: *)"], ["proof (state)\nthis:\n  \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> space M \\<Longrightarrow>\n  \\<exists>N. \\<forall>n\\<ge>N. f ?x * indicat_real (Y n) ?x = f ?x\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have *: \"(\\<lambda>n. f x * indicator (Y n) x) \\<longlonglongrightarrow> f x\" if \"x \\<in> space M\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f x * indicat_real (Y n) x) \\<longlonglongrightarrow> f x", "using *[OF that]"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. f x * indicat_real (Y n) x = f x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f x * indicat_real (Y n) x) \\<longlonglongrightarrow> f x", "unfolding eventually_sequentially[symmetric]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. f x * indicat_real (Y n) x = f x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f x * indicat_real (Y n) x) \\<longlonglongrightarrow> f x", "by (simp add: tendsto_eventually)"], ["proof (state)\nthis:\n  ?x \\<in> space M \\<Longrightarrow>\n  (\\<lambda>n. f ?x * indicat_real (Y n) ?x) \\<longlonglongrightarrow> f ?x\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have \"liminf (\\<lambda>n. eNorm (\\<LL> p M) (\\<lambda>x. f x * indicator (Y n) x)) \\<ge> eNorm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f\n    \\<le> liminf\n           (\\<lambda>n.\n               eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "apply (rule Lp_AE_limit)"], ["proof (prove)\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M\n 2. AE x in M. (\\<lambda>n. f x * indicat_real (Y n) x)\n               \\<longlonglongrightarrow> f x", "using *"], ["proof (prove)\nusing this:\n  ?x \\<in> space M \\<Longrightarrow>\n  (\\<lambda>n. f ?x * indicat_real (Y n) ?x) \\<longlonglongrightarrow> f ?x\n\ngoal (2 subgoals):\n 1. f \\<in> borel_measurable M\n 2. AE x in M. (\\<lambda>n. f x * indicat_real (Y n) x)\n               \\<longlonglongrightarrow> f x", "by auto"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f\n  \\<le> liminf\n         (\\<lambda>n.\n             eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) f\n  \\<le> liminf\n         (\\<lambda>n.\n             eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "have \"liminf (\\<lambda>n. eNorm (\\<LL> p M) (\\<lambda>x. f x * indicator (Y n) x)) > Cr\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f\n  \\<le> liminf\n         (\\<lambda>n.\n             eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. ennreal Cr\n    < liminf\n       (\\<lambda>n.\n           eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "using False neq_top_trans"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f\n  \\<le> liminf\n         (\\<lambda>n.\n             eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n  \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n  \\<lbrakk>?y \\<noteq> \\<top>; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x \\<noteq> \\<top>\n\ngoal (1 subgoal):\n 1. ennreal Cr\n    < liminf\n       (\\<lambda>n.\n           eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "by force"], ["proof (state)\nthis:\n  ennreal Cr\n  < liminf\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  ennreal Cr\n  < liminf\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "have \"limsup (\\<lambda>n. eNorm (\\<LL> p M) (\\<lambda>x. f x * indicator (Y n) x)) > Cr\""], ["proof (prove)\nusing this:\n  ennreal Cr\n  < liminf\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. ennreal Cr\n    < limsup\n       (\\<lambda>n.\n           eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "using Liminf_le_Limsup less_le_trans trivial_limit_sequentially"], ["proof (prove)\nusing this:\n  ennreal Cr\n  < liminf\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n  ?F \\<noteq> \\<bottom> \\<Longrightarrow> Liminf ?F ?f \\<le> Limsup ?F ?f\n  \\<lbrakk>?x < ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n  sequentially \\<noteq> \\<bottom>\n\ngoal (1 subgoal):\n 1. ennreal Cr\n    < limsup\n       (\\<lambda>n.\n           eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "by blast"], ["proof (state)\nthis:\n  ennreal Cr\n  < limsup\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  ennreal Cr\n  < limsup\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))", "obtain n where n: \"eNorm (\\<LL> p M) (\\<lambda>x. f x * indicator (Y n) x) > Cr\""], ["proof (prove)\nusing this:\n  ennreal Cr\n  < limsup\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        ennreal Cr\n        < eNorm (\\<LL> p M)\n           (\\<lambda>x. f x * indicat_real (Y n) x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Limsup_obtain"], ["proof (prove)\nusing this:\n  ennreal Cr\n  < limsup\n     (\\<lambda>n.\n         eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n  ?c < Limsup ?F ?u \\<Longrightarrow> \\<exists>i. ?c < ?u i\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        ennreal Cr\n        < eNorm (\\<LL> p M)\n           (\\<lambda>x. f x * indicat_real (Y n) x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  ennreal Cr < eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have \"(\\<lambda>x. f x * indicator (Y n) x) \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * indicat_real (Y n) x) \\<in> space\\<^sub>N (\\<LL> p M)", "apply (rule Lp_bounded_bounded_support[of _ _ n], auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. AE x in M. \\<bar>f x * indicat_real (Y n) x\\<bar> \\<le> real n\n 2. emeasure M\n     {x \\<in> space M.\n      f x \\<noteq> 0 \\<and> indicat_real (Y n) x \\<noteq> 0} =\n    \\<top> \\<Longrightarrow>\n    False", "unfolding Y_def indicator_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. AE x in M. \\<bar>f x *\n                     (if x \\<in> {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n}\n                      then 1 else 0)\\<bar>\n               \\<le> real n\n 2. emeasure M\n     {x \\<in> space M.\n      f x \\<noteq> 0 \\<and>\n      (if x \\<in> {x \\<in> A n. \\<bar>f x\\<bar> \\<le> real n} then 1\n       else 0) \\<noteq>\n      0} =\n    \\<top> \\<Longrightarrow>\n    False", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> space M.\n      f x \\<noteq> 0 \\<and>\n      (if x \\<in> A n \\<and> \\<bar>f x\\<bar> \\<le> real n then 1\n       else 0) \\<noteq>\n      0} =\n    \\<top> \\<Longrightarrow>\n    False", "by (metis (mono_tags, lifting) A(1) A(4) emeasure_mono infinity_ennreal_def mem_Collect_eq neq_top_trans subsetI)"], ["proof (state)\nthis:\n  (\\<lambda>x. f x * indicat_real (Y n) x) \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have \"Norm (\\<LL> p M) (\\<lambda>x. f x * indicator (Y n) x) > Cr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)", "using n"], ["proof (prove)\nusing this:\n  ennreal Cr < eNorm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)\n\ngoal (1 subgoal):\n 1. Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)", "unfolding eNorm_Norm[OF \\<open>(\\<lambda>x. f x * indicator (Y n) x) \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  ennreal Cr\n  < ennreal (Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x))\n\ngoal (1 subgoal):\n 1. Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)", "by (meson ennreal_leI not_le)"], ["proof (state)\nthis:\n  Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)", "have \"(SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * indicator (Y n) x * g x \\<partial>M)) > Cr\""], ["proof (prove)\nusing this:\n  Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)\n\ngoal (1 subgoal):\n 1. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x)", "using Lp_Lq_duality(2)[OF \\<open>(\\<lambda>x. f x * indicator (Y n) x) \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>1/p + 1/q = 1\\<close> \\<open>sigma_finite_measure M\\<close>]"], ["proof (prove)\nusing this:\n  Cr < Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x)\n  Norm (\\<LL> p M) (\\<lambda>x. f x * indicat_real (Y n) x) =\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n      LINT x|M. f x * indicat_real (Y n) x * g x)\n\ngoal (1 subgoal):\n 1. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x)", "by auto"], ["proof (state)\nthis:\n  Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                         Norm (\\<LL> q M) g \\<le> 1}.\n           LINT x|M. f x * indicat_real (Y n) x * g x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                         Norm (\\<LL> q M) g \\<le> 1}.\n           LINT x|M. f x * indicat_real (Y n) x * g x)", "have \"\\<exists>g \\<in> {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. (\\<integral>x. f x * indicator (Y n) x * g x \\<partial>M) > Cr\""], ["proof (prove)\nusing this:\n  Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                         Norm (\\<LL> q M) g \\<le> 1}.\n           LINT x|M. f x * indicat_real (Y n) x * g x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       Cr < LINT x|M. f x * indicat_real (Y n) x * g x", "apply (subst less_cSUP_iff[symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x) \\<Longrightarrow>\n    {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1} \\<noteq>\n    {}\n 2. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x) \\<Longrightarrow>\n    bdd_above\n     ((\\<lambda>g. LINT x|M. f x * indicat_real (Y n) x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n 3. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x) \\<Longrightarrow>\n    Cr < (\\<Squnion>i\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * i x)", "using Lp_Lq_duality(1)[OF \\<open>(\\<lambda>x. f x * indicator (Y n) x) \\<in> space\\<^sub>N (\\<LL> p M)\\<close> \\<open>1/p + 1/q = 1\\<close> \\<open>sigma_finite_measure M\\<close>]"], ["proof (prove)\nusing this:\n  bdd_above\n   ((\\<lambda>g. LINT x|M. f x * indicat_real (Y n) x * g x) `\n    {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n\ngoal (3 subgoals):\n 1. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x) \\<Longrightarrow>\n    {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1} \\<noteq>\n    {}\n 2. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x) \\<Longrightarrow>\n    bdd_above\n     ((\\<lambda>g. LINT x|M. f x * indicat_real (Y n) x * g x) `\n      {g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1})\n 3. Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * g x) \\<Longrightarrow>\n    Cr < (\\<Squnion>i\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                           Norm (\\<LL> q M) g \\<le> 1}.\n             LINT x|M. f x * indicat_real (Y n) x * i x)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Cr < (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                                    Norm (\\<LL> q M) g \\<le> 1}.\n                      LINT x|M. f x * indicat_real (Y n) x * g x);\n     bdd_above\n      ((\\<lambda>g. LINT x|M. f x * indicat_real (Y n) x * g x) `\n       {g \\<in> space\\<^sub>N (\\<LL> q M).\n        Norm (\\<LL> q M) g \\<le> 1})\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         x \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                         Norm (\\<LL> q M) x \\<le> 1", "by (rule exI[of _ 0], auto)"], ["proof (state)\nthis:\n  \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                  Norm (\\<LL> q M) g \\<le> 1}.\n     Cr < LINT x|M. f x * indicat_real (Y n) x * g x\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                  Norm (\\<LL> q M) g \\<le> 1}.\n     Cr < LINT x|M. f x * indicat_real (Y n) x * g x", "obtain g where g: \"g \\<in> space\\<^sub>N (\\<LL> q M)\" \"Norm (\\<LL> q M) g \\<le> 1\" \"(\\<integral>x. f x * indicator (Y n) x * g x \\<partial>M) > Cr\""], ["proof (prove)\nusing this:\n  \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                  Norm (\\<LL> q M) g \\<le> 1}.\n     Cr < LINT x|M. f x * indicat_real (Y n) x * g x\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q M);\n         Norm (\\<LL> q M) g \\<le> 1;\n         Cr < LINT x|M. f x * indicat_real (Y n) x * g x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n  Cr < LINT x|M. f x * indicat_real (Y n) x * g x\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n  Cr < LINT x|M. f x * indicat_real (Y n) x * g x", "have [measurable]: \"g \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n  Cr < LINT x|M. f x * indicat_real (Y n) x * g x\n\ngoal (1 subgoal):\n 1. g \\<in> borel_measurable M", "using Lp_measurable"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n  Cr < LINT x|M. f x * indicat_real (Y n) x * g x\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. g \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "define h where \"h = (\\<lambda>x. indicator (Y n) x * g x)\""], ["proof (state)\nthis:\n  h = (\\<lambda>x. indicat_real (Y n) x * g x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have \"Norm (\\<LL> q M) h \\<le> Norm (\\<LL> q M) g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> q M) h \\<le> Norm (\\<LL> q M) g", "apply (rule Lp_domination[of _ _ g])"], ["proof (prove)\ngoal (3 subgoals):\n 1. h \\<in> borel_measurable M\n 2. g \\<in> space\\<^sub>N (\\<LL> q M)\n 3. AE x in M. \\<bar>h x\\<bar> \\<le> \\<bar>g x\\<bar>", "unfolding h_def indicator_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. (if x \\<in> Y n then 1 else 0) * g x)\n    \\<in> borel_measurable M\n 2. g \\<in> space\\<^sub>N (\\<LL> q M)\n 3. AE x in M. \\<bar>(if x \\<in> Y n then 1 else 0) * g x\\<bar>\n               \\<le> \\<bar>g x\\<bar>", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. (if x \\<in> Y n then 1 else 0) * g x)\n    \\<in> borel_measurable M\n 2. g \\<in> space\\<^sub>N (\\<LL> q M)\n 3. AE x in M. \\<bar>(if x \\<in> Y n then 1 else 0) * g x\\<bar>\n               \\<le> \\<bar>g x\\<bar>", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> q M) h \\<le> Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> q M) h \\<le> Norm (\\<LL> q M) g", "have a: \"Norm (\\<LL> q M) h \\<le> 1\""], ["proof (prove)\nusing this:\n  Norm (\\<LL> q M) h \\<le> Norm (\\<LL> q M) g\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> q M) h \\<le> 1", "using \\<open>Norm (\\<LL> q M) g \\<le> 1\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> q M) h \\<le> Norm (\\<LL> q M) g\n  Norm (\\<LL> q M) g \\<le> 1\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> q M) h \\<le> 1", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> q M) h \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have b: \"h \\<in> space\\<^sub>N (\\<LL> q M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> space\\<^sub>N (\\<LL> q M)", "apply (rule Lp_domination[of _ _ g])"], ["proof (prove)\ngoal (3 subgoals):\n 1. h \\<in> borel_measurable M\n 2. g \\<in> space\\<^sub>N (\\<LL> q M)\n 3. AE x in M. \\<bar>h x\\<bar> \\<le> \\<bar>g x\\<bar>", "unfolding h_def indicator_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. (if x \\<in> Y n then 1 else 0) * g x)\n    \\<in> borel_measurable M\n 2. g \\<in> space\\<^sub>N (\\<LL> q M)\n 3. AE x in M. \\<bar>(if x \\<in> Y n then 1 else 0) * g x\\<bar>\n               \\<le> \\<bar>g x\\<bar>", "using \\<open>g \\<in> space\\<^sub>N (\\<LL> q M)\\<close>"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. (if x \\<in> Y n then 1 else 0) * g x)\n    \\<in> borel_measurable M\n 2. g \\<in> space\\<^sub>N (\\<LL> q M)\n 3. AE x in M. \\<bar>(if x \\<in> Y n then 1 else 0) * g x\\<bar>\n               \\<le> \\<bar>g x\\<bar>", "by auto"], ["proof (state)\nthis:\n  h \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "have \"(\\<integral>x. f x * h x \\<partial>M) > Cr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Cr < LINT x|M. f x * h x", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Cr < LINT x|M. f x * (indicat_real (Y n) x * g x)", "using g(3)"], ["proof (prove)\nusing this:\n  Cr < LINT x|M. f x * indicat_real (Y n) x * g x\n\ngoal (1 subgoal):\n 1. Cr < LINT x|M. f x * (indicat_real (Y n) x * g x)", "by (auto simp add: mult.assoc)"], ["proof (state)\nthis:\n  Cr < LINT x|M. f x * h x\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  Cr < LINT x|M. f x * h x", "have \"(\\<integral>x. f x * h x \\<partial>M) > C\""], ["proof (prove)\nusing this:\n  Cr < LINT x|M. f x * h x\n\ngoal (1 subgoal):\n 1. C < ennreal (LINT x|M. f x * h x)", "unfolding \\<open>C = ennreal Cr\\<close>"], ["proof (prove)\nusing this:\n  Cr < LINT x|M. f x * h x\n\ngoal (1 subgoal):\n 1. ennreal Cr < ennreal (LINT x|M. f x * h x)", "using \\<open>Cr \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  Cr < LINT x|M. f x * h x\n  0 \\<le> Cr\n\ngoal (1 subgoal):\n 1. ennreal Cr < ennreal (LINT x|M. f x * h x)", "by (simp add: ennreal_less_iff)"], ["proof (state)\nthis:\n  C < ennreal (LINT x|M. f x * h x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "then"], ["proof (chain)\npicking this:\n  C < ennreal (LINT x|M. f x * h x)", "show ?thesis"], ["proof (prove)\nusing this:\n  C < ennreal (LINT x|M. f x * h x)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "using a b"], ["proof (prove)\nusing this:\n  C < ennreal (LINT x|M. f x * h x)\n  Norm (\\<LL> q M) h \\<le> 1\n  h \\<in> space\\<^sub>N (\\<LL> q M)\n\ngoal (1 subgoal):\n 1. \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n       C \\<le> ennreal (LINT x|M. f x * g x)", "by auto"], ["proof (state)\nthis:\n  \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                  Norm (\\<LL> q M) g \\<le> 1}.\n     C \\<le> ennreal (LINT x|M. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?C < \\<infinity> \\<Longrightarrow>\n  \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                  Norm (\\<LL> q M) g \\<le> 1}.\n     ?C \\<le> ennreal (LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "have \"(SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. ennreal(\\<integral>x. f x * g x \\<partial>M)) \\<ge> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<infinity>\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              ennreal (LINT x|M. f x * g x))", "apply (rule dense_le)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x < \\<infinity> \\<Longrightarrow>\n       x \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                                 Norm (\\<LL> q M) g \\<le> 1}.\n                   ennreal (LINT x|M. f x * g x))", "using B"], ["proof (prove)\nusing this:\n  ?C < \\<infinity> \\<Longrightarrow>\n  \\<exists>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                  Norm (\\<LL> q M) g \\<le> 1}.\n     ?C \\<le> ennreal (LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x < \\<infinity> \\<Longrightarrow>\n       x \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                                 Norm (\\<LL> q M) g \\<le> 1}.\n                   ennreal (LINT x|M. f x * g x))", "by (meson SUP_upper2)"], ["proof (state)\nthis:\n  \\<infinity>\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            ennreal (LINT x|M. f x * g x))\n\ngoal (1 subgoal):\n 1. \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "then"], ["proof (chain)\npicking this:\n  \\<infinity>\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            ennreal (LINT x|M. f x * g x))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<infinity>\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            ennreal (LINT x|M. f x * g x))\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "using False neq_top_trans"], ["proof (prove)\nusing this:\n  \\<infinity>\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            ennreal (LINT x|M. f x * g x))\n  \\<not> eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n  \\<lbrakk>?y \\<noteq> \\<top>; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x \\<noteq> \\<top>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x))", "by force"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f =\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n      ennreal (LINT x|M. f x * g x))\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Conditional expectations and $L^p$\\<close>"], ["", "text \\<open>The $L^p$ space with respect to a subalgebra is included in the whole $L^p$ space.\\<close>"], ["", "lemma Lp_subalgebra:\n  assumes \"subalgebra M F\"\n  shows \"\\<And>f. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\"\n        \"(\\<LL> p (restr_to_subalg M F)) \\<subseteq>\\<^sub>N \\<LL> p M\"\n        \"space\\<^sub>N ((\\<LL> p (restr_to_subalg M F))) \\<subseteq> space\\<^sub>N (\\<LL> p M)\"\n        \"\\<And>f. f \\<in> space\\<^sub>N ((\\<LL> p (restr_to_subalg M F))) \\<Longrightarrow> Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>f.\n         eNorm (\\<LL> p M) f\n         \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f) &&&\n     \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M) &&&\n    space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n    \\<subseteq> space\\<^sub>N (\\<LL> p M) &&&\n    (\\<And>f.\n        f \\<in> space\\<^sub>N\n                 (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n        Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f)", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f.\n       eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\n 2. \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M\n 3. space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n    \\<subseteq> space\\<^sub>N (\\<LL> p M)\n 4. \\<And>f.\n       f \\<in> space\\<^sub>N\n                (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n       Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have *: \"f \\<in> space\\<^sub>N (\\<LL> p M) \\<and> Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\"\n       if \"f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have [measurable]: \"f \\<in> borel_measurable (restr_to_subalg M F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable (restr_to_subalg M F)", "using that Lp_measurable"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable (restr_to_subalg M F)", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable (restr_to_subalg M F)\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable (restr_to_subalg M F)", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable (restr_to_subalg M F)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using assms measurable_from_subalg measurable_in_subalg'"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable (restr_to_subalg M F)\n  subalgebra M F\n  \\<lbrakk>subalgebra ?M ?F; ?f \\<in> ?F \\<rightarrow>\\<^sub>M ?N\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n  \\<lbrakk>subalgebra ?M ?F;\n   ?f \\<in> restr_to_subalg ?M ?F \\<rightarrow>\\<^sub>M ?N\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> ?F \\<rightarrow>\\<^sub>M ?N\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "proof (cases rule: Lp_cases[of p])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = 0 \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\n 3. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "case zero"], ["proof (state)\nthis:\n  p = 0\n\ngoal (3 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = 0 \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\n 3. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  p = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  p = 0\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "using that"], ["proof (prove)\nusing this:\n  p = 0\n  f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "unfolding \\<open>p = 0\\<close> L_zero_space Norm_def L_zero"], ["proof (prove)\nusing this:\n  0 = 0\n  f \\<in> borel_measurable (restr_to_subalg M F)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M \\<and>\n    enn2real (if f \\<in> borel_measurable M then 0 else \\<infinity>) =\n    enn2real\n     (if f \\<in> borel_measurable (restr_to_subalg M F) then 0\n      else \\<infinity>)", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "case PInf"], ["proof (state)\nthis:\n  p = \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have [measurable]: \"f \\<in> borel_measurable (restr_to_subalg M F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable (restr_to_subalg M F)", "using that Lp_measurable"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable (restr_to_subalg M F)", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable (restr_to_subalg M F)\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable (restr_to_subalg M F)", "have [measurable]: \"f \\<in> borel_measurable F\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable (restr_to_subalg M F)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable F", "using assms measurable_in_subalg'"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable (restr_to_subalg M F)\n  subalgebra M F\n  \\<lbrakk>subalgebra ?M ?F;\n   ?f \\<in> restr_to_subalg ?M ?F \\<rightarrow>\\<^sub>M ?N\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> ?F \\<rightarrow>\\<^sub>M ?N\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable F", "by blast"], ["proof (state)\nthis:\n  f \\<in> borel_measurable F\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> borel_measurable F", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable F\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using assms measurable_from_subalg"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable F\n  subalgebra M F\n  \\<lbrakk>subalgebra ?M ?F; ?f \\<in> ?F \\<rightarrow>\\<^sub>M ?N\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have \"AE x in (restr_to_subalg M F). \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in restr_to_subalg M\n             F. \\<bar>f x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "using L_infinity_AE_bound that"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n  f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. AE x in restr_to_subalg M\n             F. \\<bar>f x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "unfolding \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. AE x in restr_to_subalg M\n             F. \\<bar>f x\\<bar>\n                \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "by auto"], ["proof (state)\nthis:\n  AE x in restr_to_subalg M\n           F. \\<bar>f x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  AE x in restr_to_subalg M\n           F. \\<bar>f x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "have a: \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\""], ["proof (prove)\nusing this:\n  AE x in restr_to_subalg M\n           F. \\<bar>f x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar>\n               \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "using assms AE_restr_to_subalg"], ["proof (prove)\nusing this:\n  AE x in restr_to_subalg M\n           F. \\<bar>f x\\<bar>\n              \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  subalgebra M F\n  \\<lbrakk>subalgebra ?M ?F;\n   almost_everywhere (restr_to_subalg ?M ?F) ?P\\<rbrakk>\n  \\<Longrightarrow> almost_everywhere ?M ?P\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar>\n               \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "by blast"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar>\n             \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have *: \"f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\" \"Norm (\\<LL> \\<infinity> M) f \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) f\n    \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "using L_infinity_I[OF \\<open>f \\<in> borel_measurable M\\<close> a]"], ["proof (prove)\nusing this:\n  0 \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f \\<Longrightarrow>\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  0 \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f \\<Longrightarrow>\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) &&&\n    Norm (\\<LL> \\<infinity> M) f\n    \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "have b: \"AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "using L_infinity_AE_bound"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  ?f \\<in> space\\<^sub>N (\\<LL> \\<infinity> ?M) \\<Longrightarrow>\n  AE x in ?M. \\<bar>?f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> ?M) ?f\n\ngoal (1 subgoal):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have c: \"AE x in (restr_to_subalg M F). \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in restr_to_subalg M\n             F. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f", "apply (rule AE_restr_to_subalg2[OF assms])"], ["proof (prove)\ngoal (2 subgoals):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n 2. Measurable.pred F\n     (\\<lambda>x. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f)", "using b"], ["proof (prove)\nusing this:\n  AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (2 subgoals):\n 1. AE x in M. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n 2. Measurable.pred F\n     (\\<lambda>x. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f)", "by auto"], ["proof (state)\nthis:\n  AE x in restr_to_subalg M\n           F. \\<bar>f x\\<bar> \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "have \"Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f \\<le> Norm (\\<LL> \\<infinity> M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n    \\<le> Norm (\\<LL> \\<infinity> M) f", "using L_infinity_I[OF \\<open>f \\<in> borel_measurable (restr_to_subalg M F)\\<close> c]"], ["proof (prove)\nusing this:\n  0 \\<le> Norm (\\<LL> \\<infinity> M) f \\<Longrightarrow>\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> (restr_to_subalg M F))\n  0 \\<le> Norm (\\<LL> \\<infinity> M) f \\<Longrightarrow>\n  Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n    \\<le> Norm (\\<LL> \\<infinity> M) f", "by auto"], ["proof (state)\nthis:\n  Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (2 subgoals):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f\n 2. p = \\<infinity> \\<Longrightarrow>\n    f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  \\<le> Norm (\\<LL> \\<infinity> M) f", "show ?thesis"], ["proof (prove)\nusing this:\n  Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  \\<le> Norm (\\<LL> \\<infinity> M) f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "using *"], ["proof (prove)\nusing this:\n  Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  \\<le> Norm (\\<LL> \\<infinity> M) f\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "unfolding \\<open>p = \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n  \\<le> Norm (\\<LL> \\<infinity> M) f\n  f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M)\n  Norm (\\<LL> \\<infinity> M) f\n  \\<le> Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> \\<infinity> M) \\<and>\n    Norm (\\<LL> \\<infinity> M) f =\n    Norm (\\<LL> \\<infinity> (restr_to_subalg M F)) f", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f", "case (real_pos p2)"], ["proof (state)\nthis:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  p = ennreal p2\n  0 < p2\n  0 < p", "have a [measurable]: \"f \\<in> space\\<^sub>N (\\<LL> p2 (restr_to_subalg M F))\""], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))", "using that"], ["proof (prove)\nusing this:\n  p = ennreal p2\n  0 < p2\n  0 < p\n  f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))", "unfolding \\<open>p = ennreal p2\\<close>"], ["proof (prove)\nusing this:\n  ennreal p2 = ennreal p2\n  0 < p2\n  0 < ennreal p2\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f", "then"], ["proof (chain)\npicking this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))", "have b [measurable]: \"f \\<in> space\\<^sub>N (\\<LL> p2 M)\""], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)", "unfolding Lp_space[OF \\<open>p2 > 0\\<close>]"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable (restr_to_subalg M F).\n           integrable (restr_to_subalg M F)\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\n\ngoal (1 subgoal):\n 1. f \\<in> {f \\<in> borel_measurable M.\n             integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}", "using integrable_from_subalg[OF assms]"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> borel_measurable (restr_to_subalg M F).\n           integrable (restr_to_subalg M F)\n            (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}\n  integrable (restr_to_subalg M F) ?f \\<Longrightarrow> integrable M ?f\n\ngoal (1 subgoal):\n 1. f \\<in> {f \\<in> borel_measurable M.\n             integrable M (\\<lambda>x. \\<bar>f x\\<bar> powr p2)}", "by auto"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M)\n\ngoal (1 subgoal):\n 1. \\<And>p2.\n       \\<lbrakk>p = ennreal p2; 0 < p2; 0 < p\\<rbrakk>\n       \\<Longrightarrow> f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n                         Norm (\\<LL> p M) f =\n                         Norm (\\<LL> p (restr_to_subalg M F)) f", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n    Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "unfolding \\<open>p = ennreal p2\\<close> Lp_D[OF \\<open>p2 > 0\\<close> a] Lp_D[OF \\<open>p2 > 0\\<close> b]"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M) \\<and>\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n    (LINT x|restr_to_subalg M F. \\<bar>f x\\<bar> powr p2) powr (1 / p2)", "using integral_subalgebra2[OF assms, symmetric, of f]"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable F \\<Longrightarrow>\n  integral\\<^sup>L M f = integral\\<^sup>L (restr_to_subalg M F) f\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> (ennreal p2) M) \\<and>\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n    (LINT x|restr_to_subalg M F. \\<bar>f x\\<bar> powr p2) powr (1 / p2)", "apply (auto simp add: b)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<in> borel_measurable F \\<Longrightarrow>\n     integral\\<^sup>L M f =\n     integral\\<^sup>L (restr_to_subalg M F) f) \\<Longrightarrow>\n    (LINT x|M. \\<bar>f x\\<bar> powr p2) powr (1 / p2) =\n    (LINT x|restr_to_subalg M F. \\<bar>f x\\<bar> powr p2) powr (1 / p2)", "by (metis (mono_tags, lifting) \\<open>integrable (restr_to_subalg M F) (\\<lambda>x. \\<bar>f x\\<bar> powr p2)\\<close> assms integrableD(1) integral_subalgebra2 measurable_in_subalg')"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) ?f = Norm (\\<LL> p (restr_to_subalg M F)) ?f\n\ngoal (4 subgoals):\n 1. \\<And>f.\n       eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\n 2. \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M\n 3. space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n    \\<subseteq> space\\<^sub>N (\\<LL> p M)\n 4. \\<And>f.\n       f \\<in> space\\<^sub>N\n                (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n       Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "show \"space\\<^sub>N ((\\<LL> p (restr_to_subalg M F))) \\<subseteq> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n    \\<subseteq> space\\<^sub>N (\\<LL> p M)", "using *"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) ?f = Norm (\\<LL> p (restr_to_subalg M F)) ?f\n\ngoal (1 subgoal):\n 1. space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n    \\<subseteq> space\\<^sub>N (\\<LL> p M)", "by auto"], ["proof (state)\nthis:\n  space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n  \\<subseteq> space\\<^sub>N (\\<LL> p M)\n\ngoal (3 subgoals):\n 1. \\<And>f.\n       eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\n 2. \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M\n 3. \\<And>f.\n       f \\<in> space\\<^sub>N\n                (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n       Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "show \"Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f\" if \"f \\<in> space\\<^sub>N ((\\<LL> p (restr_to_subalg M F)))\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "using * that"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n  ?f \\<in> space\\<^sub>N (\\<LL> p M) \\<and>\n  Norm (\\<LL> p M) ?f = Norm (\\<LL> p (restr_to_subalg M F)) ?f\n  f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p M) f = Norm (\\<LL> p (restr_to_subalg M F)) f", "by auto"], ["proof (state)\nthis:\n  ?f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F)) \\<Longrightarrow>\n  Norm (\\<LL> p M) ?f = Norm (\\<LL> p (restr_to_subalg M F)) ?f\n\ngoal (2 subgoals):\n 1. \\<And>f.\n       eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\n 2. \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M", "show \"eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) f", "by (metis \"*\" eNorm_Norm eq_iff infinity_ennreal_def less_imp_le spaceN_iff top.not_eq_extremum)"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) ?f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) ?f\n\ngoal (1 subgoal):\n 1. \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) ?f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) ?f", "show \"(\\<LL> p (restr_to_subalg M F)) \\<subseteq>\\<^sub>N \\<LL> p M\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) ?f \\<le> eNorm (\\<LL> p (restr_to_subalg M F)) ?f\n\ngoal (1 subgoal):\n 1. \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M", "by (metis ennreal_1 mult.left_neutral quasinorm_subsetI)"], ["proof (state)\nthis:\n  \\<LL> p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> p M\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>For $p \\geq 1$, the conditional expectation of an $L^p$ function still belongs to $L^p$,\nwith an $L^p$ norm which is bounded by the norm of the original function. This is wrong for\n$p < 1$. One can prove this separating the cases and using the conditional version of Jensen's\ninequality, but it is much more efficient to do it with duality arguments, as follows.\\<close>"], ["", "proposition Lp_real_cond_exp:\n  assumes [simp]: \"subalgebra M F\"\n      and \"p \\<ge> (1::ennreal)\"\n          \"sigma_finite_measure (restr_to_subalg M F)\"\n          \"f \\<in> space\\<^sub>N (\\<LL> p M)\"\n  shows \"real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\"\n        \"Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_cond_exp M F f\n    \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F)) &&&\n    Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "using Lp_measurable assms"], ["proof (prove)\nusing this:\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p ?M) \\<Longrightarrow>\n  ?f \\<in> borel_measurable ?M\n  subalgebra M F\n  1 \\<le> p\n  sigma_finite_measure (restr_to_subalg M F)\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "define q where \"q = conjugate_exponent p\""], ["proof (state)\nthis:\n  q = conjugate_exponent p\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "have \"1/p + 1/q = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / q = 1", "unfolding q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1", "using conjugate_exponent_ennreal[OF \\<open>p \\<ge> 1\\<close>]"], ["proof (prove)\nusing this:\n  1 / p + 1 / conjugate_exponent p = 1\n  1 \\<le> conjugate_exponent p\n  conjugate_exponent (conjugate_exponent p) = p\n\ngoal (1 subgoal):\n 1. 1 / p + 1 / conjugate_exponent p = 1", "by simp"], ["proof (state)\nthis:\n  1 / p + 1 / q = 1\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "have \"eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    = (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)). Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}. ennreal(\\<integral>x. (real_cond_exp M F f) x * g x \\<partial>(restr_to_subalg M F)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) =\n    (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)).\n                      Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}.\n        ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x))", "by (rule Lp_Lq_duality'[OF \\<open>1/p + 1/q = 1\\<close> \\<open>sigma_finite_measure (restr_to_subalg M F)\\<close>], simp)"], ["proof (state)\nthis:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) =\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)).\n                    Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}.\n      ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x))\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "also"], ["proof (state)\nthis:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) =\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)).\n                    Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}.\n      ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x))\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "have \"... \\<le> (SUP g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M). Norm (\\<LL> q M) g \\<le> 1}. ennreal(\\<integral>x. f x * g x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)).\n                      Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}.\n        ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x))\n    \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                            Norm (\\<LL> q M) g \\<le> 1}.\n              ennreal (LINT x|M. f x * g x))", "proof (rule SUP_mono, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "assume H: \"g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F))\"\n                    \"Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\""], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F))\n  Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "then"], ["proof (chain)\npicking this:\n  g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F))\n  Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1", "have H2: \"g \\<in> space\\<^sub>N (\\<LL> q M)\" \"Norm (\\<LL> q M) g \\<le> 1\""], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F))\n  Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> q M) &&& Norm (\\<LL> q M) g \\<le> 1", "using Lp_subalgebra[OF \\<open>subalgebra M F\\<close>]"], ["proof (prove)\nusing this:\n  g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F))\n  Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\n  eNorm (\\<LL> ?p M) ?f \\<le> eNorm (\\<LL> ?p (restr_to_subalg M F)) ?f\n  \\<LL> ?p (restr_to_subalg M F) \\<subseteq>\\<^sub>N \\<LL> ?p M\n  space\\<^sub>N (\\<LL> ?p (restr_to_subalg M F))\n  \\<subseteq> space\\<^sub>N (\\<LL> ?p M)\n  ?f \\<in> space\\<^sub>N (\\<LL> ?p (restr_to_subalg M F)) \\<Longrightarrow>\n  Norm (\\<LL> ?p M) ?f = Norm (\\<LL> ?p (restr_to_subalg M F)) ?f\n\ngoal (1 subgoal):\n 1. g \\<in> space\\<^sub>N (\\<LL> q M) &&& Norm (\\<LL> q M) g \\<le> 1", "by (auto simp add: subset_iff)"], ["proof (state)\nthis:\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "have [measurable]: \"g \\<in> borel_measurable M\" \"g \\<in> borel_measurable F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<in> borel_measurable M &&& g \\<in> borel_measurable F", "using Lp_measurable[OF H(1)] Lp_measurable[OF H2(1)]"], ["proof (prove)\nusing this:\n  g \\<in> borel_measurable (restr_to_subalg M F)\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. g \\<in> borel_measurable M &&& g \\<in> borel_measurable F", "by auto"], ["proof (state)\nthis:\n  g \\<in> borel_measurable M\n  g \\<in> borel_measurable F\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "have int: \"integrable M (\\<lambda>x. f x * g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x)", "using Lp_Lq_duality_bound(1)[OF \\<open>1/p + 1/q = 1\\<close> \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close> H2(1)]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. f x * g x)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * g x)", "."], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "have \"(\\<integral>x. (real_cond_exp M F f) x * g x \\<partial>(restr_to_subalg M F)) = (\\<integral>x. g x * (real_cond_exp M F f) x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x =\n    LINT x|M. g x * real_cond_exp M F f x", "by (subst mult.commute, rule integral_subalgebra2[OF \\<open>subalgebra M F\\<close>], auto)"], ["proof (state)\nthis:\n  LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x =\n  LINT x|M. g x * real_cond_exp M F f x\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "also"], ["proof (state)\nthis:\n  LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x =\n  LINT x|M. g x * real_cond_exp M F f x\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "have \"... = (\\<integral>x. g x * f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. g x * real_cond_exp M F f x = LINT x|M. g x * f x", "apply (rule sigma_finite_subalgebra.real_cond_exp_intg, auto simp add: int mult.commute)"], ["proof (prove)\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M F", "unfolding sigma_finite_subalgebra_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. subalgebra M F \\<and> sigma_finite_measure (restr_to_subalg M F)", "using assms"], ["proof (prove)\nusing this:\n  subalgebra M F\n  1 \\<le> p\n  sigma_finite_measure (restr_to_subalg M F)\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. subalgebra M F \\<and> sigma_finite_measure (restr_to_subalg M F)", "by auto"], ["proof (state)\nthis:\n  LINT x|M. g x * real_cond_exp M F f x = LINT x|M. g x * f x\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "finally"], ["proof (chain)\npicking this:\n  LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x =\n  LINT x|M. g x * f x", "have \"ennreal (\\<integral>x. (real_cond_exp M F f) x * g x \\<partial>(restr_to_subalg M F)) \\<le> ennreal (\\<integral>x. f x * g x \\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x =\n  LINT x|M. g x * f x\n\ngoal (1 subgoal):\n 1. ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n    \\<le> ennreal (LINT x|M. f x * g x)", "by (auto intro!: ennreal_leI simp add: mult.commute)"], ["proof (state)\nthis:\n  ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n  \\<le> ennreal (LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       \\<lbrakk>g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F));\n        Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m.\n                            m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n                            Norm (\\<LL> q M) m \\<le> 1 \\<and>\n                            ennreal\n                             (LINT x|restr_to_subalg M F.\n                                 real_cond_exp M F f x * g x)\n                            \\<le> ennreal (LINT x|M. f x * m x)", "then"], ["proof (chain)\npicking this:\n  ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n  \\<le> ennreal (LINT x|M. f x * g x)", "show \"\\<exists>m. m \\<in> space\\<^sub>N (\\<LL> q M) \\<and> Norm (\\<LL> q M) m \\<le> 1\n        \\<and> ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x) \\<le> ennreal (LINT x|M. f x * m x)\""], ["proof (prove)\nusing this:\n  ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n  \\<le> ennreal (LINT x|M. f x * g x)\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n       Norm (\\<LL> q M) m \\<le> 1 \\<and>\n       ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n       \\<le> ennreal (LINT x|M. f x * m x)", "using H2"], ["proof (prove)\nusing this:\n  ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n  \\<le> ennreal (LINT x|M. f x * g x)\n  g \\<in> space\\<^sub>N (\\<LL> q M)\n  Norm (\\<LL> q M) g \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n       Norm (\\<LL> q M) m \\<le> 1 \\<and>\n       ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n       \\<le> ennreal (LINT x|M. f x * m x)", "by blast"], ["proof (state)\nthis:\n  \\<exists>m.\n     m \\<in> space\\<^sub>N (\\<LL> q M) \\<and>\n     Norm (\\<LL> q M) m \\<le> 1 \\<and>\n     ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x)\n     \\<le> ennreal (LINT x|M. f x * m x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)).\n                    Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}.\n      ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x))\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            ennreal (LINT x|M. f x * g x))\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "also"], ["proof (state)\nthis:\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q (restr_to_subalg M F)).\n                    Norm (\\<LL> q (restr_to_subalg M F)) g \\<le> 1}.\n      ennreal (LINT x|restr_to_subalg M F. real_cond_exp M F f x * g x))\n  \\<le> (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                          Norm (\\<LL> q M) g \\<le> 1}.\n            ennreal (LINT x|M. f x * g x))\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "have \"... = eNorm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                      Norm (\\<LL> q M) g \\<le> 1}.\n        ennreal (LINT x|M. f x * g x)) =\n    eNorm (\\<LL> p M) f", "apply (rule Lp_Lq_duality'[OF \\<open>1/p + 1/q = 1\\<close>, symmetric], auto intro!: sigma_finite_subalgebra_is_sigma_finite[of _ F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M F", "unfolding sigma_finite_subalgebra_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. subalgebra M F \\<and> sigma_finite_measure (restr_to_subalg M F)", "using assms"], ["proof (prove)\nusing this:\n  subalgebra M F\n  1 \\<le> p\n  sigma_finite_measure (restr_to_subalg M F)\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. subalgebra M F \\<and> sigma_finite_measure (restr_to_subalg M F)", "by auto"], ["proof (state)\nthis:\n  (\\<Squnion>g\\<in>{g \\<in> space\\<^sub>N (\\<LL> q M).\n                    Norm (\\<LL> q M) g \\<le> 1}.\n      ennreal (LINT x|M. f x * g x)) =\n  eNorm (\\<LL> p M) f\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "finally"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f", "have *: \"eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) \\<le> eNorm (\\<LL> p M) f\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "by simp"], ["proof (state)\nthis:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f\n\ngoal (2 subgoals):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n 2. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f", "show a: \"real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))", "apply (subst spaceN_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    < \\<infinity>", "using \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>"], ["proof (prove)\nusing this:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    < \\<infinity>", "by (simp add: space\\<^sub>N_def)"], ["proof (state)\nthis:\n  real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "show \"Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) \\<le> Norm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "using *"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "unfolding eNorm_Norm[OF \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>] eNorm_Norm[OF a]"], ["proof (prove)\nusing this:\n  ennreal (Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f))\n  \\<le> ennreal (Norm (\\<LL> p M) f)\n\ngoal (1 subgoal):\n 1. Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> Norm (\\<LL> p M) f", "by simp"], ["proof (state)\nthis:\n  Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> Norm (\\<LL> p M) f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Lp_real_cond_exp_eNorm:\n  assumes [simp]: \"subalgebra M F\"\n      and \"p \\<ge> (1::ennreal)\"\n          \"sigma_finite_measure (restr_to_subalg M F)\"\n  shows \"eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f) \\<le> eNorm (\\<LL> p M) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "proof (cases \"eNorm (\\<LL> p M) f = \\<infinity>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. eNorm (\\<LL> p M) f = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f\n 2. eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "case False"], ["proof (state)\nthis:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> p M) f = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f\n 2. eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "then"], ["proof (chain)\npicking this:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>", "have *: \"f \\<in> space\\<^sub>N (\\<LL> p M)\""], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f \\<in> space\\<^sub>N (\\<LL> p M)", "unfolding spaceN_iff"], ["proof (prove)\nusing this:\n  eNorm (\\<LL> p M) f \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f < \\<infinity>", "by (simp add: top.not_eq_extremum)"], ["proof (state)\nthis:\n  f \\<in> space\\<^sub>N (\\<LL> p M)\n\ngoal (2 subgoals):\n 1. eNorm (\\<LL> p M) f = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f\n 2. eNorm (\\<LL> p M) f \\<noteq> \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "using Lp_real_cond_exp[OF assms \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>]"], ["proof (prove)\nusing this:\n  real_cond_exp M F f \\<in> space\\<^sub>N (\\<LL> p (restr_to_subalg M F))\n  Norm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> Norm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "by (subst eNorm_Norm, auto simp: \\<open>f \\<in> space\\<^sub>N (\\<LL> p M)\\<close>)+"], ["proof (state)\nthis:\n  eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n  \\<le> eNorm (\\<LL> p M) f\n\ngoal (1 subgoal):\n 1. eNorm (\\<LL> p M) f = \\<infinity> \\<Longrightarrow>\n    eNorm (\\<LL> p (restr_to_subalg M F)) (real_cond_exp M F f)\n    \\<le> eNorm (\\<LL> p M) f", "qed (simp)"], ["", "end"]]}