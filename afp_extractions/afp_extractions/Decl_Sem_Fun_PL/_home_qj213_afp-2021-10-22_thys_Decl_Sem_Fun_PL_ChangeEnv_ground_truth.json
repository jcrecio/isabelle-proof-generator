{"file_name": "/home/qj213/afp-2021-10-22/thys/Decl_Sem_Fun_PL/ChangeEnv.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Decl_Sem_Fun_PL", "problem_names": ["lemma e_prim_intro[intro]: \"\\<lbrakk> VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>; v = VNat (f n1 n2) \\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EPrim f e1 e2) \\<rho>\"", "lemma e_prim_elim[elim]: \"\\<lbrakk> v \\<in> E (EPrim f e1 e2) \\<rho>;\n   \\<And> n1 n2. \\<lbrakk> VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>; v = VNat (f n1 n2) \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\"", "lemma e_app_elim[elim]: \"\\<lbrakk> v3 \\<in> E (EApp e1 e2) \\<rho>;\n  \\<And> f v2 v2' v3'. \\<lbrakk> VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>; (v2',v3') \\<in> fset f; v2' \\<sqsubseteq> v2; v3 \\<sqsubseteq> v3' \\<rbrakk> \\<Longrightarrow> P\n \\<rbrakk> \\<Longrightarrow> P\"", "lemma e_app_intro[intro]: \"\\<lbrakk> VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>; (v2',v3') \\<in> fset f; v2' \\<sqsubseteq> v2; v3 \\<sqsubseteq> v3'\\<rbrakk>\n     \\<Longrightarrow> v3 \\<in> E (EApp e1 e2) \\<rho>\"", "lemma e_lam_intro[intro]: \"\\<lbrakk> v = VFun f;\n      \\<forall> v1 v2. (v1,v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (ELam x e) \\<rho>\"", "lemma e_lam_intro2[intro]: \n  \"\\<lbrakk> VFun f \\<in> E (ELam x e) \\<rho>; v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk> \n  \\<Longrightarrow> VFun (finsert (v1,v2) f) \\<in> E (ELam x e) \\<rho>\"", "lemma e_lam_intro3[intro]: \"VFun {||} \\<in> E (ELam x e) \\<rho>\"", "lemma e_if_intro[intro]: \"\\<lbrakk> VNat n \\<in> E e1 \\<rho>; n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>; n \\<noteq> 0 \\<longrightarrow> v \\<in> E e2 \\<rho> \\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EIf e1 e2 e3) \\<rho>\"", "lemma e_var_intro[elim]: \"\\<lbrakk> lookup \\<rho> x = Some v'; v \\<sqsubseteq> v' \\<rbrakk> \\<Longrightarrow> v \\<in> E (EVar x) \\<rho>\"", "lemma e_var_elim[elim]: \"\\<lbrakk> v \\<in> E (EVar x) \\<rho>;\n   \\<And> v'. \\<lbrakk> lookup \\<rho> x = Some v'; v \\<sqsubseteq> v' \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\"", "lemma e_lam_elim[elim]: \"\\<lbrakk> v \\<in> E (ELam x e) \\<rho>;\n   \\<And> f. \\<lbrakk> v = VFun f; \\<forall> v1 v2. (v1,v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk>\n    \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\"", "lemma e_lam_elim2[elim]: \"\\<lbrakk> VFun (finsert (v1,v2) f) \\<in> E (ELam x e) \\<rho>;\n   \\<lbrakk> v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\"", "lemma e_if_elim[elim]: \"\\<lbrakk> v \\<in> E (EIf e1 e2 e3) \\<rho>;\n   \\<And> n. \\<lbrakk> VNat n \\<in> E e1 \\<rho>; n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>; n \\<noteq> 0 \\<longrightarrow> v \\<in> E e2 \\<rho> \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\"", "lemma env_le_ext: fixes \\<rho>::env assumes rr: \"\\<rho> \\<sqsubseteq> \\<rho>'\" shows \"((x,v)#\\<rho>) \\<sqsubseteq> ((x,v)#\\<rho>')\"", "lemma change_env: fixes \\<rho>::env assumes de: \"v \\<in> E e \\<rho>\" and rr: \"FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\" shows \"v \\<in> E e \\<rho>'\"", "lemma raise_env: fixes \\<rho>::env assumes de: \"v \\<in> E e \\<rho>\" and rr: \"\\<rho> \\<sqsubseteq> \\<rho>'\" shows \"v \\<in> E e \\<rho>'\"", "lemma env_eq_refl[simp]: fixes \\<rho>::env shows \"\\<rho> \\<approx> \\<rho>\"", "lemma env_eq_ext: fixes \\<rho>::env assumes rr: \"\\<rho> \\<approx> \\<rho>'\" shows \"((x,v)#\\<rho>) \\<approx> ((x,v)#\\<rho>')\"", "lemma eq_implies_le: fixes \\<rho>::env shows \"\\<rho> \\<approx> \\<rho>' \\<Longrightarrow> \\<rho> \\<sqsubseteq> \\<rho>'\"", "lemma env_swap: fixes \\<rho>::env assumes rr: \"\\<rho> \\<approx> \\<rho>'\" and ve: \"v \\<in> E e \\<rho>\" shows \"v \\<in> E e \\<rho>'\"", "lemma env_strengthen: \"\\<lbrakk> v \\<in> E e \\<rho>; \\<forall> x. x \\<in> FV e \\<longrightarrow> lookup \\<rho>' x = lookup \\<rho> x \\<rbrakk> \\<Longrightarrow> v \\<in> E e \\<rho>'\""], "translations": [["", "lemma e_prim_intro[intro]: \"\\<lbrakk> VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>; v = VNat (f n1 n2) \\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EPrim f e1 e2) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>;\n     v = VNat (f n1 n2)\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EPrim f e1 e2) \\<rho>", "by auto"], ["", "lemma e_prim_elim[elim]: \"\\<lbrakk> v \\<in> E (EPrim f e1 e2) \\<rho>;\n   \\<And> n1 n2. \\<lbrakk> VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>; v = VNat (f n1 n2) \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E (EPrim f e1 e2) \\<rho>;\n     \\<And>n1 n2.\n        \\<lbrakk>VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>;\n         v = VNat (f n1 n2)\\<rbrakk>\n        \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by auto"], ["", "lemma e_app_elim[elim]: \"\\<lbrakk> v3 \\<in> E (EApp e1 e2) \\<rho>;\n  \\<And> f v2 v2' v3'. \\<lbrakk> VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>; (v2',v3') \\<in> fset f; v2' \\<sqsubseteq> v2; v3 \\<sqsubseteq> v3' \\<rbrakk> \\<Longrightarrow> P\n \\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v3 \\<in> E (EApp e1 e2) \\<rho>;\n     \\<And>f v2 v2' v3'.\n        \\<lbrakk>VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>;\n         (v2', v3') \\<in> fset f; v2' \\<sqsubseteq> v2;\n         v3 \\<sqsubseteq> v3'\\<rbrakk>\n        \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by auto"], ["", "lemma e_app_intro[intro]: \"\\<lbrakk> VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>; (v2',v3') \\<in> fset f; v2' \\<sqsubseteq> v2; v3 \\<sqsubseteq> v3'\\<rbrakk>\n     \\<Longrightarrow> v3 \\<in> E (EApp e1 e2) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>;\n     (v2', v3') \\<in> fset f; v2' \\<sqsubseteq> v2;\n     v3 \\<sqsubseteq> v3'\\<rbrakk>\n    \\<Longrightarrow> v3 \\<in> E (EApp e1 e2) \\<rho>", "by auto"], ["", "lemma e_lam_intro[intro]: \"\\<lbrakk> v = VFun f;\n      \\<forall> v1 v2. (v1,v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (ELam x e) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v = VFun f;\n     \\<forall>v1 v2.\n        (v1, v2) \\<in> fset f \\<longrightarrow>\n        v2 \\<in> E e ((x, v1) # \\<rho>)\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (ELam x e) \\<rho>", "by auto"], ["", "lemma e_lam_intro2[intro]: \n  \"\\<lbrakk> VFun f \\<in> E (ELam x e) \\<rho>; v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk> \n  \\<Longrightarrow> VFun (finsert (v1,v2) f) \\<in> E (ELam x e) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>VFun f \\<in> E (ELam x e) \\<rho>;\n     v2 \\<in> E e ((x, v1) # \\<rho>)\\<rbrakk>\n    \\<Longrightarrow> VFun (finsert (v1, v2) f) \\<in> E (ELam x e) \\<rho>", "by auto"], ["", "lemma e_lam_intro3[intro]: \"VFun {||} \\<in> E (ELam x e) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. VFun {||} \\<in> E (ELam x e) \\<rho>", "by auto"], ["", "lemma e_if_intro[intro]: \"\\<lbrakk> VNat n \\<in> E e1 \\<rho>; n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>; n \\<noteq> 0 \\<longrightarrow> v \\<in> E e2 \\<rho> \\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EIf e1 e2 e3) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>VNat n \\<in> E e1 \\<rho>;\n     n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n     n \\<noteq> 0 \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EIf e1 e2 e3) \\<rho>", "by auto"], ["", "lemma e_var_intro[elim]: \"\\<lbrakk> lookup \\<rho> x = Some v'; v \\<sqsubseteq> v' \\<rbrakk> \\<Longrightarrow> v \\<in> E (EVar x) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>lookup \\<rho> x = Some v'; v \\<sqsubseteq> v'\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E (EVar x) \\<rho>", "by auto"], ["", "lemma e_var_elim[elim]: \"\\<lbrakk> v \\<in> E (EVar x) \\<rho>;\n   \\<And> v'. \\<lbrakk> lookup \\<rho> x = Some v'; v \\<sqsubseteq> v' \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n     \\<And>v'.\n        \\<lbrakk>lookup \\<rho> x = Some v'; v \\<sqsubseteq> v'\\<rbrakk>\n        \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by auto"], ["", "lemma e_lam_elim[elim]: \"\\<lbrakk> v \\<in> E (ELam x e) \\<rho>;\n   \\<And> f. \\<lbrakk> v = VFun f; \\<forall> v1 v2. (v1,v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk>\n    \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E (ELam x e) \\<rho>;\n     \\<And>f.\n        \\<lbrakk>v = VFun f;\n         \\<forall>v1 v2.\n            (v1, v2) \\<in> fset f \\<longrightarrow>\n            v2 \\<in> E e ((x, v1) # \\<rho>)\\<rbrakk>\n        \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by auto"], ["", "lemma e_lam_elim2[elim]: \"\\<lbrakk> VFun (finsert (v1,v2) f) \\<in> E (ELam x e) \\<rho>;\n   \\<lbrakk> v2 \\<in> E e ((x,v1)#\\<rho>) \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>VFun (finsert (v1, v2) f) \\<in> E (ELam x e) \\<rho>;\n     v2 \\<in> E e ((x, v1) # \\<rho>) \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by auto"], ["", "lemma e_if_elim[elim]: \"\\<lbrakk> v \\<in> E (EIf e1 e2 e3) \\<rho>;\n   \\<And> n. \\<lbrakk> VNat n \\<in> E e1 \\<rho>; n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>; n \\<noteq> 0 \\<longrightarrow> v \\<in> E e2 \\<rho> \\<rbrakk> \\<Longrightarrow> P \\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E (EIf e1 e2 e3) \\<rho>;\n     \\<And>n.\n        \\<lbrakk>VNat n \\<in> E e1 \\<rho>;\n         n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n         n \\<noteq> 0 \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n        \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by auto"], ["", "definition xenv_le :: \"name set \\<Rightarrow> env \\<Rightarrow> env \\<Rightarrow> bool\" (\"_ \\<turnstile> _ \\<sqsubseteq> _\" [51,51,51] 52) where \n  \"X \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>' \\<equiv> \\<forall> x v. x \\<in> X \\<and> lookup \\<rho> x = Some v \\<longrightarrow> (\\<exists> v'. lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v')\""], ["", "declare xenv_le_def[simp]"], ["", "proposition change_env_le: fixes v::val and \\<rho>::env\n  assumes de: \"v \\<in> E e \\<rho>\" and vp_v: \"v' \\<sqsubseteq> v\" and rr: \"FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\"\n  shows \"v' \\<in> E e \\<rho>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v' \\<in> E e \\<rho>'", "using de rr vp_v"], ["proof (prove)\nusing this:\n  v \\<in> E e \\<rho>\n  FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. v' \\<in> E e \\<rho>'", "proof (induction e arbitrary: v v' \\<rho> \\<rho>' rule: exp.induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n        FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EVar x) \\<rho>'\n 2. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 6. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "case (EVar x v v' \\<rho> \\<rho>')"], ["proof (state)\nthis:\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (6 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n        FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EVar x) \\<rho>'\n 2. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 6. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EVar"], ["proof (chain)\npicking this:\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v", "obtain v2 where lx: \"lookup \\<rho> x = Some v2\" and v_v2: \"v \\<sqsubseteq> v2\""], ["proof (prove)\nusing this:\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. (\\<And>v2.\n        \\<lbrakk>lookup \\<rho> x = Some v2; v \\<sqsubseteq> v2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  lookup \\<rho> x = Some v2\n  v \\<sqsubseteq> v2\n\ngoal (6 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n        FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EVar x) \\<rho>'\n 2. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 6. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from lx EVar"], ["proof (chain)\npicking this:\n  lookup \\<rho> x = Some v2\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v", "obtain v3 where \n    lx2: \"lookup \\<rho>' x = Some v3\" and v2_v3: \"v2 \\<sqsubseteq> v3\""], ["proof (prove)\nusing this:\n  lookup \\<rho> x = Some v2\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. (\\<And>v3.\n        \\<lbrakk>lookup \\<rho>' x = Some v3; v2 \\<sqsubseteq> v3\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  lookup \\<rho>' x = Some v3\n  v2 \\<sqsubseteq> v3\n\ngoal (6 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n        FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EVar x) \\<rho>'\n 2. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 6. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from v_v2 v2_v3"], ["proof (chain)\npicking this:\n  v \\<sqsubseteq> v2\n  v2 \\<sqsubseteq> v3", "have v_v3: \"v \\<sqsubseteq> v3\""], ["proof (prove)\nusing this:\n  v \\<sqsubseteq> v2\n  v2 \\<sqsubseteq> v3\n\ngoal (1 subgoal):\n 1. v \\<sqsubseteq> v3", "by (rule val_le_trans)"], ["proof (state)\nthis:\n  v \\<sqsubseteq> v3\n\ngoal (6 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n        FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EVar x) \\<rho>'\n 2. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 6. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EVar v_v3"], ["proof (chain)\npicking this:\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n  v \\<sqsubseteq> v3", "have vp_v3: \"v' \\<sqsubseteq> v3\""], ["proof (prove)\nusing this:\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n  v \\<sqsubseteq> v3\n\ngoal (1 subgoal):\n 1. v' \\<sqsubseteq> v3", "using val_le_trans"], ["proof (prove)\nusing this:\n  v \\<in> E (EVar x) \\<rho>\n  FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n  v \\<sqsubseteq> v3\n  \\<lbrakk>?v1.0 \\<sqsubseteq> ?v2.0; ?v2.0 \\<sqsubseteq> ?v3.0\\<rbrakk>\n  \\<Longrightarrow> ?v1.0 \\<sqsubseteq> ?v3.0\n\ngoal (1 subgoal):\n 1. v' \\<sqsubseteq> v3", "by blast"], ["proof (state)\nthis:\n  v' \\<sqsubseteq> v3\n\ngoal (6 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (EVar x) \\<rho>;\n        FV (EVar x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EVar x) \\<rho>'\n 2. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 6. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from lx2 vp_v3"], ["proof (chain)\npicking this:\n  lookup \\<rho>' x = Some v3\n  v' \\<sqsubseteq> v3", "show ?case"], ["proof (prove)\nusing this:\n  lookup \\<rho>' x = Some v3\n  v' \\<sqsubseteq> v3\n\ngoal (1 subgoal):\n 1. v' \\<in> E (EVar x) \\<rho>'", "by (rule e_var_intro)"], ["proof (state)\nthis:\n  v' \\<in> E (EVar x) \\<rho>'\n\ngoal (5 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "case (ENat n)"], ["proof (state)\nthis:\n  v \\<in> E (ENat n) \\<rho>\n  FV (ENat n) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (5 subgoals):\n 1. \\<And>x v v' \\<rho> \\<rho>'.\n       \\<lbrakk>v \\<in> E (ENat x) \\<rho>;\n        FV (ENat x) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ENat x) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 5. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "then"], ["proof (chain)\npicking this:\n  v \\<in> E (ENat n) \\<rho>\n  FV (ENat n) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> E (ENat n) \\<rho>\n  FV (ENat n) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. v' \\<in> E (ENat n) \\<rho>'", "by simp"], ["proof (state)\nthis:\n  v' \\<in> E (ENat n) \\<rho>'\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "case (ELam x e)"], ["proof (state)\nthis:\n  \\<lbrakk>?v \\<in> E e ?\\<rho>;\n   FV e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e ?\\<rho>'\n  v \\<in> E (ELam x e) \\<rho>\n  FV (ELam x e) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from ELam(2)"], ["proof (chain)\npicking this:\n  v \\<in> E (ELam x e) \\<rho>", "obtain f where v: \"v = VFun f\" and \n    body: \"\\<forall> v1 v2. (v1,v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x,v1)#\\<rho>)\""], ["proof (prove)\nusing this:\n  v \\<in> E (ELam x e) \\<rho>\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>v = VFun f;\n         \\<forall>v1 v2.\n            (v1, v2) \\<in> fset f \\<longrightarrow>\n            v2 \\<in> E e ((x, v1) # \\<rho>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v = VFun f\n  \\<forall>v1 v2.\n     (v1, v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>)\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from v ELam(4)"], ["proof (chain)\npicking this:\n  v = VFun f\n  v' \\<sqsubseteq> v", "obtain f' where vp: \"v' = VFun f'\" and fp_f: \"fset f' \\<subseteq> fset f\""], ["proof (prove)\nusing this:\n  v = VFun f\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. (\\<And>f'.\n        \\<lbrakk>v' = VFun f'; fset f' \\<subseteq> fset f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (case_tac v') auto"], ["proof (state)\nthis:\n  v' = VFun f'\n  fset f' \\<subseteq> fset f\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (ELam x1a x2a) \\<rho>;\n        FV (ELam x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (ELam x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 4. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from vp"], ["proof (chain)\npicking this:\n  v' = VFun f'", "show ?case"], ["proof (prove)\nusing this:\n  v' = VFun f'\n\ngoal (1 subgoal):\n 1. v' \\<in> E (ELam x e) \\<rho>'", "proof (simp,clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v1 v2.\n       \\<lbrakk>v' = VFun f'; (v1, v2) \\<in> fset f'\\<rbrakk>\n       \\<Longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>')", "fix v1 v2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v1 v2.\n       \\<lbrakk>v' = VFun f'; (v1, v2) \\<in> fset f'\\<rbrakk>\n       \\<Longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>')", "assume v12: \"(v1,v2)\\<in> fset f'\""], ["proof (state)\nthis:\n  (v1, v2) \\<in> fset f'\n\ngoal (1 subgoal):\n 1. \\<And>v1 v2.\n       \\<lbrakk>v' = VFun f'; (v1, v2) \\<in> fset f'\\<rbrakk>\n       \\<Longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>')", "from v12 fp_f"], ["proof (chain)\npicking this:\n  (v1, v2) \\<in> fset f'\n  fset f' \\<subseteq> fset f", "have v34: \"(v1,v2) \\<in> fset f\""], ["proof (prove)\nusing this:\n  (v1, v2) \\<in> fset f'\n  fset f' \\<subseteq> fset f\n\ngoal (1 subgoal):\n 1. (v1, v2) \\<in> fset f", "by blast"], ["proof (state)\nthis:\n  (v1, v2) \\<in> fset f\n\ngoal (1 subgoal):\n 1. \\<And>v1 v2.\n       \\<lbrakk>v' = VFun f'; (v1, v2) \\<in> fset f'\\<rbrakk>\n       \\<Longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>')", "from v34 body"], ["proof (chain)\npicking this:\n  (v1, v2) \\<in> fset f\n  \\<forall>v1 v2.\n     (v1, v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>)", "have v4_E: \"v2 \\<in> E e ((x,v1)#\\<rho>)\""], ["proof (prove)\nusing this:\n  (v1, v2) \\<in> fset f\n  \\<forall>v1 v2.\n     (v1, v2) \\<in> fset f \\<longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>)\n\ngoal (1 subgoal):\n 1. v2 \\<in> E e ((x, v1) # \\<rho>)", "by blast"], ["proof (state)\nthis:\n  v2 \\<in> E e ((x, v1) # \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>v1 v2.\n       \\<lbrakk>v' = VFun f'; (v1, v2) \\<in> fset f'\\<rbrakk>\n       \\<Longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>')", "from ELam(3)"], ["proof (chain)\npicking this:\n  FV (ELam x e) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have rr2: \"FV e \\<turnstile> ((x,v1)#\\<rho>) \\<sqsubseteq> ((x,v1)#\\<rho>')\""], ["proof (prove)\nusing this:\n  FV (ELam x e) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. FV e \\<turnstile> (x, v1) # \\<rho> \\<sqsubseteq> (x, v1) # \\<rho>'", "by auto"], ["proof (state)\nthis:\n  FV e \\<turnstile> (x, v1) # \\<rho> \\<sqsubseteq> (x, v1) # \\<rho>'\n\ngoal (1 subgoal):\n 1. \\<And>v1 v2.\n       \\<lbrakk>v' = VFun f'; (v1, v2) \\<in> fset f'\\<rbrakk>\n       \\<Longrightarrow> v2 \\<in> E e ((x, v1) # \\<rho>')", "from ELam(1) v4_E rr2"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> E e ?\\<rho>;\n   FV e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e ?\\<rho>'\n  v2 \\<in> E e ((x, v1) # \\<rho>)\n  FV e \\<turnstile> (x, v1) # \\<rho> \\<sqsubseteq> (x, v1) # \\<rho>'", "show \"v2 \\<in> E e ((x,v1)#\\<rho>')\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E e ?\\<rho>;\n   FV e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e ?\\<rho>'\n  v2 \\<in> E e ((x, v1) # \\<rho>)\n  FV e \\<turnstile> (x, v1) # \\<rho> \\<sqsubseteq> (x, v1) # \\<rho>'\n\ngoal (1 subgoal):\n 1. v2 \\<in> E e ((x, v1) # \\<rho>')", "by auto"], ["proof (state)\nthis:\n  v2 \\<in> E e ((x, v1) # \\<rho>')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v' \\<in> E (ELam x e) \\<rho>'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "case (EApp e1 e2)"], ["proof (state)\nthis:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  v \\<in> E (EApp e1 e2) \\<rho>\n  FV (EApp e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EApp(3)"], ["proof (chain)\npicking this:\n  v \\<in> E (EApp e1 e2) \\<rho>", "obtain f and v2::val and v2' v3' where \n    f_e1: \"VFun f \\<in> E e1 \\<rho>\" and v2_e2: \"v2 \\<in> E e2 \\<rho>\" and\n    v23p_f: \"(v2',v3') \\<in> fset f\" and v2p_v2: \"v2' \\<sqsubseteq> v2\" and v_v3: \"v \\<sqsubseteq> v3'\""], ["proof (prove)\nusing this:\n  v \\<in> E (EApp e1 e2) \\<rho>\n\ngoal (1 subgoal):\n 1. (\\<And>f v2 v2' v3'.\n        \\<lbrakk>VFun f \\<in> E e1 \\<rho>; v2 \\<in> E e2 \\<rho>;\n         (v2', v3') \\<in> fset f; v2' \\<sqsubseteq> v2;\n         v \\<sqsubseteq> v3'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  VFun f \\<in> E e1 \\<rho>\n  v2 \\<in> E e2 \\<rho>\n  (v2', v3') \\<in> fset f\n  v2' \\<sqsubseteq> v2\n  v \\<sqsubseteq> v3'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EApp(4)"], ["proof (chain)\npicking this:\n  FV (EApp e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have 1: \"FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\""], ["proof (prove)\nusing this:\n  FV (EApp e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "by auto"], ["proof (state)\nthis:\n  FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "have f_f: \"VFun f \\<sqsubseteq> VFun f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. VFun f \\<sqsubseteq> VFun f", "by auto"], ["proof (state)\nthis:\n  VFun f \\<sqsubseteq> VFun f\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EApp(1) f_e1 1 f_f"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  VFun f \\<in> E e1 \\<rho>\n  FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  VFun f \\<sqsubseteq> VFun f", "have f_e1b: \"VFun f \\<in> E e1 \\<rho>'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  VFun f \\<in> E e1 \\<rho>\n  FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  VFun f \\<sqsubseteq> VFun f\n\ngoal (1 subgoal):\n 1. VFun f \\<in> E e1 \\<rho>'", "by blast"], ["proof (state)\nthis:\n  VFun f \\<in> E e1 \\<rho>'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EApp(4)"], ["proof (chain)\npicking this:\n  FV (EApp e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have 2: \"FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\""], ["proof (prove)\nusing this:\n  FV (EApp e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "by auto"], ["proof (state)\nthis:\n  FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EApp(2) v2_e2 2"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  v2 \\<in> E e2 \\<rho>\n  FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have v2_e2b: \"v2 \\<in> E e2 \\<rho>'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  v2 \\<in> E e2 \\<rho>\n  FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. v2 \\<in> E e2 \\<rho>'", "by auto"], ["proof (state)\nthis:\n  v2 \\<in> E e2 \\<rho>'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EApp(5) v_v3"], ["proof (chain)\npicking this:\n  v' \\<sqsubseteq> v\n  v \\<sqsubseteq> v3'", "have vp_v3p: \"v' \\<sqsubseteq> v3'\""], ["proof (prove)\nusing this:\n  v' \\<sqsubseteq> v\n  v \\<sqsubseteq> v3'\n\ngoal (1 subgoal):\n 1. v' \\<sqsubseteq> v3'", "by (rule val_le_trans)"], ["proof (state)\nthis:\n  v' \\<sqsubseteq> v3'\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        v \\<in> E (EApp x1a x2a) \\<rho>;\n        FV (EApp x1a x2a) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EApp x1a x2a) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 3. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from f_e1b v2_e2b v23p_f v2p_v2 vp_v3p"], ["proof (chain)\npicking this:\n  VFun f \\<in> E e1 \\<rho>'\n  v2 \\<in> E e2 \\<rho>'\n  (v2', v3') \\<in> fset f\n  v2' \\<sqsubseteq> v2\n  v' \\<sqsubseteq> v3'", "show ?case"], ["proof (prove)\nusing this:\n  VFun f \\<in> E e1 \\<rho>'\n  v2 \\<in> E e2 \\<rho>'\n  (v2', v3') \\<in> fset f\n  v2' \\<sqsubseteq> v2\n  v' \\<sqsubseteq> v3'\n\ngoal (1 subgoal):\n 1. v' \\<in> E (EApp e1 e2) \\<rho>'", "by auto"], ["proof (state)\nthis:\n  v' \\<in> E (EApp e1 e2) \\<rho>'\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "case (EPrim f e1 e2)"], ["proof (state)\nthis:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  v \\<in> E (EPrim f e1 e2) \\<rho>\n  FV (EPrim f e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EPrim(3)"], ["proof (chain)\npicking this:\n  v \\<in> E (EPrim f e1 e2) \\<rho>", "obtain n1 n2 where n1_e1: \"VNat n1 \\<in> E e1 \\<rho>\" and \n    n2_e2: \"VNat n2 \\<in> E e2 \\<rho>\" and v: \"v = VNat (f n1 n2)\""], ["proof (prove)\nusing this:\n  v \\<in> E (EPrim f e1 e2) \\<rho>\n\ngoal (1 subgoal):\n 1. (\\<And>n1 n2.\n        \\<lbrakk>VNat n1 \\<in> E e1 \\<rho>; VNat n2 \\<in> E e2 \\<rho>;\n         v = VNat (f n1 n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  VNat n1 \\<in> E e1 \\<rho>\n  VNat n2 \\<in> E e2 \\<rho>\n  v = VNat (f n1 n2)\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EPrim(4)"], ["proof (chain)\npicking this:\n  FV (EPrim f e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have 1: \"FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\""], ["proof (prove)\nusing this:\n  FV (EPrim f e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "by auto"], ["proof (state)\nthis:\n  FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EPrim(1) n1_e1 1"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  VNat n1 \\<in> E e1 \\<rho>\n  FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have n1_e1b: \"VNat n1 \\<in> E e1 \\<rho>'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  VNat n1 \\<in> E e1 \\<rho>\n  FV e1 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. VNat n1 \\<in> E e1 \\<rho>'", "by blast"], ["proof (state)\nthis:\n  VNat n1 \\<in> E e1 \\<rho>'\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EPrim(4)"], ["proof (chain)\npicking this:\n  FV (EPrim f e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have 2: \"FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\""], ["proof (prove)\nusing this:\n  FV (EPrim f e1 e2) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "by auto"], ["proof (state)\nthis:\n  FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from EPrim(2) n2_e2 2"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  VNat n2 \\<in> E e2 \\<rho>\n  FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'", "have n2_e2b: \"VNat n2 \\<in> E e2 \\<rho>'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  VNat n2 \\<in> E e2 \\<rho>\n  FV e2 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. VNat n2 \\<in> E e2 \\<rho>'", "by blast"], ["proof (state)\nthis:\n  VNat n2 \\<in> E e2 \\<rho>'\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from v EPrim(5)"], ["proof (chain)\npicking this:\n  v = VNat (f n1 n2)\n  v' \\<sqsubseteq> v", "have vp: \"v' = VNat (f n1 n2)\""], ["proof (prove)\nusing this:\n  v = VNat (f n1 n2)\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. v' = VNat (f n1 n2)", "by auto"], ["proof (state)\nthis:\n  v' = VNat (f n1 n2)\n\ngoal (2 subgoals):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x2a \\<rho>;\n                    FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EPrim x1a x2a x3) \\<rho>;\n        FV (EPrim x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EPrim x1a x2a x3) \\<rho>'\n 2. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "from n1_e1b n2_e2b vp"], ["proof (chain)\npicking this:\n  VNat n1 \\<in> E e1 \\<rho>'\n  VNat n2 \\<in> E e2 \\<rho>'\n  v' = VNat (f n1 n2)", "show ?case"], ["proof (prove)\nusing this:\n  VNat n1 \\<in> E e1 \\<rho>'\n  VNat n2 \\<in> E e2 \\<rho>'\n  v' = VNat (f n1 n2)\n\ngoal (1 subgoal):\n 1. v' \\<in> E (EPrim f e1 e2) \\<rho>'", "by auto"], ["proof (state)\nthis:\n  v' \\<in> E (EPrim f e1 e2) \\<rho>'\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "case (EIf e1 e2 e3)"], ["proof (state)\nthis:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e3 ?\\<rho>;\n   FV e3 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e3 ?\\<rho>'\n  v \\<in> E (EIf e1 e2 e3) \\<rho>\n  FV (EIf e1 e2 e3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3 v v' \\<rho> \\<rho>'.\n       \\<lbrakk>\\<And>v v' \\<rho> \\<rho>'.\n                   \\<lbrakk>v \\<in> E x1a \\<rho>;\n                    FV x1a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E x1a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x2a \\<rho>;\n            FV x2a \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x2a \\<rho>';\n        \\<And>v v' \\<rho> \\<rho>'.\n           \\<lbrakk>v \\<in> E x3 \\<rho>;\n            FV x3 \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E x3 \\<rho>';\n        v \\<in> E (EIf x1a x2a x3) \\<rho>;\n        FV (EIf x1a x2a x3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>';\n        v' \\<sqsubseteq> v\\<rbrakk>\n       \\<Longrightarrow> v' \\<in> E (EIf x1a x2a x3) \\<rho>'", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e3 ?\\<rho>;\n   FV e3 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e3 ?\\<rho>'\n  v \\<in> E (EIf e1 e2 e3) \\<rho>\n  FV (EIf e1 e2 e3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E e1 ?\\<rho>;\n   FV e1 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e1 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e2 ?\\<rho>;\n   FV e2 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e2 ?\\<rho>'\n  \\<lbrakk>?v \\<in> E e3 ?\\<rho>;\n   FV e3 \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>';\n   ?v' \\<sqsubseteq> ?v\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E e3 ?\\<rho>'\n  v \\<in> E (EIf e1 e2 e3) \\<rho>\n  FV (EIf e1 e2 e3) \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v' \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. v' \\<in> E (EIf e1 e2 e3) \\<rho>'", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>v \\<rho> \\<rho>' v'.\n                \\<lbrakk>v \\<in> E e1 \\<rho>;\n                 \\<forall>x v.\n                    x \\<in> FV e1 \\<and>\n                    lookup \\<rho> x = Some v \\<longrightarrow>\n                    (\\<exists>v'.\n                        lookup \\<rho>' x = Some v' \\<and>\n                        v \\<sqsubseteq> v');\n                 v' \\<sqsubseteq> v\\<rbrakk>\n                \\<Longrightarrow> v' \\<in> E e1 \\<rho>';\n     \\<And>v \\<rho> \\<rho>' v'.\n        \\<lbrakk>v \\<in> E e2 \\<rho>;\n         \\<forall>x v.\n            x \\<in> FV e2 \\<and> lookup \\<rho> x = Some v \\<longrightarrow>\n            (\\<exists>v'.\n                lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n         v' \\<sqsubseteq> v\\<rbrakk>\n        \\<Longrightarrow> v' \\<in> E e2 \\<rho>';\n     \\<And>v \\<rho> \\<rho>' v'.\n        \\<lbrakk>v \\<in> E e3 \\<rho>;\n         \\<forall>x v.\n            x \\<in> FV e3 \\<and> lookup \\<rho> x = Some v \\<longrightarrow>\n            (\\<exists>v'.\n                lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n         v' \\<sqsubseteq> v\\<rbrakk>\n        \\<Longrightarrow> v' \\<in> E e3 \\<rho>';\n     \\<exists>n.\n        VNat n \\<in> E e1 \\<rho> \\<and>\n        (n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>) \\<and>\n        (0 < n \\<longrightarrow> v \\<in> E e2 \\<rho>);\n     \\<forall>x v.\n        (x \\<in> FV e1 \\<or> x \\<in> FV e2 \\<or> x \\<in> FV e3) \\<and>\n        lookup \\<rho> x = Some v \\<longrightarrow>\n        (\\<exists>v'. lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n     v' \\<sqsubseteq> v\\<rbrakk>\n    \\<Longrightarrow> \\<exists>n.\n                         VNat n \\<in> E e1 \\<rho>' \\<and>\n                         (n = 0 \\<longrightarrow>\n                          v' \\<in> E e3 \\<rho>') \\<and>\n                         (0 < n \\<longrightarrow> v' \\<in> E e2 \\<rho>')", "apply clarify"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<And>v \\<rho> \\<rho>' v'.\n                   \\<lbrakk>v \\<in> E e1 \\<rho>;\n                    \\<forall>x v.\n                       x \\<in> FV e1 \\<and>\n                       lookup \\<rho> x = Some v \\<longrightarrow>\n                       (\\<exists>v'.\n                           lookup \\<rho>' x = Some v' \\<and>\n                           v \\<sqsubseteq> v');\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E e1 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e2 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e2 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e2 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e3 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e3 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e3 \\<rho>';\n        \\<forall>x v.\n           (x \\<in> FV e1 \\<or> x \\<in> FV e2 \\<or> x \\<in> FV e3) \\<and>\n           lookup \\<rho> x = Some v \\<longrightarrow>\n           (\\<exists>v'.\n               lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n        v' \\<sqsubseteq> v; VNat n \\<in> E e1 \\<rho>;\n        n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n        0 < n \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n.\n                            VNat n \\<in> E e1 \\<rho>' \\<and>\n                            (n = 0 \\<longrightarrow>\n                             v' \\<in> E e3 \\<rho>') \\<and>\n                            (0 < n \\<longrightarrow> v' \\<in> E e2 \\<rho>')", "apply (rule_tac x=n in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<And>v \\<rho> \\<rho>' v'.\n                   \\<lbrakk>v \\<in> E e1 \\<rho>;\n                    \\<forall>x v.\n                       x \\<in> FV e1 \\<and>\n                       lookup \\<rho> x = Some v \\<longrightarrow>\n                       (\\<exists>v'.\n                           lookup \\<rho>' x = Some v' \\<and>\n                           v \\<sqsubseteq> v');\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E e1 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e2 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e2 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e2 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e3 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e3 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e3 \\<rho>';\n        \\<forall>x v.\n           (x \\<in> FV e1 \\<or> x \\<in> FV e2 \\<or> x \\<in> FV e3) \\<and>\n           lookup \\<rho> x = Some v \\<longrightarrow>\n           (\\<exists>v'.\n               lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n        v' \\<sqsubseteq> v; VNat n \\<in> E e1 \\<rho>;\n        n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n        0 < n \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n       \\<Longrightarrow> VNat n \\<in> E e1 \\<rho>' \\<and>\n                         (n = 0 \\<longrightarrow>\n                          v' \\<in> E e3 \\<rho>') \\<and>\n                         (0 < n \\<longrightarrow> v' \\<in> E e2 \\<rho>')", "apply (rule conjI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<lbrakk>\\<And>v \\<rho> \\<rho>' v'.\n                   \\<lbrakk>v \\<in> E e1 \\<rho>;\n                    \\<forall>x v.\n                       x \\<in> FV e1 \\<and>\n                       lookup \\<rho> x = Some v \\<longrightarrow>\n                       (\\<exists>v'.\n                           lookup \\<rho>' x = Some v' \\<and>\n                           v \\<sqsubseteq> v');\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E e1 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e2 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e2 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e2 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e3 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e3 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e3 \\<rho>';\n        \\<forall>x v.\n           (x \\<in> FV e1 \\<or> x \\<in> FV e2 \\<or> x \\<in> FV e3) \\<and>\n           lookup \\<rho> x = Some v \\<longrightarrow>\n           (\\<exists>v'.\n               lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n        v' \\<sqsubseteq> v; VNat n \\<in> E e1 \\<rho>;\n        n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n        0 < n \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n       \\<Longrightarrow> VNat n \\<in> E e1 \\<rho>'\n 2. \\<And>n.\n       \\<lbrakk>\\<And>v \\<rho> \\<rho>' v'.\n                   \\<lbrakk>v \\<in> E e1 \\<rho>;\n                    \\<forall>x v.\n                       x \\<in> FV e1 \\<and>\n                       lookup \\<rho> x = Some v \\<longrightarrow>\n                       (\\<exists>v'.\n                           lookup \\<rho>' x = Some v' \\<and>\n                           v \\<sqsubseteq> v');\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E e1 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e2 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e2 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e2 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e3 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e3 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e3 \\<rho>';\n        \\<forall>x v.\n           (x \\<in> FV e1 \\<or> x \\<in> FV e2 \\<or> x \\<in> FV e3) \\<and>\n           lookup \\<rho> x = Some v \\<longrightarrow>\n           (\\<exists>v'.\n               lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n        v' \\<sqsubseteq> v; VNat n \\<in> E e1 \\<rho>;\n        n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n        0 < n \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n       \\<Longrightarrow> (n = 0 \\<longrightarrow>\n                          v' \\<in> E e3 \\<rho>') \\<and>\n                         (0 < n \\<longrightarrow> v' \\<in> E e2 \\<rho>')", "apply force"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<And>v \\<rho> \\<rho>' v'.\n                   \\<lbrakk>v \\<in> E e1 \\<rho>;\n                    \\<forall>x v.\n                       x \\<in> FV e1 \\<and>\n                       lookup \\<rho> x = Some v \\<longrightarrow>\n                       (\\<exists>v'.\n                           lookup \\<rho>' x = Some v' \\<and>\n                           v \\<sqsubseteq> v');\n                    v' \\<sqsubseteq> v\\<rbrakk>\n                   \\<Longrightarrow> v' \\<in> E e1 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e2 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e2 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e2 \\<rho>';\n        \\<And>v \\<rho> \\<rho>' v'.\n           \\<lbrakk>v \\<in> E e3 \\<rho>;\n            \\<forall>x v.\n               x \\<in> FV e3 \\<and>\n               lookup \\<rho> x = Some v \\<longrightarrow>\n               (\\<exists>v'.\n                   lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n            v' \\<sqsubseteq> v\\<rbrakk>\n           \\<Longrightarrow> v' \\<in> E e3 \\<rho>';\n        \\<forall>x v.\n           (x \\<in> FV e1 \\<or> x \\<in> FV e2 \\<or> x \\<in> FV e3) \\<and>\n           lookup \\<rho> x = Some v \\<longrightarrow>\n           (\\<exists>v'.\n               lookup \\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v');\n        v' \\<sqsubseteq> v; VNat n \\<in> E e1 \\<rho>;\n        n = 0 \\<longrightarrow> v \\<in> E e3 \\<rho>;\n        0 < n \\<longrightarrow> v \\<in> E e2 \\<rho>\\<rbrakk>\n       \\<Longrightarrow> (n = 0 \\<longrightarrow>\n                          v' \\<in> E e3 \\<rho>') \\<and>\n                         (0 < n \\<longrightarrow> v' \\<in> E e2 \\<rho>')", "apply force"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  v' \\<in> E (EIf e1 e2 e3) \\<rho>'\n\ngoal:\nNo subgoals!", "qed\n  \n\\<comment> \\<open>Subsumption is admissible\\<close>"], ["", "proposition e_sub: \"\\<lbrakk> v \\<in> E e \\<rho>; v' \\<sqsubseteq> v \\<rbrakk> \\<Longrightarrow> v' \\<in> E e \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E e \\<rho>; v' \\<sqsubseteq> v\\<rbrakk>\n    \\<Longrightarrow> v' \\<in> E e \\<rho>", "apply (subgoal_tac \"FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> E e \\<rho>; v' \\<sqsubseteq> v;\n     FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>\\<rbrakk>\n    \\<Longrightarrow> v' \\<in> E e \\<rho>\n 2. \\<lbrakk>v \\<in> E e \\<rho>; v' \\<sqsubseteq> v\\<rbrakk>\n    \\<Longrightarrow> FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>", "using change_env_le"], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E ?e ?\\<rho>; ?v' \\<sqsubseteq> ?v;\n   FV ?e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E ?e ?\\<rho>'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> E e \\<rho>; v' \\<sqsubseteq> v;\n     FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>\\<rbrakk>\n    \\<Longrightarrow> v' \\<in> E e \\<rho>\n 2. \\<lbrakk>v \\<in> E e \\<rho>; v' \\<sqsubseteq> v\\<rbrakk>\n    \\<Longrightarrow> FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E e \\<rho>; v' \\<sqsubseteq> v\\<rbrakk>\n    \\<Longrightarrow> FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma env_le_ext: fixes \\<rho>::env assumes rr: \"\\<rho> \\<sqsubseteq> \\<rho>'\" shows \"((x,v)#\\<rho>) \\<sqsubseteq> ((x,v)#\\<rho>')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, v) # \\<rho> \\<sqsubseteq> (x, v) # \\<rho>'", "using rr"], ["proof (prove)\nusing this:\n  \\<rho> \\<sqsubseteq> \\<rho>'\n\ngoal (1 subgoal):\n 1. (x, v) # \\<rho> \\<sqsubseteq> (x, v) # \\<rho>'", "apply (simp add: env_le_def)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma change_env: fixes \\<rho>::env assumes de: \"v \\<in> E e \\<rho>\" and rr: \"FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\" shows \"v \\<in> E e \\<rho>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "have vv: \"v \\<sqsubseteq> v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<sqsubseteq> v", "by auto"], ["proof (state)\nthis:\n  v \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "from de rr vv"], ["proof (chain)\npicking this:\n  v \\<in> E e \\<rho>\n  FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v \\<sqsubseteq> v", "show ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> E e \\<rho>\n  FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v \\<sqsubseteq> v\n\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "using change_env_le"], ["proof (prove)\nusing this:\n  v \\<in> E e \\<rho>\n  FV e \\<turnstile> \\<rho> \\<sqsubseteq> \\<rho>'\n  v \\<sqsubseteq> v\n  \\<lbrakk>?v \\<in> E ?e ?\\<rho>; ?v' \\<sqsubseteq> ?v;\n   FV ?e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> ?v' \\<in> E ?e ?\\<rho>'\n\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "by blast"], ["proof (state)\nthis:\n  v \\<in> E e \\<rho>'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma raise_env: fixes \\<rho>::env assumes de: \"v \\<in> E e \\<rho>\" and rr: \"\\<rho> \\<sqsubseteq> \\<rho>'\" shows \"v \\<in> E e \\<rho>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "using de rr change_env env_le_def"], ["proof (prove)\nusing this:\n  v \\<in> E e \\<rho>\n  \\<rho> \\<sqsubseteq> \\<rho>'\n  \\<lbrakk>?v \\<in> E ?e ?\\<rho>;\n   FV ?e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> ?v \\<in> E ?e ?\\<rho>'\n  ?\\<rho> \\<sqsubseteq> ?\\<rho>' \\<equiv>\n  \\<forall>x v.\n     lookup ?\\<rho> x = Some v \\<longrightarrow>\n     (\\<exists>v'. lookup ?\\<rho>' x = Some v' \\<and> v \\<sqsubseteq> v')\n\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "by auto"], ["", "lemma env_eq_refl[simp]: fixes \\<rho>::env shows \"\\<rho> \\<approx> \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<rho> \\<approx> \\<rho>", "by (simp add: env_eq_def)"], ["", "lemma env_eq_ext: fixes \\<rho>::env assumes rr: \"\\<rho> \\<approx> \\<rho>'\" shows \"((x,v)#\\<rho>) \\<approx> ((x,v)#\\<rho>')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, v) # \\<rho> \\<approx> (x, v) # \\<rho>'", "using rr"], ["proof (prove)\nusing this:\n  \\<rho> \\<approx> \\<rho>'\n\ngoal (1 subgoal):\n 1. (x, v) # \\<rho> \\<approx> (x, v) # \\<rho>'", "by (simp add: env_eq_def)"], ["", "lemma eq_implies_le: fixes \\<rho>::env shows \"\\<rho> \\<approx> \\<rho>' \\<Longrightarrow> \\<rho> \\<sqsubseteq> \\<rho>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<rho> \\<approx> \\<rho>' \\<Longrightarrow> \\<rho> \\<sqsubseteq> \\<rho>'", "by (simp add: env_le_def env_eq_def)"], ["", "lemma env_swap: fixes \\<rho>::env assumes rr: \"\\<rho> \\<approx> \\<rho>'\" and ve: \"v \\<in> E e \\<rho>\" shows \"v \\<in> E e \\<rho>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "using rr ve"], ["proof (prove)\nusing this:\n  \\<rho> \\<approx> \\<rho>'\n  v \\<in> E e \\<rho>\n\ngoal (1 subgoal):\n 1. v \\<in> E e \\<rho>'", "apply (subgoal_tac \"\\<rho> \\<sqsubseteq> \\<rho>'\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>;\n     \\<rho> \\<sqsubseteq> \\<rho>'\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e \\<rho>'\n 2. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>\\<rbrakk>\n    \\<Longrightarrow> \\<rho> \\<sqsubseteq> \\<rho>'", "prefer 2"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>\\<rbrakk>\n    \\<Longrightarrow> \\<rho> \\<sqsubseteq> \\<rho>'\n 2. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>;\n     \\<rho> \\<sqsubseteq> \\<rho>'\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e \\<rho>'", "apply (rule eq_implies_le)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>\\<rbrakk>\n    \\<Longrightarrow> \\<rho> \\<approx> \\<rho>'\n 2. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>;\n     \\<rho> \\<sqsubseteq> \\<rho>'\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e \\<rho>'", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>;\n     \\<rho> \\<sqsubseteq> \\<rho>'\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e \\<rho>'", "apply (rule raise_env)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>;\n     \\<rho> \\<sqsubseteq> \\<rho>'\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e ?\\<rho>7\n 2. \\<lbrakk>\\<rho> \\<approx> \\<rho>'; v \\<in> E e \\<rho>;\n     \\<rho> \\<sqsubseteq> \\<rho>'\\<rbrakk>\n    \\<Longrightarrow> ?\\<rho>7 \\<sqsubseteq> \\<rho>'", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma env_strengthen: \"\\<lbrakk> v \\<in> E e \\<rho>; \\<forall> x. x \\<in> FV e \\<longrightarrow> lookup \\<rho>' x = lookup \\<rho> x \\<rbrakk> \\<Longrightarrow> v \\<in> E e \\<rho>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E e \\<rho>;\n     \\<forall>x.\n        x \\<in> FV e \\<longrightarrow>\n        lookup \\<rho>' x = lookup \\<rho> x\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e \\<rho>'", "using change_env"], ["proof (prove)\nusing this:\n  \\<lbrakk>?v \\<in> E ?e ?\\<rho>;\n   FV ?e \\<turnstile> ?\\<rho> \\<sqsubseteq> ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> ?v \\<in> E ?e ?\\<rho>'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> E e \\<rho>;\n     \\<forall>x.\n        x \\<in> FV e \\<longrightarrow>\n        lookup \\<rho>' x = lookup \\<rho> x\\<rbrakk>\n    \\<Longrightarrow> v \\<in> E e \\<rho>'", "by auto"], ["", "end"]]}