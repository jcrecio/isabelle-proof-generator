{"file_name": "/home/qj213/afp-2021-10-22/thys/Decl_Sem_Fun_PL/SmallStepLam.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Decl_Sem_Fun_PL", "problem_names": ["lemma val_stuck: fixes e::exp assumes val_e: \"isval e\" shows \"stuck e\"", "lemma subst_fv_aux: assumes fvv: \"FV v = {}\" shows \"FV (subst x v e) \\<subseteq> FV e - {x}\"", "lemma subst_fv:  assumes fv_e: \"FV e \\<subseteq> {x}\" and fv_v: \"FV v = {}\" \n  shows \"FV (subst x v e) = {}\"", "lemma red_pres_fv:  fixes e::exp assumes red: \"e \\<longrightarrow> e'\" and fv: \"FV e = {}\" shows \"FV e' = {}\"", "lemma reduction_pres_fv: fixes e::exp assumes r: \"e \\<longrightarrow>* e'\" and fv: \"FV e = {}\" shows \"FV e' = {}\""], "translations": [["", "lemma val_stuck: fixes e::exp assumes val_e: \"isval e\" shows \"stuck e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stuck e", "proof (rule classical)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> stuck e \\<Longrightarrow> stuck e", "assume \"\\<not> stuck e\""], ["proof (state)\nthis:\n  \\<not> stuck e\n\ngoal (1 subgoal):\n 1. \\<not> stuck e \\<Longrightarrow> stuck e", "from this"], ["proof (chain)\npicking this:\n  \\<not> stuck e", "obtain e' where red: \"e \\<longrightarrow> e'\""], ["proof (prove)\nusing this:\n  \\<not> stuck e\n\ngoal (1 subgoal):\n 1. (\\<And>e'.\n        e \\<longrightarrow> e' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  e \\<longrightarrow> e'\n\ngoal (1 subgoal):\n 1. \\<not> stuck e \\<Longrightarrow> stuck e", "from val_e red"], ["proof (chain)\npicking this:\n  isval e\n  e \\<longrightarrow> e'", "have \"False\""], ["proof (prove)\nusing this:\n  isval e\n  e \\<longrightarrow> e'\n\ngoal (1 subgoal):\n 1. False", "by (case_tac e) auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<not> stuck e \\<Longrightarrow> stuck e", "from this"], ["proof (chain)\npicking this:\n  False", "show ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. stuck e", ".."], ["proof (state)\nthis:\n  stuck e\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_fv_aux: assumes fvv: \"FV v = {}\" shows \"FV (subst x v e) \\<subseteq> FV e - {x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. FV (subst x v e) \\<subseteq> FV e - {x}", "using fvv"], ["proof (prove)\nusing this:\n  FV v = {}\n\ngoal (1 subgoal):\n 1. FV (subst x v e) \\<subseteq> FV e - {x}", "proof (induction e arbitrary: x v rule: exp.induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (EVar x)) \\<subseteq> FV (EVar x) - {xa}\n 2. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (ENat x)) \\<subseteq> FV (ENat x) - {xa}\n 3. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 4. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 5. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 6. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "case (EVar x)"], ["proof (state)\nthis:\n  FV v = {}\n\ngoal (6 subgoals):\n 1. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (EVar x)) \\<subseteq> FV (EVar x) - {xa}\n 2. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (ENat x)) \\<subseteq> FV (ENat x) - {xa}\n 3. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 4. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 5. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 6. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "then"], ["proof (chain)\npicking this:\n  FV v = {}", "show ?case"], ["proof (prove)\nusing this:\n  FV v = {}\n\ngoal (1 subgoal):\n 1. FV (subst x v (EVar xa__)) \\<subseteq> FV (EVar xa__) - {x}", "by auto"], ["proof (state)\nthis:\n  FV (subst x v (EVar xa__)) \\<subseteq> FV (EVar xa__) - {x}\n\ngoal (5 subgoals):\n 1. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (ENat x)) \\<subseteq> FV (ENat x) - {xa}\n 2. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 3. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 4. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 5. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (ENat x)) \\<subseteq> FV (ENat x) - {xa}\n 2. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 3. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 4. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 5. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "case (ENat x)"], ["proof (state)\nthis:\n  FV v = {}\n\ngoal (5 subgoals):\n 1. \\<And>x xa v.\n       FV v = {} \\<Longrightarrow>\n       FV (subst xa v (ENat x)) \\<subseteq> FV (ENat x) - {xa}\n 2. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 3. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 4. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 5. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "then"], ["proof (chain)\npicking this:\n  FV v = {}", "show ?case"], ["proof (prove)\nusing this:\n  FV v = {}\n\ngoal (1 subgoal):\n 1. FV (subst x v (ENat xa__)) \\<subseteq> FV (ENat xa__) - {x}", "by auto"], ["proof (state)\nthis:\n  FV (subst x v (ENat xa__)) \\<subseteq> FV (ENat xa__) - {x}\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 2. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 3. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 4. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 2. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 3. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 4. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "case (ELam y e)"], ["proof (state)\nthis:\n  FV ?v = {} \\<Longrightarrow> FV (subst ?x ?v e) \\<subseteq> FV e - {?x}\n  FV v = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (ELam x1a x2a))\n                         \\<subseteq> FV (ELam x1a x2a) - {x}\n 2. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 3. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 4. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "then"], ["proof (chain)\npicking this:\n  FV ?v = {} \\<Longrightarrow> FV (subst ?x ?v e) \\<subseteq> FV e - {?x}\n  FV v = {}", "show ?case"], ["proof (prove)\nusing this:\n  FV ?v = {} \\<Longrightarrow> FV (subst ?x ?v e) \\<subseteq> FV e - {?x}\n  FV v = {}\n\ngoal (1 subgoal):\n 1. FV (subst x v (ELam y e)) \\<subseteq> FV (ELam y e) - {x}", "by (cases \"x = y\") auto"], ["proof (state)\nthis:\n  FV (subst x v (ELam y e)) \\<subseteq> FV (ELam y e) - {x}\n\ngoal (3 subgoals):\n 1. \\<And>x1a x2a x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EApp x1a x2a))\n                         \\<subseteq> FV (EApp x1a x2a) - {x}\n 2. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EPrim x1a x2a x3))\n                         \\<subseteq> FV (EPrim x1a x2a x3) - {x}\n 3. \\<And>x1a x2a x3 x v.\n       \\<lbrakk>\\<And>x v.\n                   FV v = {} \\<Longrightarrow>\n                   FV (subst x v x1a) \\<subseteq> FV x1a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x2a) \\<subseteq> FV x2a - {x};\n        \\<And>x v.\n           FV v = {} \\<Longrightarrow>\n           FV (subst x v x3) \\<subseteq> FV x3 - {x};\n        FV v = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v (EIf x1a x2a x3))\n                         \\<subseteq> FV (EIf x1a x2a x3) - {x}", "qed (simp,blast)+"], ["", "lemma subst_fv:  assumes fv_e: \"FV e \\<subseteq> {x}\" and fv_v: \"FV v = {}\" \n  shows \"FV (subst x v e) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. FV (subst x v e) = {}", "using fv_e fv_v subst_fv_aux"], ["proof (prove)\nusing this:\n  FV e \\<subseteq> {x}\n  FV v = {}\n  FV ?v = {} \\<Longrightarrow> FV (subst ?x ?v ?e) \\<subseteq> FV ?e - {?x}\n\ngoal (1 subgoal):\n 1. FV (subst x v e) = {}", "by blast"], ["", "lemma red_pres_fv:  fixes e::exp assumes red: \"e \\<longrightarrow> e'\" and fv: \"FV e = {}\" shows \"FV e' = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. FV e' = {}", "using red fv"], ["proof (prove)\nusing this:\n  e \\<longrightarrow> e'\n  FV e = {}\n\ngoal (1 subgoal):\n 1. FV e' = {}", "proof (induction rule: reduce.induct)"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>v x e.\n       \\<lbrakk>is_val v; FV (EApp (ELam x e) v) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v e) = {}\n 2. \\<And>e1 e1' e2.\n       \\<lbrakk>e1 \\<longrightarrow> e1';\n        FV e1 = {} \\<Longrightarrow> FV e1' = {};\n        FV (EApp e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EApp e1' e2) = {}\n 3. \\<And>e2 e2' e1.\n       \\<lbrakk>e2 \\<longrightarrow> e2';\n        FV e2 = {} \\<Longrightarrow> FV e2' = {};\n        FV (EApp e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EApp e1 e2') = {}\n 4. \\<And>f n1 n2.\n       FV (EPrim f (ENat n1) (ENat n2)) = {} \\<Longrightarrow>\n       FV (ENat (f n1 n2)) = {}\n 5. \\<And>e1 e1' f e2.\n       \\<lbrakk>e1 \\<longrightarrow> e1';\n        FV e1 = {} \\<Longrightarrow> FV e1' = {};\n        FV (EPrim f e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EPrim f e1' e2) = {}\n 6. \\<And>e2 e2' f e1.\n       \\<lbrakk>e2 \\<longrightarrow> e2';\n        FV e2 = {} \\<Longrightarrow> FV e2' = {};\n        FV (EPrim f e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EPrim f e1 e2') = {}\n 7. \\<And>thn els.\n       FV (EIf (ENat 0) thn els) = {} \\<Longrightarrow> FV els = {}\n 8. \\<And>n thn els.\n       \\<lbrakk>n \\<noteq> 0; FV (EIf (ENat n) thn els) = {}\\<rbrakk>\n       \\<Longrightarrow> FV thn = {}\n 9. \\<And>cond cond' thn els.\n       \\<lbrakk>cond \\<longrightarrow> cond';\n        FV cond = {} \\<Longrightarrow> FV cond' = {};\n        FV (EIf cond thn els) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EIf cond' thn els) = {}", "case (beta v x e)"], ["proof (state)\nthis:\n  is_val v\n  FV (EApp (ELam x e) v) = {}\n\ngoal (9 subgoals):\n 1. \\<And>v x e.\n       \\<lbrakk>is_val v; FV (EApp (ELam x e) v) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (subst x v e) = {}\n 2. \\<And>e1 e1' e2.\n       \\<lbrakk>e1 \\<longrightarrow> e1';\n        FV e1 = {} \\<Longrightarrow> FV e1' = {};\n        FV (EApp e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EApp e1' e2) = {}\n 3. \\<And>e2 e2' e1.\n       \\<lbrakk>e2 \\<longrightarrow> e2';\n        FV e2 = {} \\<Longrightarrow> FV e2' = {};\n        FV (EApp e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EApp e1 e2') = {}\n 4. \\<And>f n1 n2.\n       FV (EPrim f (ENat n1) (ENat n2)) = {} \\<Longrightarrow>\n       FV (ENat (f n1 n2)) = {}\n 5. \\<And>e1 e1' f e2.\n       \\<lbrakk>e1 \\<longrightarrow> e1';\n        FV e1 = {} \\<Longrightarrow> FV e1' = {};\n        FV (EPrim f e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EPrim f e1' e2) = {}\n 6. \\<And>e2 e2' f e1.\n       \\<lbrakk>e2 \\<longrightarrow> e2';\n        FV e2 = {} \\<Longrightarrow> FV e2' = {};\n        FV (EPrim f e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EPrim f e1 e2') = {}\n 7. \\<And>thn els.\n       FV (EIf (ENat 0) thn els) = {} \\<Longrightarrow> FV els = {}\n 8. \\<And>n thn els.\n       \\<lbrakk>n \\<noteq> 0; FV (EIf (ENat n) thn els) = {}\\<rbrakk>\n       \\<Longrightarrow> FV thn = {}\n 9. \\<And>cond cond' thn els.\n       \\<lbrakk>cond \\<longrightarrow> cond';\n        FV cond = {} \\<Longrightarrow> FV cond' = {};\n        FV (EIf cond thn els) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EIf cond' thn els) = {}", "then"], ["proof (chain)\npicking this:\n  is_val v\n  FV (EApp (ELam x e) v) = {}", "show ?case"], ["proof (prove)\nusing this:\n  is_val v\n  FV (EApp (ELam x e) v) = {}\n\ngoal (1 subgoal):\n 1. FV (subst x v e) = {}", "using subst_fv"], ["proof (prove)\nusing this:\n  is_val v\n  FV (EApp (ELam x e) v) = {}\n  \\<lbrakk>FV ?e \\<subseteq> {?x}; FV ?v = {}\\<rbrakk>\n  \\<Longrightarrow> FV (subst ?x ?v ?e) = {}\n\ngoal (1 subgoal):\n 1. FV (subst x v e) = {}", "by auto"], ["proof (state)\nthis:\n  FV (subst x v e) = {}\n\ngoal (8 subgoals):\n 1. \\<And>e1 e1' e2.\n       \\<lbrakk>e1 \\<longrightarrow> e1';\n        FV e1 = {} \\<Longrightarrow> FV e1' = {};\n        FV (EApp e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EApp e1' e2) = {}\n 2. \\<And>e2 e2' e1.\n       \\<lbrakk>e2 \\<longrightarrow> e2';\n        FV e2 = {} \\<Longrightarrow> FV e2' = {};\n        FV (EApp e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EApp e1 e2') = {}\n 3. \\<And>f n1 n2.\n       FV (EPrim f (ENat n1) (ENat n2)) = {} \\<Longrightarrow>\n       FV (ENat (f n1 n2)) = {}\n 4. \\<And>e1 e1' f e2.\n       \\<lbrakk>e1 \\<longrightarrow> e1';\n        FV e1 = {} \\<Longrightarrow> FV e1' = {};\n        FV (EPrim f e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EPrim f e1' e2) = {}\n 5. \\<And>e2 e2' f e1.\n       \\<lbrakk>e2 \\<longrightarrow> e2';\n        FV e2 = {} \\<Longrightarrow> FV e2' = {};\n        FV (EPrim f e1 e2) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EPrim f e1 e2') = {}\n 6. \\<And>thn els.\n       FV (EIf (ENat 0) thn els) = {} \\<Longrightarrow> FV els = {}\n 7. \\<And>n thn els.\n       \\<lbrakk>n \\<noteq> 0; FV (EIf (ENat n) thn els) = {}\\<rbrakk>\n       \\<Longrightarrow> FV thn = {}\n 8. \\<And>cond cond' thn els.\n       \\<lbrakk>cond \\<longrightarrow> cond';\n        FV cond = {} \\<Longrightarrow> FV cond' = {};\n        FV (EIf cond thn els) = {}\\<rbrakk>\n       \\<Longrightarrow> FV (EIf cond' thn els) = {}", "qed fastforce+"], ["", "lemma reduction_pres_fv: fixes e::exp assumes r: \"e \\<longrightarrow>* e'\" and fv: \"FV e = {}\" shows \"FV e' = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. FV e' = {}", "using r fv"], ["proof (prove)\nusing this:\n  e \\<longrightarrow>* e'\n  FV e = {}\n\ngoal (1 subgoal):\n 1. FV e' = {}", "proof (induction)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>e. FV e = {} \\<Longrightarrow> FV e = {}\n 2. \\<And>e1 e2 e3.\n       \\<lbrakk>e1 \\<longrightarrow> e2; e2 \\<longrightarrow>* e3;\n        FV e2 = {} \\<Longrightarrow> FV e3 = {}; FV e1 = {}\\<rbrakk>\n       \\<Longrightarrow> FV e3 = {}", "case (ms_nil e)"], ["proof (state)\nthis:\n  FV e = {}\n\ngoal (2 subgoals):\n 1. \\<And>e. FV e = {} \\<Longrightarrow> FV e = {}\n 2. \\<And>e1 e2 e3.\n       \\<lbrakk>e1 \\<longrightarrow> e2; e2 \\<longrightarrow>* e3;\n        FV e2 = {} \\<Longrightarrow> FV e3 = {}; FV e1 = {}\\<rbrakk>\n       \\<Longrightarrow> FV e3 = {}", "then"], ["proof (chain)\npicking this:\n  FV e = {}", "show ?case"], ["proof (prove)\nusing this:\n  FV e = {}\n\ngoal (1 subgoal):\n 1. FV e = {}", "by blast"], ["proof (state)\nthis:\n  FV e = {}\n\ngoal (1 subgoal):\n 1. \\<And>e1 e2 e3.\n       \\<lbrakk>e1 \\<longrightarrow> e2; e2 \\<longrightarrow>* e3;\n        FV e2 = {} \\<Longrightarrow> FV e3 = {}; FV e1 = {}\\<rbrakk>\n       \\<Longrightarrow> FV e3 = {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 e2 e3.\n       \\<lbrakk>e1 \\<longrightarrow> e2; e2 \\<longrightarrow>* e3;\n        FV e2 = {} \\<Longrightarrow> FV e3 = {}; FV e1 = {}\\<rbrakk>\n       \\<Longrightarrow> FV e3 = {}", "case (ms_cons e1 e2 e3)"], ["proof (state)\nthis:\n  e1 \\<longrightarrow> e2\n  e2 \\<longrightarrow>* e3\n  FV e2 = {} \\<Longrightarrow> FV e3 = {}\n  FV e1 = {}\n\ngoal (1 subgoal):\n 1. \\<And>e1 e2 e3.\n       \\<lbrakk>e1 \\<longrightarrow> e2; e2 \\<longrightarrow>* e3;\n        FV e2 = {} \\<Longrightarrow> FV e3 = {}; FV e1 = {}\\<rbrakk>\n       \\<Longrightarrow> FV e3 = {}", "then"], ["proof (chain)\npicking this:\n  e1 \\<longrightarrow> e2\n  e2 \\<longrightarrow>* e3\n  FV e2 = {} \\<Longrightarrow> FV e3 = {}\n  FV e1 = {}", "show ?case"], ["proof (prove)\nusing this:\n  e1 \\<longrightarrow> e2\n  e2 \\<longrightarrow>* e3\n  FV e2 = {} \\<Longrightarrow> FV e3 = {}\n  FV e1 = {}\n\ngoal (1 subgoal):\n 1. FV e3 = {}", "using red_pres_fv"], ["proof (prove)\nusing this:\n  e1 \\<longrightarrow> e2\n  e2 \\<longrightarrow>* e3\n  FV e2 = {} \\<Longrightarrow> FV e3 = {}\n  FV e1 = {}\n  \\<lbrakk>?e \\<longrightarrow> ?e'; FV ?e = {}\\<rbrakk>\n  \\<Longrightarrow> FV ?e' = {}\n\ngoal (1 subgoal):\n 1. FV e3 = {}", "by auto"], ["proof (state)\nthis:\n  FV e3 = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}