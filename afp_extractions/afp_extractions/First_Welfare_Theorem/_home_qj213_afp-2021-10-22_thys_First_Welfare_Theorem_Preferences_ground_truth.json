{"file_name": "/home/qj213/afp-2021-10-22/thys/First_Welfare_Theorem/Preferences.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/First_Welfare_Theorem", "problem_names": ["lemma reflexivity: \"refl_on carrier relation\"", "lemma transitivity: \"trans relation\"", "lemma indiff_trans [simp]: \"x \\<approx> y \\<Longrightarrow> y \\<approx> z \\<Longrightarrow> x \\<approx> z\"", "lemma at_lst_asgd_ge:\n  assumes \"x \\<in> at_least_as_good y B Pr\"\n  shows \"x \\<succeq>[Pr] y\"", "lemma strict_contour_is_diff:\n  \"{a \\<in> B. a \\<succ>[Pr] y} = at_least_as_good y B Pr - as_good_as y B Pr\"", "lemma strict_countour_def [simp]:\n  \"(at_least_as_good y B Pr) - as_good_as y B Pr = {x \\<in> B. x \\<succ>[Pr] y}\"", "lemma at_least_as_goodD [dest]:\n  assumes \"z \\<in> at_least_as_good y B Pr\"\n  shows \"z \\<succeq>[Pr] y\"", "lemma compl: \"\\<forall>x \\<in> carrier . \\<forall>y\\<in> carrier . x \\<succeq> y \\<or> y \\<succeq> x\"", "lemma strict_not_refl_weak [iff]: \"x \\<in> carrier \\<and> y \\<in> carrier \\<Longrightarrow> \\<not> (y \\<succeq> x) \\<longleftrightarrow> x \\<succ> y\"", "lemma strict_trans [simp]: \"x \\<succ> y \\<Longrightarrow> y \\<succ> z \\<Longrightarrow> x \\<succ> z\"", "lemma completeD [dest]: \"x \\<in> carrier \\<Longrightarrow> y \\<in> carrier \\<Longrightarrow> x \\<noteq> y \\<Longrightarrow> x \\<succeq> y \\<or> y \\<succeq> x\"", "lemma pref_in_at_least_as:\n  assumes \"x \\<succeq> y\"\n  shows \"x \\<in> at_least_as_good y carrier relation\"", "lemma worse_in_no_better:\n  assumes \"x \\<succeq> y\"\n  shows \"y \\<in> no_better_than y carrier relation\"", "lemma strict_is_neg_transitive :\n  assumes \"x \\<in> carrier \\<and> y \\<in> carrier \\<and> z \\<in> carrier\"\n  shows \"x \\<succ> y \\<Longrightarrow> x \\<succ> z \\<or> z \\<succ> y\"", "lemma weak_is_transitive:\n assumes \"x \\<in> carrier \\<and> y \\<in> carrier \\<and> z \\<in> carrier\"\n shows \"x \\<succeq> y \\<Longrightarrow> y \\<succeq> z \\<Longrightarrow> x \\<succeq> z\"", "lemma no_better_than_nonepty:\n  assumes \"carrier \\<noteq> {}\"\n  shows \"\\<And>x. x \\<in> carrier \\<Longrightarrow> (no_better_than x carrier relation) \\<noteq> {}\"", "lemma no_better_subset_pref :\n  assumes \"x \\<succeq> y\"\n  shows \"no_better_than y carrier relation \\<subseteq> no_better_than x carrier relation\"", "lemma no_better_thansubset_rel :\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  assumes \"no_better_than y carrier relation \\<subseteq> no_better_than x carrier relation\"\n  shows \"x \\<succeq> y\"", "lemma nbt_nest :\n  shows \"(no_better_than y carrier relation \\<subseteq> no_better_than x carrier relation) \\<or>\n        (no_better_than x carrier relation \\<subseteq> no_better_than y carrier relation)\"", "lemma at_lst_asgd_not_ge:\n  assumes \"carrier \\<noteq> {}\"\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  assumes \"x \\<notin> at_least_as_good y carrier relation\"\n  shows \"\\<not> x \\<succeq> y\"", "lemma as_good_as_sameIff[iff]:\n  \"z \\<in> as_good_as y carrier relation \\<longleftrightarrow> z \\<succeq> y \\<and> y \\<succeq> z\"", "lemma same_at_least_as_equal:\n  assumes \"z \\<approx> y\"\n  shows \"at_least_as_good z carrier relation =\n         at_least_as_good y carrier relation\" (is \"?az = ?ay\")", "lemma as_good_asIff [iff]:\n  \"x \\<in> as_good_as y carrier relation \\<longleftrightarrow> x \\<approx>[relation] y\"", "lemma nbt_subset:\n  assumes \"finite carrier\"\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  shows \"no_better_than x carrier relation \\<subseteq> no_better_than x carrier relation \\<or>\n         no_better_than x carrier relation \\<subseteq> no_better_than x carrier relation\"", "lemma fnt_carrier_fnt_rel: \"finite carrier \\<Longrightarrow> finite relation\"", "lemma nbt_subset_carrier:\n  assumes \"x \\<in> carrier\"\n  shows \"no_better_than x carrier relation \\<subseteq> carrier\"", "lemma xy_in_eachothers_nbt:\n  assumes \"x \\<in> carrier\" \"y \\<in> carrier\"\n  shows \"x \\<in> no_better_than y carrier relation \\<or>\n         y \\<in> no_better_than x carrier relation\"", "lemma same_nbt_same_pref:\n  assumes \"x \\<in> carrier\" \"y \\<in> carrier\"\n  shows \"x \\<in> no_better_than y carrier relation \\<and>\n         y \\<in> no_better_than x carrier relation \\<longleftrightarrow> x \\<approx> y\"", "lemma indifferent_imp_weak_pref: \n  assumes \"x \\<approx> y\"\n  shows\" x \\<succeq> y\" \"y \\<succeq> x\"", "lemma fnt_carrier_fnt_nbt:\n  shows \"\\<forall>x\\<in>carrier. finite (no_better_than x carrier relation)\"", "lemma nbt_subset_imp_card_leq:\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  shows \"no_better_than x carrier relation \\<subseteq> no_better_than y carrier relation \\<longleftrightarrow>\n  card (no_better_than x carrier relation) \\<le> card  (no_better_than y carrier relation)\"\n  (is \"?nbt \\<longleftrightarrow> ?card\")", "lemma card_leq_pref:\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  shows \"card (no_better_than x carrier relation) \\<le> card (no_better_than y carrier relation)\n   \\<longleftrightarrow> y \\<succeq> x\"", "lemma finite_ne_remove_induct:\n  assumes \"finite B\" \"B \\<noteq> {}\"\n    \"\\<And>A. finite A  \\<Longrightarrow> A \\<subseteq> B \\<Longrightarrow> A \\<noteq> {} \\<Longrightarrow>\n         (\\<And>x. x \\<in> A \\<Longrightarrow> A - {x} \\<noteq> {} \\<Longrightarrow> P (A - {x})) \\<Longrightarrow> P A\"\n  shows \"P B\"", "lemma finite_nempty_preorder_has_max:\n  assumes \"finite B\" \"B \\<noteq> {}\" \"refl_on B R\" \"trans R\" \"total_on B R\"\n  shows \"\\<exists>x \\<in> B. \\<forall>y \\<in> B. (x, y) \\<in> R\"", "lemma finite_nempty_preorder_has_min:\n  assumes \"finite B\" \"B \\<noteq> {}\" \"refl_on B R\" \"trans R\" \"total_on B R\"\n  shows \"\\<exists>x \\<in> B. \\<forall>y \\<in> B. (y, x) \\<in> R\"", "lemma finite_nonempty_carrier_has_maximum:\n  assumes \"carrier \\<noteq> {}\"\n  shows \"\\<exists>e \\<in> carrier. \\<forall>m \\<in> carrier. e \\<succeq>[relation] m\"", "lemma finite_nonempty_carrier_has_minimum:\n  assumes \"carrier \\<noteq> {}\"\n  shows \"\\<exists>e \\<in> carrier. \\<forall>m \\<in> carrier. m \\<succeq>[relation] e\"", "lemma all_carrier_ex_sub_rel: \n  \"\\<forall>c \\<subseteq> carrier. \\<exists>r \\<subseteq> relation. rational_preference c r\"", "lemma lns_alt_def1 [iff] :\n  shows \"local_nonsatiation B P \\<longleftrightarrow> (\\<forall>x \\<in> B. \\<forall>e>0. (\\<exists>y \\<in> B. dist y x \\<le> e \\<and> y \\<succ>[P] x))\"", "lemma lns_normI [intro]:\n  assumes \"\\<And>x e. x \\<in> B \\<Longrightarrow> e > 0 \\<Longrightarrow> (\\<exists>y\\<in>B. norm (y - x) \\<le> e \\<and> y \\<succ>[P] x)\"\n  shows \"local_nonsatiation B P\"", "lemma lns_distI [intro]:\n  assumes \"\\<And>x e. x \\<in> B \\<Longrightarrow> e > 0 \\<Longrightarrow> (\\<exists>y\\<in>B. (dist y x) \\<le> e \\<and> y \\<succ>[P] x)\"\n  shows \"local_nonsatiation B P\"", "lemma lns_alt_def2 [iff]:\n  \"local_nonsatiation B P \\<longleftrightarrow> (\\<forall>x\\<in>B. \\<forall>e>0. (\\<exists>y.  y \\<in> (ball x e) \\<and> y \\<in> B \\<and> y \\<succ>[P] x))\"", "lemma lns_normD [dest]:\n  assumes \"local_nonsatiation B P\"\n  shows \"\\<forall>x \\<in> B. \\<forall>e>0. \\<exists>y \\<in> B. (norm (y - x) \\<le> e \\<and> y \\<succ>[P] x)\"", "lemma convex_ge_imp_conved:\n  assumes \"\\<forall>x y. x \\<succeq>[Pr] y \\<longrightarrow> (\\<forall>\\<alpha> \\<beta>. \\<alpha> + \\<beta> = 1 \\<and> \\<alpha> \\<ge> 0 \\<and> \\<beta> \\<ge> 0 \\<longrightarrow> \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq>[Pr] y)\"\n  shows \"weak_convex_pref Pr\"", "lemma weak_convexI [intro]:\n  assumes \"\\<And>x y \\<alpha> \\<beta>. x \\<succeq>[Pr] y \\<Longrightarrow> \\<alpha> + \\<beta> = 1 \\<Longrightarrow> 0 < \\<alpha> \\<Longrightarrow> 0 < \\<beta> \\<Longrightarrow> \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq>[Pr] y\"\n  shows \"weak_convex_pref Pr\"", "lemma weak_convexD [dest]:\n  assumes \"weak_convex_pref Pr\" and \"x \\<succeq>[Pr] y\" and \"0 < u\" and \"0 < v\" and \"u + v = 1\"\n  shows \"u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[Pr] y\"", "lemma have_rpr: \"rational_preference carrier relation\"", "lemma weak_convex1D [dest]:\n  assumes \"weak_convex_pref relation\" and \"x \\<succeq>[relation] y\" and \"0 \\<le> u\" and \"0 \\<le> v\" and \"u + v = 1\"\n  shows \"u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[relation] y\"", "lemma weak_convex1I [intro] :\n  assumes \"\\<forall>x. convex (at_least_as_good x carrier relation)\"\n  shows \"weak_convex_pref relation\"", "lemma convex_def_alt:\n  assumes \"rational_preference carrier relation\"\n  assumes \"weak_convex_pref relation\"\n  shows \"(\\<forall>x \\<in> carrier. convex (at_least_as_good x carrier relation))\"", "lemma convex_imp_convex_str_upper_cnt:\n  assumes \"\\<forall>x \\<in> carrier. convex (at_least_as_good x carrier relation)\"\n  shows \"convex (at_least_as_good x carrier relation - as_good_as x carrier relation)\"\n    (is \"convex ( ?a - ?b)\")", "lemma unbounded_above_mono_imp_lns:\n  assumes \"\\<forall>M \\<in> carrier. (\\<forall>x > M. x \\<in> carrier)\"\n  assumes mono: \"monotone_preference (carrier:: 'a::ordered_euclidean_space set) relation\"\n  shows \"local_nonsatiation carrier relation\""], "translations": [["", "lemma reflexivity: \"refl_on carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_on carrier relation", "using preorder_on_def trans_refl"], ["proof (prove)\nusing this:\n  preorder_on ?A ?r \\<equiv> refl_on ?A ?r \\<and> trans ?r\n  preorder_on carrier relation\n\ngoal (1 subgoal):\n 1. refl_on carrier relation", "by blast"], ["", "lemma transitivity: \"trans relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans relation", "using preorder_on_def trans_refl"], ["proof (prove)\nusing this:\n  preorder_on ?A ?r \\<equiv> refl_on ?A ?r \\<and> trans ?r\n  preorder_on carrier relation\n\ngoal (1 subgoal):\n 1. trans relation", "by auto"], ["", "lemma indiff_trans [simp]: \"x \\<approx> y \\<Longrightarrow> y \\<approx> z \\<Longrightarrow> x \\<approx> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<succeq> y \\<and> y \\<succeq> x;\n     y \\<succeq> z \\<and> z \\<succeq> y\\<rbrakk>\n    \\<Longrightarrow> x \\<succeq> z \\<and> z \\<succeq> x", "by (meson transE transitivity)"], ["", "end"], ["", "subsubsection \\<open> Contour sets \\<close>"], ["", "definition at_least_as_good :: \"'a \\<Rightarrow> 'a set \\<Rightarrow> 'a relation \\<Rightarrow> 'a set\"\n  where\n    \"at_least_as_good x B P = {y \\<in> B. y \\<succeq>[P] x }\""], ["", "definition no_better_than :: \"'a \\<Rightarrow> 'a set \\<Rightarrow> 'a relation \\<Rightarrow> 'a set\"\n  where\n    \"no_better_than x B P = {y \\<in> B. x \\<succeq>[P] y}\""], ["", "definition as_good_as :: \"'a \\<Rightarrow> 'a set \\<Rightarrow> 'a relation \\<Rightarrow> 'a set\"\n  where\n    \"as_good_as x B P = {y \\<in> B. x \\<approx>[P] y}\""], ["", "lemma at_lst_asgd_ge:\n  assumes \"x \\<in> at_least_as_good y B Pr\"\n  shows \"x \\<succeq>[Pr] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<succeq>[Pr] y", "using assms at_least_as_good_def"], ["proof (prove)\nusing this:\n  x \\<in> at_least_as_good y B Pr\n  at_least_as_good ?x ?B ?P = {y \\<in> ?B. y \\<succeq>[?P] ?x}\n\ngoal (1 subgoal):\n 1. x \\<succeq>[Pr] y", "by fastforce"], ["", "lemma strict_contour_is_diff:\n  \"{a \\<in> B. a \\<succ>[Pr] y} = at_least_as_good y B Pr - as_good_as y B Pr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a \\<in> B. a \\<succeq>[Pr] y \\<and> (y, a) \\<notin> Pr} =\n    at_least_as_good y B Pr - as_good_as y B Pr", "by(auto simp add: at_least_as_good_def as_good_as_def)"], ["", "lemma strict_countour_def [simp]:\n  \"(at_least_as_good y B Pr) - as_good_as y B Pr = {x \\<in> B. x \\<succ>[Pr] y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at_least_as_good y B Pr - as_good_as y B Pr =\n    {x \\<in> B. x \\<succeq>[Pr] y \\<and> (y, x) \\<notin> Pr}", "by (simp add: as_good_as_def at_least_as_good_def strict_contour_is_diff)"], ["", "lemma at_least_as_goodD [dest]:\n  assumes \"z \\<in> at_least_as_good y B Pr\"\n  shows \"z \\<succeq>[Pr] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<succeq>[Pr] y", "using assms at_least_as_good_def"], ["proof (prove)\nusing this:\n  z \\<in> at_least_as_good y B Pr\n  at_least_as_good ?x ?B ?P = {y \\<in> ?B. y \\<succeq>[?P] ?x}\n\ngoal (1 subgoal):\n 1. z \\<succeq>[Pr] y", "by fastforce"], ["", "subsection \\<open>Rational Preference Relation\\<close>"], ["", "text \\<open> Rational preferences add totality to the basic preferences. \\<close>"], ["", "locale rational_preference = preference +\n  assumes total: \"total_on carrier relation\"\nbegin"], ["", "lemma compl: \"\\<forall>x \\<in> carrier . \\<forall>y\\<in> carrier . x \\<succeq> y \\<or> y \\<succeq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>carrier.\n       \\<forall>y\\<in>carrier. x \\<succeq> y \\<or> y \\<succeq> x", "by (metis refl_onD reflexivity total total_on_def)"], ["", "lemma strict_not_refl_weak [iff]: \"x \\<in> carrier \\<and> y \\<in> carrier \\<Longrightarrow> \\<not> (y \\<succeq> x) \\<longleftrightarrow> x \\<succ> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier \\<and> y \\<in> carrier \\<Longrightarrow>\n    ((y, x) \\<notin> relation) =\n    (x \\<succeq> y \\<and> (y, x) \\<notin> relation)", "by (metis refl_onD reflexivity total total_on_def)"], ["", "lemma strict_trans [simp]: \"x \\<succ> y \\<Longrightarrow> y \\<succ> z \\<Longrightarrow> x \\<succ> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<succeq> y \\<and> (y, x) \\<notin> relation;\n     y \\<succeq> z \\<and> (z, y) \\<notin> relation\\<rbrakk>\n    \\<Longrightarrow> x \\<succeq> z \\<and> (z, x) \\<notin> relation", "by (meson transE transitivity)"], ["", "lemma completeD [dest]: \"x \\<in> carrier \\<Longrightarrow> y \\<in> carrier \\<Longrightarrow> x \\<noteq> y \\<Longrightarrow> x \\<succeq> y \\<or> y \\<succeq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> carrier; y \\<in> carrier; x \\<noteq> y\\<rbrakk>\n    \\<Longrightarrow> x \\<succeq> y \\<or> y \\<succeq> x", "by blast"], ["", "lemma pref_in_at_least_as:\n  assumes \"x \\<succeq> y\"\n  shows \"x \\<in> at_least_as_good y carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> at_least_as_good y carrier relation", "by (metis (no_types, lifting) CollectI assms\n      at_least_as_good_def preference.not_outside preference_axioms)"], ["", "lemma worse_in_no_better:\n  assumes \"x \\<succeq> y\"\n  shows \"y \\<in> no_better_than y carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> no_better_than y carrier relation", "by (metis (no_types, lifting) CollectI assms no_better_than_def\n      preference_axioms preference_def strict_not_refl_weak)"], ["", "lemma strict_is_neg_transitive :\n  assumes \"x \\<in> carrier \\<and> y \\<in> carrier \\<and> z \\<in> carrier\"\n  shows \"x \\<succ> y \\<Longrightarrow> x \\<succ> z \\<or> z \\<succ> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<succeq> y \\<and> (y, x) \\<notin> relation \\<Longrightarrow>\n    x \\<succeq> z \\<and> (z, x) \\<notin> relation \\<or>\n    z \\<succeq> y \\<and> (y, z) \\<notin> relation", "by (meson assms compl transE transitivity)"], ["", "lemma weak_is_transitive:\n assumes \"x \\<in> carrier \\<and> y \\<in> carrier \\<and> z \\<in> carrier\"\n shows \"x \\<succeq> y \\<Longrightarrow> y \\<succeq> z \\<Longrightarrow> x \\<succeq> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<succeq> y; y \\<succeq> z\\<rbrakk>\n    \\<Longrightarrow> x \\<succeq> z", "by (meson transD transitivity)"], ["", "lemma no_better_than_nonepty:\n  assumes \"carrier \\<noteq> {}\"\n  shows \"\\<And>x. x \\<in> carrier \\<Longrightarrow> (no_better_than x carrier relation) \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       no_better_than x carrier relation \\<noteq> {}", "by (metis (no_types, lifting) empty_iff mem_Collect_eq\n      no_better_than_def refl_onD reflexivity)"], ["", "lemma no_better_subset_pref :\n  assumes \"x \\<succeq> y\"\n  shows \"no_better_than y carrier relation \\<subseteq> no_better_than x carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. no_better_than y carrier relation\n    \\<subseteq> no_better_than x carrier relation", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> no_better_than y carrier relation \\<Longrightarrow>\n       xa \\<in> no_better_than x carrier relation", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> no_better_than y carrier relation \\<Longrightarrow>\n       xa \\<in> no_better_than x carrier relation", "assume \"a \\<in> no_better_than y carrier relation\""], ["proof (state)\nthis:\n  a \\<in> no_better_than y carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> no_better_than y carrier relation \\<Longrightarrow>\n       xa \\<in> no_better_than x carrier relation", "then"], ["proof (chain)\npicking this:\n  a \\<in> no_better_than y carrier relation", "show \"a \\<in> no_better_than x carrier relation\""], ["proof (prove)\nusing this:\n  a \\<in> no_better_than y carrier relation\n\ngoal (1 subgoal):\n 1. a \\<in> no_better_than x carrier relation", "by (metis (no_types, lifting) assms mem_Collect_eq no_better_than_def transE transitivity)"], ["proof (state)\nthis:\n  a \\<in> no_better_than x carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma no_better_thansubset_rel :\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  assumes \"no_better_than y carrier relation \\<subseteq> no_better_than x carrier relation\"\n  shows \"x \\<succeq> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<succeq> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<succeq> y", "have  \"{a \\<in> carrier. y \\<succeq> a} \\<subseteq> {a \\<in> carrier. x \\<succeq> a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a \\<in> carrier. y \\<succeq> a}\n    \\<subseteq> {a \\<in> carrier. x \\<succeq> a}", "by (metis (no_types) assms(3) no_better_than_def)"], ["proof (state)\nthis:\n  {a \\<in> carrier. y \\<succeq> a}\n  \\<subseteq> {a \\<in> carrier. x \\<succeq> a}\n\ngoal (1 subgoal):\n 1. x \\<succeq> y", "then"], ["proof (chain)\npicking this:\n  {a \\<in> carrier. y \\<succeq> a}\n  \\<subseteq> {a \\<in> carrier. x \\<succeq> a}", "show ?thesis"], ["proof (prove)\nusing this:\n  {a \\<in> carrier. y \\<succeq> a}\n  \\<subseteq> {a \\<in> carrier. x \\<succeq> a}\n\ngoal (1 subgoal):\n 1. x \\<succeq> y", "by (metis (mono_tags, lifting) Collect_mono_iff assms(2) compl)"], ["proof (state)\nthis:\n  x \\<succeq> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nbt_nest :\n  shows \"(no_better_than y carrier relation \\<subseteq> no_better_than x carrier relation) \\<or>\n        (no_better_than x carrier relation \\<subseteq> no_better_than y carrier relation)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. no_better_than y carrier relation\n    \\<subseteq> no_better_than x carrier relation \\<or>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "by (metis (no_types, lifting) CollectD compl no_better_subset_pref no_better_than_def not_outside subsetI)"], ["", "lemma at_lst_asgd_not_ge:\n  assumes \"carrier \\<noteq> {}\"\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  assumes \"x \\<notin> at_least_as_good y carrier relation\"\n  shows \"\\<not> x \\<succeq> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> relation", "by (metis (no_types, lifting) CollectI assms(2) assms(4) at_least_as_good_def)"], ["", "lemma as_good_as_sameIff[iff]:\n  \"z \\<in> as_good_as y carrier relation \\<longleftrightarrow> z \\<succeq> y \\<and> y \\<succeq> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z \\<in> as_good_as y carrier relation) =\n    (z \\<succeq> y \\<and> y \\<succeq> z)", "by (metis (no_types, lifting) as_good_as_def mem_Collect_eq not_outside)"], ["", "lemma same_at_least_as_equal:\n  assumes \"z \\<approx> y\"\n  shows \"at_least_as_good z carrier relation =\n         at_least_as_good y carrier relation\" (is \"?az = ?ay\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. at_least_as_good z carrier relation =\n    at_least_as_good y carrier relation", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. at_least_as_good z carrier relation\n    \\<subseteq> at_least_as_good y carrier relation\n 2. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "have \"z \\<in> carrier \\<and> y \\<in> carrier\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<in> carrier \\<and> y \\<in> carrier", "by (meson assms refl_onD2 reflexivity)"], ["proof (state)\nthis:\n  z \\<in> carrier \\<and> y \\<in> carrier\n\ngoal (2 subgoals):\n 1. at_least_as_good z carrier relation\n    \\<subseteq> at_least_as_good y carrier relation\n 2. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "moreover"], ["proof (state)\nthis:\n  z \\<in> carrier \\<and> y \\<in> carrier\n\ngoal (2 subgoals):\n 1. at_least_as_good z carrier relation\n    \\<subseteq> at_least_as_good y carrier relation\n 2. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "have \"\\<forall>x \\<in> carrier. x \\<succeq> z \\<longrightarrow> x \\<succeq> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>carrier. x \\<succeq> z \\<longrightarrow> x \\<succeq> y", "by (meson assms transD transitivity)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>carrier. x \\<succeq> z \\<longrightarrow> x \\<succeq> y\n\ngoal (2 subgoals):\n 1. at_least_as_good z carrier relation\n    \\<subseteq> at_least_as_good y carrier relation\n 2. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "ultimately"], ["proof (chain)\npicking this:\n  z \\<in> carrier \\<and> y \\<in> carrier\n  \\<forall>x\\<in>carrier. x \\<succeq> z \\<longrightarrow> x \\<succeq> y", "show \"?az \\<subseteq> ?ay\""], ["proof (prove)\nusing this:\n  z \\<in> carrier \\<and> y \\<in> carrier\n  \\<forall>x\\<in>carrier. x \\<succeq> z \\<longrightarrow> x \\<succeq> y\n\ngoal (1 subgoal):\n 1. at_least_as_good z carrier relation\n    \\<subseteq> at_least_as_good y carrier relation", "by (metis at_lst_asgd_ge at_lst_asgd_not_ge\n        equals0D not_outside subsetI)"], ["proof (state)\nthis:\n  at_least_as_good z carrier relation\n  \\<subseteq> at_least_as_good y carrier relation\n\ngoal (1 subgoal):\n 1. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "have \"z \\<in> carrier \\<and> y \\<in> carrier\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<in> carrier \\<and> y \\<in> carrier", "by (meson assms refl_onD2 reflexivity)"], ["proof (state)\nthis:\n  z \\<in> carrier \\<and> y \\<in> carrier\n\ngoal (1 subgoal):\n 1. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "moreover"], ["proof (state)\nthis:\n  z \\<in> carrier \\<and> y \\<in> carrier\n\ngoal (1 subgoal):\n 1. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "have \"\\<forall>x \\<in> carrier. x \\<succeq> y \\<longrightarrow> x \\<succeq> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>carrier. x \\<succeq> y \\<longrightarrow> x \\<succeq> z", "by (meson assms transD transitivity)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>carrier. x \\<succeq> y \\<longrightarrow> x \\<succeq> z\n\ngoal (1 subgoal):\n 1. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "ultimately"], ["proof (chain)\npicking this:\n  z \\<in> carrier \\<and> y \\<in> carrier\n  \\<forall>x\\<in>carrier. x \\<succeq> y \\<longrightarrow> x \\<succeq> z", "show \"?ay \\<subseteq> ?az\""], ["proof (prove)\nusing this:\n  z \\<in> carrier \\<and> y \\<in> carrier\n  \\<forall>x\\<in>carrier. x \\<succeq> y \\<longrightarrow> x \\<succeq> z\n\ngoal (1 subgoal):\n 1. at_least_as_good y carrier relation\n    \\<subseteq> at_least_as_good z carrier relation", "by (metis at_lst_asgd_ge at_lst_asgd_not_ge\n        equals0D not_outside subsetI)"], ["proof (state)\nthis:\n  at_least_as_good y carrier relation\n  \\<subseteq> at_least_as_good z carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma as_good_asIff [iff]:\n  \"x \\<in> as_good_as y carrier relation \\<longleftrightarrow> x \\<approx>[relation] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<in> as_good_as y carrier relation) =\n    (x \\<succeq> y \\<and> y \\<succeq> x)", "by blast"], ["", "lemma nbt_subset:\n  assumes \"finite carrier\"\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  shows \"no_better_than x carrier relation \\<subseteq> no_better_than x carrier relation \\<or>\n         no_better_than x carrier relation \\<subseteq> no_better_than x carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. no_better_than x carrier relation\n    \\<subseteq> no_better_than x carrier relation \\<or>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than x carrier relation", "by auto"], ["", "lemma fnt_carrier_fnt_rel: \"finite carrier \\<Longrightarrow> finite relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite carrier \\<Longrightarrow> finite relation", "by (metis finite_SigmaI refl_on_def reflexivity rev_finite_subset)"], ["", "lemma nbt_subset_carrier:\n  assumes \"x \\<in> carrier\"\n  shows \"no_better_than x carrier relation \\<subseteq> carrier\""], ["proof (prove)\ngoal (1 subgoal):\n 1. no_better_than x carrier relation \\<subseteq> carrier", "using no_better_than_def"], ["proof (prove)\nusing this:\n  no_better_than ?x ?B ?P = {y \\<in> ?B. ?x \\<succeq>[?P] y}\n\ngoal (1 subgoal):\n 1. no_better_than x carrier relation \\<subseteq> carrier", "by fastforce"], ["", "lemma xy_in_eachothers_nbt:\n  assumes \"x \\<in> carrier\" \"y \\<in> carrier\"\n  shows \"x \\<in> no_better_than y carrier relation \\<or>\n         y \\<in> no_better_than x carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> no_better_than y carrier relation \\<or>\n    y \\<in> no_better_than x carrier relation", "by (meson assms(1) assms(2) contra_subsetD nbt_nest refl_onD reflexivity worse_in_no_better)"], ["", "lemma same_nbt_same_pref:\n  assumes \"x \\<in> carrier\" \"y \\<in> carrier\"\n  shows \"x \\<in> no_better_than y carrier relation \\<and>\n         y \\<in> no_better_than x carrier relation \\<longleftrightarrow> x \\<approx> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<in> no_better_than y carrier relation \\<and>\n     y \\<in> no_better_than x carrier relation) =\n    (x \\<succeq> y \\<and> y \\<succeq> x)", "by (metis (mono_tags, lifting) CollectD contra_subsetD no_better_subset_pref\n        no_better_than_def worse_in_no_better)"], ["", "lemma indifferent_imp_weak_pref: \n  assumes \"x \\<approx> y\"\n  shows\" x \\<succeq> y\" \"y \\<succeq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<succeq> y &&& y \\<succeq> x", "by (simp add: assms)+"], ["", "subsection \\<open> Finite carrier\\<close>"], ["", "context\n  assumes \"finite carrier\"\nbegin"], ["", "lemma fnt_carrier_fnt_nbt:\n  shows \"\\<forall>x\\<in>carrier. finite (no_better_than x carrier relation)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>carrier. finite (no_better_than x carrier relation)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       finite (no_better_than x carrier relation)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       finite (no_better_than x carrier relation)", "assume \"x \\<in> carrier\""], ["proof (state)\nthis:\n  x \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       finite (no_better_than x carrier relation)", "then"], ["proof (chain)\npicking this:\n  x \\<in> carrier", "show \"finite (no_better_than x carrier relation)\""], ["proof (prove)\nusing this:\n  x \\<in> carrier\n\ngoal (1 subgoal):\n 1. finite (no_better_than x carrier relation)", "using  finite_subset nbt_subset_carrier \\<open>finite carrier\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> carrier\n  \\<lbrakk>?A \\<subseteq> ?B; finite ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n  ?x \\<in> carrier \\<Longrightarrow>\n  no_better_than ?x carrier relation \\<subseteq> carrier\n  finite carrier\n\ngoal (1 subgoal):\n 1. finite (no_better_than x carrier relation)", "by blast"], ["proof (state)\nthis:\n  finite (no_better_than x carrier relation)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nbt_subset_imp_card_leq:\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  shows \"no_better_than x carrier relation \\<subseteq> no_better_than y carrier relation \\<longleftrightarrow>\n  card (no_better_than x carrier relation) \\<le> card  (no_better_than y carrier relation)\"\n  (is \"?nbt \\<longleftrightarrow> ?card\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (no_better_than x carrier relation\n     \\<subseteq> no_better_than y carrier relation) =\n    (card (no_better_than x carrier relation)\n     \\<le> card (no_better_than y carrier relation))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)\n 2. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "assume \"?nbt\""], ["proof (state)\nthis:\n  no_better_than x carrier relation\n  \\<subseteq> no_better_than y carrier relation\n\ngoal (2 subgoals):\n 1. no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)\n 2. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "then"], ["proof (chain)\npicking this:\n  no_better_than x carrier relation\n  \\<subseteq> no_better_than y carrier relation", "show \"?card\""], ["proof (prove)\nusing this:\n  no_better_than x carrier relation\n  \\<subseteq> no_better_than y carrier relation\n\ngoal (1 subgoal):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "by (simp add: assms(2) card_mono fnt_carrier_fnt_nbt)"], ["proof (state)\nthis:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n\ngoal (1 subgoal):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "assume \"?card\""], ["proof (state)\nthis:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n\ngoal (1 subgoal):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "then"], ["proof (chain)\npicking this:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)", "show \"?nbt\""], ["proof (prove)\nusing this:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n\ngoal (1 subgoal):\n 1. no_better_than x carrier relation\n    \\<subseteq> no_better_than y carrier relation", "by (metis  assms(1) card_seteq fnt_carrier_fnt_nbt nbt_nest)"], ["proof (state)\nthis:\n  no_better_than x carrier relation\n  \\<subseteq> no_better_than y carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma card_leq_pref:\n  assumes \"x \\<in> carrier\" and \"y \\<in> carrier\"\n  shows \"card (no_better_than x carrier relation) \\<le> card (no_better_than y carrier relation)\n   \\<longleftrightarrow> y \\<succeq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (card (no_better_than x carrier relation)\n     \\<le> card (no_better_than y carrier relation)) =\n    y \\<succeq> x", "proof (rule iffI, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    y \\<succeq> x\n 2. y \\<succeq> x \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "case 1"], ["proof (state)\nthis:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n\ngoal (2 subgoals):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation) \\<Longrightarrow>\n    y \\<succeq> x\n 2. y \\<succeq> x \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "then"], ["proof (chain)\npicking this:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)", "show ?case"], ["proof (prove)\nusing this:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n\ngoal (1 subgoal):\n 1. y \\<succeq> x", "using assms(1) assms(2) nbt_subset_imp_card_leq no_better_thansubset_rel"], ["proof (prove)\nusing this:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n  x \\<in> carrier\n  y \\<in> carrier\n  \\<lbrakk>?x \\<in> carrier; ?y \\<in> carrier\\<rbrakk>\n  \\<Longrightarrow> (no_better_than ?x carrier relation\n                     \\<subseteq> no_better_than ?y carrier relation) =\n                    (card (no_better_than ?x carrier relation)\n                     \\<le> card (no_better_than ?y carrier relation))\n  \\<lbrakk>?x \\<in> carrier; ?y \\<in> carrier;\n   no_better_than ?y carrier relation\n   \\<subseteq> no_better_than ?x carrier relation\\<rbrakk>\n  \\<Longrightarrow> ?x \\<succeq> ?y\n\ngoal (1 subgoal):\n 1. y \\<succeq> x", "by presburger"], ["proof (state)\nthis:\n  y \\<succeq> x\n\ngoal (1 subgoal):\n 1. y \\<succeq> x \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<succeq> x \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "case 2"], ["proof (state)\nthis:\n  y \\<succeq> x\n\ngoal (1 subgoal):\n 1. y \\<succeq> x \\<Longrightarrow>\n    card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "then"], ["proof (chain)\npicking this:\n  y \\<succeq> x", "show ?case"], ["proof (prove)\nusing this:\n  y \\<succeq> x\n\ngoal (1 subgoal):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "using assms(1) assms(2) nbt_subset_imp_card_leq no_better_subset_pref"], ["proof (prove)\nusing this:\n  y \\<succeq> x\n  x \\<in> carrier\n  y \\<in> carrier\n  \\<lbrakk>?x \\<in> carrier; ?y \\<in> carrier\\<rbrakk>\n  \\<Longrightarrow> (no_better_than ?x carrier relation\n                     \\<subseteq> no_better_than ?y carrier relation) =\n                    (card (no_better_than ?x carrier relation)\n                     \\<le> card (no_better_than ?y carrier relation))\n  ?x \\<succeq> ?y \\<Longrightarrow>\n  no_better_than ?y carrier relation\n  \\<subseteq> no_better_than ?x carrier relation\n\ngoal (1 subgoal):\n 1. card (no_better_than x carrier relation)\n    \\<le> card (no_better_than y carrier relation)", "by blast"], ["proof (state)\nthis:\n  card (no_better_than x carrier relation)\n  \\<le> card (no_better_than y carrier relation)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma finite_ne_remove_induct:\n  assumes \"finite B\" \"B \\<noteq> {}\"\n    \"\\<And>A. finite A  \\<Longrightarrow> A \\<subseteq> B \\<Longrightarrow> A \\<noteq> {} \\<Longrightarrow>\n         (\\<And>x. x \\<in> A \\<Longrightarrow> A - {x} \\<noteq> {} \\<Longrightarrow> P (A - {x})) \\<Longrightarrow> P A\"\n  shows \"P B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P B", "by (metis assms finite_remove_induct[where P = \"\\<lambda>F. F = {} \\<or> P F\" for P])"], ["", "lemma finite_nempty_preorder_has_max:\n  assumes \"finite B\" \"B \\<noteq> {}\" \"refl_on B R\" \"trans R\" \"total_on B R\"\n  shows \"\\<exists>x \\<in> B. \\<forall>y \\<in> B. (x, y) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>B. \\<forall>y\\<in>B. x \\<succeq>[R] y", "using assms(1) subset_refl[of B] assms(2)"], ["proof (prove)\nusing this:\n  finite B\n  B \\<subseteq> B\n  B \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>B. \\<forall>y\\<in>B. x \\<succeq>[R] y", "proof (induct B rule: finite_subset_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. {} \\<noteq> {} \\<Longrightarrow>\n    \\<exists>x\\<in>{}. \\<forall>y\\<in>{}. x \\<succeq>[R] y\n 2. \\<And>a F.\n       \\<lbrakk>finite F; a \\<in> B; a \\<notin> F;\n        F \\<noteq> {} \\<Longrightarrow>\n        \\<exists>x\\<in>F. \\<forall>y\\<in>F. x \\<succeq>[R] y;\n        insert a F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>insert a F.\n                            \\<forall>y\\<in>insert a F. x \\<succeq>[R] y", "case (insert x F)"], ["proof (state)\nthis:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. x \\<succeq>[R] y\n  insert x F \\<noteq> {}\n\ngoal (2 subgoals):\n 1. {} \\<noteq> {} \\<Longrightarrow>\n    \\<exists>x\\<in>{}. \\<forall>y\\<in>{}. x \\<succeq>[R] y\n 2. \\<And>a F.\n       \\<lbrakk>finite F; a \\<in> B; a \\<notin> F;\n        F \\<noteq> {} \\<Longrightarrow>\n        \\<exists>x\\<in>F. \\<forall>y\\<in>F. x \\<succeq>[R] y;\n        insert a F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>insert a F.\n                            \\<forall>y\\<in>insert a F. x \\<succeq>[R] y", "then"], ["proof (chain)\npicking this:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. x \\<succeq>[R] y\n  insert x F \\<noteq> {}", "show ?case"], ["proof (prove)\nusing this:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. x \\<succeq>[R] y\n  insert x F \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>xa\\<in>insert x F. \\<forall>y\\<in>insert x F. xa \\<succeq>[R] y", "using assms(3-)"], ["proof (prove)\nusing this:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. x \\<succeq>[R] y\n  insert x F \\<noteq> {}\n  refl_on B R\n  trans R\n  total_on B R\n\ngoal (1 subgoal):\n 1. \\<exists>xa\\<in>insert x F. \\<forall>y\\<in>insert x F. xa \\<succeq>[R] y", "by (cases \"F = {}\") (auto simp: refl_onD total_on_def, metis refl_onD2 transE)"], ["proof (state)\nthis:\n  \\<exists>xa\\<in>insert x F. \\<forall>y\\<in>insert x F. xa \\<succeq>[R] y\n\ngoal (1 subgoal):\n 1. {} \\<noteq> {} \\<Longrightarrow>\n    \\<exists>x\\<in>{}. \\<forall>y\\<in>{}. x \\<succeq>[R] y", "qed auto"], ["", "lemma finite_nempty_preorder_has_min:\n  assumes \"finite B\" \"B \\<noteq> {}\" \"refl_on B R\" \"trans R\" \"total_on B R\"\n  shows \"\\<exists>x \\<in> B. \\<forall>y \\<in> B. (y, x) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>B. \\<forall>y\\<in>B. y \\<succeq>[R] x", "using assms(1) subset_refl[of B] assms(2)"], ["proof (prove)\nusing this:\n  finite B\n  B \\<subseteq> B\n  B \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>B. \\<forall>y\\<in>B. y \\<succeq>[R] x", "proof (induct B rule: finite_subset_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. {} \\<noteq> {} \\<Longrightarrow>\n    \\<exists>x\\<in>{}. \\<forall>y\\<in>{}. y \\<succeq>[R] x\n 2. \\<And>a F.\n       \\<lbrakk>finite F; a \\<in> B; a \\<notin> F;\n        F \\<noteq> {} \\<Longrightarrow>\n        \\<exists>x\\<in>F. \\<forall>y\\<in>F. y \\<succeq>[R] x;\n        insert a F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>insert a F.\n                            \\<forall>y\\<in>insert a F. y \\<succeq>[R] x", "case (insert x F)"], ["proof (state)\nthis:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. y \\<succeq>[R] x\n  insert x F \\<noteq> {}\n\ngoal (2 subgoals):\n 1. {} \\<noteq> {} \\<Longrightarrow>\n    \\<exists>x\\<in>{}. \\<forall>y\\<in>{}. y \\<succeq>[R] x\n 2. \\<And>a F.\n       \\<lbrakk>finite F; a \\<in> B; a \\<notin> F;\n        F \\<noteq> {} \\<Longrightarrow>\n        \\<exists>x\\<in>F. \\<forall>y\\<in>F. y \\<succeq>[R] x;\n        insert a F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>x\\<in>insert a F.\n                            \\<forall>y\\<in>insert a F. y \\<succeq>[R] x", "then"], ["proof (chain)\npicking this:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. y \\<succeq>[R] x\n  insert x F \\<noteq> {}", "show ?case"], ["proof (prove)\nusing this:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. y \\<succeq>[R] x\n  insert x F \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>xa\\<in>insert x F. \\<forall>y\\<in>insert x F. y \\<succeq>[R] xa", "using assms(3-)"], ["proof (prove)\nusing this:\n  finite F\n  x \\<in> B\n  x \\<notin> F\n  F \\<noteq> {} \\<Longrightarrow>\n  \\<exists>x\\<in>F. \\<forall>y\\<in>F. y \\<succeq>[R] x\n  insert x F \\<noteq> {}\n  refl_on B R\n  trans R\n  total_on B R\n\ngoal (1 subgoal):\n 1. \\<exists>xa\\<in>insert x F. \\<forall>y\\<in>insert x F. y \\<succeq>[R] xa", "by (cases \"F = {}\") (auto simp: refl_onD total_on_def, metis refl_onD2 transE)"], ["proof (state)\nthis:\n  \\<exists>xa\\<in>insert x F. \\<forall>y\\<in>insert x F. y \\<succeq>[R] xa\n\ngoal (1 subgoal):\n 1. {} \\<noteq> {} \\<Longrightarrow>\n    \\<exists>x\\<in>{}. \\<forall>y\\<in>{}. y \\<succeq>[R] x", "qed auto"], ["", "lemma finite_nonempty_carrier_has_maximum:\n  assumes \"carrier \\<noteq> {}\"\n  shows \"\\<exists>e \\<in> carrier. \\<forall>m \\<in> carrier. e \\<succeq>[relation] m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e\\<in>carrier. \\<forall>m\\<in>carrier. e \\<succeq> m", "using finite_nempty_preorder_has_max[of carrier relation] assms\n     \\<open>finite carrier\\<close> reflexivity total transitivity"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite carrier; carrier \\<noteq> {}; refl_on carrier relation;\n   trans relation; total_on carrier relation\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>carrier.\n                       \\<forall>y\\<in>carrier. x \\<succeq> y\n  carrier \\<noteq> {}\n  finite carrier\n  refl_on carrier relation\n  total_on carrier relation\n  trans relation\n\ngoal (1 subgoal):\n 1. \\<exists>e\\<in>carrier. \\<forall>m\\<in>carrier. e \\<succeq> m", "by blast"], ["", "lemma finite_nonempty_carrier_has_minimum:\n  assumes \"carrier \\<noteq> {}\"\n  shows \"\\<exists>e \\<in> carrier. \\<forall>m \\<in> carrier. m \\<succeq>[relation] e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e\\<in>carrier. \\<forall>m\\<in>carrier. m \\<succeq> e", "using finite_nempty_preorder_has_min[of carrier relation] assms\n     \\<open>finite carrier\\<close> reflexivity total transitivity"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite carrier; carrier \\<noteq> {}; refl_on carrier relation;\n   trans relation; total_on carrier relation\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>carrier.\n                       \\<forall>y\\<in>carrier. y \\<succeq> x\n  carrier \\<noteq> {}\n  finite carrier\n  refl_on carrier relation\n  total_on carrier relation\n  trans relation\n\ngoal (1 subgoal):\n 1. \\<exists>e\\<in>carrier. \\<forall>m\\<in>carrier. m \\<succeq> e", "by blast"], ["", "end"], ["", "(*finite carrier*)"], ["", "lemma all_carrier_ex_sub_rel: \n  \"\\<forall>c \\<subseteq> carrier. \\<exists>r \\<subseteq> relation. rational_preference c r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>c\\<subseteq>carrier.\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "proof (standard,standard)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "fix c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "assume c_in: \"c \\<subseteq> carrier\""], ["proof (state)\nthis:\n  c \\<subseteq> carrier\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "define r' where\n    \"r' = {(x,y) \\<in> relation. x \\<in> c \\<and> y \\<in> c}\""], ["proof (state)\nthis:\n  r' = {(x, y). x \\<succeq> y \\<and> x \\<in> c \\<and> y \\<in> c}\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "have r'_sub: \"r' \\<subseteq> c \\<times> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r' \\<subseteq> c \\<times> c", "using r'_def"], ["proof (prove)\nusing this:\n  r' = {(x, y). x \\<succeq> y \\<and> x \\<in> c \\<and> y \\<in> c}\n\ngoal (1 subgoal):\n 1. r' \\<subseteq> c \\<times> c", "by blast"], ["proof (state)\nthis:\n  r' \\<subseteq> c \\<times> c\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "have \"\\<forall>x \\<in> c. x \\<succeq>[r'] x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>c. x \\<succeq>[r'] x", "by (metis (no_types, lifting) CollectI c_in case_prodI compl r'_def subsetCE)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>c. x \\<succeq>[r'] x\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "then"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>c. x \\<succeq>[r'] x", "have refl: \"refl_on c r'\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>c. x \\<succeq>[r'] x\n\ngoal (1 subgoal):\n 1. refl_on c r'", "by (meson r'_sub refl_onI)"], ["proof (state)\nthis:\n  refl_on c r'\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "have trans: \"trans r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans r'", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>x \\<succeq>[r'] y; y \\<succeq>[r'] z\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] z", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>x \\<succeq>[r'] y; y \\<succeq>[r'] z\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] z", "assume a1: \"x \\<succeq>[r'] y\""], ["proof (state)\nthis:\n  x \\<succeq>[r'] y\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>x \\<succeq>[r'] y; y \\<succeq>[r'] z\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] z", "assume a2: \"y \\<succeq>[r'] z\""], ["proof (state)\nthis:\n  y \\<succeq>[r'] z\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>x \\<succeq>[r'] y; y \\<succeq>[r'] z\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] z", "show \" x \\<succeq>[r'] z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<succeq>[r'] z", "by (metis (mono_tags, lifting) CollectD CollectI a1 a2 case_prodD case_prodI r'_def transE transitivity)"], ["proof (state)\nthis:\n  x \\<succeq>[r'] z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trans r'\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "have total: \"total_on c r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. total_on c r'", "proof (standard)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> c; y \\<in> c; x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> c; y \\<in> c; x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x", "assume a1:\"x \\<in> c\""], ["proof (state)\nthis:\n  x \\<in> c\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> c; y \\<in> c; x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x", "assume a2: \"y \\<in> c\""], ["proof (state)\nthis:\n  y \\<in> c\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> c; y \\<in> c; x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x", "assume a3: \"x \\<noteq> y\""], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> c; y \\<in> c; x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x", "show \"x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x \""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x", "by (metis (no_types, lifting) CollectI a1 a2 c_in case_prodI compl r'_def subset_iff)"], ["proof (state)\nthis:\n  x \\<succeq>[r'] y \\<or> y \\<succeq>[r'] x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  total_on c r'\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "have \"rational_preference c r'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rational_preference c r'", "by (meson local.refl local.trans preference.intro preorder_on_def rational_preference.intro \n        rational_preference_axioms.intro refl_on_domain total)"], ["proof (state)\nthis:\n  rational_preference c r'\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<subseteq> carrier \\<Longrightarrow>\n       \\<exists>r\\<subseteq>relation. rational_preference c r", "thus \"\\<exists>r\\<subseteq>relation. rational_preference c r\""], ["proof (prove)\nusing this:\n  rational_preference c r'\n\ngoal (1 subgoal):\n 1. \\<exists>r\\<subseteq>relation. rational_preference c r", "by (metis (no_types, lifting) CollectD case_prodD r'_def subrelI)"], ["proof (state)\nthis:\n  \\<exists>r\\<subseteq>relation. rational_preference c r\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*rational preference*)"], ["", "subsection \\<open> Local Non-Satiation \\<close>"], ["", "text \\<open> Defining local non-satiation. \\<close>"], ["", "definition local_nonsatiation\n  where\n  \"local_nonsatiation B P \\<longleftrightarrow>\n   (\\<forall>x\\<in>B. \\<forall>e>0. \\<exists>y\\<in>B. norm (y - x) \\<le> e \\<and> y \\<succ>[P] x)\""], ["", "text \\<open> Alternate definitions and intro/dest rules with them \\<close>"], ["", "lemma lns_alt_def1 [iff] :\n  shows \"local_nonsatiation B P \\<longleftrightarrow> (\\<forall>x \\<in> B. \\<forall>e>0. (\\<exists>y \\<in> B. dist y x \\<le> e \\<and> y \\<succ>[P] x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local_nonsatiation B P =\n    (\\<forall>x\\<in>B.\n        \\<forall>e>0.\n           \\<exists>y\\<in>B.\n              dist y x \\<le> e \\<and>\n              y \\<succeq>[P] x \\<and> (x, y) \\<notin> P)", "by(simp add : dist_norm local_nonsatiation_def)"], ["", "lemma lns_normI [intro]:\n  assumes \"\\<And>x e. x \\<in> B \\<Longrightarrow> e > 0 \\<Longrightarrow> (\\<exists>y\\<in>B. norm (y - x) \\<le> e \\<and> y \\<succ>[P] x)\"\n  shows \"local_nonsatiation B P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local_nonsatiation B P", "by (simp add: assms dist_norm)"], ["", "lemma lns_distI [intro]:\n  assumes \"\\<And>x e. x \\<in> B \\<Longrightarrow> e > 0 \\<Longrightarrow> (\\<exists>y\\<in>B. (dist y x) \\<le> e \\<and> y \\<succ>[P] x)\"\n  shows \"local_nonsatiation B P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local_nonsatiation B P", "by (meson lns_alt_def1 assms)"], ["", "lemma lns_alt_def2 [iff]:\n  \"local_nonsatiation B P \\<longleftrightarrow> (\\<forall>x\\<in>B. \\<forall>e>0. (\\<exists>y.  y \\<in> (ball x e) \\<and> y \\<in> B \\<and> y \\<succ>[P] x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local_nonsatiation B P =\n    (\\<forall>x\\<in>B.\n        \\<forall>e>0.\n           \\<exists>y.\n              y \\<in> ball x e \\<and>\n              y \\<in> B \\<and> y \\<succeq>[P] x \\<and> (x, y) \\<notin> P)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. local_nonsatiation B P \\<Longrightarrow>\n    \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and> y \\<succeq>[P] x \\<and> (x, y) \\<notin> P\n 2. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and>\n             y \\<succeq>[P] x \\<and> (x, y) \\<notin> P \\<Longrightarrow>\n    local_nonsatiation B P", "assume \"local_nonsatiation B P\""], ["proof (state)\nthis:\n  local_nonsatiation B P\n\ngoal (2 subgoals):\n 1. local_nonsatiation B P \\<Longrightarrow>\n    \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and> y \\<succeq>[P] x \\<and> (x, y) \\<notin> P\n 2. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and>\n             y \\<succeq>[P] x \\<and> (x, y) \\<notin> P \\<Longrightarrow>\n    local_nonsatiation B P", "then"], ["proof (chain)\npicking this:\n  local_nonsatiation B P", "show \"\\<forall>x\\<in>B. \\<forall>e>0. \\<exists>x'. x' \\<in> ball x e \\<and> x' \\<in> B \\<and> x' \\<succ>[P] x\""], ["proof (prove)\nusing this:\n  local_nonsatiation B P\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>x'.\n             x' \\<in> ball x e \\<and>\n             x' \\<in> B \\<and> x' \\<succeq>[P] x \\<and> (x, x') \\<notin> P", "by (auto simp add : ball_def) (metis dense le_less_trans dist_commute)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>B.\n     \\<forall>e>0.\n        \\<exists>x'.\n           x' \\<in> ball x e \\<and>\n           x' \\<in> B \\<and> x' \\<succeq>[P] x \\<and> (x, x') \\<notin> P\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and>\n             y \\<succeq>[P] x \\<and> (x, y) \\<notin> P \\<Longrightarrow>\n    local_nonsatiation B P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and>\n             y \\<succeq>[P] x \\<and> (x, y) \\<notin> P \\<Longrightarrow>\n    local_nonsatiation B P", "assume \"\\<forall>x\\<in>B. \\<forall>e>0. \\<exists>y. y \\<in> ball x e \\<and> y \\<in> B \\<and> y \\<succ>[P] x\""], ["proof (state)\nthis:\n  \\<forall>x\\<in>B.\n     \\<forall>e>0.\n        \\<exists>y.\n           y \\<in> ball x e \\<and>\n           y \\<in> B \\<and> y \\<succeq>[P] x \\<and> (x, y) \\<notin> P\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y.\n             y \\<in> ball x e \\<and>\n             y \\<in> B \\<and>\n             y \\<succeq>[P] x \\<and> (x, y) \\<notin> P \\<Longrightarrow>\n    local_nonsatiation B P", "then"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>B.\n     \\<forall>e>0.\n        \\<exists>y.\n           y \\<in> ball x e \\<and>\n           y \\<in> B \\<and> y \\<succeq>[P] x \\<and> (x, y) \\<notin> P", "show \"local_nonsatiation B P\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>B.\n     \\<forall>e>0.\n        \\<exists>y.\n           y \\<in> ball x e \\<and>\n           y \\<in> B \\<and> y \\<succeq>[P] x \\<and> (x, y) \\<notin> P\n\ngoal (1 subgoal):\n 1. local_nonsatiation B P", "by (metis (no_types, lifting) ball_def dist_commute\n        less_le_not_le lns_alt_def1 mem_Collect_eq)"], ["proof (state)\nthis:\n  local_nonsatiation B P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lns_normD [dest]:\n  assumes \"local_nonsatiation B P\"\n  shows \"\\<forall>x \\<in> B. \\<forall>e>0. \\<exists>y \\<in> B. (norm (y - x) \\<le> e \\<and> y \\<succ>[P] x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>B.\n       \\<forall>e>0.\n          \\<exists>y\\<in>B.\n             norm (y - x) \\<le> e \\<and>\n             y \\<succeq>[P] x \\<and> (x, y) \\<notin> P", "by (meson assms local_nonsatiation_def)"], ["", "subsection \\<open> Convex preferences \\<close>"], ["", "definition weak_convex_pref :: \"('a::real_vector) relation \\<Rightarrow> bool\"\n  where\n    \"weak_convex_pref Pr \\<longleftrightarrow> (\\<forall>x y. x \\<succeq>[Pr] y \\<longrightarrow>\n      (\\<forall>\\<alpha> \\<beta>. \\<alpha> + \\<beta> = 1 \\<and> \\<alpha> > 0 \\<and> \\<beta> > 0 \\<longrightarrow> \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq>[Pr] y))\""], ["", "definition convex_pref :: \"('a::real_vector) relation \\<Rightarrow> bool\"\n  where\n    \"convex_pref Pr \\<longleftrightarrow> (\\<forall>x y. x \\<succ>[Pr] y \\<longrightarrow>\n      (\\<forall>\\<alpha>. 1 > \\<alpha> \\<and> \\<alpha> > 0 \\<longrightarrow> \\<alpha> *\\<^sub>R x + (1-\\<alpha>) *\\<^sub>R y \\<succ>[Pr] y))\""], ["", "definition strict_convex_pref :: \"('a::real_vector) relation \\<Rightarrow> bool\"\n  where\n    \"strict_convex_pref Pr \\<longleftrightarrow> (\\<forall>x y. x \\<succeq>[Pr] y \\<and> x \\<noteq> y \\<longrightarrow>\n      (\\<forall>\\<alpha>. 1 > \\<alpha> \\<and> \\<alpha> > 0 \\<longrightarrow> \\<alpha> *\\<^sub>R x + (1-\\<alpha>) *\\<^sub>R y \\<succ>[Pr] y))\""], ["", "lemma convex_ge_imp_conved:\n  assumes \"\\<forall>x y. x \\<succeq>[Pr] y \\<longrightarrow> (\\<forall>\\<alpha> \\<beta>. \\<alpha> + \\<beta> = 1 \\<and> \\<alpha> \\<ge> 0 \\<and> \\<beta> \\<ge> 0 \\<longrightarrow> \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq>[Pr] y)\"\n  shows \"weak_convex_pref Pr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. weak_convex_pref Pr", "by (simp add: assms weak_convex_pref_def)"], ["", "lemma weak_convexI [intro]:\n  assumes \"\\<And>x y \\<alpha> \\<beta>. x \\<succeq>[Pr] y \\<Longrightarrow> \\<alpha> + \\<beta> = 1 \\<Longrightarrow> 0 < \\<alpha> \\<Longrightarrow> 0 < \\<beta> \\<Longrightarrow> \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq>[Pr] y\"\n  shows \"weak_convex_pref Pr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. weak_convex_pref Pr", "by (simp add: assms weak_convex_pref_def)"], ["", "lemma weak_convexD [dest]:\n  assumes \"weak_convex_pref Pr\" and \"x \\<succeq>[Pr] y\" and \"0 < u\" and \"0 < v\" and \"u + v = 1\"\n  shows \"u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[Pr] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[Pr] y", "using assms weak_convex_pref_def"], ["proof (prove)\nusing this:\n  weak_convex_pref Pr\n  x \\<succeq>[Pr] y\n  0 < u\n  0 < v\n  u + v = 1\n  weak_convex_pref ?Pr =\n  (\\<forall>x y.\n      x \\<succeq>[?Pr] y \\<longrightarrow>\n      (\\<forall>\\<alpha> \\<beta>.\n          \\<alpha> + \\<beta> = 1 \\<and>\n          0 < \\<alpha> \\<and> 0 < \\<beta> \\<longrightarrow>\n          \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq>[?Pr] y))\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[Pr] y", "by blast"], ["", "subsection \\<open> Real Vector Preferences \\<close>"], ["", "text \\<open> Preference relations on real vector type class. \\<close>"], ["", "locale real_vector_rpr = rational_preference carrier relation\nfor carrier :: \"'a::real_vector set\"\nand relation :: \"'a relation\""], ["", "sublocale  real_vector_rpr \\<subseteq> rational_preference carrier relation"], ["proof (prove)\ngoal (1 subgoal):\n 1. rational_preference carrier relation", "by (simp add: rational_preference_axioms)"], ["", "context real_vector_rpr\nbegin"], ["", "lemma have_rpr: \"rational_preference carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rational_preference carrier relation", "by (simp add: rational_preference_axioms)"], ["", "text \\<open> Multiple convexity alternate definitions intro/dest rules. \\<close>"], ["", "lemma weak_convex1D [dest]:\n  assumes \"weak_convex_pref relation\" and \"x \\<succeq>[relation] y\" and \"0 \\<le> u\" and \"0 \\<le> v\" and \"u + v = 1\"\n  shows \"u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[relation] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "have u_0: \"u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[relation] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. u = 0 \\<Longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "assume u_0: \"u = 0\""], ["proof (state)\nthis:\n  u = 0\n\ngoal (1 subgoal):\n 1. u = 0 \\<Longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "have \"v = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v = 1", "using assms(5) u_0"], ["proof (prove)\nusing this:\n  u + v = 1\n  u = 0\n\ngoal (1 subgoal):\n 1. v = 1", "by auto"], ["proof (state)\nthis:\n  v = 1\n\ngoal (1 subgoal):\n 1. u = 0 \\<Longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "then"], ["proof (chain)\npicking this:\n  v = 1", "have \"?thesis\""], ["proof (prove)\nusing this:\n  v = 1\n\ngoal (1 subgoal):\n 1. u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "by (metis add.left_neutral assms(2) preference.reflexivity preference_axioms\n          real_vector.scale_zero_left refl_onD2 scaleR_one strict_not_refl_weak)"], ["proof (state)\nthis:\n  u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal (1 subgoal):\n 1. u = 0 \\<Longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "thus \"u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[relation] y \""], ["proof (prove)\nusing this:\n  u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "using u_0"], ["proof (prove)\nusing this:\n  u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n  u = 0\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "by blast"], ["proof (state)\nthis:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u = 0 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "have \"u \\<noteq> 0 \\<and> u \\<noteq> 1 \\<longrightarrow> u *\\<^sub>R x + v *\\<^sub>R y \\<succeq>[relation] y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<noteq> 0 \\<and> u \\<noteq> 1 \\<longrightarrow>\n    u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "by (metis add_cancel_right_right antisym_conv not_le assms weak_convexD )"], ["proof (state)\nthis:\n  u \\<noteq> 0 \\<and> u \\<noteq> 1 \\<longrightarrow>\n  u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "then"], ["proof (chain)\npicking this:\n  u \\<noteq> 0 \\<and> u \\<noteq> 1 \\<longrightarrow>\n  u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "show ?thesis"], ["proof (prove)\nusing this:\n  u \\<noteq> 0 \\<and> u \\<noteq> 1 \\<longrightarrow>\n  u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y", "by (metis u_0 assms(2,5) add_cancel_right_right real_vector.scale_zero_left scaleR_one)"], ["proof (state)\nthis:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<succeq> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weak_convex1I [intro] :\n  assumes \"\\<forall>x. convex (at_least_as_good x carrier relation)\"\n  shows \"weak_convex_pref relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. weak_convex_pref relation", "proof (rule weak_convexI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "fix x and y and \\<alpha> \\<beta> :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "assume assum : \"x \\<succeq>[relation] y\""], ["proof (state)\nthis:\n  x \\<succeq> y\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "assume reals: \"0 < \\<alpha>\" \"0 < \\<beta>\" \" \\<alpha> + \\<beta> = 1\""], ["proof (state)\nthis:\n  0 < \\<alpha>\n  0 < \\<beta>\n  \\<alpha> + \\<beta> = 1\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "then"], ["proof (chain)\npicking this:\n  0 < \\<alpha>\n  0 < \\<beta>\n  \\<alpha> + \\<beta> = 1", "have \"x \\<in> carrier\""], ["proof (prove)\nusing this:\n  0 < \\<alpha>\n  0 < \\<beta>\n  \\<alpha> + \\<beta> = 1\n\ngoal (1 subgoal):\n 1. x \\<in> carrier", "by (meson assum preference.not_outside rational_preference.axioms(1) have_rpr)"], ["proof (state)\nthis:\n  x \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "have \"y \\<in> carrier\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> carrier", "by (meson assum refl_onD2 reflexivity)"], ["proof (state)\nthis:\n  y \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "then"], ["proof (chain)\npicking this:\n  y \\<in> carrier", "have y_in_upper_cont: \"y \\<in> (at_least_as_good y carrier relation)\""], ["proof (prove)\nusing this:\n  y \\<in> carrier\n\ngoal (1 subgoal):\n 1. y \\<in> at_least_as_good y carrier relation", "using assms rational_preference.at_lst_asgd_not_ge\n      rational_preference.compl"], ["proof (prove)\nusing this:\n  y \\<in> carrier\n  \\<forall>x. convex (at_least_as_good x carrier relation)\n  \\<lbrakk>rational_preference ?carrier ?relation; ?carrier \\<noteq> {};\n   ?x \\<in> ?carrier; ?y \\<in> ?carrier;\n   ?x \\<notin> at_least_as_good ?y ?carrier ?relation\\<rbrakk>\n  \\<Longrightarrow> (?x, ?y) \\<notin> ?relation\n  rational_preference ?carrier ?relation \\<Longrightarrow>\n  \\<forall>x\\<in>?carrier.\n     \\<forall>y\\<in>?carrier.\n        x \\<succeq>[?relation] y \\<or> y \\<succeq>[?relation] x\n\ngoal (1 subgoal):\n 1. y \\<in> at_least_as_good y carrier relation", "by (metis empty_iff have_rpr)"], ["proof (state)\nthis:\n  y \\<in> at_least_as_good y carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "then"], ["proof (chain)\npicking this:\n  y \\<in> at_least_as_good y carrier relation", "have \"x \\<in> (at_least_as_good y carrier relation)\""], ["proof (prove)\nusing this:\n  y \\<in> at_least_as_good y carrier relation\n\ngoal (1 subgoal):\n 1. x \\<in> at_least_as_good y carrier relation", "using assum pref_in_at_least_as"], ["proof (prove)\nusing this:\n  y \\<in> at_least_as_good y carrier relation\n  x \\<succeq> y\n  ?x \\<succeq> ?y \\<Longrightarrow>\n  ?x \\<in> at_least_as_good ?y carrier relation\n\ngoal (1 subgoal):\n 1. x \\<in> at_least_as_good y carrier relation", "by blast"], ["proof (state)\nthis:\n  x \\<in> at_least_as_good y carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "moreover"], ["proof (state)\nthis:\n  x \\<in> at_least_as_good y carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "have \"0 \\<le> \\<beta>\" and \"0 \\<le> \\<alpha>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> \\<beta> &&& 0 \\<le> \\<alpha>", "using reals"], ["proof (prove)\nusing this:\n  0 < \\<alpha>\n  0 < \\<beta>\n  \\<alpha> + \\<beta> = 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> \\<beta> &&& 0 \\<le> \\<alpha>", "by (auto)"], ["proof (state)\nthis:\n  0 \\<le> \\<beta>\n  0 \\<le> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>x y \\<alpha> \\<beta>.\n       \\<lbrakk>x \\<succeq> y; \\<alpha> + \\<beta> = 1; 0 < \\<alpha>;\n        0 < \\<beta>\\<rbrakk>\n       \\<Longrightarrow> \\<alpha> *\\<^sub>R x +\n                         \\<beta> *\\<^sub>R y \\<succeq> y", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> at_least_as_good y carrier relation\n  0 \\<le> \\<beta>\n  0 \\<le> \\<alpha>", "show \"(\\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y) \\<succeq>[relation] y\""], ["proof (prove)\nusing this:\n  x \\<in> at_least_as_good y carrier relation\n  0 \\<le> \\<beta>\n  0 \\<le> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq> y", "by (meson assms(1) at_least_as_goodD convexD reals(3) y_in_upper_cont)"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R x + \\<beta> *\\<^sub>R y \\<succeq> y\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open> Definition of convexity in \"Handbook of Social Choice and Welfare\"@{cite \"arrow2010handbook\"}. \\<close>"], ["", "lemma convex_def_alt:\n  assumes \"rational_preference carrier relation\"\n  assumes \"weak_convex_pref relation\"\n  shows \"(\\<forall>x \\<in> carrier. convex (at_least_as_good x carrier relation))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>carrier. convex (at_least_as_good x carrier relation)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       convex (at_least_as_good x carrier relation)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       convex (at_least_as_good x carrier relation)", "assume x_in: \"x \\<in> carrier\""], ["proof (state)\nthis:\n  x \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> carrier \\<Longrightarrow>\n       convex (at_least_as_good x carrier relation)", "show \"convex (at_least_as_good x carrier relation)\" (is \"convex ?x\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (at_least_as_good x carrier relation)", "proof (rule convexI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "fix a b :: \"'a\" and  \\<alpha> :: \"real\" and \\<beta> :: \"real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "assume a_in: \"a \\<in> ?x\""], ["proof (state)\nthis:\n  a \\<in> at_least_as_good x carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "assume b_in: \"b \\<in> ?x\""], ["proof (state)\nthis:\n  b \\<in> at_least_as_good x carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "assume reals: \" 0 \\<le> \\<alpha>\" \"0 \\<le> \\<beta>\" \"\\<alpha> + \\<beta> = 1\""], ["proof (state)\nthis:\n  0 \\<le> \\<alpha>\n  0 \\<le> \\<beta>\n  \\<alpha> + \\<beta> = 1\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "have a_g_x: \"a \\<succeq>[relation] x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<succeq> x", "using a_in"], ["proof (prove)\nusing this:\n  a \\<in> at_least_as_good x carrier relation\n\ngoal (1 subgoal):\n 1. a \\<succeq> x", "by blast"], ["proof (state)\nthis:\n  a \\<succeq> x\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "have b_g_x: \"b \\<succeq>[relation] x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<succeq> x", "using b_in"], ["proof (prove)\nusing this:\n  b \\<in> at_least_as_good x carrier relation\n\ngoal (1 subgoal):\n 1. b \\<succeq> x", "by blast"], ["proof (state)\nthis:\n  b \\<succeq> x\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "have \"a \\<succeq>[relation] b \\<or> b \\<succeq>[relation] a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<succeq> b \\<or> b \\<succeq> a", "by (meson a_in at_least_as_goodD b_in preference.not_outside\n          rational_preference.compl rational_preference_def assms(1))"], ["proof (state)\nthis:\n  a \\<succeq> b \\<or> b \\<succeq> a\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation;\n        y \\<in> at_least_as_good x carrier relation; 0 \\<le> u; 0 \\<le> v;\n        u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  a \\<succeq> b \\<or> b \\<succeq> a", "show \"\\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<in> ?x\""], ["proof (prove)\nusing this:\n  a \\<succeq> b \\<or> b \\<succeq> a\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "proof(rule disjE)"], ["proof (state)\ngoal (2 subgoals):\n 1. a \\<succeq> b \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation\n 2. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "assume \"a \\<succeq>[relation] b\""], ["proof (state)\nthis:\n  a \\<succeq> b\n\ngoal (2 subgoals):\n 1. a \\<succeq> b \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation\n 2. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  a \\<succeq> b", "have \"\\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b  \\<succeq>[relation] b\""], ["proof (prove)\nusing this:\n  a \\<succeq> b\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> b", "using assms reals"], ["proof (prove)\nusing this:\n  a \\<succeq> b\n  rational_preference carrier relation\n  weak_convex_pref relation\n  0 \\<le> \\<alpha>\n  0 \\<le> \\<beta>\n  \\<alpha> + \\<beta> = 1\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> b", "by blast"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> b\n\ngoal (2 subgoals):\n 1. a \\<succeq> b \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation\n 2. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> b", "have \"\\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq>[relation] x\""], ["proof (prove)\nusing this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> b\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x", "by (meson b_g_x  assms(1) preference.not_outside x_in\n            rational_preference.strict_is_neg_transitive\n            rational_preference.strict_not_refl_weak rational_preference_def)"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x\n\ngoal (2 subgoals):\n 1. a \\<succeq> b \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation\n 2. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "by (metis (no_types, lifting) CollectI  assms(1)\n            at_least_as_good_def preference_def rational_preference_def)"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n  \\<in> at_least_as_good x carrier relation\n\ngoal (1 subgoal):\n 1. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "assume as: \"b \\<succeq>[relation] a\""], ["proof (state)\nthis:\n  b \\<succeq> a\n\ngoal (1 subgoal):\n 1. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  b \\<succeq> a", "have \"\\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq>[relation] a\""], ["proof (prove)\nusing this:\n  b \\<succeq> a\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> a", "by (metis add.commute assms(2) reals weak_convex1D)"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> a\n\ngoal (1 subgoal):\n 1. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "have \"\\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq>[relation] a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> a", "by (metis as add.commute  assms(2)\n            reals(1,2,3) weak_convex1D)"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> a\n\ngoal (1 subgoal):\n 1. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> a", "have \"\\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq>[relation] x\""], ["proof (prove)\nusing this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> a\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x", "by (meson a_g_x assms(1) preference.indiff_trans x_in\n            preference.not_outside rational_preference.axioms(1)\n            rational_preference.strict_is_neg_transitive )"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x\n\ngoal (1 subgoal):\n 1. b \\<succeq> a \\<Longrightarrow>\n    \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "then"], ["proof (chain)\npicking this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "using pref_in_at_least_as"], ["proof (prove)\nusing this:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b \\<succeq> x\n  ?x \\<succeq> ?y \\<Longrightarrow>\n  ?x \\<in> at_least_as_good ?y carrier relation\n\ngoal (1 subgoal):\n 1. \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n    \\<in> at_least_as_good x carrier relation", "by blast"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n  \\<in> at_least_as_good x carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<alpha> *\\<^sub>R a + \\<beta> *\\<^sub>R b\n  \\<in> at_least_as_good x carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  convex (at_least_as_good x carrier relation)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_imp_convex_str_upper_cnt:\n  assumes \"\\<forall>x \\<in> carrier. convex (at_least_as_good x carrier relation)\"\n  shows \"convex (at_least_as_good x carrier relation - as_good_as x carrier relation)\"\n    (is \"convex ( ?a - ?b)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. convex\n     (at_least_as_good x carrier relation - as_good_as x carrier relation)", "proof (rule convexI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "fix a y u v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "assume as_a: \"a \\<in> ?a - ?b\""], ["proof (state)\nthis:\n  a \\<in> at_least_as_good x carrier relation -\n          as_good_as x carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "assume as_y: \"y \\<in> ?a - ?b\""], ["proof (state)\nthis:\n  y \\<in> at_least_as_good x carrier relation -\n          as_good_as x carrier relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "assume reals: \"0 \\<le> (u::real)\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "have cvx: \"weak_convex_pref relation \""], ["proof (prove)\ngoal (1 subgoal):\n 1. weak_convex_pref relation", "by (meson assms at_least_as_goodD convexI have_rpr\n        preference_def rational_preference.axioms(1) weak_convex1I)"], ["proof (state)\nthis:\n  weak_convex_pref relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  weak_convex_pref relation", "have a_g_x: \"a \\<succ>[relation] x\""], ["proof (prove)\nusing this:\n  weak_convex_pref relation\n\ngoal (1 subgoal):\n 1. a \\<succeq> x \\<and> (x, a) \\<notin> relation", "using as_a"], ["proof (prove)\nusing this:\n  weak_convex_pref relation\n  a \\<in> at_least_as_good x carrier relation -\n          as_good_as x carrier relation\n\ngoal (1 subgoal):\n 1. a \\<succeq> x \\<and> (x, a) \\<notin> relation", "by blast"], ["proof (state)\nthis:\n  a \\<succeq> x \\<and> (x, a) \\<notin> relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  a \\<succeq> x \\<and> (x, a) \\<notin> relation", "have y_gt_x: \"y \\<succ>[relation] x\""], ["proof (prove)\nusing this:\n  a \\<succeq> x \\<and> (x, a) \\<notin> relation\n\ngoal (1 subgoal):\n 1. y \\<succeq> x \\<and> (x, y) \\<notin> relation", "using as_y"], ["proof (prove)\nusing this:\n  a \\<succeq> x \\<and> (x, a) \\<notin> relation\n  y \\<in> at_least_as_good x carrier relation -\n          as_good_as x carrier relation\n\ngoal (1 subgoal):\n 1. y \\<succeq> x \\<and> (x, y) \\<notin> relation", "by blast"], ["proof (state)\nthis:\n  y \\<succeq> x \\<and> (x, y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. \\<And>xa y u v.\n       \\<lbrakk>xa \\<in> at_least_as_good x carrier relation -\n                         as_good_as x carrier relation;\n        y \\<in> at_least_as_good x carrier relation -\n                as_good_as x carrier relation;\n        0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n       \\<Longrightarrow> u *\\<^sub>R xa + v *\\<^sub>R y\n                         \\<in> at_least_as_good x carrier relation -\n                               as_good_as x carrier relation", "show \"u *\\<^sub>R a + v *\\<^sub>R y \\<in> ?a - ?b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y\n    \\<in> at_least_as_good x carrier relation -\n          as_good_as x carrier relation", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<in> at_least_as_good x carrier relation\n 2. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "show \"u *\\<^sub>R a + v *\\<^sub>R y \\<in> ?a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<in> at_least_as_good x carrier relation", "by (metis DiffD1 a_g_x as_a as_y assms convexD reals have_rpr\n          preference_def rational_preference.axioms(1))"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<in> at_least_as_good x carrier relation\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "have \"a \\<succeq>[relation] y \\<or> y \\<succeq>[relation] a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<succeq> y \\<or> y \\<succeq> a", "by (meson a_g_x y_gt_x assms(1) preference.not_outside have_rpr\n          rational_preference.axioms(1) rational_preference.strict_not_refl_weak)"], ["proof (state)\nthis:\n  a \\<succeq> y \\<or> y \\<succeq> a\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  a \\<succeq> y \\<or> y \\<succeq> a", "show \"u *\\<^sub>R a + v *\\<^sub>R y \\<notin> ?b\""], ["proof (prove)\nusing this:\n  a \\<succeq> y \\<or> y \\<succeq> a\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a \\<succeq> y \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n 2. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "assume \"a \\<succeq>[relation] y\""], ["proof (state)\nthis:\n  a \\<succeq> y\n\ngoal (2 subgoals):\n 1. a \\<succeq> y \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n 2. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  a \\<succeq> y", "have \"u *\\<^sub>R a + v *\\<^sub>R y \\<succeq>[relation] y\""], ["proof (prove)\nusing this:\n  a \\<succeq> y\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> y", "using cvx assms(1) reals"], ["proof (prove)\nusing this:\n  a \\<succeq> y\n  weak_convex_pref relation\n  \\<forall>x\\<in>carrier. convex (at_least_as_good x carrier relation)\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> y", "by blast"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> y\n\ngoal (2 subgoals):\n 1. a \\<succeq> y \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n 2. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> y", "have \"u *\\<^sub>R a + v *\\<^sub>R y \\<succ>[relation] x\""], ["proof (prove)\nusing this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> y\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n    (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation", "using y_gt_x"], ["proof (prove)\nusing this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> y\n  y \\<succeq> x \\<and> (x, y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n    (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation", "by (meson assms(1) rational_preference.axioms(1) have_rpr\n            rational_preference.strict_is_neg_transitive preference_def)"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n  (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation\n\ngoal (2 subgoals):\n 1. a \\<succeq> y \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n 2. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n  (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation", "show \"u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\""], ["proof (prove)\nusing this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n  (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "by blast"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n\ngoal (1 subgoal):\n 1. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "assume \"y \\<succeq>[relation] a\""], ["proof (state)\nthis:\n  y \\<succeq> a\n\ngoal (1 subgoal):\n 1. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  y \\<succeq> a", "have \"u *\\<^sub>R a + v *\\<^sub>R y \\<succeq>[relation] a\""], ["proof (prove)\nusing this:\n  y \\<succeq> a\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> a", "using cvx assms(1) reals"], ["proof (prove)\nusing this:\n  y \\<succeq> a\n  weak_convex_pref relation\n  \\<forall>x\\<in>carrier. convex (at_least_as_good x carrier relation)\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> a", "by (metis add.commute weak_convex1D)"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> a\n\ngoal (1 subgoal):\n 1. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> a", "have \"u *\\<^sub>R a + v *\\<^sub>R y \\<succ>[relation] x\""], ["proof (prove)\nusing this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> a\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n    (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation", "by (meson a_g_x assms(1) rational_preference.strict_is_neg_transitive\n            rational_preference.axioms(1) preference_def have_rpr)"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n  (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. y \\<succeq> a \\<Longrightarrow>\n    u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "then"], ["proof (chain)\npicking this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n  (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation", "show \"u *\\<^sub>R a + v *\\<^sub>R y \\<notin> ?b\""], ["proof (prove)\nusing this:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<succeq> x \\<and>\n  (x, u *\\<^sub>R a + v *\\<^sub>R y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation", "by blast"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y \\<notin> as_good_as x carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u *\\<^sub>R a + v *\\<^sub>R y\n  \\<in> at_least_as_good x carrier relation - as_good_as x carrier relation\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "subsubsection \\<open> Monotone preferences \\<close>"], ["", "definition weak_monotone_prefs :: \"'a set \\<Rightarrow> ('a::ord) relation \\<Rightarrow> bool\"\n  where\n    \"weak_monotone_prefs B P \\<longleftrightarrow> (\\<forall>x \\<in> B. \\<forall>y \\<in> B. x \\<ge> y \\<longrightarrow> x \\<succeq>[P]y)\""], ["", "definition monotone_preference :: \"'a set \\<Rightarrow> ('a::ord) relation \\<Rightarrow> bool\"\n  where\n    \"monotone_preference B P \\<longleftrightarrow> (\\<forall>x \\<in> B. \\<forall>y \\<in> B. x > y \\<longrightarrow> x \\<succ>[P] y)\""], ["", "text \\<open> Given a carrier set that is unbounded above (not the \"standard\" mathematical definition),\n       monotonicity implies local non-satiation. \\<close>"], ["", "lemma unbounded_above_mono_imp_lns:\n  assumes \"\\<forall>M \\<in> carrier. (\\<forall>x > M. x \\<in> carrier)\"\n  assumes mono: \"monotone_preference (carrier:: 'a::ordered_euclidean_space set) relation\"\n  shows \"local_nonsatiation carrier relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local_nonsatiation carrier relation", "proof(rule lns_distI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x e.\n       \\<lbrakk>x \\<in> carrier; 0 < e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y\\<in>carrier.\n                            dist y x \\<le> e \\<and>\n                            y \\<succeq>[relation] x \\<and>\n                            (x, y) \\<notin> relation", "fix x and e::\"real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x e.\n       \\<lbrakk>x \\<in> carrier; 0 < e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y\\<in>carrier.\n                            dist y x \\<le> e \\<and>\n                            y \\<succeq>[relation] x \\<and>\n                            (x, y) \\<notin> relation", "assume x_in: \"x \\<in> carrier\""], ["proof (state)\nthis:\n  x \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<And>x e.\n       \\<lbrakk>x \\<in> carrier; 0 < e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y\\<in>carrier.\n                            dist y x \\<le> e \\<and>\n                            y \\<succeq>[relation] x \\<and>\n                            (x, y) \\<notin> relation", "assume gz : \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>x e.\n       \\<lbrakk>x \\<in> carrier; 0 < e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y\\<in>carrier.\n                            dist y x \\<le> e \\<and>\n                            y \\<succeq>[relation] x \\<and>\n                            (x, y) \\<notin> relation", "show \"\\<exists>y\\<in>carrier. dist y x \\<le> e \\<and> y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "obtain v :: real where\n      v:\"v < e\" \"0 < v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v < e; 0 < v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using gz dense"], ["proof (prove)\nusing this:\n  0 < e\n  ?x < ?y \\<Longrightarrow> \\<exists>z>?x. z < ?y\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v < e; 0 < v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  v < e\n  0 < v\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "obtain i where\n      i:\"(i::'a) \\<in> Basis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i. i \\<in> Basis \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  i \\<in> Basis\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "define y where\n      y_value : \"y = x + v *\\<^sub>R i\""], ["proof (state)\nthis:\n  y = x + v *\\<^sub>R i\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "have ge:\"y \\<ge> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<le> y", "using y_value i"], ["proof (prove)\nusing this:\n  y = x + v *\\<^sub>R i\n  i \\<in> Basis\n\ngoal (1 subgoal):\n 1. x \\<le> y", "unfolding y_value"], ["proof (prove)\nusing this:\n  x + v *\\<^sub>R i = x + v *\\<^sub>R i\n  i \\<in> Basis\n\ngoal (1 subgoal):\n 1. x \\<le> x + v *\\<^sub>R i", "by (simp add: v(2) zero_le_scaleR_iff)"], ["proof (state)\nthis:\n  x \\<le> y\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "have \"y \\<noteq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<noteq> x", "using y_value i"], ["proof (prove)\nusing this:\n  y = x + v *\\<^sub>R i\n  i \\<in> Basis\n\ngoal (1 subgoal):\n 1. y \\<noteq> x", "unfolding y_value"], ["proof (prove)\nusing this:\n  x + v *\\<^sub>R i = x + v *\\<^sub>R i\n  i \\<in> Basis\n\ngoal (1 subgoal):\n 1. x + v *\\<^sub>R i \\<noteq> x", "using v(2)"], ["proof (prove)\nusing this:\n  x + v *\\<^sub>R i = x + v *\\<^sub>R i\n  i \\<in> Basis\n  0 < v\n\ngoal (1 subgoal):\n 1. x + v *\\<^sub>R i \\<noteq> x", "by auto"], ["proof (state)\nthis:\n  y \\<noteq> x\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "hence y_str_g_x : \"y > x\""], ["proof (prove)\nusing this:\n  y \\<noteq> x\n\ngoal (1 subgoal):\n 1. x < y", "using ge"], ["proof (prove)\nusing this:\n  y \\<noteq> x\n  x \\<le> y\n\ngoal (1 subgoal):\n 1. x < y", "by auto"], ["proof (state)\nthis:\n  x < y\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "have y_in: \"y \\<in> carrier\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> carrier", "using assms(1) x_in y_str_g_x"], ["proof (prove)\nusing this:\n  \\<forall>M\\<in>carrier. \\<forall>x>M. x \\<in> carrier\n  x \\<in> carrier\n  x < y\n\ngoal (1 subgoal):\n 1. y \\<in> carrier", "by blast"], ["proof (state)\nthis:\n  y \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "then"], ["proof (chain)\npicking this:\n  y \\<in> carrier", "have y_pref_x : \"y \\<succ>[relation] x\""], ["proof (prove)\nusing this:\n  y \\<in> carrier\n\ngoal (1 subgoal):\n 1. y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "using y_str_g_x x_in mono monotone_preference_def"], ["proof (prove)\nusing this:\n  y \\<in> carrier\n  x < y\n  x \\<in> carrier\n  monotone_preference carrier relation\n  monotone_preference ?B ?P =\n  (\\<forall>x\\<in>?B.\n      \\<forall>y\\<in>?B.\n         y < x \\<longrightarrow>\n         x \\<succeq>[?P] y \\<and> (y, x) \\<notin> ?P)\n\ngoal (1 subgoal):\n 1. y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "by blast"], ["proof (state)\nthis:\n  y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "hence \" norm (y - x) \\<le> e\""], ["proof (prove)\nusing this:\n  y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\n\ngoal (1 subgoal):\n 1. norm (y - x) \\<le> e", "using \\<open>0 < v\\<close> y_value y_value i v"], ["proof (prove)\nusing this:\n  y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\n  0 < v\n  y = x + v *\\<^sub>R i\n  y = x + v *\\<^sub>R i\n  i \\<in> Basis\n  v < e\n  0 < v\n\ngoal (1 subgoal):\n 1. norm (y - x) \\<le> e", "by auto"], ["proof (state)\nthis:\n  norm (y - x) \\<le> e\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "hence dist_less_e : \"dist y x \\<le> e\""], ["proof (prove)\nusing this:\n  norm (y - x) \\<le> e\n\ngoal (1 subgoal):\n 1. dist y x \\<le> e", "by (simp add: dist_norm)"], ["proof (state)\nthis:\n  dist y x \\<le> e\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "thus ?thesis"], ["proof (prove)\nusing this:\n  dist y x \\<le> e\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "using y_pref_x dist_less_e y_in"], ["proof (prove)\nusing this:\n  dist y x \\<le> e\n  y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\n  dist y x \\<le> e\n  y \\<in> carrier\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>carrier.\n       dist y x \\<le> e \\<and>\n       y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation", "by blast"], ["proof (state)\nthis:\n  \\<exists>y\\<in>carrier.\n     dist y x \\<le> e \\<and>\n     y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>y\\<in>carrier.\n     dist y x \\<le> e \\<and>\n     y \\<succeq>[relation] x \\<and> (x, y) \\<notin> relation\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}