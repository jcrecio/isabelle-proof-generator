{"file_name": "/home/qj213/afp-2021-10-22/thys/Locally-Nameless-Sigma/Sigma/ParRed.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Locally-Nameless-Sigma", "problem_names": ["lemma Obj_par_red[consumes 1, case_names obj]: \n  \"\\<lbrakk> Obj f T \\<Rightarrow>\\<^sub>\\<beta> z; \n     \\<And>lz. \\<lbrakk> dom lz = dom f; z = Obj lz T\\<rbrakk> \\<Longrightarrow> Q \\<rbrakk> \\<Longrightarrow> Q\"", "lemma Upd_par_red[consumes 1, case_names upd obj]: \n  fixes t l u z\n  assumes \n  \"Upd t l u \\<Rightarrow>\\<^sub>\\<beta> z\" and\n  \"\\<And>t' u' L. \\<lbrakk> t \\<Rightarrow>\\<^sub>\\<beta> t'; finite L;\n                \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>t''. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \n                          \\<and> u' = \\<sigma>[s,p]t'');\n                z = Upd t' l u' \\<rbrakk> \\<Longrightarrow> Q\" and\n  \"\\<And>f f' T u' L. \\<lbrakk> l \\<in> dom f; Obj f T = t; Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T;\n                    finite L;\n                    \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                     \\<longrightarrow> (\\<exists>t''. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \n                              \\<and> u' = \\<sigma>[s,p]t'');\n                z = Obj (f'(l \\<mapsto> u')) T \\<rbrakk> \\<Longrightarrow> Q\"\n  shows Q", "lemma Call_par_red[consumes 1, case_names call beta]: \n  fixes s l u z\n  assumes \n  \"Call s l u \\<Rightarrow>\\<^sub>\\<beta> z\" and\n  \"\\<And>t u'. \\<lbrakk> s \\<Rightarrow>\\<^sub>\\<beta> t; u \\<Rightarrow>\\<^sub>\\<beta> u'; z = Call t l u' \\<rbrakk>\n  \\<Longrightarrow> Q\"\n  \"\\<And>f f' T u'. \\<lbrakk> Obj f T = s; Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T;\n                  l \\<in> dom f'; u \\<Rightarrow>\\<^sub>\\<beta> u';\n                  z = (the (f' l)\\<^bsup>[Obj f' T, u']\\<^esup>) \\<rbrakk> \\<Longrightarrow> Q\"\n  shows Q", "lemma pbeta_induct[consumes 1, case_names Fvar Call Upd Upd' Obj beta Bnd]:\n  fixes \n  t :: sterm and t' :: sterm and \n  P1 :: \"sterm \\<Rightarrow> sterm \\<Rightarrow> bool\" and P2 :: \"sterm \\<Rightarrow> sterm \\<Rightarrow> bool\"\n  assumes\n  \"t \\<Rightarrow>\\<^sub>\\<beta> t'\" and\n  \"\\<And>x. P1 (Fvar x) (Fvar x)\" and\n  \"\\<And>t t' l u u'. \\<lbrakk> t \\<Rightarrow>\\<^sub>\\<beta> t'; P1 t t'; lc t; u \\<Rightarrow>\\<^sub>\\<beta> u'; P1 u u'; lc u \\<rbrakk> \n      \\<Longrightarrow> P1 (Call t l u) (Call t' l u')\" and\n  \"\\<And>t t' l u u'. \\<lbrakk> t \\<Rightarrow>\\<^sub>\\<beta> t'; P1 t t'; lc t; P2 u u'; body u \\<rbrakk>\n      \\<Longrightarrow> P1 (Upd t l u) (Upd t' l u')\" and\n  \"\\<And>f f' T t t' l. \\<lbrakk> Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T; P1 (Obj f T) (Obj f' T);\n                      P2 t t'; l \\<in> dom f; lc (Obj f T); body t \\<rbrakk>\n      \\<Longrightarrow> P1 (Upd (Obj f T) l t) (Obj (f'(l \\<mapsto> t')) T)\" and\n  \"\\<And>f f' T. \\<lbrakk> dom f' = dom f; \\<forall>l\\<in>dom f. body (the(f l)); \n               \\<forall>l\\<in>dom f. P2 (the(f l)) (the(f' l)) \\<rbrakk>\n      \\<Longrightarrow> P1 (Obj f T) (Obj f' T)\" and\n  \"\\<And>f f' T l p p'. \\<lbrakk> Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T; P1 (Obj f T) (Obj f' T); lc (Obj f T);\n                      l \\<in> dom f; p \\<Rightarrow>\\<^sub>\\<beta> p'; P1 p p'; lc p \\<rbrakk>\n      \\<Longrightarrow> P1 (Call (Obj f T) l p) (the(f' l)\\<^bsup>[Obj f' T, p']\\<^esup>)\" and\n  \"\\<And>L t t'. \n      \\<lbrakk> finite L; \n        \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n        \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \n                 \\<and> P1 (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) t'' \\<and> t' = \\<sigma>[s,p] t'') \\<rbrakk>\n      \\<Longrightarrow> P2 t t'\"\n  shows \"P1 t t'\"", "lemma par_beta_lc[simp]:\n  fixes t t'\n  assumes \"t \\<Rightarrow>\\<^sub>\\<beta> t'\"\n  shows \"lc t \\<and> lc t'\"", "lemma par_beta_preserves_FV[simp, rule_format]: \n  fixes t t' x\n  assumes \"t \\<Rightarrow>\\<^sub>\\<beta> t'\"\n  shows \"x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'\"", "lemma par_beta_body[simp]:\n  \"\\<lbrakk> finite L; \n     \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t'') \\<rbrakk>\n  \\<Longrightarrow> body t \\<and> body t'\"", "lemma Fvar_pbeta [simp]: \"(Fvar x \\<Rightarrow>\\<^sub>\\<beta> t) = (t = Fvar x)\"", "lemma Obj_pbeta: \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\n  \\<Longrightarrow> dom f' = dom f \n      \\<and> (\\<exists>L. finite L \n           \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n               \\<longrightarrow> (\\<exists>t. (the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                      \\<and> the(f' l) = \\<sigma>[s,p]t)))\n      \\<and> (\\<forall>l\\<in>dom f. body (the(f l)))\"", "lemma Obj_pbeta_subst: \n  \"\\<lbrakk> finite L; \n     \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t''. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t''); \n     Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T; lc (Obj f T); body t \\<rbrakk>\n  \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (f'(l \\<mapsto> t')) T\"", "lemma Upd_pbeta: \"Upd t l u \\<Rightarrow>\\<^sub>\\<beta> Upd t' l u'\n  \\<Longrightarrow> t \\<Rightarrow>\\<^sub>\\<beta> t' \n      \\<and> (\\<exists>L. finite L \n           \\<and> (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n               \\<longrightarrow> (\\<exists>t''. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> u' = \\<sigma>[s,p]t'')))\n      \\<and> lc t \\<and> body u\"", "lemma par_beta_refl: \n  fixes t\n  assumes \"lc t\"\n  shows \"t \\<Rightarrow>\\<^sub>\\<beta> t\"", "lemma par_beta_body_refl:\n  fixes u\n  assumes \"body u\"\n  shows \"\\<exists>L. finite L \\<and> (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                          \\<longrightarrow> (\\<exists>t'. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> u = \\<sigma>[s,p] t'))\"", "lemma par_beta_ssubst[rule_format]:\n  fixes t t'\n  assumes \"t \\<Rightarrow>\\<^sub>\\<beta> t'\"\n  shows \"\\<forall>x v v'. v \\<Rightarrow>\\<^sub>\\<beta> v' \\<longrightarrow> [x \\<rightarrow> v] t \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] t'\"", "lemma renaming_par_beta: \"t \\<Rightarrow>\\<^sub>\\<beta> t' \\<Longrightarrow> [s \\<rightarrow> Fvar sa] t \\<Rightarrow>\\<^sub>\\<beta> [s \\<rightarrow> Fvar sa] t'\"", "lemma par_beta_beta:\n  fixes l f f' u u'\n  assumes \n  \"l \\<in> dom f\" and \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\" and \"u \\<Rightarrow>\\<^sub>\\<beta> u'\" and \"lc (Obj f T)\" and \"lc u\"\n  shows \"(the(f l)\\<^bsup>[Obj f T, u]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> (the(f' l)\\<^bsup>[Obj f' T, u']\\<^esup>)\"", "lemma beta_subset_par_beta: \"beta \\<le> par_beta\"", "lemma par_beta_subset_beta: \"par_beta \\<le> beta^**\"", "lemma diamond_binder:\n  fixes L1 L2 t ta tb\n  assumes \n  \"finite L1\"  and\n  pred_L1: \"\\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p\n              \\<longrightarrow> (\\<exists>t'. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \n                     \\<and> (\\<forall>z. (t\\<^bsup>[Fvar s, Fvar  p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z) \\<longrightarrow> (\\<exists>u. t' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u))) \n                     \\<and> ta = \\<sigma>[s,p]t')\" and\n  \"finite L2\" and\n  pred_L2: \"\\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n              \\<longrightarrow> (\\<exists>t'. t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> tb = \\<sigma>[s,p]t')\"\n  shows\n  \"\\<exists>L'. finite L' \n      \\<and> (\\<exists>t''. (\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                  \\<longrightarrow> (\\<exists>u. ta\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> t'' = \\<sigma>[s,p]u))\n             \\<and> (\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                  \\<longrightarrow> (\\<exists>u. tb\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> t'' = \\<sigma>[s,p]u)))\"", "lemma exL_exMap_lem:\n  fixes \n  f :: \"Label -~> sterm\" and \n  lz :: \"Label -~> sterm\" and f' :: \"Label -~> sterm\"\n  assumes \"dom f = dom lz\" and \"dom f' = dom f\"\n  shows \n  \"\\<forall>L1 L2. finite L1 \n    \\<longrightarrow> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p \n                     \\<longrightarrow> (\\<exists>t. (the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                            \\<and> (\\<forall>z. (the(f l)\\<^bsup>[Fvar s, Fvar  p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z) \n                                \\<longrightarrow> (\\<exists>u. t \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)))\n                            \\<and> the(f' l) = \\<sigma>[s,p]t))\n    \\<longrightarrow> finite L2\n    \\<longrightarrow> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n          \\<longrightarrow> (\\<exists>t. the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \\<and> the(lz l) = \\<sigma>[s,p]t))\n    \\<longrightarrow> (\\<exists>L'. finite L' \n            \\<and> (\\<exists>lu. dom lu = dom f \n            \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                           \\<longrightarrow> (\\<exists>t. (the(f' l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                  \\<and> the(lu l) = \\<sigma>[s,p]t))\n            \\<and> (\\<forall>l\\<in>dom f. body (the (f' l)))\n            \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                           \\<longrightarrow> (\\<exists>t. (the(lz l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                  \\<and> the(lu l) = \\<sigma>[s,p]t))\n            \\<and> (\\<forall>l\\<in>dom f. body (the (lz l)))))\"", "lemma exL_exMap:\n  \"\\<lbrakk> dom (f::Label -~> sterm) = dom (lz::Label -~> sterm); \n     dom (f'::Label -~> sterm) = dom f; \n     finite L1;\n     \\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t. (the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n             \\<and> (\\<forall>z. (the(f l)\\<^bsup>[Fvar s, Fvar  p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z) \\<longrightarrow> (\\<exists>u. t \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)))\n             \\<and> the(f' l) = \\<sigma>[s,p]t);\n     finite L2;\n     \\<forall>l\\<in>dom lz. \\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t. the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \\<and> the(lz l) = \\<sigma>[s,p]t) \\<rbrakk>\n  \\<Longrightarrow> \\<exists>L'. finite L' \n         \\<and> (\\<exists>lu. dom lu = dom f \n               \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                              \\<longrightarrow> (\\<exists>t. (the(f' l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                     \\<and> the(lu l) = \\<sigma>[s,p]t))\n               \\<and> (\\<forall>l\\<in>dom f. body (the (f' l)))\n               \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                              \\<longrightarrow> (\\<exists>t. (the(lz l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                     \\<and> the(lu l) = \\<sigma>[s,p]t))\n               \\<and> (\\<forall>l\\<in>dom f. body (the (lz l))))\"", "lemma diamond_par_beta: \"diamond par_beta\"", "theorem beta_confluent: \"confluent beta\""], "translations": [["", "lemma Obj_par_red[consumes 1, case_names obj]: \n  \"\\<lbrakk> Obj f T \\<Rightarrow>\\<^sub>\\<beta> z; \n     \\<And>lz. \\<lbrakk> dom lz = dom f; z = Obj lz T\\<rbrakk> \\<Longrightarrow> Q \\<rbrakk> \\<Longrightarrow> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Obj f T => z;\n     \\<And>lz.\n        \\<lbrakk>dom lz = dom f; z = Obj lz T\\<rbrakk>\n        \\<Longrightarrow> Q\\<rbrakk>\n    \\<Longrightarrow> Q", "by (rule par_beta_cases(2), assumption, auto)"], ["", "lemma Upd_par_red[consumes 1, case_names upd obj]: \n  fixes t l u z\n  assumes \n  \"Upd t l u \\<Rightarrow>\\<^sub>\\<beta> z\" and\n  \"\\<And>t' u' L. \\<lbrakk> t \\<Rightarrow>\\<^sub>\\<beta> t'; finite L;\n                \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>t''. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \n                          \\<and> u' = \\<sigma>[s,p]t'');\n                z = Upd t' l u' \\<rbrakk> \\<Longrightarrow> Q\" and\n  \"\\<And>f f' T u' L. \\<lbrakk> l \\<in> dom f; Obj f T = t; Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T;\n                    finite L;\n                    \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                     \\<longrightarrow> (\\<exists>t''. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \n                              \\<and> u' = \\<sigma>[s,p]t'');\n                z = Obj (f'(l \\<mapsto> u')) T \\<rbrakk> \\<Longrightarrow> Q\"\n  shows Q"], ["proof (prove)\ngoal (1 subgoal):\n 1. Q", "using assms"], ["proof (prove)\nusing this:\n  Upd t l u => z\n  \\<lbrakk>t => ?t'; finite ?L;\n   \\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?u' = \\<sigma>[s,p] t'');\n   z = Upd ?t' l ?u'\\<rbrakk>\n  \\<Longrightarrow> Q\n  \\<lbrakk>l \\<in> dom ?f; Obj ?f ?T = t; Obj ?f ?T => Obj ?f' ?T;\n   finite ?L;\n   \\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?u' = \\<sigma>[s,p] t'');\n   z = Obj (?f'(l \\<mapsto> ?u')) ?T\\<rbrakk>\n  \\<Longrightarrow> Q\n\ngoal (1 subgoal):\n 1. Q", "proof (cases rule: par_beta.cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t' L u'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        z = Upd t' l u'; t => t'; lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Q\n 2. \\<And>f T f' L t'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        t = Obj f T; z = Obj (f'(l \\<mapsto> t')) T; Obj f T => Obj f' T;\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body u\\<rbrakk>\n       \\<Longrightarrow> Q", "case pbeta_Upd"], ["proof (state)\nthis:\n  z = Upd t'_ l u'_\n  t => t'_\n  lc t\n  finite L_\n  \\<forall>s p.\n     s \\<notin> L_ \\<and>\n     p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         u'_ = \\<sigma>[s,p] t'')\n  body u\n\ngoal (2 subgoals):\n 1. \\<And>t' L u'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        z = Upd t' l u'; t => t'; lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Q\n 2. \\<And>f T f' L t'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        t = Obj f T; z = Obj (f'(l \\<mapsto> t')) T; Obj f T => Obj f' T;\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body u\\<rbrakk>\n       \\<Longrightarrow> Q", "thus ?thesis"], ["proof (prove)\nusing this:\n  z = Upd t'_ l u'_\n  t => t'_\n  lc t\n  finite L_\n  \\<forall>s p.\n     s \\<notin> L_ \\<and>\n     p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         u'_ = \\<sigma>[s,p] t'')\n  body u\n\ngoal (1 subgoal):\n 1. Q", "using assms(2)"], ["proof (prove)\nusing this:\n  z = Upd t'_ l u'_\n  t => t'_\n  lc t\n  finite L_\n  \\<forall>s p.\n     s \\<notin> L_ \\<and>\n     p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         u'_ = \\<sigma>[s,p] t'')\n  body u\n  \\<lbrakk>t => ?t'; finite ?L;\n   \\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?u' = \\<sigma>[s,p] t'');\n   z = Upd ?t' l ?u'\\<rbrakk>\n  \\<Longrightarrow> Q\n\ngoal (1 subgoal):\n 1. Q", "by force"], ["proof (state)\nthis:\n  Q\n\ngoal (1 subgoal):\n 1. \\<And>f T f' L t'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        t = Obj f T; z = Obj (f'(l \\<mapsto> t')) T; Obj f T => Obj f' T;\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body u\\<rbrakk>\n       \\<Longrightarrow> Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f T f' L t'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        t = Obj f T; z = Obj (f'(l \\<mapsto> t')) T; Obj f T => Obj f' T;\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body u\\<rbrakk>\n       \\<Longrightarrow> Q", "case pbeta_Upd'"], ["proof (state)\nthis:\n  t = Obj f_ T_\n  z = Obj (f'_(l \\<mapsto> t'_)) T_\n  Obj f_ T_ => Obj f'_ T_\n  finite L_\n  \\<forall>s p.\n     s \\<notin> L_ \\<and>\n     p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t'_ = \\<sigma>[s,p] t'')\n  l \\<in> dom f_\n  lc (Obj f_ T_)\n  body u\n\ngoal (1 subgoal):\n 1. \\<And>f T f' L t'.\n       \\<lbrakk>\\<And>t' L u'.\n                   \\<lbrakk>t => t'; finite L;\n                    \\<forall>s p.\n                       s \\<notin> L \\<and>\n                       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           u' = \\<sigma>[s,p] t'');\n                    z = Upd t' l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' L u'.\n           \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T;\n            finite L;\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   u' = \\<sigma>[s,p] t'');\n            z = Obj (f'(l \\<mapsto> u')) T\\<rbrakk>\n           \\<Longrightarrow> Q;\n        t = Obj f T; z = Obj (f'(l \\<mapsto> t')) T; Obj f T => Obj f' T;\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body u\\<rbrakk>\n       \\<Longrightarrow> Q", "from this(1-2) this(5-6) assms(3)[OF _ _ this(3-4)]"], ["proof (chain)\npicking this:\n  t = Obj f_ T_\n  z = Obj (f'_(l \\<mapsto> t'_)) T_\n  \\<forall>s p.\n     s \\<notin> L_ \\<and>\n     p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t'_ = \\<sigma>[s,p] t'')\n  l \\<in> dom f_\n  \\<lbrakk>l \\<in> dom f_; Obj f_ T_ = t;\n   \\<forall>s p.\n      s \\<notin> L_ \\<and>\n      p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?u' = \\<sigma>[s,p] t'');\n   z = Obj (f'_(l \\<mapsto> ?u')) T_\\<rbrakk>\n  \\<Longrightarrow> Q", "show ?thesis"], ["proof (prove)\nusing this:\n  t = Obj f_ T_\n  z = Obj (f'_(l \\<mapsto> t'_)) T_\n  \\<forall>s p.\n     s \\<notin> L_ \\<and>\n     p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t'_ = \\<sigma>[s,p] t'')\n  l \\<in> dom f_\n  \\<lbrakk>l \\<in> dom f_; Obj f_ T_ = t;\n   \\<forall>s p.\n      s \\<notin> L_ \\<and>\n      p \\<notin> L_ \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?u' = \\<sigma>[s,p] t'');\n   z = Obj (f'_(l \\<mapsto> ?u')) T_\\<rbrakk>\n  \\<Longrightarrow> Q\n\ngoal (1 subgoal):\n 1. Q", "by force"], ["proof (state)\nthis:\n  Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Call_par_red[consumes 1, case_names call beta]: \n  fixes s l u z\n  assumes \n  \"Call s l u \\<Rightarrow>\\<^sub>\\<beta> z\" and\n  \"\\<And>t u'. \\<lbrakk> s \\<Rightarrow>\\<^sub>\\<beta> t; u \\<Rightarrow>\\<^sub>\\<beta> u'; z = Call t l u' \\<rbrakk>\n  \\<Longrightarrow> Q\"\n  \"\\<And>f f' T u'. \\<lbrakk> Obj f T = s; Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T;\n                  l \\<in> dom f'; u \\<Rightarrow>\\<^sub>\\<beta> u';\n                  z = (the (f' l)\\<^bsup>[Obj f' T, u']\\<^esup>) \\<rbrakk> \\<Longrightarrow> Q\"\n  shows Q"], ["proof (prove)\ngoal (1 subgoal):\n 1. Q", "using assms"], ["proof (prove)\nusing this:\n  Call s l u => z\n  \\<lbrakk>s => ?t; u => ?u'; z = Call ?t l ?u'\\<rbrakk> \\<Longrightarrow> Q\n  \\<lbrakk>Obj ?f ?T = s; Obj ?f ?T => Obj ?f' ?T; l \\<in> dom ?f';\n   u => ?u'; z = (the (?f' l)\\<^bsup>[Obj ?f' ?T,?u']\\<^esup>)\\<rbrakk>\n  \\<Longrightarrow> Q\n\ngoal (1 subgoal):\n 1. Q", "proof (cases rule: par_beta.cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t' u'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        z = Call t' l u'; s => t'; u => u'; lc s; lc u\\<rbrakk>\n       \\<Longrightarrow> Q\n 2. \\<And>f T f' p'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        s = Obj f T; z = (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>);\n        Obj f T => Obj f' T; l \\<in> dom f; u => p'; lc (Obj f T);\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Q", "case pbeta_Call"], ["proof (state)\nthis:\n  z = Call t'_ l u'_\n  s => t'_\n  u => u'_\n  lc s\n  lc u\n\ngoal (2 subgoals):\n 1. \\<And>t' u'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        z = Call t' l u'; s => t'; u => u'; lc s; lc u\\<rbrakk>\n       \\<Longrightarrow> Q\n 2. \\<And>f T f' p'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        s = Obj f T; z = (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>);\n        Obj f T => Obj f' T; l \\<in> dom f; u => p'; lc (Obj f T);\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Q", "thus ?thesis"], ["proof (prove)\nusing this:\n  z = Call t'_ l u'_\n  s => t'_\n  u => u'_\n  lc s\n  lc u\n\ngoal (1 subgoal):\n 1. Q", "using assms(2)"], ["proof (prove)\nusing this:\n  z = Call t'_ l u'_\n  s => t'_\n  u => u'_\n  lc s\n  lc u\n  \\<lbrakk>s => ?t; u => ?u'; z = Call ?t l ?u'\\<rbrakk> \\<Longrightarrow> Q\n\ngoal (1 subgoal):\n 1. Q", "by force"], ["proof (state)\nthis:\n  Q\n\ngoal (1 subgoal):\n 1. \\<And>f T f' p'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        s = Obj f T; z = (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>);\n        Obj f T => Obj f' T; l \\<in> dom f; u => p'; lc (Obj f T);\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f T f' p'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        s = Obj f T; z = (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>);\n        Obj f T => Obj f' T; l \\<in> dom f; u => p'; lc (Obj f T);\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Q", "case pbeta_beta"], ["proof (state)\nthis:\n  s = Obj f_ T_\n  z = (the (f'_ l)\\<^bsup>[Obj f'_ T_,p'_]\\<^esup>)\n  Obj f_ T_ => Obj f'_ T_\n  l \\<in> dom f_\n  u => p'_\n  lc (Obj f_ T_)\n  lc u\n\ngoal (1 subgoal):\n 1. \\<And>f T f' p'.\n       \\<lbrakk>\\<And>t u'.\n                   \\<lbrakk>s => t; u => u'; z = Call t l u'\\<rbrakk>\n                   \\<Longrightarrow> Q;\n        \\<And>f T f' u'.\n           \\<lbrakk>Obj f T = s; Obj f T => Obj f' T; l \\<in> dom f';\n            u => u'; z = (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\\<rbrakk>\n           \\<Longrightarrow> Q;\n        s = Obj f T; z = (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>);\n        Obj f T => Obj f' T; l \\<in> dom f; u => p'; lc (Obj f T);\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Q", "from this(1-5) assms(3)[OF _ this(3)]"], ["proof (chain)\npicking this:\n  s = Obj f_ T_\n  z = (the (f'_ l)\\<^bsup>[Obj f'_ T_,p'_]\\<^esup>)\n  Obj f_ T_ => Obj f'_ T_\n  l \\<in> dom f_\n  u => p'_\n  \\<lbrakk>Obj f_ T_ = s; l \\<in> dom f'_; u => ?u';\n   z = (the (f'_ l)\\<^bsup>[Obj f'_ T_,?u']\\<^esup>)\\<rbrakk>\n  \\<Longrightarrow> Q", "show ?thesis"], ["proof (prove)\nusing this:\n  s = Obj f_ T_\n  z = (the (f'_ l)\\<^bsup>[Obj f'_ T_,p'_]\\<^esup>)\n  Obj f_ T_ => Obj f'_ T_\n  l \\<in> dom f_\n  u => p'_\n  \\<lbrakk>Obj f_ T_ = s; l \\<in> dom f'_; u => ?u';\n   z = (the (f'_ l)\\<^bsup>[Obj f'_ T_,?u']\\<^esup>)\\<rbrakk>\n  \\<Longrightarrow> Q\n\ngoal (1 subgoal):\n 1. Q", "by force"], ["proof (state)\nthis:\n  Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma pbeta_induct[consumes 1, case_names Fvar Call Upd Upd' Obj beta Bnd]:\n  fixes \n  t :: sterm and t' :: sterm and \n  P1 :: \"sterm \\<Rightarrow> sterm \\<Rightarrow> bool\" and P2 :: \"sterm \\<Rightarrow> sterm \\<Rightarrow> bool\"\n  assumes\n  \"t \\<Rightarrow>\\<^sub>\\<beta> t'\" and\n  \"\\<And>x. P1 (Fvar x) (Fvar x)\" and\n  \"\\<And>t t' l u u'. \\<lbrakk> t \\<Rightarrow>\\<^sub>\\<beta> t'; P1 t t'; lc t; u \\<Rightarrow>\\<^sub>\\<beta> u'; P1 u u'; lc u \\<rbrakk> \n      \\<Longrightarrow> P1 (Call t l u) (Call t' l u')\" and\n  \"\\<And>t t' l u u'. \\<lbrakk> t \\<Rightarrow>\\<^sub>\\<beta> t'; P1 t t'; lc t; P2 u u'; body u \\<rbrakk>\n      \\<Longrightarrow> P1 (Upd t l u) (Upd t' l u')\" and\n  \"\\<And>f f' T t t' l. \\<lbrakk> Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T; P1 (Obj f T) (Obj f' T);\n                      P2 t t'; l \\<in> dom f; lc (Obj f T); body t \\<rbrakk>\n      \\<Longrightarrow> P1 (Upd (Obj f T) l t) (Obj (f'(l \\<mapsto> t')) T)\" and\n  \"\\<And>f f' T. \\<lbrakk> dom f' = dom f; \\<forall>l\\<in>dom f. body (the(f l)); \n               \\<forall>l\\<in>dom f. P2 (the(f l)) (the(f' l)) \\<rbrakk>\n      \\<Longrightarrow> P1 (Obj f T) (Obj f' T)\" and\n  \"\\<And>f f' T l p p'. \\<lbrakk> Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T; P1 (Obj f T) (Obj f' T); lc (Obj f T);\n                      l \\<in> dom f; p \\<Rightarrow>\\<^sub>\\<beta> p'; P1 p p'; lc p \\<rbrakk>\n      \\<Longrightarrow> P1 (Call (Obj f T) l p) (the(f' l)\\<^bsup>[Obj f' T, p']\\<^esup>)\" and\n  \"\\<And>L t t'. \n      \\<lbrakk> finite L; \n        \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n        \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \n                 \\<and> P1 (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) t'' \\<and> t' = \\<sigma>[s,p] t'') \\<rbrakk>\n      \\<Longrightarrow> P2 t t'\"\n  shows \"P1 t t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P1 t t'", "by (induct rule: par_beta.induct[OF assms(1)], auto simp: assms)"], ["", "subsection \\<open>Preservation\\<close>"], ["", "lemma par_beta_lc[simp]:\n  fixes t t'\n  assumes \"t \\<Rightarrow>\\<^sub>\\<beta> t'\"\n  shows \"lc t \\<and> lc t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lc t \\<and> lc t'", "using assms"], ["proof (prove)\nusing this:\n  t => t'\n\ngoal (1 subgoal):\n 1. lc t \\<and> lc t'", "proof \n  (induct\n    taking: \"\\<lambda>t t'. body t'\"\n    rule: pbeta_induct)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x. lc (Fvar x) \\<and> lc (Fvar x)\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; u => u';\n        lc u \\<and> lc u'; lc u\\<rbrakk>\n       \\<Longrightarrow> lc (Call t l u) \\<and> lc (Call t' l u')\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case Fvar"], ["proof (state)\nthis:\n  \n\ngoal (7 subgoals):\n 1. \\<And>x. lc (Fvar x) \\<and> lc (Fvar x)\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; u => u';\n        lc u \\<and> lc u'; lc u\\<rbrakk>\n       \\<Longrightarrow> lc (Call t l u) \\<and> lc (Call t' l u')\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. lc (Fvar x_) \\<and> lc (Fvar x_)", "by simp"], ["proof (state)\nthis:\n  lc (Fvar x_) \\<and> lc (Fvar x_)\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; u => u';\n        lc u \\<and> lc u'; lc u\\<rbrakk>\n       \\<Longrightarrow> lc (Call t l u) \\<and> lc (Call t' l u')\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; u => u';\n        lc u \\<and> lc u'; lc u\\<rbrakk>\n       \\<Longrightarrow> lc (Call t l u) \\<and> lc (Call t' l u')\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case Call"], ["proof (state)\nthis:\n  t_ => t'_\n  lc t_ \\<and> lc t'_\n  lc t_\n  u_ => u'_\n  lc u_ \\<and> lc u'_\n  lc u_\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; u => u';\n        lc u \\<and> lc u'; lc u\\<rbrakk>\n       \\<Longrightarrow> lc (Call t l u) \\<and> lc (Call t' l u')\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "thus ?case"], ["proof (prove)\nusing this:\n  t_ => t'_\n  lc t_ \\<and> lc t'_\n  lc t_\n  u_ => u'_\n  lc u_ \\<and> lc u'_\n  lc u_\n\ngoal (1 subgoal):\n 1. lc (Call t_ l_ u_) \\<and> lc (Call t'_ l_ u'_)", "by simp"], ["proof (state)\nthis:\n  lc (Call t_ l_ u_) \\<and> lc (Call t'_ l_ u'_)\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case Upd"], ["proof (state)\nthis:\n  t_ => t'_\n  lc t_ \\<and> lc t'_\n  lc t_\n  body u'_\n  body u_\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; lc t \\<and> lc t'; lc t; body u'; body u\\<rbrakk>\n       \\<Longrightarrow> lc (Upd t l u) \\<and> lc (Upd t' l u')\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "thus ?case"], ["proof (prove)\nusing this:\n  t_ => t'_\n  lc t_ \\<and> lc t'_\n  lc t_\n  body u'_\n  body u_\n\ngoal (1 subgoal):\n 1. lc (Upd t_ l_ u_) \\<and> lc (Upd t'_ l_ u'_)", "by (simp add: lc_upd)"], ["proof (state)\nthis:\n  lc (Upd t_ l_ u_) \\<and> lc (Upd t'_ l_ u'_)\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case Upd'"], ["proof (state)\nthis:\n  Obj f_ T_ => Obj f'_ T_\n  lc (Obj f_ T_) \\<and> lc (Obj f'_ T_)\n  body t'_\n  l_ \\<in> dom f_\n  lc (Obj f_ T_)\n  body t_\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        body t'; l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> lc (Upd (Obj f T) l t) \\<and>\n                         lc (Obj (f'(l \\<mapsto> t')) T)\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "thus ?case"], ["proof (prove)\nusing this:\n  Obj f_ T_ => Obj f'_ T_\n  lc (Obj f_ T_) \\<and> lc (Obj f'_ T_)\n  body t'_\n  l_ \\<in> dom f_\n  lc (Obj f_ T_)\n  body t_\n\ngoal (1 subgoal):\n 1. lc (Upd (Obj f_ T_) l_ t_) \\<and> lc (Obj (f'_(l_ \\<mapsto> t'_)) T_)", "by (simp add: lc_upd lc_obj)"], ["proof (state)\nthis:\n  lc (Upd (Obj f_ T_) l_ t_) \\<and> lc (Obj (f'_(l_ \\<mapsto> t'_)) T_)\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case Obj"], ["proof (state)\nthis:\n  dom f'_ = dom f_\n  \\<forall>l\\<in>dom f_. body (the (f_ l))\n  \\<forall>l\\<in>dom f_. body (the (f'_ l))\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f. body (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> lc (Obj f T) \\<and> lc (Obj f' T)\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "thus ?case"], ["proof (prove)\nusing this:\n  dom f'_ = dom f_\n  \\<forall>l\\<in>dom f_. body (the (f_ l))\n  \\<forall>l\\<in>dom f_. body (the (f'_ l))\n\ngoal (1 subgoal):\n 1. lc (Obj f_ T_) \\<and> lc (Obj f'_ T_)", "by (simp add: lc_obj)"], ["proof (state)\nthis:\n  lc (Obj f_ T_) \\<and> lc (Obj f'_ T_)\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case (beta f f' T l p p')"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  lc (Obj f T) \\<and> lc (Obj f' T)\n  lc (Obj f T)\n  l \\<in> dom f\n  p => p'\n  lc p \\<and> lc p'\n  lc p\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; lc (Obj f T) \\<and> lc (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p'; lc p \\<and> lc p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> lc (Call (Obj f T) l p) \\<and>\n                         lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "thus ?case"], ["proof (prove)\nusing this:\n  Obj f T => Obj f' T\n  lc (Obj f T) \\<and> lc (Obj f' T)\n  lc (Obj f T)\n  l \\<in> dom f\n  p => p'\n  lc p \\<and> lc p'\n  lc p\n\ngoal (1 subgoal):\n 1. lc (Call (Obj f T) l p) \\<and>\n    lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "by (clarify, simp add: lc_obj body_lc[of \"the(f' l)\" \"Obj f' T\" p'])"], ["proof (state)\nthis:\n  lc (Call (Obj f T) l p) \\<and>\n  lc (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "case (Bnd L t t')"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "note cof = this(2)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "from exFresh_s_p_cof[OF \\<open>finite L\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p", "obtain s p where sp: \"s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\""], ["proof (prove)\nusing this:\n  \\<exists>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "with cof"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p", "obtain t'' where \"lc t''\" and \"t' = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>lc t''; t' = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  lc t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t'", "with lc_body[of t'' s p] sp"], ["proof (chain)\npicking this:\n  \\<lbrakk>lc t''; s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> body \\<sigma>[s,p] t''\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n  lc t''\n  t' = \\<sigma>[s,p] t''", "show \"body t'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>lc t''; s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> body \\<sigma>[s,p] t''\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n  lc t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. body t'", "by force"], ["proof (state)\nthis:\n  body t'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma par_beta_preserves_FV[simp, rule_format]: \n  fixes t t' x\n  assumes \"t \\<Rightarrow>\\<^sub>\\<beta> t'\"\n  shows \"x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "using assms"], ["proof (prove)\nusing this:\n  t => t'\n\ngoal (1 subgoal):\n 1. x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "proof \n  (induct\n    taking: \"\\<lambda>t t'. x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'\"\n    rule: pbeta_induct)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>xa.\n       x \\<notin> FV (Fvar xa) \\<longrightarrow> x \\<notin> FV (Fvar xa)\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; u => u'; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call t l u) \\<longrightarrow>\n                         x \\<notin> FV (Call t' l u')\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case Fvar"], ["proof (state)\nthis:\n  \n\ngoal (7 subgoals):\n 1. \\<And>xa.\n       x \\<notin> FV (Fvar xa) \\<longrightarrow> x \\<notin> FV (Fvar xa)\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; u => u'; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call t l u) \\<longrightarrow>\n                         x \\<notin> FV (Call t' l u')\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> FV (Fvar x_) \\<longrightarrow> x \\<notin> FV (Fvar x_)", "by simp"], ["proof (state)\nthis:\n  x \\<notin> FV (Fvar x_) \\<longrightarrow> x \\<notin> FV (Fvar x_)\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; u => u'; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call t l u) \\<longrightarrow>\n                         x \\<notin> FV (Call t' l u')\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; u => u'; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call t l u) \\<longrightarrow>\n                         x \\<notin> FV (Call t' l u')\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case Call"], ["proof (state)\nthis:\n  t_ => t'_\n  x \\<notin> FV t_ \\<longrightarrow> x \\<notin> FV t'_\n  lc t_\n  u_ => u'_\n  x \\<notin> FV u_ \\<longrightarrow> x \\<notin> FV u'_\n  lc u_\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; u => u'; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call t l u) \\<longrightarrow>\n                         x \\<notin> FV (Call t' l u')\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "thus ?case"], ["proof (prove)\nusing this:\n  t_ => t'_\n  x \\<notin> FV t_ \\<longrightarrow> x \\<notin> FV t'_\n  lc t_\n  u_ => u'_\n  x \\<notin> FV u_ \\<longrightarrow> x \\<notin> FV u'_\n  lc u_\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Call t_ l_ u_) \\<longrightarrow>\n    x \\<notin> FV (Call t'_ l_ u'_)", "by simp"], ["proof (state)\nthis:\n  x \\<notin> FV (Call t_ l_ u_) \\<longrightarrow>\n  x \\<notin> FV (Call t'_ l_ u'_)\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case Upd"], ["proof (state)\nthis:\n  t_ => t'_\n  x \\<notin> FV t_ \\<longrightarrow> x \\<notin> FV t'_\n  lc t_\n  x \\<notin> FV u_ \\<longrightarrow> x \\<notin> FV u'_\n  body u_\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t';\n        lc t; x \\<notin> FV u \\<longrightarrow> x \\<notin> FV u';\n        body u\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd t l u) \\<longrightarrow>\n                         x \\<notin> FV (Upd t' l u')\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "thus ?case"], ["proof (prove)\nusing this:\n  t_ => t'_\n  x \\<notin> FV t_ \\<longrightarrow> x \\<notin> FV t'_\n  lc t_\n  x \\<notin> FV u_ \\<longrightarrow> x \\<notin> FV u'_\n  body u_\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Upd t_ l_ u_) \\<longrightarrow>\n    x \\<notin> FV (Upd t'_ l_ u'_)", "by simp"], ["proof (state)\nthis:\n  x \\<notin> FV (Upd t_ l_ u_) \\<longrightarrow>\n  x \\<notin> FV (Upd t'_ l_ u'_)\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case Upd'"], ["proof (state)\nthis:\n  Obj f_ T_ => Obj f'_ T_\n  x \\<notin> FV (Obj f_ T_) \\<longrightarrow> x \\<notin> FV (Obj f'_ T_)\n  x \\<notin> FV t_ \\<longrightarrow> x \\<notin> FV t'_\n  l_ \\<in> dom f_\n  lc (Obj f_ T_)\n  body t_\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'; l \\<in> dom f;\n        lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Upd (Obj f T) l t) \\<longrightarrow>\n                         x \\<notin> FV (Obj (f'(l \\<mapsto> t')) T)\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "thus ?case"], ["proof (prove)\nusing this:\n  Obj f_ T_ => Obj f'_ T_\n  x \\<notin> FV (Obj f_ T_) \\<longrightarrow> x \\<notin> FV (Obj f'_ T_)\n  x \\<notin> FV t_ \\<longrightarrow> x \\<notin> FV t'_\n  l_ \\<in> dom f_\n  lc (Obj f_ T_)\n  body t_\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Upd (Obj f_ T_) l_ t_) \\<longrightarrow>\n    x \\<notin> FV (Obj (f'_(l_ \\<mapsto> t'_)) T_)", "by simp"], ["proof (state)\nthis:\n  x \\<notin> FV (Upd (Obj f_ T_) l_ t_) \\<longrightarrow>\n  x \\<notin> FV (Obj (f'_(l_ \\<mapsto> t'_)) T_)\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case Obj"], ["proof (state)\nthis:\n  dom f'_ = dom f_\n  \\<forall>l\\<in>dom f_. body (the (f_ l))\n  \\<forall>l\\<in>dom f_.\n     x \\<notin> FV (the (f_ l)) \\<longrightarrow>\n     x \\<notin> FV (the (f'_ l))\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           x \\<notin> FV (the (f l)) \\<longrightarrow>\n           x \\<notin> FV (the (f' l))\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Obj f T) \\<longrightarrow>\n                         x \\<notin> FV (Obj f' T)\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "thus ?case"], ["proof (prove)\nusing this:\n  dom f'_ = dom f_\n  \\<forall>l\\<in>dom f_. body (the (f_ l))\n  \\<forall>l\\<in>dom f_.\n     x \\<notin> FV (the (f_ l)) \\<longrightarrow>\n     x \\<notin> FV (the (f'_ l))\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Obj f_ T_) \\<longrightarrow> x \\<notin> FV (Obj f'_ T_)", "by (simp add: FV_option_lem)"], ["proof (state)\nthis:\n  x \\<notin> FV (Obj f_ T_) \\<longrightarrow> x \\<notin> FV (Obj f'_ T_)\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case (beta f f' T l p p')"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T)\n  lc (Obj f T)\n  l \\<in> dom f\n  p => p'\n  x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'\n  lc p\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n        lc (Obj f T); l \\<in> dom f; p => p';\n        x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV (Call (Obj f T) l\n   p) \\<longrightarrow>\n                         x \\<notin> FV (the\n   (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "thus ?case"], ["proof (prove)\nusing this:\n  Obj f T => Obj f' T\n  x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T)\n  lc (Obj f T)\n  l \\<in> dom f\n  p => p'\n  x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'\n  lc p\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Call (Obj f T) l p) \\<longrightarrow>\n    x \\<notin> FV (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Obj f T => Obj f' T;\n     x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n     lc (Obj f T); l \\<in> dom f; p => p';\n     x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p;\n     x \\<notin> FV (Call (Obj f T) l p)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> FV (the\n(f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "assume \"x \\<notin> FV (Call (Obj f T) l p)\""], ["proof (state)\nthis:\n  x \\<notin> FV (Call (Obj f T) l p)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Obj f T => Obj f' T;\n     x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n     lc (Obj f T); l \\<in> dom f; p => p';\n     x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p;\n     x \\<notin> FV (Call (Obj f T) l p)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> FV (the\n(f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "with\n      \\<open>x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T)\\<close>\n      \\<open>x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'\\<close>"], ["proof (chain)\npicking this:\n  x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T)\n  x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'\n  x \\<notin> FV (Call (Obj f T) l p)", "have obj': \"x \\<notin> FV (Obj f' T)\" and p': \"x \\<notin> FV p'\""], ["proof (prove)\nusing this:\n  x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T)\n  x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'\n  x \\<notin> FV (Call (Obj f T) l p)\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Obj f' T) &&& x \\<notin> FV p'", "by auto"], ["proof (state)\nthis:\n  x \\<notin> FV (Obj f' T)\n  x \\<notin> FV p'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Obj f T => Obj f' T;\n     x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n     lc (Obj f T); l \\<in> dom f; p => p';\n     x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p;\n     x \\<notin> FV (Call (Obj f T) l p)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> FV (the\n(f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "from \\<open>l \\<in> dom f\\<close> \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>"], ["proof (chain)\npicking this:\n  l \\<in> dom f\n  Obj f T => Obj f' T", "have \"l \\<in> dom f'\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  Obj f T => Obj f' T\n\ngoal (1 subgoal):\n 1. l \\<in> dom f'", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Obj f T => Obj f' T;\n     x \\<notin> FV (Obj f T) \\<longrightarrow> x \\<notin> FV (Obj f' T);\n     lc (Obj f T); l \\<in> dom f; p => p';\n     x \\<notin> FV p \\<longrightarrow> x \\<notin> FV p'; lc p;\n     x \\<notin> FV (Call (Obj f T) l p)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> FV (the\n(f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "with \n      obj' p' FV_option_lem[of f']\n      contra_subsetD[OF sopen_FV[of 0 \"Obj f' T\" p' \"the(f' l)\"]]"], ["proof (chain)\npicking this:\n  x \\<notin> FV (Obj f' T)\n  x \\<notin> FV p'\n  \\<forall>l\\<in>dom f'. FV (the (f' l)) = FVoption (f' l)\n  ?c \\<notin> FV (the (f' l)) \\<union> FV (Obj f' T) \\<union>\n              FV p' \\<Longrightarrow>\n  ?c \\<notin> FV ({0 \\<rightarrow> [Obj f' T,p']} the (f' l))\n  l \\<in> dom f'", "show \"x \\<notin> FV (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\""], ["proof (prove)\nusing this:\n  x \\<notin> FV (Obj f' T)\n  x \\<notin> FV p'\n  \\<forall>l\\<in>dom f'. FV (the (f' l)) = FVoption (f' l)\n  ?c \\<notin> FV (the (f' l)) \\<union> FV (Obj f' T) \\<union>\n              FV p' \\<Longrightarrow>\n  ?c \\<notin> FV ({0 \\<rightarrow> [Obj f' T,p']} the (f' l))\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "by (auto simp: openz_def)"], ["proof (state)\nthis:\n  x \\<notin> FV (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<notin> FV (Call (Obj f T) l p) \\<longrightarrow>\n  x \\<notin> FV (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "case (Bnd L t t')"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n          x \\<notin> FV t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "note cof = this(2)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n          x \\<notin> FV t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "from \\<open>finite L\\<close> exFresh_s_p_cof[of \"L \\<union> {x}\"]"], ["proof (chain)\npicking this:\n  finite L\n  finite (L \\<union> {x}) \\<Longrightarrow>\n  \\<exists>s p.\n     s \\<notin> L \\<union> {x} \\<and>\n     p \\<notin> L \\<union> {x} \\<and> s \\<noteq> p", "obtain s p where \n    \"s \\<notin> L\"and \"p \\<notin> L\" and \"s \\<noteq> p\" and \n    \"x \\<notin> FV (Fvar s)\" and \"x \\<notin> FV (Fvar p)\""], ["proof (prove)\nusing this:\n  finite L\n  finite (L \\<union> {x}) \\<Longrightarrow>\n  \\<exists>s p.\n     s \\<notin> L \\<union> {x} \\<and>\n     p \\<notin> L \\<union> {x} \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        \\<lbrakk>s \\<notin> L; p \\<notin> L; s \\<noteq> p;\n         x \\<notin> FV (Fvar s); x \\<notin> FV (Fvar p)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  x \\<notin> FV (Fvar s)\n  x \\<notin> FV (Fvar p)\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "with cof"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n          x \\<notin> FV t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  x \\<notin> FV (Fvar s)\n  x \\<notin> FV (Fvar p)", "obtain t'' where\n    tt'': \"x \\<notin> FV (t\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<longrightarrow> x \\<notin> FV t''\" and\n    \"t' = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n          x \\<notin> FV t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  x \\<notin> FV (Fvar s)\n  x \\<notin> FV (Fvar p)\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>x \\<notin> FV (t\\<^bsup>[Fvar\n     s,Fvar p]\\<^esup>) \\<longrightarrow>\n                 x \\<notin> FV t'';\n         t' = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n  x \\<notin> FV t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (x \\<notin> FV (t\\<^bsup>[Fvar\n    s,Fvar p]\\<^esup>) \\<longrightarrow>\n                x \\<notin> FV t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> FV t \\<Longrightarrow> x \\<notin> FV t'", "assume \"x \\<notin> FV t\""], ["proof (state)\nthis:\n  x \\<notin> FV t\n\ngoal (1 subgoal):\n 1. x \\<notin> FV t \\<Longrightarrow> x \\<notin> FV t'", "with \n      tt'' \\<open>x \\<notin> FV (Fvar s)\\<close> \\<open>x \\<notin> FV (Fvar p)\\<close>\n      contra_subsetD[OF sopen_FV[of 0 \"Fvar s\" \"Fvar p\" t]]\n      sclose_subset_FV[of 0 s p t''] \\<open>t' = \\<sigma>[s,p] t''\\<close>"], ["proof (chain)\npicking this:\n  x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n  x \\<notin> FV t''\n  x \\<notin> FV (Fvar s)\n  x \\<notin> FV (Fvar p)\n  ?c \\<notin> FV t \\<union> FV (Fvar s) \\<union>\n              FV (Fvar p) \\<Longrightarrow>\n  ?c \\<notin> FV ({0 \\<rightarrow> [Fvar s,Fvar p]} t)\n  FV ({0 \\<leftarrow> [s,p]} t'') \\<subseteq> FV t''\n  t' = \\<sigma>[s,p] t''\n  x \\<notin> FV t", "show \"x \\<notin> FV t'\""], ["proof (prove)\nusing this:\n  x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<longrightarrow>\n  x \\<notin> FV t''\n  x \\<notin> FV (Fvar s)\n  x \\<notin> FV (Fvar p)\n  ?c \\<notin> FV t \\<union> FV (Fvar s) \\<union>\n              FV (Fvar p) \\<Longrightarrow>\n  ?c \\<notin> FV ({0 \\<rightarrow> [Fvar s,Fvar p]} t)\n  FV ({0 \\<leftarrow> [s,p]} t'') \\<subseteq> FV t''\n  t' = \\<sigma>[s,p] t''\n  x \\<notin> FV t\n\ngoal (1 subgoal):\n 1. x \\<notin> FV t'", "by (auto simp: openz_def closez_def)"], ["proof (state)\nthis:\n  x \\<notin> FV t'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<notin> FV t \\<longrightarrow> x \\<notin> FV t'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma par_beta_body[simp]:\n  \"\\<lbrakk> finite L; \n     \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t'') \\<rbrakk>\n  \\<Longrightarrow> body t \\<and> body t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t \\<and> body t'", "proof (intro conjI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "fix L :: \"fVariable set\" and t :: sterm and t' :: sterm"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "assume \"finite L\""], ["proof (state)\nthis:\n  finite L\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "hence \"finite (L \\<union> FV t)\""], ["proof (prove)\nusing this:\n  finite L\n\ngoal (1 subgoal):\n 1. finite (L \\<union> FV t)", "by simp"], ["proof (state)\nthis:\n  finite (L \\<union> FV t)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "from exFresh_s_p_cof[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>s p.\n     s \\<notin> L \\<union> FV t \\<and>\n     p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p", "obtain s p where sp: \"s \\<notin> L \\<union> FV t \\<and> p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\""], ["proof (prove)\nusing this:\n  \\<exists>s p.\n     s \\<notin> L \\<union> FV t \\<and>\n     p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        s \\<notin> L \\<union> FV t \\<and>\n        p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> L \\<union> FV t \\<and>\n  p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "hence \"s \\<notin> FV t\" and \"p \\<notin> FV t\" and \"s \\<noteq> p\""], ["proof (prove)\nusing this:\n  s \\<notin> L \\<union> FV t \\<and>\n  p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. s \\<notin> FV t &&& p \\<notin> FV t &&& s \\<noteq> p", "by auto"], ["proof (state)\nthis:\n  s \\<notin> FV t\n  p \\<notin> FV t\n  s \\<noteq> p\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "assume \n    \"\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n      \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and> t' = \\<sigma>[s,p] t'')\""], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "with sp"], ["proof (chain)\npicking this:\n  s \\<notin> L \\<union> FV t \\<and>\n  p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')", "obtain t'' where \"t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\" and \"t' = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  s \\<notin> L \\<union> FV t \\<and>\n  p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'';\n         t' = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "from par_beta_lc[OF this(1)]"], ["proof (chain)\npicking this:\n  lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t''", "have \"lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\" and \"lc t''\""], ["proof (prove)\nusing this:\n  lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t''\n\ngoal (1 subgoal):\n 1. lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) &&& lc t''", "by auto"], ["proof (state)\nthis:\n  lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  lc t''\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t\n 2. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "from \n    lc_body[OF this(1) \\<open>s \\<noteq> p\\<close>] \n    sclose_sopen_eq_t[OF \\<open>s \\<notin> FV t\\<close> \\<open>p \\<notin> FV t\\<close> \\<open>s \\<noteq> p\\<close>]"], ["proof (chain)\npicking this:\n  body \\<sigma>[s,p] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} t = t", "show \"body t\""], ["proof (prove)\nusing this:\n  body \\<sigma>[s,p] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} t = t\n\ngoal (1 subgoal):\n 1. body t", "by (simp add: closez_def openz_def)"], ["proof (state)\nthis:\n  body t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'')\\<rbrakk>\n    \\<Longrightarrow> body t'", "from lc_body[OF \\<open>lc t''\\<close> \\<open>s \\<noteq> p\\<close>] \\<open>t' = \\<sigma>[s,p] t''\\<close>"], ["proof (chain)\npicking this:\n  body \\<sigma>[s,p] t''\n  t' = \\<sigma>[s,p] t''", "show \"body t'\""], ["proof (prove)\nusing this:\n  body \\<sigma>[s,p] t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. body t'", "by simp"], ["proof (state)\nthis:\n  body t'\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Miscellaneous properties of par\\_beta\\<close>"], ["", "lemma Fvar_pbeta [simp]: \"(Fvar x \\<Rightarrow>\\<^sub>\\<beta> t) = (t = Fvar x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Fvar x => t) = (t = Fvar x)", "by auto"], ["", "lemma Obj_pbeta: \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\n  \\<Longrightarrow> dom f' = dom f \n      \\<and> (\\<exists>L. finite L \n           \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n               \\<longrightarrow> (\\<exists>t. (the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                      \\<and> the(f' l) = \\<sigma>[s,p]t)))\n      \\<and> (\\<forall>l\\<in>dom f. body (the(f l)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Obj f T => Obj f' T \\<Longrightarrow>\n    dom f' = dom f \\<and>\n    (\\<exists>L.\n        finite L \\<and>\n        (\\<forall>l\\<in>dom f.\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t.\n                   the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   the (f' l) = \\<sigma>[s,p] t))) \\<and>\n    (\\<forall>l\\<in>dom f. body (the (f l)))", "by (rule par_beta_cases(2), assumption, auto)"], ["", "lemma Obj_pbeta_subst: \n  \"\\<lbrakk> finite L; \n     \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t''. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t''); \n     Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T; lc (Obj f T); body t \\<rbrakk>\n  \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (f'(l \\<mapsto> t')) T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "fix L f f' T l t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "assume \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\""], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "from Obj_pbeta[OF this]"], ["proof (chain)\npicking this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))", "have \n    dom: \"dom (f'(l \\<mapsto> t')) = dom (f(l \\<mapsto> t))\" and \n    exL: \"\\<exists>L. finite L \n            \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                           \\<longrightarrow> (\\<exists>t. the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                                  \\<and> the (f' l) = \\<sigma>[s,p] t))\" and\n    bodyf: \"\\<forall>l\\<in>dom f. body (the (f l))\""], ["proof (prove)\nusing this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n\ngoal (1 subgoal):\n 1. dom (f'(l \\<mapsto> t')) = dom (f(l \\<mapsto> t)) &&&\n    \\<exists>L.\n       finite L \\<and>\n       (\\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (f' l) = \\<sigma>[s,p] t)) &&&\n    \\<forall>l\\<in>dom f. body (the (f l))", "by auto"], ["proof (state)\nthis:\n  dom (f'(l \\<mapsto> t')) = dom (f(l \\<mapsto> t))\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>l\\<in>dom f.\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                the (f' l) = \\<sigma>[s,p] t))\n  \\<forall>l\\<in>dom f. body (the (f l))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "assume \"body t\""], ["proof (state)\nthis:\n  body t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "with bodyf"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f. body (the (f l))\n  body t", "have body: \"\\<forall>l'\\<in>dom (f(l \\<mapsto> t)). body (the ((f(l \\<mapsto> t)) l'))\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f. body (the (f l))\n  body t\n\ngoal (1 subgoal):\n 1. \\<forall>l'\\<in>dom (f(l \\<mapsto> t)).\n       body (the ((f(l \\<mapsto> t)) l'))", "by auto"], ["proof (state)\nthis:\n  \\<forall>l'\\<in>dom (f(l \\<mapsto> t)). body (the ((f(l \\<mapsto> t)) l'))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "assume \n    \"finite L\" and\n    \"\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t'')\""], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "with exL"], ["proof (chain)\npicking this:\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>l\\<in>dom f.\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                the (f' l) = \\<sigma>[s,p] t))\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')", "obtain L' where \n    \"finite (L' \\<union> L)\" and\n    \"\\<forall>l'\\<in>dom (f(l \\<mapsto> t)). \\<forall>s p. s \\<notin> L' \\<union> L \\<and> p \\<notin> L' \\<union> L \\<and> s \\<noteq> p \n                            \\<longrightarrow> (\\<exists>t''. the ((f(l \\<mapsto> t)) l')\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \n                                     \\<and> the ((f'(l \\<mapsto> t')) l') = \\<sigma>[s,p] t'')\""], ["proof (prove)\nusing this:\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>l\\<in>dom f.\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                the (f' l) = \\<sigma>[s,p] t))\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. (\\<And>L'.\n        \\<lbrakk>finite (L' \\<union> L);\n         \\<forall>l'\\<in>dom (f(l \\<mapsto> t)).\n            \\<forall>s p.\n               s \\<notin> L' \\<union> L \\<and>\n               p \\<notin> L' \\<union> L \\<and>\n               s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   the ((f(l \\<mapsto> t))\n                         l')\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t'' \\<and>\n                   the ((f'(l \\<mapsto> t')) l') =\n                   \\<sigma>[s,p] t'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite (L' \\<union> L)\n  \\<forall>l'\\<in>dom (f(l \\<mapsto> t)).\n     \\<forall>s p.\n        s \\<notin> L' \\<union> L \\<and>\n        p \\<notin> L' \\<union> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the ((f(l \\<mapsto> t)) l')\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t'' \\<and>\n            the ((f'(l \\<mapsto> t')) l') = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<lbrakk>finite L;\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            t' = \\<sigma>[s,p] t'');\n     Obj f T => Obj f' T; lc (Obj f T); body t\\<rbrakk>\n    \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "from par_beta.pbeta_Obj[OF dom this body]"], ["proof (chain)\npicking this:\n  Obj (f(l \\<mapsto> t)) ?T => Obj (f'(l \\<mapsto> t')) ?T", "show \"Obj (f(l \\<mapsto> t)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (f'(l \\<mapsto> t')) T\""], ["proof (prove)\nusing this:\n  Obj (f(l \\<mapsto> t)) ?T => Obj (f'(l \\<mapsto> t')) ?T\n\ngoal (1 subgoal):\n 1. Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T", "by assumption"], ["proof (state)\nthis:\n  Obj (f(l \\<mapsto> t)) T => Obj (f'(l \\<mapsto> t')) T\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Upd_pbeta: \"Upd t l u \\<Rightarrow>\\<^sub>\\<beta> Upd t' l u'\n  \\<Longrightarrow> t \\<Rightarrow>\\<^sub>\\<beta> t' \n      \\<and> (\\<exists>L. finite L \n           \\<and> (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n               \\<longrightarrow> (\\<exists>t''. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> u' = \\<sigma>[s,p]t'')))\n      \\<and> lc t \\<and> body u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Upd t l u => Upd t' l u' \\<Longrightarrow>\n    t => t' \\<and>\n    (\\<exists>L.\n        finite L \\<and>\n        (\\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t''.\n                u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                u' = \\<sigma>[s,p] t''))) \\<and>\n    lc t \\<and> body u", "by (rule par_beta_cases(4), assumption, auto)"], ["", "lemma par_beta_refl: \n  fixes t\n  assumes \"lc t\"\n  shows \"t \\<Rightarrow>\\<^sub>\\<beta> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t => t", "using assms"], ["proof (prove)\nusing this:\n  lc t\n\ngoal (1 subgoal):\n 1. t => t", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. lc t \\<Longrightarrow> t => t", "define pred_cof\n    where \"pred_cof L t \\<longleftrightarrow>\n      (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> (\\<exists>t'. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> t = \\<sigma>[s,p] t'))\"\n    for L t"], ["proof (state)\nthis:\n  pred_cof ?L ?t =\n  (\\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t'.\n          ?t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n          ?t = \\<sigma>[s,p] t'))\n\ngoal (1 subgoal):\n 1. lc t \\<Longrightarrow> t => t", "from assms"], ["proof (chain)\npicking this:\n  lc t", "show ?thesis"], ["proof (prove)\nusing this:\n  lc t\n\ngoal (1 subgoal):\n 1. t => t", "proof \n    (induct\n      taking: \"\\<lambda>t. body t \\<and> (\\<exists>L. finite L \\<and> pred_cof L t)\"\n      rule: lc_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x. Fvar x => Fvar x\n 2. \\<And>t l a.\n       \\<lbrakk>lc t; t => t; lc a; a => a\\<rbrakk>\n       \\<Longrightarrow> Call t l a => Call t l a\n 3. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 4. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 5. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "case Fvar"], ["proof (state)\nthis:\n  \n\ngoal (5 subgoals):\n 1. \\<And>x. Fvar x => Fvar x\n 2. \\<And>t l a.\n       \\<lbrakk>lc t; t => t; lc a; a => a\\<rbrakk>\n       \\<Longrightarrow> Call t l a => Call t l a\n 3. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 4. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 5. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Fvar x_ => Fvar x_", "by simp"], ["proof (state)\nthis:\n  Fvar x_ => Fvar x_\n\ngoal (4 subgoals):\n 1. \\<And>t l a.\n       \\<lbrakk>lc t; t => t; lc a; a => a\\<rbrakk>\n       \\<Longrightarrow> Call t l a => Call t l a\n 2. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 3. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 4. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>t l a.\n       \\<lbrakk>lc t; t => t; lc a; a => a\\<rbrakk>\n       \\<Longrightarrow> Call t l a => Call t l a\n 2. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 3. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 4. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "case Call"], ["proof (state)\nthis:\n  lc t_\n  t_ => t_\n  lc a_\n  a_ => a_\n\ngoal (4 subgoals):\n 1. \\<And>t l a.\n       \\<lbrakk>lc t; t => t; lc a; a => a\\<rbrakk>\n       \\<Longrightarrow> Call t l a => Call t l a\n 2. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 3. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 4. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "thus ?case"], ["proof (prove)\nusing this:\n  lc t_\n  t_ => t_\n  lc a_\n  a_ => a_\n\ngoal (1 subgoal):\n 1. Call t_ l_ a_ => Call t_ l_ a_", "by simp"], ["proof (state)\nthis:\n  Call t_ l_ a_ => Call t_ l_ a_\n\ngoal (3 subgoals):\n 1. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 2. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 3. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 2. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 3. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "case Upd"], ["proof (state)\nthis:\n  lc t_\n  t_ => t_\n  body u_ \\<and> (\\<exists>L. finite L \\<and> pred_cof L u_)\n\ngoal (3 subgoals):\n 1. \\<And>t l u.\n       \\<lbrakk>lc t; t => t;\n        body u \\<and> (\\<exists>L. finite L \\<and> pred_cof L u)\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t l u\n 2. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 3. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "thus ?case"], ["proof (prove)\nusing this:\n  lc t_\n  t_ => t_\n  body u_ \\<and> (\\<exists>L. finite L \\<and> pred_cof L u_)\n\ngoal (1 subgoal):\n 1. Upd t_ l_ u_ => Upd t_ l_ u_", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  lc t_\n  t_ => t_\n  body u_ \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>s p.\n          s \\<notin> L \\<and>\n          p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n          (\\<exists>t'.\n              u_\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n              u_ = \\<sigma>[s,p] t')))\n\ngoal (1 subgoal):\n 1. Upd t_ l_ u_ => Upd t_ l_ u_", "by auto"], ["proof (state)\nthis:\n  Upd t_ l_ u_ => Upd t_ l_ u_\n\ngoal (2 subgoals):\n 1. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 2. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 2. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "case (Obj f T)"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)))\n\ngoal (2 subgoals):\n 1. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 2. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "note pred = this"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)))\n\ngoal (2 subgoals):\n 1. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 2. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "define pred_fl where \"pred_fl s p b l \\<longleftrightarrow> (\\<exists>t'. (the b\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> the b = \\<sigma>[s,p]t')\"\n      for s p b and l :: Label"], ["proof (state)\nthis:\n  pred_fl ?s ?p ?b ?l =\n  (\\<exists>t'.\n      the ?b\\<^bsup>[Fvar ?s,Fvar ?p]\\<^esup> => t' \\<and>\n      the ?b = \\<sigma>[?s,?p] t')\n\ngoal (2 subgoals):\n 1. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 2. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "from fmap_ex_cof[of f pred_fl] pred"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f.\n     \\<exists>L.\n        finite L \\<and>\n        (\\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            pred_fl s p (f l) l) \\<Longrightarrow>\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>l\\<in>dom f.\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            pred_fl s p (f l) l)\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)))", "obtain L where\n      \"finite L\" and \"\\<forall>l\\<in>dom f. body (the(f l)) \n                              \\<and> (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> pred_fl s p (f l) l)\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     \\<exists>L.\n        finite L \\<and>\n        (\\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            pred_fl s p (f l) l) \\<Longrightarrow>\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>l\\<in>dom f.\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            pred_fl s p (f l) l)\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)))\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>l\\<in>dom f.\n            body (the (f l)) \\<and>\n            (\\<forall>s p.\n                s \\<notin> L \\<and>\n                p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                pred_fl s p (f l) l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding pred_cof_def pred_fl_def"], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     \\<exists>L.\n        finite L \\<and>\n        (\\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t'.\n                the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                the (f l) = \\<sigma>[s,p] t')) \\<Longrightarrow>\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>l\\<in>dom f.\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t'.\n                the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                the (f l) = \\<sigma>[s,p] t'))\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t'.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                 the (f l) = \\<sigma>[s,p] t')))\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>l\\<in>dom f.\n            body (the (f l)) \\<and>\n            (\\<forall>s p.\n                s \\<notin> L \\<and>\n                p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t'.\n                    the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                    the (f l) = \\<sigma>[s,p] t'))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         pred_fl s p (f l) l)\n\ngoal (2 subgoals):\n 1. \\<And>f T.\n       \\<forall>l\\<in>dom f.\n          body (the (f l)) \\<and>\n          (\\<exists>L.\n              finite L \\<and> pred_cof L (the (f l))) \\<Longrightarrow>\n       Obj f T => Obj f T\n 2. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "thus \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f T\""], ["proof (prove)\nusing this:\n  finite L\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         pred_fl s p (f l) l)\n\ngoal (1 subgoal):\n 1. Obj f T => Obj f T", "unfolding pred_fl_def"], ["proof (prove)\nusing this:\n  finite L\n  \\<forall>l\\<in>dom f.\n     body (the (f l)) \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t'.\n             the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n             the (f l) = \\<sigma>[s,p] t'))\n\ngoal (1 subgoal):\n 1. Obj f T => Obj f T", "by auto"], ["proof (state)\nthis:\n  Obj f T => Obj f T\n\ngoal (1 subgoal):\n 1. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "case (Bnd L t)"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "note pred = this(2)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L t.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t)", "with \\<open>finite L\\<close>"], ["proof (chain)\npicking this:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "show ?case"], ["proof (prove)\nusing this:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. body t \\<and> (\\<exists>L. finite L \\<and> pred_cof L t)", "proof \n      (auto simp: body_def, unfold pred_cof_def,\n        rule_tac x = \"L \\<union> FV t\" in exI, simp, clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>);\n        s \\<notin> L; s \\<notin> FV t; p \\<notin> L; p \\<notin> FV t;\n        s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'.\n                            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                            t = \\<sigma>[s,p] t'", "fix s p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>);\n        s \\<notin> L; s \\<notin> FV t; p \\<notin> L; p \\<notin> FV t;\n        s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'.\n                            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                            t = \\<sigma>[s,p] t'", "assume \n        \"s \\<notin> L\" and \"p \\<notin> L\" and \"s \\<noteq> p\" and\n        \"s \\<notin> FV t\" and \"p \\<notin> FV t\""], ["proof (state)\nthis:\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  s \\<notin> FV t\n  p \\<notin> FV t\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n           (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>);\n        s \\<notin> L; s \\<notin> FV t; p \\<notin> L; p \\<notin> FV t;\n        s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'.\n                            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                            t = \\<sigma>[s,p] t'", "from \n        this(1-3) pred \n        sclose_sopen_eq_t[OF this(4-5) this(3)]"], ["proof (chain)\npicking this:\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} t = t", "show \"\\<exists>t'. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> t = \\<sigma>[s,p] t'\""], ["proof (prove)\nusing this:\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and>\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} t = t\n\ngoal (1 subgoal):\n 1. \\<exists>t'.\n       t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and> t = \\<sigma>[s,p] t'", "by (rule_tac x = \"t\\<^bsup>[Fvar s,Fvar p]\\<^esup>\" in exI, simp add: openz_def closez_def)"], ["proof (state)\nthis:\n  \\<exists>t'.\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and> t = \\<sigma>[s,p] t'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  body t \\<and> (\\<exists>L. finite L \\<and> pred_cof L t)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t => t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma par_beta_body_refl:\n  fixes u\n  assumes \"body u\"\n  shows \"\\<exists>L. finite L \\<and> (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n                          \\<longrightarrow> (\\<exists>t'. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> u = \\<sigma>[s,p] t'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>L.\n       finite L \\<and>\n       (\\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t'.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n               u = \\<sigma>[s,p] t'))", "proof (rule_tac x = \"FV u\" in exI, simp, clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>s \\<notin> FV u; p \\<notin> FV u; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'.\n                            u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                            u = \\<sigma>[s,p] t'", "fix s p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>s \\<notin> FV u; p \\<notin> FV u; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'.\n                            u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                            u = \\<sigma>[s,p] t'", "assume \"s \\<notin> FV u\" and \"p \\<notin> FV u\" and \"s \\<noteq> p\""], ["proof (state)\nthis:\n  s \\<notin> FV u\n  p \\<notin> FV u\n  s \\<noteq> p\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>s \\<notin> FV u; p \\<notin> FV u; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t'.\n                            u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                            u = \\<sigma>[s,p] t'", "from \n    par_beta_refl[OF body_lc[OF assms lc_Fvar[of s] lc_Fvar[of p]]]\n    sclose_sopen_eq_t[OF this]"], ["proof (chain)\npicking this:\n  u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (u\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} u = u", "show \"\\<exists>t'. (u\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> u = \\<sigma>[s,p] t'\""], ["proof (prove)\nusing this:\n  u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => (u\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} u = u\n\ngoal (1 subgoal):\n 1. \\<exists>t'.\n       u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and> u = \\<sigma>[s,p] t'", "by (rule_tac x = \"u\\<^bsup>[Fvar s, Fvar p]\\<^esup>\" in exI, simp add: openz_def closez_def)"], ["proof (state)\nthis:\n  \\<exists>t'.\n     u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and> u = \\<sigma>[s,p] t'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma par_beta_ssubst[rule_format]:\n  fixes t t'\n  assumes \"t \\<Rightarrow>\\<^sub>\\<beta> t'\"\n  shows \"\\<forall>x v v'. v \\<Rightarrow>\\<^sub>\\<beta> v' \\<longrightarrow> [x \\<rightarrow> v] t \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "define pred_cof\n    where \"pred_cof L t t' \\<longleftrightarrow>\n      (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> (\\<exists>t''. t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t''))\"\n    for L t t'"], ["proof (state)\nthis:\n  pred_cof ?L ?t ?t' =\n  (\\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          ?t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?t' = \\<sigma>[s,p] t''))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "{"], ["proof (state)\nthis:\n  pred_cof ?L ?t ?t' =\n  (\\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          ?t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?t' = \\<sigma>[s,p] t''))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "fix x v v' t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "assume \n      \"v \\<Rightarrow>\\<^sub>\\<beta> v'\" and\n      \"\\<forall>x v v'. v \\<Rightarrow>\\<^sub>\\<beta> v' \\<longrightarrow> (\\<exists>L. finite L \\<and> pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\""], ["proof (state)\nthis:\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "hence\n      \"\\<exists>L. finite L \\<and> pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\""], ["proof (prove)\nusing this:\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\n\ngoal (1 subgoal):\n 1. \\<exists>L.\n       finite L \\<and>\n       pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')", "by auto"], ["proof (state)\nthis:\n  \\<exists>L.\n     finite L \\<and>\n     pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?v2 => ?v'2;\n   \\<forall>x v v'.\n      v => v' \\<longrightarrow>\n      (\\<exists>L.\n          finite L \\<and>\n          pred_cof L ([x \\<rightarrow> v] ?ta2)\n           ([x \\<rightarrow> v'] ?t'a2))\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       pred_cof L ([?x2 \\<rightarrow> ?v2] ?ta2)\n                        ([?x2 \\<rightarrow> ?v'2] ?t'a2)\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "note Lex = this"], ["proof (state)\nthis:\n  \\<lbrakk>?v2 => ?v'2;\n   \\<forall>x v v'.\n      v => v' \\<longrightarrow>\n      (\\<exists>L.\n          finite L \\<and>\n          pred_cof L ([x \\<rightarrow> v] ?ta2)\n           ([x \\<rightarrow> v'] ?t'a2))\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       pred_cof L ([?x2 \\<rightarrow> ?v2] ?ta2)\n                        ([?x2 \\<rightarrow> ?v'2] ?t'a2)\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?v2 => ?v'2;\n   \\<forall>x v v'.\n      v => v' \\<longrightarrow>\n      (\\<exists>L.\n          finite L \\<and>\n          pred_cof L ([x \\<rightarrow> v] ?ta2)\n           ([x \\<rightarrow> v'] ?t'a2))\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       pred_cof L ([?x2 \\<rightarrow> ?v2] ?ta2)\n                        ([?x2 \\<rightarrow> ?v'2] ?t'a2)\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "fix x v l and f :: \"Label \\<Rightarrow> sterm option\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "assume \"l \\<in> dom f\""], ["proof (state)\nthis:\n  l \\<in> dom f\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "hence \"l \\<in> dom (\\<lambda>l. ssubst_option x v (f l))\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n\ngoal (1 subgoal):\n 1. l \\<in> dom (\\<lambda>l. ssubst_option x v (f l))", "by simp"], ["proof (state)\nthis:\n  l \\<in> dom (\\<lambda>l. ssubst_option x v (f l))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "}"], ["proof (state)\nthis:\n  ?l2 \\<in> dom ?f2 \\<Longrightarrow>\n  ?l2 \\<in> dom (\\<lambda>l. ssubst_option ?x2 ?v2 (?f2 l))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "note domssubst = this"], ["proof (state)\nthis:\n  ?l2 \\<in> dom ?f2 \\<Longrightarrow>\n  ?l2 \\<in> dom (\\<lambda>l. ssubst_option ?x2 ?v2 (?f2 l))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "{"], ["proof (state)\nthis:\n  ?l2 \\<in> dom ?f2 \\<Longrightarrow>\n  ?l2 \\<in> dom (\\<lambda>l. ssubst_option ?x2 ?v2 (?f2 l))\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "fix x v l T and f :: \"Label \\<Rightarrow> sterm option\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "assume \"lc (Obj f T)\" and \"lc v\""], ["proof (state)\nthis:\n  lc (Obj f T)\n  lc v\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "from ssubst_preserves_lc[OF this]"], ["proof (chain)\npicking this:\n  lc ([?x \\<rightarrow> v] Obj f T)", "have obj: \"lc (Obj (\\<lambda>l. ssubst_option x v (f l)) T)\""], ["proof (prove)\nusing this:\n  lc ([?x \\<rightarrow> v] Obj f T)\n\ngoal (1 subgoal):\n 1. lc (Obj (\\<lambda>l. ssubst_option x v (f l)) T)", "by simp"], ["proof (state)\nthis:\n  lc (Obj (\\<lambda>l. ssubst_option x v (f l)) T)\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>lc (Obj ?f2 ?T2); lc ?v2\\<rbrakk>\n  \\<Longrightarrow> lc (Obj (\\<lambda>l. ssubst_option ?x2 ?v2 (?f2 l)) ?T2)\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "note lcobj = this"], ["proof (state)\nthis:\n  \\<lbrakk>lc (Obj ?f2 ?T2); lc ?v2\\<rbrakk>\n  \\<Longrightarrow> lc (Obj (\\<lambda>l. ssubst_option ?x2 ?v2 (?f2 l)) ?T2)\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "from assms"], ["proof (chain)\npicking this:\n  t => t'", "show ?thesis"], ["proof (prove)\nusing this:\n  t => t'\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'", "proof \n    (induct\n      taking: \"\\<lambda>t t'. \\<forall>x v v'. v \\<Rightarrow>\\<^sub>\\<beta> v'\n                       \\<longrightarrow> (\\<exists>L. finite L \n                              \\<and> pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\"\n      rule: pbeta_induct)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x.\n       \\<forall>xa v v'.\n          v => v' \\<longrightarrow>\n          [xa \\<rightarrow> v] Fvar x => [xa \\<rightarrow> v'] Fvar x\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t; u => u';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] u => [x \\<rightarrow> v'] u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call t l u =>\n                            [x \\<rightarrow> v'] Call t' l u'\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case Fvar"], ["proof (state)\nthis:\n  \n\ngoal (7 subgoals):\n 1. \\<And>x.\n       \\<forall>xa v v'.\n          v => v' \\<longrightarrow>\n          [xa \\<rightarrow> v] Fvar x => [xa \\<rightarrow> v'] Fvar x\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t; u => u';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] u => [x \\<rightarrow> v'] u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call t l u =>\n                            [x \\<rightarrow> v'] Call t' l u'\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa v v'.\n       v => v' \\<longrightarrow>\n       [xa \\<rightarrow> v] Fvar x_ => [xa \\<rightarrow> v'] Fvar x_", "by simp"], ["proof (state)\nthis:\n  \\<forall>xa v v'.\n     v => v' \\<longrightarrow>\n     [xa \\<rightarrow> v] Fvar x_ => [xa \\<rightarrow> v'] Fvar x_\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t; u => u';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] u => [x \\<rightarrow> v'] u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call t l u =>\n                            [x \\<rightarrow> v'] Call t' l u'\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t; u => u';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] u => [x \\<rightarrow> v'] u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call t l u =>\n                            [x \\<rightarrow> v'] Call t' l u'\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case Call"], ["proof (state)\nthis:\n  t_ => t'_\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t_ => [x \\<rightarrow> v'] t'_\n  lc t_\n  u_ => u'_\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] u_ => [x \\<rightarrow> v'] u'_\n  lc u_\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t; u => u';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] u => [x \\<rightarrow> v'] u';\n        lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call t l u =>\n                            [x \\<rightarrow> v'] Call t' l u'\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "thus ?case"], ["proof (prove)\nusing this:\n  t_ => t'_\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t_ => [x \\<rightarrow> v'] t'_\n  lc t_\n  u_ => u'_\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] u_ => [x \\<rightarrow> v'] u'_\n  lc u_\n\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] Call t_ l_ u_ =>\n       [x \\<rightarrow> v'] Call t'_ l_ u'_", "by simp"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Call t_ l_ u_ =>\n     [x \\<rightarrow> v'] Call t'_ l_ u'_\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case (Upd t t' l u u')"], ["proof (state)\nthis:\n  t => t'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'\n  lc t\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] u) ([x \\<rightarrow> v'] u'))\n  body u\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "note pred_t = this(2) and pred_u = this(4)"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] u) ([x \\<rightarrow> v'] u'))\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t';\n        lc t;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] u)\n                ([x \\<rightarrow> v'] u'));\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd t l u =>\n                            [x \\<rightarrow> v'] Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "fix x v v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "assume \"v \\<Rightarrow>\\<^sub>\\<beta> v'\""], ["proof (state)\nthis:\n  v => v'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "from Lex[OF this pred_u]"], ["proof (chain)\npicking this:\n  \\<exists>L.\n     finite L \\<and>\n     pred_cof L ([?x2 \\<rightarrow> v] u) ([?x2 \\<rightarrow> v'] u')", "obtain L where\n        \"finite L\" and \"pred_cof L ([x \\<rightarrow> v] u) ([x \\<rightarrow> v'] u')\""], ["proof (prove)\nusing this:\n  \\<exists>L.\n     finite L \\<and>\n     pred_cof L ([?x2 \\<rightarrow> v] u) ([?x2 \\<rightarrow> v'] u')\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         pred_cof L ([x \\<rightarrow> v] u)\n          ([x \\<rightarrow> v'] u')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  pred_cof L ([x \\<rightarrow> v] u) ([x \\<rightarrow> v'] u')\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "with\n        ssubst_preserves_lc[of t v x]\n        ssubst_preserves_body[of u v x]\n        \\<open>lc t\\<close> par_beta_lc[OF \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close>] \\<open>body u\\<close>\n        \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close> pred_t"], ["proof (chain)\npicking this:\n  \\<lbrakk>lc t; lc v\\<rbrakk> \\<Longrightarrow> lc ([x \\<rightarrow> v] t)\n  \\<lbrakk>body u; lc v\\<rbrakk>\n  \\<Longrightarrow> body ([x \\<rightarrow> v] u)\n  lc t\n  lc v \\<and> lc v'\n  body u\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'\n  finite L\n  pred_cof L ([x \\<rightarrow> v] u) ([x \\<rightarrow> v'] u')", "show \"[x \\<rightarrow> v] Upd t l u \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] Upd t' l u'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>lc t; lc v\\<rbrakk> \\<Longrightarrow> lc ([x \\<rightarrow> v] t)\n  \\<lbrakk>body u; lc v\\<rbrakk>\n  \\<Longrightarrow> body ([x \\<rightarrow> v] u)\n  lc t\n  lc v \\<and> lc v'\n  body u\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'\n  finite L\n  pred_cof L ([x \\<rightarrow> v] u) ([x \\<rightarrow> v'] u')\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>lc t; lc v\\<rbrakk> \\<Longrightarrow> lc ([x \\<rightarrow> v] t)\n  \\<lbrakk>body u; lc v\\<rbrakk>\n  \\<Longrightarrow> body ([x \\<rightarrow> v] u)\n  lc t\n  lc v \\<and> lc v'\n  body u\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         [x \\<rightarrow> v] u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         [x \\<rightarrow> v'] u' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'", "by auto"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Upd t l u => [x \\<rightarrow> v'] Upd t' l u'\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case (Upd' f f' T t t' l)"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\n  l \\<in> dom f\n  lc (Obj f T)\n  body t\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "note pred_obj = this(2) and pred_t = this(3)"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           (\\<exists>L.\n               finite L \\<and>\n               pred_cof L ([x \\<rightarrow> v] t)\n                ([x \\<rightarrow> v'] t'));\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Upd (Obj f T) l t =>\n                            [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "from \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close> \\<open>l \\<in> dom f\\<close>"], ["proof (chain)\npicking this:\n  Obj f T => Obj f' T\n  l \\<in> dom f", "have \"l \\<in> dom f'\""], ["proof (prove)\nusing this:\n  Obj f T => Obj f' T\n  l \\<in> dom f\n\ngoal (1 subgoal):\n 1. l \\<in> dom f'", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "fix x v v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "assume \"v \\<Rightarrow>\\<^sub>\\<beta> v'\""], ["proof (state)\nthis:\n  v => v'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "with\n        domssubst[OF \\<open>l \\<in> dom f\\<close>]\n        ssubst_preserves_lc[of \"Obj f T\" v x]\n        ssubst_preserves_body[of t v x]\n        \\<open>lc (Obj f T)\\<close> par_beta_lc[OF \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close>] \\<open>body t\\<close>\n        pred_obj"], ["proof (chain)\npicking this:\n  l \\<in> dom (\\<lambda>l. ssubst_option ?x2 ?v2 (f l))\n  \\<lbrakk>lc (Obj f T); lc v\\<rbrakk>\n  \\<Longrightarrow> lc ([x \\<rightarrow> v] Obj f T)\n  \\<lbrakk>body t; lc v\\<rbrakk>\n  \\<Longrightarrow> body ([x \\<rightarrow> v] t)\n  lc (Obj f T)\n  lc v \\<and> lc v'\n  body t\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  v => v'", "have \n        \"[x \\<rightarrow> v] Obj f T \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] Obj f' T\" and\n        \"lc ([x \\<rightarrow> v] Obj f T)\" and \"body ([x \\<rightarrow> v] t)\""], ["proof (prove)\nusing this:\n  l \\<in> dom (\\<lambda>l. ssubst_option ?x2 ?v2 (f l))\n  \\<lbrakk>lc (Obj f T); lc v\\<rbrakk>\n  \\<Longrightarrow> lc ([x \\<rightarrow> v] Obj f T)\n  \\<lbrakk>body t; lc v\\<rbrakk>\n  \\<Longrightarrow> body ([x \\<rightarrow> v] t)\n  lc (Obj f T)\n  lc v \\<and> lc v'\n  body t\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  v => v'\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T &&&\n    lc ([x \\<rightarrow> v] Obj f T) &&& body ([x \\<rightarrow> v] t)", "by auto"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  lc ([x \\<rightarrow> v] Obj f T)\n  body ([x \\<rightarrow> v] t)\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "note lem = \n        pbeta_Upd'[OF this(1)[simplified] _ _ \n                      domssubst[OF \\<open>l \\<in> dom f\\<close>] \n                      this(2)[simplified] this(3)]"], ["proof (state)\nthis:\n  \\<lbrakk>finite ?L;\n   \\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?t' = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> Upd (Obj (\\<lambda>l. ssubst_option x v (f l)) T) l\n                     ([x \\<rightarrow> v] t) =>\n                    Obj ((\\<lambda>l. ssubst_option x v' (f' l))(l \\<mapsto>\n                         ?t'))\n                     T\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "from Lex[OF \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close> pred_t]"], ["proof (chain)\npicking this:\n  \\<exists>L.\n     finite L \\<and>\n     pred_cof L ([?x2 \\<rightarrow> v] t) ([?x2 \\<rightarrow> v'] t')", "obtain L where\n        \"finite L\" and \"pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\""], ["proof (prove)\nusing this:\n  \\<exists>L.\n     finite L \\<and>\n     pred_cof L ([?x2 \\<rightarrow> v] t) ([?x2 \\<rightarrow> v'] t')\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         pred_cof L ([x \\<rightarrow> v] t)\n          ([x \\<rightarrow> v'] t')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Upd (Obj f T) l t =>\n       [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "with lem[of L \"[x \\<rightarrow> v'] t'\"] ssubstoption_insert[OF \\<open>l \\<in> dom f'\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>finite L;\n   \\<forall>s p.\n      s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> Upd (Obj (\\<lambda>l. ssubst_option x v (f l)) T) l\n                     ([x \\<rightarrow> v] t) =>\n                    Obj ((\\<lambda>l. ssubst_option x v' (f' l))(l \\<mapsto>\n                         [x \\<rightarrow> v'] t'))\n                     T\n  (\\<lambda>la. ssubst_option ?x ?t' (if la = l then Some ?t else f' la)) =\n  (\\<lambda>la. ssubst_option ?x ?t' (f' la))(l \\<mapsto>\n  [?x \\<rightarrow> ?t'] ?t)\n  finite L\n  pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')", "show \"[x \\<rightarrow> v] Upd (Obj f T) l t \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\""], ["proof (prove)\nusing this:\n  \\<lbrakk>finite L;\n   \\<forall>s p.\n      s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> Upd (Obj (\\<lambda>l. ssubst_option x v (f l)) T) l\n                     ([x \\<rightarrow> v] t) =>\n                    Obj ((\\<lambda>l. ssubst_option x v' (f' l))(l \\<mapsto>\n                         [x \\<rightarrow> v'] t'))\n                     T\n  (\\<lambda>la. ssubst_option ?x ?t' (if la = l then Some ?t else f' la)) =\n  (\\<lambda>la. ssubst_option ?x ?t' (f' la))(l \\<mapsto>\n  [?x \\<rightarrow> ?t'] ?t)\n  finite L\n  pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Upd (Obj f T) l t =>\n    [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite L;\n   \\<forall>s p.\n      s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> Upd (Obj (\\<lambda>l. ssubst_option x v (f l)) T) l\n                     ([x \\<rightarrow> v] t) =>\n                    Obj ((\\<lambda>l. ssubst_option x v' (f' l))(l \\<mapsto>\n                         [x \\<rightarrow> v'] t'))\n                     T\n  (\\<lambda>la. ssubst_option ?x ?t' (if la = l then Some ?t else f' la)) =\n  (\\<lambda>la. ssubst_option ?x ?t' (f' la))(l \\<mapsto>\n  [?x \\<rightarrow> ?t'] ?t)\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Upd (Obj f T) l t =>\n    [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T", "by auto"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] Upd (Obj f T) l t =>\n  [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Upd (Obj f T) l t =>\n     [x \\<rightarrow> v'] Obj (f'(l \\<mapsto> t')) T\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case (beta f f' T l p p')"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  lc (Obj f T)\n  l \\<in> dom f\n  p => p'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p'\n  lc p\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "note pred_obj = this(2) and pred_p = this(6)"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p'\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T;\n        lc (Obj f T); l \\<in> dom f; p => p';\n        \\<forall>x v v'.\n           v => v' \\<longrightarrow>\n           [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p';\n        lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Call (Obj f T) l p =>\n                            [x \\<rightarrow> v'] (the\n             (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "fix x v v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "assume \"v \\<Rightarrow>\\<^sub>\\<beta> v'\""], ["proof (state)\nthis:\n  v => v'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "from \n        par_beta_lc[OF this]\n        ssubst_preserves_lc[OF \\<open>lc p\\<close>]"], ["proof (chain)\npicking this:\n  lc v \\<and> lc v'\n  lc ?t' \\<Longrightarrow> lc ([?x \\<rightarrow> ?t'] p)", "have \"lc v\" and \"lc v'\" and \"lc ([x \\<rightarrow> v] p)\""], ["proof (prove)\nusing this:\n  lc v \\<and> lc v'\n  lc ?t' \\<Longrightarrow> lc ([?x \\<rightarrow> ?t'] p)\n\ngoal (1 subgoal):\n 1. lc v &&& lc v' &&& lc ([x \\<rightarrow> v] p)", "by auto"], ["proof (state)\nthis:\n  lc v\n  lc v'\n  lc ([x \\<rightarrow> v] p)\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "note lem = \n        pbeta_beta[OF _ domssubst[OF \\<open>l \\<in> dom f\\<close>] _ \n                      lcobj[OF \\<open>lc (Obj f T)\\<close> this(1)] this(3)]"], ["proof (state)\nthis:\n  \\<lbrakk>Obj (\\<lambda>l. ssubst_option ?x3 v (f l)) T => Obj ?f' T;\n   [x \\<rightarrow> v] p => ?p'\\<rbrakk>\n  \\<Longrightarrow> Call (Obj (\\<lambda>l. ssubst_option ?x3 v (f l)) T) l\n                     ([x \\<rightarrow> v] p) =>\n                    (the (?f' l)\\<^bsup>[Obj ?f' T,?p']\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "from \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>"], ["proof (chain)\npicking this:\n  Obj f T => Obj f' T", "have \"dom f = dom f'\""], ["proof (prove)\nusing this:\n  Obj f T => Obj f' T\n\ngoal (1 subgoal):\n 1. dom f = dom f'", "by auto"], ["proof (state)\nthis:\n  dom f = dom f'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "with \\<open>l \\<in> dom f\\<close>"], ["proof (chain)\npicking this:\n  l \\<in> dom f\n  dom f = dom f'", "have \"the (ssubst_option x v' (f' l)) = [x \\<rightarrow> v'] the (f' l)\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  dom f = dom f'\n\ngoal (1 subgoal):\n 1. the (ssubst_option x v' (f' l)) = [x \\<rightarrow> v'] the (f' l)", "by auto"], ["proof (state)\nthis:\n  the (ssubst_option x v' (f' l)) = [x \\<rightarrow> v'] the (f' l)\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Call (Obj f T) l p =>\n       [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "with\n        lem[of x \"\\<lambda>l. ssubst_option x v' (f' l)\" \"[x \\<rightarrow> v'] p'\"]\n        \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close> pred_obj pred_p\n        ssubst_openz_distrib[OF \\<open>lc v'\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>Obj (\\<lambda>l. ssubst_option x v (f l)) T =>\n           Obj (\\<lambda>l. ssubst_option x v' (f' l)) T;\n   [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p'\\<rbrakk>\n  \\<Longrightarrow> Call (Obj (\\<lambda>l. ssubst_option x v (f l)) T) l\n                     ([x \\<rightarrow> v] p) =>\n                    (the (ssubst_option x v'\n                           (f' l))\\<^bsup>[Obj\n      (\\<lambda>l. ssubst_option x v' (f' l))\n      T,[x \\<rightarrow> v'] p']\\<^esup>)\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p'\n  [?x \\<rightarrow> v'] (?t\\<^bsup>[?s,?p]\\<^esup>) =\n  ([?x \\<rightarrow> v'] ?t\\<^bsup>[[?x \\<rightarrow> v'] ?s,[?x \\<rightarrow> v'] ?p]\\<^esup>)\n  the (ssubst_option x v' (f' l)) = [x \\<rightarrow> v'] the (f' l)", "show\n        \"[x \\<rightarrow> v] Call (Obj f T) l p \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T, p']\\<^esup>)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Obj (\\<lambda>l. ssubst_option x v (f l)) T =>\n           Obj (\\<lambda>l. ssubst_option x v' (f' l)) T;\n   [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p'\\<rbrakk>\n  \\<Longrightarrow> Call (Obj (\\<lambda>l. ssubst_option x v (f l)) T) l\n                     ([x \\<rightarrow> v] p) =>\n                    (the (ssubst_option x v'\n                           (f' l))\\<^bsup>[Obj\n      (\\<lambda>l. ssubst_option x v' (f' l))\n      T,[x \\<rightarrow> v'] p']\\<^esup>)\n  v => v'\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] p => [x \\<rightarrow> v'] p'\n  [?x \\<rightarrow> v'] (?t\\<^bsup>[?s,?p]\\<^esup>) =\n  ([?x \\<rightarrow> v'] ?t\\<^bsup>[[?x \\<rightarrow> v'] ?s,[?x \\<rightarrow> v'] ?p]\\<^esup>)\n  the (ssubst_option x v' (f' l)) = [x \\<rightarrow> v'] the (f' l)\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Call (Obj f T) l p =>\n    [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "by simp"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] Call (Obj f T) l p =>\n  [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Call (Obj f T) l p =>\n     [x \\<rightarrow> v'] (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal (2 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case (Obj f f' T)"], ["proof (state)\nthis:\n  dom f' = dom f\n  \\<forall>l\\<in>dom f. body (the (f l))\n  \\<forall>l\\<in>dom f.\n     \\<forall>x v v'.\n        v => v' \\<longrightarrow>\n        (\\<exists>L.\n            finite L \\<and>\n            pred_cof L ([x \\<rightarrow> v] the (f l))\n             ([x \\<rightarrow> v'] the (f' l)))\n\ngoal (2 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "note pred = fmap_ball_all3[OF this(1) this(3)]"], ["proof (state)\nthis:\n  \\<forall>x y z.\n     y => z \\<longrightarrow>\n     (\\<forall>l\\<in>dom f.\n         \\<exists>L.\n            finite L \\<and>\n            pred_cof L ([x \\<rightarrow> y] the (f l))\n             ([x \\<rightarrow> z] the (f' l)))\n\ngoal (2 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           \\<forall>x v v'.\n              v => v' \\<longrightarrow>\n              (\\<exists>L.\n                  finite L \\<and>\n                  pred_cof L ([x \\<rightarrow> v] the (f l))\n                   ([x \\<rightarrow> v'] the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            [x \\<rightarrow> v] Obj f T =>\n                            [x \\<rightarrow> v'] Obj f' T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "fix x v v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "define pred_bnd\n        where \"pred_bnd s p b b' l \\<longleftrightarrow>\n          (\\<exists>t''. [x \\<rightarrow> v] the b\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> [x \\<rightarrow> v'] the b' = \\<sigma>[s,p] t'')\"\n        for s p b b' and l::Label"], ["proof (state)\nthis:\n  pred_bnd ?s ?p ?b ?b' ?l =\n  (\\<exists>t''.\n      [x \\<rightarrow> v] the ?b\\<^bsup>[Fvar ?s,Fvar ?p]\\<^esup> =>\n      t'' \\<and>\n      [x \\<rightarrow> v'] the ?b' = \\<sigma>[?s,?p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "assume \"v \\<Rightarrow>\\<^sub>\\<beta> v'\""], ["proof (state)\nthis:\n  v => v'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "with pred \\<open>dom f' = dom f\\<close> fmap_ex_cof2[of f' f pred_bnd]"], ["proof (chain)\npicking this:\n  \\<forall>x y z.\n     y => z \\<longrightarrow>\n     (\\<forall>l\\<in>dom f.\n         \\<exists>L.\n            finite L \\<and>\n            pred_cof L ([x \\<rightarrow> y] the (f l))\n             ([x \\<rightarrow> z] the (f' l)))\n  dom f' = dom f\n  \\<lbrakk>dom f' = dom f;\n   \\<forall>l\\<in>dom f.\n      \\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             pred_bnd s p (f l) (f' l) l)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L \\<and>\n                              p \\<notin> L \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              pred_bnd s p (f l) (f' l) l)\n  v => v'", "obtain L where\n        \"finite L\" and \n        predf: \"\\<forall>l\\<in>dom f. pred_cof L ([x \\<rightarrow> v] the (f l)) ([x \\<rightarrow> v'] the (f' l))\""], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     y => z \\<longrightarrow>\n     (\\<forall>l\\<in>dom f.\n         \\<exists>L.\n            finite L \\<and>\n            pred_cof L ([x \\<rightarrow> y] the (f l))\n             ([x \\<rightarrow> z] the (f' l)))\n  dom f' = dom f\n  \\<lbrakk>dom f' = dom f;\n   \\<forall>l\\<in>dom f.\n      \\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             pred_bnd s p (f l) (f' l) l)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L \\<and>\n                              p \\<notin> L \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              pred_bnd s p (f l) (f' l) l)\n  v => v'\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>l\\<in>dom f.\n            pred_cof L ([x \\<rightarrow> v] the (f l))\n             ([x \\<rightarrow> v'] the (f' l))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding pred_cof_def pred_bnd_def"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     y => z \\<longrightarrow>\n     (\\<forall>l\\<in>dom f.\n         \\<exists>L.\n            finite L \\<and>\n            (\\<forall>s p.\n                s \\<notin> L \\<and>\n                p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t''.\n                    [x \\<rightarrow> y] the\n   (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                    t'' \\<and>\n                    [x \\<rightarrow> z] the (f' l) = \\<sigma>[s,p] t'')))\n  dom f' = dom f\n  \\<lbrakk>dom f' = dom f;\n   \\<forall>l\\<in>dom f.\n      \\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t''.\n                 [x \\<rightarrow> v] the\n(f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 t'' \\<and>\n                 [x \\<rightarrow> v'] the (f' l) =\n                 \\<sigma>[s,p] t''))\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L \\<and>\n                              p \\<notin> L \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              (\\<exists>t''.\n                                  [x \\<rightarrow> v] the\n                 (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                  t'' \\<and>\n                                  [x \\<rightarrow> v'] the (f' l) =\n                                  \\<sigma>[s,p] t''))\n  v => v'\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>l\\<in>dom f.\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   [x \\<rightarrow> v] the\n  (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t'' \\<and>\n                   [x \\<rightarrow> v'] the (f' l) =\n                   \\<sigma>[s,p] t'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  \\<forall>l\\<in>dom f.\n     pred_cof L ([x \\<rightarrow> v] the (f l))\n      ([x \\<rightarrow> v'] the (f' l))\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "have \"\\<forall>l\\<in>dom (\\<lambda>l. ssubst_option x v (f l)). body (the (ssubst_option x v (f l)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>dom (\\<lambda>l. ssubst_option x v (f l)).\n       body (the (ssubst_option x v (f l)))", "proof (intro strip, simp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>l.\n       l \\<in> dom f \\<Longrightarrow> body (the (ssubst_option x v (f l)))", "fix l' :: Label"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>l.\n       l \\<in> dom f \\<Longrightarrow> body (the (ssubst_option x v (f l)))", "assume \"l' \\<in> dom f\""], ["proof (state)\nthis:\n  l' \\<in> dom f\n\ngoal (1 subgoal):\n 1. \\<And>l.\n       l \\<in> dom f \\<Longrightarrow> body (the (ssubst_option x v (f l)))", "with \\<open>\\<forall>l\\<in>dom f. body (the(f l))\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f. body (the (f l))\n  l' \\<in> dom f", "have \"body (the (f l'))\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f. body (the (f l))\n  l' \\<in> dom f\n\ngoal (1 subgoal):\n 1. body (the (f l'))", "by blast"], ["proof (state)\nthis:\n  body (the (f l'))\n\ngoal (1 subgoal):\n 1. \\<And>l.\n       l \\<in> dom f \\<Longrightarrow> body (the (ssubst_option x v (f l)))", "note ssubst_preserves_body[OF this]"], ["proof (state)\nthis:\n  lc ?t' \\<Longrightarrow> body ([?x \\<rightarrow> ?t'] the (f l'))\n\ngoal (1 subgoal):\n 1. \\<And>l.\n       l \\<in> dom f \\<Longrightarrow> body (the (ssubst_option x v (f l)))", "from \n          this[of v x] par_beta_lc[OF \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close>]\n          \\<open>l' \\<in> dom f\\<close> ssubst_option_lem[of f x v]"], ["proof (chain)\npicking this:\n  lc v \\<Longrightarrow> body ([x \\<rightarrow> v] the (f l'))\n  lc v \\<and> lc v'\n  l' \\<in> dom f\n  \\<forall>l\\<in>dom f.\n     [x \\<rightarrow> v] the (f l) = the (ssubst_option x v (f l))", "show \"body (the (ssubst_option x v (f l')))\""], ["proof (prove)\nusing this:\n  lc v \\<Longrightarrow> body ([x \\<rightarrow> v] the (f l'))\n  lc v \\<and> lc v'\n  l' \\<in> dom f\n  \\<forall>l\\<in>dom f.\n     [x \\<rightarrow> v] the (f l) = the (ssubst_option x v (f l))\n\ngoal (1 subgoal):\n 1. body (the (ssubst_option x v (f l')))", "by auto"], ["proof (state)\nthis:\n  body (the (ssubst_option x v (f l')))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (\\<lambda>l. ssubst_option x v (f l)).\n     body (the (ssubst_option x v (f l)))\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "note intro = pbeta_Obj[OF _ \\<open>finite L\\<close> _ this]"], ["proof (state)\nthis:\n  \\<lbrakk>dom ?f' = dom (\\<lambda>l. ssubst_option x v (f l));\n   \\<forall>l\\<in>dom (\\<lambda>l. ssubst_option x v (f l)).\n      \\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t.\n             the (ssubst_option x v (f l))\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n             t \\<and>\n             the (?f' l) = \\<sigma>[s,p] t)\\<rbrakk>\n  \\<Longrightarrow> Obj (\\<lambda>l. ssubst_option x v (f l)) ?T =>\n                    Obj ?f' ?T\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "from\n        predf\n        ssubst_option_lem[of f x v]\n        ssubst_option_lem[of f' x v'] \\<open>dom f' = dom f\\<close>\n        dom_ssubstoption_lem[of x v f]\n        dom_ssubstoption_lem[of x v' f']"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f.\n     pred_cof L ([x \\<rightarrow> v] the (f l))\n      ([x \\<rightarrow> v'] the (f' l))\n  \\<forall>l\\<in>dom f.\n     [x \\<rightarrow> v] the (f l) = the (ssubst_option x v (f l))\n  \\<forall>l\\<in>dom f'.\n     [x \\<rightarrow> v'] the (f' l) = the (ssubst_option x v' (f' l))\n  dom f' = dom f\n  dom (\\<lambda>l. ssubst_option x v (f l)) = dom f\n  dom (\\<lambda>l. ssubst_option x v' (f' l)) = dom f'", "show \"[x \\<rightarrow> v] Obj f T \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] Obj f' T\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     pred_cof L ([x \\<rightarrow> v] the (f l))\n      ([x \\<rightarrow> v'] the (f' l))\n  \\<forall>l\\<in>dom f.\n     [x \\<rightarrow> v] the (f l) = the (ssubst_option x v (f l))\n  \\<forall>l\\<in>dom f'.\n     [x \\<rightarrow> v'] the (f' l) = the (ssubst_option x v' (f' l))\n  dom f' = dom f\n  dom (\\<lambda>l. ssubst_option x v (f l)) = dom f\n  dom (\\<lambda>l. ssubst_option x v' (f' l)) = dom f'\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            [x \\<rightarrow> v] the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t'' \\<and>\n            [x \\<rightarrow> v'] the (f' l) = \\<sigma>[s,p] t'')\n  \\<forall>l\\<in>dom f.\n     [x \\<rightarrow> v] the (f l) = the (ssubst_option x v (f l))\n  \\<forall>l\\<in>dom f'.\n     [x \\<rightarrow> v'] the (f' l) = the (ssubst_option x v' (f' l))\n  dom f' = dom f\n  dom (\\<lambda>l. ssubst_option x v (f l)) = dom f\n  dom (\\<lambda>l. ssubst_option x v' (f' l)) = dom f'\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T", "by (simp, intro intro[of \"(\\<lambda>l. ssubst_option x v' (f' l))\" T], auto)"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] Obj f T => [x \\<rightarrow> v'] Obj f' T\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "case (Bnd L t t')"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (\\<forall>x v v'.\n             v => v' \\<longrightarrow>\n             [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n             [x \\<rightarrow> v'] t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "note pred = this(2)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (\\<forall>x v v'.\n             v => v' \\<longrightarrow>\n             [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n             [x \\<rightarrow> v'] t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               (\\<forall>x v v'.\n                   v => v' \\<longrightarrow>\n                   [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n                   [x \\<rightarrow> v'] t'') \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x v v'.\n                            v => v' \\<longrightarrow>\n                            (\\<exists>L.\n                                finite L \\<and>\n                                pred_cof L ([x \\<rightarrow> v] t)\n                                 ([x \\<rightarrow> v'] t'))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x v v'.\n       v => v' \\<longrightarrow>\n       (\\<exists>L.\n           finite L \\<and>\n           pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       \\<exists>L.\n          finite L \\<and>\n          pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')", "fix x v v'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       \\<exists>L.\n          finite L \\<and>\n          pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')", "assume \"v \\<Rightarrow>\\<^sub>\\<beta> v'\""], ["proof (state)\nthis:\n  v => v'\n\ngoal (1 subgoal):\n 1. \\<And>x v v'.\n       v => v' \\<Longrightarrow>\n       \\<exists>L.\n          finite L \\<and>\n          pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')", "from \\<open>finite L\\<close>"], ["proof (chain)\npicking this:\n  finite L", "show \"\\<exists>L. finite L \\<and> pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\""], ["proof (prove)\nusing this:\n  finite L\n\ngoal (1 subgoal):\n 1. \\<exists>L.\n       finite L \\<and>\n       pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')", "proof (rule_tac x = \"L \\<union> {x} \\<union> FV v'\" in exI, \n          unfold pred_cof_def, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "fix s p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "assume \"s \\<notin> L\" and \"p \\<notin> L\" and \"s \\<noteq> p\""], ["proof (state)\nthis:\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "with pred"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (\\<forall>x v v'.\n             v => v' \\<longrightarrow>\n             [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n             [x \\<rightarrow> v'] t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p", "obtain t'' where\n          \"t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\" and\n          \"\\<forall>x v v'. v \\<Rightarrow>\\<^sub>\\<beta> v' \\<longrightarrow> [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] t''\" and\n          \"t' = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         (\\<forall>x v v'.\n             v => v' \\<longrightarrow>\n             [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n             [x \\<rightarrow> v'] t'') \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'';\n         \\<forall>x v v'.\n            v => v' \\<longrightarrow>\n            [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n            [x \\<rightarrow> v'] t'';\n         t' = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n     [x \\<rightarrow> v'] t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "from this(2) \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n     [x \\<rightarrow> v'] t''\n  v => v'", "have ssubst_pbeta: \"[x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] t''\""], ["proof (prove)\nusing this:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n     [x \\<rightarrow> v'] t''\n  v => v'\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n    [x \\<rightarrow> v'] t''", "by blast"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [x \\<rightarrow> v'] t''\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "assume \"s \\<noteq> x\" and \"p \\<noteq> x\""], ["proof (state)\nthis:\n  s \\<noteq> x\n  p \\<noteq> x\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "hence \"x \\<notin> FV (Fvar s)\" and \"x \\<notin> FV (Fvar p)\""], ["proof (prove)\nusing this:\n  s \\<noteq> x\n  p \\<noteq> x\n\ngoal (1 subgoal):\n 1. x \\<notin> FV (Fvar s) &&& x \\<notin> FV (Fvar p)", "by auto"], ["proof (state)\nthis:\n  x \\<notin> FV (Fvar s)\n  x \\<notin> FV (Fvar p)\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "from \n          ssubst_pbeta\n          par_beta_lc[OF \\<open>v \\<Rightarrow>\\<^sub>\\<beta> v'\\<close>] ssubst_sopen_commute[OF _ this]"], ["proof (chain)\npicking this:\n  [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [x \\<rightarrow> v'] t''\n  lc v \\<and> lc v'\n  lc ?t' \\<Longrightarrow>\n  [x \\<rightarrow> ?t'] {?n \\<rightarrow> [Fvar s,Fvar p]} ?t =\n  {?n \\<rightarrow> [Fvar s,Fvar p]} [x \\<rightarrow> ?t'] ?t", "have \"[x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> [x \\<rightarrow> v'] t''\""], ["proof (prove)\nusing this:\n  [x \\<rightarrow> v] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [x \\<rightarrow> v'] t''\n  lc v \\<and> lc v'\n  lc ?t' \\<Longrightarrow>\n  [x \\<rightarrow> ?t'] {?n \\<rightarrow> [Fvar s,Fvar p]} ?t =\n  {?n \\<rightarrow> [Fvar s,Fvar p]} [x \\<rightarrow> ?t'] ?t\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n    [x \\<rightarrow> v'] t''", "by (simp add: openz_def)"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n  [x \\<rightarrow> v'] t''\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "moreover"], ["proof (state)\nthis:\n  [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n  [x \\<rightarrow> v'] t''\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "assume \"s \\<notin> FV v'\" and \"p \\<notin> FV v'\""], ["proof (state)\nthis:\n  s \\<notin> FV v'\n  p \\<notin> FV v'\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "from \n          ssubst_sclose_commute[OF this not_sym[OF \\<open>s \\<noteq> x\\<close>] \n                                        not_sym[OF \\<open>p \\<noteq> x\\<close>]] \n          \\<open>t' = \\<sigma>[s,p] t''\\<close>"], ["proof (chain)\npicking this:\n  [x \\<rightarrow> v'] {?n \\<leftarrow> [s,p]} ?t =\n  {?n \\<leftarrow> [s,p]} [x \\<rightarrow> v'] ?t\n  t' = \\<sigma>[s,p] t''", "have \"[x \\<rightarrow> v'] t' = \\<sigma>[s,p] [x \\<rightarrow> v'] t''\""], ["proof (prove)\nusing this:\n  [x \\<rightarrow> v'] {?n \\<leftarrow> [s,p]} ?t =\n  {?n \\<leftarrow> [s,p]} [x \\<rightarrow> v'] ?t\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. [x \\<rightarrow> v'] t' = \\<sigma>[s,p] [x \\<rightarrow> v'] t''", "by (simp add: closez_def)"], ["proof (state)\nthis:\n  [x \\<rightarrow> v'] t' = \\<sigma>[s,p] [x \\<rightarrow> v'] t''\n\ngoal (1 subgoal):\n 1. \\<And>s p.\n       \\<lbrakk>finite L; s \\<noteq> x; s \\<notin> L; s \\<notin> FV v';\n        p \\<noteq> x; p \\<notin> L; p \\<notin> FV v'; s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t''.\n                            [x \\<rightarrow> v] t\\<^bsup>[Fvar\n                     s,Fvar p]\\<^esup> =>\n                            t'' \\<and>\n                            [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "ultimately"], ["proof (chain)\npicking this:\n  [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n  [x \\<rightarrow> v'] t''\n  [x \\<rightarrow> v'] t' = \\<sigma>[s,p] [x \\<rightarrow> v'] t''", "show \"\\<exists>t''. [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n  [x \\<rightarrow> v'] t''\n  [x \\<rightarrow> v'] t' = \\<sigma>[s,p] [x \\<rightarrow> v'] t''\n\ngoal (1 subgoal):\n 1. \\<exists>t''.\n       [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n       [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''", "by (rule_tac x = \"[x \\<rightarrow> v'] t''\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>t''.\n     [x \\<rightarrow> v] t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n     [x \\<rightarrow> v'] t' = \\<sigma>[s,p] t''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>L.\n     finite L \\<and>\n     pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     (\\<exists>L.\n         finite L \\<and>\n         pred_cof L ([x \\<rightarrow> v] t) ([x \\<rightarrow> v'] t'))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x v v'.\n     v => v' \\<longrightarrow>\n     [x \\<rightarrow> v] t => [x \\<rightarrow> v'] t'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma renaming_par_beta: \"t \\<Rightarrow>\\<^sub>\\<beta> t' \\<Longrightarrow> [s \\<rightarrow> Fvar sa] t \\<Rightarrow>\\<^sub>\\<beta> [s \\<rightarrow> Fvar sa] t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t => t' \\<Longrightarrow>\n    [s \\<rightarrow> Fvar sa] t => [s \\<rightarrow> Fvar sa] t'", "by (erule par_beta_ssubst, simp+)"], ["", "lemma par_beta_beta:\n  fixes l f f' u u'\n  assumes \n  \"l \\<in> dom f\" and \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\" and \"u \\<Rightarrow>\\<^sub>\\<beta> u'\" and \"lc (Obj f T)\" and \"lc u\"\n  shows \"(the(f l)\\<^bsup>[Obj f T, u]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> (the(f' l)\\<^bsup>[Obj f' T, u']\\<^esup>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from Obj_pbeta[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>]"], ["proof (chain)\npicking this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))", "obtain L where \n    \"dom f = dom f'\" and\n    \"finite L\" and\n    pred_sp: \"\\<forall>l\\<in>dom f.\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n                         \\<longrightarrow> (\\<exists>t''. the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \n                                  \\<and> the (f' l) = \\<sigma>[s,p] t'')\" and\n    \"\\<forall>l\\<in>dom f. body (the (f l))\""], ["proof (prove)\nusing this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>dom f = dom f'; finite L;\n         \\<forall>l\\<in>dom f.\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                   the (f' l) = \\<sigma>[s,p] t'');\n         \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  dom f = dom f'\n  finite L\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            the (f' l) = \\<sigma>[s,p] t'')\n  \\<forall>l\\<in>dom f. body (the (f l))\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from this(2) finite_FV[of \"Obj f T\"]"], ["proof (chain)\npicking this:\n  finite L\n  finite (FV (Obj f T))", "have fin: \"finite (L \\<union> FV (Obj f T) \\<union> FV u)\""], ["proof (prove)\nusing this:\n  finite L\n  finite (FV (Obj f T))\n\ngoal (1 subgoal):\n 1. finite (L \\<union> FV (Obj f T) \\<union> FV u)", "by simp"], ["proof (state)\nthis:\n  finite (L \\<union> FV (Obj f T) \\<union> FV u)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from exFresh_s_p_cof[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>s p.\n     s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n     p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p", "obtain s p where \n    sp: \"s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\""], ["proof (prove)\nusing this:\n  \\<exists>s p.\n     s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n     p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n        p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n        s \\<noteq> p \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "with \\<open>l \\<in> dom f\\<close>"], ["proof (chain)\npicking this:\n  l \\<in> dom f\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p", "obtain t'' where \n    \"the (f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\" and \"the (f' l) = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'';\n         the (f' l) = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using pred_sp"], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            the (f' l) = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'';\n         the (f' l) = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  the (f' l) = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from par_beta_lc[OF this(1)]"], ["proof (chain)\npicking this:\n  lc (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t''", "have \"lc t''\""], ["proof (prove)\nusing this:\n  lc (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t''\n\ngoal (1 subgoal):\n 1. lc t''", "by simp"], ["proof (state)\nthis:\n  lc t''\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from \n    sopen_sclose_eq_t[OF this] \n    \\<open>the (f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\\<close> \\<open>the(f' l) = \\<sigma>[s,p] t''\\<close>"], ["proof (chain)\npicking this:\n  {?n \\<rightarrow> [Fvar ?s,Fvar ?p]} {?n \\<leftarrow> [?s,?p]} t'' = t''\n  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  the (f' l) = \\<sigma>[s,p] t''", "have \"the (f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (f' l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>)\""], ["proof (prove)\nusing this:\n  {?n \\<rightarrow> [Fvar ?s,Fvar ?p]} {?n \\<leftarrow> [?s,?p]} t'' = t''\n  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  the (f' l) = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "by (simp add: openz_def closez_def)"], ["proof (state)\nthis:\n  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n  (the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from par_beta_ssubst[OF this] \\<open>u \\<Rightarrow>\\<^sub>\\<beta> u'\\<close>"], ["proof (chain)\npicking this:\n  ?v => ?v' \\<Longrightarrow>\n  [?x \\<rightarrow> ?v] (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [?x \\<rightarrow> ?v'] (the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  u => u'", "have \"[p \\<rightarrow> u] (the (f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> [p \\<rightarrow> u'] (the (f' l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>)\""], ["proof (prove)\nusing this:\n  ?v => ?v' \\<Longrightarrow>\n  [?x \\<rightarrow> ?v] (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [?x \\<rightarrow> ?v'] (the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  u => u'\n\ngoal (1 subgoal):\n 1. [p \\<rightarrow> u] (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n    [p \\<rightarrow> u'] (the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "by simp"], ["proof (state)\nthis:\n  [p \\<rightarrow> u] (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [p \\<rightarrow> u'] (the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "note par_beta_ssubst[OF this \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>]"], ["proof (state)\nthis:\n  [?x \\<rightarrow> Obj f\n                     T] [p \\<rightarrow> u] (the\n        (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [?x \\<rightarrow> Obj f'\n                     T] [p \\<rightarrow> u'] (the\n         (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "moreover"], ["proof (state)\nthis:\n  [?x \\<rightarrow> Obj f\n                     T] [p \\<rightarrow> u] (the\n        (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [?x \\<rightarrow> Obj f'\n                     T] [p \\<rightarrow> u'] (the\n         (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from \\<open>l \\<in> dom f\\<close> sp"], ["proof (chain)\npicking this:\n  l \\<in> dom f\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p", "have \"s \\<notin> FV (the(f l))\" and \"p \\<notin> FV (the(f l))\" and \"s \\<noteq> p\" and \"s \\<notin> FV u\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (s \\<notin> FV (the (f l)) &&& p \\<notin> FV (the (f l))) &&&\n    s \\<noteq> p &&& s \\<notin> FV u", "by force+"], ["proof (state)\nthis:\n  s \\<notin> FV (the (f l))\n  p \\<notin> FV (the (f l))\n  s \\<noteq> p\n  s \\<notin> FV u\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "note ssubst_intro[OF this]"], ["proof (state)\nthis:\n  {?n \\<rightarrow> [?s,u]} the (f l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u] {?n \\<rightarrow> [Fvar\n                         s,Fvar p]} the (f l)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "moreover"], ["proof (state)\nthis:\n  {?n \\<rightarrow> [?s,u]} the (f l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u] {?n \\<rightarrow> [Fvar\n                         s,Fvar p]} the (f l)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "from \\<open>l \\<in> dom f\\<close> \\<open>dom f = dom f'\\<close>"], ["proof (chain)\npicking this:\n  l \\<in> dom f\n  dom f = dom f'", "have \"l \\<in> dom f'\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  dom f = dom f'\n\ngoal (1 subgoal):\n 1. l \\<in> dom f'", "by force"], ["proof (state)\nthis:\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "with \n    par_beta_preserves_FV[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>]\n    par_beta_preserves_FV[OF \\<open>u \\<Rightarrow>\\<^sub>\\<beta> u'\\<close>] sp FV_option_lem[of f']"], ["proof (chain)\npicking this:\n  ?x \\<notin> FV (Obj f T) \\<Longrightarrow> ?x \\<notin> FV (Obj f' T)\n  ?x \\<notin> FV u \\<Longrightarrow> ?x \\<notin> FV u'\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n  \\<forall>l\\<in>dom f'. FV (the (f' l)) = FVoption (f' l)\n  l \\<in> dom f'", "have \"s \\<notin> FV (the (f' l))\" and \"p \\<notin> FV (the (f' l))\" and \"s \\<noteq> p\" and \"s \\<notin> FV u'\""], ["proof (prove)\nusing this:\n  ?x \\<notin> FV (Obj f T) \\<Longrightarrow> ?x \\<notin> FV (Obj f' T)\n  ?x \\<notin> FV u \\<Longrightarrow> ?x \\<notin> FV u'\n  s \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and>\n  p \\<notin> L \\<union> FV (Obj f T) \\<union> FV u \\<and> s \\<noteq> p\n  \\<forall>l\\<in>dom f'. FV (the (f' l)) = FVoption (f' l)\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. (s \\<notin> FV (the (f' l)) &&& p \\<notin> FV (the (f' l))) &&&\n    s \\<noteq> p &&& s \\<notin> FV u'", "by auto"], ["proof (state)\nthis:\n  s \\<notin> FV (the (f' l))\n  p \\<notin> FV (the (f' l))\n  s \\<noteq> p\n  s \\<notin> FV u'\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "note ssubst_intro[OF this]"], ["proof (state)\nthis:\n  {?n \\<rightarrow> [?s,u']} the (f' l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u'] {?n \\<rightarrow> [Fvar\n                          s,Fvar p]} the (f' l)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "ultimately"], ["proof (chain)\npicking this:\n  [?x \\<rightarrow> Obj f\n                     T] [p \\<rightarrow> u] (the\n        (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [?x \\<rightarrow> Obj f'\n                     T] [p \\<rightarrow> u'] (the\n         (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<rightarrow> [?s,u]} the (f l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u] {?n \\<rightarrow> [Fvar\n                         s,Fvar p]} the (f l)\n  {?n \\<rightarrow> [?s,u']} the (f' l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u'] {?n \\<rightarrow> [Fvar\n                          s,Fvar p]} the (f' l)", "show \"the (f l)\\<^bsup>[Obj f T, u]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (f' l)\\<^bsup>[Obj f' T, u']\\<^esup>)\""], ["proof (prove)\nusing this:\n  [?x \\<rightarrow> Obj f\n                     T] [p \\<rightarrow> u] (the\n        (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>) =>\n  [?x \\<rightarrow> Obj f'\n                     T] [p \\<rightarrow> u'] (the\n         (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<rightarrow> [?s,u]} the (f l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u] {?n \\<rightarrow> [Fvar\n                         s,Fvar p]} the (f l)\n  {?n \\<rightarrow> [?s,u']} the (f' l) =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> u'] {?n \\<rightarrow> [Fvar\n                          s,Fvar p]} the (f' l)\n\ngoal (1 subgoal):\n 1. the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n    (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)", "by (simp add: openz_def closez_def)"], ["proof (state)\nthis:\n  the (f l)\\<^bsup>[Obj f T,u]\\<^esup> =>\n  (the (f' l)\\<^bsup>[Obj f' T,u']\\<^esup>)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Inclusions\\<close>"], ["", "text \\<open>\\<open>beta \\<subseteq> par_beta \\<subseteq> beta^*\\<close> \\medskip\\<close>"], ["", "lemma beta_subset_par_beta: \"beta \\<le> par_beta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (->) \\<le> (=>)", "proof (clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x -> y \\<Longrightarrow> x => y", "define pred_cof\n    where \"pred_cof L t t' \\<longleftrightarrow>\n      (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> (\\<exists>t''. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t''))\"\n    for L t t'"], ["proof (state)\nthis:\n  pred_cof ?L ?t ?t' =\n  (\\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          ?t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          ?t' = \\<sigma>[s,p] t''))\n\ngoal (1 subgoal):\n 1. \\<And>x y. x -> y \\<Longrightarrow> x => y", "fix t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x -> y \\<Longrightarrow> x => y", "assume \"t \\<rightarrow>\\<^sub>\\<beta> t'\""], ["proof (state)\nthis:\n  t -> t'\n\ngoal (1 subgoal):\n 1. \\<And>x y. x -> y \\<Longrightarrow> x => y", "thus \"t \\<Rightarrow>\\<^sub>\\<beta> t'\""], ["proof (prove)\nusing this:\n  t -> t'\n\ngoal (1 subgoal):\n 1. t => t'", "proof \n    (induct\n      taking: \"\\<lambda>t t'. body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\"\n      rule: beta_induct)"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u => Call t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call u l t => Call u l t'\n 3. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 4. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 5. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 6. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 7. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 8. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case CallL"], ["proof (state)\nthis:\n  t_ -> t'_\n  t_ => t'_\n  lc u_\n\ngoal (8 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u => Call t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call u l t => Call u l t'\n 3. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 4. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 5. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 6. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 7. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 8. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "thus ?case"], ["proof (prove)\nusing this:\n  t_ -> t'_\n  t_ => t'_\n  lc u_\n\ngoal (1 subgoal):\n 1. Call t_ l_ u_ => Call t'_ l_ u_", "by (simp add: par_beta_refl)"], ["proof (state)\nthis:\n  Call t_ l_ u_ => Call t'_ l_ u_\n\ngoal (7 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call u l t => Call u l t'\n 2. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 3. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 4. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 5. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 6. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call u l t => Call u l t'\n 2. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 3. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 4. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 5. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 6. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case CallR"], ["proof (state)\nthis:\n  t_ -> t'_\n  t_ => t'_\n  lc u_\n\ngoal (7 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call u l t => Call u l t'\n 2. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 3. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 4. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 5. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 6. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "thus ?case"], ["proof (prove)\nusing this:\n  t_ -> t'_\n  t_ => t'_\n  lc u_\n\ngoal (1 subgoal):\n 1. Call u_ l_ t_ => Call u_ l_ t'_", "by (simp add: par_beta_refl)"], ["proof (state)\nthis:\n  Call u_ l_ t_ => Call u_ l_ t'_\n\ngoal (6 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 3. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 4. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 5. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 3. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 4. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 5. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case beta"], ["proof (state)\nthis:\n  l_ \\<in> dom f_\n  lc (Obj f_ T_)\n  lc a_\n\ngoal (6 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 3. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 4. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 5. \\<And>l f T a.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); lc a\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l a =>\n                         (the (f l)\\<^bsup>[Obj f T,a]\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "thus ?case"], ["proof (prove)\nusing this:\n  l_ \\<in> dom f_\n  lc (Obj f_ T_)\n  lc a_\n\ngoal (1 subgoal):\n 1. Call (Obj f_ T_) l_ a_ => (the (f_ l_)\\<^bsup>[Obj f_ T_,a_]\\<^esup>)", "by (simp add: par_beta_refl)"], ["proof (state)\nthis:\n  Call (Obj f_ T_) l_ a_ => (the (f_ l_)\\<^bsup>[Obj f_ T_,a_]\\<^esup>)\n\ngoal (5 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 3. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 4. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 3. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 4. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case UpdL"], ["proof (state)\nthis:\n  t_ -> t'_\n  t_ => t'_\n  body u_\n\ngoal (5 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>t -> t'; t => t'; body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u => Upd t' l u\n 2. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 3. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 4. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      par_beta_lc[OF this(2)] this(2) \n      par_beta_body_refl[OF this(3)] this(3)"], ["proof (chain)\npicking this:\n  lc t_ \\<and> lc t'_\n  t_ => t'_\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t'.\n             u_\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n             u_ = \\<sigma>[s,p] t'))\n  body u_", "show ?case"], ["proof (prove)\nusing this:\n  lc t_ \\<and> lc t'_\n  t_ => t'_\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t'.\n             u_\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n             u_ = \\<sigma>[s,p] t'))\n  body u_\n\ngoal (1 subgoal):\n 1. Upd t_ l_ u_ => Upd t'_ l_ u_", "by auto"], ["proof (state)\nthis:\n  Upd t_ l_ u_ => Upd t'_ l_ u_\n\ngoal (4 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 2. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 3. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 2. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 3. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (UpdR t t' u l)"], ["proof (state)\nthis:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n  lc u\n\ngoal (4 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 2. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 3. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from this(1)"], ["proof (chain)\npicking this:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')", "obtain L where\n      \"finite L\" and \"pred_cof L t t'\" and \"body t\""], ["proof (prove)\nusing this:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L; pred_cof L t t'; body t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  pred_cof L t t'\n  body t\n\ngoal (4 subgoals):\n 1. \\<And>t t' u l.\n       \\<lbrakk>body t \\<and>\n                body t' \\<and>\n                (\\<exists>L. finite L \\<and> pred_cof L t t');\n        lc u\\<rbrakk>\n       \\<Longrightarrow> Upd u l t => Upd u l t'\n 2. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 3. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      this(2) pbeta_Upd[OF par_beta_refl[OF \\<open>lc u\\<close>] \\<open>lc u\\<close> this(1) _ this(3)]"], ["proof (chain)\npicking this:\n  pred_cof L t t'\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ?u' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd u ?l t => Upd u ?l ?u'", "show ?case"], ["proof (prove)\nusing this:\n  pred_cof L t t'\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ?u' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd u ?l t => Upd u ?l ?u'\n\ngoal (1 subgoal):\n 1. Upd u l t => Upd u l t'", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ?u' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd u ?l t => Upd u ?l ?u'\n\ngoal (1 subgoal):\n 1. Upd u l t => Upd u l t'", "by auto"], ["proof (state)\nthis:\n  Upd u l t => Upd u l t'\n\ngoal (3 subgoals):\n 1. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 2. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 2. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Upd l f T t)"], ["proof (state)\nthis:\n  l \\<in> dom f\n  lc (Obj f T)\n  body t\n\ngoal (3 subgoals):\n 1. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 2. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from par_beta_body_refl[OF \\<open>body t\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t'.\n             t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n             t = \\<sigma>[s,p] t'))", "obtain L where\n      \"finite L\" and \n      \"\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \n        \\<longrightarrow> (\\<exists>t'. t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> t = \\<sigma>[s,p] t')\""], ["proof (prove)\nusing this:\n  \\<exists>L.\n     finite L \\<and>\n     (\\<forall>s p.\n         s \\<notin> L \\<and>\n         p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t'.\n             t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n             t = \\<sigma>[s,p] t'))\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t'.\n                t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                t = \\<sigma>[s,p] t')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t'.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and> t = \\<sigma>[s,p] t')\n\ngoal (3 subgoals):\n 1. \\<And>l f T t.\n       \\<lbrakk>l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n 2. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      pbeta_Upd'[OF par_beta_refl[OF \\<open>lc (Obj f T)\\<close>] this\n                    \\<open>l \\<in> dom f\\<close> \\<open>lc (Obj f T)\\<close> \\<open>body t\\<close>]"], ["proof (chain)\npicking this:\n  Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T", "show ?case"], ["proof (prove)\nusing this:\n  Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n\ngoal (1 subgoal):\n 1. Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T", "by assumption"], ["proof (state)\nthis:\n  Upd (Obj f T) l t => Obj (f(l \\<mapsto> t)) T\n\ngoal (2 subgoals):\n 1. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Obj l f t t' T)"], ["proof (state)\nthis:\n  l \\<in> dom f\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n  \\<forall>l\\<in>dom f. body (the (f l))\n\ngoal (2 subgoals):\n 1. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "note cof = this(2) and body = this(3)"], ["proof (state)\nthis:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n  \\<forall>l\\<in>dom f. body (the (f l))\n\ngoal (2 subgoals):\n 1. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from cof"], ["proof (chain)\npicking this:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')", "obtain L where \n      \"body t\" and \"finite L\" and \"pred_cof L t t'\""], ["proof (prove)\nusing this:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>body t; finite L; pred_cof L t t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  body t\n  finite L\n  pred_cof L t t'\n\ngoal (2 subgoals):\n 1. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from body"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f. body (the (f l))", "have \"lc (Obj f T)\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f. body (the (f l))\n\ngoal (1 subgoal):\n 1. lc (Obj f T)", "by (simp add: lc_obj)"], ["proof (state)\nthis:\n  lc (Obj f T)\n\ngoal (2 subgoals):\n 1. \\<And>l f t t' T.\n       \\<lbrakk>l \\<in> dom f;\n        body t \\<and>\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> Obj (f(l \\<mapsto> t)) T =>\n                         Obj (f(l \\<mapsto> t')) T\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      Obj_pbeta_subst[OF \\<open>finite L\\<close> _ par_beta_refl[OF this] this \\<open>body t\\<close>]\n      \\<open>pred_cof L t t'\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Obj (f(?l \\<mapsto> t)) T => Obj (f(?l \\<mapsto> ?t')) T\n  pred_cof L t t'", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Obj (f(?l \\<mapsto> t)) T => Obj (f(?l \\<mapsto> ?t')) T\n  pred_cof L t t'\n\ngoal (1 subgoal):\n 1. Obj (f(l \\<mapsto> t)) T => Obj (f(l \\<mapsto> t')) T", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Obj (f(?l \\<mapsto> t)) T => Obj (f(?l \\<mapsto> ?t')) T\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. Obj (f(l \\<mapsto> t)) T => Obj (f(l \\<mapsto> t')) T", "by auto"], ["proof (state)\nthis:\n  Obj (f(l \\<mapsto> t)) T => Obj (f(l \\<mapsto> t')) T\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Bnd L t t')"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "note pred = this(2)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \\<open>finite L\\<close> exFresh_s_p_cof[of \"L \\<union> FV t\"]"], ["proof (chain)\npicking this:\n  finite L\n  finite (L \\<union> FV t) \\<Longrightarrow>\n  \\<exists>s p.\n     s \\<notin> L \\<union> FV t \\<and>\n     p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p", "obtain s p where \n      \"s \\<notin> L\" and \"p \\<notin> L\" and \"s \\<noteq> p\" and\n      \"s \\<notin> FV t\" and \"p \\<notin> FV t\""], ["proof (prove)\nusing this:\n  finite L\n  finite (L \\<union> FV t) \\<Longrightarrow>\n  \\<exists>s p.\n     s \\<notin> L \\<union> FV t \\<and>\n     p \\<notin> L \\<union> FV t \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        \\<lbrakk>s \\<notin> L; p \\<notin> L; s \\<noteq> p; s \\<notin> FV t;\n         p \\<notin> FV t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  s \\<notin> FV t\n  p \\<notin> FV t\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "with pred"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  s \\<notin> FV t\n  p \\<notin> FV t", "obtain t'' where \n      \"t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\" and \"t' = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  s \\<notin> L\n  p \\<notin> L\n  s \\<noteq> p\n  s \\<notin> FV t\n  p \\<notin> FV t\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'';\n         t' = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  t' = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      par_beta_lc[OF this(1)] this(2) lc_body[OF _ \\<open>s \\<noteq> p\\<close>]"], ["proof (chain)\npicking this:\n  lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t''\n  t' = \\<sigma>[s,p] t''\n  lc ?t \\<Longrightarrow> body \\<sigma>[s,p] ?t", "have \"body \\<sigma>[s,p](t\\<^bsup>[Fvar s, Fvar p]\\<^esup>)\" and \"body t'\""], ["proof (prove)\nusing this:\n  lc (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc t''\n  t' = \\<sigma>[s,p] t''\n  lc ?t \\<Longrightarrow> body \\<sigma>[s,p] ?t\n\ngoal (1 subgoal):\n 1. body \\<sigma>[s,p] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) &&& body t'", "by auto"], ["proof (state)\nthis:\n  body \\<sigma>[s,p] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  body t'\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from this(1) sclose_sopen_eq_t[OF \\<open>s \\<notin> FV t\\<close> \\<open>p \\<notin> FV t\\<close> \\<open>s \\<noteq> p\\<close>]"], ["proof (chain)\npicking this:\n  body \\<sigma>[s,p] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} t = t", "have \"body t\""], ["proof (prove)\nusing this:\n  body \\<sigma>[s,p] (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  {?n \\<leftarrow> [s,p]} {?n \\<rightarrow> [Fvar s,Fvar p]} t = t\n\ngoal (1 subgoal):\n 1. body t", "by (simp add: openz_def closez_def)"], ["proof (state)\nthis:\n  body t\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t \\<and>\n                         body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "with \\<open>body t'\\<close> \\<open>finite L\\<close> pred"], ["proof (chain)\npicking this:\n  body t'\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  body t", "show ?case"], ["proof (prove)\nusing this:\n  body t'\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  body t\n\ngoal (1 subgoal):\n 1. body t \\<and>\n    body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  body t'\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> -> t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  body t\n\ngoal (1 subgoal):\n 1. body t \\<and>\n    body t' \\<and>\n    (\\<exists>L.\n        finite L \\<and>\n        (\\<forall>s p.\n            s \\<notin> L \\<and>\n            p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t''.\n                t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                t' = \\<sigma>[s,p] t'')))", "by (simp, rule_tac x = L in exI, auto)"], ["proof (state)\nthis:\n  body t \\<and> body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t => t'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma par_beta_subset_beta: \"par_beta \\<le> beta^**\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (=>) \\<le> (->>)", "proof (rule predicate2I)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x => y \\<Longrightarrow> x ->> y", "define pred_cof\n    where \"pred_cof L t t' \\<longleftrightarrow>\n      (\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> (\\<exists>t''. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* t'' \\<and> t' = \\<sigma>[s,p] t''))\"\n    for L t t'"], ["proof (state)\nthis:\n  pred_cof ?L ?t ?t' =\n  (\\<forall>s p.\n      s \\<notin> ?L \\<and>\n      p \\<notin> ?L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          ?t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n          ?t' = \\<sigma>[s,p] t''))\n\ngoal (1 subgoal):\n 1. \\<And>x y. x => y \\<Longrightarrow> x ->> y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x => y \\<Longrightarrow> x ->> y", "assume \"x \\<Rightarrow>\\<^sub>\\<beta> y\""], ["proof (state)\nthis:\n  x => y\n\ngoal (1 subgoal):\n 1. \\<And>x y. x => y \\<Longrightarrow> x ->> y", "thus \"x \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  x => y\n\ngoal (1 subgoal):\n 1. x ->> y", "proof (induct \n      taking: \"\\<lambda>t t'. body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\"\n      rule: pbeta_induct)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>x. Fvar x ->> Fvar x\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t; u => u'; u ->> u'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u ->> Call t' l u'\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case Fvar"], ["proof (state)\nthis:\n  \n\ngoal (7 subgoals):\n 1. \\<And>x. Fvar x ->> Fvar x\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t; u => u'; u ->> u'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u ->> Call t' l u'\n 3. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 4. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 5. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 6. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 7. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Fvar x_ ->> Fvar x_", "by simp"], ["proof (state)\nthis:\n  Fvar x_ ->> Fvar x_\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t; u => u'; u ->> u'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u ->> Call t' l u'\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t; u => u'; u ->> u'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u ->> Call t' l u'\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case Call"], ["proof (state)\nthis:\n  t_ => t'_\n  t_ ->> t'_\n  lc t_\n  u_ => u'_\n  u_ ->> u'_\n  lc u_\n\ngoal (6 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t; u => u'; u ->> u'; lc u\\<rbrakk>\n       \\<Longrightarrow> Call t l u ->> Call t' l u'\n 2. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 3. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 4. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 5. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 6. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "thus ?case"], ["proof (prove)\nusing this:\n  t_ => t'_\n  t_ ->> t'_\n  lc t_\n  u_ => u'_\n  u_ ->> u'_\n  lc u_\n\ngoal (1 subgoal):\n 1. Call t_ l_ u_ ->> Call t'_ l_ u'_", "by auto"], ["proof (state)\nthis:\n  Call t_ l_ u_ ->> Call t'_ l_ u'_\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Upd t t' l u u')"], ["proof (state)\nthis:\n  t => t'\n  t ->> t'\n  lc t\n  body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u')\n  body u\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from this(4)"], ["proof (chain)\npicking this:\n  body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u')", "obtain L where\n      \"finite L\" and \"pred_cof L u u'\""], ["proof (prove)\nusing this:\n  body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u')\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L; pred_cof L u u'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  pred_cof L u u'\n\ngoal (5 subgoals):\n 1. \\<And>t t' l u u'.\n       \\<lbrakk>t => t'; t ->> t'; lc t;\n        body u' \\<and> (\\<exists>L. finite L \\<and> pred_cof L u u');\n        body u\\<rbrakk>\n       \\<Longrightarrow> Upd t l u ->> Upd t' l u'\n 2. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 3. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 4. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 5. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      this(2) \n      rtrancl_beta_Upd[OF \\<open>t \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* t'\\<close> this(1) _ \\<open>lc t\\<close> \\<open>body u\\<close>]"], ["proof (chain)\npicking this:\n  pred_cof L u u'\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd t ?l u ->> Upd t' ?l ?t'", "show ?case"], ["proof (prove)\nusing this:\n  pred_cof L u u'\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd t ?l u ->> Upd t' ?l ?t'\n\ngoal (1 subgoal):\n 1. Upd t l u ->> Upd t' l u'", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         u' = \\<sigma>[s,p] t'')\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd t ?l u ->> Upd t' ?l ?t'\n\ngoal (1 subgoal):\n 1. Upd t l u ->> Upd t' l u'", "by simp"], ["proof (state)\nthis:\n  Upd t l u ->> Upd t' l u'\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Upd' f f' T t t' l)"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  Obj f T ->> Obj f' T\n  body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n  l \\<in> dom f\n  lc (Obj f T)\n  body t\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from this(3)"], ["proof (chain)\npicking this:\n  body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')", "obtain L where\n      \"body t'\" and \"finite L\" and \"pred_cof L t t'\""], ["proof (prove)\nusing this:\n  body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>body t'; finite L; pred_cof L t t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  body t'\n  finite L\n  pred_cof L t t'\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      this(3)\n      rtrancl_beta_Upd[OF \\<open>Obj f T \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* Obj f' T\\<close> \\<open>finite L\\<close> _\n                          \\<open>lc (Obj f T)\\<close> \\<open>body t\\<close>]"], ["proof (chain)\npicking this:\n  pred_cof L t t'\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd (Obj f T) ?l t ->> Upd (Obj f' T) ?l ?t'", "have rtranclp: \"Upd (Obj f T) l t \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* Upd (Obj f' T) l t'\""], ["proof (prove)\nusing this:\n  pred_cof L t t'\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd (Obj f T) ?l t ->> Upd (Obj f' T) ?l ?t'\n\ngoal (1 subgoal):\n 1. Upd (Obj f T) l t ->> Upd (Obj f' T) l t'", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         ?t' = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Upd (Obj f T) ?l t ->> Upd (Obj f' T) ?l ?t'\n\ngoal (1 subgoal):\n 1. Upd (Obj f T) l t ->> Upd (Obj f' T) l t'", "by simp"], ["proof (state)\nthis:\n  Upd (Obj f T) l t ->> Upd (Obj f' T) l t'\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      Obj_pbeta[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>] \\<open>l \\<in> dom f\\<close> \n      par_beta_lc[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>]"], ["proof (chain)\npicking this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n  l \\<in> dom f\n  lc (Obj f T) \\<and> lc (Obj f' T)", "have \"l \\<in> dom f'\" and \"lc (Obj f' T)\""], ["proof (prove)\nusing this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n  l \\<in> dom f\n  lc (Obj f T) \\<and> lc (Obj f' T)\n\ngoal (1 subgoal):\n 1. l \\<in> dom f' &&& lc (Obj f' T)", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f'\n  lc (Obj f' T)\n\ngoal (4 subgoals):\n 1. \\<And>f f' T t t' l.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T;\n        body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n 2. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 3. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 4. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from beta_Upd[OF this \\<open>body t'\\<close>] rtranclp"], ["proof (chain)\npicking this:\n  Upd (Obj f' T) l t' -> Obj (f'(l \\<mapsto> t')) T\n  Upd (Obj f T) l t ->> Upd (Obj f' T) l t'", "show ?case"], ["proof (prove)\nusing this:\n  Upd (Obj f' T) l t' -> Obj (f'(l \\<mapsto> t')) T\n  Upd (Obj f T) l t ->> Upd (Obj f' T) l t'\n\ngoal (1 subgoal):\n 1. Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T", "by simp"], ["proof (state)\nthis:\n  Upd (Obj f T) l t ->> Obj (f'(l \\<mapsto> t')) T\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Obj f f' T)"], ["proof (state)\nthis:\n  dom f' = dom f\n  \\<forall>l\\<in>dom f. body (the (f l))\n  \\<forall>l\\<in>dom f.\n     body (the (f' l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "note body = this(2) and pred = this(3)"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom f. body (the (f l))\n  \\<forall>l\\<in>dom f.\n     body (the (f' l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "define pred_bnd\n      where \"pred_bnd s p b b' l \\<longleftrightarrow> (\\<exists>t''. the b\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* t'' \\<and> the b' = \\<sigma>[s,p] t'')\"\n      for s p b b' and l::Label"], ["proof (state)\nthis:\n  pred_bnd ?s ?p ?b ?b' ?l =\n  (\\<exists>t''.\n      the ?b\\<^bsup>[Fvar ?s,Fvar ?p]\\<^esup> ->> t'' \\<and>\n      the ?b' = \\<sigma>[?s,?p] t'')\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      pred \\<open>dom f' = dom f\\<close> fmap_ex_cof2[of f' f pred_bnd]"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f.\n     body (the (f' l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\n  dom f' = dom f\n  \\<lbrakk>dom f' = dom f;\n   \\<forall>l\\<in>dom f.\n      \\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             pred_bnd s p (f l) (f' l) l)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L \\<and>\n                              p \\<notin> L \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              pred_bnd s p (f l) (f' l) l)", "obtain L where\n      \"finite L\" and \n      \"\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> pred_bnd s p (f l) (f' l) l\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     body (the (f' l)) \\<and>\n     (\\<exists>L. finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\n  dom f' = dom f\n  \\<lbrakk>dom f' = dom f;\n   \\<forall>l\\<in>dom f.\n      \\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             pred_bnd s p (f l) (f' l) l)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L \\<and>\n                              p \\<notin> L \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              pred_bnd s p (f l) (f' l) l)\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>l\\<in>dom f.\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               pred_bnd s p (f l) (f' l) l\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding pred_cof_def pred_bnd_def"], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     body (the (f' l)) \\<and>\n     (\\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t''.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n                 the (f' l) = \\<sigma>[s,p] t'')))\n  dom f' = dom f\n  \\<lbrakk>dom f' = dom f;\n   \\<forall>l\\<in>dom f.\n      \\<exists>L.\n         finite L \\<and>\n         (\\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t''.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n                 the (f' l) = \\<sigma>[s,p] t''))\\<rbrakk>\n  \\<Longrightarrow> \\<exists>L.\n                       finite L \\<and>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L \\<and>\n                              p \\<notin> L \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              (\\<exists>t''.\n                                  the (f\n  l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->>\n                                  t'' \\<and>\n                                  the (f' l) = \\<sigma>[s,p] t''))\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        \\<lbrakk>finite L;\n         \\<forall>l\\<in>dom f.\n            \\<forall>s p.\n               s \\<notin> L \\<and>\n               p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t''.\n                   the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n                   the (f' l) = \\<sigma>[s,p] t'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite L\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        pred_bnd s p (f l) (f' l) l\n\ngoal (3 subgoals):\n 1. \\<And>f f' T.\n       \\<lbrakk>dom f' = dom f; \\<forall>l\\<in>dom f. body (the (f l));\n        \\<forall>l\\<in>dom f.\n           body (the (f' l)) \\<and>\n           (\\<exists>L.\n               finite L \\<and> pred_cof L (the (f l)) (the (f' l)))\\<rbrakk>\n       \\<Longrightarrow> Obj f T ->> Obj f' T\n 2. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 3. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      this(2)\n      rtrancl_beta_obj_n[OF \\<open>finite L\\<close> _ sym[OF \\<open>dom f' = dom f\\<close>] body]"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        pred_bnd s p (f l) (f' l) l\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n            the (f' l) = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Obj f ?T ->> Obj f' ?T", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        pred_bnd s p (f l) (f' l) l\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n            the (f' l) = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Obj f ?T ->> Obj f' ?T\n\ngoal (1 subgoal):\n 1. Obj f T ->> Obj f' T", "unfolding pred_bnd_def"], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n            the (f' l) = \\<sigma>[s,p] t'')\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n            the (f' l) = \\<sigma>[s,p] t'') \\<Longrightarrow>\n  Obj f ?T ->> Obj f' ?T\n\ngoal (1 subgoal):\n 1. Obj f T ->> Obj f' T", "by simp"], ["proof (state)\nthis:\n  Obj f T ->> Obj f' T\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (beta f f' T l p p')"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  Obj f T ->> Obj f' T\n  lc (Obj f T)\n  l \\<in> dom f\n  p => p'\n  p ->> p'\n  lc p\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "note \n      rtrancl_beta_Call[OF \\<open>Obj f T \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* Obj f' T\\<close> \\<open>lc (Obj f T)\\<close> \n                           \\<open>p \\<rightarrow>\\<^sub>\\<beta>\\<^sup>* p'\\<close> \\<open>lc p\\<close>]"], ["proof (state)\nthis:\n  Call (Obj f T) ?l p ->> Call (Obj f' T) ?l p'\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "moreover"], ["proof (state)\nthis:\n  Call (Obj f T) ?l p ->> Call (Obj f' T) ?l p'\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from \n      Obj_pbeta[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>] \\<open>l \\<in> dom f\\<close> \n      par_beta_lc[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close>]\n      par_beta_lc[OF \\<open>p \\<Rightarrow>\\<^sub>\\<beta> p'\\<close>]"], ["proof (chain)\npicking this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n  l \\<in> dom f\n  lc (Obj f T) \\<and> lc (Obj f' T)\n  lc p \\<and> lc p'", "have \"l \\<in> dom f'\" and \"lc (Obj f' T)\" and \"lc p'\""], ["proof (prove)\nusing this:\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n  l \\<in> dom f\n  lc (Obj f T) \\<and> lc (Obj f' T)\n  lc p \\<and> lc p'\n\ngoal (1 subgoal):\n 1. l \\<in> dom f' &&& lc (Obj f' T) &&& lc p'", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f'\n  lc (Obj f' T)\n  lc p'\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "note beta.beta[OF this]"], ["proof (state)\nthis:\n  Call (Obj f' T) l p' -> (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal (2 subgoals):\n 1. \\<And>f f' T l p p'.\n       \\<lbrakk>Obj f T => Obj f' T; Obj f T ->> Obj f' T; lc (Obj f T);\n        l \\<in> dom f; p => p'; p ->> p'; lc p\\<rbrakk>\n       \\<Longrightarrow> Call (Obj f T) l p ->>\n                         (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n 2. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "ultimately"], ["proof (chain)\npicking this:\n  Call (Obj f T) ?l p ->> Call (Obj f' T) ?l p'\n  Call (Obj f' T) l p' -> (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "show ?case"], ["proof (prove)\nusing this:\n  Call (Obj f T) ?l p ->> Call (Obj f' T) ?l p'\n  Call (Obj f' T) l p' -> (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal (1 subgoal):\n 1. Call (Obj f T) l p ->> (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)", "by (auto simp: rtranclp.rtrancl_into_rtrancl[of _ _ \"Call (Obj f' T) l p'\"])"], ["proof (state)\nthis:\n  Call (Obj f T) l p ->> (the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "case (Bnd L t t')"], ["proof (state)\nthis:\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "note pred = this(2)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "hence \"pred_cof L t t'\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. pred_cof L t t'", "unfolding pred_cof_def"], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<forall>s p.\n       s \\<notin> L \\<and>\n       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n       (\\<exists>t''.\n           t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n           t' = \\<sigma>[s,p] t'')", "by blast"], ["proof (state)\nthis:\n  pred_cof L t t'\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "moreover"], ["proof (state)\nthis:\n  pred_cof L t t'\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "from pred \\<open>finite L\\<close> par_beta_body[of L t t']"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  finite L\n  \\<lbrakk>finite L;\n   \\<forall>s p.\n      s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          t' = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> body t \\<and> body t'", "have \"body t'\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n         t' = \\<sigma>[s,p] t'')\n  finite L\n  \\<lbrakk>finite L;\n   \\<forall>s p.\n      s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n      (\\<exists>t''.\n          t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          t' = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> body t \\<and> body t'\n\ngoal (1 subgoal):\n 1. body t'", "by blast"], ["proof (state)\nthis:\n  body t'\n\ngoal (1 subgoal):\n 1. \\<And>L t t'.\n       \\<lbrakk>finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> ->> t'' \\<and>\n               t' = \\<sigma>[s,p] t'')\\<rbrakk>\n       \\<Longrightarrow> body t' \\<and>\n                         (\\<exists>L. finite L \\<and> pred_cof L t t')", "ultimately"], ["proof (chain)\npicking this:\n  pred_cof L t t'\n  body t'", "show ?case"], ["proof (prove)\nusing this:\n  pred_cof L t t'\n  body t'\n\ngoal (1 subgoal):\n 1. body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')", "using \\<open>finite L\\<close>"], ["proof (prove)\nusing this:\n  pred_cof L t t'\n  body t'\n  finite L\n\ngoal (1 subgoal):\n 1. body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')", "by auto"], ["proof (state)\nthis:\n  body t' \\<and> (\\<exists>L. finite L \\<and> pred_cof L t t')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x ->> y\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Confluence (directly)\\<close>"], ["", "(***Main result: Confluence of beta relation for Sigma calculus              ***)\n(*** by diamond property of parallel reduction and beta <= par_beta <= beta^* ***)"], ["", "lemma diamond_binder:\n  fixes L1 L2 t ta tb\n  assumes \n  \"finite L1\"  and\n  pred_L1: \"\\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p\n              \\<longrightarrow> (\\<exists>t'. (t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \n                     \\<and> (\\<forall>z. (t\\<^bsup>[Fvar s, Fvar  p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z) \\<longrightarrow> (\\<exists>u. t' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u))) \n                     \\<and> ta = \\<sigma>[s,p]t')\" and\n  \"finite L2\" and\n  pred_L2: \"\\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n              \\<longrightarrow> (\\<exists>t'. t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> tb = \\<sigma>[s,p]t')\"\n  shows\n  \"\\<exists>L'. finite L' \n      \\<and> (\\<exists>t''. (\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                  \\<longrightarrow> (\\<exists>u. ta\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> t'' = \\<sigma>[s,p]u))\n             \\<and> (\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                  \\<longrightarrow> (\\<exists>u. tb\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> t'' = \\<sigma>[s,p]u)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "from \\<open>finite L1\\<close> \\<open>finite L2\\<close>"], ["proof (chain)\npicking this:\n  finite L1\n  finite L2", "have \"finite (L1 \\<union> L2)\""], ["proof (prove)\nusing this:\n  finite L1\n  finite L2\n\ngoal (1 subgoal):\n 1. finite (L1 \\<union> L2)", "by simp"], ["proof (state)\nthis:\n  finite (L1 \\<union> L2)\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "from exFresh_s_p_cof[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>s p.\n     s \\<notin> L1 \\<union> L2 \\<and>\n     p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p", "obtain s p where sp: \"s \\<notin> L1 \\<union> L2 \\<and> p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\""], ["proof (prove)\nusing this:\n  \\<exists>s p.\n     s \\<notin> L1 \\<union> L2 \\<and>\n     p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        s \\<notin> L1 \\<union> L2 \\<and>\n        p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "with pred_L1"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> L1 \\<and>\n     p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t'.\n         (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n          (\\<forall>z.\n              t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n              (\\<exists>u. t' => u \\<and> z => u))) \\<and>\n         ta = \\<sigma>[s,p] t')\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p", "obtain t' where \n    \"t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'\" and \n    \"\\<forall>z. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z \\<longrightarrow> (\\<exists>u. t' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)\" and\n    \"ta = \\<sigma>[s,p] t'\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> L1 \\<and>\n     p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t'.\n         (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n          (\\<forall>z.\n              t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n              (\\<exists>u. t' => u \\<and> z => u))) \\<and>\n         ta = \\<sigma>[s,p] t')\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>t'.\n        \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t';\n         \\<forall>z.\n            t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n            (\\<exists>u. t' => u \\<and> z => u);\n         ta = \\<sigma>[s,p] t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'\n  \\<forall>z.\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n     (\\<exists>u. t' => u \\<and> z => u)\n  ta = \\<sigma>[s,p] t'\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "from sp pred_L2"], ["proof (chain)\npicking this:\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> L2 \\<and>\n     p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t'.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n         tb = \\<sigma>[s,p] t')", "obtain t'' where \"t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\" and \"tb = \\<sigma>[s,p] t''\""], ["proof (prove)\nusing this:\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> L2 \\<and>\n     p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t'.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n         tb = \\<sigma>[s,p] t')\n\ngoal (1 subgoal):\n 1. (\\<And>t''.\n        \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'';\n         tb = \\<sigma>[s,p] t''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n  tb = \\<sigma>[s,p] t''\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "from \\<open>\\<forall>z. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z \\<longrightarrow> (\\<exists>u. t' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)\\<close> this(1)"], ["proof (chain)\npicking this:\n  \\<forall>z.\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n     (\\<exists>u. t' => u \\<and> z => u)\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''", "obtain u where \"t' \\<Rightarrow>\\<^sub>\\<beta> u\" and \"t'' \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  \\<forall>z.\n     t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n     (\\<exists>u. t' => u \\<and> z => u)\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t''\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>t' => u; t'' => u\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t' => u\n  t'' => u\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "from \\<open>finite L1\\<close> \\<open>finite L2\\<close>"], ["proof (chain)\npicking this:\n  finite L1\n  finite L2", "have \"finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})\""], ["proof (prove)\nusing this:\n  finite L1\n  finite L2\n\ngoal (1 subgoal):\n 1. finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})", "by simp"], ["proof (state)\nthis:\n  finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "moreover"], ["proof (state)\nthis:\n  finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "{"], ["proof (state)\nthis:\n  finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "fix x :: sterm and y :: sterm"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "assume \"t\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> y\" and \"x = \\<sigma>[s,p] y\" and \"y \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (state)\nthis:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y\n  x = \\<sigma>[s,p] y\n  y => u\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "hence \n      \"\\<forall>sa pa. sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \n             \\<and> pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and> sa \\<noteq> pa \n        \\<longrightarrow> (\\<exists>t. x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \\<and>  \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\""], ["proof (prove)\nusing this:\n  t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y\n  x = \\<sigma>[s,p] y\n  y => u\n\ngoal (1 subgoal):\n 1. \\<forall>sa pa.\n       sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                   {p} \\<and>\n       pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                   {p} \\<and>\n       sa \\<noteq> pa \\<longrightarrow>\n       (\\<exists>t.\n           x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n           \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "fix sa :: fVariable and pa :: fVariable"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "assume \n        sapa: \"sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \n               \\<and> pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and> sa \\<noteq> pa\""], ["proof (state)\nthis:\n  sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  sa \\<noteq> pa\n\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "with sp par_beta_lc[OF \\<open>y \\<Rightarrow>\\<^sub>\\<beta> u\\<close>]"], ["proof (chain)\npicking this:\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n  lc y \\<and> lc u\n  sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  sa \\<noteq> pa", "have \"s \\<noteq> p\" and \"s \\<notin> FV (Fvar pa)\" and \"lc y\" and \"lc u\""], ["proof (prove)\nusing this:\n  s \\<notin> L1 \\<union> L2 \\<and>\n  p \\<notin> L1 \\<union> L2 \\<and> s \\<noteq> p\n  lc y \\<and> lc u\n  sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  sa \\<noteq> pa\n\ngoal (1 subgoal):\n 1. (s \\<noteq> p &&& s \\<notin> FV (Fvar pa)) &&& lc y &&& lc u", "by auto"], ["proof (state)\nthis:\n  s \\<noteq> p\n  s \\<notin> FV (Fvar pa)\n  lc y\n  lc u\n\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "from \n        sopen_sclose_eq_ssubst[OF this(1-3)] \n        sopen_sclose_eq_ssubst[OF this(1-2) this(4)]\n        renaming_par_beta \\<open>x = \\<sigma>[s,p] y\\<close> \\<open>y \\<Rightarrow>\\<^sub>\\<beta> u\\<close>"], ["proof (chain)\npicking this:\n  {?n \\<rightarrow> [?s,Fvar pa]} {?n \\<leftarrow> [s,p]} y =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> Fvar pa] y\n  {?n \\<rightarrow> [?s,Fvar pa]} {?n \\<leftarrow> [s,p]} u =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> Fvar pa] u\n  ?t => ?t' \\<Longrightarrow>\n  [?s \\<rightarrow> Fvar ?sa] ?t => [?s \\<rightarrow> Fvar ?sa] ?t'\n  x = \\<sigma>[s,p] y\n  y => u", "have \"x\\<^bsup>[Fvar sa, Fvar pa]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (\\<sigma>[s,p] u\\<^bsup>[Fvar sa, Fvar pa]\\<^esup>)\""], ["proof (prove)\nusing this:\n  {?n \\<rightarrow> [?s,Fvar pa]} {?n \\<leftarrow> [s,p]} y =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> Fvar pa] y\n  {?n \\<rightarrow> [?s,Fvar pa]} {?n \\<leftarrow> [s,p]} u =\n  [s \\<rightarrow> ?s] [p \\<rightarrow> Fvar pa] u\n  ?t => ?t' \\<Longrightarrow>\n  [?s \\<rightarrow> Fvar ?sa] ?t => [?s \\<rightarrow> Fvar ?sa] ?t'\n  x = \\<sigma>[s,p] y\n  y => u\n\ngoal (1 subgoal):\n 1. x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> =>\n    (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)", "by (auto simp: openz_def closez_def)"], ["proof (state)\nthis:\n  x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> =>\n  (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "moreover"], ["proof (state)\nthis:\n  x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> =>\n  (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "from \n        sapa par_beta_preserves_FV[OF \\<open>t \\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> y\\<close>]\n        sopen_FV[of 0 \"Fvar s\" \"Fvar p\" t]\n        par_beta_preserves_FV[OF \\<open>y \\<Rightarrow>\\<^sub>\\<beta> u\\<close>]\n        sclose_subset_FV[of 0 s p u]"], ["proof (chain)\npicking this:\n  sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  sa \\<noteq> pa\n  ?x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<Longrightarrow>\n  ?x \\<notin> FV y\n  FV ({0 \\<rightarrow> [Fvar s,Fvar p]} t)\n  \\<subseteq> FV t \\<union> FV (Fvar s) \\<union> FV (Fvar p)\n  ?x \\<notin> FV y \\<Longrightarrow> ?x \\<notin> FV u\n  FV ({0 \\<leftarrow> [s,p]} u) \\<subseteq> FV u", "have \"sa \\<notin> FV (\\<sigma>[s,p] u)\" and \"pa \\<notin> FV (\\<sigma>[s,p] u)\" and \"sa \\<noteq> pa\""], ["proof (prove)\nusing this:\n  sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p} \\<and>\n  sa \\<noteq> pa\n  ?x \\<notin> FV (t\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<Longrightarrow>\n  ?x \\<notin> FV y\n  FV ({0 \\<rightarrow> [Fvar s,Fvar p]} t)\n  \\<subseteq> FV t \\<union> FV (Fvar s) \\<union> FV (Fvar p)\n  ?x \\<notin> FV y \\<Longrightarrow> ?x \\<notin> FV u\n  FV ({0 \\<leftarrow> [s,p]} u) \\<subseteq> FV u\n\ngoal (1 subgoal):\n 1. sa \\<notin> FV \\<sigma>[s,p] u &&&\n    pa \\<notin> FV \\<sigma>[s,p] u &&& sa \\<noteq> pa", "by (auto simp: openz_def closez_def)"], ["proof (state)\nthis:\n  sa \\<notin> FV \\<sigma>[s,p] u\n  pa \\<notin> FV \\<sigma>[s,p] u\n  sa \\<noteq> pa\n\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "from sym[OF sclose_sopen_eq_t[OF this]]"], ["proof (chain)\npicking this:\n  \\<sigma>[s,p] u =\n  {?n1 \\<leftarrow> [sa,pa]} {?n1 \\<rightarrow> [Fvar\n            sa,Fvar pa]} \\<sigma>[s,p] u", "have \"\\<sigma>[s,p] u = \\<sigma>[sa,pa] (\\<sigma>[s,p] u\\<^bsup>[Fvar sa, Fvar pa]\\<^esup>)\""], ["proof (prove)\nusing this:\n  \\<sigma>[s,p] u =\n  {?n1 \\<leftarrow> [sa,pa]} {?n1 \\<rightarrow> [Fvar\n            sa,Fvar pa]} \\<sigma>[s,p] u\n\ngoal (1 subgoal):\n 1. \\<sigma>[s,p] u =\n    \\<sigma>[sa,pa] (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)", "by (simp add: openz_def closez_def)"], ["proof (state)\nthis:\n  \\<sigma>[s,p] u =\n  \\<sigma>[sa,pa] (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>sa pa.\n       \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => y; x = \\<sigma>[s,p] y;\n        y => u;\n        sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                    {p} \\<and>\n        sa \\<noteq> pa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>t.\n                            x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                            \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "ultimately"], ["proof (chain)\npicking this:\n  x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> =>\n  (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)\n  \\<sigma>[s,p] u =\n  \\<sigma>[sa,pa] (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)", "show \"\\<exists>t. x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \\<and> \\<sigma>[s,p] u = \\<sigma>[sa,pa] t\""], ["proof (prove)\nusing this:\n  x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> =>\n  (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)\n  \\<sigma>[s,p] u =\n  \\<sigma>[sa,pa] (\\<sigma>[s,p] u\\<^bsup>[Fvar sa,Fvar pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<exists>t.\n       x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n       \\<sigma>[s,p] u = \\<sigma>[sa,pa] t", "by blast"], ["proof (state)\nthis:\n  \\<exists>t.\n     x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n     \\<sigma>[s,p] u = \\<sigma>[sa,pa] t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         x\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => ?y2; ?x2 = \\<sigma>[s,p] ?y2;\n   ?y2 => u\\<rbrakk>\n  \\<Longrightarrow> \\<forall>sa pa.\n                       sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union>\n                                   {s} \\<union>\n                                   {p} \\<and>\n                       pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union>\n                                   {s} \\<union>\n                                   {p} \\<and>\n                       sa \\<noteq> pa \\<longrightarrow>\n                       (\\<exists>t.\n                           ?x2\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n                           \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "note \n      this[OF \\<open>t \\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'\\<close> \\<open>ta = \\<sigma>[s,p] t'\\<close> \\<open>t' \\<Rightarrow>\\<^sub>\\<beta> u\\<close>]\n      this[OF \\<open>t \\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\\<close> \\<open>tb = \\<sigma>[s,p] t''\\<close> \\<open>t'' \\<Rightarrow>\\<^sub>\\<beta> u\\<close>]"], ["proof (state)\nthis:\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         ta\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         tb\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>u.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                   t'' = \\<sigma>[s,p] u)))", "ultimately"], ["proof (chain)\npicking this:\n  finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         ta\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         tb\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)", "show \n    \"\\<exists>L'. finite L' \n        \\<and> (\\<exists>t''. (\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                   \\<longrightarrow> (\\<exists>t'. ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> t'' = \\<sigma>[s,p] t'))\n               \\<and> (\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                   \\<longrightarrow> (\\<exists>t'. tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \\<and> t'' = \\<sigma>[s,p] t')))\""], ["proof (prove)\nusing this:\n  finite (L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p})\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         ta\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n  \\<forall>sa pa.\n     sa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     pa \\<notin> L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union>\n                 {p} \\<and>\n     sa \\<noteq> pa \\<longrightarrow>\n     (\\<exists>t.\n         tb\\<^bsup>[Fvar sa,Fvar pa]\\<^esup> => t \\<and>\n         \\<sigma>[s,p] u = \\<sigma>[sa,pa] t)\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>t''.\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t'.\n                   ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                   t'' = \\<sigma>[s,p] t')) \\<and>\n           (\\<forall>s p.\n               s \\<notin> L' \\<and>\n               p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t'.\n                   tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                   t'' = \\<sigma>[s,p] t')))", "by (rule_tac x = \"L1 \\<union> L2 \\<union> FV t \\<union> {s} \\<union> {p}\" in exI, simp, blast)"], ["proof (state)\nthis:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t'.\n                 ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                 t'' = \\<sigma>[s,p] t')) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t'.\n                 tb\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t' \\<and>\n                 t'' = \\<sigma>[s,p] t')))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma exL_exMap_lem:\n  fixes \n  f :: \"Label -~> sterm\" and \n  lz :: \"Label -~> sterm\" and f' :: \"Label -~> sterm\"\n  assumes \"dom f = dom lz\" and \"dom f' = dom f\"\n  shows \n  \"\\<forall>L1 L2. finite L1 \n    \\<longrightarrow> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p \n                     \\<longrightarrow> (\\<exists>t. (the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                            \\<and> (\\<forall>z. (the(f l)\\<^bsup>[Fvar s, Fvar  p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z) \n                                \\<longrightarrow> (\\<exists>u. t \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)))\n                            \\<and> the(f' l) = \\<sigma>[s,p]t))\n    \\<longrightarrow> finite L2\n    \\<longrightarrow> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n          \\<longrightarrow> (\\<exists>t. the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \\<and> the(lz l) = \\<sigma>[s,p]t))\n    \\<longrightarrow> (\\<exists>L'. finite L' \n            \\<and> (\\<exists>lu. dom lu = dom f \n            \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                           \\<longrightarrow> (\\<exists>t. (the(f' l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                  \\<and> the(lu l) = \\<sigma>[s,p]t))\n            \\<and> (\\<forall>l\\<in>dom f. body (the (f' l)))\n            \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                           \\<longrightarrow> (\\<exists>t. (the(lz l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                  \\<and> the(lu l) = \\<sigma>[s,p]t))\n            \\<and> (\\<forall>l\\<in>dom f. body (the (lz l)))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>L1 L2.\n       finite L1 \\<longrightarrow>\n       (\\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n       finite L2 \\<longrightarrow>\n       (\\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (lz l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n       (\\<exists>L'.\n           finite L' \\<and>\n           (\\<exists>lu.\n               dom lu = dom f \\<and>\n               (\\<forall>l\\<in>dom f.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom f. body (the (f' l))) \\<and>\n               (\\<forall>l\\<in>dom f.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the (lz l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom f. body (the (lz l)))))", "using assms"], ["proof (prove)\nusing this:\n  dom f = dom lz\n  dom f' = dom f\n\ngoal (1 subgoal):\n 1. \\<forall>L1 L2.\n       finite L1 \\<longrightarrow>\n       (\\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n       finite L2 \\<longrightarrow>\n       (\\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (lz l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n       (\\<exists>L'.\n           finite L' \\<and>\n           (\\<exists>lu.\n               dom lu = dom f \\<and>\n               (\\<forall>l\\<in>dom f.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom f. body (the (f' l))) \\<and>\n               (\\<forall>l\\<in>dom f.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the (lz l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom f. body (the (lz l)))))", "proof (induct rule: fmap_induct3)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>L1 L2.\n       finite L1 \\<longrightarrow>\n       (\\<forall>l\\<in>dom Map.empty.\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n       finite L2 \\<longrightarrow>\n       (\\<forall>l\\<in>dom Map.empty.\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n       (\\<exists>L'.\n           finite L' \\<and>\n           (\\<exists>lu.\n               dom lu = dom Map.empty \\<and>\n               (\\<forall>l\\<in>dom Map.empty.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty. body (the None)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty. body (the None))))\n 2. \\<And>x a b c F1 F2 F3.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1\\<rbrakk>\n       \\<Longrightarrow> \\<forall>L1 L2.\n                            finite L1 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L1 \\<and>\n                                   p \\<notin> L1 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  (\\<forall>z.\n      the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n      z \\<longrightarrow>\n      (\\<exists>u. t => u \\<and> z => u))) \\<and>\n the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            finite L2 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L2 \\<and>\n                                   p \\<notin> L2 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            (\\<exists>L'.\n                                finite L' \\<and>\n                                (\\<exists>lu.\n                                    dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F2(x \\<mapsto> b)) l)))))", "case empty"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<forall>L1 L2.\n       finite L1 \\<longrightarrow>\n       (\\<forall>l\\<in>dom Map.empty.\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n       finite L2 \\<longrightarrow>\n       (\\<forall>l\\<in>dom Map.empty.\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n       (\\<exists>L'.\n           finite L' \\<and>\n           (\\<exists>lu.\n               dom lu = dom Map.empty \\<and>\n               (\\<forall>l\\<in>dom Map.empty.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty. body (the None)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty. body (the None))))\n 2. \\<And>x a b c F1 F2 F3.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1\\<rbrakk>\n       \\<Longrightarrow> \\<forall>L1 L2.\n                            finite L1 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L1 \\<and>\n                                   p \\<notin> L1 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  (\\<forall>z.\n      the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n      z \\<longrightarrow>\n      (\\<exists>u. t => u \\<and> z => u))) \\<and>\n the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            finite L2 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L2 \\<and>\n                                   p \\<notin> L2 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            (\\<exists>L'.\n                                finite L' \\<and>\n                                (\\<exists>lu.\n                                    dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F2(x \\<mapsto> b)) l)))))", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>L1 L2.\n       finite L1 \\<longrightarrow>\n       (\\<forall>l\\<in>dom Map.empty.\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n       finite L2 \\<longrightarrow>\n       (\\<forall>l\\<in>dom Map.empty.\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n       (\\<exists>L'.\n           finite L' \\<and>\n           (\\<exists>lu.\n               dom lu = dom Map.empty \\<and>\n               (\\<forall>l\\<in>dom Map.empty.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty. body (the None)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty.\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom Map.empty. body (the None))))", "by force"], ["proof (state)\nthis:\n  \\<forall>L1 L2.\n     finite L1 \\<longrightarrow>\n     (\\<forall>l\\<in>dom Map.empty.\n         \\<forall>s p.\n            s \\<notin> L1 \\<and>\n            p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                (the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 (\\<forall>z.\n                     the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                     z \\<longrightarrow>\n                     (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n     finite L2 \\<longrightarrow>\n     (\\<forall>l\\<in>dom Map.empty.\n         \\<forall>s p.\n            s \\<notin> L2 \\<and>\n            p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                the None = \\<sigma>[s,p] t)) \\<longrightarrow>\n     (\\<exists>L'.\n         finite L' \\<and>\n         (\\<exists>lu.\n             dom lu = dom Map.empty \\<and>\n             (\\<forall>l\\<in>dom Map.empty.\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom Map.empty. body (the None)) \\<and>\n             (\\<forall>l\\<in>dom Map.empty.\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the None\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom Map.empty. body (the None))))\n\ngoal (1 subgoal):\n 1. \\<And>x a b c F1 F2 F3.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1\\<rbrakk>\n       \\<Longrightarrow> \\<forall>L1 L2.\n                            finite L1 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L1 \\<and>\n                                   p \\<notin> L1 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  (\\<forall>z.\n      the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n      z \\<longrightarrow>\n      (\\<exists>u. t => u \\<and> z => u))) \\<and>\n the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            finite L2 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L2 \\<and>\n                                   p \\<notin> L2 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            (\\<exists>L'.\n                                finite L' \\<and>\n                                (\\<exists>lu.\n                                    dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F2(x \\<mapsto> b)) l)))))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a b c F1 F2 F3.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1\\<rbrakk>\n       \\<Longrightarrow> \\<forall>L1 L2.\n                            finite L1 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L1 \\<and>\n                                   p \\<notin> L1 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  (\\<forall>z.\n      the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n      z \\<longrightarrow>\n      (\\<exists>u. t => u \\<and> z => u))) \\<and>\n the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            finite L2 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L2 \\<and>\n                                   p \\<notin> L2 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            (\\<exists>L'.\n                                finite L' \\<and>\n                                (\\<exists>lu.\n                                    dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F2(x \\<mapsto> b)) l)))))", "case (insert x a b c F1 F2 F3)"], ["proof (state)\nthis:\n  \\<forall>L1 L2.\n     finite L1 \\<longrightarrow>\n     (\\<forall>l\\<in>dom F1.\n         \\<forall>s p.\n            s \\<notin> L1 \\<and>\n            p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 (\\<forall>z.\n                     the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                     z \\<longrightarrow>\n                     (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                the (F3 l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n     finite L2 \\<longrightarrow>\n     (\\<forall>l\\<in>dom F1.\n         \\<forall>s p.\n            s \\<notin> L2 \\<and>\n            p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                the (F2 l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n     (\\<exists>L'.\n         finite L' \\<and>\n         (\\<exists>lu.\n             dom lu = dom F1 \\<and>\n             (\\<forall>l\\<in>dom F1.\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                        t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n             (\\<forall>l\\<in>dom F1.\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                        t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom F1. body (the (F2 l)))))\n  dom F1 = dom F2\n  dom F3 = dom F1\n  x \\<notin> dom F1\n\ngoal (1 subgoal):\n 1. \\<And>x a b c F1 F2 F3.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1\\<rbrakk>\n       \\<Longrightarrow> \\<forall>L1 L2.\n                            finite L1 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L1 \\<and>\n                                   p \\<notin> L1 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  (\\<forall>z.\n      the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n      z \\<longrightarrow>\n      (\\<exists>u. t => u \\<and> z => u))) \\<and>\n the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            finite L2 \\<longrightarrow>\n                            (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                \\<forall>s p.\n                                   s \\<notin> L2 \\<and>\n                                   p \\<notin> L2 \\<and>\n                                   s \\<noteq> p \\<longrightarrow>\n                                   (\\<exists>t.\n the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n                            (\\<exists>L'.\n                                finite L' \\<and>\n                                (\\<exists>lu.\n                                    dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t.\n         the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n         t \\<and>\n         the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                    (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n  body (the ((F2(x \\<mapsto> b)) l)))))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<forall>L1 L2.\n     finite L1 \\<longrightarrow>\n     (\\<forall>l\\<in>dom F1.\n         \\<forall>s p.\n            s \\<notin> L1 \\<and>\n            p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 (\\<forall>z.\n                     the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                     z \\<longrightarrow>\n                     (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                the (F3 l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n     finite L2 \\<longrightarrow>\n     (\\<forall>l\\<in>dom F1.\n         \\<forall>s p.\n            s \\<notin> L2 \\<and>\n            p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                the (F2 l) = \\<sigma>[s,p] t)) \\<longrightarrow>\n     (\\<exists>L'.\n         finite L' \\<and>\n         (\\<exists>lu.\n             dom lu = dom F1 \\<and>\n             (\\<forall>l\\<in>dom F1.\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                        t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n             (\\<forall>l\\<in>dom F1.\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                        t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom F1. body (the (F2 l)))))\n  dom F1 = dom F2\n  dom F3 = dom F1\n  x \\<notin> dom F1\n\ngoal (1 subgoal):\n 1. \\<forall>L1 L2.\n       finite L1 \\<longrightarrow>\n       (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) =\n                  \\<sigma>[s,p] t)) \\<longrightarrow>\n       finite L2 \\<longrightarrow>\n       (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) =\n                  \\<sigma>[s,p] t)) \\<longrightarrow>\n       (\\<exists>L'.\n           finite L' \\<and>\n           (\\<exists>lu.\n               dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n               (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the ((F3(x \\<mapsto> c))\n                                l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                   body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n               (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                   \\<forall>s p.\n                      s \\<notin> L' \\<and>\n                      p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                      (\\<exists>t.\n                          the ((F2(x \\<mapsto> b))\n                                l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                          t \\<and>\n                          the (lu l) = \\<sigma>[s,p] t)) \\<and>\n               (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                   body (the ((F2(x \\<mapsto> b)) l)))))", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "fix L1 :: \"fVariable set\" and L2 :: \"fVariable set\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "fix \n        L :: \"fVariable set\" and\n        t :: sterm and F :: \"Label -~> sterm\" and\n        P :: \"sterm \\<Rightarrow> sterm \\<Rightarrow> fVariable \\<Rightarrow> fVariable \\<Rightarrow> bool\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "assume \n        \"dom F1 = dom F\" and\n        *: \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \n           \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n            \\<longrightarrow> P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\""], ["proof (state)\nthis:\n  dom F1 = dom F\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "hence \n        F: \"\\<forall>l\\<in>dom F1. \\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n             \\<longrightarrow> P (the(F1 l)) (the(F l)) s p\""], ["proof (prove)\nusing this:\n  dom F1 = dom F\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>dom F1.\n       \\<forall>s p.\n          s \\<notin> L \\<and>\n          p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n          P (the (F1 l)) (the (F l)) s p", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "fix l :: Label and s :: fVariable and p :: fVariable"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "assume \"l \\<in> dom F1\""], ["proof (state)\nthis:\n  l \\<in> dom F1\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "hence \"l \\<in> dom (F1(x \\<mapsto> a))\""], ["proof (prove)\nusing this:\n  l \\<in> dom F1\n\ngoal (1 subgoal):\n 1. l \\<in> dom (F1(x \\<mapsto> a))", "by simp"], ["proof (state)\nthis:\n  l \\<in> dom (F1(x \\<mapsto> a))\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "moreover"], ["proof (state)\nthis:\n  l \\<in> dom (F1(x \\<mapsto> a))\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "assume \"s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\""], ["proof (state)\nthis:\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "ultimately"], ["proof (chain)\npicking this:\n  l \\<in> dom (F1(x \\<mapsto> a))\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p", "have \"P (the((F1(x \\<mapsto> a)) l)) (the((F(x \\<mapsto> t)) l)) s p\""], ["proof (prove)\nusing this:\n  l \\<in> dom (F1(x \\<mapsto> a))\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p", "using *"], ["proof (prove)\nusing this:\n  l \\<in> dom (F1(x \\<mapsto> a))\n  s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n\ngoal (1 subgoal):\n 1. P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p", "by blast"], ["proof (state)\nthis:\n  P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "moreover"], ["proof (state)\nthis:\n  P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "from \\<open>x \\<notin> dom F1\\<close> \\<open>l \\<in> dom F1\\<close>"], ["proof (chain)\npicking this:\n  x \\<notin> dom F1\n  l \\<in> dom F1", "have \"l \\<noteq> x\""], ["proof (prove)\nusing this:\n  x \\<notin> dom F1\n  l \\<in> dom F1\n\ngoal (1 subgoal):\n 1. l \\<noteq> x", "by auto"], ["proof (state)\nthis:\n  l \\<noteq> x\n\ngoal (1 subgoal):\n 1. \\<And>l s p.\n       \\<lbrakk>dom F1 = dom F;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s\n               p;\n        l \\<in> dom F1;\n        s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p\\<rbrakk>\n       \\<Longrightarrow> P (the (F1 l)) (the (F l)) s p", "ultimately"], ["proof (chain)\npicking this:\n  P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n  l \\<noteq> x", "show \"P (the(F1 l)) (the(F l)) s p\""], ["proof (prove)\nusing this:\n  P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n  l \\<noteq> x\n\ngoal (1 subgoal):\n 1. P (the (F1 l)) (the (F l)) s p", "by force"], ["proof (state)\nthis:\n  P (the (F1 l)) (the (F l)) s p\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the (F1 l)) (the (F l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from *"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p", "have \"\\<forall>s p. s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow> P a t s p\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the ((F1(x \\<mapsto> a)) l)) (the ((F(x \\<mapsto> t)) l)) s p\n\ngoal (1 subgoal):\n 1. \\<forall>s p.\n       s \\<notin> L \\<and>\n       p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n       P a t s p", "by auto"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     P a t s p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note this F"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     P a t s p\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        P (the (F1 l)) (the (F l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> ?L2 \\<and>\n         p \\<notin> ?L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         ?P2 (the ((F1(x \\<mapsto> a)) l)) (the ((?F2(x \\<mapsto> ?t2)) l))\n          s p\\<rbrakk>\n  \\<Longrightarrow> \\<forall>s p.\n                       s \\<notin> ?L2 \\<and>\n                       p \\<notin> ?L2 \\<and> s \\<noteq> p \\<longrightarrow>\n                       ?P2 a ?t2 s p\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> ?L2 \\<and>\n         p \\<notin> ?L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         ?P2 (the ((F1(x \\<mapsto> a)) l)) (the ((?F2(x \\<mapsto> ?t2)) l))\n          s p\\<rbrakk>\n  \\<Longrightarrow> \\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> ?L2 \\<and>\n                          p \\<notin> ?L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          ?P2 (the (F1 l)) (the (?F2 l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note pred = this"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> ?L2 \\<and>\n         p \\<notin> ?L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         ?P2 (the ((F1(x \\<mapsto> a)) l)) (the ((?F2(x \\<mapsto> ?t2)) l))\n          s p\\<rbrakk>\n  \\<Longrightarrow> \\<forall>s p.\n                       s \\<notin> ?L2 \\<and>\n                       p \\<notin> ?L2 \\<and> s \\<noteq> p \\<longrightarrow>\n                       ?P2 a ?t2 s p\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> ?L2 \\<and>\n         p \\<notin> ?L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         ?P2 (the ((F1(x \\<mapsto> a)) l)) (the ((?F2(x \\<mapsto> ?t2)) l))\n          s p\\<rbrakk>\n  \\<Longrightarrow> \\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> ?L2 \\<and>\n                          p \\<notin> ?L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          ?P2 (the (F1 l)) (the (?F2 l)) s p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note \n      tmp =\n      pred[of _  L1 \"(\\<lambda>t t' s p. \n                        \\<exists>t''. (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t''\n                            \\<and> (\\<forall>z. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z \\<longrightarrow> (\\<exists>u. t'' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)))\n                            \\<and> t' = \\<sigma>[s,p] t'')\"]"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L1 \\<and>\n         p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n              t'' \\<and>\n              (\\<forall>z.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  z \\<longrightarrow>\n                  (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>s p.\n                       s \\<notin> L1 \\<and>\n                       p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           (a\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                            (\\<forall>z.\n                                a\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                z \\<longrightarrow>\n                                (\\<exists>u.\n                                    t'' => u \\<and> z => u))) \\<and>\n                           ?t2 = \\<sigma>[s,p] t'')\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L1 \\<and>\n         p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n              t'' \\<and>\n              (\\<forall>z.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  z \\<longrightarrow>\n                  (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t''.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t'' \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t'' => u \\<and> z => u))) \\<and>\n                              the (?F2 l) = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note predc = tmp(1)"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L1 \\<and>\n         p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n              t'' \\<and>\n              (\\<forall>z.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  z \\<longrightarrow>\n                  (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>s p.\n                       s \\<notin> L1 \\<and>\n                       p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           (a\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                            (\\<forall>z.\n                                a\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                z \\<longrightarrow>\n                                (\\<exists>u.\n                                    t'' => u \\<and> z => u))) \\<and>\n                           ?t2 = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note predF3 = tmp(2)"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L1 \\<and>\n         p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n              t'' \\<and>\n              (\\<forall>z.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  z \\<longrightarrow>\n                  (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t''.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t'' \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t'' => u \\<and> z => u))) \\<and>\n                              the (?F2 l) = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note tmp = pred[of _ L2 \n                       \"(\\<lambda>t t' s p. \\<exists>t''. t\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'' \\<and> t' = \\<sigma>[s,p] t'')\"]"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L2 \\<and>\n         p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n             t'' \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>s p.\n                       s \\<notin> L2 \\<and>\n                       p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           a\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           ?t2 = \\<sigma>[s,p] t'')\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L2 \\<and>\n         p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n             t'' \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t''.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t'' \\<and>\n                              the (?F2 l) = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note predb = tmp(1)"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L2 \\<and>\n         p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n             t'' \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>s p.\n                       s \\<notin> L2 \\<and>\n                       p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n                       (\\<exists>t''.\n                           a\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                           ?t2 = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note predF2 = tmp(2)"], ["proof (state)\nthis:\n  \\<lbrakk>dom F1 = dom ?F2;\n   \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n      \\<forall>s p.\n         s \\<notin> L2 \\<and>\n         p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n         (\\<exists>t''.\n             the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n             t'' \\<and>\n             the ((?F2(x \\<mapsto> ?t2)) l) = \\<sigma>[s,p] t'')\\<rbrakk>\n  \\<Longrightarrow> \\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t''.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t'' \\<and>\n                              the (?F2 l) = \\<sigma>[s,p] t'')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "assume \n      a: \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p \n        \\<longrightarrow> (\\<exists>t. (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n               \\<and> (\\<forall>z. the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z \n                   \\<longrightarrow> (\\<exists>u. t \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u))) \n               \\<and> the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)\" and\n      b: \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n        \\<longrightarrow> (\\<exists>t. the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n               \\<and> the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\" and\n      \"finite L1\" and \"finite L2\""], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L1 \\<and>\n        p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            (the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n             t \\<and>\n             (\\<forall>z.\n                 the ((F1(x \\<mapsto> a))\n                       l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 z \\<longrightarrow>\n                 (\\<exists>u. t => u \\<and> z => u))) \\<and>\n            the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t)\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> L2 \\<and>\n        p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the ((F1(x \\<mapsto> a)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t \\<and>\n            the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\n  finite L1\n  finite L2\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from \n      diamond_binder[OF this(3) predc[OF sym[OF \\<open>dom F3 = dom F1\\<close>] this(1)]\n                        this(4) predb[OF \\<open>dom F1 = dom F2\\<close> this(2)]]"], ["proof (chain)\npicking this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))", "obtain La t where \n      \"finite La\" and\n      pred_c: \"\\<forall>s p. s \\<notin> La \\<and> p \\<notin> La \\<and> s \\<noteq> p \n                \\<longrightarrow> (\\<exists>u. c\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> t = \\<sigma>[s,p] u)\" and\n      pred_b: \"\\<forall>s p. s \\<notin> La \\<and> p \\<notin> La \\<and> s \\<noteq> p \n                \\<longrightarrow> (\\<exists>u. b\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> t = \\<sigma>[s,p] u)\""], ["proof (prove)\nusing this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))\n\ngoal (1 subgoal):\n 1. (\\<And>La t.\n        \\<lbrakk>finite La;\n         \\<forall>s p.\n            s \\<notin> La \\<and>\n            p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                t = \\<sigma>[s,p] u);\n         \\<forall>s p.\n            s \\<notin> La \\<and>\n            p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                t = \\<sigma>[s,p] u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "{"], ["proof (state)\nthis:\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from this(1)"], ["proof (chain)\npicking this:\n  finite La", "have \"finite (La \\<union> FV c \\<union> FV b)\""], ["proof (prove)\nusing this:\n  finite La\n\ngoal (1 subgoal):\n 1. finite (La \\<union> FV c \\<union> FV b)", "by simp"], ["proof (state)\nthis:\n  finite (La \\<union> FV c \\<union> FV b)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from exFresh_s_p_cof[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>s p.\n     s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n     p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p", "obtain s p where \n        sp: \"s \\<notin> La \\<union> FV c \\<union> FV b \\<and> p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\""], ["proof (prove)\nusing this:\n  \\<exists>s p.\n     s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n     p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>s p.\n        s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n        p \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n        s \\<noteq> p \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "with pred_c"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p", "obtain u where \"c\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from par_beta_lc[OF this]"], ["proof (chain)\npicking this:\n  lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc u", "have \"lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\""], ["proof (prove)\nusing this:\n  lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc u\n\ngoal (1 subgoal):\n 1. lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "by simp"], ["proof (state)\nthis:\n  lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "with lc_body[of \"c\\<^bsup>[Fvar s,Fvar p]\\<^esup>\" s p] sp sclose_sopen_eq_t[of s c p 0]"], ["proof (chain)\npicking this:\n  \\<lbrakk>lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>); s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> body \\<sigma>[s,p] (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n  \\<lbrakk>s \\<notin> FV c; p \\<notin> FV c; s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> {0 \\<leftarrow> [s,p]} {0 \\<rightarrow> [Fvar\n                        s,Fvar p]} c =\n                    c\n  lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "have c: \"body c\""], ["proof (prove)\nusing this:\n  \\<lbrakk>lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>); s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> body \\<sigma>[s,p] (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n  \\<lbrakk>s \\<notin> FV c; p \\<notin> FV c; s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> {0 \\<leftarrow> [s,p]} {0 \\<rightarrow> [Fvar\n                        s,Fvar p]} c =\n                    c\n  lc (c\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. body c", "by (auto simp: closez_def openz_def)"], ["proof (state)\nthis:\n  body c\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from sp pred_b"], ["proof (chain)\npicking this:\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)", "obtain u where \"b\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from par_beta_lc[OF this]"], ["proof (chain)\npicking this:\n  lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc u", "have \"lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\""], ["proof (prove)\nusing this:\n  lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>) \\<and> lc u\n\ngoal (1 subgoal):\n 1. lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "by simp"], ["proof (state)\nthis:\n  lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "with lc_body[of \"b\\<^bsup>[Fvar s,Fvar p]\\<^esup>\" s p] sp sclose_sopen_eq_t[of s b p 0]"], ["proof (chain)\npicking this:\n  \\<lbrakk>lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>); s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> body \\<sigma>[s,p] (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n  \\<lbrakk>s \\<notin> FV b; p \\<notin> FV b; s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> {0 \\<leftarrow> [s,p]} {0 \\<rightarrow> [Fvar\n                        s,Fvar p]} b =\n                    b\n  lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)", "have \"body b\""], ["proof (prove)\nusing this:\n  \\<lbrakk>lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>); s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> body \\<sigma>[s,p] (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n  s \\<notin> La \\<union> FV c \\<union> FV b \\<and>\n  p \\<notin> La \\<union> FV c \\<union> FV b \\<and> s \\<noteq> p\n  \\<lbrakk>s \\<notin> FV b; p \\<notin> FV b; s \\<noteq> p\\<rbrakk>\n  \\<Longrightarrow> {0 \\<leftarrow> [s,p]} {0 \\<rightarrow> [Fvar\n                        s,Fvar p]} b =\n                    b\n  lc (b\\<^bsup>[Fvar s,Fvar p]\\<^esup>)\n\ngoal (1 subgoal):\n 1. body b", "by (auto simp: closez_def openz_def)"], ["proof (state)\nthis:\n  body b\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note c this"], ["proof (state)\nthis:\n  body c\n  body b\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "}"], ["proof (state)\nthis:\n  body c\n  body b\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "note bodycb = this"], ["proof (state)\nthis:\n  body c\n  body b\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from \n      predF3[OF sym[OF \\<open>dom F3 = dom F1\\<close>] a]\n      predF2[OF \\<open>dom F1 = dom F2\\<close> b]\n      \\<open>finite L1\\<close> \\<open>finite L2\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> L1 \\<and>\n        p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n             (\\<forall>z.\n                 the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 z \\<longrightarrow>\n                 (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n            the (F3 l) = \\<sigma>[s,p] t'')\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> L2 \\<and>\n        p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            the (F2 l) = \\<sigma>[s,p] t'')\n  finite L1\n  finite L2", "have \n      \"\\<exists>L'. finite L' \n          \\<and> (\\<exists>lu. dom lu = dom F1 \n          \\<and> (\\<forall>l\\<in>dom F1. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                          \\<longrightarrow> (\\<exists>t. the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                                 \\<and> the (lu l) = \\<sigma>[s,p] t)) \n          \\<and> (\\<forall>l\\<in>dom F1. body (the (F3 l))) \n          \\<and> (\\<forall>l\\<in>dom F1. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                          \\<longrightarrow> (\\<exists>t. the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                                 \\<and> the (lu l) = \\<sigma>[s,p] t)) \n          \\<and> (\\<forall>l\\<in>dom F1. body (the (F2 l))))\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> L1 \\<and>\n        p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n             (\\<forall>z.\n                 the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 z \\<longrightarrow>\n                 (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n            the (F3 l) = \\<sigma>[s,p] t'')\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> L2 \\<and>\n        p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t''.\n            the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n            the (F2 l) = \\<sigma>[s,p] t'')\n  finite L1\n  finite L2\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>lu.\n           dom lu = dom F1 \\<and>\n           (\\<forall>l\\<in>dom F1.\n               \\<forall>s p.\n                  s \\<notin> L' \\<and>\n                  p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                  (\\<exists>t.\n                      the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                      the (lu l) = \\<sigma>[s,p] t)) \\<and>\n           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n           (\\<forall>l\\<in>dom F1.\n               \\<forall>s p.\n                  s \\<notin> L' \\<and>\n                  p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                  (\\<exists>t.\n                      the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                      the (lu l) = \\<sigma>[s,p] t)) \\<and>\n           (\\<forall>l\\<in>dom F1. body (the (F2 l))))", "by (rule_tac x = L1 in allE[OF insert(1)], simp)"], ["proof (state)\nthis:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>lu.\n         dom lu = dom F1 \\<and>\n         (\\<forall>l\\<in>dom F1.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n         (\\<forall>l\\<in>dom F1.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom F1. body (the (F2 l))))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "then"], ["proof (chain)\npicking this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>lu.\n         dom lu = dom F1 \\<and>\n         (\\<forall>l\\<in>dom F1.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n         (\\<forall>l\\<in>dom F1.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom F1. body (the (F2 l))))", "obtain Lb f where \n      \"finite Lb\" and \"dom f = dom F1\" and\n      pred_F3: \"\\<forall>l\\<in>dom F1. \\<forall>s p. s \\<notin> La \\<union> Lb \\<and> p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \n                             \\<longrightarrow> (\\<exists>t. the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                                    \\<and> the (f l) = \\<sigma>[s,p] t)\" and\n      body_F3: \"\\<forall>l\\<in>dom F1. body (the (F3 l))\" and\n      pred_F2: \"\\<forall>l\\<in>dom F1. \\<forall>s p. s \\<notin> La \\<union> Lb \\<and> p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \n                             \\<longrightarrow> (\\<exists>t. the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                                    \\<and> the (f l) = \\<sigma>[s,p] t)\" and\n      body_F2: \"\\<forall>l\\<in>dom F1. body (the (F2 l))\""], ["proof (prove)\nusing this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>lu.\n         dom lu = dom F1 \\<and>\n         (\\<forall>l\\<in>dom F1.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n         (\\<forall>l\\<in>dom F1.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom F1. body (the (F2 l))))\n\ngoal (1 subgoal):\n 1. (\\<And>Lb f.\n        \\<lbrakk>finite Lb; dom f = dom F1;\n         \\<forall>l\\<in>dom F1.\n            \\<forall>s p.\n               s \\<notin> La \\<union> Lb \\<and>\n               p \\<notin> La \\<union> Lb \\<and>\n               s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t.\n                   the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   the (f l) = \\<sigma>[s,p] t);\n         \\<forall>l\\<in>dom F1. body (the (F3 l));\n         \\<forall>l\\<in>dom F1.\n            \\<forall>s p.\n               s \\<notin> La \\<union> Lb \\<and>\n               p \\<notin> La \\<union> Lb \\<and>\n               s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t.\n                   the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   the (f l) = \\<sigma>[s,p] t);\n         \\<forall>l\\<in>dom F1. body (the (F2 l))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite Lb\n  dom f = dom F1\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (f l) = \\<sigma>[s,p] t)\n  \\<forall>l\\<in>dom F1. body (the (F3 l))\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (f l) = \\<sigma>[s,p] t)\n  \\<forall>l\\<in>dom F1. body (the (F2 l))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from \\<open>finite La\\<close> \\<open>finite Lb\\<close>"], ["proof (chain)\npicking this:\n  finite La\n  finite Lb", "have \"finite (La \\<union> Lb)\""], ["proof (prove)\nusing this:\n  finite La\n  finite Lb\n\ngoal (1 subgoal):\n 1. finite (La \\<union> Lb)", "by simp"], ["proof (state)\nthis:\n  finite (La \\<union> Lb)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "moreover"], ["proof (state)\nthis:\n  finite (La \\<union> Lb)\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from \\<open>dom f = dom F1\\<close>"], ["proof (chain)\npicking this:\n  dom f = dom F1", "have \"dom (f(x \\<mapsto> t)) = dom (F1(x \\<mapsto> a))\""], ["proof (prove)\nusing this:\n  dom f = dom F1\n\ngoal (1 subgoal):\n 1. dom (f(x \\<mapsto> t)) = dom (F1(x \\<mapsto> a))", "by simp"], ["proof (state)\nthis:\n  dom (f(x \\<mapsto> t)) = dom (F1(x \\<mapsto> a))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "moreover"], ["proof (state)\nthis:\n  dom (f(x \\<mapsto> t)) = dom (F1(x \\<mapsto> a))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from pred_c pred_F3"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (f l) = \\<sigma>[s,p] t)", "have \n      \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \\<forall>s p. s \\<notin> La \\<union> Lb \\<and> p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \n                              \\<longrightarrow> (\\<exists>t'. the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \n                                      \\<and> the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         c\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (f l) = \\<sigma>[s,p] t)\n\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n       \\<forall>s p.\n          s \\<notin> La \\<union> Lb \\<and>\n          p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n          (\\<exists>t'.\n              the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n              t' \\<and>\n              the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')", "by auto"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "moreover"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from bodycb(1) body_F3"], ["proof (chain)\npicking this:\n  body c\n  \\<forall>l\\<in>dom F1. body (the (F3 l))", "have \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F3(x \\<mapsto> c)) l))\""], ["proof (prove)\nusing this:\n  body c\n  \\<forall>l\\<in>dom F1. body (the (F3 l))\n\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n       body (the ((F3(x \\<mapsto> c)) l))", "by simp"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F3(x \\<mapsto> c)) l))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "moreover"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F3(x \\<mapsto> c)) l))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from pred_b pred_F2"], ["proof (chain)\npicking this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (f l) = \\<sigma>[s,p] t)", "have \n      \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \\<forall>s p. s \\<notin> La \\<union> Lb \\<and> p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \n                              \\<longrightarrow> (\\<exists>t'. the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t' \n                                      \\<and> the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         b\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> t = \\<sigma>[s,p] u)\n  \\<forall>l\\<in>dom F1.\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (f l) = \\<sigma>[s,p] t)\n\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n       \\<forall>s p.\n          s \\<notin> La \\<union> Lb \\<and>\n          p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n          (\\<exists>t'.\n              the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n              t' \\<and>\n              the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')", "by auto"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "moreover"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "from bodycb(2) body_F2"], ["proof (chain)\npicking this:\n  body b\n  \\<forall>l\\<in>dom F1. body (the (F2 l))", "have \"\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F2(x \\<mapsto> b)) l))\""], ["proof (prove)\nusing this:\n  body b\n  \\<forall>l\\<in>dom F1. body (the (F2 l))\n\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n       body (the ((F2(x \\<mapsto> b)) l))", "by simp"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F2(x \\<mapsto> b)) l))\n\ngoal (1 subgoal):\n 1. \\<And>L1 L2.\n       \\<lbrakk>\\<forall>L1 L2.\n                   finite L1 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L1 \\<and>\n                          p \\<notin> L1 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              (the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                               t \\<and>\n                               (\\<forall>z.\n                                   the (F1\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   z \\<longrightarrow>\n                                   (\\<exists>u.\n t => u \\<and> z => u))) \\<and>\n                              the (F3 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   finite L2 \\<longrightarrow>\n                   (\\<forall>l\\<in>dom F1.\n                       \\<forall>s p.\n                          s \\<notin> L2 \\<and>\n                          p \\<notin> L2 \\<and>\n                          s \\<noteq> p \\<longrightarrow>\n                          (\\<exists>t.\n                              the (F1 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                              t \\<and>\n                              the (F2 l) =\n                              \\<sigma>[s,p] t)) \\<longrightarrow>\n                   (\\<exists>L'.\n                       finite L' \\<and>\n                       (\\<exists>lu.\n                           dom lu = dom F1 \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F3 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F3 l))) \\<and>\n                           (\\<forall>l\\<in>dom F1.\n                               \\<forall>s p.\n                                  s \\<notin> L' \\<and>\n                                  p \\<notin> L' \\<and>\n                                  s \\<noteq> p \\<longrightarrow>\n                                  (\\<exists>t.\nthe (F2 l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\nthe (lu l) = \\<sigma>[s,p] t)) \\<and>\n                           (\\<forall>l\\<in>dom F1. body (the (F2 l)))));\n        dom F1 = dom F2; dom F3 = dom F1; x \\<notin> dom F1; finite L1;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L1 \\<and>\n              p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the ((F1(x \\<mapsto> a))\n                         l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                   t \\<and>\n                   (\\<forall>z.\n                       the ((F1(x \\<mapsto> a))\n                             l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the ((F3(x \\<mapsto> c)) l) = \\<sigma>[s,p] t);\n        finite L2;\n        \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n           \\<forall>s p.\n              s \\<notin> L2 \\<and>\n              p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the ((F1(x \\<mapsto> a))\n                        l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                  t \\<and>\n                  the ((F2(x \\<mapsto> b)) l) = \\<sigma>[s,p] t)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>L'.\n                            finite L' \\<and>\n                            (\\<exists>lu.\n                                dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body\n                                     (the ((F3(x \\<mapsto> c)) l))) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    \\<forall>s p.\n s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n (\\<exists>t.\n     the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n     the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                                (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                                    body (the ((F2(x \\<mapsto> b)) l))))", "ultimately"], ["proof (chain)\npicking this:\n  finite (La \\<union> Lb)\n  dom (f(x \\<mapsto> t)) = dom (F1(x \\<mapsto> a))\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F3(x \\<mapsto> c)) l))\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F2(x \\<mapsto> b)) l))", "show \n      \"\\<exists>L'. finite L'\n          \\<and> (\\<exists>lu. dom lu = dom (F1(x \\<mapsto> a)) \n                \\<and> (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \n                    \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                     \\<longrightarrow> (\\<exists>t'. the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'\n                             \\<and> the (lu l) = \\<sigma>[s,p] t'))\n                \\<and> (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F3(x \\<mapsto> c)) l))) \n                \\<and> (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). \n                    \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                     \\<longrightarrow> (\\<exists>t'. the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t'\n                \\<and> the (lu l) = \\<sigma>[s,p] t'))\n                \\<and> (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F2(x \\<mapsto> b)) l))))\""], ["proof (prove)\nusing this:\n  finite (La \\<union> Lb)\n  dom (f(x \\<mapsto> t)) = dom (F1(x \\<mapsto> a))\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F3(x \\<mapsto> c)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F3(x \\<mapsto> c)) l))\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n     \\<forall>s p.\n        s \\<notin> La \\<union> Lb \\<and>\n        p \\<notin> La \\<union> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t'.\n            the ((F2(x \\<mapsto> b)) l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n            t' \\<and>\n            the ((f(x \\<mapsto> t)) l) = \\<sigma>[s,p] t')\n  \\<forall>l\\<in>dom (F1(x \\<mapsto> a)). body (the ((F2(x \\<mapsto> b)) l))\n\ngoal (1 subgoal):\n 1. \\<exists>L'.\n       finite L' \\<and>\n       (\\<exists>lu.\n           dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n           (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n               \\<forall>s p.\n                  s \\<notin> L' \\<and>\n                  p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                  (\\<exists>t'.\n                      the ((F3(x \\<mapsto> c))\n                            l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                      t' \\<and>\n                      the (lu l) = \\<sigma>[s,p] t')) \\<and>\n           (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n               body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n           (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n               \\<forall>s p.\n                  s \\<notin> L' \\<and>\n                  p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                  (\\<exists>t'.\n                      the ((F2(x \\<mapsto> b))\n                            l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                      t' \\<and>\n                      the (lu l) = \\<sigma>[s,p] t')) \\<and>\n           (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n               body (the ((F2(x \\<mapsto> b)) l))))", "by (rule_tac x = \"La \\<union> Lb\" in exI, \n        simp (no_asm_simp) only: conjI simp_thms(22),\n        rule_tac x = \"(f(x \\<mapsto> t))\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>lu.\n         dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n         (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t'.\n                    the ((F3(x \\<mapsto> c))\n                          l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                    t' \\<and>\n                    the (lu l) = \\<sigma>[s,p] t')) \\<and>\n         (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n             body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n         (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t'.\n                    the ((F2(x \\<mapsto> b))\n                          l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                    t' \\<and>\n                    the (lu l) = \\<sigma>[s,p] t')) \\<and>\n         (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n             body (the ((F2(x \\<mapsto> b)) l))))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>L1 L2.\n     finite L1 \\<longrightarrow>\n     (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n         \\<forall>s p.\n            s \\<notin> L1 \\<and>\n            p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                (the ((F1(x \\<mapsto> a))\n                       l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 t \\<and>\n                 (\\<forall>z.\n                     the ((F1(x \\<mapsto> a))\n                           l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                     z \\<longrightarrow>\n                     (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                the ((F3(x \\<mapsto> c)) l) =\n                \\<sigma>[s,p] t)) \\<longrightarrow>\n     finite L2 \\<longrightarrow>\n     (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n         \\<forall>s p.\n            s \\<notin> L2 \\<and>\n            p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>t.\n                the ((F1(x \\<mapsto> a))\n                      l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                t \\<and>\n                the ((F2(x \\<mapsto> b)) l) =\n                \\<sigma>[s,p] t)) \\<longrightarrow>\n     (\\<exists>L'.\n         finite L' \\<and>\n         (\\<exists>lu.\n             dom lu = dom (F1(x \\<mapsto> a)) \\<and>\n             (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the ((F3(x \\<mapsto> c))\n                              l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                        t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                 body (the ((F3(x \\<mapsto> c)) l))) \\<and>\n             (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                 \\<forall>s p.\n                    s \\<notin> L' \\<and>\n                    p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                    (\\<exists>t.\n                        the ((F2(x \\<mapsto> b))\n                              l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                        t \\<and>\n                        the (lu l) = \\<sigma>[s,p] t)) \\<and>\n             (\\<forall>l\\<in>dom (F1(x \\<mapsto> a)).\n                 body (the ((F2(x \\<mapsto> b)) l)))))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma exL_exMap:\n  \"\\<lbrakk> dom (f::Label -~> sterm) = dom (lz::Label -~> sterm); \n     dom (f'::Label -~> sterm) = dom f; \n     finite L1;\n     \\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L1 \\<and> p \\<notin> L1 \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t. (the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n             \\<and> (\\<forall>z. (the(f l)\\<^bsup>[Fvar s, Fvar  p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> z) \\<longrightarrow> (\\<exists>u. t \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)))\n             \\<and> the(f' l) = \\<sigma>[s,p]t);\n     finite L2;\n     \\<forall>l\\<in>dom lz. \\<forall>s p. s \\<notin> L2 \\<and> p \\<notin> L2 \\<and> s \\<noteq> p \n      \\<longrightarrow> (\\<exists>t. the(f l)\\<^bsup>[Fvar s, Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \\<and> the(lz l) = \\<sigma>[s,p]t) \\<rbrakk>\n  \\<Longrightarrow> \\<exists>L'. finite L' \n         \\<and> (\\<exists>lu. dom lu = dom f \n               \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                              \\<longrightarrow> (\\<exists>t. (the(f' l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                     \\<and> the(lu l) = \\<sigma>[s,p]t))\n               \\<and> (\\<forall>l\\<in>dom f. body (the (f' l)))\n               \\<and> (\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n                              \\<longrightarrow> (\\<exists>t. (the(lz l)\\<^bsup>[Fvar s, Fvar p]\\<^esup>) \\<Rightarrow>\\<^sub>\\<beta> t \n                                     \\<and> the(lu l) = \\<sigma>[s,p]t))\n               \\<and> (\\<forall>l\\<in>dom f. body (the (lz l))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>dom f = dom lz; dom f' = dom f; finite L1;\n     \\<forall>l\\<in>dom f.\n        \\<forall>s p.\n           s \\<notin> L1 \\<and>\n           p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t.\n               (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                (\\<forall>z.\n                    the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                    z \\<longrightarrow>\n                    (\\<exists>u. t => u \\<and> z => u))) \\<and>\n               the (f' l) = \\<sigma>[s,p] t);\n     finite L2;\n     \\<forall>l\\<in>dom lz.\n        \\<forall>s p.\n           s \\<notin> L2 \\<and>\n           p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t.\n               the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n               the (lz l) = \\<sigma>[s,p] t)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>L'.\n                         finite L' \\<and>\n                         (\\<exists>lu.\n                             dom lu = dom f \\<and>\n                             (\\<forall>l\\<in>dom f.\n                                 \\<forall>s p.\n                                    s \\<notin> L' \\<and>\n                                    p \\<notin> L' \\<and>\n                                    s \\<noteq> p \\<longrightarrow>\n                                    (\\<exists>t.\n  the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                             (\\<forall>l\\<in>dom f.\n                                 body (the (f' l))) \\<and>\n                             (\\<forall>l\\<in>dom f.\n                                 \\<forall>s p.\n                                    s \\<notin> L' \\<and>\n                                    p \\<notin> L' \\<and>\n                                    s \\<noteq> p \\<longrightarrow>\n                                    (\\<exists>t.\n  the (lz l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                             (\\<forall>l\\<in>dom f. body (the (lz l))))", "using exL_exMap_lem[of f lz f']"], ["proof (prove)\nusing this:\n  \\<lbrakk>dom f = dom lz; dom f' = dom f\\<rbrakk>\n  \\<Longrightarrow> \\<forall>L1 L2.\n                       finite L1 \\<longrightarrow>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L1 \\<and>\n                              p \\<notin> L1 \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              (\\<exists>t.\n                                  (the (f\n   l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                   t \\<and>\n                                   (\\<forall>z.\n the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                                  the (f' l) =\n                                  \\<sigma>[s,p] t)) \\<longrightarrow>\n                       finite L2 \\<longrightarrow>\n                       (\\<forall>l\\<in>dom f.\n                           \\<forall>s p.\n                              s \\<notin> L2 \\<and>\n                              p \\<notin> L2 \\<and>\n                              s \\<noteq> p \\<longrightarrow>\n                              (\\<exists>t.\n                                  the (f\n  l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                                  t \\<and>\n                                  the (lz l) =\n                                  \\<sigma>[s,p] t)) \\<longrightarrow>\n                       (\\<exists>L'.\n                           finite L' \\<and>\n                           (\\<exists>lu.\n                               dom lu = dom f \\<and>\n                               (\\<forall>l\\<in>dom f.\n                                   \\<forall>s p.\ns \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n(\\<exists>t.\n    the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                               (\\<forall>l\\<in>dom f.\n                                   body (the (f' l))) \\<and>\n                               (\\<forall>l\\<in>dom f.\n                                   \\<forall>s p.\ns \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n(\\<exists>t.\n    the (lz l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                               (\\<forall>l\\<in>dom f. body (the (lz l)))))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>dom f = dom lz; dom f' = dom f; finite L1;\n     \\<forall>l\\<in>dom f.\n        \\<forall>s p.\n           s \\<notin> L1 \\<and>\n           p \\<notin> L1 \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t.\n               (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                (\\<forall>z.\n                    the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                    z \\<longrightarrow>\n                    (\\<exists>u. t => u \\<and> z => u))) \\<and>\n               the (f' l) = \\<sigma>[s,p] t);\n     finite L2;\n     \\<forall>l\\<in>dom lz.\n        \\<forall>s p.\n           s \\<notin> L2 \\<and>\n           p \\<notin> L2 \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t.\n               the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n               the (lz l) = \\<sigma>[s,p] t)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>L'.\n                         finite L' \\<and>\n                         (\\<exists>lu.\n                             dom lu = dom f \\<and>\n                             (\\<forall>l\\<in>dom f.\n                                 \\<forall>s p.\n                                    s \\<notin> L' \\<and>\n                                    p \\<notin> L' \\<and>\n                                    s \\<noteq> p \\<longrightarrow>\n                                    (\\<exists>t.\n  the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                             (\\<forall>l\\<in>dom f.\n                                 body (the (f' l))) \\<and>\n                             (\\<forall>l\\<in>dom f.\n                                 \\<forall>s p.\n                                    s \\<notin> L' \\<and>\n                                    p \\<notin> L' \\<and>\n                                    s \\<noteq> p \\<longrightarrow>\n                                    (\\<exists>t.\n  the (lz l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n  the (lu l) = \\<sigma>[s,p] t)) \\<and>\n                             (\\<forall>l\\<in>dom f. body (the (lz l))))", "by simp"], ["", "lemma diamond_par_beta: \"diamond par_beta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. diamond (=>)", "unfolding diamond_def commute_def square_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       x => y \\<longrightarrow>\n       (\\<forall>z.\n           x => z \\<longrightarrow> (\\<exists>u. y => u \\<and> z => u))", "proof (rule impI [THEN allI [THEN allI]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y xa.\n       y => xa \\<Longrightarrow>\n       \\<forall>z.\n          y => z \\<longrightarrow> (\\<exists>u. xa => u \\<and> z => u)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y xa.\n       y => xa \\<Longrightarrow>\n       \\<forall>z.\n          y => z \\<longrightarrow> (\\<exists>u. xa => u \\<and> z => u)", "assume \"x \\<Rightarrow>\\<^sub>\\<beta> y\""], ["proof (state)\nthis:\n  x => y\n\ngoal (1 subgoal):\n 1. \\<And>y xa.\n       y => xa \\<Longrightarrow>\n       \\<forall>z.\n          y => z \\<longrightarrow> (\\<exists>u. xa => u \\<and> z => u)", "thus \"\\<forall>z. x \\<Rightarrow>\\<^sub>\\<beta> z \\<longrightarrow> (\\<exists>u. y \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u)\""], ["proof (prove)\nusing this:\n  x => y\n\ngoal (1 subgoal):\n 1. \\<forall>z. x => z \\<longrightarrow> (\\<exists>u. y => u \\<and> z => u)", "proof (induct rule: par_beta.induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x.\n       \\<forall>z.\n          Fvar x => z \\<longrightarrow>\n          (\\<exists>u. Fvar x => u \\<and> z => u)\n 2. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 3. \\<And>t t' L u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd t l u => z \\<longrightarrow>\n                            (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n 4. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 5. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 6. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "case pbeta_Fvar"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. \\<And>x.\n       \\<forall>z.\n          Fvar x => z \\<longrightarrow>\n          (\\<exists>u. Fvar x => u \\<and> z => u)\n 2. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 3. \\<And>t t' L u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd t l u => z \\<longrightarrow>\n                            (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n 4. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 5. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 6. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z.\n       Fvar x_ => z \\<longrightarrow>\n       (\\<exists>u. Fvar x_ => u \\<and> z => u)", "by simp"], ["proof (state)\nthis:\n  \\<forall>z.\n     Fvar x_ => z \\<longrightarrow> (\\<exists>u. Fvar x_ => u \\<and> z => u)\n\ngoal (5 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>t t' L u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd t l u => z \\<longrightarrow>\n                            (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 4. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 5. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>t t' L u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd t l u => z \\<longrightarrow>\n                            (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 4. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 5. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "case (pbeta_Upd t t' L u u' l)"], ["proof (state)\nthis:\n  t => t'\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  lc t\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          (\\<forall>z.\n              u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n              (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n         u' = \\<sigma>[s,p] t'')\n  body u\n\ngoal (5 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>t t' L u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd t l u => z \\<longrightarrow>\n                            (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 4. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 5. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "note pred_t = this(2) and pred_u = this(5)"], ["proof (state)\nthis:\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          (\\<forall>z.\n              u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n              (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n         u' = \\<sigma>[s,p] t'')\n\ngoal (5 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>t t' L u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        lc t; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               u' = \\<sigma>[s,p] t'');\n        body u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd t l u => z \\<longrightarrow>\n                            (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 4. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 5. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z.\n       Upd t l u => z \\<longrightarrow>\n       (\\<exists>u. Upd t' l u' => u \\<and> z => u)", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Upd t l u => z \\<Longrightarrow>\n       \\<exists>u. Upd t' l u' => u \\<and> z => u", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Upd t l u => z \\<Longrightarrow>\n       \\<exists>u. Upd t' l u' => u \\<and> z => u", "assume \"Upd t l u \\<Rightarrow>\\<^sub>\\<beta> z\""], ["proof (state)\nthis:\n  Upd t l u => z\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       Upd t l u => z \\<Longrightarrow>\n       \\<exists>u. Upd t' l u' => u \\<and> z => u", "thus \"\\<exists>u. Upd t' l u' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  Upd t l u => z\n\ngoal (1 subgoal):\n 1. \\<exists>u. Upd t' l u' => u \\<and> z => u", "proof (induct rule: Upd_par_red)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t'a u'a L.\n       \\<lbrakk>t => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "(* Upd: case Upd\n             Upd t' l u' \\<Rightarrow>\\<^sub>\\<beta> Upd tb l ub \\<and> Upd ta l ua \\<Rightarrow>\\<^sub>\\<beta> Upd tb l ub *)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t'a u'a L.\n       \\<lbrakk>t => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "case (upd ta ua La)"], ["proof (state)\nthis:\n  t => ta\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ua = \\<sigma>[s,p] t'')\n  z = Upd ta l ua\n\ngoal (2 subgoals):\n 1. \\<And>t'a u'a L.\n       \\<lbrakk>t => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from \n          diamond_binder[OF \\<open>finite L\\<close> pred_u this(2-3)]\n          this(1) pred_t\n          par_beta_lc[OF this(1)] par_beta_lc[OF \\<open>t \\<Rightarrow>\\<^sub>\\<beta> t'\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))\n  t => ta\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  lc t \\<and> lc ta\n  lc t \\<and> lc t'", "obtain L' ub tb where \n          \"t' \\<Rightarrow>\\<^sub>\\<beta> tb\" and \"lc t'\" and \"ta \\<Rightarrow>\\<^sub>\\<beta> tb\" and \n          \"lc ta\" and \"finite L'\" and\n          \"\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n            \\<longrightarrow> (\\<exists>u. u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> ub = \\<sigma>[s,p] u)\" and\n          \"\\<forall>s p. s \\<notin> L' \\<and> p \\<notin> L' \\<and> s \\<noteq> p \n            \\<longrightarrow> (\\<exists>u. ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> ub = \\<sigma>[s,p] u)\""], ["proof (prove)\nusing this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))\n  t => ta\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  lc t \\<and> lc ta\n  lc t \\<and> lc t'\n\ngoal (1 subgoal):\n 1. (\\<And>tb L' ub.\n        \\<lbrakk>t' => tb; lc t'; ta => tb; lc ta; finite L';\n         \\<forall>s p.\n            s \\<notin> L' \\<and>\n            p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                ub = \\<sigma>[s,p] u);\n         \\<forall>s p.\n            s \\<notin> L' \\<and>\n            p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                ub = \\<sigma>[s,p] u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' => tb\n  lc t'\n  ta => tb\n  lc ta\n  finite L'\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> ub = \\<sigma>[s,p] u)\n  \\<forall>s p.\n     s \\<notin> L' \\<and>\n     p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> ub = \\<sigma>[s,p] u)\n\ngoal (2 subgoals):\n 1. \\<And>t'a u'a L.\n       \\<lbrakk>t => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from \n          par_beta.pbeta_Upd[OF this(1-2) this(5-6)]\n          par_beta.pbeta_Upd[OF this(3-5) this(7)]\n          par_beta_body[OF this(5-6)]\n          par_beta_body[OF this(5) this(7)] \\<open>z = Upd ta l ua\\<close>"], ["proof (chain)\npicking this:\n  body u' \\<Longrightarrow> Upd t' ?l u' => Upd tb ?l ub\n  body ua \\<Longrightarrow> Upd ta ?l ua => Upd tb ?l ub\n  body u' \\<and> body ub\n  body ua \\<and> body ub\n  z = Upd ta l ua", "show ?case"], ["proof (prove)\nusing this:\n  body u' \\<Longrightarrow> Upd t' ?l u' => Upd tb ?l ub\n  body ua \\<Longrightarrow> Upd ta ?l ua => Upd tb ?l ub\n  body u' \\<and> body ub\n  body ua \\<and> body ub\n  z = Upd ta l ua\n\ngoal (1 subgoal):\n 1. \\<exists>u. Upd t' l u' => u \\<and> z => u", "by (force simp: exI[of _ \"Upd tb l ub\"])"], ["proof (state)\nthis:\n  \\<exists>u. Upd t' l u' => u \\<and> z => u\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "case (obj f fa T ua La)"], ["proof (state)\nthis:\n  l \\<in> dom f\n  Obj f T = t\n  Obj f T => Obj fa T\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ua = \\<sigma>[s,p] t'')\n  z = Obj (fa(l \\<mapsto> ua)) T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "(* Upd: case Obj\n             Upd (Obj f' T) l u' \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> ub)) T \n           \\<and> Obj (fa(l \\<mapsto> ua)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> ub)) T *)"], ["proof (state)\nthis:\n  l \\<in> dom f\n  Obj f T = t\n  Obj f T => Obj fa T\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ua = \\<sigma>[s,p] t'')\n  z = Obj (fa(l \\<mapsto> ua)) T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from diamond_binder[OF \\<open>finite L\\<close> pred_u this(4-5)]"], ["proof (chain)\npicking this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))", "obtain Lb ub where\n          \"finite Lb\" and\n          ub1: \"\\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>u. ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> ub = \\<sigma>[s,p] u)\" and\n          ub2: \"\\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>u. u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> ub = \\<sigma>[s,p] u)\""], ["proof (prove)\nusing this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))\n\ngoal (1 subgoal):\n 1. (\\<And>Lb ub.\n        \\<lbrakk>finite Lb;\n         \\<forall>s p.\n            s \\<notin> Lb \\<and>\n            p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                ub = \\<sigma>[s,p] u);\n         \\<forall>s p.\n            s \\<notin> Lb \\<and>\n            p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                ub = \\<sigma>[s,p] u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite Lb\n  \\<forall>s p.\n     s \\<notin> Lb \\<and>\n     p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         ua\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> ub = \\<sigma>[s,p] u)\n  \\<forall>s p.\n     s \\<notin> Lb \\<and>\n     p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         u'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> ub = \\<sigma>[s,p] u)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from \\<open>Obj f T = t\\<close> \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\\<close>"], ["proof (chain)\npicking this:\n  Obj f T = t\n  Obj f T => Obj fa T", "have \"t \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\""], ["proof (prove)\nusing this:\n  Obj f T = t\n  Obj f T => Obj fa T\n\ngoal (1 subgoal):\n 1. t => Obj fa T", "by simp"], ["proof (state)\nthis:\n  t => Obj fa T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "with pred_t"], ["proof (chain)\npicking this:\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  t => Obj fa T", "obtain a where \"t' \\<Rightarrow>\\<^sub>\\<beta> a\" \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> a\""], ["proof (prove)\nusing this:\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  t => Obj fa T\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>t' => a; Obj fa T => a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' => a\n  Obj fa T => a\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "with \n          par_beta_lc[OF this(2)] \n          par_beta_body[OF \\<open>finite Lb\\<close> ub1]"], ["proof (chain)\npicking this:\n  lc (Obj fa T) \\<and> lc a\n  body ua \\<and> body ub\n  t' => a\n  Obj fa T => a", "obtain fb where\n          \"t' \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and\n          \"lc (Obj fa T)\" and \"body ua\""], ["proof (prove)\nusing this:\n  lc (Obj fa T) \\<and> lc a\n  body ua \\<and> body ub\n  t' => a\n  Obj fa T => a\n\ngoal (1 subgoal):\n 1. (\\<And>fb.\n        \\<lbrakk>t' => Obj fb T; Obj fa T => Obj fb T; lc (Obj fa T);\n         body ua\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' => Obj fb T\n  Obj fa T => Obj fb T\n  lc (Obj fa T)\n  body ua\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from Obj_pbeta_subst[OF \\<open>finite Lb\\<close> ub1 this(2-4)]"], ["proof (chain)\npicking this:\n  Obj (fa(?l \\<mapsto> ua)) T => Obj (fb(?l \\<mapsto> ub)) T", "have \"Obj (fa(l \\<mapsto> ua)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> ub)) T\""], ["proof (prove)\nusing this:\n  Obj (fa(?l \\<mapsto> ua)) T => Obj (fb(?l \\<mapsto> ub)) T\n\ngoal (1 subgoal):\n 1. Obj (fa(l \\<mapsto> ua)) T => Obj (fb(l \\<mapsto> ub)) T", "by assumption"], ["proof (state)\nthis:\n  Obj (fa(l \\<mapsto> ua)) T => Obj (fb(l \\<mapsto> ub)) T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "moreover"], ["proof (state)\nthis:\n  Obj (fa(l \\<mapsto> ua)) T => Obj (fb(l \\<mapsto> ub)) T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from \n          \\<open>t \\<Rightarrow>\\<^sub>\\<beta> t'\\<close> \\<open>Obj f T = t\\<close>\n          par_beta_lc[OF \\<open>t \\<Rightarrow>\\<^sub>\\<beta> t'\\<close>] \\<open>t' \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close>\n          par_beta_body[OF \\<open>finite Lb\\<close> ub2]"], ["proof (chain)\npicking this:\n  t => t'\n  Obj f T = t\n  lc t \\<and> lc t'\n  t' => Obj fb T\n  body u' \\<and> body ub", "obtain f' where \n          \"t' = Obj f' T\" and \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \n          \"lc (Obj f' T)\" and \"body u'\""], ["proof (prove)\nusing this:\n  t => t'\n  Obj f T = t\n  lc t \\<and> lc t'\n  t' => Obj fb T\n  body u' \\<and> body ub\n\ngoal (1 subgoal):\n 1. (\\<And>f'.\n        \\<lbrakk>t' = Obj f' T; Obj f' T => Obj fb T; lc (Obj f' T);\n         body u'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' = Obj f' T\n  Obj f' T => Obj fb T\n  lc (Obj f' T)\n  body u'\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "note par_beta.pbeta_Upd'[OF this(2) \\<open>finite Lb\\<close> ub2 _ this(3-4)]"], ["proof (state)\nthis:\n  ?l \\<in> dom f' \\<Longrightarrow>\n  Upd (Obj f' T) ?l u' => Obj (fb(?l \\<mapsto> ub)) T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "moreover"], ["proof (state)\nthis:\n  ?l \\<in> dom f' \\<Longrightarrow>\n  Upd (Obj f' T) ?l u' => Obj (fb(?l \\<mapsto> ub)) T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "from \n          \\<open>t \\<Rightarrow>\\<^sub>\\<beta> t'\\<close> \\<open>Obj f T = t\\<close> \\<open>t' = Obj f' T\\<close>\n          \\<open>l \\<in> dom f\\<close> Obj_pbeta[of f T f']"], ["proof (chain)\npicking this:\n  t => t'\n  Obj f T = t\n  t' = Obj f' T\n  l \\<in> dom f\n  Obj f T => Obj f' T \\<Longrightarrow>\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))", "have \"l \\<in> dom f'\""], ["proof (prove)\nusing this:\n  t => t'\n  Obj f T = t\n  t' = Obj f' T\n  l \\<in> dom f\n  Obj f T => Obj f' T \\<Longrightarrow>\n  dom f' = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (f' l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n\ngoal (1 subgoal):\n 1. l \\<in> dom f'", "by simp"], ["proof (state)\nthis:\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a L.\n       \\<lbrakk>l \\<in> dom f; Obj f T = t; Obj f T => Obj f' T; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               u\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u'a = \\<sigma>[s,p] t'');\n        z = Obj (f'(l \\<mapsto> u'a)) T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Upd t' l u' => u \\<and> z => u", "ultimately"], ["proof (chain)\npicking this:\n  Obj (fa(l \\<mapsto> ua)) T => Obj (fb(l \\<mapsto> ub)) T\n  ?l \\<in> dom f' \\<Longrightarrow>\n  Upd (Obj f' T) ?l u' => Obj (fb(?l \\<mapsto> ub)) T\n  l \\<in> dom f'", "show ?case"], ["proof (prove)\nusing this:\n  Obj (fa(l \\<mapsto> ua)) T => Obj (fb(l \\<mapsto> ub)) T\n  ?l \\<in> dom f' \\<Longrightarrow>\n  Upd (Obj f' T) ?l u' => Obj (fb(?l \\<mapsto> ub)) T\n  l \\<in> dom f'\n\ngoal (1 subgoal):\n 1. \\<exists>u. Upd t' l u' => u \\<and> z => u", "using \\<open>z = Obj (fa(l \\<mapsto> ua)) T\\<close> \\<open>t' = Obj f' T\\<close>"], ["proof (prove)\nusing this:\n  Obj (fa(l \\<mapsto> ua)) T => Obj (fb(l \\<mapsto> ub)) T\n  ?l \\<in> dom f' \\<Longrightarrow>\n  Upd (Obj f' T) ?l u' => Obj (fb(?l \\<mapsto> ub)) T\n  l \\<in> dom f'\n  z = Obj (fa(l \\<mapsto> ua)) T\n  t' = Obj f' T\n\ngoal (1 subgoal):\n 1. \\<exists>u. Upd t' l u' => u \\<and> z => u", "by (rule_tac x = \"Obj (fb(l \\<mapsto> ub)) T\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. Upd t' l u' => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. Upd t' l u' => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>z.\n     Upd t l u => z \\<longrightarrow>\n     (\\<exists>u. Upd t' l u' => u \\<and> z => u)\n\ngoal (4 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 3. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 4. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 3. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 4. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "case (pbeta_Obj f' f L T)"], ["proof (state)\nthis:\n  dom f' = dom f\n  finite L\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n             (\\<forall>z.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 z \\<longrightarrow>\n                 (\\<exists>u. t => u \\<and> z => u))) \\<and>\n            the (f' l) = \\<sigma>[s,p] t)\n  \\<forall>l\\<in>dom f. body (the (f l))\n\ngoal (4 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 3. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 4. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "note pred = this(3)"], ["proof (state)\nthis:\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> L \\<and>\n        p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n             (\\<forall>z.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                 z \\<longrightarrow>\n                 (\\<exists>u. t => u \\<and> z => u))) \\<and>\n            the (f' l) = \\<sigma>[s,p] t)\n\ngoal (4 subgoals):\n 1. \\<And>f' f L T.\n       \\<lbrakk>dom f' = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  (the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   (\\<forall>z.\n                       the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> =>\n                       z \\<longrightarrow>\n                       (\\<exists>u. t => u \\<and> z => u))) \\<and>\n                  the (f' l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Obj f T => z \\<longrightarrow>\n                            (\\<exists>u. Obj f' T => u \\<and> z => u)\n 2. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 3. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 4. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z.\n       Obj f T => z \\<longrightarrow>\n       (\\<exists>u. Obj f' T => u \\<and> z => u)", "proof (clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z f'a L.\n       \\<lbrakk>dom f'a = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (f'a l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Obj f' T => u \\<and> Obj f'a T => u", "(* Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T \\<and> Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z f'a L.\n       \\<lbrakk>dom f'a = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (f'a l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Obj f' T => u \\<and> Obj f'a T => u", "fix fa La"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z f'a L.\n       \\<lbrakk>dom f'a = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (f'a l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Obj f' T => u \\<and> Obj f'a T => u", "assume \n        \"dom fa = dom f\" and \"finite La\" and\n        \"\\<forall>l\\<in>dom f. \\<forall>s p. s \\<notin> La \\<and> p \\<notin> La \\<and> s \\<noteq> p\n                     \\<longrightarrow> (\\<exists>t. the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                            \\<and> the (fa l) = \\<sigma>[s,p] t)\""], ["proof (state)\nthis:\n  dom fa = dom f\n  finite La\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> La \\<and>\n        p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fa l) = \\<sigma>[s,p] t)\n\ngoal (1 subgoal):\n 1. \\<And>z f'a L.\n       \\<lbrakk>dom f'a = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (f'a l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Obj f' T => u \\<and> Obj f'a T => u", "from \n        exL_exMap[OF sym[OF this(1)] \\<open>dom f' = dom f\\<close> \n                     \\<open>finite L\\<close> pred this(2)]\n        this(1) this(3) \\<open>dom f' = dom f\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>dom fa.\n     \\<forall>s p.\n        s \\<notin> La \\<and>\n        p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fa l) = \\<sigma>[s,p] t) \\<Longrightarrow>\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>lu.\n         dom lu = dom f \\<and>\n         (\\<forall>l\\<in>dom f.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom f. body (the (f' l))) \\<and>\n         (\\<forall>l\\<in>dom f.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom f. body (the (fa l))))\n  dom fa = dom f\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> La \\<and>\n        p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fa l) = \\<sigma>[s,p] t)\n  dom f' = dom f", "obtain Lb fb where \n        \"dom fb = dom f'\" and \"dom fb = dom fa\" and \"finite Lb\" and\n        \"\\<forall>l\\<in>dom f'. \\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                      \\<longrightarrow> (\\<exists>t. the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                             \\<and> the (fb l) = \\<sigma>[s,p] t)\" and\n        \"\\<forall>l\\<in>dom f'. body (the (f' l))\" and\n        \"\\<forall>l\\<in>dom fa. \\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                      \\<longrightarrow> (\\<exists>t. the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> t \n                             \\<and> the (fb l) = \\<sigma>[s,p] t)\" and\n        \"\\<forall>l\\<in>dom fa. body (the (fa l))\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>dom fa.\n     \\<forall>s p.\n        s \\<notin> La \\<and>\n        p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fa l) = \\<sigma>[s,p] t) \\<Longrightarrow>\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>lu.\n         dom lu = dom f \\<and>\n         (\\<forall>l\\<in>dom f.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom f. body (the (f' l))) \\<and>\n         (\\<forall>l\\<in>dom f.\n             \\<forall>s p.\n                s \\<notin> L' \\<and>\n                p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n                (\\<exists>t.\n                    the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                    the (lu l) = \\<sigma>[s,p] t)) \\<and>\n         (\\<forall>l\\<in>dom f. body (the (fa l))))\n  dom fa = dom f\n  \\<forall>l\\<in>dom f.\n     \\<forall>s p.\n        s \\<notin> La \\<and>\n        p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fa l) = \\<sigma>[s,p] t)\n  dom f' = dom f\n\ngoal (1 subgoal):\n 1. (\\<And>fb Lb.\n        \\<lbrakk>dom fb = dom f'; dom fb = dom fa; finite Lb;\n         \\<forall>l\\<in>dom f'.\n            \\<forall>s p.\n               s \\<notin> Lb \\<and>\n               p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t.\n                   the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   the (fb l) = \\<sigma>[s,p] t);\n         \\<forall>l\\<in>dom f'. body (the (f' l));\n         \\<forall>l\\<in>dom fa.\n            \\<forall>s p.\n               s \\<notin> Lb \\<and>\n               p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n               (\\<exists>t.\n                   the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                   the (fb l) = \\<sigma>[s,p] t);\n         \\<forall>l\\<in>dom fa. body (the (fa l))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  dom fb = dom f'\n  dom fb = dom fa\n  finite Lb\n  \\<forall>l\\<in>dom f'.\n     \\<forall>s p.\n        s \\<notin> Lb \\<and>\n        p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fb l) = \\<sigma>[s,p] t)\n  \\<forall>l\\<in>dom f'. body (the (f' l))\n  \\<forall>l\\<in>dom fa.\n     \\<forall>s p.\n        s \\<notin> Lb \\<and>\n        p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n        (\\<exists>t.\n            the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n            the (fb l) = \\<sigma>[s,p] t)\n  \\<forall>l\\<in>dom fa. body (the (fa l))\n\ngoal (1 subgoal):\n 1. \\<And>z f'a L.\n       \\<lbrakk>dom f'a = dom f; finite L;\n        \\<forall>l\\<in>dom f.\n           \\<forall>s p.\n              s \\<notin> L \\<and>\n              p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n              (\\<exists>t.\n                  the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                  the (f'a l) = \\<sigma>[s,p] t);\n        \\<forall>l\\<in>dom f. body (the (f l))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Obj f' T => u \\<and> Obj f'a T => u", "from \n        par_beta.pbeta_Obj[OF this(1) this(3-5)]\n        par_beta.pbeta_Obj[OF this(2) this(3) this(6-7)]"], ["proof (chain)\npicking this:\n  Obj f' ?T => Obj fb ?T\n  Obj fa ?T => Obj fb ?T", "show \"\\<exists>u. Obj f' T \\<Rightarrow>\\<^sub>\\<beta> u \\<and> Obj fa T \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  Obj f' ?T => Obj fb ?T\n  Obj fa ?T => Obj fb ?T\n\ngoal (1 subgoal):\n 1. \\<exists>u. Obj f' T => u \\<and> Obj fa T => u", "by (rule_tac x = \"Obj fb T\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. Obj f' T => u \\<and> Obj fa T => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n\ngoal (3 subgoals):\n 1. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 2. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 2. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "case (pbeta_Upd' f T f' L t t' l)"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  finite L\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          (\\<forall>z.\n              t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n              (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n         t' = \\<sigma>[s,p] t'')\n  l \\<in> dom f\n  lc (Obj f T)\n  body t\n\ngoal (3 subgoals):\n 1. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 2. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "note pred_obj = this(2) and pred_bnd = this(4)"], ["proof (state)\nthis:\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  \\<forall>s p.\n     s \\<notin> L \\<and> p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n          (\\<forall>z.\n              t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n              (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n         t' = \\<sigma>[s,p] t'')\n\ngoal (3 subgoals):\n 1. \\<And>f T f' L t t' l.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               (t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n                (\\<forall>z.\n                    t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => z \\<longrightarrow>\n                    (\\<exists>u. t'' => u \\<and> z => u))) \\<and>\n               t' = \\<sigma>[s,p] t'');\n        l \\<in> dom f; lc (Obj f T); body t\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Upd (Obj f T) l t => z \\<longrightarrow>\n                            (\\<exists>u.\n                                Obj (f'(l \\<mapsto> t')) T => u \\<and>\n                                z => u)\n 2. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 3. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z.\n       Upd (Obj f T) l t => z \\<longrightarrow>\n       (\\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u)", "proof (clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Upd (Obj f T) l t => z \\<Longrightarrow>\n       \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Upd (Obj f T) l t => z \\<Longrightarrow>\n       \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "assume \"Upd (Obj f T) l t \\<Rightarrow>\\<^sub>\\<beta> z\""], ["proof (state)\nthis:\n  Upd (Obj f T) l t => z\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       Upd (Obj f T) l t => z \\<Longrightarrow>\n       \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "thus \"\\<exists>u. Obj (f'(l \\<mapsto> t')) T \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  Upd (Obj f T) l t => z\n\ngoal (1 subgoal):\n 1. \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "proof (induct rule: Upd_par_red)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "(* Upd': case Upd \n             Obj (f'(l \\<mapsto> t')) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T \n           \\<and> Upd (Obj fa T) l ta \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T *)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "case (upd a ta La)"], ["proof (state)\nthis:\n  Obj f T => a\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n  z = Upd a l ta\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "note pred_ta = this(3)"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> a\\<close> \\<open>z = Upd a l ta\\<close>"], ["proof (chain)\npicking this:\n  Obj f T => a\n  z = Upd a l ta", "obtain fa where \n          \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\" and \"z = Upd (Obj fa T) l ta\""], ["proof (prove)\nusing this:\n  Obj f T => a\n  z = Upd a l ta\n\ngoal (1 subgoal):\n 1. (\\<And>fa.\n        \\<lbrakk>Obj f T => Obj fa T; z = Upd (Obj fa T) l ta\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Obj f T => Obj fa T\n  z = Upd (Obj fa T) l ta\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from this(1) pred_obj"], ["proof (chain)\npicking this:\n  Obj f T => Obj fa T\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)", "obtain b where \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> b\" and \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> b\""], ["proof (prove)\nusing this:\n  Obj f T => Obj fa T\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>Obj f' T => b; Obj fa T => b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim allE impE exE conjE, simp)"], ["proof (state)\nthis:\n  Obj f' T => b\n  Obj fa T => b\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "with \n          par_beta_lc[OF this(1)] par_beta_lc[OF this(2)]"], ["proof (chain)\npicking this:\n  lc (Obj f' T) \\<and> lc b\n  lc (Obj fa T) \\<and> lc b\n  Obj f' T => b\n  Obj fa T => b", "obtain fb where \n          \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj f' T)\" and\n          \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj fa T)\""], ["proof (prove)\nusing this:\n  lc (Obj f' T) \\<and> lc b\n  lc (Obj fa T) \\<and> lc b\n  Obj f' T => b\n  Obj fa T => b\n\ngoal (1 subgoal):\n 1. (\\<And>fb.\n        \\<lbrakk>Obj f' T => Obj fb T; lc (Obj f' T); Obj fa T => Obj fb T;\n         lc (Obj fa T)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Obj f' T => Obj fb T\n  lc (Obj f' T)\n  Obj fa T => Obj fb T\n  lc (Obj fa T)\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from diamond_binder[OF \\<open>finite L\\<close> pbeta_Upd'(4) \\<open>finite La\\<close> pred_ta]"], ["proof (chain)\npicking this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))", "obtain Lb tb where \n          \"finite Lb\" and\n          cb1: \"\\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>u. t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> tb = \\<sigma>[s,p] u)\" and\n          cb2: \"\\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>u. ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> tb = \\<sigma>[s,p] u)\""], ["proof (prove)\nusing this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))\n\ngoal (1 subgoal):\n 1. (\\<And>Lb tb.\n        \\<lbrakk>finite Lb;\n         \\<forall>s p.\n            s \\<notin> Lb \\<and>\n            p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                tb = \\<sigma>[s,p] u);\n         \\<forall>s p.\n            s \\<notin> Lb \\<and>\n            p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                tb = \\<sigma>[s,p] u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite Lb\n  \\<forall>s p.\n     s \\<notin> Lb \\<and>\n     p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> tb = \\<sigma>[s,p] u)\n  \\<forall>s p.\n     s \\<notin> Lb \\<and>\n     p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> tb = \\<sigma>[s,p] u)\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from \n          par_beta_body[OF this(1-2)] \n          Obj_pbeta_subst[OF \\<open>finite Lb\\<close> cb1 \\<open>Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close>\n                             \\<open>lc (Obj f' T)\\<close>]"], ["proof (chain)\npicking this:\n  body t' \\<and> body tb\n  body t' \\<Longrightarrow>\n  Obj (f'(?l \\<mapsto> t')) T => Obj (fb(?l \\<mapsto> tb)) T", "have \"Obj (f'(l \\<mapsto> t')) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T\""], ["proof (prove)\nusing this:\n  body t' \\<and> body tb\n  body t' \\<Longrightarrow>\n  Obj (f'(?l \\<mapsto> t')) T => Obj (fb(?l \\<mapsto> tb)) T\n\ngoal (1 subgoal):\n 1. Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T", "by simp"], ["proof (state)\nthis:\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "moreover"], ["proof (state)\nthis:\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from Obj_pbeta[OF \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\\<close>] \\<open>l \\<in> dom f\\<close>"], ["proof (chain)\npicking this:\n  dom fa = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (fa l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n  l \\<in> dom f", "have \"l \\<in> dom fa\""], ["proof (prove)\nusing this:\n  dom fa = dom f \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (fa l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f. body (the (f l)))\n  l \\<in> dom f\n\ngoal (1 subgoal):\n 1. l \\<in> dom fa", "by simp"], ["proof (state)\nthis:\n  l \\<in> dom fa\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from \n          par_beta_body[OF \\<open>finite Lb\\<close> cb2]\n          par_beta.pbeta_Upd'[OF \\<open>Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close> \\<open>finite Lb\\<close> \n                                 cb2 this \\<open>lc (Obj fa T)\\<close>]"], ["proof (chain)\npicking this:\n  body ta \\<and> body tb\n  body ta \\<Longrightarrow>\n  Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T", "have \"Upd (Obj fa T) l ta \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T\""], ["proof (prove)\nusing this:\n  body ta \\<and> body tb\n  body ta \\<Longrightarrow>\n  Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (1 subgoal):\n 1. Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T", "by simp"], ["proof (state)\nthis:\n  Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (2 subgoals):\n 1. \\<And>t'a u' L.\n       \\<lbrakk>Obj f T => t'a; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Upd t'a l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n 2. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "ultimately"], ["proof (chain)\npicking this:\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n  Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T", "show ?case"], ["proof (prove)\nusing this:\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n  Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (1 subgoal):\n 1. \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "using \\<open>z = Upd (Obj fa T) l ta\\<close>"], ["proof (prove)\nusing this:\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n  Upd (Obj fa T) l ta => Obj (fb(l \\<mapsto> tb)) T\n  z = Upd (Obj fa T) l ta\n\ngoal (1 subgoal):\n 1. \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "by (rule_tac x = \"Obj (fb(l \\<mapsto> tb)) T\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "(* Upd': case Obj \n             Obj (f'(l \\<mapsto> t')) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T \n           \\<and> Obj (fa(l \\<mapsto> ta)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "case (obj f'' fa T' ta La)"], ["proof (state)\nthis:\n  l \\<in> dom f''\n  Obj f'' T' = Obj f T\n  Obj f'' T' => Obj fa T'\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n  z = Obj (fa(l \\<mapsto> ta)) T'\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "note pred_ta = this(5) and this"], ["proof (state)\nthis:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n  l \\<in> dom f''\n  Obj f'' T' = Obj f T\n  Obj f'' T' => Obj fa T'\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n  z = Obj (fa(l \\<mapsto> ta)) T'\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "hence \n          \"l \\<in> dom f\" and \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\" and\n          \"z = Obj (fa(l \\<mapsto> ta)) T\""], ["proof (prove)\nusing this:\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n  l \\<in> dom f''\n  Obj f'' T' = Obj f T\n  Obj f'' T' => Obj fa T'\n  finite La\n  \\<forall>s p.\n     s \\<notin> La \\<and>\n     p \\<notin> La \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>t''.\n         t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n         ta = \\<sigma>[s,p] t'')\n  z = Obj (fa(l \\<mapsto> ta)) T'\n\ngoal (1 subgoal):\n 1. l \\<in> dom f &&& Obj f T => Obj fa T &&& z = Obj (fa(l \\<mapsto> ta)) T", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f\n  Obj f T => Obj fa T\n  z = Obj (fa(l \\<mapsto> ta)) T\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from diamond_binder[OF \\<open>finite L\\<close> pred_bnd \\<open>finite La\\<close> pred_ta]"], ["proof (chain)\npicking this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))", "obtain Lb tb where\n          \"finite Lb\" and\n          tb1: \"\\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>u. t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> tb = \\<sigma>[s,p] u)\" and\n          tb2: \"\\<forall>s p. s \\<notin> Lb \\<and> p \\<notin> Lb \\<and> s \\<noteq> p \n                 \\<longrightarrow> (\\<exists>u. ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> tb = \\<sigma>[s,p] u)\""], ["proof (prove)\nusing this:\n  \\<exists>L'.\n     finite L' \\<and>\n     (\\<exists>t''.\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)) \\<and>\n         (\\<forall>s p.\n             s \\<notin> L' \\<and>\n             p \\<notin> L' \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>u.\n                 ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                 t'' = \\<sigma>[s,p] u)))\n\ngoal (1 subgoal):\n 1. (\\<And>Lb tb.\n        \\<lbrakk>finite Lb;\n         \\<forall>s p.\n            s \\<notin> Lb \\<and>\n            p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                tb = \\<sigma>[s,p] u);\n         \\<forall>s p.\n            s \\<notin> Lb \\<and>\n            p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n            (\\<exists>u.\n                ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and>\n                tb = \\<sigma>[s,p] u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite Lb\n  \\<forall>s p.\n     s \\<notin> Lb \\<and>\n     p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         t'\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> tb = \\<sigma>[s,p] u)\n  \\<forall>s p.\n     s \\<notin> Lb \\<and>\n     p \\<notin> Lb \\<and> s \\<noteq> p \\<longrightarrow>\n     (\\<exists>u.\n         ta\\<^bsup>[Fvar s,Fvar p]\\<^esup> => u \\<and> tb = \\<sigma>[s,p] u)\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\\<close> pred_obj"], ["proof (chain)\npicking this:\n  Obj f T => Obj fa T\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)", "obtain b where \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> b\" and \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> b\""], ["proof (prove)\nusing this:\n  Obj f T => Obj fa T\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>Obj f' T => b; Obj fa T => b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim allE impE exE conjE, simp)"], ["proof (state)\nthis:\n  Obj f' T => b\n  Obj fa T => b\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "with par_beta_lc[OF this(1)] par_beta_lc[OF this(2)]"], ["proof (chain)\npicking this:\n  lc (Obj f' T) \\<and> lc b\n  lc (Obj fa T) \\<and> lc b\n  Obj f' T => b\n  Obj fa T => b", "obtain fb where \n          \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" \"lc (Obj f' T)\" and\n          \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" \"lc (Obj fa T)\""], ["proof (prove)\nusing this:\n  lc (Obj f' T) \\<and> lc b\n  lc (Obj fa T) \\<and> lc b\n  Obj f' T => b\n  Obj fa T => b\n\ngoal (1 subgoal):\n 1. (\\<And>fb.\n        \\<lbrakk>Obj f' T => Obj fb T; lc (Obj f' T); Obj fa T => Obj fb T;\n         lc (Obj fa T)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Obj f' T => Obj fb T\n  lc (Obj f' T)\n  Obj fa T => Obj fb T\n  lc (Obj fa T)\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "from \n          par_beta_body[OF \\<open>finite Lb\\<close> tb1] \n          Obj_pbeta_subst[OF \\<open>finite Lb\\<close> tb1 this(1-2)]\n          par_beta_body[OF \\<open>finite Lb\\<close> tb2] \n          Obj_pbeta_subst[OF \\<open>finite Lb\\<close> tb2 this(3-4)]"], ["proof (chain)\npicking this:\n  body t' \\<and> body tb\n  body t' \\<Longrightarrow>\n  Obj (f'(?l \\<mapsto> t')) T => Obj (fb(?l \\<mapsto> tb)) T\n  body ta \\<and> body tb\n  body ta \\<Longrightarrow>\n  Obj (fa(?l \\<mapsto> ta)) T => Obj (fb(?l \\<mapsto> tb)) T", "have \n          \"Obj (f'(l \\<mapsto> t')) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T\" and\n          \"Obj (fa(l \\<mapsto> ta)) T \\<Rightarrow>\\<^sub>\\<beta> Obj (fb(l \\<mapsto> tb)) T\""], ["proof (prove)\nusing this:\n  body t' \\<and> body tb\n  body t' \\<Longrightarrow>\n  Obj (f'(?l \\<mapsto> t')) T => Obj (fb(?l \\<mapsto> tb)) T\n  body ta \\<and> body tb\n  body ta \\<Longrightarrow>\n  Obj (fa(?l \\<mapsto> ta)) T => Obj (fb(?l \\<mapsto> tb)) T\n\ngoal (1 subgoal):\n 1. Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T &&&\n    Obj (fa(l \\<mapsto> ta)) T => Obj (fb(l \\<mapsto> tb)) T", "by simp+"], ["proof (state)\nthis:\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n  Obj (fa(l \\<mapsto> ta)) T => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u' L.\n       \\<lbrakk>l \\<in> dom fa; Obj fa Ta = Obj f T;\n        Obj fa Ta => Obj f'a Ta; finite L;\n        \\<forall>s p.\n           s \\<notin> L \\<and>\n           p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n           (\\<exists>t''.\n               t\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t'' \\<and>\n               u' = \\<sigma>[s,p] t'');\n        z = Obj (f'a(l \\<mapsto> u')) Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "with \\<open>z = Obj (fa(l \\<mapsto> ta)) T\\<close>"], ["proof (chain)\npicking this:\n  z = Obj (fa(l \\<mapsto> ta)) T\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n  Obj (fa(l \\<mapsto> ta)) T => Obj (fb(l \\<mapsto> tb)) T", "show ?case"], ["proof (prove)\nusing this:\n  z = Obj (fa(l \\<mapsto> ta)) T\n  Obj (f'(l \\<mapsto> t')) T => Obj (fb(l \\<mapsto> tb)) T\n  Obj (fa(l \\<mapsto> ta)) T => Obj (fb(l \\<mapsto> tb)) T\n\ngoal (1 subgoal):\n 1. \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u", "by (rule_tac x = \"Obj (fb(l \\<mapsto> tb)) T\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>z.\n     Upd (Obj f T) l t => z \\<longrightarrow>\n     (\\<exists>u. Obj (f'(l \\<mapsto> t')) T => u \\<and> z => u)\n\ngoal (2 subgoals):\n 1. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 2. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 2. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "case (pbeta_Call t t' u u' l)"], ["proof (state)\nthis:\n  t => t'\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  u => u'\n  \\<forall>z. u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u)\n  lc t\n  lc u\n\ngoal (2 subgoals):\n 1. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 2. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "note pred_t = this(2) and pred_u = this(4)"], ["proof (state)\nthis:\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  \\<forall>z. u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u)\n\ngoal (2 subgoals):\n 1. \\<And>t t' u u' l.\n       \\<lbrakk>t => t';\n        \\<forall>z.\n           t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u);\n        u => u';\n        \\<forall>z.\n           u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u);\n        lc t; lc u\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call t l u => z \\<longrightarrow>\n                            (\\<exists>u. Call t' l u' => u \\<and> z => u)\n 2. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z.\n       Call t l u => z \\<longrightarrow>\n       (\\<exists>u. Call t' l u' => u \\<and> z => u)", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Call t l u => z \\<Longrightarrow>\n       \\<exists>u. Call t' l u' => u \\<and> z => u", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Call t l u => z \\<Longrightarrow>\n       \\<exists>u. Call t' l u' => u \\<and> z => u", "assume \"Call t l u \\<Rightarrow>\\<^sub>\\<beta> z\""], ["proof (state)\nthis:\n  Call t l u => z\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       Call t l u => z \\<Longrightarrow>\n       \\<exists>u. Call t' l u' => u \\<and> z => u", "thus \"\\<exists>u. Call t' l u' \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  Call t l u => z\n\ngoal (1 subgoal):\n 1. \\<exists>u. Call t' l u' => u \\<and> z => u", "proof (induct rule: Call_par_red)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ta u'a.\n       \\<lbrakk>t => ta; u => u'a; z = Call ta l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "(* Call: case Call \n             Call t' l u' \\<Rightarrow>\\<^sub>\\<beta> Call tb l ub \\<and> Call t' l u' \\<Rightarrow>\\<^sub>\\<beta> Call tb l ub *)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ta u'a.\n       \\<lbrakk>t => ta; u => u'a; z = Call ta l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "case (call ta ua)"], ["proof (state)\nthis:\n  t => ta\n  u => ua\n  z = Call ta l ua\n\ngoal (2 subgoals):\n 1. \\<And>ta u'a.\n       \\<lbrakk>t => ta; u => u'a; z = Call ta l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from \n          this(1-2) pred_t pred_u"], ["proof (chain)\npicking this:\n  t => ta\n  u => ua\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  \\<forall>z. u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u)", "obtain tb ub where \"t' \\<Rightarrow>\\<^sub>\\<beta> tb\" \"u' \\<Rightarrow>\\<^sub>\\<beta> ub\" \"ta \\<Rightarrow>\\<^sub>\\<beta> tb\" \"ua \\<Rightarrow>\\<^sub>\\<beta> ub\""], ["proof (prove)\nusing this:\n  t => ta\n  u => ua\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  \\<forall>z. u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u)\n\ngoal (1 subgoal):\n 1. (\\<And>tb ub.\n        \\<lbrakk>t' => tb; u' => ub; ta => tb; ua => ub\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim allE impE exE conjE, simp)"], ["proof (state)\nthis:\n  t' => tb\n  u' => ub\n  ta => tb\n  ua => ub\n\ngoal (2 subgoals):\n 1. \\<And>ta u'a.\n       \\<lbrakk>t => ta; u => u'a; z = Call ta l u'a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u\n 2. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from \n          par_beta_lc[OF this(1)] par_beta_lc[OF this(2)]\n          par_beta.pbeta_Call[OF this(1-2)]\n          par_beta_lc[OF this(3)] par_beta_lc[OF this(4)] \n          par_beta.pbeta_Call[OF this(3-4)]\n          \\<open>z = Call ta l ua\\<close>"], ["proof (chain)\npicking this:\n  lc t' \\<and> lc tb\n  lc u' \\<and> lc ub\n  \\<lbrakk>lc t'; lc u'\\<rbrakk>\n  \\<Longrightarrow> Call t' ?l u' => Call tb ?l ub\n  lc ta \\<and> lc tb\n  lc ua \\<and> lc ub\n  \\<lbrakk>lc ta; lc ua\\<rbrakk>\n  \\<Longrightarrow> Call ta ?l ua => Call tb ?l ub\n  z = Call ta l ua", "show ?case"], ["proof (prove)\nusing this:\n  lc t' \\<and> lc tb\n  lc u' \\<and> lc ub\n  \\<lbrakk>lc t'; lc u'\\<rbrakk>\n  \\<Longrightarrow> Call t' ?l u' => Call tb ?l ub\n  lc ta \\<and> lc tb\n  lc ua \\<and> lc ub\n  \\<lbrakk>lc ta; lc ua\\<rbrakk>\n  \\<Longrightarrow> Call ta ?l ua => Call tb ?l ub\n  z = Call ta l ua\n\ngoal (1 subgoal):\n 1. \\<exists>u. Call t' l u' => u \\<and> z => u", "by (rule_tac x = \"Call tb l ub\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. Call t' l u' => u \\<and> z => u\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "(* Call: case beta \n             Call (Obj f' T) l u' \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n           \\<and> the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>) *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "case (beta f fa T ua)"], ["proof (state)\nthis:\n  Obj f T = t\n  Obj f T => Obj fa T\n  l \\<in> dom fa\n  u => ua\n  z = (the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from this(1-2)"], ["proof (chain)\npicking this:\n  Obj f T = t\n  Obj f T => Obj fa T", "have \"t \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\""], ["proof (prove)\nusing this:\n  Obj f T = t\n  Obj f T => Obj fa T\n\ngoal (1 subgoal):\n 1. t => Obj fa T", "by simp"], ["proof (state)\nthis:\n  t => Obj fa T\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "with \\<open>u \\<Rightarrow>\\<^sub>\\<beta> ua\\<close> pred_t pred_u"], ["proof (chain)\npicking this:\n  u => ua\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  \\<forall>z. u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u)\n  t => Obj fa T", "obtain b ub where \n          \"t' \\<Rightarrow>\\<^sub>\\<beta> b\" and \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> b\" and \"u' \\<Rightarrow>\\<^sub>\\<beta> ub\" and \"ua \\<Rightarrow>\\<^sub>\\<beta> ub\""], ["proof (prove)\nusing this:\n  u => ua\n  \\<forall>z. t => z \\<longrightarrow> (\\<exists>u. t' => u \\<and> z => u)\n  \\<forall>z. u => z \\<longrightarrow> (\\<exists>u. u' => u \\<and> z => u)\n  t => Obj fa T\n\ngoal (1 subgoal):\n 1. (\\<And>b ub.\n        \\<lbrakk>t' => b; Obj fa T => b; u' => ub; ua => ub\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim allE impE exE conjE, simp)"], ["proof (state)\nthis:\n  t' => b\n  Obj fa T => b\n  u' => ub\n  ua => ub\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from this(1-2) par_beta_lc[OF this(2)]"], ["proof (chain)\npicking this:\n  t' => b\n  Obj fa T => b\n  lc (Obj fa T) \\<and> lc b", "obtain fb where \n          \"t' \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \n          \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj fa T)\""], ["proof (prove)\nusing this:\n  t' => b\n  Obj fa T => b\n  lc (Obj fa T) \\<and> lc b\n\ngoal (1 subgoal):\n 1. (\\<And>fb.\n        \\<lbrakk>t' => Obj fb T; Obj fa T => Obj fb T;\n         lc (Obj fa T)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' => Obj fb T\n  Obj fa T => Obj fb T\n  lc (Obj fa T)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from \n          par_beta_beta[OF \\<open>l \\<in> dom fa\\<close> this(2) \\<open>ua \\<Rightarrow>\\<^sub>\\<beta> ub\\<close> this(3)]\n          par_beta_lc[OF \\<open>ua \\<Rightarrow>\\<^sub>\\<beta> ub\\<close>]"], ["proof (chain)\npicking this:\n  lc ua \\<Longrightarrow>\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  lc ua \\<and> lc ub", "have \"the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\""], ["proof (prove)\nusing this:\n  lc ua \\<Longrightarrow>\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  lc ua \\<and> lc ub\n\ngoal (1 subgoal):\n 1. the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n    (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)", "by simp"], ["proof (state)\nthis:\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "moreover"], ["proof (state)\nthis:\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from \\<open>l \\<in> dom fa\\<close> Obj_pbeta[OF \\<open>Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close>]"], ["proof (chain)\npicking this:\n  l \\<in> dom fa\n  dom fb = dom fa \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom fa.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (fb l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom fa. body (the (fa l)))", "have \"l \\<in> dom fb\""], ["proof (prove)\nusing this:\n  l \\<in> dom fa\n  dom fb = dom fa \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom fa.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (fa l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (fb l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom fa. body (the (fa l)))\n\ngoal (1 subgoal):\n 1. l \\<in> dom fb", "by simp"], ["proof (state)\nthis:\n  l \\<in> dom fb\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from \n          \\<open>t \\<Rightarrow>\\<^sub>\\<beta> t'\\<close> sym[OF \\<open>Obj f T = t\\<close>]\n          par_beta_lc[OF \\<open>t \\<Rightarrow>\\<^sub>\\<beta> t'\\<close>] \\<open>t' \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close>"], ["proof (chain)\npicking this:\n  t => t'\n  t = Obj f T\n  lc t \\<and> lc t'\n  t' => Obj fb T", "obtain f' where \n          \"t' = Obj f' T\" and \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and\n          \"lc (Obj f' T)\""], ["proof (prove)\nusing this:\n  t => t'\n  t = Obj f T\n  lc t \\<and> lc t'\n  t' => Obj fb T\n\ngoal (1 subgoal):\n 1. (\\<And>f'.\n        \\<lbrakk>t' = Obj f' T; Obj f' T => Obj fb T; lc (Obj f' T)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' = Obj f' T\n  Obj f' T => Obj fb T\n  lc (Obj f' T)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "from \n          Obj_pbeta[OF this(2)] \\<open>l \\<in> dom fb\\<close>\n          par_beta.pbeta_beta[OF this(2) _ \\<open>u' \\<Rightarrow>\\<^sub>\\<beta> ub\\<close> this(3)]\n          par_beta_lc[OF \\<open>u' \\<Rightarrow>\\<^sub>\\<beta> ub\\<close>]"], ["proof (chain)\npicking this:\n  dom fb = dom f' \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f'.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (fb l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f'. body (the (f' l)))\n  l \\<in> dom fb\n  \\<lbrakk>?l \\<in> dom f'; lc u'\\<rbrakk>\n  \\<Longrightarrow> Call (Obj f' T) ?l u' =>\n                    (the (fb ?l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  lc u' \\<and> lc ub", "have \"Call (Obj f' T) l u' \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\""], ["proof (prove)\nusing this:\n  dom fb = dom f' \\<and>\n  (\\<exists>L.\n      finite L \\<and>\n      (\\<forall>l\\<in>dom f'.\n          \\<forall>s p.\n             s \\<notin> L \\<and>\n             p \\<notin> L \\<and> s \\<noteq> p \\<longrightarrow>\n             (\\<exists>t.\n                 the (f' l)\\<^bsup>[Fvar s,Fvar p]\\<^esup> => t \\<and>\n                 the (fb l) = \\<sigma>[s,p] t))) \\<and>\n  (\\<forall>l\\<in>dom f'. body (the (f' l)))\n  l \\<in> dom fb\n  \\<lbrakk>?l \\<in> dom f'; lc u'\\<rbrakk>\n  \\<Longrightarrow> Call (Obj f' T) ?l u' =>\n                    (the (fb ?l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  lc u' \\<and> lc ub\n\ngoal (1 subgoal):\n 1. Call (Obj f' T) l u' => (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)", "by auto"], ["proof (state)\nthis:\n  Call (Obj f' T) l u' => (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>f f' T u'a.\n       \\<lbrakk>Obj f T = t; Obj f T => Obj f' T; l \\<in> dom f'; u => u'a;\n        z = (the (f' l)\\<^bsup>[Obj f' T,u'a]\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u. Call t' l u' => u \\<and> z => u", "ultimately"], ["proof (chain)\npicking this:\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  Call (Obj f' T) l u' => (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)", "show ?case"], ["proof (prove)\nusing this:\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  Call (Obj f' T) l u' => (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<exists>u. Call t' l u' => u \\<and> z => u", "using \\<open>t' = Obj f' T\\<close> \\<open>z = (the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup>)\\<close>"], ["proof (prove)\nusing this:\n  the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  Call (Obj f' T) l u' => (the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\n  t' = Obj f' T\n  z = (the (fa l)\\<^bsup>[Obj fa T,ua]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<exists>u. Call t' l u' => u \\<and> z => u", "by (rule_tac x = \"(the (fb l)\\<^bsup>[Obj fb T,ub]\\<^esup>)\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. Call t' l u' => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. Call t' l u' => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>z.\n     Call t l u => z \\<longrightarrow>\n     (\\<exists>u. Call t' l u' => u \\<and> z => u)\n\ngoal (1 subgoal):\n 1. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "case (pbeta_beta f T f' l p p')"], ["proof (state)\nthis:\n  Obj f T => Obj f' T\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  l \\<in> dom f\n  p => p'\n  \\<forall>z. p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u)\n  lc (Obj f T)\n  lc p\n\ngoal (1 subgoal):\n 1. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "note pred_obj = this(2) and pred_p = this(5)"], ["proof (state)\nthis:\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  \\<forall>z. p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u)\n\ngoal (1 subgoal):\n 1. \\<And>f T f' l p p'.\n       \\<lbrakk>Obj f T => Obj f' T;\n        \\<forall>z.\n           Obj f T => z \\<longrightarrow>\n           (\\<exists>u. Obj f' T => u \\<and> z => u);\n        l \\<in> dom f; p => p';\n        \\<forall>z.\n           p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u);\n        lc (Obj f T); lc p\\<rbrakk>\n       \\<Longrightarrow> \\<forall>z.\n                            Call (Obj f T) l p => z \\<longrightarrow>\n                            (\\<exists>u.\n                                the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                                u \\<and>\n                                z => u)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>z.\n       Call (Obj f T) l p => z \\<longrightarrow>\n       (\\<exists>u.\n           the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u)", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Call (Obj f T) l p => z \\<Longrightarrow>\n       \\<exists>u.\n          the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       Call (Obj f T) l p => z \\<Longrightarrow>\n       \\<exists>u.\n          the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u", "assume \"Call (Obj f T) l p \\<Rightarrow>\\<^sub>\\<beta> z\""], ["proof (state)\nthis:\n  Call (Obj f T) l p => z\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       Call (Obj f T) l p => z \\<Longrightarrow>\n       \\<exists>u.\n          the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u", "thus \"\\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> u \\<and> z \\<Rightarrow>\\<^sub>\\<beta> u\""], ["proof (prove)\nusing this:\n  Call (Obj f T) l p => z\n\ngoal (1 subgoal):\n 1. \\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u", "proof (induct rule: Call_par_red)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "(* beta: case Call \n             Call (Obj fa T) l pa \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>) \n           \\<and> the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>) *)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "case (call a pa)"], ["proof (state)\nthis:\n  Obj f T => a\n  p => pa\n  z = Call a l pa\n\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "then"], ["proof (chain)\npicking this:\n  Obj f T => a\n  p => pa\n  z = Call a l pa", "obtain fa where \n          \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\" and \"z = Call (Obj fa T) l pa\""], ["proof (prove)\nusing this:\n  Obj f T => a\n  p => pa\n  z = Call a l pa\n\ngoal (1 subgoal):\n 1. (\\<And>fa.\n        \\<lbrakk>Obj f T => Obj fa T; z = Call (Obj fa T) l pa\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Obj f T => Obj fa T\n  z = Call (Obj fa T) l pa\n\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "from \n          this(1) \\<open>p \\<Rightarrow>\\<^sub>\\<beta> pa\\<close> pred_obj pred_p"], ["proof (chain)\npicking this:\n  Obj f T => Obj fa T\n  p => pa\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  \\<forall>z. p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u)", "obtain b pb where \n          \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> b\" and \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> b\" and \n          \"p' \\<Rightarrow>\\<^sub>\\<beta> pb\" and \"pa \\<Rightarrow>\\<^sub>\\<beta> pb\""], ["proof (prove)\nusing this:\n  Obj f T => Obj fa T\n  p => pa\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  \\<forall>z. p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u)\n\ngoal (1 subgoal):\n 1. (\\<And>b pb.\n        \\<lbrakk>Obj f' T => b; Obj fa T => b; p' => pb; pa => pb\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim allE impE exE conjE, simp)"], ["proof (state)\nthis:\n  Obj f' T => b\n  Obj fa T => b\n  p' => pb\n  pa => pb\n\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "with par_beta_lc[OF this(1)] par_beta_lc[OF this(2)]"], ["proof (chain)\npicking this:\n  lc (Obj f' T) \\<and> lc b\n  lc (Obj fa T) \\<and> lc b\n  Obj f' T => b\n  Obj fa T => b\n  p' => pb\n  pa => pb", "obtain fb where \n          \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj f' T)\" and\n          \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj fa T)\""], ["proof (prove)\nusing this:\n  lc (Obj f' T) \\<and> lc b\n  lc (Obj fa T) \\<and> lc b\n  Obj f' T => b\n  Obj fa T => b\n  p' => pb\n  pa => pb\n\ngoal (1 subgoal):\n 1. (\\<And>fb.\n        \\<lbrakk>Obj f' T => Obj fb T; lc (Obj f' T); Obj fa T => Obj fb T;\n         lc (Obj fa T)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Obj f' T => Obj fb T\n  lc (Obj f' T)\n  Obj fa T => Obj fb T\n  lc (Obj fa T)\n\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "from this(1) \\<open>l \\<in> dom f\\<close> \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close> \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\\<close>"], ["proof (chain)\npicking this:\n  Obj f' T => Obj fb T\n  l \\<in> dom f\n  Obj f T => Obj f' T\n  Obj f T => Obj fa T", "have \"l \\<in> dom f'\" and \"l \\<in> dom fa\""], ["proof (prove)\nusing this:\n  Obj f' T => Obj fb T\n  l \\<in> dom f\n  Obj f T => Obj f' T\n  Obj f T => Obj fa T\n\ngoal (1 subgoal):\n 1. l \\<in> dom f' &&& l \\<in> dom fa", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f'\n  l \\<in> dom fa\n\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "from \\<open>p' \\<Rightarrow>\\<^sub>\\<beta> pb\\<close> \\<open>pa \\<Rightarrow>\\<^sub>\\<beta> pb\\<close> par_beta_lc"], ["proof (chain)\npicking this:\n  p' => pb\n  pa => pb\n  ?t => ?t' \\<Longrightarrow> lc ?t \\<and> lc ?t'", "have \"p' \\<Rightarrow>\\<^sub>\\<beta> pb\" and \"lc p'\" and \"pa \\<Rightarrow>\\<^sub>\\<beta> pb\" and \"lc pa\""], ["proof (prove)\nusing this:\n  p' => pb\n  pa => pb\n  ?t => ?t' \\<Longrightarrow> lc ?t \\<and> lc ?t'\n\ngoal (1 subgoal):\n 1. (p' => pb &&& lc p') &&& pa => pb &&& lc pa", "by auto"], ["proof (state)\nthis:\n  p' => pb\n  lc p'\n  pa => pb\n  lc pa\n\ngoal (2 subgoals):\n 1. \\<And>t u'.\n       \\<lbrakk>Obj f T => t; p => u'; z = Call t l u'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u\n 2. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "from \n          par_beta.pbeta_beta[OF \\<open>Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close> \\<open>l \\<in> dom fa\\<close>\n                                  this(3) \\<open>lc (Obj fa T)\\<close> this(4)] \n          par_beta_beta[OF \\<open>l \\<in> dom f'\\<close> \\<open>Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close>\n                            this(1) \\<open>lc (Obj f' T)\\<close> this(2)]\n          \\<open>z = Call (Obj fa T) l pa\\<close>"], ["proof (chain)\npicking this:\n  Call (Obj fa T) l pa => (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  z = Call (Obj fa T) l pa", "show ?case"], ["proof (prove)\nusing this:\n  Call (Obj fa T) l pa => (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  z = Call (Obj fa T) l pa\n\ngoal (1 subgoal):\n 1. \\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u", "by (rule_tac x = \"(the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "(* beta: case beta \n             the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n          \\<and>  the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup> \\<Rightarrow>\\<^sub>\\<beta> (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>) *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "case (beta f'' fa Ta pa)"], ["proof (state)\nthis:\n  Obj f'' Ta = Obj f T\n  Obj f'' Ta => Obj fa Ta\n  l \\<in> dom fa\n  p => pa\n  z = (the (fa l)\\<^bsup>[Obj fa Ta,pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "hence \"Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\" and \"z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)\""], ["proof (prove)\nusing this:\n  Obj f'' Ta = Obj f T\n  Obj f'' Ta => Obj fa Ta\n  l \\<in> dom fa\n  p => pa\n  z = (the (fa l)\\<^bsup>[Obj fa Ta,pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. Obj f T => Obj fa T &&& z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)", "by auto"], ["proof (state)\nthis:\n  Obj f T => Obj fa T\n  z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "with \\<open>p \\<Rightarrow>\\<^sub>\\<beta> pa\\<close> pred_obj pred_p"], ["proof (chain)\npicking this:\n  p => pa\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  \\<forall>z. p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u)\n  Obj f T => Obj fa T\n  z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)", "obtain b pb where \n          \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> b\" and \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> b\" and\n          \"p' \\<Rightarrow>\\<^sub>\\<beta> pb\" and \"pa \\<Rightarrow>\\<^sub>\\<beta> pb\""], ["proof (prove)\nusing this:\n  p => pa\n  \\<forall>z.\n     Obj f T => z \\<longrightarrow>\n     (\\<exists>u. Obj f' T => u \\<and> z => u)\n  \\<forall>z. p => z \\<longrightarrow> (\\<exists>u. p' => u \\<and> z => u)\n  Obj f T => Obj fa T\n  z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. (\\<And>b pb.\n        \\<lbrakk>Obj f' T => b; Obj fa T => b; p' => pb; pa => pb\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim allE impE exE conjE, simp)"], ["proof (state)\nthis:\n  Obj f' T => b\n  Obj fa T => b\n  p' => pb\n  pa => pb\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "with par_beta_lc"], ["proof (chain)\npicking this:\n  ?t => ?t' \\<Longrightarrow> lc ?t \\<and> lc ?t'\n  Obj f' T => b\n  Obj fa T => b\n  p' => pb\n  pa => pb", "obtain fb where \n          \"Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj f' T)\" and \"lc p'\" and\n          \"Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\" and \"lc (Obj fa T)\" and \"lc pa\""], ["proof (prove)\nusing this:\n  ?t => ?t' \\<Longrightarrow> lc ?t \\<and> lc ?t'\n  Obj f' T => b\n  Obj fa T => b\n  p' => pb\n  pa => pb\n\ngoal (1 subgoal):\n 1. (\\<And>fb.\n        \\<lbrakk>Obj f' T => Obj fb T; lc (Obj f' T); lc p';\n         Obj fa T => Obj fb T; lc (Obj fa T); lc pa\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Obj f' T => Obj fb T\n  lc (Obj f' T)\n  lc p'\n  Obj fa T => Obj fb T\n  lc (Obj fa T)\n  lc pa\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "from \\<open>l \\<in> dom f\\<close> \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj f' T\\<close> \\<open>Obj f T \\<Rightarrow>\\<^sub>\\<beta> Obj fa T\\<close>"], ["proof (chain)\npicking this:\n  l \\<in> dom f\n  Obj f T => Obj f' T\n  Obj f T => Obj fa T", "have \"l \\<in> dom f'\" and \"l \\<in> dom fa\""], ["proof (prove)\nusing this:\n  l \\<in> dom f\n  Obj f T => Obj f' T\n  Obj f T => Obj fa T\n\ngoal (1 subgoal):\n 1. l \\<in> dom f' &&& l \\<in> dom fa", "by auto"], ["proof (state)\nthis:\n  l \\<in> dom f'\n  l \\<in> dom fa\n\ngoal (1 subgoal):\n 1. \\<And>fa f'a Ta u'.\n       \\<lbrakk>Obj fa Ta = Obj f T; Obj fa Ta => Obj f'a Ta;\n        l \\<in> dom f'a; p => u';\n        z = (the (f'a l)\\<^bsup>[Obj f'a Ta,u']\\<^esup>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n                            u \\<and>\n                            z => u", "from\n          par_beta_beta[OF \\<open>l \\<in> dom f'\\<close> \\<open>Obj f' T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close> \n                           \\<open>p' \\<Rightarrow>\\<^sub>\\<beta> pb\\<close> \\<open>lc (Obj f' T)\\<close> \\<open>lc p'\\<close>]\n          par_beta_beta[OF \\<open>l \\<in> dom fa\\<close> \\<open>Obj fa T \\<Rightarrow>\\<^sub>\\<beta> Obj fb T\\<close> \n                           \\<open>pa \\<Rightarrow>\\<^sub>\\<beta> pb\\<close> \\<open>lc (Obj fa T)\\<close> \\<open>lc pa\\<close>]\n          \\<open>z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)\\<close>"], ["proof (chain)\npicking this:\n  the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)", "show ?case"], ["proof (prove)\nusing this:\n  the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup> =>\n  (the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\n  z = (the (fa l)\\<^bsup>[Obj fa T,pa]\\<^esup>)\n\ngoal (1 subgoal):\n 1. \\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u", "by (rule_tac x = \"(the (fb l)\\<^bsup>[Obj fb T,pb]\\<^esup>)\" in exI, simp)"], ["proof (state)\nthis:\n  \\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>z.\n     Call (Obj f T) l p => z \\<longrightarrow>\n     (\\<exists>u.\n         the (f' l)\\<^bsup>[Obj f' T,p']\\<^esup> => u \\<and> z => u)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>z. x => z \\<longrightarrow> (\\<exists>u. y => u \\<and> z => u)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Confluence (classical not via complete developments)\\<close>"], ["", "theorem beta_confluent: \"confluent beta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. confluent (->)", "by (rule diamond_par_beta diamond_to_confluence\n      par_beta_subset_beta beta_subset_par_beta)+"], ["", "end"]]}